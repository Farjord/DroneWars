function v2(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ca(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yg={exports:{}},Qc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC;function Zk(){if(TC)return Qc;TC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return Qc.Fragment=t,Qc.jsx=n,Qc.jsxs=n,Qc}var DC;function eM(){return DC||(DC=1,yg.exports=Zk()),yg.exports}var d=eM(),vg={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC;function tM(){if(NC)return Ve;NC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function y($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function A($,q,V){this.props=$,this.context=q,this.refs=C,this.updater=V||x}A.prototype.isReactComponent={},A.prototype.setState=function($,q){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,q,"setState")},A.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function w(){}w.prototype=A.prototype;function P($,q,V){this.props=$,this.context=q,this.refs=C,this.updater=V||x}var T=P.prototype=new w;T.constructor=P,S(T,A.prototype),T.isPureReactComponent=!0;var N=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function k($,q,V,ne,ye,Se){return V=Se.ref,{$$typeof:e,type:$,key:q,ref:V!==void 0?V:null,props:Se}}function z($,q){return k($.type,q,void 0,void 0,void 0,$.props)}function F($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function M($){var q={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(V){return q[V]})}var R=/\/+/g;function U($,q){return typeof $=="object"&&$!==null&&$.key!=null?M(""+$.key):q.toString(36)}function W(){}function Z($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(W,W):($.status="pending",$.then(function(q){$.status==="pending"&&($.status="fulfilled",$.value=q)},function(q){$.status==="pending"&&($.status="rejected",$.reason=q)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function Q($,q,V,ne,ye){var Se=typeof $;(Se==="undefined"||Se==="boolean")&&($=null);var Ce=!1;if($===null)Ce=!0;else switch(Se){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch($.$$typeof){case e:case t:Ce=!0;break;case h:return Ce=$._init,Q(Ce($._payload),q,V,ne,ye)}}if(Ce)return ye=ye($),Ce=ne===""?"."+U($,0):ne,N(ye)?(V="",Ce!=null&&(V=Ce.replace(R,"$&/")+"/"),Q(ye,q,V,"",function(be){return be})):ye!=null&&(F(ye)&&(ye=z(ye,V+(ye.key==null||$&&$.key===ye.key?"":(""+ye.key).replace(R,"$&/")+"/")+Ce)),q.push(ye)),1;Ce=0;var Me=ne===""?".":ne+":";if(N($))for(var qe=0;qe<$.length;qe++)ne=$[qe],Se=Me+U(ne,qe),Ce+=Q(ne,q,V,Se,ye);else if(qe=y($),typeof qe=="function")for($=qe.call($),qe=0;!(ne=$.next()).done;)ne=ne.value,Se=Me+U(ne,qe++),Ce+=Q(ne,q,V,Se,ye);else if(Se==="object"){if(typeof $.then=="function")return Q(Z($),q,V,ne,ye);throw q=String($),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function I($,q,V){if($==null)return $;var ne=[],ye=0;return Q($,ne,"","",function(Se){return q.call(V,Se,ye++)}),ne}function G($){if($._status===-1){var q=$._result;q=q(),q.then(function(V){($._status===0||$._status===-1)&&($._status=1,$._result=V)},function(V){($._status===0||$._status===-1)&&($._status=2,$._result=V)}),$._status===-1&&($._status=0,$._result=q)}if($._status===1)return $._result.default;throw $._result}var ie=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function le(){}return Ve.Children={map:I,forEach:function($,q,V){I($,function(){q.apply(this,arguments)},V)},count:function($){var q=0;return I($,function(){q++}),q},toArray:function($){return I($,function(q){return q})||[]},only:function($){if(!F($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Ve.Component=A,Ve.Fragment=n,Ve.Profiler=i,Ve.PureComponent=P,Ve.StrictMode=r,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,Ve.__COMPILER_RUNTIME={__proto__:null,c:function($){return _.H.useMemoCache($)}},Ve.cache=function($){return function(){return $.apply(null,arguments)}},Ve.cloneElement=function($,q,V){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var ne=S({},$.props),ye=$.key,Se=void 0;if(q!=null)for(Ce in q.ref!==void 0&&(Se=void 0),q.key!==void 0&&(ye=""+q.key),q)!j.call(q,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&q.ref===void 0||(ne[Ce]=q[Ce]);var Ce=arguments.length-2;if(Ce===1)ne.children=V;else if(1<Ce){for(var Me=Array(Ce),qe=0;qe<Ce;qe++)Me[qe]=arguments[qe+2];ne.children=Me}return k($.type,ye,void 0,void 0,Se,ne)},Ve.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:s,_context:$},$},Ve.createElement=function($,q,V){var ne,ye={},Se=null;if(q!=null)for(ne in q.key!==void 0&&(Se=""+q.key),q)j.call(q,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ye[ne]=q[ne]);var Ce=arguments.length-2;if(Ce===1)ye.children=V;else if(1<Ce){for(var Me=Array(Ce),qe=0;qe<Ce;qe++)Me[qe]=arguments[qe+2];ye.children=Me}if($&&$.defaultProps)for(ne in Ce=$.defaultProps,Ce)ye[ne]===void 0&&(ye[ne]=Ce[ne]);return k($,Se,void 0,void 0,null,ye)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function($){return{$$typeof:u,render:$}},Ve.isValidElement=F,Ve.lazy=function($){return{$$typeof:h,_payload:{_status:-1,_result:$},_init:G}},Ve.memo=function($,q){return{$$typeof:f,type:$,compare:q===void 0?null:q}},Ve.startTransition=function($){var q=_.T,V={};_.T=V;try{var ne=$(),ye=_.S;ye!==null&&ye(V,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(le,ie)}catch(Se){ie(Se)}finally{_.T=q}},Ve.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},Ve.use=function($){return _.H.use($)},Ve.useActionState=function($,q,V){return _.H.useActionState($,q,V)},Ve.useCallback=function($,q){return _.H.useCallback($,q)},Ve.useContext=function($){return _.H.useContext($)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function($,q){return _.H.useDeferredValue($,q)},Ve.useEffect=function($,q,V){var ne=_.H;if(typeof V=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect($,q)},Ve.useId=function(){return _.H.useId()},Ve.useImperativeHandle=function($,q,V){return _.H.useImperativeHandle($,q,V)},Ve.useInsertionEffect=function($,q){return _.H.useInsertionEffect($,q)},Ve.useLayoutEffect=function($,q){return _.H.useLayoutEffect($,q)},Ve.useMemo=function($,q){return _.H.useMemo($,q)},Ve.useOptimistic=function($,q){return _.H.useOptimistic($,q)},Ve.useReducer=function($,q,V){return _.H.useReducer($,q,V)},Ve.useRef=function($){return _.H.useRef($)},Ve.useState=function($){return _.H.useState($)},Ve.useSyncExternalStore=function($,q,V){return _.H.useSyncExternalStore($,q,V)},Ve.useTransition=function(){return _.H.useTransition()},Ve.version="19.1.1",Ve}var OC;function Il(){return OC||(OC=1,vg.exports=tM()),vg.exports}var E=Il();const dv=Ca(E),nM=v2({__proto__:null,default:dv},[E]);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),jC=e=>{const t=aM(e);return t.charAt(0).toUpperCase()+t.slice(1)},x2=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),iM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},p)=>E.createElement("svg",{ref:p,...sM,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:x2("lucide",i),...!s&&!iM(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,h])=>E.createElement(f,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=(e,t)=>{const n=E.forwardRef(({className:r,...i},s)=>E.createElement(oM,{ref:s,iconNode:t,className:x2(`lucide-${rM(jC(e))}`,`lucide-${e}`,r),...i}));return n.displayName=jC(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cM=vt("arrow-left",lM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Ff=vt("bolt",uM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],fM=vt("book-open",dM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hM=vt("check",pM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gM=vt("chevron-down",mM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],fu=vt("chevron-up",yM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],fv=vt("copy",vM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],_C=vt("cpu",xM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],SM=vt("download",bM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],to=vt("eye",CM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],EM=vt("gamepad",AM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],PM=vt("grid-3x3",wM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],DM=vt("hand",TM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],kC=vt("layout-grid",NM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],MC=vt("list",OM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yl=vt("loader-circle",jM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],kM=vt("refresh-cw",_M);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],s0=vt("rocket",MM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RM=vt("rotate-ccw",IM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],IC=vt("settings",LM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xg=vt("shield-check",$M);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],zM=vt("shield",BM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],HM=vt("sword",UM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],qM=vt("upload",GM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],FM=vt("users",YM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],KM=vt("wifi-off",VM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],RC=vt("wifi",WM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ln=vt("x",XM),K=(e,t,n=null)=>{};var bg={exports:{}},Jc={},Sg={exports:{}},Cg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LC;function QM(){return LC||(LC=1,(function(e){function t(I,G){var ie=I.length;I.push(G);e:for(;0<ie;){var le=ie-1>>>1,$=I[le];if(0<i($,G))I[le]=G,I[ie]=$,ie=le;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var G=I[0],ie=I.pop();if(ie!==G){I[0]=ie;e:for(var le=0,$=I.length,q=$>>>1;le<q;){var V=2*(le+1)-1,ne=I[V],ye=V+1,Se=I[ye];if(0>i(ne,ie))ye<$&&0>i(Se,ne)?(I[le]=Se,I[ye]=ie,le=ye):(I[le]=ne,I[V]=ie,le=V);else if(ye<$&&0>i(Se,ie))I[le]=Se,I[ye]=ie,le=ye;else break e}}return G}function i(I,G){var ie=I.sortIndex-G.sortIndex;return ie!==0?ie:I.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var p=[],f=[],h=1,g=null,y=3,x=!1,S=!1,C=!1,A=!1,w=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function N(I){for(var G=n(f);G!==null;){if(G.callback===null)r(f);else if(G.startTime<=I)r(f),G.sortIndex=G.expirationTime,t(p,G);else break;G=n(f)}}function _(I){if(C=!1,N(I),!S)if(n(p)!==null)S=!0,j||(j=!0,U());else{var G=n(f);G!==null&&Q(_,G.startTime-I)}}var j=!1,k=-1,z=5,F=-1;function M(){return A?!0:!(e.unstable_now()-F<z)}function R(){if(A=!1,j){var I=e.unstable_now();F=I;var G=!0;try{e:{S=!1,C&&(C=!1,P(k),k=-1),x=!0;var ie=y;try{t:{for(N(I),g=n(p);g!==null&&!(g.expirationTime>I&&M());){var le=g.callback;if(typeof le=="function"){g.callback=null,y=g.priorityLevel;var $=le(g.expirationTime<=I);if(I=e.unstable_now(),typeof $=="function"){g.callback=$,N(I),G=!0;break t}g===n(p)&&r(p),N(I)}else r(p);g=n(p)}if(g!==null)G=!0;else{var q=n(f);q!==null&&Q(_,q.startTime-I),G=!1}}break e}finally{g=null,y=ie,x=!1}G=void 0}}finally{G?U():j=!1}}}var U;if(typeof T=="function")U=function(){T(R)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=R,U=function(){Z.postMessage(null)}}else U=function(){w(R,0)};function Q(I,G){k=w(function(){I(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(I){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var ie=y;y=G;try{return I()}finally{y=ie}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(I,G){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var ie=y;y=I;try{return G()}finally{y=ie}},e.unstable_scheduleCallback=function(I,G,ie){var le=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?le+ie:le):ie=le,I){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ie+$,I={id:h++,callback:G,priorityLevel:I,startTime:ie,expirationTime:$,sortIndex:-1},ie>le?(I.sortIndex=ie,t(f,I),n(p)===null&&I===n(f)&&(C?(P(k),k=-1):C=!0,Q(_,ie-le))):(I.sortIndex=$,t(p,I),S||x||(S=!0,j||(j=!0,U()))),I},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(I){var G=y;return function(){var ie=y;y=G;try{return I.apply(this,arguments)}finally{y=ie}}}})(Cg)),Cg}var $C;function JM(){return $C||($C=1,Sg.exports=QM()),Sg.exports}var Ag={exports:{}},Rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC;function ZM(){if(BC)return Rn;BC=1;var e=Il();function t(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(p,f,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:p,containerInfo:f,implementation:h}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Rn.createPortal=function(p,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(p,f,null,h)},Rn.flushSync=function(p){var f=l.T,h=r.p;try{if(l.T=null,r.p=2,p)return p()}finally{l.T=f,r.p=h,r.d.f()}},Rn.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(p,f))},Rn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Rn.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var h=f.as,g=u(h,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:x}):h==="script"&&r.d.X(p,{crossOrigin:g,integrity:y,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Rn.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=u(f.as,f.crossOrigin);r.d.M(p,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(p)},Rn.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,g=u(h,f.crossOrigin);r.d.L(p,h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Rn.preloadModule=function(p,f){if(typeof p=="string")if(f){var h=u(f.as,f.crossOrigin);r.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(p)},Rn.requestFormReset=function(p){r.d.r(p)},Rn.unstable_batchedUpdates=function(p,f){return p(f)},Rn.useFormState=function(p,f,h){return l.H.useFormState(p,f,h)},Rn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Rn.version="19.1.1",Rn}var zC;function b2(){if(zC)return Ag.exports;zC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ag.exports=ZM(),Ag.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC;function eI(){if(UC)return Jc;UC=1;var e=JM(),t=Il(),n=b2();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function p(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,m=o;;){var v=c.return;if(v===null)break;var b=v.alternate;if(b===null){if(m=v.return,m!==null){c=m;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===c)return u(v),a;if(b===m)return u(v),o;b=b.sibling}throw Error(r(188))}if(c.return!==m.return)c=v,m=b;else{for(var D=!1,O=v.child;O;){if(O===c){D=!0,c=v,m=b;break}if(O===m){D=!0,m=v,c=b;break}O=O.sibling}if(!D){for(O=b.child;O;){if(O===c){D=!0,c=b,m=v;break}if(O===m){D=!0,m=b,c=v;break}O=O.sibling}if(!D)throw Error(r(189))}}if(c.alternate!==m)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function f(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=f(a),o!==null)return o;a=a.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function U(a){return a===null||typeof a!="object"?null:(a=R&&a[R]||a["@@iterator"],typeof a=="function"?a:null)}var W=Symbol.for("react.client.reference");function Z(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===W?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case A:return"Profiler";case C:return"StrictMode";case _:return"Suspense";case j:return"SuspenseList";case F:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case T:return(a.displayName||"Context")+".Provider";case P:return(a._context.displayName||"Context")+".Consumer";case N:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case k:return o=a.displayName||null,o!==null?o:Z(a.type)||"Memo";case z:o=a._payload,a=a._init;try{return Z(a(o))}catch{}}return null}var Q=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},le=[],$=-1;function q(a){return{current:a}}function V(a){0>$||(a.current=le[$],le[$]=null,$--)}function ne(a,o){$++,le[$]=a.current,a.current=o}var ye=q(null),Se=q(null),Ce=q(null),Me=q(null);function qe(a,o){switch(ne(Ce,o),ne(Se,a),ne(ye,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?tC(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=tC(o),a=nC(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}V(ye),ne(ye,a)}function be(){V(ye),V(Se),V(Ce)}function we(a){a.memoizedState!==null&&ne(Me,a);var o=ye.current,c=nC(o,a.type);o!==c&&(ne(Se,a),ne(ye,c))}function Oe(a){Se.current===a&&(V(ye),V(Se)),Me.current===a&&(V(Me),Fc._currentValue=ie)}var ge=Object.prototype.hasOwnProperty,xt=e.unstable_scheduleCallback,He=e.unstable_cancelCallback,Bt=e.unstable_shouldYield,Gt=e.unstable_requestPaint,wt=e.unstable_now,er=e.unstable_getCurrentPriorityLevel,Oo=e.unstable_ImmediatePriority,Oi=e.unstable_UserBlockingPriority,Hn=e.unstable_NormalPriority,Gn=e.unstable_LowPriority,Ea=e.unstable_IdlePriority,qn=e.log,jo=e.unstable_setDisableYieldValue,aa=null,fn=null;function On(a){if(typeof qn=="function"&&jo(a),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(aa,a)}catch{}}var jt=Math.clz32?Math.clz32:jn,qa=Math.log,Ke=Math.LN2;function jn(a){return a>>>=0,a===0?32:31-(qa(a)/Ke|0)|0}var ji=256,Ya=4194304;function ia(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function _i(a,o,c){var m=a.pendingLanes;if(m===0)return 0;var v=0,b=a.suspendedLanes,D=a.pingedLanes;a=a.warmLanes;var O=m&134217727;return O!==0?(m=O&~b,m!==0?v=ia(m):(D&=O,D!==0?v=ia(D):c||(c=O&~a,c!==0&&(v=ia(c))))):(O=m&~b,O!==0?v=ia(O):D!==0?v=ia(D):c||(c=m&~a,c!==0&&(v=ia(c)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:v}function gr(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function Fa(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _o(){var a=ji;return ji<<=1,(ji&4194048)===0&&(ji=256),a}function Ts(){var a=Ya;return Ya<<=1,(Ya&62914560)===0&&(Ya=4194304),a}function L(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function oe(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function de(a,o,c,m,v,b){var D=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var O=a.entanglements,H=a.expirationTimes,ee=a.hiddenUpdates;for(c=D&~c;0<c;){var ue=31-jt(c),pe=1<<ue;O[ue]=0,H[ue]=-1;var re=ee[ue];if(re!==null)for(ee[ue]=null,ue=0;ue<re.length;ue++){var ae=re[ue];ae!==null&&(ae.lane&=-536870913)}c&=~pe}m!==0&&ce(a,m,0),b!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=b&~(D&~o))}function ce(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var m=31-jt(o);a.entangledLanes|=o,a.entanglements[m]=a.entanglements[m]|1073741824|c&4194090}function he(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var m=31-jt(c),v=1<<m;v&o|a[m]&o&&(a[m]|=o),c&=~v}}function xe(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function je(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function nn(){var a=G.p;return a!==0?a:(a=window.event,a===void 0?32:SC(a.type))}function Pt(a,o){var c=G.p;try{return G.p=a,o()}finally{G.p=c}}var Ct=Math.random().toString(36).slice(2),Ge="__reactFiber$"+Ct,Fe="__reactProps$"+Ct,Tt="__reactContainer$"+Ct,pn="__reactEvents$"+Ct,Ds="__reactListeners$"+Ct,Ku="__reactHandles$"+Ct,ki="__reactResources$"+Ct,Mi="__reactMarker$"+Ct;function Wu(a){delete a[Ge],delete a[Fe],delete a[pn],delete a[Ds],delete a[Ku]}function Ns(a){var o=a[Ge];if(o)return o;for(var c=a.parentNode;c;){if(o=c[Tt]||c[Ge]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=sC(a);a!==null;){if(c=a[Ge])return c;a=sC(a)}return o}a=c,c=a.parentNode}return null}function ft(a){if(a=a[Ge]||a[Tt]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function sa(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function Ir(a){var o=a[ki];return o||(o=a[ki]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function zt(a){a[Mi]=!0}var tr=new Set,oa={};function nr(a,o){Yn(a,o),Yn(a+"Capture",o)}function Yn(a,o){for(oa[a]=o,a=0;a<o.length;a++)tr.add(o[a])}var _n=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Va={},wa={};function Vl(a){return ge.call(wa,a)?!0:ge.call(Va,a)?!1:_n.test(a)?wa[a]=!0:(Va[a]=!0,!1)}function Pa(a,o,c){if(Vl(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function Fn(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function kn(a,o,c,m){if(m===null)a.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+m)}}var Ka,pt;function Cn(a){if(Ka===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Ka=o&&o[1]||"",pt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ka+a+pt}var Kl=!1;function ko(a,o){if(!a||Kl)return"";Kl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ae){var re=ae}Reflect.construct(a,[],pe)}else{try{pe.call()}catch(ae){re=ae}a.call(pe.prototype)}}else{try{throw Error()}catch(ae){re=ae}(pe=a())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ae){if(ae&&re&&typeof ae.stack=="string")return[ae.stack,re.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=m.DetermineComponentFrameRoot(),D=b[0],O=b[1];if(D&&O){var H=D.split(`
`),ee=O.split(`
`);for(v=m=0;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;for(;v<ee.length&&!ee[v].includes("DetermineComponentFrameRoot");)v++;if(m===H.length||v===ee.length)for(m=H.length-1,v=ee.length-1;1<=m&&0<=v&&H[m]!==ee[v];)v--;for(;1<=m&&0<=v;m--,v--)if(H[m]!==ee[v]){if(m!==1||v!==1)do if(m--,v--,0>v||H[m]!==ee[v]){var ue=`
`+H[m].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=m&&0<=v);break}}}finally{Kl=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?Cn(c):""}function gh(a){switch(a.tag){case 26:case 27:case 5:return Cn(a.type);case 16:return Cn("Lazy");case 13:return Cn("Suspense");case 19:return Cn("SuspenseList");case 0:case 15:return ko(a.type,!1);case 11:return ko(a.type.render,!1);case 1:return ko(a.type,!0);case 31:return Cn("Activity");default:return""}}function Wl(a){try{var o="";do o+=gh(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function rr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Xl(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function la(a){var o=Xl(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),m=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,b=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return v.call(this)},set:function(D){m=""+D,b.call(this,D)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function ca(a){a._valueTracker||(a._valueTracker=la(a))}function Xu(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),m="";return a&&(m=Xl(a)?a.checked?"true":"false":a.value),a=m,a!==c?(o.setValue(a),!0):!1}function Os(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Qu=/[\n"\\]/g;function Kt(a){return a.replace(Qu,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ii(a,o,c,m,v,b,D,O){a.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.type=D:a.removeAttribute("type"),o!=null?D==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+rr(o)):a.value!==""+rr(o)&&(a.value=""+rr(o)):D!=="submit"&&D!=="reset"||a.removeAttribute("value"),o!=null?Rr(a,D,rr(o)):c!=null?Rr(a,D,rr(c)):m!=null&&a.removeAttribute("value"),v==null&&b!=null&&(a.defaultChecked=!!b),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+rr(O):a.removeAttribute("name")}function js(a,o,c,m,v,b,D,O){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;c=c!=null?""+rr(c):"",o=o!=null?""+rr(o):c,O||o===a.value||(a.value=o),a.defaultValue=o}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=O?a.checked:!!m,a.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(a.name=D)}function Rr(a,o,c){o==="number"&&Os(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function Ta(a,o,c,m){if(a=a.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<a.length;c++)v=o.hasOwnProperty("$"+a[c].value),a[c].selected!==v&&(a[c].selected=v),v&&m&&(a[c].defaultSelected=!0)}else{for(c=""+rr(c),o=null,v=0;v<a.length;v++){if(a[v].value===c){a[v].selected=!0,m&&(a[v].defaultSelected=!0);return}o!==null||a[v].disabled||(o=a[v])}o!==null&&(o.selected=!0)}}function Mo(a,o,c){if(o!=null&&(o=""+rr(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+rr(c):""}function Wa(a,o,c,m){if(o==null){if(m!=null){if(c!=null)throw Error(r(92));if(Q(m)){if(1<m.length)throw Error(r(93));m=m[0]}c=m}c==null&&(c=""),o=c}c=rr(o),a.defaultValue=c,m=a.textContent,m===c&&m!==""&&m!==null&&(a.value=m)}function Da(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var Io=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(a,o,c){var m=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":m?a.setProperty(o,c):typeof c!="number"||c===0||Io.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function Jl(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var v in o)m=o[v],o.hasOwnProperty(v)&&c[v]!==m&&Ql(a,v,m)}else for(var b in o)o.hasOwnProperty(b)&&Ql(a,b,o[b])}function Zl(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ju=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ab=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ec(a){return Ab.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var _s=null;function Ro(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ks=null,Ms=null;function tc(a){var o=ft(a);if(o&&(a=o.stateNode)){var c=a[Fe]||null;e:switch(a=o.stateNode,o.type){case"input":if(Ii(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Kt(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var m=c[o];if(m!==a&&m.form===a.form){var v=m[Fe]||null;if(!v)throw Error(r(90));Ii(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<c.length;o++)m=c[o],m.form===a.form&&Xu(m)}break e;case"textarea":Mo(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Ta(a,!!c.multiple,o,!1)}}}var Lo=!1;function Is(a,o,c){if(Lo)return a(o,c);Lo=!0;try{var m=a(o);return m}finally{if(Lo=!1,(ks!==null||Ms!==null)&&(Qd(),ks&&(o=ks,a=Ms,Ms=ks=null,tc(o),a)))for(o=0;o<a.length;o++)tc(a[o])}}function ua(a,o){var c=a.stateNode;if(c===null)return null;var m=c[Fe]||null;if(m===null)return null;c=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),da=!1;if(Lr)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){da=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{da=!1}var $r=null,nc=null,Rs=null;function nt(){if(Rs)return Rs;var a,o=nc,c=o.length,m,v="value"in $r?$r.value:$r.textContent,b=v.length;for(a=0;a<c&&o[a]===v[a];a++);var D=c-a;for(m=1;m<=D&&o[c-m]===v[b-m];m++);return Rs=v.slice(a,1<m?1-m:void 0)}function fa(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function pa(){return!0}function rc(){return!1}function Vn(a){function o(c,m,v,b,D){this._reactName=c,this._targetInst=v,this.type=m,this.nativeEvent=b,this.target=D,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(c=a[O],this[O]=c?c(b):b[O]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?pa:rc,this.isPropagationStopped=rc,this}return h(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),o}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wt=Vn(Ri),An=h({},Ri,{view:0,detail:0}),Eb=Vn(An),ac,ic,Xa,sc=h({},An,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cc,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Xa&&(Xa&&a.type==="mousemove"?(ac=a.screenX-Xa.screenX,ic=a.screenY-Xa.screenY):ic=ac=0,Xa=a),ac)},movementY:function(a){return"movementY"in a?a.movementY:ic}}),Zu=Vn(sc),wb=h({},sc,{dataTransfer:0}),Pb=Vn(wb),yh=h({},An,{relatedTarget:0}),oc=Vn(yh),vh=h({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),Re=Vn(vh),et=h({},Ri,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Ls=Vn(et),$o=h({},Ri,{data:0}),lc=Vn($o),Bo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ed={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},td={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nd(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=td[a])?!!o[a]:!1}function cc(){return nd}var xh=h({},An,{key:function(a){if(a.key){var o=Bo[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=fa(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ed[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cc,charCode:function(a){return a.type==="keypress"?fa(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?fa(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),bh=Vn(xh),rt=h({},sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rd=Vn(rt),Sh=h({},An,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cc}),Ch=Vn(Sh),$s=h({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kn=Vn($s),ar=h({},sc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),zo=Vn(ar),ad=h({},Ri,{newState:0,oldState:0}),Ah=Vn(ad),uc=[9,13,27,32],dc=Lr&&"CompositionEvent"in window,Bs=null;Lr&&"documentMode"in document&&(Bs=document.documentMode);var Eh=Lr&&"TextEvent"in window&&!Bs,id=Lr&&(!dc||Bs&&8<Bs&&11>=Bs),sd=" ",od=!1;function ld(a,o){switch(a){case"keyup":return uc.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Li=!1;function wh(a,o){switch(a){case"compositionend":return cd(o);case"keypress":return o.which!==32?null:(od=!0,sd);case"textInput":return a=o.data,a===sd&&od?null:a;default:return null}}function ud(a,o){if(Li)return a==="compositionend"||!dc&&ld(a,o)?(a=nt(),Rs=nc=$r=null,Li=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return id&&o.locale!=="ko"?null:o.data;default:return null}}var Ph={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dd(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Ph[a.type]:o==="textarea"}function fd(a,o,c,m){ks?Ms?Ms.push(m):Ms=[m]:ks=m,o=rf(o,"onChange"),0<o.length&&(c=new Wt("onChange","change",null,c,m),a.push({event:c,listeners:o}))}var zs=null,$i=null;function Th(a){X1(a,0)}function Uo(a){var o=sa(a);if(Xu(o))return a}function pd(a,o){if(a==="change")return o}var hd=!1;if(Lr){var fc;if(Lr){var Ho="oninput"in document;if(!Ho){var md=document.createElement("div");md.setAttribute("oninput","return;"),Ho=typeof md.oninput=="function"}fc=Ho}else fc=!1;hd=fc&&(!document.documentMode||9<document.documentMode)}function gd(){zs&&(zs.detachEvent("onpropertychange",yd),$i=zs=null)}function yd(a){if(a.propertyName==="value"&&Uo($i)){var o=[];fd(o,$i,a,Ro(a)),Is(Th,o)}}function Dh(a,o,c){a==="focusin"?(gd(),zs=o,$i=c,zs.attachEvent("onpropertychange",yd)):a==="focusout"&&gd()}function vd(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Uo($i)}function Nh(a,o){if(a==="click")return Uo(o)}function Oh(a,o){if(a==="input"||a==="change")return Uo(o)}function jh(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var B=typeof Object.is=="function"?Object.is:jh;function te(a,o){if(B(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),m=Object.keys(o);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var v=c[m];if(!ge.call(o,v)||!B(a[v],o[v]))return!1}return!0}function ve(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function me(a,o){var c=ve(a);a=0;for(var m;c;){if(c.nodeType===3){if(m=a+c.textContent.length,a<=o&&m>=o)return{node:c,offset:o-a};a=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ve(c)}}function Ae(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Ae(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Be(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Os(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=Os(a.document)}return o}function Ye(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var Dt=Lr&&"documentMode"in document&&11>=document.documentMode,Mn=null,Bi=null,Na=null,pc=!1;function zi(a,o,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;pc||Mn==null||Mn!==Os(m)||(m=Mn,"selectionStart"in m&&Ye(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Na&&te(Na,m)||(Na=m,m=rf(Bi,"onSelect"),0<m.length&&(o=new Wt("onSelect","select",null,o,c),a.push({event:o,listeners:m}),o.target=Mn)))}function Qa(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var Ui={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionrun:Qa("Transition","TransitionRun"),transitionstart:Qa("Transition","TransitionStart"),transitioncancel:Qa("Transition","TransitionCancel"),transitionend:Qa("Transition","TransitionEnd")},_h={},Tb={};Lr&&(Tb=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function Us(a){if(_h[a])return _h[a];if(!Ui[a])return a;var o=Ui[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in Tb)return _h[a]=o[c];return a}var Db=Us("animationend"),Nb=Us("animationiteration"),Ob=Us("animationstart"),I_=Us("transitionrun"),R_=Us("transitionstart"),L_=Us("transitioncancel"),jb=Us("transitionend"),_b=new Map,kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kh.push("scrollEnd");function ha(a,o){_b.set(a,o),nr(o,[a])}var kb=new WeakMap;function Br(a,o){if(typeof a=="object"&&a!==null){var c=kb.get(a);return c!==void 0?c:(o={value:a,source:o,stack:Wl(o)},kb.set(a,o),o)}return{value:a,source:o,stack:Wl(o)}}var zr=[],Go=0,Mh=0;function xd(){for(var a=Go,o=Mh=Go=0;o<a;){var c=zr[o];zr[o++]=null;var m=zr[o];zr[o++]=null;var v=zr[o];zr[o++]=null;var b=zr[o];if(zr[o++]=null,m!==null&&v!==null){var D=m.pending;D===null?v.next=v:(v.next=D.next,D.next=v),m.pending=v}b!==0&&Mb(c,v,b)}}function bd(a,o,c,m){zr[Go++]=a,zr[Go++]=o,zr[Go++]=c,zr[Go++]=m,Mh|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function Ih(a,o,c,m){return bd(a,o,c,m),Sd(a)}function qo(a,o){return bd(a,null,null,o),Sd(a)}function Mb(a,o,c){a.lanes|=c;var m=a.alternate;m!==null&&(m.lanes|=c);for(var v=!1,b=a.return;b!==null;)b.childLanes|=c,m=b.alternate,m!==null&&(m.childLanes|=c),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(v=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,v&&o!==null&&(v=31-jt(c),a=b.hiddenUpdates,m=a[v],m===null?a[v]=[o]:m.push(o),o.lane=c|536870912),b):null}function Sd(a){if(50<$c)throw $c=0,Um=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Yo={};function $_(a,o,c,m){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(a,o,c,m){return new $_(a,o,c,m)}function Rh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ja(a,o){var c=a.alternate;return c===null?(c=vr(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function Ib(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Cd(a,o,c,m,v,b){var D=0;if(m=a,typeof a=="function")Rh(a)&&(D=1);else if(typeof a=="string")D=zk(a,c,ye.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case F:return a=vr(31,c,o,v),a.elementType=F,a.lanes=b,a;case S:return Hs(c.children,v,b,o);case C:D=8,v|=24;break;case A:return a=vr(12,c,o,v|2),a.elementType=A,a.lanes=b,a;case _:return a=vr(13,c,o,v),a.elementType=_,a.lanes=b,a;case j:return a=vr(19,c,o,v),a.elementType=j,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case w:case T:D=10;break e;case P:D=9;break e;case N:D=11;break e;case k:D=14;break e;case z:D=16,m=null;break e}D=29,c=Error(r(130,a===null?"null":typeof a,"")),m=null}return o=vr(D,c,o,v),o.elementType=a,o.type=m,o.lanes=b,o}function Hs(a,o,c,m){return a=vr(7,a,m,o),a.lanes=c,a}function Lh(a,o,c){return a=vr(6,a,null,o),a.lanes=c,a}function $h(a,o,c){return o=vr(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Fo=[],Vo=0,Ad=null,Ed=0,Ur=[],Hr=0,Gs=null,Za=1,ei="";function qs(a,o){Fo[Vo++]=Ed,Fo[Vo++]=Ad,Ad=a,Ed=o}function Rb(a,o,c){Ur[Hr++]=Za,Ur[Hr++]=ei,Ur[Hr++]=Gs,Gs=a;var m=Za;a=ei;var v=32-jt(m)-1;m&=~(1<<v),c+=1;var b=32-jt(o)+v;if(30<b){var D=v-v%5;b=(m&(1<<D)-1).toString(32),m>>=D,v-=D,Za=1<<32-jt(o)+v|c<<v|m,ei=b+a}else Za=1<<b|c<<v|m,ei=a}function Bh(a){a.return!==null&&(qs(a,1),Rb(a,1,0))}function zh(a){for(;a===Ad;)Ad=Fo[--Vo],Fo[Vo]=null,Ed=Fo[--Vo],Fo[Vo]=null;for(;a===Gs;)Gs=Ur[--Hr],Ur[Hr]=null,ei=Ur[--Hr],Ur[Hr]=null,Za=Ur[--Hr],Ur[Hr]=null}var Wn=null,Ut=null,ot=!1,Ys=null,Oa=!1,Uh=Error(r(519));function Fs(a){var o=Error(r(418,""));throw gc(Br(o,a)),Uh}function Lb(a){var o=a.stateNode,c=a.type,m=a.memoizedProps;switch(o[Ge]=a,o[Fe]=m,c){case"dialog":Je("cancel",o),Je("close",o);break;case"iframe":case"object":case"embed":Je("load",o);break;case"video":case"audio":for(c=0;c<zc.length;c++)Je(zc[c],o);break;case"source":Je("error",o);break;case"img":case"image":case"link":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"input":Je("invalid",o),js(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),ca(o);break;case"select":Je("invalid",o);break;case"textarea":Je("invalid",o),Wa(o,m.value,m.defaultValue,m.children),ca(o)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||m.suppressHydrationWarning===!0||eC(o.textContent,c)?(m.popover!=null&&(Je("beforetoggle",o),Je("toggle",o)),m.onScroll!=null&&Je("scroll",o),m.onScrollEnd!=null&&Je("scrollend",o),m.onClick!=null&&(o.onclick=af),o=!0):o=!1,o||Fs(a)}function $b(a){for(Wn=a.return;Wn;)switch(Wn.tag){case 5:case 13:Oa=!1;return;case 27:case 3:Oa=!0;return;default:Wn=Wn.return}}function hc(a){if(a!==Wn)return!1;if(!ot)return $b(a),ot=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||rg(a.type,a.memoizedProps)),c=!c),c&&Ut&&Fs(a),$b(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){Ut=ga(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}Ut=null}}else o===27?(o=Ut,rs(a.type)?(a=og,og=null,Ut=a):Ut=o):Ut=Wn?ga(a.stateNode.nextSibling):null;return!0}function mc(){Ut=Wn=null,ot=!1}function Bb(){var a=Ys;return a!==null&&(or===null?or=a:or.push.apply(or,a),Ys=null),a}function gc(a){Ys===null?Ys=[a]:Ys.push(a)}var Hh=q(null),Vs=null,ti=null;function Hi(a,o,c){ne(Hh,o._currentValue),o._currentValue=c}function ni(a){a._currentValue=Hh.current,V(Hh)}function Gh(a,o,c){for(;a!==null;){var m=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),a===c)break;a=a.return}}function qh(a,o,c,m){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var b=v.dependencies;if(b!==null){var D=v.child;b=b.firstContext;e:for(;b!==null;){var O=b;b=v;for(var H=0;H<o.length;H++)if(O.context===o[H]){b.lanes|=c,O=b.alternate,O!==null&&(O.lanes|=c),Gh(b.return,c,a),m||(D=null);break e}b=O.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(r(341));D.lanes|=c,b=D.alternate,b!==null&&(b.lanes|=c),Gh(D,c,a),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===a){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function yc(a,o,c,m){a=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var O=v.type;B(v.pendingProps.value,D.value)||(a!==null?a.push(O):a=[O])}}else if(v===Me.current){if(D=v.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Fc):a=[Fc])}v=v.return}a!==null&&qh(o,a,c,m),o.flags|=262144}function wd(a){for(a=a.firstContext;a!==null;){if(!B(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ks(a){Vs=a,ti=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function In(a){return zb(Vs,a)}function Pd(a,o){return Vs===null&&Ks(a),zb(a,o)}function zb(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},ti===null){if(a===null)throw Error(r(308));ti=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else ti=ti.next=o;return c}var B_=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,m){a.push(m)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},z_=e.unstable_scheduleCallback,U_=e.unstable_NormalPriority,rn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yh(){return{controller:new B_,data:new Map,refCount:0}}function vc(a){a.refCount--,a.refCount===0&&z_(U_,function(){a.controller.abort()})}var xc=null,Fh=0,Ko=0,Wo=null;function H_(a,o){if(xc===null){var c=xc=[];Fh=0,Ko=Km(),Wo={status:"pending",value:void 0,then:function(m){c.push(m)}}}return Fh++,o.then(Ub,Ub),o}function Ub(){if(--Fh===0&&xc!==null){Wo!==null&&(Wo.status="fulfilled");var a=xc;xc=null,Ko=0,Wo=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function G_(a,o){var c=[],m={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return a.then(function(){m.status="fulfilled",m.value=o;for(var v=0;v<c.length;v++)(0,c[v])(o)},function(v){for(m.status="rejected",m.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),m}var Hb=I.S;I.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&H_(a,o),Hb!==null&&Hb(a,o)};var Ws=q(null);function Vh(){var a=Ws.current;return a!==null?a:At.pooledCache}function Td(a,o){o===null?ne(Ws,Ws.current):ne(Ws,o.pool)}function Gb(){var a=Vh();return a===null?null:{parent:rn._currentValue,pool:a}}var bc=Error(r(460)),qb=Error(r(474)),Dd=Error(r(542)),Kh={then:function(){}};function Yb(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Nd(){}function Fb(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Nd,Nd),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Kb(a),a;default:if(typeof o.status=="string")o.then(Nd,Nd);else{if(a=At,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(m){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=m}},function(m){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Kb(a),a}throw Sc=o,bc}}var Sc=null;function Vb(){if(Sc===null)throw Error(r(459));var a=Sc;return Sc=null,a}function Kb(a){if(a===bc||a===Dd)throw Error(r(483))}var Gi=!1;function Wh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function qi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Yi(a,o,c){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(lt&2)!==0){var v=m.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),m.pending=o,o=Sd(a),Mb(a,null,c),o}return bd(a,m,o,c),Sd(a)}function Cc(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var m=o.lanes;m&=a.pendingLanes,c|=m,o.lanes=c,he(a,c)}}function Qh(a,o){var c=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var v=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var D={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?v=b=D:b=b.next=D,c=c.next}while(c!==null);b===null?v=b=o:b=b.next=o}else v=b=o;c={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:m.shared,callbacks:m.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var Jh=!1;function Ac(){if(Jh){var a=Wo;if(a!==null)throw a}}function Ec(a,o,c,m){Jh=!1;var v=a.updateQueue;Gi=!1;var b=v.firstBaseUpdate,D=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var H=O,ee=H.next;H.next=null,D===null?b=ee:D.next=ee,D=H;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,O=ue.lastBaseUpdate,O!==D&&(O===null?ue.firstBaseUpdate=ee:O.next=ee,ue.lastBaseUpdate=H))}if(b!==null){var pe=v.baseState;D=0,ue=ee=H=null,O=b;do{var re=O.lane&-536870913,ae=re!==O.lane;if(ae?(tt&re)===re:(m&re)===re){re!==0&&re===Ko&&(Jh=!0),ue!==null&&(ue=ue.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var ze=a,Le=O;re=o;var gt=c;switch(Le.tag){case 1:if(ze=Le.payload,typeof ze=="function"){pe=ze.call(gt,pe,re);break e}pe=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Le.payload,re=typeof ze=="function"?ze.call(gt,pe,re):ze,re==null)break e;pe=h({},pe,re);break e;case 2:Gi=!0}}re=O.callback,re!==null&&(a.flags|=64,ae&&(a.flags|=8192),ae=v.callbacks,ae===null?v.callbacks=[re]:ae.push(re))}else ae={lane:re,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ue===null?(ee=ue=ae,H=pe):ue=ue.next=ae,D|=re;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;ae=O,O=ae.next,ae.next=null,v.lastBaseUpdate=ae,v.shared.pending=null}}while(!0);ue===null&&(H=pe),v.baseState=H,v.firstBaseUpdate=ee,v.lastBaseUpdate=ue,b===null&&(v.shared.lanes=0),Zi|=D,a.lanes=D,a.memoizedState=pe}}function Wb(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function Xb(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Wb(c[a],o)}var Xo=q(null),Od=q(0);function Qb(a,o){a=ci,ne(Od,a),ne(Xo,o),ci=a|o.baseLanes}function Zh(){ne(Od,ci),ne(Xo,Xo.current)}function em(){ci=Od.current,V(Xo),V(Od)}var Fi=0,We=null,ht=null,Xt=null,jd=!1,Qo=!1,Xs=!1,_d=0,wc=0,Jo=null,q_=0;function qt(){throw Error(r(321))}function tm(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!B(a[c],o[c]))return!1;return!0}function nm(a,o,c,m,v,b){return Fi=b,We=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=a===null||a.memoizedState===null?MS:IS,Xs=!1,b=c(m,v),Xs=!1,Qo&&(b=Zb(o,c,m,v)),Jb(a),b}function Jb(a){I.H=$d;var o=ht!==null&&ht.next!==null;if(Fi=0,Xt=ht=We=null,jd=!1,wc=0,Jo=null,o)throw Error(r(300));a===null||hn||(a=a.dependencies,a!==null&&wd(a)&&(hn=!0))}function Zb(a,o,c,m){We=a;var v=0;do{if(Qo&&(Jo=null),wc=0,Qo=!1,25<=v)throw Error(r(301));if(v+=1,Xt=ht=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}I.H=Q_,b=o(c,m)}while(Qo);return b}function Y_(){var a=I.H,o=a.useState()[0];return o=typeof o.then=="function"?Pc(o):o,a=a.useState()[0],(ht!==null?ht.memoizedState:null)!==a&&(We.flags|=1024),o}function rm(){var a=_d!==0;return _d=0,a}function am(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function im(a){if(jd){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}jd=!1}Fi=0,Xt=ht=We=null,Qo=!1,wc=_d=0,Jo=null}function ir(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?We.memoizedState=Xt=a:Xt=Xt.next=a,Xt}function Qt(){if(ht===null){var a=We.alternate;a=a!==null?a.memoizedState:null}else a=ht.next;var o=Xt===null?We.memoizedState:Xt.next;if(o!==null)Xt=o,ht=a;else{if(a===null)throw We.alternate===null?Error(r(467)):Error(r(310));ht=a,a={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Xt===null?We.memoizedState=Xt=a:Xt=Xt.next=a}return Xt}function sm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pc(a){var o=wc;return wc+=1,Jo===null&&(Jo=[]),a=Fb(Jo,a,o),o=We,(Xt===null?o.memoizedState:Xt.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?MS:IS),a}function kd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Pc(a);if(a.$$typeof===T)return In(a)}throw Error(r(438,String(a)))}function om(a){var o=null,c=We.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var m=We.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=sm(),We.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),m=0;m<a;m++)c[m]=M;return o.index++,c}function ri(a,o){return typeof o=="function"?o(a):o}function Md(a){var o=Qt();return lm(o,ht,a)}function lm(a,o,c){var m=a.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var v=a.baseQueue,b=m.pending;if(b!==null){if(v!==null){var D=v.next;v.next=b.next,b.next=D}o.baseQueue=v=b,m.pending=null}if(b=a.baseState,v===null)a.memoizedState=b;else{o=v.next;var O=D=null,H=null,ee=o,ue=!1;do{var pe=ee.lane&-536870913;if(pe!==ee.lane?(tt&pe)===pe:(Fi&pe)===pe){var re=ee.revertLane;if(re===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),pe===Ko&&(ue=!0);else if((Fi&re)===re){ee=ee.next,re===Ko&&(ue=!0);continue}else pe={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(O=H=pe,D=b):H=H.next=pe,We.lanes|=re,Zi|=re;pe=ee.action,Xs&&c(b,pe),b=ee.hasEagerState?ee.eagerState:c(b,pe)}else re={lane:pe,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(O=H=re,D=b):H=H.next=re,We.lanes|=pe,Zi|=pe;ee=ee.next}while(ee!==null&&ee!==o);if(H===null?D=b:H.next=O,!B(b,a.memoizedState)&&(hn=!0,ue&&(c=Wo,c!==null)))throw c;a.memoizedState=b,a.baseState=D,a.baseQueue=H,m.lastRenderedState=b}return v===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function cm(a){var o=Qt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var m=c.dispatch,v=c.pending,b=o.memoizedState;if(v!==null){c.pending=null;var D=v=v.next;do b=a(b,D.action),D=D.next;while(D!==v);B(b,o.memoizedState)||(hn=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,m]}function eS(a,o,c){var m=We,v=Qt(),b=ot;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=o();var D=!B((ht||v).memoizedState,c);D&&(v.memoizedState=c,hn=!0),v=v.queue;var O=rS.bind(null,m,v,a);if(Tc(2048,8,O,[a]),v.getSnapshot!==o||D||Xt!==null&&Xt.memoizedState.tag&1){if(m.flags|=2048,Zo(9,Id(),nS.bind(null,m,v,c,o),null),At===null)throw Error(r(349));b||(Fi&124)!==0||tS(m,o,c)}return c}function tS(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=We.updateQueue,o===null?(o=sm(),We.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function nS(a,o,c,m){o.value=c,o.getSnapshot=m,aS(o)&&iS(a)}function rS(a,o,c){return c(function(){aS(o)&&iS(a)})}function aS(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!B(a,c)}catch{return!0}}function iS(a){var o=qo(a,2);o!==null&&Ar(o,a,2)}function um(a){var o=ir();if(typeof a=="function"){var c=a;if(a=c(),Xs){On(!0);try{c()}finally{On(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:a},o}function sS(a,o,c,m){return a.baseState=c,lm(a,ht,typeof m=="function"?m:ri)}function F_(a,o,c,m,v){if(Ld(a))throw Error(r(485));if(a=o.action,a!==null){var b={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){b.listeners.push(D)}};I.T!==null?c(!0):b.isTransition=!1,m(b),c=o.pending,c===null?(b.next=o.pending=b,oS(o,b)):(b.next=c.next,o.pending=c.next=b)}}function oS(a,o){var c=o.action,m=o.payload,v=a.state;if(o.isTransition){var b=I.T,D={};I.T=D;try{var O=c(v,m),H=I.S;H!==null&&H(D,O),lS(a,o,O)}catch(ee){dm(a,o,ee)}finally{I.T=b}}else try{b=c(v,m),lS(a,o,b)}catch(ee){dm(a,o,ee)}}function lS(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){cS(a,o,m)},function(m){return dm(a,o,m)}):cS(a,o,c)}function cS(a,o,c){o.status="fulfilled",o.value=c,uS(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,oS(a,c)))}function dm(a,o,c){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=c,uS(o),o=o.next;while(o!==m)}a.action=null}function uS(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function dS(a,o){return o}function fS(a,o){if(ot){var c=At.formState;if(c!==null){e:{var m=We;if(ot){if(Ut){t:{for(var v=Ut,b=Oa;v.nodeType!==8;){if(!b){v=null;break t}if(v=ga(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){Ut=ga(v.nextSibling),m=v.data==="F!";break e}}Fs(m)}m=!1}m&&(o=c[0])}}return c=ir(),c.memoizedState=c.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dS,lastRenderedState:o},c.queue=m,c=jS.bind(null,We,m),m.dispatch=c,m=um(!1),b=gm.bind(null,We,!1,m.queue),m=ir(),v={state:o,dispatch:null,action:a,pending:null},m.queue=v,c=F_.bind(null,We,v,b,c),v.dispatch=c,m.memoizedState=a,[o,c,!1]}function pS(a){var o=Qt();return hS(o,ht,a)}function hS(a,o,c){if(o=lm(a,o,dS)[0],a=Md(ri)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Pc(o)}catch(D){throw D===bc?Dd:D}else m=o;o=Qt();var v=o.queue,b=v.dispatch;return c!==o.memoizedState&&(We.flags|=2048,Zo(9,Id(),V_.bind(null,v,c),null)),[m,b,a]}function V_(a,o){a.action=o}function mS(a){var o=Qt(),c=ht;if(c!==null)return hS(o,c,a);Qt(),o=o.memoizedState,c=Qt();var m=c.queue.dispatch;return c.memoizedState=a,[o,m,!1]}function Zo(a,o,c,m){return a={tag:a,create:c,deps:m,inst:o,next:null},o=We.updateQueue,o===null&&(o=sm(),We.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(m=c.next,c.next=a,a.next=m,o.lastEffect=a),a}function Id(){return{destroy:void 0,resource:void 0}}function gS(){return Qt().memoizedState}function Rd(a,o,c,m){var v=ir();m=m===void 0?null:m,We.flags|=a,v.memoizedState=Zo(1|o,Id(),c,m)}function Tc(a,o,c,m){var v=Qt();m=m===void 0?null:m;var b=v.memoizedState.inst;ht!==null&&m!==null&&tm(m,ht.memoizedState.deps)?v.memoizedState=Zo(o,b,c,m):(We.flags|=a,v.memoizedState=Zo(1|o,b,c,m))}function yS(a,o){Rd(8390656,8,a,o)}function vS(a,o){Tc(2048,8,a,o)}function xS(a,o){return Tc(4,2,a,o)}function bS(a,o){return Tc(4,4,a,o)}function SS(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function CS(a,o,c){c=c!=null?c.concat([a]):null,Tc(4,4,SS.bind(null,o,a),c)}function fm(){}function AS(a,o){var c=Qt();o=o===void 0?null:o;var m=c.memoizedState;return o!==null&&tm(o,m[1])?m[0]:(c.memoizedState=[a,o],a)}function ES(a,o){var c=Qt();o=o===void 0?null:o;var m=c.memoizedState;if(o!==null&&tm(o,m[1]))return m[0];if(m=a(),Xs){On(!0);try{a()}finally{On(!1)}}return c.memoizedState=[m,o],m}function pm(a,o,c){return c===void 0||(Fi&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=T1(),We.lanes|=a,Zi|=a,c)}function wS(a,o,c,m){return B(c,o)?c:Xo.current!==null?(a=pm(a,c,m),B(a,o)||(hn=!0),a):(Fi&42)===0?(hn=!0,a.memoizedState=c):(a=T1(),We.lanes|=a,Zi|=a,o)}function PS(a,o,c,m,v){var b=G.p;G.p=b!==0&&8>b?b:8;var D=I.T,O={};I.T=O,gm(a,!1,o,c);try{var H=v(),ee=I.S;if(ee!==null&&ee(O,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ue=G_(H,m);Dc(a,o,ue,Cr(a))}else Dc(a,o,m,Cr(a))}catch(pe){Dc(a,o,{then:function(){},status:"rejected",reason:pe},Cr())}finally{G.p=b,I.T=D}}function K_(){}function hm(a,o,c,m){if(a.tag!==5)throw Error(r(476));var v=TS(a).queue;PS(a,v,o,ie,c===null?K_:function(){return DS(a),c(m)})}function TS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:ie},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function DS(a){var o=TS(a).next.queue;Dc(a,o,{},Cr())}function mm(){return In(Fc)}function NS(){return Qt().memoizedState}function OS(){return Qt().memoizedState}function W_(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=Cr();a=qi(c);var m=Yi(o,a,c);m!==null&&(Ar(m,o,c),Cc(m,o,c)),o={cache:Yh()},a.payload=o;return}o=o.return}}function X_(a,o,c){var m=Cr();c={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Ld(a)?_S(o,c):(c=Ih(a,o,c,m),c!==null&&(Ar(c,a,m),kS(c,o,m)))}function jS(a,o,c){var m=Cr();Dc(a,o,c,m)}function Dc(a,o,c,m){var v={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ld(a))_S(o,v);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var D=o.lastRenderedState,O=b(D,c);if(v.hasEagerState=!0,v.eagerState=O,B(O,D))return bd(a,o,v,0),At===null&&xd(),!1}catch{}finally{}if(c=Ih(a,o,v,m),c!==null)return Ar(c,a,m),kS(c,o,m),!0}return!1}function gm(a,o,c,m){if(m={lane:2,revertLane:Km(),action:m,hasEagerState:!1,eagerState:null,next:null},Ld(a)){if(o)throw Error(r(479))}else o=Ih(a,c,m,2),o!==null&&Ar(o,a,2)}function Ld(a){var o=a.alternate;return a===We||o!==null&&o===We}function _S(a,o){Qo=jd=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function kS(a,o,c){if((c&4194048)!==0){var m=o.lanes;m&=a.pendingLanes,c|=m,o.lanes=c,he(a,c)}}var $d={readContext:In,use:kd,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},MS={readContext:In,use:kd,useCallback:function(a,o){return ir().memoizedState=[a,o===void 0?null:o],a},useContext:In,useEffect:yS,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,Rd(4194308,4,SS.bind(null,o,a),c)},useLayoutEffect:function(a,o){return Rd(4194308,4,a,o)},useInsertionEffect:function(a,o){Rd(4,2,a,o)},useMemo:function(a,o){var c=ir();o=o===void 0?null:o;var m=a();if(Xs){On(!0);try{a()}finally{On(!1)}}return c.memoizedState=[m,o],m},useReducer:function(a,o,c){var m=ir();if(c!==void 0){var v=c(o);if(Xs){On(!0);try{c(o)}finally{On(!1)}}}else v=o;return m.memoizedState=m.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},m.queue=a,a=a.dispatch=X_.bind(null,We,a),[m.memoizedState,a]},useRef:function(a){var o=ir();return a={current:a},o.memoizedState=a},useState:function(a){a=um(a);var o=a.queue,c=jS.bind(null,We,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:fm,useDeferredValue:function(a,o){var c=ir();return pm(c,a,o)},useTransition:function(){var a=um(!1);return a=PS.bind(null,We,a.queue,!0,!1),ir().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var m=We,v=ir();if(ot){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),At===null)throw Error(r(349));(tt&124)!==0||tS(m,o,c)}v.memoizedState=c;var b={value:c,getSnapshot:o};return v.queue=b,yS(rS.bind(null,m,b,a),[a]),m.flags|=2048,Zo(9,Id(),nS.bind(null,m,b,c,o),null),c},useId:function(){var a=ir(),o=At.identifierPrefix;if(ot){var c=ei,m=Za;c=(m&~(1<<32-jt(m)-1)).toString(32)+c,o=""+o+"R"+c,c=_d++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=q_++,o=""+o+"r"+c.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:mm,useFormState:fS,useActionState:fS,useOptimistic:function(a){var o=ir();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=gm.bind(null,We,!0,c),c.dispatch=o,[a,o]},useMemoCache:om,useCacheRefresh:function(){return ir().memoizedState=W_.bind(null,We)}},IS={readContext:In,use:kd,useCallback:AS,useContext:In,useEffect:vS,useImperativeHandle:CS,useInsertionEffect:xS,useLayoutEffect:bS,useMemo:ES,useReducer:Md,useRef:gS,useState:function(){return Md(ri)},useDebugValue:fm,useDeferredValue:function(a,o){var c=Qt();return wS(c,ht.memoizedState,a,o)},useTransition:function(){var a=Md(ri)[0],o=Qt().memoizedState;return[typeof a=="boolean"?a:Pc(a),o]},useSyncExternalStore:eS,useId:NS,useHostTransitionStatus:mm,useFormState:pS,useActionState:pS,useOptimistic:function(a,o){var c=Qt();return sS(c,ht,a,o)},useMemoCache:om,useCacheRefresh:OS},Q_={readContext:In,use:kd,useCallback:AS,useContext:In,useEffect:vS,useImperativeHandle:CS,useInsertionEffect:xS,useLayoutEffect:bS,useMemo:ES,useReducer:cm,useRef:gS,useState:function(){return cm(ri)},useDebugValue:fm,useDeferredValue:function(a,o){var c=Qt();return ht===null?pm(c,a,o):wS(c,ht.memoizedState,a,o)},useTransition:function(){var a=cm(ri)[0],o=Qt().memoizedState;return[typeof a=="boolean"?a:Pc(a),o]},useSyncExternalStore:eS,useId:NS,useHostTransitionStatus:mm,useFormState:mS,useActionState:mS,useOptimistic:function(a,o){var c=Qt();return ht!==null?sS(c,ht,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:om,useCacheRefresh:OS},el=null,Nc=0;function Bd(a){var o=Nc;return Nc+=1,el===null&&(el=[]),Fb(el,a,o)}function Oc(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function zd(a,o){throw o.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function RS(a){var o=a._init;return o(a._payload)}function LS(a){function o(X,Y){if(a){var J=X.deletions;J===null?(X.deletions=[Y],X.flags|=16):J.push(Y)}}function c(X,Y){if(!a)return null;for(;Y!==null;)o(X,Y),Y=Y.sibling;return null}function m(X){for(var Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function v(X,Y){return X=Ja(X,Y),X.index=0,X.sibling=null,X}function b(X,Y,J){return X.index=J,a?(J=X.alternate,J!==null?(J=J.index,J<Y?(X.flags|=67108866,Y):J):(X.flags|=67108866,Y)):(X.flags|=1048576,Y)}function D(X){return a&&X.alternate===null&&(X.flags|=67108866),X}function O(X,Y,J,fe){return Y===null||Y.tag!==6?(Y=Lh(J,X.mode,fe),Y.return=X,Y):(Y=v(Y,J),Y.return=X,Y)}function H(X,Y,J,fe){var Te=J.type;return Te===S?ue(X,Y,J.props.children,fe,J.key):Y!==null&&(Y.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===z&&RS(Te)===Y.type)?(Y=v(Y,J.props),Oc(Y,J),Y.return=X,Y):(Y=Cd(J.type,J.key,J.props,null,X.mode,fe),Oc(Y,J),Y.return=X,Y)}function ee(X,Y,J,fe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==J.containerInfo||Y.stateNode.implementation!==J.implementation?(Y=$h(J,X.mode,fe),Y.return=X,Y):(Y=v(Y,J.children||[]),Y.return=X,Y)}function ue(X,Y,J,fe,Te){return Y===null||Y.tag!==7?(Y=Hs(J,X.mode,fe,Te),Y.return=X,Y):(Y=v(Y,J),Y.return=X,Y)}function pe(X,Y,J){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Lh(""+Y,X.mode,J),Y.return=X,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:return J=Cd(Y.type,Y.key,Y.props,null,X.mode,J),Oc(J,Y),J.return=X,J;case x:return Y=$h(Y,X.mode,J),Y.return=X,Y;case z:var fe=Y._init;return Y=fe(Y._payload),pe(X,Y,J)}if(Q(Y)||U(Y))return Y=Hs(Y,X.mode,J,null),Y.return=X,Y;if(typeof Y.then=="function")return pe(X,Bd(Y),J);if(Y.$$typeof===T)return pe(X,Pd(X,Y),J);zd(X,Y)}return null}function re(X,Y,J,fe){var Te=Y!==null?Y.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Te!==null?null:O(X,Y,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case y:return J.key===Te?H(X,Y,J,fe):null;case x:return J.key===Te?ee(X,Y,J,fe):null;case z:return Te=J._init,J=Te(J._payload),re(X,Y,J,fe)}if(Q(J)||U(J))return Te!==null?null:ue(X,Y,J,fe,null);if(typeof J.then=="function")return re(X,Y,Bd(J),fe);if(J.$$typeof===T)return re(X,Y,Pd(X,J),fe);zd(X,J)}return null}function ae(X,Y,J,fe,Te){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return X=X.get(J)||null,O(Y,X,""+fe,Te);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case y:return X=X.get(fe.key===null?J:fe.key)||null,H(Y,X,fe,Te);case x:return X=X.get(fe.key===null?J:fe.key)||null,ee(Y,X,fe,Te);case z:var Xe=fe._init;return fe=Xe(fe._payload),ae(X,Y,J,fe,Te)}if(Q(fe)||U(fe))return X=X.get(J)||null,ue(Y,X,fe,Te,null);if(typeof fe.then=="function")return ae(X,Y,J,Bd(fe),Te);if(fe.$$typeof===T)return ae(X,Y,J,Pd(Y,fe),Te);zd(Y,fe)}return null}function ze(X,Y,J,fe){for(var Te=null,Xe=null,_e=Y,$e=Y=0,gn=null;_e!==null&&$e<J.length;$e++){_e.index>$e?(gn=_e,_e=null):gn=_e.sibling;var at=re(X,_e,J[$e],fe);if(at===null){_e===null&&(_e=gn);break}a&&_e&&at.alternate===null&&o(X,_e),Y=b(at,Y,$e),Xe===null?Te=at:Xe.sibling=at,Xe=at,_e=gn}if($e===J.length)return c(X,_e),ot&&qs(X,$e),Te;if(_e===null){for(;$e<J.length;$e++)_e=pe(X,J[$e],fe),_e!==null&&(Y=b(_e,Y,$e),Xe===null?Te=_e:Xe.sibling=_e,Xe=_e);return ot&&qs(X,$e),Te}for(_e=m(_e);$e<J.length;$e++)gn=ae(_e,X,$e,J[$e],fe),gn!==null&&(a&&gn.alternate!==null&&_e.delete(gn.key===null?$e:gn.key),Y=b(gn,Y,$e),Xe===null?Te=gn:Xe.sibling=gn,Xe=gn);return a&&_e.forEach(function(ls){return o(X,ls)}),ot&&qs(X,$e),Te}function Le(X,Y,J,fe){if(J==null)throw Error(r(151));for(var Te=null,Xe=null,_e=Y,$e=Y=0,gn=null,at=J.next();_e!==null&&!at.done;$e++,at=J.next()){_e.index>$e?(gn=_e,_e=null):gn=_e.sibling;var ls=re(X,_e,at.value,fe);if(ls===null){_e===null&&(_e=gn);break}a&&_e&&ls.alternate===null&&o(X,_e),Y=b(ls,Y,$e),Xe===null?Te=ls:Xe.sibling=ls,Xe=ls,_e=gn}if(at.done)return c(X,_e),ot&&qs(X,$e),Te;if(_e===null){for(;!at.done;$e++,at=J.next())at=pe(X,at.value,fe),at!==null&&(Y=b(at,Y,$e),Xe===null?Te=at:Xe.sibling=at,Xe=at);return ot&&qs(X,$e),Te}for(_e=m(_e);!at.done;$e++,at=J.next())at=ae(_e,X,$e,at.value,fe),at!==null&&(a&&at.alternate!==null&&_e.delete(at.key===null?$e:at.key),Y=b(at,Y,$e),Xe===null?Te=at:Xe.sibling=at,Xe=at);return a&&_e.forEach(function(Jk){return o(X,Jk)}),ot&&qs(X,$e),Te}function gt(X,Y,J,fe){if(typeof J=="object"&&J!==null&&J.type===S&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case y:e:{for(var Te=J.key;Y!==null;){if(Y.key===Te){if(Te=J.type,Te===S){if(Y.tag===7){c(X,Y.sibling),fe=v(Y,J.props.children),fe.return=X,X=fe;break e}}else if(Y.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===z&&RS(Te)===Y.type){c(X,Y.sibling),fe=v(Y,J.props),Oc(fe,J),fe.return=X,X=fe;break e}c(X,Y);break}else o(X,Y);Y=Y.sibling}J.type===S?(fe=Hs(J.props.children,X.mode,fe,J.key),fe.return=X,X=fe):(fe=Cd(J.type,J.key,J.props,null,X.mode,fe),Oc(fe,J),fe.return=X,X=fe)}return D(X);case x:e:{for(Te=J.key;Y!==null;){if(Y.key===Te)if(Y.tag===4&&Y.stateNode.containerInfo===J.containerInfo&&Y.stateNode.implementation===J.implementation){c(X,Y.sibling),fe=v(Y,J.children||[]),fe.return=X,X=fe;break e}else{c(X,Y);break}else o(X,Y);Y=Y.sibling}fe=$h(J,X.mode,fe),fe.return=X,X=fe}return D(X);case z:return Te=J._init,J=Te(J._payload),gt(X,Y,J,fe)}if(Q(J))return ze(X,Y,J,fe);if(U(J)){if(Te=U(J),typeof Te!="function")throw Error(r(150));return J=Te.call(J),Le(X,Y,J,fe)}if(typeof J.then=="function")return gt(X,Y,Bd(J),fe);if(J.$$typeof===T)return gt(X,Y,Pd(X,J),fe);zd(X,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,Y!==null&&Y.tag===6?(c(X,Y.sibling),fe=v(Y,J),fe.return=X,X=fe):(c(X,Y),fe=Lh(J,X.mode,fe),fe.return=X,X=fe),D(X)):c(X,Y)}return function(X,Y,J,fe){try{Nc=0;var Te=gt(X,Y,J,fe);return el=null,Te}catch(_e){if(_e===bc||_e===Dd)throw _e;var Xe=vr(29,_e,null,X.mode);return Xe.lanes=fe,Xe.return=X,Xe}finally{}}}var tl=LS(!0),$S=LS(!1),Gr=q(null),ja=null;function Vi(a){var o=a.alternate;ne(an,an.current&1),ne(Gr,a),ja===null&&(o===null||Xo.current!==null||o.memoizedState!==null)&&(ja=a)}function BS(a){if(a.tag===22){if(ne(an,an.current),ne(Gr,a),ja===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(ja=a)}}else Ki()}function Ki(){ne(an,an.current),ne(Gr,Gr.current)}function ai(a){V(Gr),ja===a&&(ja=null),V(an)}var an=q(0);function Ud(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||sg(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function ym(a,o,c,m){o=a.memoizedState,c=c(m,o),c=c==null?o:h({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var vm={enqueueSetState:function(a,o,c){a=a._reactInternals;var m=Cr(),v=qi(m);v.payload=o,c!=null&&(v.callback=c),o=Yi(a,v,m),o!==null&&(Ar(o,a,m),Cc(o,a,m))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var m=Cr(),v=qi(m);v.tag=1,v.payload=o,c!=null&&(v.callback=c),o=Yi(a,v,m),o!==null&&(Ar(o,a,m),Cc(o,a,m))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=Cr(),m=qi(c);m.tag=2,o!=null&&(m.callback=o),o=Yi(a,m,c),o!==null&&(Ar(o,a,c),Cc(o,a,c))}};function zS(a,o,c,m,v,b,D){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,b,D):o.prototype&&o.prototype.isPureReactComponent?!te(c,m)||!te(v,b):!0}function US(a,o,c,m){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,m),o.state!==a&&vm.enqueueReplaceState(o,o.state,null)}function Qs(a,o){var c=o;if("ref"in o){c={};for(var m in o)m!=="ref"&&(c[m]=o[m])}if(a=a.defaultProps){c===o&&(c=h({},c));for(var v in a)c[v]===void 0&&(c[v]=a[v])}return c}var Hd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function HS(a){Hd(a)}function GS(a){console.error(a)}function qS(a){Hd(a)}function Gd(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function YS(a,o,c){try{var m=a.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function xm(a,o,c){return c=qi(c),c.tag=3,c.payload={element:null},c.callback=function(){Gd(a,o)},c}function FS(a){return a=qi(a),a.tag=3,a}function VS(a,o,c,m){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var b=m.value;a.payload=function(){return v(b)},a.callback=function(){YS(o,c,m)}}var D=c.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(a.callback=function(){YS(o,c,m),typeof v!="function"&&(es===null?es=new Set([this]):es.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function J_(a,o,c,m,v){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=c.alternate,o!==null&&yc(o,c,v,!0),c=Gr.current,c!==null){switch(c.tag){case 13:return ja===null?Gm():c.alternate===null&&Ht===0&&(Ht=3),c.flags&=-257,c.flags|=65536,c.lanes=v,m===Kh?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([m]):o.add(m),Ym(a,m,v)),!1;case 22:return c.flags|=65536,m===Kh?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([m]):c.add(m)),Ym(a,m,v)),!1}throw Error(r(435,c.tag))}return Ym(a,m,v),Gm(),!1}if(ot)return o=Gr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,m!==Uh&&(a=Error(r(422),{cause:m}),gc(Br(a,c)))):(m!==Uh&&(o=Error(r(423),{cause:m}),gc(Br(o,c))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,m=Br(m,c),v=xm(a.stateNode,m,v),Qh(a,v),Ht!==4&&(Ht=2)),!1;var b=Error(r(520),{cause:m});if(b=Br(b,c),Lc===null?Lc=[b]:Lc.push(b),Ht!==4&&(Ht=2),o===null)return!0;m=Br(m,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=v&-v,c.lanes|=a,a=xm(c.stateNode,m,a),Qh(c,a),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(es===null||!es.has(b))))return c.flags|=65536,v&=-v,c.lanes|=v,v=FS(v),VS(v,a,c,m),Qh(c,v),!1}c=c.return}while(c!==null);return!1}var KS=Error(r(461)),hn=!1;function En(a,o,c,m){o.child=a===null?$S(o,null,c,m):tl(o,a.child,c,m)}function WS(a,o,c,m,v){c=c.render;var b=o.ref;if("ref"in m){var D={};for(var O in m)O!=="ref"&&(D[O]=m[O])}else D=m;return Ks(o),m=nm(a,o,c,D,b,v),O=rm(),a!==null&&!hn?(am(a,o,v),ii(a,o,v)):(ot&&O&&Bh(o),o.flags|=1,En(a,o,m,v),o.child)}function XS(a,o,c,m,v){if(a===null){var b=c.type;return typeof b=="function"&&!Rh(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,QS(a,o,b,m,v)):(a=Cd(c.type,null,m,o,o.mode,v),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!Tm(a,v)){var D=b.memoizedProps;if(c=c.compare,c=c!==null?c:te,c(D,m)&&a.ref===o.ref)return ii(a,o,v)}return o.flags|=1,a=Ja(b,m),a.ref=o.ref,a.return=o,o.child=a}function QS(a,o,c,m,v){if(a!==null){var b=a.memoizedProps;if(te(b,m)&&a.ref===o.ref)if(hn=!1,o.pendingProps=m=b,Tm(a,v))(a.flags&131072)!==0&&(hn=!0);else return o.lanes=a.lanes,ii(a,o,v)}return bm(a,o,c,m,v)}function JS(a,o,c){var m=o.pendingProps,v=m.children,b=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((o.flags&128)!==0){if(m=b!==null?b.baseLanes|c:c,a!==null){for(v=o.child=a.child,b=0;v!==null;)b=b|v.lanes|v.childLanes,v=v.sibling;o.childLanes=b&~m}else o.childLanes=0,o.child=null;return ZS(a,o,m,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Td(o,b!==null?b.cachePool:null),b!==null?Qb(o,b):Zh(),BS(o);else return o.lanes=o.childLanes=536870912,ZS(a,o,b!==null?b.baseLanes|c:c,c)}else b!==null?(Td(o,b.cachePool),Qb(o,b),Ki(),o.memoizedState=null):(a!==null&&Td(o,null),Zh(),Ki());return En(a,o,v,c),o.child}function ZS(a,o,c,m){var v=Vh();return v=v===null?null:{parent:rn._currentValue,pool:v},o.memoizedState={baseLanes:c,cachePool:v},a!==null&&Td(o,null),Zh(),BS(o),a!==null&&yc(a,o,m,!0),null}function qd(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function bm(a,o,c,m,v){return Ks(o),c=nm(a,o,c,m,void 0,v),m=rm(),a!==null&&!hn?(am(a,o,v),ii(a,o,v)):(ot&&m&&Bh(o),o.flags|=1,En(a,o,c,v),o.child)}function e1(a,o,c,m,v,b){return Ks(o),o.updateQueue=null,c=Zb(o,m,c,v),Jb(a),m=rm(),a!==null&&!hn?(am(a,o,b),ii(a,o,b)):(ot&&m&&Bh(o),o.flags|=1,En(a,o,c,b),o.child)}function t1(a,o,c,m,v){if(Ks(o),o.stateNode===null){var b=Yo,D=c.contextType;typeof D=="object"&&D!==null&&(b=In(D)),b=new c(m,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=vm,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=m,b.state=o.memoizedState,b.refs={},Wh(o),D=c.contextType,b.context=typeof D=="object"&&D!==null?In(D):Yo,b.state=o.memoizedState,D=c.getDerivedStateFromProps,typeof D=="function"&&(ym(o,c,D,m),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(D=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),D!==b.state&&vm.enqueueReplaceState(b,b.state,null),Ec(o,m,b,v),Ac(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(a===null){b=o.stateNode;var O=o.memoizedProps,H=Qs(c,O);b.props=H;var ee=b.context,ue=c.contextType;D=Yo,typeof ue=="object"&&ue!==null&&(D=In(ue));var pe=c.getDerivedStateFromProps;ue=typeof pe=="function"||typeof b.getSnapshotBeforeUpdate=="function",O=o.pendingProps!==O,ue||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O||ee!==D)&&US(o,b,m,D),Gi=!1;var re=o.memoizedState;b.state=re,Ec(o,m,b,v),Ac(),ee=o.memoizedState,O||re!==ee||Gi?(typeof pe=="function"&&(ym(o,c,pe,m),ee=o.memoizedState),(H=Gi||zS(o,c,H,m,re,ee,D))?(ue||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=ee),b.props=m,b.state=ee,b.context=D,m=H):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{b=o.stateNode,Xh(a,o),D=o.memoizedProps,ue=Qs(c,D),b.props=ue,pe=o.pendingProps,re=b.context,ee=c.contextType,H=Yo,typeof ee=="object"&&ee!==null&&(H=In(ee)),O=c.getDerivedStateFromProps,(ee=typeof O=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(D!==pe||re!==H)&&US(o,b,m,H),Gi=!1,re=o.memoizedState,b.state=re,Ec(o,m,b,v),Ac();var ae=o.memoizedState;D!==pe||re!==ae||Gi||a!==null&&a.dependencies!==null&&wd(a.dependencies)?(typeof O=="function"&&(ym(o,c,O,m),ae=o.memoizedState),(ue=Gi||zS(o,c,ue,m,re,ae,H)||a!==null&&a.dependencies!==null&&wd(a.dependencies))?(ee||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(m,ae,H),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(m,ae,H)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||D===a.memoizedProps&&re===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&re===a.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=ae),b.props=m,b.state=ae,b.context=H,m=ue):(typeof b.componentDidUpdate!="function"||D===a.memoizedProps&&re===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&re===a.memoizedState||(o.flags|=1024),m=!1)}return b=m,qd(a,o),m=(o.flags&128)!==0,b||m?(b=o.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&m?(o.child=tl(o,a.child,null,v),o.child=tl(o,null,c,v)):En(a,o,c,v),o.memoizedState=b.state,a=o.child):a=ii(a,o,v),a}function n1(a,o,c,m){return mc(),o.flags|=256,En(a,o,c,m),o.child}var Sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cm(a){return{baseLanes:a,cachePool:Gb()}}function Am(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=qr),a}function r1(a,o,c){var m=o.pendingProps,v=!1,b=(o.flags&128)!==0,D;if((D=b)||(D=a!==null&&a.memoizedState===null?!1:(an.current&2)!==0),D&&(v=!0,o.flags&=-129),D=(o.flags&32)!==0,o.flags&=-33,a===null){if(ot){if(v?Vi(o):Ki(),ot){var O=Ut,H;if(H=O){e:{for(H=O,O=Oa;H.nodeType!==8;){if(!O){O=null;break e}if(H=ga(H.nextSibling),H===null){O=null;break e}}O=H}O!==null?(o.memoizedState={dehydrated:O,treeContext:Gs!==null?{id:Za,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},H=vr(18,null,null,0),H.stateNode=O,H.return=o,o.child=H,Wn=o,Ut=null,H=!0):H=!1}H||Fs(o)}if(O=o.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return sg(O)?o.lanes=32:o.lanes=536870912,null;ai(o)}return O=m.children,m=m.fallback,v?(Ki(),v=o.mode,O=Yd({mode:"hidden",children:O},v),m=Hs(m,v,c,null),O.return=o,m.return=o,O.sibling=m,o.child=O,v=o.child,v.memoizedState=Cm(c),v.childLanes=Am(a,D,c),o.memoizedState=Sm,m):(Vi(o),Em(o,O))}if(H=a.memoizedState,H!==null&&(O=H.dehydrated,O!==null)){if(b)o.flags&256?(Vi(o),o.flags&=-257,o=wm(a,o,c)):o.memoizedState!==null?(Ki(),o.child=a.child,o.flags|=128,o=null):(Ki(),v=m.fallback,O=o.mode,m=Yd({mode:"visible",children:m.children},O),v=Hs(v,O,c,null),v.flags|=2,m.return=o,v.return=o,m.sibling=v,o.child=m,tl(o,a.child,null,c),m=o.child,m.memoizedState=Cm(c),m.childLanes=Am(a,D,c),o.memoizedState=Sm,o=v);else if(Vi(o),sg(O)){if(D=O.nextSibling&&O.nextSibling.dataset,D)var ee=D.dgst;D=ee,m=Error(r(419)),m.stack="",m.digest=D,gc({value:m,source:null,stack:null}),o=wm(a,o,c)}else if(hn||yc(a,o,c,!1),D=(c&a.childLanes)!==0,hn||D){if(D=At,D!==null&&(m=c&-c,m=(m&42)!==0?1:xe(m),m=(m&(D.suspendedLanes|c))!==0?0:m,m!==0&&m!==H.retryLane))throw H.retryLane=m,qo(a,m),Ar(D,a,m),KS;O.data==="$?"||Gm(),o=wm(a,o,c)}else O.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=H.treeContext,Ut=ga(O.nextSibling),Wn=o,ot=!0,Ys=null,Oa=!1,a!==null&&(Ur[Hr++]=Za,Ur[Hr++]=ei,Ur[Hr++]=Gs,Za=a.id,ei=a.overflow,Gs=o),o=Em(o,m.children),o.flags|=4096);return o}return v?(Ki(),v=m.fallback,O=o.mode,H=a.child,ee=H.sibling,m=Ja(H,{mode:"hidden",children:m.children}),m.subtreeFlags=H.subtreeFlags&65011712,ee!==null?v=Ja(ee,v):(v=Hs(v,O,c,null),v.flags|=2),v.return=o,m.return=o,m.sibling=v,o.child=m,m=v,v=o.child,O=a.child.memoizedState,O===null?O=Cm(c):(H=O.cachePool,H!==null?(ee=rn._currentValue,H=H.parent!==ee?{parent:ee,pool:ee}:H):H=Gb(),O={baseLanes:O.baseLanes|c,cachePool:H}),v.memoizedState=O,v.childLanes=Am(a,D,c),o.memoizedState=Sm,m):(Vi(o),c=a.child,a=c.sibling,c=Ja(c,{mode:"visible",children:m.children}),c.return=o,c.sibling=null,a!==null&&(D=o.deletions,D===null?(o.deletions=[a],o.flags|=16):D.push(a)),o.child=c,o.memoizedState=null,c)}function Em(a,o){return o=Yd({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Yd(a,o){return a=vr(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function wm(a,o,c){return tl(o,a.child,null,c),a=Em(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function a1(a,o,c){a.lanes|=o;var m=a.alternate;m!==null&&(m.lanes|=o),Gh(a.return,o,c)}function Pm(a,o,c,m,v){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:v}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=m,b.tail=c,b.tailMode=v)}function i1(a,o,c){var m=o.pendingProps,v=m.revealOrder,b=m.tail;if(En(a,o,m.children,c),m=an.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&a1(a,c,o);else if(a.tag===19)a1(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(ne(an,m),v){case"forwards":for(c=o.child,v=null;c!==null;)a=c.alternate,a!==null&&Ud(a)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),Pm(o,!1,v,c,b);break;case"backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(a=v.alternate,a!==null&&Ud(a)===null){o.child=v;break}a=v.sibling,v.sibling=c,c=v,v=a}Pm(o,!0,c,null,b);break;case"together":Pm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ii(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),Zi|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(yc(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=Ja(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=Ja(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function Tm(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&wd(a)))}function Z_(a,o,c){switch(o.tag){case 3:qe(o,o.stateNode.containerInfo),Hi(o,rn,a.memoizedState.cache),mc();break;case 27:case 5:we(o);break;case 4:qe(o,o.stateNode.containerInfo);break;case 10:Hi(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Vi(o),o.flags|=128,null):(c&o.child.childLanes)!==0?r1(a,o,c):(Vi(o),a=ii(a,o,c),a!==null?a.sibling:null);Vi(o);break;case 19:var v=(a.flags&128)!==0;if(m=(c&o.childLanes)!==0,m||(yc(a,o,c,!1),m=(c&o.childLanes)!==0),v){if(m)return i1(a,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ne(an,an.current),m)break;return null;case 22:case 23:return o.lanes=0,JS(a,o,c);case 24:Hi(o,rn,a.memoizedState.cache)}return ii(a,o,c)}function s1(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)hn=!0;else{if(!Tm(a,c)&&(o.flags&128)===0)return hn=!1,Z_(a,o,c);hn=(a.flags&131072)!==0}else hn=!1,ot&&(o.flags&1048576)!==0&&Rb(o,Ed,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var m=o.elementType,v=m._init;if(m=v(m._payload),o.type=m,typeof m=="function")Rh(m)?(a=Qs(m,a),o.tag=1,o=t1(null,o,m,a,c)):(o.tag=0,o=bm(null,o,m,a,c));else{if(m!=null){if(v=m.$$typeof,v===N){o.tag=11,o=WS(null,o,m,a,c);break e}else if(v===k){o.tag=14,o=XS(null,o,m,a,c);break e}}throw o=Z(m)||m,Error(r(306,o,""))}}return o;case 0:return bm(a,o,o.type,o.pendingProps,c);case 1:return m=o.type,v=Qs(m,o.pendingProps),t1(a,o,m,v,c);case 3:e:{if(qe(o,o.stateNode.containerInfo),a===null)throw Error(r(387));m=o.pendingProps;var b=o.memoizedState;v=b.element,Xh(a,o),Ec(o,m,null,c);var D=o.memoizedState;if(m=D.cache,Hi(o,rn,m),m!==b.cache&&qh(o,[rn],c,!0),Ac(),m=D.element,b.isDehydrated)if(b={element:m,isDehydrated:!1,cache:D.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=n1(a,o,m,c);break e}else if(m!==v){v=Br(Error(r(424)),o),gc(v),o=n1(a,o,m,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ut=ga(a.firstChild),Wn=o,ot=!0,Ys=null,Oa=!0,c=$S(o,null,m,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(mc(),m===v){o=ii(a,o,c);break e}En(a,o,m,c)}o=o.child}return o;case 26:return qd(a,o),a===null?(c=uC(o.type,null,o.pendingProps,null))?o.memoizedState=c:ot||(c=o.type,a=o.pendingProps,m=sf(Ce.current).createElement(c),m[Ge]=o,m[Fe]=a,Pn(m,c,a),zt(m),o.stateNode=m):o.memoizedState=uC(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return we(o),a===null&&ot&&(m=o.stateNode=oC(o.type,o.pendingProps,Ce.current),Wn=o,Oa=!0,v=Ut,rs(o.type)?(og=v,Ut=ga(m.firstChild)):Ut=v),En(a,o,o.pendingProps.children,c),qd(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&ot&&((v=m=Ut)&&(m=Tk(m,o.type,o.pendingProps,Oa),m!==null?(o.stateNode=m,Wn=o,Ut=ga(m.firstChild),Oa=!1,v=!0):v=!1),v||Fs(o)),we(o),v=o.type,b=o.pendingProps,D=a!==null?a.memoizedProps:null,m=b.children,rg(v,b)?m=null:D!==null&&rg(v,D)&&(o.flags|=32),o.memoizedState!==null&&(v=nm(a,o,Y_,null,null,c),Fc._currentValue=v),qd(a,o),En(a,o,m,c),o.child;case 6:return a===null&&ot&&((a=c=Ut)&&(c=Dk(c,o.pendingProps,Oa),c!==null?(o.stateNode=c,Wn=o,Ut=null,a=!0):a=!1),a||Fs(o)),null;case 13:return r1(a,o,c);case 4:return qe(o,o.stateNode.containerInfo),m=o.pendingProps,a===null?o.child=tl(o,null,m,c):En(a,o,m,c),o.child;case 11:return WS(a,o,o.type,o.pendingProps,c);case 7:return En(a,o,o.pendingProps,c),o.child;case 8:return En(a,o,o.pendingProps.children,c),o.child;case 12:return En(a,o,o.pendingProps.children,c),o.child;case 10:return m=o.pendingProps,Hi(o,o.type,m.value),En(a,o,m.children,c),o.child;case 9:return v=o.type._context,m=o.pendingProps.children,Ks(o),v=In(v),m=m(v),o.flags|=1,En(a,o,m,c),o.child;case 14:return XS(a,o,o.type,o.pendingProps,c);case 15:return QS(a,o,o.type,o.pendingProps,c);case 19:return i1(a,o,c);case 31:return m=o.pendingProps,c=o.mode,m={mode:m.mode,children:m.children},a===null?(c=Yd(m,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Ja(a.child,m),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return JS(a,o,c);case 24:return Ks(o),m=In(rn),a===null?(v=Vh(),v===null&&(v=At,b=Yh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=c),v=b),o.memoizedState={parent:m,cache:v},Wh(o),Hi(o,rn,v)):((a.lanes&c)!==0&&(Xh(a,o),Ec(o,null,null,c),Ac()),v=a.memoizedState,b=o.memoizedState,v.parent!==m?(v={parent:m,cache:m},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Hi(o,rn,m)):(m=b.cache,Hi(o,rn,m),m!==v.cache&&qh(o,[rn],c,!0))),En(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function si(a){a.flags|=4}function o1(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!mC(o)){if(o=Gr.current,o!==null&&((tt&4194048)===tt?ja!==null:(tt&62914560)!==tt&&(tt&536870912)===0||o!==ja))throw Sc=Kh,qb;a.flags|=8192}}function Fd(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Ts():536870912,a.lanes|=o,il|=o)}function jc(a,o){if(!ot)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function Lt(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,m=0;if(o)for(var v=a.child;v!==null;)c|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)c|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=m,a.childLanes=c,o}function ek(a,o,c){var m=o.pendingProps;switch(zh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(o),null;case 1:return Lt(o),null;case 3:return c=o.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),ni(rn),be(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(hc(o)?si(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Bb())),Lt(o),null;case 26:return c=o.memoizedState,a===null?(si(o),c!==null?(Lt(o),o1(o,c)):(Lt(o),o.flags&=-16777217)):c?c!==a.memoizedState?(si(o),Lt(o),o1(o,c)):(Lt(o),o.flags&=-16777217):(a.memoizedProps!==m&&si(o),Lt(o),o.flags&=-16777217),null;case 27:Oe(o),c=Ce.current;var v=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==m&&si(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Lt(o),null}a=ye.current,hc(o)?Lb(o):(a=oC(v,m,c),o.stateNode=a,si(o))}return Lt(o),null;case 5:if(Oe(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==m&&si(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return Lt(o),null}if(a=ye.current,hc(o))Lb(o);else{switch(v=sf(Ce.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?v.createElement(c,{is:m.is}):v.createElement(c)}}a[Ge]=o,a[Fe]=m;e:for(v=o.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===o)break e;for(;v.sibling===null;){if(v.return===null||v.return===o)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}o.stateNode=a;e:switch(Pn(a,c,m),c){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&si(o)}}return Lt(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==m&&si(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(r(166));if(a=Ce.current,hc(o)){if(a=o.stateNode,c=o.memoizedProps,m=null,v=Wn,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}a[Ge]=o,a=!!(a.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||eC(a.nodeValue,c)),a||Fs(o)}else a=sf(a).createTextNode(m),a[Ge]=o,o.stateNode=a}return Lt(o),null;case 13:if(m=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=hc(o),m!==null&&m.dehydrated!==null){if(a===null){if(!v)throw Error(r(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Ge]=o}else mc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Lt(o),v=!1}else v=Bb(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(ai(o),o):(ai(o),null)}if(ai(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=m!==null,a=a!==null&&a.memoizedState!==null,c){m=o.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var b=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(b=m.memoizedState.cachePool.pool),b!==v&&(m.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),Fd(o,o.updateQueue),Lt(o),null;case 4:return be(),a===null&&Jm(o.stateNode.containerInfo),Lt(o),null;case 10:return ni(o.type),Lt(o),null;case 19:if(V(an),v=o.memoizedState,v===null)return Lt(o),null;if(m=(o.flags&128)!==0,b=v.rendering,b===null)if(m)jc(v,!1);else{if(Ht!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=Ud(a),b!==null){for(o.flags|=128,jc(v,!1),a=b.updateQueue,o.updateQueue=a,Fd(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)Ib(c,a),c=c.sibling;return ne(an,an.current&1|2),o.child}a=a.sibling}v.tail!==null&&wt()>Wd&&(o.flags|=128,m=!0,jc(v,!1),o.lanes=4194304)}else{if(!m)if(a=Ud(b),a!==null){if(o.flags|=128,m=!0,a=a.updateQueue,o.updateQueue=a,Fd(o,a),jc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!b.alternate&&!ot)return Lt(o),null}else 2*wt()-v.renderingStartTime>Wd&&c!==536870912&&(o.flags|=128,m=!0,jc(v,!1),o.lanes=4194304);v.isBackwards?(b.sibling=o.child,o.child=b):(a=v.last,a!==null?a.sibling=b:o.child=b,v.last=b)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=wt(),o.sibling=null,a=an.current,ne(an,m?a&1|2:a&1),o):(Lt(o),null);case 22:case 23:return ai(o),em(),m=o.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(c&536870912)!==0&&(o.flags&128)===0&&(Lt(o),o.subtreeFlags&6&&(o.flags|=8192)):Lt(o),c=o.updateQueue,c!==null&&Fd(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==c&&(o.flags|=2048),a!==null&&V(Ws),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),ni(rn),Lt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function tk(a,o){switch(zh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return ni(rn),be(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Oe(o),null;case 13:if(ai(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));mc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return V(an),null;case 4:return be(),null;case 10:return ni(o.type),null;case 22:case 23:return ai(o),em(),a!==null&&V(Ws),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return ni(rn),null;case 25:return null;default:return null}}function l1(a,o){switch(zh(o),o.tag){case 3:ni(rn),be();break;case 26:case 27:case 5:Oe(o);break;case 4:be();break;case 13:ai(o);break;case 19:V(an);break;case 10:ni(o.type);break;case 22:case 23:ai(o),em(),a!==null&&V(Ws);break;case 24:ni(rn)}}function _c(a,o){try{var c=o.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var v=m.next;c=v;do{if((c.tag&a)===a){m=void 0;var b=c.create,D=c.inst;m=b(),D.destroy=m}c=c.next}while(c!==v)}}catch(O){bt(o,o.return,O)}}function Wi(a,o,c){try{var m=o.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var b=v.next;m=b;do{if((m.tag&a)===a){var D=m.inst,O=D.destroy;if(O!==void 0){D.destroy=void 0,v=o;var H=c,ee=O;try{ee()}catch(ue){bt(v,H,ue)}}}m=m.next}while(m!==b)}}catch(ue){bt(o,o.return,ue)}}function c1(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{Xb(o,c)}catch(m){bt(a,a.return,m)}}}function u1(a,o,c){c.props=Qs(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(m){bt(a,o,m)}}function kc(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof c=="function"?a.refCleanup=c(m):c.current=m}}catch(v){bt(a,o,v)}}function _a(a,o){var c=a.ref,m=a.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(v){bt(a,o,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){bt(a,o,v)}else c.current=null}function d1(a){var o=a.type,c=a.memoizedProps,m=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(v){bt(a,a.return,v)}}function Dm(a,o,c){try{var m=a.stateNode;Ck(m,a.type,c,o),m[Fe]=o}catch(v){bt(a,a.return,v)}}function f1(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&rs(a.type)||a.tag===4}function Nm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||f1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&rs(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Om(a,o,c){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=af));else if(m!==4&&(m===27&&rs(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(Om(a,o,c),a=a.sibling;a!==null;)Om(a,o,c),a=a.sibling}function Vd(a,o,c){var m=a.tag;if(m===5||m===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(m!==4&&(m===27&&rs(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Vd(a,o,c),a=a.sibling;a!==null;)Vd(a,o,c),a=a.sibling}function p1(a){var o=a.stateNode,c=a.memoizedProps;try{for(var m=a.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Pn(o,m,c),o[Ge]=a,o[Fe]=c}catch(b){bt(a,a.return,b)}}var oi=!1,Yt=!1,jm=!1,h1=typeof WeakSet=="function"?WeakSet:Set,mn=null;function nk(a,o){if(a=a.containerInfo,tg=ff,a=Be(a),Ye(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var v=m.anchorOffset,b=m.focusNode;m=m.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var D=0,O=-1,H=-1,ee=0,ue=0,pe=a,re=null;t:for(;;){for(var ae;pe!==c||v!==0&&pe.nodeType!==3||(O=D+v),pe!==b||m!==0&&pe.nodeType!==3||(H=D+m),pe.nodeType===3&&(D+=pe.nodeValue.length),(ae=pe.firstChild)!==null;)re=pe,pe=ae;for(;;){if(pe===a)break t;if(re===c&&++ee===v&&(O=D),re===b&&++ue===m&&(H=D),(ae=pe.nextSibling)!==null)break;pe=re,re=pe.parentNode}pe=ae}c=O===-1||H===-1?null:{start:O,end:H}}else c=null}c=c||{start:0,end:0}}else c=null;for(ng={focusedElem:a,selectionRange:c},ff=!1,mn=o;mn!==null;)if(o=mn,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,mn=a;else for(;mn!==null;){switch(o=mn,b=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,c=o,v=b.memoizedProps,b=b.memoizedState,m=c.stateNode;try{var ze=Qs(c.type,v,c.elementType===c.type);a=m.getSnapshotBeforeUpdate(ze,b),m.__reactInternalSnapshotBeforeUpdate=a}catch(Le){bt(c,c.return,Le)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)ig(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":ig(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,mn=a;break}mn=o.return}}function m1(a,o,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:Xi(a,c),m&4&&_c(5,c);break;case 1:if(Xi(a,c),m&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(D){bt(c,c.return,D)}else{var v=Qs(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(v,o,a.__reactInternalSnapshotBeforeUpdate)}catch(D){bt(c,c.return,D)}}m&64&&c1(c),m&512&&kc(c,c.return);break;case 3:if(Xi(a,c),m&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Xb(a,o)}catch(D){bt(c,c.return,D)}}break;case 27:o===null&&m&4&&p1(c);case 26:case 5:Xi(a,c),o===null&&m&4&&d1(c),m&512&&kc(c,c.return);break;case 12:Xi(a,c);break;case 13:Xi(a,c),m&4&&v1(a,c),m&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=dk.bind(null,c),Nk(a,c))));break;case 22:if(m=c.memoizedState!==null||oi,!m){o=o!==null&&o.memoizedState!==null||Yt,v=oi;var b=Yt;oi=m,(Yt=o)&&!b?Qi(a,c,(c.subtreeFlags&8772)!==0):Xi(a,c),oi=v,Yt=b}break;case 30:break;default:Xi(a,c)}}function g1(a){var o=a.alternate;o!==null&&(a.alternate=null,g1(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Wu(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var _t=null,sr=!1;function li(a,o,c){for(c=c.child;c!==null;)y1(a,o,c),c=c.sibling}function y1(a,o,c){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(aa,c)}catch{}switch(c.tag){case 26:Yt||_a(c,o),li(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Yt||_a(c,o);var m=_t,v=sr;rs(c.type)&&(_t=c.stateNode,sr=!1),li(a,o,c),Hc(c.stateNode),_t=m,sr=v;break;case 5:Yt||_a(c,o);case 6:if(m=_t,v=sr,_t=null,li(a,o,c),_t=m,sr=v,_t!==null)if(sr)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(c.stateNode)}catch(b){bt(c,o,b)}else try{_t.removeChild(c.stateNode)}catch(b){bt(c,o,b)}break;case 18:_t!==null&&(sr?(a=_t,iC(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),Xc(a)):iC(_t,c.stateNode));break;case 4:m=_t,v=sr,_t=c.stateNode.containerInfo,sr=!0,li(a,o,c),_t=m,sr=v;break;case 0:case 11:case 14:case 15:Yt||Wi(2,c,o),Yt||Wi(4,c,o),li(a,o,c);break;case 1:Yt||(_a(c,o),m=c.stateNode,typeof m.componentWillUnmount=="function"&&u1(c,o,m)),li(a,o,c);break;case 21:li(a,o,c);break;case 22:Yt=(m=Yt)||c.memoizedState!==null,li(a,o,c),Yt=m;break;default:li(a,o,c)}}function v1(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Xc(a)}catch(c){bt(o,o.return,c)}}function rk(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new h1),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new h1),o;default:throw Error(r(435,a.tag))}}function _m(a,o){var c=rk(a);o.forEach(function(m){var v=fk.bind(null,a,m);c.has(m)||(c.add(m),m.then(v,v))})}function xr(a,o){var c=o.deletions;if(c!==null)for(var m=0;m<c.length;m++){var v=c[m],b=a,D=o,O=D;e:for(;O!==null;){switch(O.tag){case 27:if(rs(O.type)){_t=O.stateNode,sr=!1;break e}break;case 5:_t=O.stateNode,sr=!1;break e;case 3:case 4:_t=O.stateNode.containerInfo,sr=!0;break e}O=O.return}if(_t===null)throw Error(r(160));y1(b,D,v),_t=null,sr=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)x1(o,a),o=o.sibling}var ma=null;function x1(a,o){var c=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:xr(o,a),br(a),m&4&&(Wi(3,a,a.return),_c(3,a),Wi(5,a,a.return));break;case 1:xr(o,a),br(a),m&512&&(Yt||c===null||_a(c,c.return)),m&64&&oi&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var v=ma;if(xr(o,a),br(a),m&512&&(Yt||c===null||_a(c,c.return)),m&4){var b=c!==null?c.memoizedState:null;if(m=a.memoizedState,c===null)if(m===null)if(a.stateNode===null){e:{m=a.type,c=a.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Mi]||b[Ge]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(m),v.head.insertBefore(b,v.querySelector("head > title"))),Pn(b,m,c),b[Ge]=a,zt(b),m=b;break e;case"link":var D=pC("link","href",v).get(m+(c.href||""));if(D){for(var O=0;O<D.length;O++)if(b=D[O],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){D.splice(O,1);break t}}b=v.createElement(m),Pn(b,m,c),v.head.appendChild(b);break;case"meta":if(D=pC("meta","content",v).get(m+(c.content||""))){for(O=0;O<D.length;O++)if(b=D[O],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){D.splice(O,1);break t}}b=v.createElement(m),Pn(b,m,c),v.head.appendChild(b);break;default:throw Error(r(468,m))}b[Ge]=a,zt(b),m=b}a.stateNode=m}else hC(v,a.type,a.stateNode);else a.stateNode=fC(v,m,a.memoizedProps);else b!==m?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,m===null?hC(v,a.type,a.stateNode):fC(v,m,a.memoizedProps)):m===null&&a.stateNode!==null&&Dm(a,a.memoizedProps,c.memoizedProps)}break;case 27:xr(o,a),br(a),m&512&&(Yt||c===null||_a(c,c.return)),c!==null&&m&4&&Dm(a,a.memoizedProps,c.memoizedProps);break;case 5:if(xr(o,a),br(a),m&512&&(Yt||c===null||_a(c,c.return)),a.flags&32){v=a.stateNode;try{Da(v,"")}catch(ae){bt(a,a.return,ae)}}m&4&&a.stateNode!=null&&(v=a.memoizedProps,Dm(a,v,c!==null?c.memoizedProps:v)),m&1024&&(jm=!0);break;case 6:if(xr(o,a),br(a),m&4){if(a.stateNode===null)throw Error(r(162));m=a.memoizedProps,c=a.stateNode;try{c.nodeValue=m}catch(ae){bt(a,a.return,ae)}}break;case 3:if(cf=null,v=ma,ma=of(o.containerInfo),xr(o,a),ma=v,br(a),m&4&&c!==null&&c.memoizedState.isDehydrated)try{Xc(o.containerInfo)}catch(ae){bt(a,a.return,ae)}jm&&(jm=!1,b1(a));break;case 4:m=ma,ma=of(a.stateNode.containerInfo),xr(o,a),br(a),ma=m;break;case 12:xr(o,a),br(a);break;case 13:xr(o,a),br(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&($m=wt()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,_m(a,m)));break;case 22:v=a.memoizedState!==null;var H=c!==null&&c.memoizedState!==null,ee=oi,ue=Yt;if(oi=ee||v,Yt=ue||H,xr(o,a),Yt=ue,oi=ee,br(a),m&8192)e:for(o=a.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(c===null||H||oi||Yt||Js(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){H=c=o;try{if(b=H.stateNode,v)D=b.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{O=H.stateNode;var pe=H.memoizedProps.style,re=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;O.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ae){bt(H,H.return,ae)}}}else if(o.tag===6){if(c===null){H=o;try{H.stateNode.nodeValue=v?"":H.memoizedProps}catch(ae){bt(H,H.return,ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=a.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,_m(a,c))));break;case 19:xr(o,a),br(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,_m(a,m)));break;case 30:break;case 21:break;default:xr(o,a),br(a)}}function br(a){var o=a.flags;if(o&2){try{for(var c,m=a.return;m!==null;){if(f1(m)){c=m;break}m=m.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var v=c.stateNode,b=Nm(a);Vd(a,b,v);break;case 5:var D=c.stateNode;c.flags&32&&(Da(D,""),c.flags&=-33);var O=Nm(a);Vd(a,O,D);break;case 3:case 4:var H=c.stateNode.containerInfo,ee=Nm(a);Om(a,ee,H);break;default:throw Error(r(161))}}catch(ue){bt(a,a.return,ue)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function b1(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;b1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Xi(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)m1(a,o.alternate,o),o=o.sibling}function Js(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Wi(4,o,o.return),Js(o);break;case 1:_a(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&u1(o,o.return,c),Js(o);break;case 27:Hc(o.stateNode);case 26:case 5:_a(o,o.return),Js(o);break;case 22:o.memoizedState===null&&Js(o);break;case 30:Js(o);break;default:Js(o)}a=a.sibling}}function Qi(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,v=a,b=o,D=b.flags;switch(b.tag){case 0:case 11:case 15:Qi(v,b,c),_c(4,b);break;case 1:if(Qi(v,b,c),m=b,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ee){bt(m,m.return,ee)}if(m=b,v=m.updateQueue,v!==null){var O=m.stateNode;try{var H=v.shared.hiddenCallbacks;if(H!==null)for(v.shared.hiddenCallbacks=null,v=0;v<H.length;v++)Wb(H[v],O)}catch(ee){bt(m,m.return,ee)}}c&&D&64&&c1(b),kc(b,b.return);break;case 27:p1(b);case 26:case 5:Qi(v,b,c),c&&m===null&&D&4&&d1(b),kc(b,b.return);break;case 12:Qi(v,b,c);break;case 13:Qi(v,b,c),c&&D&4&&v1(v,b);break;case 22:b.memoizedState===null&&Qi(v,b,c),kc(b,b.return);break;case 30:break;default:Qi(v,b,c)}o=o.sibling}}function km(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&vc(c))}function Mm(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&vc(a))}function ka(a,o,c,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)S1(a,o,c,m),o=o.sibling}function S1(a,o,c,m){var v=o.flags;switch(o.tag){case 0:case 11:case 15:ka(a,o,c,m),v&2048&&_c(9,o);break;case 1:ka(a,o,c,m);break;case 3:ka(a,o,c,m),v&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&vc(a)));break;case 12:if(v&2048){ka(a,o,c,m),a=o.stateNode;try{var b=o.memoizedProps,D=b.id,O=b.onPostCommit;typeof O=="function"&&O(D,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(H){bt(o,o.return,H)}}else ka(a,o,c,m);break;case 13:ka(a,o,c,m);break;case 23:break;case 22:b=o.stateNode,D=o.alternate,o.memoizedState!==null?b._visibility&2?ka(a,o,c,m):Mc(a,o):b._visibility&2?ka(a,o,c,m):(b._visibility|=2,nl(a,o,c,m,(o.subtreeFlags&10256)!==0)),v&2048&&km(D,o);break;case 24:ka(a,o,c,m),v&2048&&Mm(o.alternate,o);break;default:ka(a,o,c,m)}}function nl(a,o,c,m,v){for(v=v&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=a,D=o,O=c,H=m,ee=D.flags;switch(D.tag){case 0:case 11:case 15:nl(b,D,O,H,v),_c(8,D);break;case 23:break;case 22:var ue=D.stateNode;D.memoizedState!==null?ue._visibility&2?nl(b,D,O,H,v):Mc(b,D):(ue._visibility|=2,nl(b,D,O,H,v)),v&&ee&2048&&km(D.alternate,D);break;case 24:nl(b,D,O,H,v),v&&ee&2048&&Mm(D.alternate,D);break;default:nl(b,D,O,H,v)}o=o.sibling}}function Mc(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,m=o,v=m.flags;switch(m.tag){case 22:Mc(c,m),v&2048&&km(m.alternate,m);break;case 24:Mc(c,m),v&2048&&Mm(m.alternate,m);break;default:Mc(c,m)}o=o.sibling}}var Ic=8192;function rl(a){if(a.subtreeFlags&Ic)for(a=a.child;a!==null;)C1(a),a=a.sibling}function C1(a){switch(a.tag){case 26:rl(a),a.flags&Ic&&a.memoizedState!==null&&Hk(ma,a.memoizedState,a.memoizedProps);break;case 5:rl(a);break;case 3:case 4:var o=ma;ma=of(a.stateNode.containerInfo),rl(a),ma=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Ic,Ic=16777216,rl(a),Ic=o):rl(a));break;default:rl(a)}}function A1(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Rc(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];mn=m,w1(m,a)}A1(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)E1(a),a=a.sibling}function E1(a){switch(a.tag){case 0:case 11:case 15:Rc(a),a.flags&2048&&Wi(9,a,a.return);break;case 3:Rc(a);break;case 12:Rc(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Kd(a)):Rc(a);break;default:Rc(a)}}function Kd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var m=o[c];mn=m,w1(m,a)}A1(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Wi(8,o,o.return),Kd(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Kd(o));break;default:Kd(o)}a=a.sibling}}function w1(a,o){for(;mn!==null;){var c=mn;switch(c.tag){case 0:case 11:case 15:Wi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:vc(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,mn=m;else e:for(c=a;mn!==null;){m=mn;var v=m.sibling,b=m.return;if(g1(m),m===c){mn=null;break e}if(v!==null){v.return=b,mn=v;break e}mn=b}}}var ak={getCacheForType:function(a){var o=In(rn),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},ik=typeof WeakMap=="function"?WeakMap:Map,lt=0,At=null,Qe=null,tt=0,ct=0,Sr=null,Ji=!1,al=!1,Im=!1,ci=0,Ht=0,Zi=0,Zs=0,Rm=0,qr=0,il=0,Lc=null,or=null,Lm=!1,$m=0,Wd=1/0,Xd=null,es=null,wn=0,ts=null,sl=null,ol=0,Bm=0,zm=null,P1=null,$c=0,Um=null;function Cr(){if((lt&2)!==0&&tt!==0)return tt&-tt;if(I.T!==null){var a=Ko;return a!==0?a:Km()}return nn()}function T1(){qr===0&&(qr=(tt&536870912)===0||ot?_o():536870912);var a=Gr.current;return a!==null&&(a.flags|=32),qr}function Ar(a,o,c){(a===At&&(ct===2||ct===9)||a.cancelPendingCommit!==null)&&(ll(a,0),ns(a,tt,qr,!1)),oe(a,c),((lt&2)===0||a!==At)&&(a===At&&((lt&2)===0&&(Zs|=c),Ht===4&&ns(a,tt,qr,!1)),Ma(a))}function D1(a,o,c){if((lt&6)!==0)throw Error(r(327));var m=!c&&(o&124)===0&&(o&a.expiredLanes)===0||gr(a,o),v=m?lk(a,o):qm(a,o,!0),b=m;do{if(v===0){al&&!m&&ns(a,o,0,!1);break}else{if(c=a.current.alternate,b&&!sk(c)){v=qm(a,o,!1),b=!1;continue}if(v===2){if(b=o,a.errorRecoveryDisabledLanes&b)var D=0;else D=a.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){o=D;e:{var O=a;v=Lc;var H=O.current.memoizedState.isDehydrated;if(H&&(ll(O,D).flags|=256),D=qm(O,D,!1),D!==2){if(Im&&!H){O.errorRecoveryDisabledLanes|=b,Zs|=b,v=4;break e}b=or,or=v,b!==null&&(or===null?or=b:or.push.apply(or,b))}v=D}if(b=!1,v!==2)continue}}if(v===1){ll(a,0),ns(a,o,0,!0);break}e:{switch(m=a,b=v,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:ns(m,o,qr,!Ji);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(v=$m+300-wt(),10<v)){if(ns(m,o,qr,!Ji),_i(m,0,!0)!==0)break e;m.timeoutHandle=rC(N1.bind(null,m,c,or,Xd,Lm,o,qr,Zs,il,Ji,b,2,-0,0),v);break e}N1(m,c,or,Xd,Lm,o,qr,Zs,il,Ji,b,0,-0,0)}}break}while(!0);Ma(a)}function N1(a,o,c,m,v,b,D,O,H,ee,ue,pe,re,ae){if(a.timeoutHandle=-1,pe=o.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Yc={stylesheets:null,count:0,unsuspend:Uk},C1(o),pe=Gk(),pe!==null)){a.cancelPendingCommit=pe(R1.bind(null,a,o,b,c,m,v,D,O,H,ue,1,re,ae)),ns(a,b,D,!ee);return}R1(a,o,b,c,m,v,D,O,H)}function sk(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var v=c[m],b=v.getSnapshot;v=v.value;try{if(!B(b(),v))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ns(a,o,c,m){o&=~Rm,o&=~Zs,a.suspendedLanes|=o,a.pingedLanes&=~o,m&&(a.warmLanes|=o),m=a.expirationTimes;for(var v=o;0<v;){var b=31-jt(v),D=1<<b;m[b]=-1,v&=~D}c!==0&&ce(a,c,o)}function Qd(){return(lt&6)===0?(Bc(0),!1):!0}function Hm(){if(Qe!==null){if(ct===0)var a=Qe.return;else a=Qe,ti=Vs=null,im(a),el=null,Nc=0,a=Qe;for(;a!==null;)l1(a.alternate,a),a=a.return;Qe=null}}function ll(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,Ek(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),Hm(),At=a,Qe=c=Ja(a.current,null),tt=o,ct=0,Sr=null,Ji=!1,al=gr(a,o),Im=!1,il=qr=Rm=Zs=Zi=Ht=0,or=Lc=null,Lm=!1,(o&8)!==0&&(o|=o&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=o;0<m;){var v=31-jt(m),b=1<<v;o|=a[v],m&=~b}return ci=o,xd(),c}function O1(a,o){We=null,I.H=$d,o===bc||o===Dd?(o=Vb(),ct=3):o===qb?(o=Vb(),ct=4):ct=o===KS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Sr=o,Qe===null&&(Ht=1,Gd(a,Br(o,a.current)))}function j1(){var a=I.H;return I.H=$d,a===null?$d:a}function _1(){var a=I.A;return I.A=ak,a}function Gm(){Ht=4,Ji||(tt&4194048)!==tt&&Gr.current!==null||(al=!0),(Zi&134217727)===0&&(Zs&134217727)===0||At===null||ns(At,tt,qr,!1)}function qm(a,o,c){var m=lt;lt|=2;var v=j1(),b=_1();(At!==a||tt!==o)&&(Xd=null,ll(a,o)),o=!1;var D=Ht;e:do try{if(ct!==0&&Qe!==null){var O=Qe,H=Sr;switch(ct){case 8:Hm(),D=6;break e;case 3:case 2:case 9:case 6:Gr.current===null&&(o=!0);var ee=ct;if(ct=0,Sr=null,cl(a,O,H,ee),c&&al){D=0;break e}break;default:ee=ct,ct=0,Sr=null,cl(a,O,H,ee)}}ok(),D=Ht;break}catch(ue){O1(a,ue)}while(!0);return o&&a.shellSuspendCounter++,ti=Vs=null,lt=m,I.H=v,I.A=b,Qe===null&&(At=null,tt=0,xd()),D}function ok(){for(;Qe!==null;)k1(Qe)}function lk(a,o){var c=lt;lt|=2;var m=j1(),v=_1();At!==a||tt!==o?(Xd=null,Wd=wt()+500,ll(a,o)):al=gr(a,o);e:do try{if(ct!==0&&Qe!==null){o=Qe;var b=Sr;t:switch(ct){case 1:ct=0,Sr=null,cl(a,o,b,1);break;case 2:case 9:if(Yb(b)){ct=0,Sr=null,M1(o);break}o=function(){ct!==2&&ct!==9||At!==a||(ct=7),Ma(a)},b.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Yb(b)?(ct=0,Sr=null,M1(o)):(ct=0,Sr=null,cl(a,o,b,7));break;case 5:var D=null;switch(Qe.tag){case 26:D=Qe.memoizedState;case 5:case 27:var O=Qe;if(!D||mC(D)){ct=0,Sr=null;var H=O.sibling;if(H!==null)Qe=H;else{var ee=O.return;ee!==null?(Qe=ee,Jd(ee)):Qe=null}break t}}ct=0,Sr=null,cl(a,o,b,5);break;case 6:ct=0,Sr=null,cl(a,o,b,6);break;case 8:Hm(),Ht=6;break e;default:throw Error(r(462))}}ck();break}catch(ue){O1(a,ue)}while(!0);return ti=Vs=null,I.H=m,I.A=v,lt=c,Qe!==null?0:(At=null,tt=0,xd(),Ht)}function ck(){for(;Qe!==null&&!Bt();)k1(Qe)}function k1(a){var o=s1(a.alternate,a,ci);a.memoizedProps=a.pendingProps,o===null?Jd(a):Qe=o}function M1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=e1(c,o,o.pendingProps,o.type,void 0,tt);break;case 11:o=e1(c,o,o.pendingProps,o.type.render,o.ref,tt);break;case 5:im(o);default:l1(c,o),o=Qe=Ib(o,ci),o=s1(c,o,ci)}a.memoizedProps=a.pendingProps,o===null?Jd(a):Qe=o}function cl(a,o,c,m){ti=Vs=null,im(o),el=null,Nc=0;var v=o.return;try{if(J_(a,v,o,c,tt)){Ht=1,Gd(a,Br(c,a.current)),Qe=null;return}}catch(b){if(v!==null)throw Qe=v,b;Ht=1,Gd(a,Br(c,a.current)),Qe=null;return}o.flags&32768?(ot||m===1?a=!0:al||(tt&536870912)!==0?a=!1:(Ji=a=!0,(m===2||m===9||m===3||m===6)&&(m=Gr.current,m!==null&&m.tag===13&&(m.flags|=16384))),I1(o,a)):Jd(o)}function Jd(a){var o=a;do{if((o.flags&32768)!==0){I1(o,Ji);return}a=o.return;var c=ek(o.alternate,o,ci);if(c!==null){Qe=c;return}if(o=o.sibling,o!==null){Qe=o;return}Qe=o=a}while(o!==null);Ht===0&&(Ht=5)}function I1(a,o){do{var c=tk(a.alternate,a);if(c!==null){c.flags&=32767,Qe=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){Qe=a;return}Qe=a=c}while(a!==null);Ht=6,Qe=null}function R1(a,o,c,m,v,b,D,O,H){a.cancelPendingCommit=null;do Zd();while(wn!==0);if((lt&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=Mh,de(a,c,b,D,O,H),a===At&&(Qe=At=null,tt=0),sl=o,ts=a,ol=c,Bm=b,zm=v,P1=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,pk(Hn,function(){return U1(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=I.T,I.T=null,v=G.p,G.p=2,D=lt,lt|=4;try{nk(a,o,c)}finally{lt=D,G.p=v,I.T=m}}wn=1,L1(),$1(),B1()}}function L1(){if(wn===1){wn=0;var a=ts,o=sl,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=I.T,I.T=null;var m=G.p;G.p=2;var v=lt;lt|=4;try{x1(o,a);var b=ng,D=Be(a.containerInfo),O=b.focusedElem,H=b.selectionRange;if(D!==O&&O&&O.ownerDocument&&Ae(O.ownerDocument.documentElement,O)){if(H!==null&&Ye(O)){var ee=H.start,ue=H.end;if(ue===void 0&&(ue=ee),"selectionStart"in O)O.selectionStart=ee,O.selectionEnd=Math.min(ue,O.value.length);else{var pe=O.ownerDocument||document,re=pe&&pe.defaultView||window;if(re.getSelection){var ae=re.getSelection(),ze=O.textContent.length,Le=Math.min(H.start,ze),gt=H.end===void 0?Le:Math.min(H.end,ze);!ae.extend&&Le>gt&&(D=gt,gt=Le,Le=D);var X=me(O,Le),Y=me(O,gt);if(X&&Y&&(ae.rangeCount!==1||ae.anchorNode!==X.node||ae.anchorOffset!==X.offset||ae.focusNode!==Y.node||ae.focusOffset!==Y.offset)){var J=pe.createRange();J.setStart(X.node,X.offset),ae.removeAllRanges(),Le>gt?(ae.addRange(J),ae.extend(Y.node,Y.offset)):(J.setEnd(Y.node,Y.offset),ae.addRange(J))}}}}for(pe=[],ae=O;ae=ae.parentNode;)ae.nodeType===1&&pe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<pe.length;O++){var fe=pe[O];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}ff=!!tg,ng=tg=null}finally{lt=v,G.p=m,I.T=c}}a.current=o,wn=2}}function $1(){if(wn===2){wn=0;var a=ts,o=sl,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=I.T,I.T=null;var m=G.p;G.p=2;var v=lt;lt|=4;try{m1(a,o.alternate,o)}finally{lt=v,G.p=m,I.T=c}}wn=3}}function B1(){if(wn===4||wn===3){wn=0,Gt();var a=ts,o=sl,c=ol,m=P1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?wn=5:(wn=0,sl=ts=null,z1(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(es=null),je(c),o=o.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(aa,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=I.T,v=G.p,G.p=2,I.T=null;try{for(var b=a.onRecoverableError,D=0;D<m.length;D++){var O=m[D];b(O.value,{componentStack:O.stack})}}finally{I.T=o,G.p=v}}(ol&3)!==0&&Zd(),Ma(a),v=a.pendingLanes,(c&4194090)!==0&&(v&42)!==0?a===Um?$c++:($c=0,Um=a):$c=0,Bc(0)}}function z1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,vc(o)))}function Zd(a){return L1(),$1(),B1(),U1()}function U1(){if(wn!==5)return!1;var a=ts,o=Bm;Bm=0;var c=je(ol),m=I.T,v=G.p;try{G.p=32>c?32:c,I.T=null,c=zm,zm=null;var b=ts,D=ol;if(wn=0,sl=ts=null,ol=0,(lt&6)!==0)throw Error(r(331));var O=lt;if(lt|=4,E1(b.current),S1(b,b.current,D,c),lt=O,Bc(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(aa,b)}catch{}return!0}finally{G.p=v,I.T=m,z1(a,o)}}function H1(a,o,c){o=Br(c,o),o=xm(a.stateNode,o,2),a=Yi(a,o,2),a!==null&&(oe(a,2),Ma(a))}function bt(a,o,c){if(a.tag===3)H1(a,a,c);else for(;o!==null;){if(o.tag===3){H1(o,a,c);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(es===null||!es.has(m))){a=Br(c,a),c=FS(2),m=Yi(o,c,2),m!==null&&(VS(c,m,o,a),oe(m,2),Ma(m));break}}o=o.return}}function Ym(a,o,c){var m=a.pingCache;if(m===null){m=a.pingCache=new ik;var v=new Set;m.set(o,v)}else v=m.get(o),v===void 0&&(v=new Set,m.set(o,v));v.has(c)||(Im=!0,v.add(c),a=uk.bind(null,a,o,c),o.then(a,a))}function uk(a,o,c){var m=a.pingCache;m!==null&&m.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,At===a&&(tt&c)===c&&(Ht===4||Ht===3&&(tt&62914560)===tt&&300>wt()-$m?(lt&2)===0&&ll(a,0):Rm|=c,il===tt&&(il=0)),Ma(a)}function G1(a,o){o===0&&(o=Ts()),a=qo(a,o),a!==null&&(oe(a,o),Ma(a))}function dk(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),G1(a,c)}function fk(a,o){var c=0;switch(a.tag){case 13:var m=a.stateNode,v=a.memoizedState;v!==null&&(c=v.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(o),G1(a,c)}function pk(a,o){return xt(a,o)}var ef=null,ul=null,Fm=!1,tf=!1,Vm=!1,eo=0;function Ma(a){a!==ul&&a.next===null&&(ul===null?ef=ul=a:ul=ul.next=a),tf=!0,Fm||(Fm=!0,mk())}function Bc(a,o){if(!Vm&&tf){Vm=!0;do for(var c=!1,m=ef;m!==null;){if(a!==0){var v=m.pendingLanes;if(v===0)var b=0;else{var D=m.suspendedLanes,O=m.pingedLanes;b=(1<<31-jt(42|a)+1)-1,b&=v&~(D&~O),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,V1(m,b))}else b=tt,b=_i(m,m===At?b:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(b&3)===0||gr(m,b)||(c=!0,V1(m,b));m=m.next}while(c);Vm=!1}}function hk(){q1()}function q1(){tf=Fm=!1;var a=0;eo!==0&&(Ak()&&(a=eo),eo=0);for(var o=wt(),c=null,m=ef;m!==null;){var v=m.next,b=Y1(m,o);b===0?(m.next=null,c===null?ef=v:c.next=v,v===null&&(ul=c)):(c=m,(a!==0||(b&3)!==0)&&(tf=!0)),m=v}Bc(a)}function Y1(a,o){for(var c=a.suspendedLanes,m=a.pingedLanes,v=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var D=31-jt(b),O=1<<D,H=v[D];H===-1?((O&c)===0||(O&m)!==0)&&(v[D]=Fa(O,o)):H<=o&&(a.expiredLanes|=O),b&=~O}if(o=At,c=tt,c=_i(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,c===0||a===o&&(ct===2||ct===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&He(m),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||gr(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(m!==null&&He(m),je(c)){case 2:case 8:c=Oi;break;case 32:c=Hn;break;case 268435456:c=Ea;break;default:c=Hn}return m=F1.bind(null,a),c=xt(c,m),a.callbackPriority=o,a.callbackNode=c,o}return m!==null&&m!==null&&He(m),a.callbackPriority=2,a.callbackNode=null,2}function F1(a,o){if(wn!==0&&wn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(Zd()&&a.callbackNode!==c)return null;var m=tt;return m=_i(a,a===At?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(D1(a,m,o),Y1(a,wt()),a.callbackNode!=null&&a.callbackNode===c?F1.bind(null,a):null)}function V1(a,o){if(Zd())return null;D1(a,o,!0)}function mk(){wk(function(){(lt&6)!==0?xt(Oo,hk):q1()})}function Km(){return eo===0&&(eo=_o()),eo}function K1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ec(""+a)}function W1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function gk(a,o,c,m,v){if(o==="submit"&&c&&c.stateNode===v){var b=K1((v[Fe]||null).action),D=m.submitter;D&&(o=(o=D[Fe]||null)?K1(o.formAction):D.getAttribute("formAction"),o!==null&&(b=o,D=null));var O=new Wt("action","action",null,m,v);a.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(eo!==0){var H=D?W1(v,D):new FormData(v);hm(c,{pending:!0,data:H,method:v.method,action:b},null,H)}}else typeof b=="function"&&(O.preventDefault(),H=D?W1(v,D):new FormData(v),hm(c,{pending:!0,data:H,method:v.method,action:b},b,H))},currentTarget:v}]})}}for(var Wm=0;Wm<kh.length;Wm++){var Xm=kh[Wm],yk=Xm.toLowerCase(),vk=Xm[0].toUpperCase()+Xm.slice(1);ha(yk,"on"+vk)}ha(Db,"onAnimationEnd"),ha(Nb,"onAnimationIteration"),ha(Ob,"onAnimationStart"),ha("dblclick","onDoubleClick"),ha("focusin","onFocus"),ha("focusout","onBlur"),ha(I_,"onTransitionRun"),ha(R_,"onTransitionStart"),ha(L_,"onTransitionCancel"),ha(jb,"onTransitionEnd"),Yn("onMouseEnter",["mouseout","mouseover"]),Yn("onMouseLeave",["mouseout","mouseover"]),Yn("onPointerEnter",["pointerout","pointerover"]),Yn("onPointerLeave",["pointerout","pointerover"]),nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zc));function X1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var m=a[c],v=m.event;m=m.listeners;e:{var b=void 0;if(o)for(var D=m.length-1;0<=D;D--){var O=m[D],H=O.instance,ee=O.currentTarget;if(O=O.listener,H!==b&&v.isPropagationStopped())break e;b=O,v.currentTarget=ee;try{b(v)}catch(ue){Hd(ue)}v.currentTarget=null,b=H}else for(D=0;D<m.length;D++){if(O=m[D],H=O.instance,ee=O.currentTarget,O=O.listener,H!==b&&v.isPropagationStopped())break e;b=O,v.currentTarget=ee;try{b(v)}catch(ue){Hd(ue)}v.currentTarget=null,b=H}}}}function Je(a,o){var c=o[pn];c===void 0&&(c=o[pn]=new Set);var m=a+"__bubble";c.has(m)||(Q1(o,a,2,!1),c.add(m))}function Qm(a,o,c){var m=0;o&&(m|=4),Q1(c,a,m,o)}var nf="_reactListening"+Math.random().toString(36).slice(2);function Jm(a){if(!a[nf]){a[nf]=!0,tr.forEach(function(c){c!=="selectionchange"&&(xk.has(c)||Qm(c,!1,a),Qm(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[nf]||(o[nf]=!0,Qm("selectionchange",!1,o))}}function Q1(a,o,c,m){switch(SC(o)){case 2:var v=Fk;break;case 8:v=Vk;break;default:v=fg}c=v.bind(null,o,c,a),v=void 0,!da||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),m?v!==void 0?a.addEventListener(o,c,{capture:!0,passive:v}):a.addEventListener(o,c,!0):v!==void 0?a.addEventListener(o,c,{passive:v}):a.addEventListener(o,c,!1)}function Zm(a,o,c,m,v){var b=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var O=m.stateNode.containerInfo;if(O===v)break;if(D===4)for(D=m.return;D!==null;){var H=D.tag;if((H===3||H===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;O!==null;){if(D=Ns(O),D===null)return;if(H=D.tag,H===5||H===6||H===26||H===27){m=b=D;continue e}O=O.parentNode}}m=m.return}Is(function(){var ee=b,ue=Ro(c),pe=[];e:{var re=_b.get(a);if(re!==void 0){var ae=Wt,ze=a;switch(a){case"keypress":if(fa(c)===0)break e;case"keydown":case"keyup":ae=bh;break;case"focusin":ze="focus",ae=oc;break;case"focusout":ze="blur",ae=oc;break;case"beforeblur":case"afterblur":ae=oc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Zu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Pb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Ch;break;case Db:case Nb:case Ob:ae=Re;break;case jb:ae=Kn;break;case"scroll":case"scrollend":ae=Eb;break;case"wheel":ae=zo;break;case"copy":case"cut":case"paste":ae=Ls;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=rd;break;case"toggle":case"beforetoggle":ae=Ah}var Le=(o&4)!==0,gt=!Le&&(a==="scroll"||a==="scrollend"),X=Le?re!==null?re+"Capture":null:re;Le=[];for(var Y=ee,J;Y!==null;){var fe=Y;if(J=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||J===null||X===null||(fe=ua(Y,X),fe!=null&&Le.push(Uc(Y,fe,J))),gt)break;Y=Y.return}0<Le.length&&(re=new ae(re,ze,null,c,ue),pe.push({event:re,listeners:Le}))}}if((o&7)===0){e:{if(re=a==="mouseover"||a==="pointerover",ae=a==="mouseout"||a==="pointerout",re&&c!==_s&&(ze=c.relatedTarget||c.fromElement)&&(Ns(ze)||ze[Tt]))break e;if((ae||re)&&(re=ue.window===ue?ue:(re=ue.ownerDocument)?re.defaultView||re.parentWindow:window,ae?(ze=c.relatedTarget||c.toElement,ae=ee,ze=ze?Ns(ze):null,ze!==null&&(gt=s(ze),Le=ze.tag,ze!==gt||Le!==5&&Le!==27&&Le!==6)&&(ze=null)):(ae=null,ze=ee),ae!==ze)){if(Le=Zu,fe="onMouseLeave",X="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(Le=rd,fe="onPointerLeave",X="onPointerEnter",Y="pointer"),gt=ae==null?re:sa(ae),J=ze==null?re:sa(ze),re=new Le(fe,Y+"leave",ae,c,ue),re.target=gt,re.relatedTarget=J,fe=null,Ns(ue)===ee&&(Le=new Le(X,Y+"enter",ze,c,ue),Le.target=J,Le.relatedTarget=gt,fe=Le),gt=fe,ae&&ze)t:{for(Le=ae,X=ze,Y=0,J=Le;J;J=dl(J))Y++;for(J=0,fe=X;fe;fe=dl(fe))J++;for(;0<Y-J;)Le=dl(Le),Y--;for(;0<J-Y;)X=dl(X),J--;for(;Y--;){if(Le===X||X!==null&&Le===X.alternate)break t;Le=dl(Le),X=dl(X)}Le=null}else Le=null;ae!==null&&J1(pe,re,ae,Le,!1),ze!==null&&gt!==null&&J1(pe,gt,ze,Le,!0)}}e:{if(re=ee?sa(ee):window,ae=re.nodeName&&re.nodeName.toLowerCase(),ae==="select"||ae==="input"&&re.type==="file")var Te=pd;else if(dd(re))if(hd)Te=Oh;else{Te=vd;var Xe=Dh}else ae=re.nodeName,!ae||ae.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ee&&Zl(ee.elementType)&&(Te=pd):Te=Nh;if(Te&&(Te=Te(a,ee))){fd(pe,Te,c,ue);break e}Xe&&Xe(a,re,ee),a==="focusout"&&ee&&re.type==="number"&&ee.memoizedProps.value!=null&&Rr(re,"number",re.value)}switch(Xe=ee?sa(ee):window,a){case"focusin":(dd(Xe)||Xe.contentEditable==="true")&&(Mn=Xe,Bi=ee,Na=null);break;case"focusout":Na=Bi=Mn=null;break;case"mousedown":pc=!0;break;case"contextmenu":case"mouseup":case"dragend":pc=!1,zi(pe,c,ue);break;case"selectionchange":if(Dt)break;case"keydown":case"keyup":zi(pe,c,ue)}var _e;if(dc)e:{switch(a){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Li?ld(a,c)&&($e="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&($e="onCompositionStart");$e&&(id&&c.locale!=="ko"&&(Li||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Li&&(_e=nt()):($r=ue,nc="value"in $r?$r.value:$r.textContent,Li=!0)),Xe=rf(ee,$e),0<Xe.length&&($e=new lc($e,a,null,c,ue),pe.push({event:$e,listeners:Xe}),_e?$e.data=_e:(_e=cd(c),_e!==null&&($e.data=_e)))),(_e=Eh?wh(a,c):ud(a,c))&&($e=rf(ee,"onBeforeInput"),0<$e.length&&(Xe=new lc("onBeforeInput","beforeinput",null,c,ue),pe.push({event:Xe,listeners:$e}),Xe.data=_e)),gk(pe,a,ee,c,ue)}X1(pe,o)})}function Uc(a,o,c){return{instance:a,listener:o,currentTarget:c}}function rf(a,o){for(var c=o+"Capture",m=[];a!==null;){var v=a,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=ua(a,c),v!=null&&m.unshift(Uc(a,v,b)),v=ua(a,o),v!=null&&m.push(Uc(a,v,b))),a.tag===3)return m;a=a.return}return[]}function dl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function J1(a,o,c,m,v){for(var b=o._reactName,D=[];c!==null&&c!==m;){var O=c,H=O.alternate,ee=O.stateNode;if(O=O.tag,H!==null&&H===m)break;O!==5&&O!==26&&O!==27||ee===null||(H=ee,v?(ee=ua(c,b),ee!=null&&D.unshift(Uc(c,ee,H))):v||(ee=ua(c,b),ee!=null&&D.push(Uc(c,ee,H)))),c=c.return}D.length!==0&&a.push({event:o,listeners:D})}var bk=/\r\n?/g,Sk=/\u0000|\uFFFD/g;function Z1(a){return(typeof a=="string"?a:""+a).replace(bk,`
`).replace(Sk,"")}function eC(a,o){return o=Z1(o),Z1(a)===o}function af(){}function mt(a,o,c,m,v,b){switch(c){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Da(a,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Da(a,""+m);break;case"className":Fn(a,"class",m);break;case"tabIndex":Fn(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Fn(a,c,m);break;case"style":Jl(a,m,b);break;case"data":if(o!=="object"){Fn(a,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(c);break}m=ec(""+m),a.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&mt(a,o,"name",v.name,v,null),mt(a,o,"formEncType",v.formEncType,v,null),mt(a,o,"formMethod",v.formMethod,v,null),mt(a,o,"formTarget",v.formTarget,v,null)):(mt(a,o,"encType",v.encType,v,null),mt(a,o,"method",v.method,v,null),mt(a,o,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(c);break}m=ec(""+m),a.setAttribute(c,m);break;case"onClick":m!=null&&(a.onclick=af);break;case"onScroll":m!=null&&Je("scroll",a);break;case"onScrollEnd":m!=null&&Je("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(c=m.__html,c!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}c=ec(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(c,""+m):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":m===!0?a.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(c,m):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(c,m):a.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(c):a.setAttribute(c,m);break;case"popover":Je("beforetoggle",a),Je("toggle",a),Pa(a,"popover",m);break;case"xlinkActuate":kn(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":kn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":kn(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":kn(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":kn(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":kn(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":kn(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":kn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":kn(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Pa(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ju.get(c)||c,Pa(a,c,m))}}function eg(a,o,c,m,v,b){switch(c){case"style":Jl(a,m,b);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(c=m.__html,c!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof m=="string"?Da(a,m):(typeof m=="number"||typeof m=="bigint")&&Da(a,""+m);break;case"onScroll":m!=null&&Je("scroll",a);break;case"onScrollEnd":m!=null&&Je("scrollend",a);break;case"onClick":m!=null&&(a.onclick=af);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oa.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),o=c.slice(2,v?c.length-7:void 0),b=a[Fe]||null,b=b!=null?b[c]:null,typeof b=="function"&&a.removeEventListener(o,b,v),typeof m=="function")){typeof b!="function"&&b!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,m,v);break e}c in a?a[c]=m:m===!0?a.setAttribute(c,""):Pa(a,c,m)}}}function Pn(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",a),Je("load",a);var m=!1,v=!1,b;for(b in c)if(c.hasOwnProperty(b)){var D=c[b];if(D!=null)switch(b){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:mt(a,o,b,D,c,null)}}v&&mt(a,o,"srcSet",c.srcSet,c,null),m&&mt(a,o,"src",c.src,c,null);return;case"input":Je("invalid",a);var O=b=D=v=null,H=null,ee=null;for(m in c)if(c.hasOwnProperty(m)){var ue=c[m];if(ue!=null)switch(m){case"name":v=ue;break;case"type":D=ue;break;case"checked":H=ue;break;case"defaultChecked":ee=ue;break;case"value":b=ue;break;case"defaultValue":O=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,o));break;default:mt(a,o,m,ue,c,null)}}js(a,b,O,H,ee,D,v,!1),ca(a);return;case"select":Je("invalid",a),m=D=b=null;for(v in c)if(c.hasOwnProperty(v)&&(O=c[v],O!=null))switch(v){case"value":b=O;break;case"defaultValue":D=O;break;case"multiple":m=O;default:mt(a,o,v,O,c,null)}o=b,c=D,a.multiple=!!m,o!=null?Ta(a,!!m,o,!1):c!=null&&Ta(a,!!m,c,!0);return;case"textarea":Je("invalid",a),b=v=m=null;for(D in c)if(c.hasOwnProperty(D)&&(O=c[D],O!=null))switch(D){case"value":m=O;break;case"defaultValue":v=O;break;case"children":b=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:mt(a,o,D,O,c,null)}Wa(a,m,v,b),ca(a);return;case"option":for(H in c)if(c.hasOwnProperty(H)&&(m=c[H],m!=null))switch(H){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:mt(a,o,H,m,c,null)}return;case"dialog":Je("beforetoggle",a),Je("toggle",a),Je("cancel",a),Je("close",a);break;case"iframe":case"object":Je("load",a);break;case"video":case"audio":for(m=0;m<zc.length;m++)Je(zc[m],a);break;case"image":Je("error",a),Je("load",a);break;case"details":Je("toggle",a);break;case"embed":case"source":case"link":Je("error",a),Je("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in c)if(c.hasOwnProperty(ee)&&(m=c[ee],m!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:mt(a,o,ee,m,c,null)}return;default:if(Zl(o)){for(ue in c)c.hasOwnProperty(ue)&&(m=c[ue],m!==void 0&&eg(a,o,ue,m,c,void 0));return}}for(O in c)c.hasOwnProperty(O)&&(m=c[O],m!=null&&mt(a,o,O,m,c,null))}function Ck(a,o,c,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,D=null,O=null,H=null,ee=null,ue=null;for(ae in c){var pe=c[ae];if(c.hasOwnProperty(ae)&&pe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":H=pe;default:m.hasOwnProperty(ae)||mt(a,o,ae,null,m,pe)}}for(var re in m){var ae=m[re];if(pe=c[re],m.hasOwnProperty(re)&&(ae!=null||pe!=null))switch(re){case"type":b=ae;break;case"name":v=ae;break;case"checked":ee=ae;break;case"defaultChecked":ue=ae;break;case"value":D=ae;break;case"defaultValue":O=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:ae!==pe&&mt(a,o,re,ae,m,pe)}}Ii(a,D,O,H,ee,ue,b,v);return;case"select":ae=D=O=re=null;for(b in c)if(H=c[b],c.hasOwnProperty(b)&&H!=null)switch(b){case"value":break;case"multiple":ae=H;default:m.hasOwnProperty(b)||mt(a,o,b,null,m,H)}for(v in m)if(b=m[v],H=c[v],m.hasOwnProperty(v)&&(b!=null||H!=null))switch(v){case"value":re=b;break;case"defaultValue":O=b;break;case"multiple":D=b;default:b!==H&&mt(a,o,v,b,m,H)}o=O,c=D,m=ae,re!=null?Ta(a,!!c,re,!1):!!m!=!!c&&(o!=null?Ta(a,!!c,o,!0):Ta(a,!!c,c?[]:"",!1));return;case"textarea":ae=re=null;for(O in c)if(v=c[O],c.hasOwnProperty(O)&&v!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:mt(a,o,O,null,m,v)}for(D in m)if(v=m[D],b=c[D],m.hasOwnProperty(D)&&(v!=null||b!=null))switch(D){case"value":re=v;break;case"defaultValue":ae=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==b&&mt(a,o,D,v,m,b)}Mo(a,re,ae);return;case"option":for(var ze in c)if(re=c[ze],c.hasOwnProperty(ze)&&re!=null&&!m.hasOwnProperty(ze))switch(ze){case"selected":a.selected=!1;break;default:mt(a,o,ze,null,m,re)}for(H in m)if(re=m[H],ae=c[H],m.hasOwnProperty(H)&&re!==ae&&(re!=null||ae!=null))switch(H){case"selected":a.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:mt(a,o,H,re,m,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in c)re=c[Le],c.hasOwnProperty(Le)&&re!=null&&!m.hasOwnProperty(Le)&&mt(a,o,Le,null,m,re);for(ee in m)if(re=m[ee],ae=c[ee],m.hasOwnProperty(ee)&&re!==ae&&(re!=null||ae!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:mt(a,o,ee,re,m,ae)}return;default:if(Zl(o)){for(var gt in c)re=c[gt],c.hasOwnProperty(gt)&&re!==void 0&&!m.hasOwnProperty(gt)&&eg(a,o,gt,void 0,m,re);for(ue in m)re=m[ue],ae=c[ue],!m.hasOwnProperty(ue)||re===ae||re===void 0&&ae===void 0||eg(a,o,ue,re,m,ae);return}}for(var X in c)re=c[X],c.hasOwnProperty(X)&&re!=null&&!m.hasOwnProperty(X)&&mt(a,o,X,null,m,re);for(pe in m)re=m[pe],ae=c[pe],!m.hasOwnProperty(pe)||re===ae||re==null&&ae==null||mt(a,o,pe,re,m,ae)}var tg=null,ng=null;function sf(a){return a.nodeType===9?a:a.ownerDocument}function tC(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nC(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function rg(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ag=null;function Ak(){var a=window.event;return a&&a.type==="popstate"?a===ag?!1:(ag=a,!0):(ag=null,!1)}var rC=typeof setTimeout=="function"?setTimeout:void 0,Ek=typeof clearTimeout=="function"?clearTimeout:void 0,aC=typeof Promise=="function"?Promise:void 0,wk=typeof queueMicrotask=="function"?queueMicrotask:typeof aC<"u"?function(a){return aC.resolve(null).then(a).catch(Pk)}:rC;function Pk(a){setTimeout(function(){throw a})}function rs(a){return a==="head"}function iC(a,o){var c=o,m=0,v=0;do{var b=c.nextSibling;if(a.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<m&&8>m){c=m;var D=a.ownerDocument;if(c&1&&Hc(D.documentElement),c&2&&Hc(D.body),c&4)for(c=D.head,Hc(c),D=c.firstChild;D;){var O=D.nextSibling,H=D.nodeName;D[Mi]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&D.rel.toLowerCase()==="stylesheet"||c.removeChild(D),D=O}}if(v===0){a.removeChild(b),Xc(o);return}v--}else c==="$"||c==="$?"||c==="$!"?v++:m=c.charCodeAt(0)-48;else m=0;c=b}while(c);Xc(o)}function ig(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":ig(c),Wu(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function Tk(a,o,c,m){for(;a.nodeType===1;){var v=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[Mi])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=ga(a.nextSibling),a===null)break}return null}function Dk(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=ga(a.nextSibling),a===null))return null;return a}function sg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Nk(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var m=function(){o(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function ga(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var og=null;function sC(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function oC(a,o,c){switch(o=sf(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Hc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Wu(a)}var Yr=new Map,lC=new Set;function of(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ui=G.d;G.d={f:Ok,r:jk,D:_k,C:kk,L:Mk,m:Ik,X:Lk,S:Rk,M:$k};function Ok(){var a=ui.f(),o=Qd();return a||o}function jk(a){var o=ft(a);o!==null&&o.tag===5&&o.type==="form"?DS(o):ui.r(a)}var fl=typeof document>"u"?null:document;function cC(a,o,c){var m=fl;if(m&&typeof o=="string"&&o){var v=Kt(o);v='link[rel="'+a+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),lC.has(v)||(lC.add(v),a={rel:a,crossOrigin:c,href:o},m.querySelector(v)===null&&(o=m.createElement("link"),Pn(o,"link",a),zt(o),m.head.appendChild(o)))}}function _k(a){ui.D(a),cC("dns-prefetch",a,null)}function kk(a,o){ui.C(a,o),cC("preconnect",a,o)}function Mk(a,o,c){ui.L(a,o,c);var m=fl;if(m&&a&&o){var v='link[rel="preload"][as="'+Kt(o)+'"]';o==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+Kt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+Kt(c.imageSizes)+'"]')):v+='[href="'+Kt(a)+'"]';var b=v;switch(o){case"style":b=pl(a);break;case"script":b=hl(a)}Yr.has(b)||(a=h({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),Yr.set(b,a),m.querySelector(v)!==null||o==="style"&&m.querySelector(Gc(b))||o==="script"&&m.querySelector(qc(b))||(o=m.createElement("link"),Pn(o,"link",a),zt(o),m.head.appendChild(o)))}}function Ik(a,o){ui.m(a,o);var c=fl;if(c&&a){var m=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Kt(m)+'"][href="'+Kt(a)+'"]',b=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=hl(a)}if(!Yr.has(b)&&(a=h({rel:"modulepreload",href:a},o),Yr.set(b,a),c.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(qc(b)))return}m=c.createElement("link"),Pn(m,"link",a),zt(m),c.head.appendChild(m)}}}function Rk(a,o,c){ui.S(a,o,c);var m=fl;if(m&&a){var v=Ir(m).hoistableStyles,b=pl(a);o=o||"default";var D=v.get(b);if(!D){var O={loading:0,preload:null};if(D=m.querySelector(Gc(b)))O.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":o},c),(c=Yr.get(b))&&lg(a,c);var H=D=m.createElement("link");zt(H),Pn(H,"link",a),H._p=new Promise(function(ee,ue){H.onload=ee,H.onerror=ue}),H.addEventListener("load",function(){O.loading|=1}),H.addEventListener("error",function(){O.loading|=2}),O.loading|=4,lf(D,o,m)}D={type:"stylesheet",instance:D,count:1,state:O},v.set(b,D)}}}function Lk(a,o){ui.X(a,o);var c=fl;if(c&&a){var m=Ir(c).hoistableScripts,v=hl(a),b=m.get(v);b||(b=c.querySelector(qc(v)),b||(a=h({src:a,async:!0},o),(o=Yr.get(v))&&cg(a,o),b=c.createElement("script"),zt(b),Pn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},m.set(v,b))}}function $k(a,o){ui.M(a,o);var c=fl;if(c&&a){var m=Ir(c).hoistableScripts,v=hl(a),b=m.get(v);b||(b=c.querySelector(qc(v)),b||(a=h({src:a,async:!0,type:"module"},o),(o=Yr.get(v))&&cg(a,o),b=c.createElement("script"),zt(b),Pn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},m.set(v,b))}}function uC(a,o,c,m){var v=(v=Ce.current)?of(v):null;if(!v)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=pl(c.href),c=Ir(v).hoistableStyles,m=c.get(o),m||(m={type:"style",instance:null,count:0,state:null},c.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=pl(c.href);var b=Ir(v).hoistableStyles,D=b.get(a);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,D),(b=v.querySelector(Gc(a)))&&!b._p&&(D.instance=b,D.state.loading=5),Yr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Yr.set(a,c),b||Bk(v,a,c,D.state))),o&&m===null)throw Error(r(528,""));return D}if(o&&m!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=hl(c),c=Ir(v).hoistableScripts,m=c.get(o),m||(m={type:"script",instance:null,count:0,state:null},c.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function pl(a){return'href="'+Kt(a)+'"'}function Gc(a){return'link[rel="stylesheet"]['+a+"]"}function dC(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function Bk(a,o,c,m){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=a.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Pn(o,"link",c),zt(o),a.head.appendChild(o))}function hl(a){return'[src="'+Kt(a)+'"]'}function qc(a){return"script[async]"+a}function fC(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var m=a.querySelector('style[data-href~="'+Kt(c.href)+'"]');if(m)return o.instance=m,zt(m),m;var v=h({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),zt(m),Pn(m,"style",v),lf(m,c.precedence,a),o.instance=m;case"stylesheet":v=pl(c.href);var b=a.querySelector(Gc(v));if(b)return o.state.loading|=4,o.instance=b,zt(b),b;m=dC(c),(v=Yr.get(v))&&lg(m,v),b=(a.ownerDocument||a).createElement("link"),zt(b);var D=b;return D._p=new Promise(function(O,H){D.onload=O,D.onerror=H}),Pn(b,"link",m),o.state.loading|=4,lf(b,c.precedence,a),o.instance=b;case"script":return b=hl(c.src),(v=a.querySelector(qc(b)))?(o.instance=v,zt(v),v):(m=c,(v=Yr.get(b))&&(m=h({},c),cg(m,v)),a=a.ownerDocument||a,v=a.createElement("script"),zt(v),Pn(v,"link",m),a.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,lf(m,c.precedence,a));return o.instance}function lf(a,o,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,b=v,D=0;D<m.length;D++){var O=m[D];if(O.dataset.precedence===o)b=O;else if(b!==v)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function lg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function cg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var cf=null;function pC(a,o,c){if(cf===null){var m=new Map,v=cf=new Map;v.set(c,m)}else v=cf,m=v.get(c),m||(m=new Map,v.set(c,m));if(m.has(a))return m;for(m.set(a,null),c=c.getElementsByTagName(a),v=0;v<c.length;v++){var b=c[v];if(!(b[Mi]||b[Ge]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var D=b.getAttribute(o)||"";D=a+D;var O=m.get(D);O?O.push(b):m.set(D,[b])}}return m}function hC(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function zk(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function mC(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Yc=null;function Uk(){}function Hk(a,o,c){if(Yc===null)throw Error(r(475));var m=Yc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var v=pl(c.href),b=a.querySelector(Gc(v));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=uf.bind(m),a.then(m,m)),o.state.loading|=4,o.instance=b,zt(b);return}b=a.ownerDocument||a,c=dC(c),(v=Yr.get(v))&&lg(c,v),b=b.createElement("link"),zt(b);var D=b;D._p=new Promise(function(O,H){D.onload=O,D.onerror=H}),Pn(b,"link",c),o.instance=b}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=uf.bind(m),a.addEventListener("load",o),a.addEventListener("error",o))}}function Gk(){if(Yc===null)throw Error(r(475));var a=Yc;return a.stylesheets&&a.count===0&&ug(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&ug(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function uf(){if(this.count--,this.count===0){if(this.stylesheets)ug(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var df=null;function ug(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,df=new Map,o.forEach(qk,a),df=null,uf.call(a))}function qk(a,o){if(!(o.state.loading&4)){var c=df.get(a);if(c)var m=c.get(null);else{c=new Map,df.set(a,c);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var D=v[b];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(c.set(D.dataset.precedence,D),m=D)}m&&c.set(null,m)}v=o.instance,D=v.getAttribute("data-precedence"),b=c.get(D)||m,b===m&&c.set(null,v),c.set(D,v),this.count++,m=uf.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),b?b.parentNode.insertBefore(v,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),o.state.loading|=4}}var Fc={$$typeof:T,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function Yk(a,o,c,m,v,b,D,O){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function gC(a,o,c,m,v,b,D,O,H,ee,ue,pe){return a=new Yk(a,o,c,D,O,H,ee,pe),o=1,b===!0&&(o|=24),b=vr(3,null,null,o),a.current=b,b.stateNode=a,o=Yh(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:m,isDehydrated:c,cache:o},Wh(b),a}function yC(a){return a?(a=Yo,a):Yo}function vC(a,o,c,m,v,b){v=yC(v),m.context===null?m.context=v:m.pendingContext=v,m=qi(o),m.payload={element:c},b=b===void 0?null:b,b!==null&&(m.callback=b),c=Yi(a,m,o),c!==null&&(Ar(c,a,o),Cc(c,a,o))}function xC(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function dg(a,o){xC(a,o),(a=a.alternate)&&xC(a,o)}function bC(a){if(a.tag===13){var o=qo(a,67108864);o!==null&&Ar(o,a,67108864),dg(a,67108864)}}var ff=!0;function Fk(a,o,c,m){var v=I.T;I.T=null;var b=G.p;try{G.p=2,fg(a,o,c,m)}finally{G.p=b,I.T=v}}function Vk(a,o,c,m){var v=I.T;I.T=null;var b=G.p;try{G.p=8,fg(a,o,c,m)}finally{G.p=b,I.T=v}}function fg(a,o,c,m){if(ff){var v=pg(m);if(v===null)Zm(a,o,m,pf,c),CC(a,m);else if(Wk(v,a,o,c,m))m.stopPropagation();else if(CC(a,m),o&4&&-1<Kk.indexOf(a)){for(;v!==null;){var b=ft(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var D=ia(b.pendingLanes);if(D!==0){var O=b;for(O.pendingLanes|=2,O.entangledLanes|=2;D;){var H=1<<31-jt(D);O.entanglements[1]|=H,D&=~H}Ma(b),(lt&6)===0&&(Wd=wt()+500,Bc(0))}}break;case 13:O=qo(b,2),O!==null&&Ar(O,b,2),Qd(),dg(b,2)}if(b=pg(m),b===null&&Zm(a,o,m,pf,c),b===v)break;v=b}v!==null&&m.stopPropagation()}else Zm(a,o,m,null,c)}}function pg(a){return a=Ro(a),hg(a)}var pf=null;function hg(a){if(pf=null,a=Ns(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return pf=a,null}function SC(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case Oo:return 2;case Oi:return 8;case Hn:case Gn:return 32;case Ea:return 268435456;default:return 32}default:return 32}}var mg=!1,as=null,is=null,ss=null,Vc=new Map,Kc=new Map,os=[],Kk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function CC(a,o){switch(a){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":Vc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kc.delete(o.pointerId)}}function Wc(a,o,c,m,v,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:c,eventSystemFlags:m,nativeEvent:b,targetContainers:[v]},o!==null&&(o=ft(o),o!==null&&bC(o)),a):(a.eventSystemFlags|=m,o=a.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),a)}function Wk(a,o,c,m,v){switch(o){case"focusin":return as=Wc(as,a,o,c,m,v),!0;case"dragenter":return is=Wc(is,a,o,c,m,v),!0;case"mouseover":return ss=Wc(ss,a,o,c,m,v),!0;case"pointerover":var b=v.pointerId;return Vc.set(b,Wc(Vc.get(b)||null,a,o,c,m,v)),!0;case"gotpointercapture":return b=v.pointerId,Kc.set(b,Wc(Kc.get(b)||null,a,o,c,m,v)),!0}return!1}function AC(a){var o=Ns(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,Pt(a.priority,function(){if(c.tag===13){var m=Cr();m=xe(m);var v=qo(c,m);v!==null&&Ar(v,c,m),dg(c,m)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function hf(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=pg(a.nativeEvent);if(c===null){c=a.nativeEvent;var m=new c.constructor(c.type,c);_s=m,c.target.dispatchEvent(m),_s=null}else return o=ft(c),o!==null&&bC(o),a.blockedOn=c,!1;o.shift()}return!0}function EC(a,o,c){hf(a)&&c.delete(o)}function Xk(){mg=!1,as!==null&&hf(as)&&(as=null),is!==null&&hf(is)&&(is=null),ss!==null&&hf(ss)&&(ss=null),Vc.forEach(EC),Kc.forEach(EC)}function mf(a,o){a.blockedOn===o&&(a.blockedOn=null,mg||(mg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xk)))}var gf=null;function wC(a){gf!==a&&(gf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){gf===a&&(gf=null);for(var o=0;o<a.length;o+=3){var c=a[o],m=a[o+1],v=a[o+2];if(typeof m!="function"){if(hg(m||c)===null)continue;break}var b=ft(c);b!==null&&(a.splice(o,3),o-=3,hm(b,{pending:!0,data:v,method:c.method,action:m},m,v))}}))}function Xc(a){function o(H){return mf(H,a)}as!==null&&mf(as,a),is!==null&&mf(is,a),ss!==null&&mf(ss,a),Vc.forEach(o),Kc.forEach(o);for(var c=0;c<os.length;c++){var m=os[c];m.blockedOn===a&&(m.blockedOn=null)}for(;0<os.length&&(c=os[0],c.blockedOn===null);)AC(c),c.blockedOn===null&&os.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var v=c[m],b=c[m+1],D=v[Fe]||null;if(typeof b=="function")D||wC(c);else if(D){var O=null;if(b&&b.hasAttribute("formAction")){if(v=b,D=b[Fe]||null)O=D.formAction;else if(hg(v)!==null)continue}else O=D.action;typeof O=="function"?c[m+1]=O:(c.splice(m,3),m-=3),wC(c)}}}function gg(a){this._internalRoot=a}yf.prototype.render=gg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,m=Cr();vC(c,m,a,o,null,null)},yf.prototype.unmount=gg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;vC(a.current,2,null,a,null,null),Qd(),o[Tt]=null}};function yf(a){this._internalRoot=a}yf.prototype.unstable_scheduleHydration=function(a){if(a){var o=nn();a={blockedOn:null,target:a,priority:o};for(var c=0;c<os.length&&o!==0&&o<os[c].priority;c++);os.splice(c,0,a),c===0&&AC(a)}};var PC=t.version;if(PC!=="19.1.1")throw Error(r(527,PC,"19.1.1"));G.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=p(o),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var Qk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vf.isDisabled&&vf.supportsFiber)try{aa=vf.inject(Qk),fn=vf}catch{}}return Jc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,m="",v=HS,b=GS,D=qS,O=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(D=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(O=o.unstable_transitionCallbacks)),o=gC(a,1,!1,null,null,c,m,v,b,D,O,null),a[Tt]=o.current,Jm(a),new gg(o)},Jc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var m=!1,v="",b=HS,D=GS,O=qS,H=null,ee=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(O=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(H=c.unstable_transitionCallbacks),c.formState!==void 0&&(ee=c.formState)),o=gC(a,1,!0,o,c??null,m,v,b,D,O,H,ee),o.context=yC(null),c=o.current,m=Cr(),m=xe(m),v=qi(m),v.callback=null,Yi(c,v,m),c=m,o.current.lanes=c,oe(o,c),Ma(o),a[Tt]=o.current,Jm(a),new yf(o)},Jc.version="19.1.1",Jc}var HC;function tI(){if(HC)return bg.exports;HC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),bg.exports=eI(),bg.exports}var nI=tI();const rI=Ca(nI),aI="modulepreload",iI=function(e){return"/"+e},GC={},Pr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let p=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=p(n.map(f=>{if(f=iI(f),f in GC)return;GC[f]=!0;const h=f.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":aI,h||(y.as="script"),y.crossOrigin="",y.href=f,u&&y.setAttribute("nonce",u),document.head.appendChild(y),h)return new Promise((x,S)=>{y.addEventListener("load",x),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})},Ze=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:6,image:"/img/Interceptor.png",abilities:[{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Jammer",class:0,limit:999,attack:0,hull:1,shields:0,speed:1,image:"/img/Jammer.png",selectable:!1,maxPerLane:1,abilities:[{name:"Jammer",description:"While this drone is in a lane, opponent card effects can only target this drone.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"JAMMER"}}],upgradeSlots:0}],Ot=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",visualEffect:{type:"NUKE_BLAST",duration:1200},targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",visualEffect:{type:"ENERGY_WAVE",duration:800},targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD028",baseCardId:"CARD028",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD029",baseCardId:"CARD029",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1},{id:"CARD030",baseCardId:"CARD030",name:"Deploy Jammers",maxInDeck:4,type:"Action",cost:3,image:"/cards/DeployJammers.png",description:"Create a Jammer drone token in each of your lanes. (Jammer: 0/1, Speed 1. Opponent card effects can only target Jammer drones.)",effect:{type:"CREATE_TOKENS",tokenName:"Jammer",locations:["lane1","lane2","lane3"],ignoresCPULimit:!0}}],ur=[{id:"BRIDGE_001",type:"Bridge",name:"Standard Command Bridge",key:"bridge",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},{id:"POWERCELL_001",type:"Power Cell",name:"Standard Power Cell",key:"powerCell",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},{id:"DRONECONTROL_001",type:"Drone Control Hub",name:"Standard Drone Control Hub",key:"droneControlHub",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}],pu={bridge:ur.find(e=>e.key==="bridge"),powerCell:ur.find(e=>e.key==="powerCell"),droneControlHub:ur.find(e=>e.key==="droneControlHub")},ys=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Ha=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=ys(l),p={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const h in l.middleLaneBonus)p.hasOwnProperty(h)&&(p[h]+=l.middleLaneBonus[h]);r[s]=p}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},hr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=Ze.find(y=>y.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,p=s.speed,f=s.shields,h=s.class;l.forEach(y=>{y.mod.stat==="attack"&&(u+=y.mod.value),y.mod.stat==="speed"&&(p+=y.mod.value),y.mod.stat==="shields"&&(f+=y.mod.value),y.mod.stat==="cost"&&(h+=y.mod.value)}),h=Math.max(0,h);let g={...e,attack:u,speed:p,maxShields:f,cost:h,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(y=>{y.stat==="attack"&&(g.attack+=y.value),y.stat==="speed"&&(g.speed+=y.value),y.stat==="cost"&&(g.cost=Math.max(0,g.cost+y.value))}),s.abilities?.forEach(y=>{if(y.type==="PASSIVE"){if(y.effect.type==="GRANT_KEYWORD"&&g.keywords.add(y.effect.keyword),y.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:x,mod:S}=y.effect;let C=!1;if(x.type==="SHIP_SECTION_HULL_DAMAGED"&&x.location==="SAME_LANE"){const A=parseInt(t.slice(-1))-1,P=(n.name==="Player 1"?i.player1:i.player2)[A];if(P){const T=n.shipSections[P],N=ys(T);(N==="damaged"||N==="critical")&&(C=!0)}}C&&S.stat==="attack"&&(g.attack+=S.value)}if(y.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:x,mod:S}=y.effect;let C=0;if(x.type==="OWN_DAMAGED_SECTIONS")for(const A in n.shipSections){const w=n.shipSections[A],P=ys(w);(P==="damaged"||P==="critical")&&C++}C>0&&(S.stat==="attack"&&(g.attack+=S.value*C),S.stat==="speed"&&(g.speed+=S.value*C))}y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(g.potentialShipDamage=(g.potentialShipDamage||0)+y.effect.value),y.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&y.effect.mods.forEach(x=>{x.stat==="attack"&&(g.attack+=x.value),x.stat==="speed"&&(g.speed+=x.value)})}}),n.dronesOnBoard[t]?.forEach(y=>{if(y.id===e.id)return;Ze.find(S=>S.name===y.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:C,value:A}=S.effect;C==="shields"?g.maxShields+=A:C==="attack"?g.attack+=A:C==="speed"&&(g.speed+=A)}})}),l.forEach(y=>{y.grantedAbilities&&y.grantedAbilities.forEach(x=>{if(x.type==="PASSIVE"&&(x.effect.type==="GRANT_KEYWORD"&&g.keywords.add(x.effect.keyword),x.effect.type==="MODIFY_STAT")){const{stat:S,value:C}=x.effect;S==="attack"&&(g.attack+=C),S==="speed"&&(g.speed+=C),S==="shields"&&(g.maxShields+=C)}})}),g},S2=(e,t)=>({...e,instanceId:t}),vl=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],C2=["Scout Drone","Standard Fighter","Heavy Fighter","Guardian Drone","Bomber","Repair Drone","Interceptor","Aegis Drone","Kamikaze Drone","Swarm Drone"],A2=e=>{const t=[];let n=0;return e.forEach(r=>{const i=Ot.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(S2(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},pv=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},sI=(e,t)=>{const n=Ha({shipSections:pu},[]).totals;return{name:e,shipSections:pu,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:A2(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},Sl=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},E2=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},Rl=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=hr(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},fr=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},xu=(e,t,n)=>e.dronesOnBoard[n]?e.dronesOnBoard[n].filter(r=>r.name===t).length:0,hu=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],p=typeof n.cost=="number",f=!p,{type:h,affinity:g,location:y,custom:x}=n.targeting;let S=null;if(f&&Object.values(s.dronesOnBoard).flat().some(_=>_.id===t.id)&&(S=fr(t.id,s),!S))return[];const C=N=>N.abilities?.some(_=>_.effect?.type==="GRANT_KEYWORD"&&_.effect?.keyword==="JAMMER"),A=(N,_)=>(N.dronesOnBoard[_]||[]).some(C),w=(N,_)=>(N.dronesOnBoard[_]||[]).filter(C),P=(N,_)=>{const j=e!==_&&p;Object.entries(N.dronesOnBoard).forEach(([k,z])=>{let F=!1;y==="ANY_LANE"&&(F=!0),f&&y==="SAME_LANE"&&(F=k===S),F&&(j&&A(N,k)?w(N,k).forEach(R=>{let U=!0;if(x?.includes("DAMAGED_HULL")){const W=Ze.find(Z=>Z.name===R.name);(!W||R.hull>=W.hull)&&(U=!1)}x?.includes("EXHAUSTED")&&(R.isExhausted||(U=!1)),U&&u.push({...R,lane:k,owner:_})}):z.forEach(M=>{let R=!0;if(x?.includes("DAMAGED_HULL")){const U=Ze.find(W=>W.name===M.name);(!U||M.hull>=U.hull)&&(R=!1)}x?.includes("EXHAUSTED")&&(M.isExhausted||(R=!1)),R&&u.push({...M,lane:k,owner:_})}))})},T=(N,_)=>{Object.keys(N.shipSections).forEach(j=>{u.push({...N.shipSections[j],id:j,name:j,owner:_})})};if(h==="DRONE")(g==="FRIENDLY"||g==="ANY")&&P(s,e),(g==="ENEMY"||g==="ANY")&&P(l,e==="player1"?"player2":"player1");else if(h==="SHIP_SECTION")(g==="FRIENDLY"||g==="ANY")&&T(s,e),(g==="ENEMY"||g==="ANY")&&T(l,e==="player1"?"player2":"player1");else if(h==="LANE")["lane1","lane2","lane3"].forEach(N=>{if((g==="FRIENDLY"||g==="ANY")&&u.push({id:N,owner:e}),g==="ENEMY"||g==="ANY"){const _=e==="player1"?"player2":"player1";u.push({id:N,owner:_})}});else if(h==="DRONE_CARD"){const N=e==="player1"?r:i;N.activeDronePool.forEach(_=>{const j=Ze.find(M=>M.name===_.name),k=N.appliedUpgrades[_.name]||[],z=k.filter(M=>M.id===n.id).length,F=n.maxApplications===void 0?1:n.maxApplications;j&&k.length<j.upgradeSlots&&z<F&&u.push({..._,id:_.name,owner:e})})}else if(h==="APPLIED_UPGRADE"){const N=g==="ENEMY"?l:s,_=g==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(N.dronesOnBoard).flat().forEach(j=>{(N.appliedUpgrades[j.name]||[]).length>0&&u.push({...j,owner:_})})}return u},w2=(e,t,n,r,i)=>{const s=Ze.find(f=>f.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const p=s.abilities.filter(f=>f.type==="TRIGGERED"&&f.trigger==="ON_MOVE");if(p.length>0){const f=l.dronesOnBoard[r].findIndex(h=>h.id===t.id);if(f!==-1){const h=l.dronesOnBoard[r][f];p.forEach(g=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${g.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),h.statMods||(h.statMods=[]),g.effects?.forEach(y=>{y.type==="PERMANENT_STAT_MOD"&&(u=!0,h.statMods.push(y.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${y.mod.value} ${y.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},P2=(e,t,n)=>{const r=Ze.find(f=>f.name===t.name);if(!r?.abilities)return{newState:e,effects:[],animationEvents:[]};let i=JSON.parse(JSON.stringify(e));const s=[],l=[];let u=!1;return r.abilities.filter(f=>f.effect?.type==="AFTER_ATTACK").forEach(f=>{const{subEffect:h}=f.effect;if(h.type==="DESTROY_SELF")for(const g in i.dronesOnBoard){const y=i.dronesOnBoard[g].findIndex(x=>x.id===t.id);if(y!==-1){u=!0;const x=i.dronesOnBoard[g][y];s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${f.name}', destroying itself.`}}),l.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:n,targetLane:g,targetType:"drone",timestamp:Date.now()}),i.dronesOnBoard[g]=i.dronesOnBoard[g].filter(S=>S.id!==t.id),Object.assign(i,Sl(i,x));break}}else if(h.type==="PERMANENT_STAT_MOD")for(const g in i.dronesOnBoard){const y=i.dronesOnBoard[g].findIndex(x=>x.id===t.id);if(y!==-1){u=!0,i.dronesOnBoard[g][y].statMods||(i.dronesOnBoard[g][y].statMods=[]),s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${f.name}', gaining a permanent +${h.mod.value} ${h.mod.stat}.`}}),i.dronesOnBoard[g][y].statMods.push(h.mod);break}}}),{newState:u?i:e,effects:s,animationEvents:l}},o0=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>ys(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},T2=(e,t,n,r,i,s=null)=>{if(K("DEPLOYMENT"," validateDeployment: Entry params:",{droneName:t?.name,fullDroneCollectionLength:Ze.length}),r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};K("DEPLOYMENT"," validateDeployment: About to find baseDroneInfo for:",t?.name);const l=Ze.find(y=>y.name===t.name),u=e.appliedUpgrades[t.name]||[];let p=l.limit;if(u.forEach(y=>{y.mod.stat==="limit"&&(p+=y.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=p)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${p}.`};if(l.maxPerLane&&s&&xu(e,t.name,s)>=l.maxPerLane)return{isValid:!1,reason:"Max Per Lane Reached",message:`Only ${l.maxPerLane} ${t.name}${l.maxPerLane>1?"s":""} allowed per lane.`};const f=t.class;let h=0,g=0;return n===1?(g=Math.min(e.initialDeploymentBudget,f),h=f-g):(g=Math.min(e.deploymentBudget,f),h=f-g),e.energy<h?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${h} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:g,energyCost:h}},D2=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},hv=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=pv(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},oI=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},lI=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")D2(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=hv(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},cI=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=hv(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},uI=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Ha(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(p=>{l[p]={...n.shipSections[p],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},dI=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,p=Ha(s,l).totals.shieldsPerTurn,f=JSON.parse(JSON.stringify(s.shipSections)),h=Object.keys(f);let g=p,y=0,x=0;for(;g>0&&x<100;){const w=h[y%h.length],P=f[w],T=pv(w,s,l);P.allocatedShields<T&&(P.allocatedShields++,g--),y++,x++}const S={...s,shipSections:f},A={success:!0,newPhase:"deployment",firstPlayer:Mp(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(A.player1State=i,A.player2State=S):(A.player1State=S,A.player2State=i),A},fI=(e,t,n,r,i,s,l)=>{const{effect:u,cost:p}=e,f=r.player1;let h="",g="Ability effect applied.";e.targeting?.type==="LANE"?h=`Lane ${n.id.slice(-1)}`:n&&(h=n.name),u.type==="HEAL"?(g=`Healed ${u.value} hull on targets in ${h}.`,u.scope!=="LANE"&&(g=`Healed ${u.value} hull on ${h}.`)):u.type==="DAMAGE"&&(g=`Dealt ${u.value} damage to ${h}.`),s&&s({player:f.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:h,outcome:g});const y={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.energy&&(y.player1.energy-=p.energy),p.exhausts)for(const C in y.player1.dronesOnBoard){const A=y.player1.dronesOnBoard[C].findIndex(w=>w.id===t.id);if(A!==-1){y.player1.dronesOnBoard[C][A].isExhausted=!0;break}}const x=$2(u,t,n,y,i,{resolveAttackCallback:l});y.player1=x.newPlayerStates.player1,y.player2=x.newPlayerStates.player2;const S=x.animationEvents||[];return{newPlayerStates:y,shouldEndTurn:!u.goAgain,animationEvents:S}},pI=(e,t,n,r,i,s,l)=>{const{logCallback:u,resolveAttackCallback:p}=s||{},{cost:f,effect:h}=e,g=r[l];u&&u({player:g.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const y=[{type:"SHIP_ABILITY_REVEAL",abilityName:e.name,sectionName:t,actingPlayerId:l}],x={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(x[l].energy-=f.energy,h.type==="REALLOCATE_SHIELDS")return{newPlayerStates:x,shouldEndTurn:!1,requiresShieldReallocation:!0,animationEvents:y};{const S=B2(h,t,n,x,i,{resolveAttackCallback:p},l);return x.player1=S.newPlayerStates.player1,x.player2=S.newPlayerStates.player2,y.push(...S.animationEvents||[]),S.needsDiscardSelection?{newPlayerStates:x,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:l,count:S.needsDiscardSelection,fromAbility:!0,abilityName:e.name,sectionName:t,actingPlayerId:l},animationEvents:[]}:{newPlayerStates:x,shouldEndTurn:!0,animationEvents:y}}},N2=(e,t,n,r,i,s,l,u)=>{const p=T2(r,e,n,Object.values(r.dronesOnBoard).flat().length,Ha(r,s.player1||s),t);if(!p.isValid)return{success:!1,error:p.reason,message:p.message,newPlayerState:r};const{budgetCost:f,energyCost:h}=p;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const g=JSON.parse(JSON.stringify(r)),y={...g.dronesOnBoard,[t]:[...g.dronesOnBoard[t],{...e,id:0}]},x={...g,dronesOnBoard:y},S=hr(e,t,x,i,s),C={...e,id:Date.now(),statMods:[],currentShields:S.maxShields,currentMaxShields:S.maxShields,hull:e.hull,isExhausted:!1};g.dronesOnBoard[t].push(C),g.deployedDroneCounts={...g.deployedDroneCounts,[e.name]:(g.deployedDroneCounts[e.name]||0)+1},n===1?g.initialDeploymentBudget-=f:g.deploymentBudget-=f,g.energy-=h,g.dronesOnBoard=Rl(g,i,s);const A=[{type:"TELEPORT_IN",targetId:C.id,laneId:t,playerId:u,timestamp:Date.now()}];return{success:!0,newPlayerState:g,deployedDrone:C,animationEvents:A}},hI=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return o0(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):o0(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},mI=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=fr(e.id,t);if(!i)return[];const s=hr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(p=>{const f=hr(p,i,n,t,r);return!p.isExhausted&&(f.speed>s.speed||f.keywords.has("ALWAYS_INTERCEPTS"))}).map(p=>p.id)},gI=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,p=e.class;let f=0;n===1?f=Math.min(r.initialDeploymentBudget,p):f=Math.min(r.deploymentBudget,p);const h=p-f;if(r.energy<h)return{success:!1,error:"Insufficient energy for deployment"};const g={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let y={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],g]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-f:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-f:r.deploymentBudget,energy:r.energy-h};return y.dronesOnBoard=Rl(y,i,s),{success:!0,newPlayerState:y,deployedDrone:g,costs:{energy:h,budget:f}}},yI=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l,attackingPlayer:u}=e,f=t[u==="player1"?"player2":"player1"],h=t[u],g=hr(r,l,h,f,n),y=f.dronesOnBoard[l].filter(x=>{const S=hr(x,l,f,h,n);return!x.isExhausted&&(S.speed>g.speed||S.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||x.id!==i.id)});return{hasInterceptors:y.length>0,interceptors:y,attackDetails:e}},mv=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},vI=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},xI=(e,t)=>{const n=mv(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},bI=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=Mp(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},SI=(e,t,n,r)=>{const i=l0(e.player1,t,n,e.player2,e.placedSections),s=l0(e.player2,t,r,e.player1,e.opponentPlacedSections),l=c0(i,n.totals.handLimit),u=c0(s,r.totals.handLimit),p=Mp(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),f={...e,turn:t,turnPhase:"deployment",currentPlayer:p,firstPlayerOfRound:p,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},h=[{type:"ROUND_START",turn:t,firstPlayer:p},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:f,uiEffects:h}},O2=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=hr(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},l0=(e,t,n,r,i)=>({...O2(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),c0=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;const s=n.pop();r.push(s),K("CARDS",` Card drawn to hand: ${s.name}`,{id:s.id,instanceId:s.instanceId,hasInstanceId:s.instanceId!==void 0,playerName:e.name})}return{...e,deck:n,hand:r,discardPile:i}},CI=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:p,opponentPlacedSections:f}=e,{addLogEntry:h,setPlayer2:g,setPendingAttack:y,endTurn:x,endDeploymentPhase:S,endActionPhase:C,setPassInfo:A}=n;let w;return l==="deployment"&&!u.player2Passed?w=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:f,placedSections:p,getShipStatus:ys,calculateEffectiveShipStats:Ha,calculateEffectiveStats:hr,addLogEntry:h}):l==="action"&&!u.player2Passed&&(w=t.handleOpponentAction({player1:r,player2:i,placedSections:p,opponentPlacedSections:f,getShipStatus:ys,getLaneOfDrone:fr,getValidTargets:hu,calculateEffectiveStats:hr,addLogEntry:h})),w||null},AI=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:p}=t,{addLogEntry:f,setPlayer2:h,setPendingAttack:g,endTurn:y,endDeploymentPhase:x,endActionPhase:S,setPassInfo:C,resolveCardPlay:A}=n;if(e.type==="pass"){const w=!t.passInfo.player1Passed,P={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(w?"player2":null)};return C(P),P.player1Passed?l==="deployment"?x():l==="action"&&S():y("player2"),{newPassInfo:P}}else if(e.type==="deploy"){const{droneToDeploy:w,targetLane:P,logContext:T}=e.payload;f({player:i.name,actionType:"DEPLOY",source:w.name,target:P,outcome:`Deployed to ${P}.`},"aiDeploymentDeploy",T);const N=N2(w,P,i,r,s,{player1:u,player2:p});return N.success&&(h(N.newPlayerState),y("player2")),{deployedDrone:N.deployedDrone}}else if(e.type==="action"){const w=e.payload,{logContext:P}=e;switch(w.type){case"play_card":A(w.card,w.target,"player2",P);break;case"attack":g({attacker:w.attacker,target:w.target,targetType:w.targetType,lane:w.attacker.lane,attackingPlayer:"player2",aiContext:P});break;case"move":{const{drone:T,fromLane:N,toLane:_}=w;f({player:i.name,actionType:"MOVE",source:T.name,target:_,outcome:`Moved from ${N} to ${_}.`},"aiActionMove",P);let j=JSON.parse(JSON.stringify(i));j.dronesOnBoard[N]=j.dronesOnBoard[N].filter(F=>F.id!==T.id);const k={...T,isExhausted:!0};j.dronesOnBoard[_].push(k);const{newState:z}=w2(j,k,N,_,f);z.dronesOnBoard=Rl(z,r,{player1:u,player2:p}),h(z),y("player2");break}default:y("player2");break}return{action:w}}return null},j2=(e,t,n,r,i,s,l,u)=>{const{cost:p,effect:f}=e,{logCallback:h,applyOnMoveEffectsCallback:g,updateAurasCallback:y}=u,x={};t.forEach(P=>{x[P.name]=(x[P.name]||0)+1});for(const[P,T]of Object.entries(x)){const N=Ze.find(_=>_.name===P);if(N&&N.maxPerLane){const _=xu(i,P,r);if(xu(i,P,n),(n===r?_:_+T)>N.maxPerLane)return{newPlayerState:i,shouldEndTurn:!1,error:`Only ${N.maxPerLane} ${P}${N.maxPerLane>1?"s":""} allowed per lane. Cannot move ${T} to ${r}.`,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}}}let S=JSON.parse(JSON.stringify(i));S.energy-=p,S.hand=S.hand.filter(P=>P.instanceId!==e.instanceId),S.discardPile.push(e);const C=new Set(t.map(P=>P.id));S.dronesOnBoard[n]=S.dronesOnBoard[n].filter(P=>!C.has(P.id));const A=t.map(P=>({...P,isExhausted:P.isExhausted||!f.properties?.includes("DO_NOT_EXHAUST")}));S.dronesOnBoard[r].push(...A),h({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(P=>P.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let w=S;return A.forEach(P=>{const{newState:T}=g(w,P,n,r,h);w=T}),w.dronesOnBoard=y(w,s,l),{newPlayerState:w,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},_2=(e,t,n,r,i,s,l,u)=>{const{cost:p,effect:f}=e,{logCallback:h,applyOnMoveEffectsCallback:g,updateAurasCallback:y}=u,x=Ze.find(w=>w.name===t.name);if(x&&x.maxPerLane){const w=xu(i,t.name,r);if((n===r?w-1:w)>=x.maxPerLane)return{newPlayerState:i,shouldEndTurn:!1,error:`Only ${x.maxPerLane} ${t.name}${x.maxPerLane>1?"s":""} allowed per lane.`,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}}let S=JSON.parse(JSON.stringify(i));S.energy-=p,S.hand=S.hand.filter(w=>w.instanceId!==e.instanceId),S.discardPile.push(e),S.dronesOnBoard[n]=S.dronesOnBoard[n].filter(w=>w.id!==t.id);const C={...t,isExhausted:f.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};S.dronesOnBoard[r].push(C),h({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=g(S,C,n,r,h);return A.dronesOnBoard=y(A,s,l),{newPlayerState:A,shouldEndTurn:!e.effect.goAgain,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},k2=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},M2=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=ys(i);(s==="damaged"||s==="critical")&&n++}return n},EI=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:p,resolveAttackCallback:f}=s,h=t?t.name||t.id:"N/A";let g="Card effect applied.";const y=e.effect;if(y.type==="DRAW"&&(g=`Drew ${y.value} card(s).`),y.type==="GAIN_ENERGY"&&(g=`Gained ${y.value} energy.`),y.type==="HEAL_HULL"&&(g=`Healed ${y.value} hull on ${h}.`),y.type==="HEAL_SHIELDS"&&(g=`Healed ${y.value} shields on ${h}.`),y.type==="READY_DRONE"&&(g=`Readied ${h}.`),y.type==="DAMAGE"&&(y.scope==="FILTERED"?g=`Dealt ${y.value} damage to filtered targets in ${h}.`:g=`Dealt ${y.value} damage to ${h}.`),y.type==="MODIFY_STAT"){const w=y.mod,P=w.type==="temporary"?" until the end of the turn":" permanently";g=`Gave ${h} a ${w.value>0?"+":""}${w.value} ${w.stat} bonus${P}.`}if(y.type==="REPEATING_EFFECT"){const w=r[n],P=M2(y.condition,w);g=`Drew ${P} card(s) and gained ${P} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:h,outcome:g});let S=n==="player1"&&(e.effect.type==="SEARCH_AND_DRAW"||e.effect.type==="SINGLE_MOVE"||e.effect.type==="MULTI_MOVE")?r:k2(e,n,r);const C=wI(e.effect,t,n,S,i,s,e),A=[];if(C.needsCardSelection||A.push({type:"CARD_REVEAL",cardId:e.id,cardName:e.name,cardData:e,actingPlayerId:n,timestamp:Date.now()}),e.visualEffect&&t){let w=null,P=null,T=null;if(t.id&&(t.id==="lane1"||t.id==="lane2"||t.id==="lane3")){const N=e.targeting?.affinity||"ANY";N==="ENEMY"?(w=n==="player1"?"player2":"player1",P=t.id,T="lane"):N==="ANY"&&(w="center",P=t.id,T="lane"),w&&T&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:w,targetLane:P,targetType:T,duration:e.visualEffect.duration||800,timestamp:Date.now()})}else{for(const N of["player1","player2"]){for(const _ in S[N].dronesOnBoard)if(S[N].dronesOnBoard[_].some(j=>j.id===t.id)){w=N,P=_,T="drone";break}if(w)break}if(!w){for(const N of["player1","player2"])if(S[N].shipSections[t.name]||S[N].shipSections[t.id]){w=N,T="section";break}}w&&T&&A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:w,targetLane:P,targetType:T,duration:e.visualEffect.duration||800,timestamp:Date.now()})}}if(C.animationEvents&&A.push(...C.animationEvents),!C.needsCardSelection){const w=I2(e,n,C.newPlayerStates);return{newPlayerStates:w.newPlayerStates,shouldEndTurn:w.shouldEndTurn,additionalEffects:C.additionalEffects||[],animationEvents:A,needsCardSelection:!1}}return{newPlayerStates:r,shouldEndTurn:!1,additionalEffects:C.additionalEffects||[],animationEvents:A,needsCardSelection:C.needsCardSelection}},I2=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},wI=(e,t,n,r,i,s,l=null)=>e.effects?PI(e,t,n,r,i,s,l):R2(e,t,n,r,i,s,l),PI=(e,t,n,r,i,s,l=null)=>{let u=r,p=[];if(e.type==="REPEATING_EFFECT"){const f=M2(e.condition,u[n]);for(let h=0;h<f;h++)for(const g of e.effects){const y=R2(g,t,n,u,i,s,l);u=y.newPlayerStates,y.additionalEffects&&p.push(...y.additionalEffects)}}return{newPlayerStates:u,additionalEffects:p}},R2=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return yv(e,null,t,n,r);case"SEARCH_AND_DRAW":return L2(e,null,t,n,r);case"GAIN_ENERGY":return TI(e,n,r,i);case"READY_DRONE":return DI(e,t,n,r);case"HEAL_HULL":return gv(e,null,t,n,r,i);case"HEAL_SHIELDS":return NI(e,t,n,r,s,i);case"DAMAGE":return kp(e,null,t,n,r,i,s,l);case"DESTROY":return jI(e,t,n,r);case"MODIFY_STAT":return _I(e,t,n,r);case"MODIFY_DRONE_BASE":return kI(e,t,n,r);case"DESTROY_UPGRADE":return MI(e,t,n,r);case"SINGLE_MOVE":case"MULTI_MOVE":return $I(e,t,n,r,i,s,l);case"CREATE_TOKENS":return BI(e,t,n,r,i,s);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},TI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,p=Ha(l,u).totals,f=Math.min(p.maxEnergy,l.energy+e.value);return l.energy=f,{newPlayerStates:s,additionalEffects:[]}},DI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(f=>f.id===t.id);if(p!==-1){l.dronesOnBoard[u][p].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},NI=(e,t,n,r,i,s)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=[];if(t.id&&t.id.startsWith("lane")){const p=t.id,f=t.owner||n,h=l[f],y=l[f==="player1"?"player2":"player1"],x=s?.[f]||[],S=h.dronesOnBoard[p]||[];K("COMBAT",`[HEAL_SHIELDS] Healing all drones in ${f} ${p} (${S.length} drones)`),S.forEach(C=>{const w=hr(C,p,h,y,x).maxShields,P=C.currentShields||0;P<w&&(C.currentShields=Math.min(w,P+e.value)),K("COMBAT",`[HEAL_SHIELDS] ${C.name}: ${P}  ${C.currentShields} (max: ${w})`),u.push({type:"HEAL_EFFECT",targetId:C.id,targetPlayer:f,targetLane:p,targetType:"drone",healAmount:e.value,config:{},onComplete:null})})}else{const p=l[t.owner||n],f=t.owner||n,g=l[f==="player1"?"player2":"player1"],y=s?.[f]||[];for(const x in p.dronesOnBoard){const S=p.dronesOnBoard[x].findIndex(C=>C.id===t.id);if(S!==-1){const C=p.dronesOnBoard[x][S],w=hr(C,x,p,g,y).maxShields,P=C.currentShields||0;P<w&&(C.currentShields=Math.min(w,P+e.value),K("COMBAT",`[HEAL_SHIELDS] ${C.name} in ${x}: ${P}  ${C.currentShields} (max: ${w})`)),u.push({type:"HEAL_EFFECT",targetId:t.id,targetPlayer:f,targetLane:x,targetType:"drone",healAmount:e.value,config:{},onComplete:null});break}}}return{newPlayerStates:l,additionalEffects:[],animationEvents:u}},OI=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,f=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,g=r[f].dronesOnBoard[u]||[];K("COMBAT",`[DEBUG] Drones in ${f} ${u}:`,g.map(T=>`${T.name}(${T.id}) [${T.hull}hp, ${T.speed}spd]`));const{stat:y,comparison:x,value:S}=e.filter,C={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},w=C[f].dronesOnBoard[u]||[];for(let T=w.length-1;T>=0;T--){const N=w[T];let _=!1;if(x==="GTE"&&N[y]>=S&&(_=!0),x==="LTE"&&N[y]<=S&&(_=!0),K("COMBAT",`[DEBUG] ${N.name} ${y}=${N[y]} ${x} ${S} = ${_}`),_){K("COMBAT",`[DEBUG] Applying ${e.value} damage to ${N.name}`);const j=N.currentShields||0;let k=e.value;const z=Math.min(k,j);N.currentShields=(N.currentShields||0)-z,k-=z,k>0&&(N.hull-=k),N.hull<=0&&(K("COMBAT",`[DEBUG] ${N.name} destroyed`),w.splice(T,1))}}const P=[];for(const T of g){const N=w.find(j=>j.id===T.id);let _=!1;if(x==="GTE"&&T[y]>=S&&(_=!0),x==="LTE"&&T[y]<=S&&(_=!0),_){const j=T.currentShields||0,k=Math.min(e.value,j),z=e.value-k;k>0&&P.push({type:"SHIELD_DAMAGE",targetId:T.id,targetPlayer:f,targetLane:u,targetType:"drone",amount:k,timestamp:Date.now()}),N?z>0&&P.push({type:"HULL_DAMAGE",targetId:T.id,targetPlayer:f,targetLane:u,targetType:"drone",amount:z,timestamp:Date.now()}):P.push({type:"DRONE_DESTROYED",targetId:T.id,targetPlayer:f,targetLane:u,targetType:"drone",timestamp:Date.now()})}}return{newPlayerStates:C,additionalEffects:[],animationEvents:P}}else{const u=r[t.owner],p=fr(t.id,u);if(p){K("COMBAT",`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const f={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},g=f[t.owner].dronesOnBoard[p]||[],y=g.find(x=>x.id===t.id);if(y){let x=e.value,S=0,C=x;if(e.damageType!=="PIERCING"&&(S=Math.min(x,y.currentShields),C-=S,y.currentShields-=S),y.hull-=C,K("COMBAT",`[DEBUG] Applied ${C} hull damage to ${y.name} (${y.hull} hull remaining)`),y.hull<=0){K("COMBAT",`[DEBUG] ${y.name} destroyed`);const w=g.findIndex(P=>P.id===t.id);w>=0&&g.splice(w,1)}const A=[];return S>0&&A.push({type:"SHIELD_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:S,timestamp:Date.now()}),y.hull<=0?A.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",timestamp:Date.now()}):C>0&&A.push({type:"HULL_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:C,timestamp:Date.now()}),{newPlayerStates:f,additionalEffects:[],animationEvents:A}}return{newPlayerStates:f,additionalEffects:[],animationEvents:[]}}}return{newPlayerStates:r,additionalEffects:[],animationEvents:[]}},jI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=n==="player1"?"player2":"player1",u=[];if(e.scope==="LANE"&&t.id){const p=t.id;(s[l].dronesOnBoard[p]||[]).forEach(g=>{u.push({type:"DRONE_DESTROYED",targetId:g.id,targetPlayer:l,targetLane:p,targetType:"drone",timestamp:Date.now()});const y=Sl(s[l],g);s[l].deployedDroneCounts={...s[l].deployedDroneCounts||{},...y.deployedDroneCounts}}),s[l].dronesOnBoard[p]=[],(s[n].dronesOnBoard[p]||[]).forEach(g=>{u.push({type:"DRONE_DESTROYED",targetId:g.id,targetPlayer:n,targetLane:p,targetType:"drone",timestamp:Date.now()});const y=Sl(s[n],g);s[n].deployedDroneCounts={...s[n].deployedDroneCounts||{},...y.deployedDroneCounts}}),s[n].dronesOnBoard[p]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const p=s[l],f=fr(t.id,p);if(f){const h=p.dronesOnBoard[f].find(g=>g.id===t.id);if(h){u.push({type:"DRONE_DESTROYED",targetId:h.id,targetPlayer:l,targetLane:f,targetType:"drone",timestamp:Date.now()});const g=Sl(p,h);p.deployedDroneCounts={...p.deployedDroneCounts||{},...g.deployedDroneCounts},p.dronesOnBoard[f]=p.dronesOnBoard[f].filter(y=>y.id!==t.id)}}}return{newPlayerStates:s,additionalEffects:[],animationEvents:u}},_I=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&typeof t.id=="string"&&t.id.startsWith("lane")){const p=t.id;l.dronesOnBoard[p]&&l.dronesOnBoard[p].forEach(f=>{f.statMods||(f.statMods=[]),f.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const p in l.dronesOnBoard){const f=l.dronesOnBoard[p].findIndex(h=>h.id===t.id);if(f!==-1){const h=l.dronesOnBoard[p][f];h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},kI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,p=l.appliedUpgrades[u]||[],f={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(f.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...p,f]},{newPlayerStates:s,additionalEffects:[]}},MI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:p,instanceId:f}=t;if(u.appliedUpgrades[p]){const h=u.appliedUpgrades[p].filter(g=>g.instanceId!==f);h.length>0?u.appliedUpgrades[p]=h:delete u.appliedUpgrades[p]}return{newPlayerStates:s,additionalEffects:[]}},kp=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:p}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return OI(e,n,r,i,l,u?.targeting);const f=n.owner==="player1"?i.player1:i.player2,h=fr(n.id,f);if(h&&p){const g={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:h,damageType:e.damageType},y=U2(g,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:y.newPlayerStates,additionalEffects:y.afterAttackEffects||[],animationEvents:y.animationEvents||[]}}return{newPlayerStates:i,additionalEffects:[],animationEvents:[]}},gv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=[],f=r||"player1";if(e.scope==="LANE"){const h=n.id;u[f].dronesOnBoard[h]&&u[f].dronesOnBoard[h].forEach(g=>{const y=Ze.find(x=>x.name===g.name);y&&(g.hull<y.hull&&(g.hull=Math.min(y.hull,g.hull+e.value)),p.push({type:"HEAL_EFFECT",targetId:g.id,targetPlayer:f,targetLane:h,targetType:"drone",healAmount:e.value,config:{},onComplete:null}))})}else{const h=Ze.find(g=>g.name===n.name);if(h){const g=fr(n.id,u[f]);if(g){const y=u[f].dronesOnBoard[g].findIndex(x=>x.id===n.id);if(y!==-1){const x=u[f].dronesOnBoard[g][y];x.hull<h.hull&&(x.hull=Math.min(h.hull,x.hull+e.value)),p.push({type:"HEAL_EFFECT",targetId:n.id,targetPlayer:f,targetLane:g,targetType:"drone",healAmount:e.value,config:{},onComplete:null})}}}else if(n.name&&u[f].shipSections[n.name]){const g=u[f].shipSections[n.name],x=(f==="player1"?s.player1:s.player2).find(S=>S.name===n.name);x&&(g.hull<x.maxHull&&(g.hull=Math.min(x.maxHull,g.hull+e.value)),p.push({type:"HEAL_EFFECT",targetId:n.name,targetPlayer:f,targetLane:null,targetType:"section",healAmount:e.value,config:{},onComplete:null}))}}return{newPlayerStates:u,additionalEffects:[],animationEvents:p}},yv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",f=u[p];let h=[...f.deck],g=[...f.hand],y=[...f.discardPile];const x=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let C=0;C<x;C++){if(h.length===0)if(y.length>0)h=[...y].sort(()=>.5-Math.random()),y=[];else break;h.length>0&&g.push(h.pop())}u[p]={...f,deck:h,hand:g,discardPile:y};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},II=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),L2=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",f=u[p];let h=[...f.deck],g=[...f.discardPile],y,x;if(e.filter)h.length===0&&g.length>0&&(h=[...g.sort(()=>.5-Math.random())],g=[]),y=h.filter(C=>II(C,e.filter)).slice(0,e.searchCount),x=h.filter(C=>!y.includes(C));else{const S=e.searchCount;h.length<S&&g.length>0&&(h=[...h,...g.sort(()=>.5-Math.random())],g=[]),y=h.slice(-e.searchCount).reverse(),x=h.slice(0,-e.searchCount)}if(p==="player2"){const S=RI(y,e.drawCount,u),C=y.filter(P=>!S.includes(P)),A=[...f.hand,...S];let w=[...x,...C];return e.shuffleAfter&&(w=w.sort(()=>.5-Math.random())),u[p]={...f,deck:w,hand:A,discardPile:g},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:y,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:x,discardPile:g,filter:e.filter}}},RI=(e,t,n,r)=>e.map(s=>({card:s,score:LI(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),LI=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},$I=(e,t,n,r,i,s,l)=>{if(n==="player1")return{newPlayerStates:r,additionalEffects:[],needsCardSelection:{type:e.type==="SINGLE_MOVE"?"single_move":"multi_move",card:l,effect:e,maxDrones:e.type==="MULTI_MOVE"?e.count:1,doNotExhaust:e.properties?.includes("DO_NOT_EXHAUST")||!1,phase:e.type==="SINGLE_MOVE"?"select_drone":"select_source_lane"}};const u=n==="player1"?"player2":"player1",p=r[n],f=r[u];let h=null,g=-1/0;for(const y of["lane1","lane2","lane3"]){const S=(p.dronesOnBoard[y]||[]).filter(C=>!C.isExhausted);if(S.length!==0)for(const C of["lane1","lane2","lane3"]){if(y===C)continue;if(e.type==="SINGLE_MOVE"){const T=parseInt(y.replace("lane","")),N=parseInt(C.replace("lane",""));if(Math.abs(T-N)!==1)continue}const A=f.dronesOnBoard[C]?.length||0,w=p.dronesOnBoard[C]?.length||0,P=A*10-w*5;P>g&&(g=P,h={fromLane:y,toLane:C,drones:e.type==="SINGLE_MOVE"?[S[0]]:S.slice(0,Math.min(e.count||3,S.length))})}}if(!h)return{newPlayerStates:r,additionalEffects:[]};if(e.type==="SINGLE_MOVE"){const y=_2(l,h.drones[0],h.fromLane,h.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:y.newPlayerState},additionalEffects:[]}}else{const y=j2(l,h.drones,h.fromLane,h.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:y.newPlayerState},additionalEffects:[]}}},BI=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},p=u[n],f=Ze.find(g=>g.name===e.tokenName),h=[];return f?(e.locations.forEach(g=>{if(f.maxPerLane&&xu(p,f.name,g)>=f.maxPerLane){s&&typeof s=="function"&&s({action:`${p.name} could not create ${e.tokenName} token in ${g} (max per lane: ${f.maxPerLane})`,player:p.name});return}const y={...f,id:`${e.tokenName}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:f.name,attack:f.attack,hull:f.hull,shields:f.shields,speed:f.speed,currentShields:f.shields,currentMaxShields:f.shields,isExhausted:!1,isToken:!0,abilities:f.abilities?JSON.parse(JSON.stringify(f.abilities)):[]};p.dronesOnBoard[g].push(y),h.push({type:"TELEPORT",targetId:y.id,targetPlayer:n,targetLane:g,timestamp:Date.now()}),s&&typeof s=="function"&&s({action:`${p.name} created a ${e.tokenName} token in ${g}`,player:p.name})}),{newPlayerStates:u,additionalEffects:[],animationEvents:h}):(console.error(`Token drone ${e.tokenName} not found in drone collection`),{newPlayerStates:u,additionalEffects:[],animationEvents:[]})},$2=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return gv(e,t,n,"player1",r,i);case"DAMAGE":return kp(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},B2=(e,t,n,r,i,s,l)=>{const u={name:t};switch(e.type){case"DAMAGE":return kp(e,u,n,l,r,i,s);case"RECALL_DRONE":return z2(e,t,n,r,i,s,l);case"DRAW_THEN_DISCARD":return yv(e,u,n,l,r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},z2=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},p=l==="player1"?"player2":"player1",f=fr(n,u[l]);if(f){const h=u[l].dronesOnBoard[f].find(y=>y.id===n);if(!h)return console.warn(" [RECALL DEBUG] Drone not found in lane:",n,"lane:",f),{newPlayerStates:u,additionalEffects:[],animationEvents:[]};u[l].dronesOnBoard[f]=u[l].dronesOnBoard[f].filter(y=>y.id!==n),Object.assign(u[l],E2(u[l],h)),u[l].dronesOnBoard=Rl(u[l],u[p],i);const g=[{type:"TELEPORT_OUT",targetId:n,laneId:f,playerId:l,timestamp:Date.now()}];return{newPlayerStates:u,additionalEffects:[],animationEvents:g}}return{newPlayerStates:u,additionalEffects:[],animationEvents:[]}},U2=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:p,interceptor:f,attackingPlayer:h,abilityDamage:g,goAgain:y,damageType:x,lane:S,aiContext:C}=e,A=g!==void 0,w=f||u,P=f?"drone":p,T=h,N=w.owner||(T==="player1"?"player2":"player1"),_=t[T],j=t[N];let k=null,z=null;!A&&l&&l.id&&(k=fr(l.id,_),z=hr(l,k,_,j,n));let F=g??(z?Math.max(0,z.attack):0),M=x||(l?l.damageType:void 0);z&&z.keywords&&z.keywords.has("PIERCING")&&(M="PIERCING"),P==="section"&&!g&&l&&l.name&&Ze.find(ne=>ne.name===l.name)?.abilities?.forEach(ne=>{ne.type==="PASSIVE"&&ne.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(F+=ne.effect.value)});let R=0,U=0,W=!1,Z=0,Q=0;if(P==="drone"){let V=null;for(const ne in j.dronesOnBoard)if(V=j.dronesOnBoard[ne].find(ye=>ye.id===w.id),V)break;if(V){let ne=F;M!=="PIERCING"&&(R=Math.min(F,V.currentShields),ne-=R),U=Math.min(ne,V.hull),W=V.hull-U<=0,Z=V.currentShields-R,Q=W?0:V.hull-U}}else{const V=j.shipSections[w.name];if(V){let ne=F;M!=="PIERCING"&&(R=Math.min(F,V.allocatedShields),ne-=R),U=Math.min(ne,V.hull),W=V.hull-U<=0,Z=V.allocatedShields-R,Q=W?0:V.hull-U}}const I=`Dealt ${R} shield and ${U} hull damage to ${w.name}.`+(P==="drone"?W?` ${w.name} Destroyed.`:` ${w.name} has ${Z} shields and ${Q} hull left.`:""),G=[];if(l&&l.id&&!A&&G.push({type:"DRONE_ATTACK_START",sourceId:l.id,sourcePlayer:T,sourceLane:k,targetId:w.id,targetPlayer:N,targetLane:P==="drone"?fr(w.id,j):null,targetType:P,attackValue:z?z.attack:1,timestamp:Date.now()}),R>0){const V={type:"SHIELD_DAMAGE",targetId:w.id,targetPlayer:N,targetLane:P==="drone"?fr(w.id,j):null,targetType:P,amount:R,timestamp:Date.now()};G.push(V)}if(W){const V={type:P==="drone"?"DRONE_DESTROYED":"SECTION_DESTROYED",targetId:w.id,targetPlayer:N,targetLane:P==="drone"?fr(w.id,j):null,targetType:P,timestamp:Date.now()};G.push(V)}else{if(U>0){const V={type:"HULL_DAMAGE",targetId:w.id,targetPlayer:N,targetLane:P==="drone"?fr(w.id,j):null,targetType:P,amount:U,timestamp:Date.now()};G.push(V)}P==="section"&&(R>0||U>0)&&G.push({type:"SECTION_DAMAGED",targetId:w.id,targetPlayer:N,targetType:"section",timestamp:Date.now()}),l&&l.id&&!A&&G.push({type:"DRONE_RETURN",sourceId:l.id,sourcePlayer:T,sourceLane:k,timestamp:Date.now()})}const ie=k||(S?S.replace("lane","Lane "):null),le=P==="drone"?`${w.name} (${ie})`:w.name,$=l&&l.name?`${l.name} (${ie})`:"Card Effect";r&&r({player:t[T].name,actionType:"ATTACK",source:$,target:le,outcome:I},"resolveAttack",C);const q={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(P==="drone"){let V=!1;for(const ne in q[N].dronesOnBoard){const ye=q[N].dronesOnBoard[ne].findIndex(Se=>Se.id===w.id);if(ye!==-1){if(q[N].dronesOnBoard[ne][ye].hull-U<=0){V=!0;const Se=q[N].dronesOnBoard[ne][ye];q[N].dronesOnBoard[ne]=q[N].dronesOnBoard[ne].filter(Ce=>Ce.id!==w.id),Object.assign(q[N],Sl(q[N],Se))}else q[N].dronesOnBoard[ne][ye].hull-=U,q[N].dronesOnBoard[ne][ye].currentShields-=R;break}}if(V){const ne=N==="player1"?q.player2:q.player1;q[N].dronesOnBoard=Rl(q[N],ne,n)}}else{q[N].shipSections[w.name].hull-=U,q[N].shipSections[w.name].allocatedShields-=R;const V=N==="player1"?n.player1:n.player2,ne=Ha(q[N],V).totals;q[N].energy>ne.maxEnergy&&(q[N].energy=ne.maxEnergy)}if(!A&&l&&l.id){let V=!1;for(const ne in q[T].dronesOnBoard){const ye=q[T].dronesOnBoard[ne].findIndex(Se=>Se.id===l.id);if(ye!==-1){q[T].dronesOnBoard[ne][ye].isExhausted=!0,V=!0;break}}if(V){const ne=P2(q[T],l,T);q[T]=ne.newState,ne.animationEvents&&ne.animationEvents.length>0&&G.push(...ne.animationEvents),ne.effects.forEach(ye=>{ye.type==="LOG"&&r&&r(ye.payload,"afterAttack")})}}if(f){const V=T==="player1"?"player2":"player1";for(const ne in q[V].dronesOnBoard){const ye=q[V].dronesOnBoard[ne].findIndex(Se=>Se.id===f.id);if(ye!==-1){hr(q[V].dronesOnBoard[ne][ye],ne,q[V],q[T],n).keywords.has("DEFENDER")||(q[V].dronesOnBoard[ne][ye].isExhausted=!0);break}}}return{newPlayerStates:q,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:k||S,targetName:w.name,targetType:P,interceptorName:f?f.name:null,shieldDamage:R,hullDamage:U,wasDestroyed:W,remainingShields:Z,remainingHull:Q,outcome:I,shouldEndTurn:!y},animationEvents:G}},zI=(e,t)=>{const n=Ha(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},Mp=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),UI=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},HI=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},GI=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},qI=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},YI=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(p=>p.instanceId===l.instanceId||p.name===l.name&&p.id===l.id);if(u!==-1&&s<t){const p=r.splice(u,1)[0];i.push(p),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),p=r.splice(u,1)[0];i.push(p),s++}return{...e,hand:r,discardPile:i,discardCount:s}},H2=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&s.push({id:u,owner:"player1"})})}return s},G2=(e,t)=>t.activeDronePool.map(n=>{const r=Ze.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),q2=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},FI=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=hu("player1",e.drone,e.ability,i,s):t?l=hu("player1",{id:t.sectionName},t.ability,i,s):n?u=H2(n,i):r&&(r.type==="Upgrade"?u=G2(r,i):r.effect.type==="MULTI_MOVE"?u=q2(n,i):u=hu("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},VI=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),KI=(e,t,n,r)=>{const i=mv(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},Ie={initialPlayerState:sI,buildDeckFromList:A2,createCard:S2,getEffectiveSectionMaxShields:pv,getShipStatus:ys,onDroneDestroyed:Sl,onDroneRecalled:E2,checkWinCondition:o0,calculateAfterAttackStateAndEffects:P2,applyOnMoveEffects:w2,updateAuras:Rl,getLaneOfDrone:fr,getValidTargets:hu,calculateAllValidTargets:FI,calculateMultiSelectTargets:H2,calculateUpgradeTargets:G2,calculateMultiMoveTargets:q2,validateDeployment:T2,validateShieldRemoval:D2,validateShieldAddition:hv,executeShieldReallocation:oI,getValidShieldReallocationTargets:lI,processShieldAllocation:cI,processResetShieldAllocation:uI,processEndShieldAllocation:dI,resolveAttack:U2,resolveAbility:fI,resolveShipAbility:pI,executeDeployment:N2,resolveCardPlay:EI,payCardCosts:k2,finishCardPlay:I2,resolveMultiMove:j2,resolveSingleMove:_2,checkGameStateForWinner:hI,calculatePotentialInterceptors:mI,calculateAiInterception:yI,calculateTurnTransition:mv,calculatePassTransition:vI,readyDronesAndRestoreShields:O2,calculateNewRoundPlayerState:l0,drawToHandLimit:c0,drawPlayerCards:zI,determineFirstPlayer:Mp,enforceHandLimit:UI,checkHandLimitCompliance:HI,checkHandLimitViolations:GI,enforceHandLimits:qI,processDiscardPhase:YI,processTurnTransition:xI,processPhaseChange:bI,processRoundStart:SI,createExplosionEffect:VI,createTurnEndEffects:KI,resolveUnifiedDamageEffect:kp,resolveUnifiedHealEffect:gv,resolveUnifiedDrawEffect:yv,resolveSearchAndDrawEffect:L2,resolveDroneAbilityEffect:$2,resolveShipAbilityEffect:B2,resolveShipRecallEffect:z2,executeAiDeployment:gI,executeAiTurn:CI,executeAiAction:AI},ml=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:Ie,startingDecklist:vl,startingDroneList:C2},Symbol.toStringTag,{value:"Module"}));class WI{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){this.cache.size,this.cache.clear(),this.stats.invalidations++}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r))}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const XI=new WI;class on{static instance=null;static getInstance(t){return on.instance||(on.instance=new on(t)),on.instance}static reset(){on.instance&&on.instance.stateSubscriptionCleanup&&on.instance.stateSubscriptionCleanup(),on.instance=null}constructor(t){if(on.instance)return console.warn(" GameDataService already exists. Use getInstance() instead of new GameDataService()"),on.instance;this.gameStateManager=t,this.cache=XI,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()})}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),p=s[l],f=s[u],h=this.getPlacedSectionsForEngine(),g=this.isDroneOwnedByPlayer(t,p),S=hr(t,n,g?p:f,g?f:p,h);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=Ha(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(f=>({...f,effectiveStats:this.getEffectiveStats(f,t),isPlayer:!0})),p=(l.dronesOnBoard[t]||[]).map(f=>({...f,effectiveStats:this.getEffectiveStats(f,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:p,hasGuardian:this.hasGuardianInLane(t,p)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const QI=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"}));class JI{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,s=null){this.isInitialized||(this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&!this.gameDataService&&(this.gameDataService=on.getInstance(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&(this.stateSubscriptionCleanup=s.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,K("AI_DECISIONS"," AIPhaseProcessor initialized with personality:",r?.name||"Default"))}cleanup(){this.turnTimer&&(clearTimeout(this.turnTimer),this.turnTimer=null),this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.isProcessing=!1,this.isInitialized=!1}async processDroneSelection(t=null){const i=this.gameStateManager.getState().commitments?.deckSelection;if(!i||!i.player2)throw new Error("AI deck commitment not found - deckSelection phase must complete first");const s=i.player2.drones||[];if(K("AI_DECISIONS",` AI deck contains ${s.length} drones:`,s.join(", ")),s.length<5||s.length>10)throw new Error(`AI deck must have 5-10 drones, found ${s.length}`);const l=this.extractDronesFromDeck(s);if(l.length<5)throw console.error(" Failed to extract minimum required drones from deck"),new Error(`Only extracted ${l.length} drones from AI deck (minimum 5 required)`);const u=this.randomlySelectDrones(l,5),p=u.map(f=>f.name).join(", ");return K("AI_DECISIONS",` AI randomly selected 5 drones from ${l.length} available: ${p}`),u}extractDronesFromDeck(t){return t.map(r=>{const i=this.dronePool?.find(s=>s.name===r);return i||console.warn(` Drone "${r}" not found in drone collection`),i}).filter(Boolean)}randomlySelectDrones(t,n){return[...t].sort(()=>.5-Math.random()).slice(0,n)}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(p=>n.preferredDrones.includes(p.name)),u=Math.min(3,l.length);r=l.slice(0,u),K("AI_DECISIONS",` AI selected ${r.length} preferred drones:`,r.map(p=>p.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((p,f)=>{const h=(p.energyCost||1)+(p.health||0)+(p.attack||0);return(f.energyCost||1)+(f.health||0)+(f.attack||0)-h});const l=r?.aggression||.5,u=r?.economy||.5;for(let p=0;p<n&&s.length>0;p++){let f=0;if(l>.7)f=s.findIndex(h=>(h.attack||0)>2),f===-1&&(f=0);else if(u>.7)f=s.findIndex(h=>(h.energyCost||1)<=2),f===-1&&(f=0);else{const h=Math.min(3,s.length);f=Math.floor(Math.random()*h)}i.push(s.splice(f,1)[0])}return K("AI_DECISIONS",` AI balanced selection (${n}):`,i.map(p=>p.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;let r=[];if(n&&n.decklist&&n.decklist.length>0){K("AI_DECISIONS",` Using ${n.name} personality decklist`);const{gameEngine:l}=await Pr(async()=>{const{gameEngine:u}=await Promise.resolve().then(()=>ml);return{gameEngine:u}},void 0);r=l.buildDeckFromList(n.decklist)}else{const{gameEngine:l,startingDecklist:u}=await Pr(async()=>{const{gameEngine:p,startingDecklist:f}=await Promise.resolve().then(()=>ml);return{gameEngine:p,startingDecklist:f}},void 0);r=l.buildDeckFromList(u)}let i=[];if(n&&n.dronePool&&Array.isArray(n.dronePool)){if(i=[...n.dronePool],K("AI_DECISIONS",` Using ${n.name} personality dronePool: ${i.length} drones`),i.length<5)throw new Error(`AI personality '${n.name}' has only ${i.length} drones in dronePool. Minimum 5 required.`);if(i.length>10)throw new Error(`AI personality '${n.name}' has ${i.length} drones in dronePool. Maximum 10 allowed.`)}else{const{startingDroneList:l}=await Pr(async()=>{const{startingDroneList:u}=await Promise.resolve().then(()=>ml);return{startingDroneList:u}},void 0);i=[...l]}return K("AI_DECISIONS",` AI selected deck: ${r.length} cards + ${i.length} drones`),K("AI_DECISIONS",` AI drones: ${i.join(", ")}`),{deck:r,drones:i,shipComponents:{BRIDGE_001:"l",POWERCELL_001:"m",DRONECONTROL_001:"r"}}}async processPlacement(t=null){const n=t||this.currentAIPersonality,r=["bridge","powerCell","droneControlHub"];K("AI_DECISIONS",` AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n);return i.join(", "),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7)return this.arrangeAggressivePlacement(r);if(n.economy>.7)return this.arrangeEconomicPlacement(r)}return this.arrangeBalancedPlacement(r)}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Pr(async()=>{const{aiBrain:s}=await import("./aiLogic-2qohxJZb.js");return{aiBrain:s}},[]),{gameEngine:r}=await Pr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>ml);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Pr(async()=>{const{aiBrain:s}=await import("./aiLogic-2qohxJZb.js");return{aiBrain:s}},[]),{gameEngine:r}=await Pr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>ml);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});return i.type==="pass"?(await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}),null):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await Pr(async()=>{const{gameEngine:f}=await Promise.resolve().then(()=>ml);return{gameEngine:f}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},p=[];if(u.hand.length>l){const f=u.hand.length-l;p=u.hand.slice(0,f),u={...u,hand:u.hand.slice(f),discardPile:[...u.discardPile,...p]}}return u=n.drawToHandLimit(u,l),u.hand.length-(r.hand.length-p.length),{type:"optionalDiscard",cardsToDiscard:p,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];const p=n.hand.reduce((h,g)=>(h[g.cost]||(h[g.cost]=[]),h[g.cost].push(g),h),{}),f=Object.keys(p).map(Number).sort((h,g)=>h-g);for(const h of f){const g=[...p[h]].sort(()=>.5-Math.random());if(u.push(...g),u.length>=l)break}return u=u.slice(0,l),K("AI_DECISIONS",` AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let p=[];const f=t.player1,h=(x,S)=>x.reduce((C,A)=>{const w=this.gameDataService.getEffectiveStats(A,S);return C+(w.attack||0)+(w.hull||0)},0),g={lane1:h(n.dronesOnBoard.lane1||[],"lane1")-h(f.dronesOnBoard.lane1||[],"lane1"),lane2:h(n.dronesOnBoard.lane2||[],"lane2")-h(f.dronesOnBoard.lane2||[],"lane2"),lane3:h(n.dronesOnBoard.lane3||[],"lane3")-h(f.dronesOnBoard.lane3||[],"lane3")},y=[];return Object.entries(n.dronesOnBoard||{}).forEach(([x,S])=>{S.forEach(C=>{y.push({...C,lane:x,laneScore:g[x]})})}),y.sort((x,S)=>S.laneScore!==x.laneScore?S.laneScore-x.laneScore:x.class-S.class),p=y.slice(0,u),K("AI_DECISIONS",` AI removing ${p.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:p,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return!!(t.passInfo&&t.passInfo["player2Passed"])}async executePass(t){return{type:"pass",phase:t,playerId:"player2"}}async executeShieldAllocationTurn(t){if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");t.player2;const n=t.opponentPlacedSections,r=t.opponentShieldsToAllocate||0;if(r===0||n.length===0)return;let i=r,s=0;for(K("AI_DECISIONS",` AI distributing ${r} shields evenly across ${n.length} sections`);i>0;){const l=n[s];await this.actionProcessor.processAddShield({sectionName:l,playerId:"player2"}),i--,s=(s+1)%n.length}}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||t.winner||t.gameStage==="gameOver"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(K("AI_DECISIONS",` AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn()},1500)))}async executeTurn(){if(this.isProcessing)return;const t=this.gameStateManager.getState();if(!(t.currentPlayer!=="player2"||t.passInfo&&t.passInfo.player2Passed||!["deployment","action"].includes(t.turnPhase))){this.isProcessing=!0;try{K("AI_DECISIONS",` AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let r;if(t.turnPhase==="deployment")r=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")r=await this.executeActionTurn(t);else{console.warn(` AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}if(r?.needsInterceptionDecision){K("AI_DECISIONS"," AIPhaseProcessor: AI attack needs human interception decision, pausing turn loop"),this.isProcessing=!1;return}const i=this.gameStateManager.getState();i.currentPlayer==="player2"&&i.passInfo&&!i.passInfo.player2Passed&&(K("AI_DECISIONS"," AIPhaseProcessor: AI continues taking turns (either human passed or goAgain card played)"),setTimeout(()=>{this.checkForAITurn(i)},100))}catch(r){console.error(" AIPhaseProcessor: Error executing turn:",r)}finally{this.isProcessing=!1}}}async makeInterceptionDecision(t,n){if(!this.isInitialized)throw new Error("AIPhaseProcessor not initialized");K("AI_DECISIONS"," AIPhaseProcessor.makeInterceptionDecision called:",{interceptorCount:t?.length||0,target:n.target?.name});const{aiBrain:r}=await Pr(async()=>{const{aiBrain:s}=await import("./aiLogic-2qohxJZb.js");return{aiBrain:s}},[]),i=r.makeInterceptionDecision(t,n.target);return K("AI_DECISIONS"," AI interception decision:",{willIntercept:!!i.interceptor,interceptorName:i.interceptor?.name}),i}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,interception:!0,version:"1.3.0"}}}const Tr=new JI;class pi{static instance=null;static getInstance(t){return pi.instance||(pi.instance=new pi(t)),pi.instance}static reset(){pi.instance=null}constructor(t){if(pi.instance)return console.warn(" ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),pi.instance;this.gameStateManager=t,this.gameDataService=on.getInstance(t),this.animationManager=null,this.pendingActionAnimations=[],this.pendingSystemAnimations=[],this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1}}setP2PManager(t){this.p2pManager=t}setAnimationManager(t){this.animationManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1,this.actionQueue.length>0&&this.processQueue()}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const p=`${u}Passed`;if(s.passInfo[p])throw new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"move":return await this.processMove(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"movementCompletion":return await this.processMovementCompletion(r);case"searchAndDrawCompletion":return await this.processSearchAndDrawCompletion(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeDeploymentComplete":return await this.acknowledgeDeploymentComplete(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);case"destroyDrone":return await this.processDestroyDrone(r);case"addShield":return await this.processAddShield(r);case"resetShields":return await this.processResetShields(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{i||this.broadcastStateToGuest(),this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections};let s={...n};if(n.interceptor===void 0){const g=Ie.calculateAiInterception(n,{player1:r.player1,player2:r.player2},i);if(g.hasInterceptors){const y=n.attackingPlayer==="player1"?"player2":"player1";if(this.gameStateManager.setState({interceptionPending:{attackDetails:n,defendingPlayerId:y,attackingPlayerId:n.attackingPlayer,interceptors:g.interceptors,timestamp:Date.now()}}),y==="player2"&&r.gameMode==="local"){if(await new Promise(x=>setTimeout(x,1e3)),this.aiPhaseProcessor){const x=await this.aiPhaseProcessor.makeInterceptionDecision(g.interceptors,n);K("COMBAT"," [INTERCEPTION] AI decision:",x.interceptor?"INTERCEPT":"DECLINE"),x.interceptor&&(s.interceptor=x.interceptor,this.gameStateManager.setState({lastInterception:{interceptor:x.interceptor,originalTarget:n.target,timestamp:Date.now()}}))}this.gameStateManager.setState({interceptionPending:null})}else return{needsInterceptionDecision:!0,interceptionData:{interceptors:g.interceptors,attackDetails:g.attackDetails}}}}const l=g=>{this.gameStateManager.addLogEntry(g,"resolveAttack",s.attackingPlayer==="player2"?s.aiContext:null)},u=()=>{},p=()=>{},f=Ie.resolveAttack(s,{player1:r.player1,player2:r.player2},i,l,u,p),h=(f.animationEvents||[]).map(g=>({animationName:g.type,payload:{...g,droneId:g.sourceId}}));return K("COMBAT","[ANIMATION EVENTS] ActionProcessor received:",f.animationEvents),K("COMBAT"," [AI ANIMATION DEBUG] Built animations array:",{count:h.length,animations:h.map(g=>({name:g.animationName,sourceId:g.payload.sourceId,targetId:g.payload.targetId})),hasAnimationManager:!!this.animationManager}),await this.executeAndCaptureAnimations(h),this.gameStateManager.setPlayerStates(f.newPlayerStates.player1,f.newPlayerStates.player2),r.interceptionPending&&this.gameStateManager.setState({interceptionPending:null}),this.checkWinCondition(),f.attackResult&&f.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),f}async processMove(t){const{droneId:n,fromLane:r,toLane:i,playerId:s}=t,u=this.gameStateManager.getState()[s];if(!u)throw new Error(`Player ${s} not found`);const p=u.dronesOnBoard[r].findIndex(g=>g.id===n);if(p===-1)throw new Error(`Drone ${n} not found in ${r}`);const f=u.dronesOnBoard[r][p],h={...u.dronesOnBoard,[r]:u.dronesOnBoard[r].filter(g=>g.id!==n),[i]:[...u.dronesOnBoard[i],{...f,isExhausted:!0}]};return this.gameStateManager.updatePlayerState(s,{dronesOnBoard:h}),this.gameStateManager.addLogEntry({player:u.name,actionType:"MOVE",source:f.name,target:i.replace("lane","Lane "),outcome:`Moved from ${r.replace("lane","Lane ")} to ${i.replace("lane","Lane ")}.`}),K("COMBAT",` Moved ${f.name} from ${r} to ${i}`),await this.processTurnTransition({newPlayer:s==="player1"?"player2":"player1"}),{success:!0,message:`${f.name} moved from ${r} to ${i}`,drone:f,fromLane:r,toLane:i}}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let p=null,f=null;if(Object.values(l).forEach(C=>{Object.values(C.dronesOnBoard).forEach(A=>{A.forEach(w=>{w.id===n&&(p=w),w.id===i&&(f=w)})})}),i&&typeof i=="string"&&i.startsWith("lane")&&!f&&(f={id:i}),!p||!p.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const h=p.abilities[r],g=C=>{this.gameStateManager.addLogEntry(C,"resolveAbility")},y=async C=>await this.processAttack({attackDetails:C}),x=Ie.resolveAbility(h,p,f,l,u,g,y),S=(x.animationEvents||[]).map(C=>({animationName:C.type,payload:{...C,droneId:C.sourceId}}));if(await this.executeAndCaptureAnimations(S),this.gameStateManager.setPlayerStates(x.newPlayerStates.player1,x.newPlayerStates.player2),this.checkWinCondition(),x.shouldEndTurn){const C=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:C.currentPlayer==="player1"?"player2":"player1"})}return x}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t;K("DEPLOYMENT"," ActionProcessor.processDeployment: Received payload:",{droneDataName:n?.name});const l=this.gameStateManager.getState(),u=l[i],f=l[i==="player1"?"player2":"player1"],h={player1:l.placedSections,player2:l.opponentPlacedSections},g=x=>{this.gameStateManager.addLogEntry(x)},y=Ie.executeDeployment(n,r,s||l.turn,u,f,h,g,i);if(y.success){const x=y.deployedDrone?.id||n.id,S=(y.animationEvents||[]).map(T=>({animationName:T.type,payload:{...T,droneId:T.targetId}})),C={...y.newPlayerState,dronesOnBoard:{...y.newPlayerState.dronesOnBoard,[r]:y.newPlayerState.dronesOnBoard[r].map(T=>T.id===x?{...T,isTeleporting:!0}:T)}};i==="player1"?this.gameStateManager.updatePlayers(C,{}):this.gameStateManager.updatePlayers({},C),await new Promise(T=>setTimeout(T,50));const A=this.executeAndCaptureAnimations(S),w=this.animationManager?.animations?.TELEPORT_IN||{duration:600,config:{revealAt:.7}},P=w.duration*(w.config?.revealAt||.7);setTimeout(()=>{i==="player1"?this.gameStateManager.updatePlayers(y.newPlayerState,{}):this.gameStateManager.updatePlayers({},y.newPlayerState)},P),await A,await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})}return y}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let p=null;if(r){for(const y of["player1","player2"]){for(const x of["lane1","lane2","lane3"]){const C=(l[y].dronesOnBoard[x]||[]).find(A=>A.id===r);if(C){p={...C,owner:y};break}}if(p)break}if(!p)for(const y of["player1","player2"]){const x=l[y].shipSections;if(x[r]){p={...x[r],name:r,owner:y};break}}!p&&r&&r.startsWith("lane")&&(p={id:r})}const f={logCallback:y=>this.gameStateManager.addLogEntry(y),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async y=>await this.processAttack(y)},h=Ie.resolveCardPlay(n,p,i,l,u,f);K("CARDS","[ANIMATION EVENTS] Card play events:",h.animationEvents);const g=(h.animationEvents||[]).map(y=>({animationName:y.type,payload:{...y,droneId:y.sourceId||y.targetId}}));if(await this.executeAndCaptureAnimations(g),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),this.checkWinCondition(),h.shouldEndTurn){const y=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:y.currentPlayer==="player1"?"player2":"player1"})}return h}async processMovementCompletion(t){const{card:n,movementType:r,drones:i,fromLane:s,toLane:l,playerId:u}=t,p=this.gameStateManager.getState(),f=Ie.payCardCosts(n,u,{player1:p.player1,player2:p.player2}),h={player1:p.placedSections,player2:p.opponentPlacedSections},g={logCallback:S=>this.gameStateManager.addLogEntry(S),applyOnMoveEffectsCallback:Ie.applyOnMoveEffects,updateAurasCallback:Ie.updateAuras};let y;if(r==="single_move"){y=Ie.resolveSingleMove(n,i[0],s,l,f[u],f[u==="player1"?"player2":"player1"],h,g);const S={...f,[u]:y.newPlayerState};this.gameStateManager.setPlayerStates(S.player1,S.player2)}else{y=Ie.resolveMultiMove(n,i,s,l,f[u],f[u==="player1"?"player2":"player1"],h,g);const S={...f,[u]:y.newPlayerState};this.gameStateManager.setPlayerStates(S.player1,S.player2)}const x=[{animationName:"CARD_REVEAL",payload:{cardId:n.id,cardName:n.name,cardData:n,actingPlayerId:u,timestamp:Date.now()}}];if(await this.executeAndCaptureAnimations(x),y.shouldEndTurn){const S=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:S.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:y.shouldEndTurn}}async processSearchAndDrawCompletion(t){const{card:n,selectedCards:r,selectionData:i,playerId:s}=t,l=this.gameStateManager.getState(),{searchedCards:u,remainingDeck:p,discardPile:f,shuffleAfter:h}=i,g=Ie.payCardCosts(n,s,{player1:l.player1,player2:l.player2}),y=u.filter(T=>{const N=T.instanceId||`${T.id}-${T.name}`;return!r.some(_=>(_.instanceId||`${_.id}-${_.name}`)===N)}),x=g[s],S=[...x.hand,...r];let C=[...p,...y];h&&(C=C.sort(()=>.5-Math.random()));const A={...x,deck:C,hand:S,discardPile:f},w={player1:s==="player1"?A:g.player1,player2:s==="player2"?A:g.player2},P=Ie.finishCardPlay(n,s,w);if(this.gameStateManager.addLogEntry({player:x.name,actionType:"CARD_SELECTION",source:n.name,target:`Selected ${r.length} cards`,outcome:`Drew: ${r.map(T=>T.name).join(", ")}`},"processSearchAndDrawCompletion"),this.gameStateManager.setPlayerStates(P.newPlayerStates.player1,P.newPlayerStates.player2),P.shouldEndTurn){const T=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:T.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:P.shouldEndTurn,newPlayerStates:P.newPlayerStates}}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},p={player1:l.placedSections,player2:l.opponentPlacedSections},f={logCallback:y=>this.gameStateManager.addLogEntry(y),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async y=>await this.processAttack(y)},h=Ie.resolveShipAbility(n,r,i,u,p,f,s),g=(h.animationEvents||[]).map(y=>({animationName:y.type,payload:{...y,droneId:y.sourceId}}));if(await this.executeAndCaptureAnimations(g),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),h.shouldEndTurn){const y=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:y.currentPlayer==="player1"?"player2":"player1"})}return h}checkWinCondition(){const t=this.gameStateManager.getState();if(t.winner)return null;const n={player1:t.player1,player2:t.player2},r={logCallback:s=>{this.gameStateManager.addLogEntry(s,"checkWinCondition")},setWinnerCallback:s=>{this.gameStateManager.setWinner(s)},showWinnerModalCallback:()=>{}};return Ie.checkGameStateForWinner(n,r)}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t,i=this.gameStateManager.getState();K("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=Ie.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&this.gameStateManager.setTurnPhase(n),r){const u=this.gameStateManager.getState();let p=r;u.passInfo&&u.passInfo[`${r}Passed`]&&(p=u.currentPlayer),this.gameStateManager.setCurrentPlayer(p)}const l=this.gameStateManager.getState();return K("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return{success:!0,message:"Already in phase"};K("PHASE_TRANSITIONS",`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(["deployment","action"].includes(n)&&(s.currentPlayer=i.firstPlayerOfRound,K("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Sequential phase: Setting currentPlayer to firstPlayerOfRound: ${i.firstPlayerOfRound}`)),n==="allocateShields"){const f=this.gameStateManager.getLocalPlayerId(),h=i[f],y=this.gameDataService.getEffectiveShipStats(h,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=y}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(n),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1});const u={determineFirstPlayer:"DETERMINING FIRST PLAYER",energyReset:"ENERGY RESET",mandatoryDiscard:"MANDATORY DISCARD PHASE",optionalDiscard:"OPTIONAL DISCARD PHASE",draw:"DRAW PHASE",allocateShields:"ALLOCATE SHIELDS",mandatoryDroneRemoval:"REMOVE EXCESS DRONES",deployment:"DEPLOYMENT PHASE",deploymentComplete:"DEPLOYMENT COMPLETE",action:"ACTION PHASE"};if(u[n]&&this.animationManager){const f={phaseText:u[n],phaseName:n,timestamp:Date.now()};(n==="deployment"||n==="action")&&(f.firstPlayerId=i.firstPlayerOfRound);const h={animationName:"PHASE_ANNOUNCEMENT",payload:f};await this.executeAndCaptureAnimations([h],!0)}K("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase}  ${n}`);const p=this.gameStateManager.getState();return K("PHASE_TRANSITIONS",`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:p.turnPhase,placedSections:p.placedSections,opponentPlacedSections:p.opponentPlacedSections}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t,s=this.gameStateManager.getState(),l=i||Ie.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),p=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),f=Ie.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),h=Ie.calculateNewRoundPlayerState(s.player2,n,p,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,firstPasserOfPreviousRound:s.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(f,h),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:f,player2:h}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);const u=l[s];if(n==="remove"){const p=u.shipSections[r];if(!p||p.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const f={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},h={...u,shipSections:f};return this.gameStateManager.updatePlayerState(s,h),{success:!0,action:"remove",sectionName:r,newPlayerState:h}}else if(n==="add"){const p=s==="player1"?l.placedSections:l.opponentPlacedSections,f=Ie.getEffectiveSectionMaxShields(r,u,p),h=u.shipSections[r];if(!h||h.allocatedShields>=f)return{success:!1,error:"Cannot add shield to this section"};const g={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},y={...u,shipSections:g};return this.gameStateManager.updatePlayerState(s,y),{success:!0,action:"add",sectionName:r,newPlayerState:y}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const p={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,p),{success:!0,action:"restore",newPlayerState:p}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return K("COMBAT"," [AI ANIMATION DEBUG] processAiAction attack case:",{attackerId:s.attacker?.id,targetId:s.target?.id,lane:s.attacker?.lane,targetType:s.targetType,hasAttackerObject:!!s.attacker,hasTargetObject:!!s.target}),await this.processAttack({attackDetails:{attacker:s.attacker,target:s.target,targetType:s.targetType||"drone",lane:s.attacker.lane,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":return await this.processMove({droneId:s.drone.id,fromLane:s.fromLane,toLane:s.toLane,playerId:"player2"});case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiDecision(t,n){switch(K("DEPLOYMENT",`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;K("DEPLOYMENT","[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return s.success&&await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attacker:l.attacker,target:l.target,targetType:l.targetType||"drone",lane:l.lane,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove({droneId:l.drone.id,fromLane:l.fromLane,toLane:l.toLane,playerId:n});break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u;case"pass":const p=this.gameStateManager.getState(),f=!p.passInfo[n==="player1"?"player2Passed":"player1Passed"];K("PASS_LOGIC","[AI DECISION DEBUG] Pass info before update:",p.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:p.passInfo.firstPasser||(f?n:null)});const h=this.gameStateManager.get("passInfo");return h.player1Passed&&h.player2Passed?p.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):p.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"}):await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t,r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processGuestAction(t){if(this.gameStateManager.get("gameMode")!=="host"){console.warn(" processGuestAction should only be called by host");return}const r=await this.queueAction({type:t.type,payload:t.payload,isNetworkAction:!0});return this.broadcastStateToGuest(),r}async executeAndCaptureAnimations(t,n=!1){if(!t||t.length===0)return;const r=this.gameStateManager.get("gameMode");if(r==="host"&&(n?this.pendingSystemAnimations.push(...t):this.pendingActionAnimations.push(...t)),this.animationManager){const i=r==="guest"?"GUEST_OPTIMISTIC":r==="host"?"HOST_LOCAL":"LOCAL";await this.animationManager.executeAnimations(t,i)}}getAndClearPendingActionAnimations(){const t=[...this.pendingActionAnimations];return this.pendingActionAnimations=[],t}getAndClearPendingSystemAnimations(){const t=[...this.pendingSystemAnimations];return this.pendingSystemAnimations=[],t}broadcastStateToGuest(){if(this.gameStateManager.get("gameMode")==="host"&&this.p2pManager&&this.p2pManager.isConnected){const n=this.gameStateManager.getState(),r=this.getAndClearPendingActionAnimations(),i=this.getAndClearPendingSystemAnimations();K("STATE_SYNC"," [ANIMATION BROADCAST] Sending state with animations:",{actionAnimationCount:r.length,systemAnimationCount:i.length,actionAnimations:r.map(s=>s.animationName),systemAnimations:i.map(s=>s.animationName)}),this.p2pManager.broadcastState(n,r,i)}}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=[{animationName:"PASS_NOTIFICATION",payload:{passingPlayerId:n}}];await this.executeAndCaptureAnimations(u);const p=`${l}Passed`,f=`${n}Passed`,h=!s[p],g={...s,[f]:!0,firstPasser:s.firstPasser||(h?n:null)};if(this.gameStateManager.setPassInfo(g,"ActionProcessor"),!(g.player1Passed&&g.player2Passed)){let x=null;n==="player1"&&!g.player2Passed?x="player2":n==="player2"&&!g.player1Passed&&(x="player1"),x&&this.gameStateManager.setState({currentPlayer:x},"TURN_SWITCH","playerPass")}return{success:!0,newPassInfo:g}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.error(" CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error(" CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r,isMandatory:i=!1,abilityMetadata:s=null}=t,l=this.gameStateManager.getState();if(!Array.isArray(r))throw new Error("Cards to discard must be an array");const u=l[n];if(!u)throw new Error(`Player ${n} not found`);r.forEach(h=>{this.gameStateManager.addLogEntry({player:u.name,actionType:i?"DISCARD_MANDATORY":"DISCARD_OPTIONAL",source:h.name,target:"N/A",outcome:`Discarded ${h.name}.`})});const p=u.hand.filter(h=>!r.some(g=>h.instanceId===g.instanceId)),f=[...u.discardPile,...r];if(this.gameStateManager.updatePlayerState(n,{hand:p,discardPile:f}),K("CARDS",`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),s){const h=[{animationName:"SHIP_ABILITY_REVEAL",payload:{abilityName:s.abilityName,sectionName:s.sectionName,actingPlayerId:s.actingPlayerId}}];await this.executeAndCaptureAnimations(h)}return{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await Pr(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-DlJvqHRO.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeDeploymentComplete(t){return await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}):n.commitments={},this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;if(this.gameStateManager.get("gameMode")==="guest")return console.warn(" Guest attempted processCommitment - should send to host instead"),{success:!1,error:"Guest cannot process commitments locally"};const l=this.gameStateManager.getState();l.commitments[r]||(l.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),l.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:l.commitments},"COMMITMENT_UPDATE");let u=l.commitments[r].player1.completed&&l.commitments[r].player2.completed;if(n==="player1"&&l.gameMode==="local"&&!u&&Tr)try{K("SHIELD_CLICKS"," Calling handleAICommitment..."),await this.handleAICommitment(r,l),K("COMMITMENTS"," AI commitment completed successfully"),K("SHIELD_CLICKS"," handleAICommitment returned successfully");const p=this.gameStateManager.getState();u=p.commitments[r].player1.completed&&p.commitments[r].player2.completed,K("COMMITMENTS",` Recalculated bothComplete after AI commit: ${u}`),K("SHIELD_CLICKS",` Both players complete: ${u}`)}catch(p){throw console.error(" AI commitment error:",p),p}return{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:u}}}async handleAICommitment(t,n){try{K("COMMITMENTS",` Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await Tr.processDroneSelection(),await this.processCommitment({playerId:"player2",phase:"droneSelection",actionData:{drones:r}});break;case"deckSelection":r=await Tr.processDeckSelection(),await this.processCommitment({playerId:"player2",phase:"deckSelection",actionData:{deck:r.deck,drones:r.drones,shipComponents:r.shipComponents}});break;case"placement":r=await Tr.processPlacement(),await this.processCommitment({playerId:"player2",phase:"placement",actionData:{placedSections:r}});break;case"mandatoryDiscard":if(r=await Tr.executeMandatoryDiscardTurn(n),r.cardsToDiscard.length>0){const i=n.player2,s=i.hand.filter(u=>!r.cardsToDiscard.some(p=>u.instanceId===p.instanceId)),l=[...i.discardPile,...r.cardsToDiscard];this.gameStateManager.updatePlayerState("player2",{hand:s,discardPile:l}),K("COMMITMENTS",` AI discarded ${r.cardsToDiscard.length} cards for mandatory discard`)}await this.processCommitment({playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}});break;case"optionalDiscard":r=await Tr.executeOptionalDiscardTurn(n),await this.processCommitment({playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}});break;case"allocateShields":K("SHIELD_CLICKS"," [HANDLE AI] About to call executeShieldAllocationTurn"),await Tr.executeShieldAllocationTurn(n),K("SHIELD_CLICKS"," [HANDLE AI] executeShieldAllocationTurn completed, now committing"),await this.processCommitment({playerId:"player2",phase:"allocateShields",actionData:{committed:!0}}),K("SHIELD_CLICKS"," [HANDLE AI] AI commitment complete");break;case"mandatoryDroneRemoval":if(r=await Tr.executeMandatoryDroneRemovalTurn(n),r.dronesToRemove.length>0){for(const i of r.dronesToRemove)await this.processDestroyDrone({droneId:i.id,playerId:"player2"});K("COMMITMENTS",` AI removed ${r.dronesToRemove.length} drones for mandatory drone removal`)}await this.processCommitment({playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}});break;case"determineFirstPlayer":await new Promise(i=>{setTimeout(async()=>{await this.processCommitment({playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}),i()},1e3)});break;case"deploymentComplete":K("COMMITMENTS"," AI will acknowledge deployment complete after 3 second delay (for testing)"),await new Promise(i=>{setTimeout(async()=>{await this.processCommitment({playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}),K("COMMITMENTS"," AI acknowledged deployment complete"),i()},3e3)});break;default:console.warn(` No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(` No commitments found for phase: ${t}`),{};const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((s,l)=>(s[l.name]=0,s),{})});break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,deckDronePool:r.player1.drones||[],selectedShipComponents:r.player1.shipComponents||{},discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,deckDronePool:r.player2.drones||[],selectedShipComponents:r.player2.shipComponents||{},discard:[]});break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),K("COMMITMENTS"," Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":break;case"mandatoryDiscard":case"optionalDiscard":break;case"allocateShields":break;case"deploymentComplete":break;case"determineFirstPlayer":break;default:console.warn(` No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}=t;return this.gameStateManager.setPlayerStates(n,r),i!==void 0&&this.gameStateManager.setState({shieldsToAllocate:i}),s!==void 0&&this.gameStateManager.setState({opponentShieldsToAllocate:s}),{success:!0,message:"Energy reset completed",player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}}async processDestroyDrone(t){const{droneId:n,playerId:r}=t;if(this.gameStateManager.get("gameMode")==="guest")return console.warn(" Guest attempted processDestroyDrone - should send to host instead"),{success:!1,error:"Guest cannot destroy drones locally"};const s=this.gameStateManager.getState(),l=s[r];if(!l)return{success:!1,error:`Player ${r} not found`};const u=Ie.getLaneOfDrone(n,l);if(!u)return{success:!1,error:`Drone ${n} not found on board`};const p=l.dronesOnBoard[u].find(S=>S.id===n);if(!p)return{success:!1,error:`Drone ${n} not found in lane ${u}`};let f={...l,dronesOnBoard:{...l.dronesOnBoard}};f.dronesOnBoard[u]=f.dronesOnBoard[u].filter(S=>S.id!==n);const h=Ie.onDroneDestroyed(f,p);Object.assign(f,h);const y=s[r==="player1"?"player2":"player1"],x={player1:s.placedSections,player2:s.opponentPlacedSections};return f.dronesOnBoard=Ie.updateAuras(f,y,x),this.gameStateManager.updatePlayerState(r,f),{success:!0,message:`Drone destroyed from ${u}`,droneId:n,lane:u,droneName:p.name}}async processAddShield(t){const{sectionName:n,playerId:r}=t;if(this.gameStateManager.get("gameMode")==="guest")return console.warn(" Guest attempted processAddShield - should send to host instead"),{success:!1,error:"Guest cannot add shields locally"};const s=this.gameStateManager.getState(),l=r==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate",u=Ie.processShieldAllocation({...s,shieldsToAllocate:s[l]},r,n);return u.success?(this.gameStateManager.updatePlayerState(r,u.newPlayerState),this.gameStateManager.setState({[l]:u.newShieldsToAllocate}),K("ENERGY",` Shield added to ${n}, ${u.newShieldsToAllocate} shields remaining`),{success:!0,message:`Shield added to ${n}`,sectionName:n,shieldsRemaining:u.newShieldsToAllocate}):(console.warn(` Shield allocation failed: ${u.error}`),u)}async processResetShields(t){const{playerId:n}=t;if(this.gameStateManager.get("gameMode")==="guest")return console.warn(" Guest attempted processResetShields - should send to host instead"),{success:!1,error:"Guest cannot reset shields locally"};const i=this.gameStateManager.getState(),s=Ie.processResetShieldAllocation(i,n);if(!s.success)return console.warn(` Shield reset failed: ${s.error}`),s;this.gameStateManager.updatePlayerState(n,s.newPlayerState);const l=n==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate";return this.gameStateManager.setState({[l]:s.newShieldsToAllocate}),K("ENERGY",` Shield allocation reset, ${s.newShieldsToAllocate} shields available`),{success:!0,message:"Shield allocation reset",shieldsToAllocate:s.newShieldsToAllocate}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}class ZI{constructor(t){this.gameStateManager=t,this.messageQueue=[],this.isProcessing=!1,this.renderCompletePromise=null,this.renderCompleteResolve=null}initialize(t){t.subscribe(n=>{n.type==="state_update_received"&&this.enqueueMessage(n)}),this.gameStateManager.subscribe(n=>{n.type==="render_complete"&&this.renderCompleteResolve&&(this.renderCompleteResolve(),this.renderCompleteResolve=null,this.renderCompletePromise=null)})}enqueueMessage(t){K("MULTIPLAYER"," [GUEST QUEUE] Enqueuing message:",{type:t.type,queueLength:this.messageQueue.length+1}),this.messageQueue.push(t),this.processQueue()}async processQueue(){if(this.isProcessing){K("MULTIPLAYER"," [GUEST QUEUE] Already processing, queue length:",this.messageQueue.length);return}for(this.isProcessing=!0;this.messageQueue.length>0;){const t=this.messageQueue.shift();K("MULTIPLAYER"," [GUEST QUEUE] Processing message:",{type:t.type,remaining:this.messageQueue.length}),await this.processMessage(t)}this.isProcessing=!1}async processMessage(t){switch(t.type){case"state_update_received":await this.processStateUpdate(t.data);break;default:console.warn(" [GUEST QUEUE] Unknown message type:",t.type)}}async processStateUpdate({state:t,actionAnimations:n,systemAnimations:r}){K("STATE_SYNC"," [GUEST QUEUE] Processing state update:",{turnPhase:t?.turnPhase,hasActionAnimations:n?.length>0,hasSystemAnimations:r?.length>0,actionAnimationCount:n?.length||0,systemAnimationCount:r?.length||0});const i=this.gameStateManager.hasRecentOptimisticActions();this.gameStateManager.optimisticActions?.length;let s=n||[];i&&n&&n.length>0&&(s=[]);const l=r||[],u=[...s,...l];K("ANIMATIONS"," [GUEST QUEUE] Animation filtering decision:",{incomingActionCount:n?.length||0,incomingSystemCount:r?.length||0,skippedActionCount:(n?.length||0)-s.length,systemAnimationsKept:l.length,totalToPlay:u.length});const p=u.length>0;let f=null;p&&(f=this.waitForRender()),this.gameStateManager.applyHostState(t),p&&f&&(await f,this.gameStateManager.actionProcessor?.animationManager&&await this.gameStateManager.actionProcessor.animationManager.executeAnimations(u,"HOST_RESPONSE"))}async waitForRender(){return this.renderCompletePromise?this.renderCompletePromise:(this.renderCompletePromise=new Promise(t=>{this.renderCompleteResolve=t}),this.renderCompletePromise)}getStatus(){return{queueLength:this.messageQueue.length,isProcessing:this.isProcessing,waitingForRender:!!this.renderCompletePromise}}}const qC=(e,t=3)=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const r=[...e.filter(l=>l.selectable!==!1)].sort(()=>.5-Math.random()),i=r.slice(0,t),s=r.slice(t);return K("DRONE_SELECTION",` Initialized drone selection: ${i.length} in initial selection, ${s.length} in pool`),K("DRONE_SELECTION",` Initial selection: ${i.map(l=>l.name).join(", ")}`),{droneSelectionTrio:i,droneSelectionPool:s}},eR=(e,t=3)=>{if(!e||e.length===0)return console.warn(" No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return K("DRONE_SELECTION",` Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),K("DRONE_SELECTION",` Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class tR{constructor(){this.listeners=new Set,this.optimisticActions=[],this.optimisticActionTimeout=5e3,this.state={appState:"menu",isConnected:!1,opponentId:null,gameMode:"local",testMode:!1,gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=pi.getInstance(this),this.gameFlowManager=null,this.guestQueueService=null,this.p2pIntegrationSetup=!1,K("STATE_SYNC"," App State:",this.state.appState),K("STATE_SYNC"," Game Active:",this.state.gameActive)}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost),n.data.mode==="guest"&&!this.guestQueueService&&(this.guestQueueService=new ZI(this),this.guestQueueService.initialize(t));break;case"state_update_received":this.state.gameMode==="guest"&&(this.guestQueueService||(console.warn(" [GUEST QUEUE] Service not initialized, applying state directly (fallback)"),this.applyHostState(n.data.state)));break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}applyHostState(t){if(this.state.gameMode!=="guest"){console.warn(" applyHostState should only be called in guest mode");return}K("STATE_SYNC","[GUEST STATE UPDATE] Applying state from host:",{turnPhase:t.turnPhase,currentPlayer:t.currentPlayer,roundNumber:t.roundNumber}),K("STATE_SYNC","[GUEST] Received player2 hand from host:",{handSize:t.player2?.hand?.length||0,sampleCard:t.player2?.hand?.[0]||null,sampleInstanceId:t.player2?.hand?.[0]?.instanceId,hasInstanceId:t.player2?.hand?.[0]?.instanceId!==void 0});const n=this.state.gameMode;this.state={...t},this.state.gameMode=n,K("STATE_SYNC","[GUEST] After applying state - player2 hand check:",{handSize:this.state.player2?.hand?.length||0,sampleCard:this.state.player2?.hand?.[0]||null,sampleInstanceId:this.state.player2?.hand?.[0]?.instanceId,hasInstanceId:this.state.player2?.hand?.[0]?.instanceId!==void 0}),this.emit("HOST_STATE_UPDATE",{hostState:t})}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),p=l.some(C=>C.includes("App.jsx")),f=l.some(C=>C.includes("ActionProcessor")),h=l.some(C=>C.includes("PhaseManager"));p&&!(f||h)&&(console.error(" ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error(" App.jsx should only call ActionProcessor or PhaseManager methods"),console.error(" Stack trace:",s));const y=Object.keys(t),x=`${u.primaryCaller} in ${u.primaryFile}`,S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,x,n),y.forEach(C=>{if(!["player1","player2"].includes(C)){const A=i[C],w=t[C];JSON.stringify(A),JSON.stringify(w)}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(g=>g in t),p=i&&i.includes("GameFlowManager"),f=r==="phaseTransition"||t.turnPhase&&p;u&&!(f&&p)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:p,isPhaseTransition:f,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(p=>{i.has(p.id)&&console.error(`Duplicate drone ID detected: ${p.id} in player${l+1}`),i.add(p.id)})})})}validateTurnPhaseTransition(t,n){if(this.state.testMode)return;({null:["deckSelection","preGame"],preGame:["deckSelection","droneSelection"],deckSelection:["droneSelection"],droneSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","deploymentComplete","roundEnd"],deploymentComplete:["action"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase)||(K("STATE_SYNC"," Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase)||["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],p=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],f=Object.keys(t).filter(w=>u.includes(w)),h=Object.keys(t).filter(w=>p.includes(w)),g=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const y=f.every(w=>["player1","player2"].includes(w)),x=f.every(w=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(w));if(g&&(y||x))return;const S=i&&i.includes("SequentialPhaseManager"),C=["deployment","action"].includes(n.turnPhase),A=f.length===1&&f[0]==="passInfo";if(!(S&&C&&A)){if(f.length>0&&!r){const w=i?.split(`
`)||[],P=w.find(T=>T.includes(".jsx")&&!T.includes("GameStateManager"))||w[2]||"Unknown";console.warn(" ActionProcessor bypass detected: Critical game state updated directly",{updates:f,turnPhase:n.turnPhase,caller:P.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug(" ActionProcessor bypass debug info:",{stackTrace:w.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}h.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(f=>{const h=l?l[f]:void 0,g=u?u[f]:void 0;if(JSON.stringify(h)!==JSON.stringify(g))if(f==="energy"||f==="deploymentBudget"||f==="initialDeploymentBudget")(g==null||isNaN(g))&&console.error(`   WARNING: ${f} became ${g}!`);else if(f==="activeDronePool"){const y=Array.isArray(h)?h.length:"undefined",x=Array.isArray(g)?g.length:"undefined";let S,C;if(Array.isArray(h))try{S=h.map(A=>A?.name||"UNNAMED").join(",")}catch(A){S=`ERROR_MAPPING_OLD: ${A.message}`}else S="undefined";if(Array.isArray(g))try{C=g.map(A=>A?.name||"UNNAMED").join(",")}catch(A){C=`ERROR_MAPPING_NEW: ${A.message}`}else C="undefined";(C.includes("ERROR")||C==="undefined")&&Array.isArray(g)&&g.length>0&&K("STATE_SYNC","     First drone object:",g[0]),(y!==x||S!==C)&&new Error().stack?.split(`
`).slice(1,4).join(`
`)}else f==="hand"||f==="deck"?(Array.isArray(h)&&h.length,Array.isArray(g)&&g.length):f==="dronesOnBoard"&&(h&&`${h.lane1?.length||0}${h.lane2?.length||0}${h.lane3?.length||0}`,g&&`${g.lane1?.length||0}${g.lane2?.length||0}${g.lane3?.length||0}`)})}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],p=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],f=l.functions.filter(g=>u.some(y=>g.toLowerCase().includes(y.toLowerCase()))),h=l.functions.filter(g=>p.some(y=>g.toLowerCase().includes(y.toLowerCase())));f.length>0&&h.length===0&&(console.warn(" Inappropriate function updating game state:",{inappropriateFunctions:f,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI  ActionProcessor  gameLogic.js  GameStateManager"}),console.debug(" Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:f,appropriateFound:h,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const p of r){const f=u[p];if(!f)continue;const h=Array.isArray(f)?f:[f];let g=!1;for(const y of h)(y==="GameFlowManager"&&i||y==="SequentialPhaseManager"&&s||y==="ActionProcessor"&&l)&&(g=!0);if(!g){const y=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(` OWNERSHIP VIOLATION: ${y} cannot update '${p}'`,{updateKey:p,currentManager:y,allowedOwners:h,updates:r,recommendation:`Only ${h.join(" or ")} should update '${p}'`})}}}reset(){const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:Ie.initialPlayerState("Player 1",vl),player2:Ie.initialPlayerState("Player 2",vl),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET"),on.reset(),this.actionProcessor.clearQueue()}startGame(t="local",n={},r={}){const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"deckSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...Ie.initialPlayerState(n.name||"Player 1",n.decklist||vl),...n},player2:{...Ie.initialPlayerState(r.name||"Player 2",r.decklist||vl),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{},droneSelectionPool:[],droneSelectionTrio:[]};this.setState(i,"GAME_STARTED"),K("STATE_SYNC"," Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),K("STATE_SYNC"," Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0})}endGame(){this.setState({appState:"menu",gameActive:!1,testMode:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),on.reset(),this.actionProcessor.clearQueue(),this.gameFlowManager&&this.gameFlowManager.reset()}initializeTestMode(t){return Pr(()=>Promise.resolve().then(()=>cV),void 0).then(n=>{n.initializeTestGame(t,this)}).catch(n=>{console.error(" TEST MODE: Error importing testGameInitializer:",n)}),!0}setMultiplayerMode(t,n=!1){this.setState({gameMode:t},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&K("STATE_SYNC"," [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}trackOptimisticAction(t,n){const r={type:t,payload:n,timestamp:Date.now(),id:`${t}-${Date.now()}-${Math.random()}`};this.optimisticActions.push(r),K("STATE_SYNC"," [OPTIMISTIC] Tracked action:",t,"Total tracked:",this.optimisticActions.length),setTimeout(()=>{this.optimisticActions=this.optimisticActions.filter(i=>i.id!==r.id),K("STATE_SYNC"," [OPTIMISTIC] Cleared old action:",t,"Remaining:",this.optimisticActions.length)},this.optimisticActionTimeout)}hasRecentOptimisticActions(){return this.optimisticActions.length>0}clearOptimisticActions(){this.optimisticActions=[]}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Ue=new tR;class nR{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return rR(t).buffer}}function rR(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function Y2(e){return new aR(e).unpack()}function F2(e){const t=new iR,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class aR{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class iR{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,p=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(p)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new nR,this._textEncoder=new TextEncoder}}let V2=!0,K2=!0;function cu(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function Co(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const p=f=>{const h=n(f);h&&(u.handleEvent?u.handleEvent(h):u(h))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,p),i.apply(this,[l,p])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const p=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,p])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function sR(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(V2=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function oR(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(K2=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function W2(){if(typeof window=="object"){if(V2)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function vv(e,t){K2&&console.warn(e+" is deprecated, please use "+t+" instead.")}function lR(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(cu(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(cu(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(cu(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=cu(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function YC(e){return Object.prototype.toString.call(e)==="[object Object]"}function X2(e){return YC(e)?Object.keys(e).reduce(function(t,n){const r=YC(e[n]),i=r?X2(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function u0(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?u0(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{u0(e,e.get(i),n)})}))}function FC(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&u0(e,u,i)})}),i}const VC=W2;function Q2(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const p={};return Object.keys(u).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const h=typeof u[f]=="object"?u[f]:{ideal:u[f]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const g=function(y,x){return y?y+x.charAt(0).toUpperCase()+x.slice(1):x==="deviceId"?"sourceId":x};if(h.ideal!==void 0){p.optional=p.optional||[];let y={};typeof h.ideal=="number"?(y[g("min",f)]=h.ideal,p.optional.push(y),y={},y[g("max",f)]=h.ideal,p.optional.push(y)):(y[g("",f)]=h.ideal,p.optional.push(y))}h.exact!==void 0&&typeof h.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[g("",f)]=h.exact):["min","max"].forEach(y=>{h[y]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[g(y,f)]=h[y])})}),u.advanced&&(p.optional=(p.optional||[]).concat(u.advanced)),p},i=function(u,p){if(t.version>=61)return p(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const f=function(h,g,y){g in h&&!(y in h)&&(h[y]=h[g],delete h[g])};u=JSON.parse(JSON.stringify(u)),f(u.audio,"autoGainControl","googAutoGainControl"),f(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let f=u.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const h=t.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete u.video.facingMode;let g;if(f.exact==="environment"||f.ideal==="environment"?g=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(g=["front"]),g)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(S=>S.kind==="videoinput");let x=y.find(S=>g.some(C=>S.label.toLowerCase().includes(C)));return!x&&y.length&&g.includes("back")&&(x=y[y.length-1]),x&&(u.video.deviceId=f.exact?{exact:x.deviceId}:{ideal:x.deviceId}),u.video=r(u.video),VC("chrome: "+JSON.stringify(u)),p(u)})}u.video=r(u.video)}return VC("chrome: "+JSON.stringify(u)),p(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,p,f){i(u,h=>{n.webkitGetUserMedia(h,p,g=>{f&&f(s(g))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(p){return i(p,f=>u(f).then(h=>{if(f.audio&&!h.getAudioTracks().length||f.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function J2(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Z2(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Co(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function eT(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,p){let f=i.apply(this,arguments);return f||(f=t(this,u),this._senders.push(f)),f};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const p=this._senders.indexOf(u);p!==-1&&this._senders.splice(p,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(p=>p.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function tT(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>FC(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Co(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>FC(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function nT(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(p)===-1&&this._shimmedLocalStreams[u.id].push(p):this._shimmedLocalStreams[u.id]=[u,p],p};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(f=>{if(this.getSenders().find(g=>g.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const p=this.getSenders().filter(f=>u.indexOf(f)===-1);this._shimmedLocalStreams[l.id]=[l].concat(p)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const p=this._shimmedLocalStreams[u].indexOf(l);p!==-1&&this._shimmedLocalStreams[u].splice(p,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function rT(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return nT(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(g=>this._reverseStreams[g.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(g=>{if(this.getSenders().find(x=>x.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const g=new e.MediaStream(h.getTracks());this._streams[h.id]=g,this._reverseStreams[g.id]=h,h=g}r.apply(this,[h])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(C=>C===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[g.id];if(S)S.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new e.MediaStream([h]);this._streams[g.id]=C,this._reverseStreams[C.id]=g,this.addStream(C)}return this.getSenders().find(C=>C.track===h)};function s(f,h){let g=h.sdp;return Object.keys(f._reverseStreams||[]).forEach(y=>{const x=f._reverseStreams[y],S=f._streams[x.id];g=g.replace(new RegExp(S.id,"g"),x.id)}),new RTCSessionDescription({type:h.type,sdp:g})}function l(f,h){let g=h.sdp;return Object.keys(f._reverseStreams||[]).forEach(y=>{const x=f._reverseStreams[y],S=f._streams[x.id];g=g.replace(new RegExp(x.id,"g"),S.id)}),new RTCSessionDescription({type:h.type,sdp:g})}["createOffer","createAnswer"].forEach(function(f){const h=e.RTCPeerConnection.prototype[f],g={[f](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[S=>{const C=s(this,S);y[0].apply(null,[C])},S=>{y[1]&&y[1].apply(null,S)},arguments[2]]):h.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[f]=g[f]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const f=p.get.apply(this);return f.type===""?f:s(this,f)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(x=>{this._streams[x].getTracks().find(C=>h.track===C)&&(y=this._streams[x])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function d0(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function aT(e,t){Co(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const KC=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:aT,shimAddTrackRemoveTrack:rT,shimAddTrackRemoveTrackWithNative:nT,shimGetSendersWithDtmf:eT,shimGetUserMedia:Q2,shimMediaStream:J2,shimOnTrack:Z2,shimPeerConnection:d0,shimSenderReceiverGetStats:tT},Symbol.toStringTag,{value:"Module"}));function iT(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){vv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,p){u in l&&!(p in l)&&(l[p]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function cR(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function sT(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function f0(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(p=>{if(t.version<53&&!l)try{p.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;p.forEach((h,g)=>{p.set(g,Object.assign({},h,{type:n[h.type]||h.type}))})}return p}).then(l,u)}}function oT(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function lT(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Co(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function cT(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){vv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function uT(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function dT(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function fT(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function pT(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function hT(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const WC=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:dT,shimCreateAnswer:hT,shimCreateOffer:pT,shimGetDisplayMedia:cR,shimGetParameters:fT,shimGetUserMedia:iT,shimOnTrack:sT,shimPeerConnection:f0,shimRTCDataChannel:uT,shimReceiverGetStats:lT,shimRemoveStream:cT,shimSenderGetStats:oT},Symbol.toStringTag,{value:"Module"}));function mT(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function gT(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function yT(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(f,h){const g=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[g]);return h?(y.then(f,h),Promise.resolve()):y},t.createAnswer=function(f,h){const g=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[g]);return h?(y.then(f,h),Promise.resolve()):y};let u=function(p,f,h){const g=i.apply(this,[p]);return h?(g.then(f,h),Promise.resolve()):g};t.setLocalDescription=u,u=function(p,f,h){const g=s.apply(this,[p]);return h?(g.then(f,h),Promise.resolve()):g},t.setRemoteDescription=u,u=function(p,f,h){const g=l.apply(this,[p]);return h?(g.then(f,h),Promise.resolve()):g},t.addIceCandidate=u}function vT(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(xT(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function xT(e){return e&&e.video!==void 0?Object.assign({},e,{video:X2(e.video)}):e}function bT(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(vv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function ST(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function CT(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function AT(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const XC=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:AT,shimCallbacksAPI:yT,shimConstraints:xT,shimCreateOfferLegacy:CT,shimGetUserMedia:vT,shimLocalStreamsAPI:mT,shimRTCIceServerUrls:bT,shimRemoteStreamsAPI:gT,shimTrackEventTransceiver:ST},Symbol.toStringTag,{value:"Module"}));var Eg={exports:{}},QC;function uR(){return QC||(QC=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const p=s[u],f=t.matchPrefix(n,"a=rtpmap:"+p+" ")[0];if(f){const h=t.parseRtpMap(f),g=t.matchPrefix(n,"a=fmtp:"+p+" ");switch(h.parameters=g.length?t.parseFmtp(g[0]):{},h.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+p+" ").map(t.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(p=>{u.rtcpFeedback.find(h=>h.type===p.type&&h.parameter===p.parameter)||u.rtcpFeedback.push(p)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),p=u.length>0&&u[0].ssrc;let f;const h=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(S=>parseInt(S,10)));h.length>0&&h[0].length>1&&h[0][0]===p&&(f=h[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let x={ssrc:p,codecPayloadType:parseInt(y.parameters.apt,10)};p&&f&&(x.rtx={ssrc:f}),r.push(x),s&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:p,mechanism:l?"red+ulpfec":"red"},r.push(x))}}),r.length===0&&p&&r.push({ssrc:p});let g=t.matchPrefix(n,"b=");return g.length&&(g[0].indexOf("b=TIAS:")===0?g=parseInt(g[0].substring(7),10):g[0].indexOf("b=AS:")===0?g=parseInt(g[0].substring(5),10)*1e3*.95-2e3*8:g=void 0,r.forEach(y=>{y.maxBitrate=g})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const p=u[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(Eg)),Eg.exports}var ET=uR();const Cl=Ca(ET),dR=v2({__proto__:null,default:Cl},[ET]);function Rf(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=Cl.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Co(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function p0(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Co(e,"icecandidate",t=>{if(t.candidate){const n=Cl.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Lf(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const p=Cl.splitSections(u.sdp);return p.shift(),p.some(f=>{const h=Cl.parseMLine(f);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(u){const p=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const f=parseInt(p[1],10);return f!==f?-1:f},i=function(u){let p=65536;return t.browser==="firefox"&&(t.version<57?u===-1?p=16384:p=2147483637:t.version<60?p=t.version===57?65535:65536:p=2147483637),p},s=function(u,p){let f=65536;t.browser==="firefox"&&t.version===57&&(f=65535);const h=Cl.matchPrefix(u.sdp,"a=max-message-size:");return h.length>0?f=parseInt(h[0].substring(19),10):t.browser==="firefox"&&p!==-1&&(f=2147483637),f},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const p=r(arguments[0]),f=i(p),h=s(arguments[0],p);let g;f===0&&h===0?g=Number.POSITIVE_INFINITY:f===0||h===0?g=Math.max(f,h):g=Math.min(f,h);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return g}}),this._sctp=y}return l.apply(this,arguments)}}function $f(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],p=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&p>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},Co(e,"datachannel",r=>(t(r.channel,r.target),r))}function h0(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function m0(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Bf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function zf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const fR=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:m0,shimAddIceCandidateNullOrEmpty:Bf,shimConnectionState:h0,shimMaxMessageSize:Lf,shimParameterlessSetLocalDescription:zf,shimRTCIceCandidate:Rf,shimRTCIceCandidateRelayProtocol:p0,shimSendThrowTypeError:$f},Symbol.toStringTag,{value:"Module"}));function pR({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=W2,r=lR(e),i={browserDetails:r,commonShim:fR,extractVersion:cu,disableLog:sR,disableWarnings:oR,sdp:dR};switch(r.browser){case"chrome":if(!KC||!d0||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=KC,Bf(e,r),zf(e),Q2(e,r),J2(e),d0(e,r),Z2(e),rT(e,r),eT(e),tT(e),aT(e,r),Rf(e),p0(e),h0(e),Lf(e,r),$f(e),m0(e,r);break;case"firefox":if(!WC||!f0||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=WC,Bf(e,r),zf(e),iT(e,r),f0(e,r),sT(e),cT(e),oT(e),lT(e),uT(e),dT(e),fT(e),pT(e),hT(e),Rf(e),h0(e),Lf(e,r),$f(e);break;case"safari":if(!XC||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=XC,Bf(e,r),zf(e),bT(e),CT(e),yT(e),mT(e),gT(e),ST(e),vT(e),AT(e),Rf(e),p0(e),Lf(e,r),$f(e),m0(e,r);break;default:n("Unsupported browser!");break}return i}const JC=pR({window:typeof window>"u"?void 0:window});function Ao(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class wT{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),p=t.slice(l,u),f={__peerData:this._dataCount,n:s,data:p,total:i};n.push(f),l=u,s++}return this._dataCount++,n}}}function hR(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const wg=JC.default||JC,Zc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return wg.browserDetails.browser}getVersion(){return wg.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=wg.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},mR=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),PT=()=>Math.random().toString(36).slice(2),ZC={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class gR extends wT{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=ZC,this.browser=Zc.getBrowser(),this.browserVersion=Zc.getVersion(),this.pack=F2,this.unpack=Y2,this.supports=(function(){const n={browser:Zc.isBrowserSupported(),webRTC:Zc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(ZC),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Zc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=mR,this.randomToken=PT}}const lr=new gR,yR="PeerJS: ";class vR{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[yR,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var De=new vR,xv={},xR=Object.prototype.hasOwnProperty,Zn="~";function bu(){}Object.create&&(bu.prototype=Object.create(null),new bu().__proto__||(Zn=!1));function bR(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function TT(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new bR(n,r||e,i),l=Zn?Zn+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function Uf(e,t){--e._eventsCount===0?e._events=new bu:delete e._events[t]}function Un(){this._events=new bu,this._eventsCount=0}Un.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)xR.call(n,r)&&t.push(Zn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Un.prototype.listeners=function(t){var n=Zn?Zn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};Un.prototype.listenerCount=function(t){var n=Zn?Zn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Un.prototype.emit=function(t,n,r,i,s,l){var u=Zn?Zn+t:t;if(!this._events[u])return!1;var p=this._events[u],f=arguments.length,h,g;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),f){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,n),!0;case 3:return p.fn.call(p.context,n,r),!0;case 4:return p.fn.call(p.context,n,r,i),!0;case 5:return p.fn.call(p.context,n,r,i,s),!0;case 6:return p.fn.call(p.context,n,r,i,s,l),!0}for(g=1,h=new Array(f-1);g<f;g++)h[g-1]=arguments[g];p.fn.apply(p.context,h)}else{var y=p.length,x;for(g=0;g<y;g++)switch(p[g].once&&this.removeListener(t,p[g].fn,void 0,!0),f){case 1:p[g].fn.call(p[g].context);break;case 2:p[g].fn.call(p[g].context,n);break;case 3:p[g].fn.call(p[g].context,n,r);break;case 4:p[g].fn.call(p[g].context,n,r,i);break;default:if(!h)for(x=1,h=new Array(f-1);x<f;x++)h[x-1]=arguments[x];p[g].fn.apply(p[g].context,h)}}return!0};Un.prototype.on=function(t,n,r){return TT(this,t,n,r,!1)};Un.prototype.once=function(t,n,r){return TT(this,t,n,r,!0)};Un.prototype.removeListener=function(t,n,r,i){var s=Zn?Zn+t:t;if(!this._events[s])return this;if(!n)return Uf(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&Uf(this,s);else{for(var u=0,p=[],f=l.length;u<f;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&p.push(l[u]);p.length?this._events[s]=p.length===1?p[0]:p:Uf(this,s)}return this};Un.prototype.removeAllListeners=function(t){var n;return t?(n=Zn?Zn+t:t,this._events[n]&&Uf(this,n)):(this._events=new bu,this._eventsCount=0),this};Un.prototype.off=Un.prototype.removeListener;Un.prototype.addListener=Un.prototype.on;Un.prefixed=Zn;Un.EventEmitter=Un;xv=Un;var Eo={};Ao(Eo,"ConnectionType",()=>ms);Ao(Eo,"PeerErrorType",()=>Jt);Ao(Eo,"BaseConnectionErrorType",()=>g0);Ao(Eo,"DataConnectionErrorType",()=>bv);Ao(Eo,"SerializationType",()=>Ip);Ao(Eo,"SocketEventType",()=>hs);Ao(Eo,"ServerMessageType",()=>$n);var ms=(function(e){return e.Data="data",e.Media="media",e})({}),Jt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),g0=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),bv=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Ip=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),hs=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),$n=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const DT="1.5.5";class SR extends xv.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+DT),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),De.log("Server message received:",s)}catch{De.log("Invalid server message",i.data);return}this.emit(hs.Message,s)},this._socket.onclose=i=>{this._disconnected||(De.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(hs.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),De.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){De.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:$n.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(hs.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class NT{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===ms.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){De.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;De.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(De.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:$n.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":De.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(g0.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":De.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(g0.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":De.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},De.log("Listening for data channel"),t.ondatachannel=l=>{De.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},De.log("Listening for remote stream"),t.ontrack=l=>{De.log("Received remote stream");const u=l.streams[0],p=s.getConnection(n,r);if(p.type===ms.Media){const f=p;this._addStreamToMediaConnection(u,f)}}}cleanup(){De.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);De.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),De.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===ms.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:$n.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Jt.WebRTC,i),De.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Jt.WebRTC,r),De.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();De.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),De.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:$n.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Jt.WebRTC,i),De.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Jt.WebRTC,r),De.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;De.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),De.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(Jt.WebRTC,l),De.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){De.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),De.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Jt.WebRTC,n),De.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(De.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return De.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){De.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class OT extends xv.EventEmitter{emitError(t,n){De.error("Error:",n),this.emit("error",new CR(`${t}`,n))}}class CR extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class jT extends OT{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class Vf extends jT{static#e=this.ID_PREFIX="mc_";get type(){return ms.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Vf.ID_PREFIX+lr.randomToken(),this._negotiator=new NT(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{De.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{De.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){De.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case $n.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case $n.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:De.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){De.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class AR{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",DT),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){De.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==lr.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===lr.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw De.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Kf extends jT{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return ms.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||Kf.ID_PREFIX+PT(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new NT(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{De.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{De.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{De.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(bv.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case $n.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case $n.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:De.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Sv extends Kf{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Kf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return De.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Pg extends Sv{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new wT,this.serialization=Ip.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=Y2(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=hR(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=F2(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);De.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class ER extends Sv{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Ip.None}}class wR extends Sv{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=lr.chunkedMTU){this.emitError(bv.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Ip.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Cv extends OT{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:ER,json:wR,binary:Pg,"binary-utf8":Pg,default:Pg},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:lr.CLOUD_HOST,port:lr.CLOUD_PORT,path:"/",key:Cv.DEFAULT_KEY,token:lr.randomToken(),config:lr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==lr.CLOUD_HOST?this._options.secure=lr.isSecure():this._options.host==lr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&De.setLogFunction(this._options.logFunction),De.logLevel=this._options.debug||0,this._api=new AR(n),this._socket=this._createServerConnection(),!lr.supports.audioVideo&&!lr.supports.data){this._delayedAbort(Jt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!lr.validateId(r)){this._delayedAbort(Jt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Jt.ServerError,i))}_createServerConnection(){const t=new SR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(hs.Message,n=>{this._handleMessage(n)}),t.on(hs.Error,n=>{this._abort(Jt.SocketError,n)}),t.on(hs.Disconnected,()=>{this.disconnected||(this.emitError(Jt.Network,"Lost connection to server."),this.disconnect())}),t.on(hs.Close,()=>{this.disconnected||this._abort(Jt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case $n.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case $n.Error:this._abort(Jt.ServerError,r.msg);break;case $n.IdTaken:this._abort(Jt.UnavailableID,`ID "${this.id}" is taken`);break;case $n.InvalidKey:this._abort(Jt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case $n.Leave:De.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case $n.Expire:this.emitError(Jt.PeerUnavailable,`Could not connect to peer ${i}`);break;case $n.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),De.warn(`Offer received for existing Connection ID:${s}`)),r.type===ms.Media){const p=new Vf(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=p,this._addConnection(i,l),this.emit("call",p)}else if(r.type===ms.Data){const p=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=p,this._addConnection(i,l),this.emit("connection",p)}else{De.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const p of u)l.handleMessage(p);break}default:{if(!r){De.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):De.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){De.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Jt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){De.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Jt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){De.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new Vf(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){De.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){De.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(De.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;De.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)De.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)De.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Jt.ServerError,n))}}var eA=Cv;class PR{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new eA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{K("MULTIPLAYER","Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{K("MULTIPLAYER","Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new eA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{K("MULTIPLAYER","Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{K("MULTIPLAYER","Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode})}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{})}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(K("MULTIPLAYER","Received P2P data:",t),t.type){case"STATE_UPDATE":K("MULTIPLAYER","[P2P GUEST] Received state update with animations:",{hasActionAnimations:t.actionAnimations&&t.actionAnimations.length>0,hasSystemAnimations:t.systemAnimations&&t.systemAnimations.length>0,actionAnimationCount:t.actionAnimations?.length||0,systemAnimationCount:t.systemAnimations?.length||0}),this.emit("state_update_received",{state:t.state,actionAnimations:t.actionAnimations||[],systemAnimations:t.systemAnimations||[]});break;case"GUEST_ACTION":this.actionProcessor?await this.actionProcessor.processGuestAction(t.action):console.error("ActionProcessor not set - cannot process guest action");break;case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}broadcastState(t,n=[],r=[]){if(!this.isHost){console.warn("Only host can broadcast state");return}if(this.connection&&this.isConnected)try{K("MULTIPLAYER","[P2P HOST] Broadcasting state - checking player2 hand:",{player2HandSize:t.player2?.hand?.length||0,sampleCard:t.player2?.hand?.[0]||null,sampleInstanceId:t.player2?.hand?.[0]?.instanceId}),this.connection.send({type:"STATE_UPDATE",state:t,actionAnimations:n,systemAnimations:r,timestamp:Date.now()}),K("MULTIPLAYER","[P2P HOST] Broadcasted state update to guest",{hasAnimations:n.length+r.length>0,actionAnimationCount:n.length,systemAnimationCount:r.length})}catch(i){console.error("Failed to broadcast state:",i),this.emit("send_error",{error:i.message})}else console.warn("Cannot broadcast state - no connection available")}sendActionToHost(t,n){if(this.isHost){console.warn("Host should not send actions to itself");return}if(this.connection&&this.isConnected)try{this.connection.send({type:"GUEST_ACTION",action:{type:t,payload:n},timestamp:Date.now()}),K("MULTIPLAYER","[P2P GUEST] Sent action to host:",t)}catch(r){console.error("Failed to send action to host:",r),this.emit("send_error",{error:r.message})}else console.warn("Cannot send action - no connection to host")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?this.emit("state_sync_received",{state:t}):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const Qn=new PR,y0=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},TR=e=>({preGame:"Pre-Game Setup",gameInitializing:"Initialising Game",deckSelection:"Deck Selection",droneSelection:"Drone Selection",placement:"Placement Phase",determineFirstPlayer:"Determining First Player",energyReset:"Energy Reset",mandatoryDiscard:"Mandatory Discard",optionalDiscard:"Optional Discard",initialDraw:"Drawing Cards",draw:"Drawing Cards",allocateShields:"Shield Allocation",mandatoryDroneRemoval:"Mandatory Drone Removal",deployment:"Deployment Phase",deploymentComplete:"Deployment Complete",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,DR=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],NR=["deployment","action"],OR=e=>DR.includes(e),tA=e=>NR.includes(e),wi=()=>{const[e,t]=E.useState(Ue.getState()),[n,r]=E.useState(Qn.getStatus());E.useEffect(()=>{Ue.setupP2PIntegration(Qn)},[]),E.useEffect(()=>Ue.subscribe(G=>{G.type!=="render_complete"&&t(Ue.getState())}),[]),E.useEffect(()=>Qn.subscribe(G=>{r(Qn.getStatus())}),[]);const i=E.useCallback(()=>Ue.isMyTurn(),[e.currentPlayer,e.gameMode]),s=E.useCallback(()=>Ue.getLocalPlayerId(),[e.gameMode]),l=E.useCallback(()=>Ue.getOpponentPlayerId(),[e.gameMode]),u=E.useCallback(()=>e.gameMode!=="local",[e.gameMode]),p=E.useCallback(()=>u()&&!i(),[u,i]),f=E.useCallback(()=>Ue.getLocalPlayerState(),[e.gameMode]),h=E.useCallback(()=>Ue.getOpponentPlayerState(),[e.gameMode]),g=E.useCallback(I=>Ue.isLocalPlayer(I),[e.gameMode]),y=E.useCallback(()=>Ue.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),x=E.useCallback(()=>{const I=Ue.getOpponentPlacedSections();return e.turnPhase==="placement"&&I.some(G=>G!==null)&&console.error(" CRITICAL - getOpponentPlacedSections returning:",I,"from gameState:",e.opponentPlacedSections),I},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=E.useCallback((I,G)=>{Ue.updatePlayers(I,G)},[]),C=E.useCallback((I,G)=>{Ue.updatePlayerState(I,G)},[]),A=E.useCallback((I,G)=>{Ue.setPlayerStates(I,G)},[]),w=E.useCallback(I=>{Ue.setFirstPasserOfPreviousRound(I)},[]),P=E.useCallback(I=>{Ue.setFirstPlayerOverride(I)},[]),T=E.useCallback(I=>{Ue.setPassInfo(I)},[]),N=E.useCallback(I=>{Ue.updatePassInfo(I)},[]),_=E.useCallback((I,G,ie)=>{Ue.addLogEntry(I,G,ie)},[]),j=E.useCallback(()=>{Ue.reset()},[]),k=E.useCallback(()=>{Ue.endGame()},[]),z=E.useCallback(I=>{Ue.setWinner(I)},[]),F=E.useCallback(async(I,G)=>await Ue.processAction(I,G),[]),M=E.useCallback(()=>Ue.isActionInProgress(),[]),R=E.useCallback(()=>Ue.getActionQueueLength(),[]),U=E.useCallback(()=>{Ue.clearActionQueue()},[]),W=E.useCallback(()=>OR(e.turnPhase),[e.turnPhase]),Z=E.useCallback(()=>tA(e.turnPhase),[e.turnPhase]),Q=E.useCallback(async(I,G)=>{const ie=e.turnPhase;return tA(ie)?await F(I,G):(console.warn(` Simultaneous phase action ${I} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${I} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:ie,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,F]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:p,getLocalPlayerState:f,getOpponentPlayerState:h,isLocalPlayer:g,getLocalPlacedSections:y,getOpponentPlacedSections:x,updatePlayers:S,updatePlayerState:C,setPlayerStates:A,setFirstPasserOfPreviousRound:w,setFirstPlayerOverride:P,setPassInfo:T,updatePassInfo:N,addLogEntry:_,resetGame:j,endGame:k,setWinner:z,processAction:F,isActionInProgress:M,getActionQueueLength:R,clearActionQueue:U,isSimultaneousPhase:W,isSequentialPhase:Z,routeAction:Q,gameStateManager:Ue,p2pManager:Qn}},nA=()=>({unplacedSections:[...["bridge","powerCell","droneControlHub"]],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)});class mu{constructor(){if(mu.instance)return mu.instance;mu.instance=this,this.PRE_GAME_PHASES=["deckSelection","droneSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw","determineFirstPlayer"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1}initialize(t,n,r,i){if(!this.isInitialized){if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=on.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;s&&l&&u&&i.initialize(u,l,s,n,t)}this.setupEventListeners(),this.isInitialized=!0}}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="deckSelection"){if(this.gameStateManager.get("gameMode")==="guest")return;this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let r={};t==="deckSelection"&&(r={...nA()}),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(r).length>0&&this.gameStateManager.setState(r,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(this.gameStateManager.get("gameMode")==="guest")return;if(this.actionProcessor){const s=this.actionProcessor.applyPhaseCommitments(t);if(t==="deckSelection"){const u=this.gameStateManager.get("commitments")?.deckSelection;if(K("DRONE_SELECTION","Deck commitments:",{player1HasDrones:!!u?.player1?.drones,player2HasDrones:!!u?.player2?.drones,player1DroneCount:u?.player1?.drones?.length,player2DroneCount:u?.player2?.drones?.length,player1Drones:u?.player1?.drones,player2Drones:u?.player2?.drones}),u){if(u.player1?.drones){const p=this.extractDronesFromDeck(u.player1.drones),f=qC(p,2);s.player1DroneSelectionTrio=f.droneSelectionTrio,s.player1DroneSelectionPool=f.droneSelectionPool,K("PHASE_TRANSITIONS",` Player1 deck has ${p.length} drones for selection`),K("DRONE_SELECTION","Created player1DroneSelectionTrio:",f.droneSelectionTrio.map(h=>h.name))}else console.warn(" No drones found in player1 deck commitment");if(u.player2?.drones){const p=this.extractDronesFromDeck(u.player2.drones),f=qC(p,2);s.player2DroneSelectionTrio=f.droneSelectionTrio,s.player2DroneSelectionPool=f.droneSelectionPool,K("PHASE_TRANSITIONS",` Player2 deck has ${p.length} drones for selection`),K("DRONE_SELECTION","Created player2DroneSelectionTrio:",f.droneSelectionTrio.map(h=>h.name))}else console.warn(" No drones found in player2 deck commitment")}else console.error(" No deck commitments found - cannot initialize drone selection")}Object.keys(s).length>0&&this.gameStateManager.setState(s,"COMMITMENT_APPLICATION",`${t}_completion`)}const i=this.getNextPhase(t);i&&(this.isSequentialPhase(i)?this.initiateSequentialPhase(i):await this.transitionToPhase(i))}checkSequentialPhaseCompletion(t,n){t.gameMode==="guest"||n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(K("PHASE_TRANSITIONS",` GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(t.gameMode==="guest"||n!=="COMMITMENT_UPDATE"||!t.commitments)return;K("PHASE_TRANSITIONS"," checkSimultaneousPhaseCompletion called:",{currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){K("PHASE_TRANSITIONS"," Early return: Not a simultaneous phase",{simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){K("PHASE_TRANSITIONS"," Early return: No commitments for current phase",{allCommitments:Object.keys(t.commitments)});return}const s=i.player1?.completed&&i.player2?.completed;K("PHASE_TRANSITIONS"," Checking completion status:",{player1Complete:i.player1?.completed,player2Complete:i.player2?.completed}),s&&(this.emit("bothPlayersComplete",{phase:r,commitments:i}),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t,n){this.isProcessingAutomaticPhase=!0;let r=null;try{t==="gameInitializing"?r=await this.processGameInitializingPhase(n):t==="energyReset"?r=await this.processAutomaticEnergyResetPhase(n):t==="draw"?r=await this.processAutomaticDrawPhase(n):t==="determineFirstPlayer"?r=await this.processAutomaticFirstPlayerPhase(n):console.warn(` No handler for automatic phase: ${t}`),r?(K("PHASE_TRANSITIONS",` GameFlowManager: Transitioning from automatic phase '${t}' to '${r}'`),await this.transitionToPhase(r)):console.warn(` No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(t){try{const{performAutomaticDraw:n}=await Pr(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-D55XxgbR.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error(" GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),K("PHASE_TRANSITIONS"," Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return K("PHASE_TRANSITIONS"," Automatic draw completed, returning next phase:",s),s}catch(n){console.error(" Error during automatic draw phase:",n)}}async processAutomaticFirstPlayerPhase(t){try{const n=await this.actionProcessor.processFirstPlayerDetermination();if(K("PHASE_TRANSITIONS"," First player determination completed:",n),this.animationManager&&n.stateUpdates){const i=this.gameStateManager.getLocalPlayerId(),p={animationName:"PHASE_ANNOUNCEMENT",payload:{phaseText:n.stateUpdates.firstPlayerOfRound===i?"YOU ARE FIRST PLAYER":"OPPONENT IS FIRST PLAYER",phaseName:"firstPlayerResult",timestamp:Date.now()}};await this.actionProcessor.executeAndCaptureAnimations([p],!0),K("PHASE_TRANSITIONS"," [FIRST PLAYER] Second announcement complete")}this.emit("phaseTransition",{newPhase:"determineFirstPlayer",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const r=this.getNextPhase("determineFirstPlayer");return K("PHASE_TRANSITIONS"," Automatic first player determination completed, returning next phase:",r),r}catch(n){console.error(" Error during automatic first player determination:",n)}}async processAutomaticEnergyResetPhase(t){try{if(!this.gameStateManager){console.error(" GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await Pr(async()=>{const{default:C}=await Promise.resolve().then(()=>QI);return{default:C}},void 0)).default.getInstance(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={player1:n.placedSections,player2:n.opponentPlacedSections},p=Ie.readyDronesAndRestoreShields(n.player1,n.player2,u),f=Ie.readyDronesAndRestoreShields(n.player2,n.player1,u),h={...p,energy:s.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?s.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:s.totals.deploymentBudget},g={...f,energy:l.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?l.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:l.totals.deploymentBudget},y=this.roundNumber>=2?s.totals.shieldsPerTurn:0,x=this.roundNumber>=2?l.totals.shieldsPerTurn:0;await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:h,player2:g,shieldsToAllocate:y,opponentShieldsToAllocate:x}}),K("PHASE_TRANSITIONS",` Energy reset complete - Player 1: ${h.energy} energy, Player 2: ${g.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const S=this.getNextPhase("energyReset");return K("PHASE_TRANSITIONS"," Automatic energy reset completed, returning next phase:",S),S}catch(n){console.error(" Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(t){try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(r=>setTimeout(r,100));const n=this.getNextPhase("gameInitializing");return K("PHASE_TRANSITIONS"," Game initialization completed, returning next phase:",n),n}catch(n){throw console.error(" Error during game initialization:",n),n}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn(" GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"energyReset":return!0;case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;case"deploymentComplete":return!1;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return t.roundNumber<2?!1:t.shieldsToAllocate>0||t.opponentShieldsToAllocate>0}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber}):console.warn(" ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1,this.gameStateManager.setState({roundNumber:1,turn:1}))),K("PHASE_TRANSITIONS",` GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"&&(r=nA()),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.queueAction({type:"phaseTransition",payload:{newPhase:t,resetPassInfo:!0}}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){await this.processAutomaticPhase(t,n);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,K("PHASE_TRANSITIONS",` GameFlowManager: Starting round ${this.roundNumber}`),this.gameStateManager.setState({roundNumber:this.roundNumber,turn:this.roundNumber},"ROUND_START","gameFlowManagerMetadata");const t=this.ROUND_PHASES.find(n=>this.isPhaseRequired(n));t?await this.transitionToPhase(t):(console.warn(" No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}extractDronesFromDeck(t){if(!t||!Array.isArray(t))return console.warn(" Invalid drone names provided to extractDronesFromDeck"),[];const n=t.map(r=>{const i=Ze.find(s=>s.name===r);return i||console.warn(` Drone "${r}" not found in collection`),i}).filter(Boolean);return K("PHASE_TRANSITIONS",` Extracted ${n.length} drones from deck: ${n.map(r=>r.name).join(", ")}`),n}}const Wf=new mu,jR=!0,_R={features:{aiHandDebug:jR}},rA={DAMAGE:"Deals damage to a target. Can be normal damage (blocked by shields) or piercing damage (ignores shields). Can target single units or use filters to affect multiple targets matching criteria.",PIERCING:"A damage modifier that causes damage to ignore shields and directly damage hull. Used with the DAMAGE effect type.",DESTROY:"Immediately destroys target(s). Can target a single unit, all units in a lane, or filtered subsets based on stats like speed or hull.",DESTROY_SELF:"Destroys the unit that triggered this effect. Commonly used with AFTER_ATTACK for kamikaze-style mechanics.",DESTROY_UPGRADE:"Removes an applied upgrade from an enemy drone type, reverting any stat bonuses or abilities granted by that upgrade.",HEAL_HULL:"Restores hull points to a damaged target, up to its maximum hull value. Cannot exceed max hull. Works on both drones and ship sections.",HEAL_SHIELDS:"Restores shield points to a target, up to its maximum shield value. Only affects units with shield capacity.",HEAL:"Generic healing effect that can restore hull points to damaged units. Similar to HEAL_HULL but may have different targeting scope.",MODIFY_STAT:"Applies a temporary or permanent modification to a drone's stats. Temporary mods last until end of turn. Permanent mods persist for the game. Can modify attack, speed, hull, shields, or cost.",PERMANENT_STAT_MOD:"Permanently increases a stat on the affected unit. The bonus persists for the entire game and stacks with other modifiers.",MODIFY_DRONE_BASE:"Permanently modifies the base stats of a drone type. Affects all drones of that type on the board and future deployments. Used by Upgrade cards.",CONDITIONAL_MODIFY_STAT:"Modifies a stat only when a specific condition is met. The condition is checked every time stats are calculated, so bonuses apply dynamically when conditions change.",CONDITIONAL_MODIFY_STAT_SCALING:"Similar to CONDITIONAL_MODIFY_STAT but the bonus scales based on how many times the condition is met. For example, +1 attack per damaged ship section.",FLANKING_BONUS:"Grants stat bonuses when a drone is positioned in an outer lane (Lane 1 or Lane 3). Encourages tactical positioning.",DRAW:"Draws cards from your deck into your hand. If the deck is empty, automatically shuffles the discard pile to create a new deck.",GAIN_ENERGY:"Adds energy to the acting player's energy pool, up to their maximum energy capacity determined by ship sections.",SEARCH_AND_DRAW:"Allows viewing multiple cards from the top of your deck and selecting specific cards to draw. Useful for finding key cards. Can include filters to only show certain card types.",READY_DRONE:"Removes exhaustion from a drone, allowing it to attack or use abilities again this turn. Does not work on drones that haven't been exhausted.",SINGLE_MOVE:"Moves one friendly drone from its current lane to an adjacent lane. The drone becomes exhausted unless the effect specifies otherwise.",MULTI_MOVE:"Moves up to a specified number of friendly drones from one lane to another. Provides tactical repositioning for multiple units at once.",CREATE_TOKENS:"Creates drone tokens (non-card drones) in specified lanes. Tokens function like deployed drones but weren't played from hand. Can bypass CPU limits if specified.",AFTER_ATTACK:"Triggers an effect after a drone completes an attack. Commonly used for self-destruct mechanics (like Kamikaze Drone) or stat bonuses that trigger from combat.",REPEATING_EFFECT:'Executes a set of effects multiple times based on a condition. For example, "Draw 1 card and gain 1 energy" repeated once for each damaged ship section.',GRANT_KEYWORD:"Gives a special keyword ability to a drone. Keywords provide special combat behaviors like PIERCING (ignore shields), DEFENDER (doesn't exhaust when blocking), or GUARDIAN (protects ship section).",REALLOCATE_SHIELDS:"Allows moving shield tokens between drones in a lane or removing them entirely. Used during the shield allocation phase.",BONUS_DAMAGE_VS_SHIP:"Grants additional damage when attacking enemy ship sections. Used by bomber-type drones to make them more effective against ships.",LOG:"Internal effect type for adding messages to the game log. Used for tracking game events and animations."},aA={DRONE:"Targets a single drone on the battlefield. Can specify affinity (friendly/enemy/any), location (specific lanes or any lane), and custom filters (like exhausted only).",LANE:"Targets an entire lane, affecting all eligible units within it. Can specify if it targets friendly or enemy lanes.",SHIP_SECTION:"Targets one of the player's ship sections. Used for effects that heal or damage ship hulls directly.",DRONE_CARD:"Targets a drone type in your active pool (not a specific drone on the field). Used by Upgrade cards to permanently enhance all drones of a chosen type.",APPLIED_UPGRADE:"Targets an active upgrade that has been applied to a drone type. Used by upgrade removal/destruction effects."},iA={SHIP_SECTION_HULL_DAMAGED:'Checks if a ship section in the specified location has taken hull damage. Returns true if the section is in "damaged" or "critical" status.',OWN_DAMAGED_SECTIONS:"Counts how many of your ship sections are damaged or critical. Used for scaling effects that get stronger as your ship takes damage.",FLANKING:"Checks if a drone is positioned in an outer lane (Lane 1 or Lane 3). Used by the Skirmisher Drone for positioning-based bonuses."},sA={PIERCING:"Damage from this source ignores shields and directly damages hull. Useful against heavily-shielded targets.",DEFENDER:"This drone does not exhaust when intercepting enemy attacks. Allows it to block multiple times per turn.",GUARDIAN:"While this drone is active in a lane, the ship section in that lane cannot be directly targeted by attacks. Enemies must destroy the Guardian first.",JAMMER:"While this drone is in a lane, opponent card effects can only target this drone. Provides protection for other units in the same lane."},oA={SINGLE:"Affects only the single targeted unit. Most precise form of targeting.",LANE:"Affects all eligible units in the target lane. Can hit both friendly and enemy units depending on the effect.",FILTERED:"Affects all units in the target area that match specific criteria, such as speed >= 5 or hull <= 2. Allows conditional area effects."},kR={GTE:"Greater Than or Equal To (>=). Matches units where the stat is at least the specified value.",LTE:"Less Than or Equal To (<=). Matches units where the stat is at most the specified value.",EQ:"Equal To (=). Matches units where the stat exactly equals the specified value.",GT:"Greater Than (>). Matches units where the stat exceeds the specified value.",LT:"Less Than (<). Matches units where the stat is below the specified value."},MR={FRIENDLY:"Can only target your own units or lanes.",ENEMY:"Can only target opponent units or lanes.",ANY:"Can target either friendly or enemy units/lanes. Provides maximum flexibility."},IR={ANY_LANE:"Can target units in any lane on the battlefield.",SAME_LANE:"Can only affect units in the same lane as the source or trigger.",ADJACENT_LANE:"Can only affect units in lanes directly next to the source lane."},lA={AFTER_ATTACK:{validSubEffects:["DESTROY_SELF","PERMANENT_STAT_MOD"],requiredParameters:["subEffect"],optionalParameters:[],implementation:"gameLogic.js:processAfterAttackAbilities",notes:"Triggered after a drone completes an attack. SubEffect determines behavior."},DAMAGE:{validParameters:{value:"number (damage amount)",damageType:["PIERCING","undefined (normal)"],scope:["SINGLE","FILTERED","LANE"],filter:"object (when scope is FILTERED)"},requiredParameters:["value"],implementation:"gameLogic.js:resolveUnifiedDamageEffect",notes:"Can target drones or ship sections. Piercing ignores shields."},DESTROY:{validParameters:{scope:["SINGLE","FILTERED","LANE"],filter:"object (when scope is FILTERED)"},requiredParameters:["scope"],implementation:"gameLogic.js:resolveDestroyEffect",notes:"FILTERED scope requires filter object with stat, comparison, and value."},HEAL_HULL:{validParameters:{value:"number (amount to heal)",goAgain:"boolean (optional)"},requiredParameters:["value"],implementation:"gameLogic.js:resolveUnifiedHealEffect",notes:"Cannot exceed maximum hull. Works on drones and ship sections."},HEAL_SHIELDS:{validParameters:{value:"number (amount to heal)",goAgain:"boolean (optional)"},requiredParameters:["value"],implementation:"gameLogic.js:resolveHealShieldsEffect",notes:"Cannot exceed maximum shields. Only affects units with shield capacity."},MODIFY_STAT:{validParameters:{mod:{stat:["attack","speed","cost","hull","shields"],value:"number (positive or negative)",type:["temporary","permanent"]},goAgain:"boolean (optional)"},requiredParameters:["mod","mod.stat","mod.value","mod.type"],implementation:"gameLogic.js:resolveModifyStatEffect",notes:"Temporary mods last until end of turn. Permanent mods persist."},CONDITIONAL_MODIFY_STAT:{validParameters:{mod:{stat:["attack","speed"],value:"number"},condition:{type:["SHIP_SECTION_HULL_DAMAGED","OWN_DAMAGED_SECTIONS"],location:["SAME_LANE"]}},requiredParameters:["mod","condition"],implementation:"statsCalculator.js:calculateEffectiveStats",notes:"Checked every time stats are calculated. Bonus applies when condition is true."},CONDITIONAL_MODIFY_STAT_SCALING:{validParameters:{mod:{stat:["attack","speed"],value:"number (per instance)"},condition:{type:["OWN_DAMAGED_SECTIONS"]}},requiredParameters:["mod","condition"],implementation:"statsCalculator.js:calculateEffectiveStats",notes:"Bonus scales by count. E.g., +1 attack per damaged section."},FLANKING_BONUS:{validParameters:{mods:[{stat:["attack","speed"],value:"number"}]},requiredParameters:["mods"],implementation:"statsCalculator.js:calculateEffectiveStats",notes:"Applies bonuses when drone is in Lane 1 or Lane 3."},PERMANENT_STAT_MOD:{validParameters:{mod:{stat:["attack","speed","hull","shields"],value:"number",type:'string (always "permanent")'}},requiredParameters:["mod"],implementation:"gameLogic.js:processAfterAttackAbilities",notes:"Adds permanent modification to drone. Persists for entire game."},MODIFY_DRONE_BASE:{validParameters:{mod:{stat:["attack","speed","hull","shields","limit","cost"],value:"number (can be negative)",abilityToAdd:"object (for adding new abilities)"},goAgain:"boolean (optional)"},requiredParameters:["mod"],implementation:"gameLogic.js:resolveUpgradeEffect",notes:"Modifies base drone type. Affects all drones of that type."},DRAW:{validParameters:{value:"number (cards to draw)",goAgain:"boolean (optional)"},requiredParameters:["value"],implementation:"gameLogic.js:resolveUnifiedDrawEffect",notes:"Draws from deck. Auto-shuffles discard if deck empty."},GAIN_ENERGY:{validParameters:{value:"number (energy to gain)",goAgain:"boolean (optional)"},requiredParameters:["value"],implementation:"gameLogic.js:resolveEnergyEffect",notes:"Cannot exceed maximum energy from ship sections."},READY_DRONE:{validParameters:{goAgain:"boolean (optional)"},requiredParameters:[],implementation:"gameLogic.js:resolveReadyDroneEffect",notes:"Removes exhaustion. Target must be exhausted."},SEARCH_AND_DRAW:{validParameters:{searchCount:"number (cards to view)",drawCount:"number (cards to draw)",shuffleAfter:"boolean",filter:{type:"string (card type to filter by)"}},requiredParameters:["searchCount","drawCount","shuffleAfter"],implementation:"gameLogic.js:resolveSearchAndDrawEffect",notes:"Returns needsCardSelection for player to choose cards."},SINGLE_MOVE:{validParameters:{properties:["DO_NOT_EXHAUST"],goAgain:"boolean (optional)"},requiredParameters:[],implementation:"gameLogic.js:resolveMovementEffect",notes:"Returns needsCardSelection for player to select drone and destination."},MULTI_MOVE:{validParameters:{count:"number (max drones to move)",properties:["DO_NOT_EXHAUST"],goAgain:"boolean (optional)"},requiredParameters:["count"],implementation:"gameLogic.js:resolveMovementEffect",notes:"Returns needsCardSelection for player to select drones and destination."},CREATE_TOKENS:{validParameters:{tokenName:"string (name of drone type)",locations:["array of lane IDs: lane1, lane2, lane3"],ignoresCPULimit:"boolean"},requiredParameters:["tokenName","locations"],implementation:"gameLogic.js:resolveCreateTokensEffect",notes:"Creates drone tokens without playing from hand. Respects maxPerLane restrictions."},REPEATING_EFFECT:{validParameters:{effects:"array of effect objects",condition:["OWN_DAMAGED_SECTIONS"],goAgain:"boolean (optional)"},requiredParameters:["effects","condition"],implementation:"gameLogic.js:resolveMultiEffect",notes:"Repeats sub-effects based on condition count."},GRANT_KEYWORD:{validParameters:{keyword:["PIERCING","DEFENDER","GUARDIAN","JAMMER"]},requiredParameters:["keyword"],implementation:"statsCalculator.js:calculateEffectiveStats",notes:"Adds special keyword ability to drone."},BONUS_DAMAGE_VS_SHIP:{validParameters:{value:"number (bonus damage)"},requiredParameters:["value"],implementation:"statsCalculator.js:calculateEffectiveStats",notes:"Adds bonus damage when attacking ship sections."},DESTROY_UPGRADE:{validParameters:{},requiredParameters:[],implementation:"gameLogic.js:resolveDestroyUpgradeEffect",notes:"Removes applied upgrade from target drone type."}},cA={DRONE:{validParameters:{affinity:["FRIENDLY","ENEMY","ANY"],location:["ANY_LANE","SAME_LANE"],custom:["EXHAUSTED","DAMAGED_HULL"]},requiredParameters:["affinity","location"],notes:"Targets single drone. Custom filters for specific states."},LANE:{validParameters:{affinity:["FRIENDLY","ENEMY","ANY"],location:["ANY_LANE"]},requiredParameters:["affinity"],notes:"Targets all units in a lane."},SHIP_SECTION:{validParameters:{affinity:["FRIENDLY","ENEMY"]},requiredParameters:["affinity"],notes:"Targets ship section for healing or damage."},DRONE_CARD:{validParameters:{},requiredParameters:[],notes:"Targets drone type in pool. Used by upgrades."},APPLIED_UPGRADE:{validParameters:{affinity:["ENEMY","FRIENDLY"]},requiredParameters:["affinity"],notes:"Targets active upgrade for removal."}},RR={validComparisons:["GTE","LTE","EQ","GT","LT"],filterableStats:["speed","attack","hull","shields","cost"],filterableProperties:["type"],structure:{stat:"string (stat name)",comparison:"string (comparison operator)",value:"number or string"},notes:"Used with FILTERED scope for DAMAGE and DESTROY effects."},uA={SHIP_SECTION_HULL_DAMAGED:{validParameters:{location:["SAME_LANE"]},returns:"boolean",notes:"Checks if ship section is damaged or critical."},OWN_DAMAGED_SECTIONS:{validParameters:{},returns:"number (count of damaged sections)",notes:"Counts damaged/critical ship sections for scaling effects."}},LR={notes:{PIERCING:"Checked during damage calculation. Bypasses shields.",DEFENDER:"Checked during interception. Prevents exhaustion.",GUARDIAN:"Checked during targeting. Protects ship section.",JAMMER:"Checked during card effect targeting. Forces target this drone."}},_T={validScopes:["SINGLE","LANE","FILTERED"],usedWith:["DESTROY","DAMAGE","HEAL_SHIELDS"],notes:{SINGLE:"Affects only the targeted unit.",LANE:"Affects all units in target lane.",FILTERED:"Requires filter object. Affects units matching filter criteria."}},$R={DO_NOT_EXHAUST:{usedWith:["SINGLE_MOVE","MULTI_MOVE"],effect:"Moved drones do not become exhausted.",notes:"Allows tactical repositioning without penalty."},goAgain:{usedWith:"any effect",effect:"Player does not end turn after playing this card.",notes:"Allows chaining multiple actions in one turn."},ignoresCPULimit:{usedWith:["CREATE_TOKENS"],effect:"Created tokens do not count against CPU limit.",notes:"Allows token creation even when at max drones."}},BR=()=>{const e=new Map,t=(r,i)=>{if(!r||!r.type)return;const s=r.type;e.has(s)||e.set(s,{type:s,parameters:new Set,examples:[],usedIn:new Set,targetingTypes:new Set});const l=e.get(s);Object.keys(r).forEach(u=>{u!=="type"&&l.parameters.add(u)}),l.usedIn.add(i.type),l.examples.length<3&&l.examples.push({name:i.name,effect:JSON.parse(JSON.stringify(r)),description:i.description})};Ot.forEach(r=>{if(r.effect){if(t(r.effect,{type:"Card",name:r.name,description:r.description}),r.targeting){const i=e.get(r.effect.type);i&&i.targetingTypes.add(r.targeting.type)}r.effect.type==="REPEATING_EFFECT"&&r.effect.effects&&r.effect.effects.forEach(i=>{t(i,{type:"Card (Repeating)",name:r.name,description:r.description})})}}),Ze.forEach(r=>{r.abilities&&Array.isArray(r.abilities)&&r.abilities.forEach(i=>{i.effect&&(t(i.effect,{type:"Drone Ability",name:`${r.name} - ${i.name}`,description:i.description}),i.effect.subEffect&&t(i.effect.subEffect,{type:"Drone Ability (Sub-effect)",name:`${r.name} - ${i.name}`,description:i.description})),i.effects&&Array.isArray(i.effects)&&i.effects.forEach(s=>{t(s,{type:"Drone Ability (Triggered)",name:`${r.name} - ${i.name}`,description:i.description})})})});const n={};return e.forEach((r,i)=>{n[i]={type:r.type,parameters:Array.from(r.parameters),examples:r.examples,usedIn:Array.from(r.usedIn),targetingTypes:Array.from(r.targetingTypes)}}),n},zR=()=>{const e=new Map,t=(r,i)=>{if(!r||!r.type)return;const s=r.type;e.has(s)||e.set(s,{type:s,affinityOptions:new Set,locationOptions:new Set,customFilters:new Set,examples:[],usedByEffects:new Set});const l=e.get(s);r.affinity&&l.affinityOptions.add(r.affinity),r.location&&l.locationOptions.add(r.location),r.custom&&Array.isArray(r.custom)&&r.custom.forEach(u=>l.customFilters.add(u)),l.examples.length<3&&l.examples.push({name:i.name,targeting:JSON.parse(JSON.stringify(r)),description:i.description}),i.effectType&&l.usedByEffects.add(i.effectType)};Ot.forEach(r=>{r.targeting&&t(r.targeting,{name:r.name,description:r.description,effectType:r.effect?.type})}),Ze.forEach(r=>{r.abilities&&Array.isArray(r.abilities)&&r.abilities.forEach(i=>{i.targeting&&t(i.targeting,{name:`${r.name} - ${i.name}`,description:i.description,effectType:i.effect?.type})})});const n={};return e.forEach((r,i)=>{n[i]={type:r.type,affinityOptions:Array.from(r.affinityOptions),locationOptions:Array.from(r.locationOptions),customFilters:Array.from(r.customFilters),examples:r.examples,usedByEffects:Array.from(r.usedByEffects)}}),n},UR=()=>{const e={droneStats:new Set,shipStats:new Set,modificationTypes:new Set,valueRanges:{}};return Ot.forEach(t=>{if((t.effect?.type==="MODIFY_STAT"||t.effect?.type==="MODIFY_DRONE_BASE")&&t.effect.mod?.stat){const n=t.effect.mod.stat;e.droneStats.add(n),t.effect.mod.type&&e.modificationTypes.add(t.effect.mod.type),t.effect.mod.value!==void 0&&(e.valueRanges[n]||(e.valueRanges[n]={min:t.effect.mod.value,max:t.effect.mod.value,values:[]}),e.valueRanges[n].min=Math.min(e.valueRanges[n].min,t.effect.mod.value),e.valueRanges[n].max=Math.max(e.valueRanges[n].max,t.effect.mod.value),e.valueRanges[n].values.push(t.effect.mod.value))}}),Ze.forEach(t=>{t.abilities&&Array.isArray(t.abilities)&&t.abilities.forEach(n=>{n.effect?.mod?.stat&&e.droneStats.add(n.effect.mod.stat),n.effect?.type==="CONDITIONAL_MODIFY_STAT"&&n.effect.mod?.stat&&e.droneStats.add(n.effect.mod.stat),n.effect?.type==="CONDITIONAL_MODIFY_STAT_SCALING"&&n.effect.mod?.stat&&e.droneStats.add(n.effect.mod.stat),n.effect?.type==="FLANKING_BONUS"&&n.effect.mods&&n.effect.mods.forEach(r=>{r.stat&&e.droneStats.add(r.stat)})})}),{droneStats:Array.from(e.droneStats).sort(),shipStats:Array.from(e.shipStats).sort(),modificationTypes:Array.from(e.modificationTypes).sort(),valueRanges:e.valueRanges}},HR=()=>{const e=new Map,t=(r,i)=>{e.has(r)||e.set(r,{keyword:r,grantedBy:[],description:null}),e.get(r).grantedBy.push(i)};Ze.forEach(r=>{r.abilities&&Array.isArray(r.abilities)&&r.abilities.forEach(i=>{i.effect?.type==="GRANT_KEYWORD"&&i.effect.keyword&&t(i.effect.keyword,{type:"Drone Ability",name:`${r.name} - ${i.name}`,description:i.description})})}),Ot.forEach(r=>{if(r.effect?.type==="MODIFY_DRONE_BASE"&&r.effect.mod?.abilityToAdd){const i=r.effect.mod.abilityToAdd;i.effect?.type==="GRANT_KEYWORD"&&i.effect.keyword&&t(i.effect.keyword,{type:"Card (Upgrade)",name:r.name,description:r.description})}});const n={};return e.forEach((r,i)=>{n[i]=r}),n},GR=()=>{const e=new Map;Ze.forEach(n=>{n.abilities&&Array.isArray(n.abilities)&&n.abilities.forEach(r=>{if(r.effect?.condition){const i=r.effect.condition.type;e.has(i)||e.set(i,{type:i,parameters:new Set,examples:[]});const s=e.get(i);Object.keys(r.effect.condition).forEach(l=>{l!=="type"&&s.parameters.add(l)}),s.examples.length<2&&s.examples.push({name:`${n.name} - ${r.name}`,condition:JSON.parse(JSON.stringify(r.effect.condition)),description:r.description})}})}),Ot.forEach(n=>{if(n.effect?.condition){const r=n.effect.condition;e.has(r)||e.set(r,{type:r,parameters:new Set,examples:[]});const i=e.get(r);i.examples.length<2&&i.examples.push({name:n.name,condition:r,description:n.description})}});const t={};return e.forEach((n,r)=>{t[r]={type:n.type,parameters:Array.from(n.parameters),examples:n.examples}}),t},qR=()=>{const e={stats:new Set,comparisons:new Set,values:[],examples:[]};return Ot.forEach(t=>{if(t.effect?.filter){const n=t.effect.filter;n.stat&&e.stats.add(n.stat),n.comparison&&e.comparisons.add(n.comparison),n.value!==void 0&&e.values.push(n.value),n.type&&e.stats.add("type"),e.examples.length<5&&e.examples.push({name:t.name,filter:JSON.parse(JSON.stringify(n)),description:t.description})}}),{stats:Array.from(e.stats).sort(),comparisons:Array.from(e.comparisons).sort(),valueRange:e.values.length>0?{min:Math.min(...e.values),max:Math.max(...e.values)}:null,examples:e.examples}},YR=()=>{const e=new Map;Ot.forEach(n=>{if(n.effect?.scope){const r=n.effect.scope;e.has(r)||e.set(r,{scope:r,effectTypes:new Set,examples:[]});const i=e.get(r);i.effectTypes.add(n.effect.type),i.examples.length<3&&i.examples.push({name:n.name,effect:n.effect.type,description:n.description})}});const t={};return e.forEach((n,r)=>{t[r]={scope:n.scope,effectTypes:Array.from(n.effectTypes),examples:n.examples}}),t},FR=e=>{const t={};return Object.entries(e).forEach(([n,r])=>{t[n]={...r,description:rA[n]||null,hasDescription:!!rA[n],technicalDetails:lA[n]||null,hasTechnicalDetails:!!lA[n]}}),t},VR=e=>{const t={};return Object.entries(e).forEach(([n,r])=>{t[n]={...r,description:aA[n]||null,hasDescription:!!aA[n],technicalDetails:cA[n]||null,hasTechnicalDetails:!!cA[n]}}),t},KR=e=>{const t={};return Object.entries(e).forEach(([n,r])=>{t[n]={...r,description:iA[n]||null,hasDescription:!!iA[n],technicalDetails:uA[n]||null,hasTechnicalDetails:!!uA[n]}}),t},WR=e=>{const t={};return Object.entries(e).forEach(([n,r])=>{t[n]={...r,description:sA[n]||null,hasDescription:!!sA[n],technicalDetails:LR.notes?.[n]||null}}),t},XR=e=>{const t={};return Object.entries(e).forEach(([n,r])=>{t[n]={...r,description:oA[n]||null,hasDescription:!!oA[n],technicalDetails:_T.notes?.[n]||null}}),t},QR=e=>{const t={effectTypes:[],targetingTypes:[],conditions:[],keywords:[],scopes:[]};return Object.entries(e.effectTypes).forEach(([n,r])=>{r.hasDescription||t.effectTypes.push({type:n,usedIn:r.usedIn,exampleCount:r.examples.length})}),Object.entries(e.targetingTypes).forEach(([n,r])=>{r.hasDescription||t.targetingTypes.push({type:n,usedByEffects:r.usedByEffects,exampleCount:r.examples.length})}),Object.entries(e.conditions).forEach(([n,r])=>{r.hasDescription||t.conditions.push({type:n,exampleCount:r.examples.length})}),Object.entries(e.keywords).forEach(([n,r])=>{r.hasDescription||t.keywords.push({keyword:n,grantedByCount:r.grantedBy.length})}),Object.entries(e.scopes).forEach(([n,r])=>{r.hasDescription||t.scopes.push({scope:n,effectTypeCount:r.effectTypes.length})}),t},JR=e=>(Object.values(e.targetingTypes).forEach(t=>{t.relatedEffects=t.usedByEffects.map(n=>({type:n,description:e.effectTypes[n]?.description||null}))}),Object.values(e.effectTypes).forEach(t=>{t.relatedTargeting=t.targetingTypes.map(n=>({type:n,description:e.targetingTypes[n]?.description||null}))}),Object.entries(e.effectTypes).forEach(([t,n])=>{if(n.technicalDetails?.validParameters?.condition){const r=n.technicalDetails.validParameters.condition.type;r&&(n.relatedConditions=(Array.isArray(r)?r:[r]).map(i=>({type:i,description:e.conditions[i]?.description||null})))}}),Object.entries(e.keywords).forEach(([t,n])=>{n.relatedEffects=n.grantedBy.map(r=>({sourceType:r.type,sourceName:r.name}))}),e),kT=()=>{const e=BR(),t=zR(),n=GR(),r=HR(),i=YR(),s=FR(e),l=VR(t),u=KR(n),p=WR(r),f=XR(i);let h={effectTypes:s,targetingTypes:l,modifiableStats:UR(),keywords:p,conditions:u,filters:qR(),scopes:f,metadata:{totalCards:Ot.length,totalDrones:Ze.length,generatedAt:new Date().toISOString()}};return h=JR(h),h.missingDescriptions=QR(h),h.technicalPatterns={filterPatterns:RR,scopePatterns:_T,specialProperties:$R,comparisonOperators:kR,affinityOptions:MR,locationOptions:IR},h},ZR=()=>{const e=kT();return{totalEffectTypes:Object.keys(e.effectTypes).length,totalTargetingTypes:Object.keys(e.targetingTypes).length,totalKeywords:Object.keys(e.keywords).length,totalConditions:Object.keys(e.conditions).length,modifiableStats:e.modifiableStats.droneStats.length,effectTypesList:Object.keys(e.effectTypes).sort(),targetingTypesList:Object.keys(e.targetingTypes).sort(),keywordsList:Object.keys(e.keywords).sort()}},MT=({onClose:e})=>{const[t,n]=E.useState("overview"),r=E.useMemo(()=>kT(),[]),i=E.useMemo(()=>ZR(),[]),s=[{id:"overview",label:"Overview"},{id:"effects",label:"Effect Types"},{id:"targeting",label:"Targeting"},{id:"stats",label:"Stat Modifications"},{id:"keywords",label:"Keywords"},{id:"conditions",label:"Conditions"},{id:"filters",label:"Filters"},{id:"scopes",label:"Scopes"}],l=()=>d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-2",children:"Game Mechanics Glossary"}),d.jsx("p",{className:"text-gray-300 mb-4",children:"This glossary is dynamically generated from the game data files. It provides comprehensive documentation of all available effects, targeting patterns, and parameters for developers creating new cards and abilities."})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-semibold mb-2",children:"Data Sources"}),d.jsxs("ul",{className:"text-gray-300 text-sm space-y-1",children:[d.jsxs("li",{children:[" ",r.metadata.totalCards," Action Cards"]}),d.jsxs("li",{children:[" ",r.metadata.totalDrones," Drone Types"]}),d.jsxs("li",{children:[" Generated: ",new Date(r.metadata.generatedAt).toLocaleTimeString()]})]})]}),d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-semibold mb-2",children:"Available Mechanics"}),d.jsxs("ul",{className:"text-gray-300 text-sm space-y-1",children:[d.jsxs("li",{children:[" ",i.totalEffectTypes," Effect Types"]}),d.jsxs("li",{children:[" ",i.totalTargetingTypes," Targeting Types"]}),d.jsxs("li",{children:[" ",i.totalKeywords," Keywords"]}),d.jsxs("li",{children:[" ",i.totalConditions," Condition Types"]})]})]})]}),d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-semibold mb-3",children:"Quick Reference - All Items"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"text-gray-400 font-semibold mb-2",children:["Effect Types (",i.effectTypesList.length,"):"]}),d.jsx("div",{className:"text-gray-300 space-y-1 max-h-96 overflow-y-auto pr-2",children:i.effectTypesList.map(C=>d.jsxs("div",{children:[" ",C]},C))})]}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-gray-400 font-semibold mb-2",children:["Targeting Types (",i.targetingTypesList.length,"):"]}),d.jsx("div",{className:"text-gray-300 space-y-1 max-h-96 overflow-y-auto pr-2",children:i.targetingTypesList.map(C=>d.jsxs("div",{children:[" ",C]},C))})]})]})]}),r.missingDescriptions&&Object.values(r.missingDescriptions).some(C=>C.length>0)&&d.jsxs("div",{className:"bg-red-900 bg-opacity-20 border border-red-500 p-4 rounded",children:[d.jsx("h4",{className:"text-red-400 font-semibold mb-3",children:" Missing Descriptions"}),d.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"The following mechanics exist in the game but do not have developer-written descriptions yet:"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.missingDescriptions.effectTypes.length>0&&d.jsxs("div",{children:[d.jsxs("p",{className:"text-red-300 font-semibold mb-2",children:["Effect Types (",r.missingDescriptions.effectTypes.length,"):"]}),d.jsx("div",{className:"text-gray-300 space-y-1",children:r.missingDescriptions.effectTypes.map(C=>d.jsxs("div",{className:"text-xs",children:[" ",C.type," ",d.jsxs("span",{className:"text-gray-500",children:["(",C.exampleCount," examples)"]})]},C.type))})]}),r.missingDescriptions.targetingTypes.length>0&&d.jsxs("div",{children:[d.jsxs("p",{className:"text-red-300 font-semibold mb-2",children:["Targeting Types (",r.missingDescriptions.targetingTypes.length,"):"]}),d.jsx("div",{className:"text-gray-300 space-y-1",children:r.missingDescriptions.targetingTypes.map(C=>d.jsxs("div",{className:"text-xs",children:[" ",C.type]},C.type))})]}),r.missingDescriptions.conditions.length>0&&d.jsxs("div",{children:[d.jsxs("p",{className:"text-red-300 font-semibold mb-2",children:["Conditions (",r.missingDescriptions.conditions.length,"):"]}),d.jsx("div",{className:"text-gray-300 space-y-1",children:r.missingDescriptions.conditions.map(C=>d.jsxs("div",{className:"text-xs",children:[" ",C.type]},C.type))})]}),r.missingDescriptions.keywords.length>0&&d.jsxs("div",{children:[d.jsxs("p",{className:"text-red-300 font-semibold mb-2",children:["Keywords (",r.missingDescriptions.keywords.length,"):"]}),d.jsx("div",{className:"text-gray-300 space-y-1",children:r.missingDescriptions.keywords.map(C=>d.jsxs("div",{className:"text-xs",children:[" ",C.keyword]},C.keyword))})]})]})]})]}),u=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400",children:"Effect Types"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"All available effect types extracted from cards and drone abilities"})]}),Object.entries(r.effectTypes).sort(([C],[A])=>C.localeCompare(A)).map(([C,A])=>d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-bold text-lg mb-2",children:C}),A.description&&d.jsx("div",{className:"bg-gray-900 p-3 rounded mb-3 border-l-4 border-cyan-500",children:d.jsx("p",{className:"text-gray-300 text-sm italic",children:A.description})}),!A.hasDescription&&d.jsx("div",{className:"bg-red-900 bg-opacity-20 border border-red-500 p-2 rounded mb-3",children:d.jsx("p",{className:"text-red-300 text-xs",children:" Missing developer description"})}),A.technicalDetails&&d.jsxs("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 p-3 rounded mb-3",children:[d.jsx("h5",{className:"text-blue-300 font-semibold text-sm mb-2",children:"Technical Details"}),A.technicalDetails.implementation&&d.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:[d.jsx("span",{className:"font-semibold",children:"Implementation:"})," ",A.technicalDetails.implementation]}),A.technicalDetails.requiredParameters&&A.technicalDetails.requiredParameters.length>0&&d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-xs",children:"Required Parameters:"}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:A.technicalDetails.requiredParameters.map(w=>d.jsx("span",{className:"bg-red-900 text-red-300 px-2 py-1 rounded text-xs",children:w},w))})]}),A.technicalDetails.validSubEffects&&d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-xs",children:"Valid Sub-Effects:"}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:A.technicalDetails.validSubEffects.map(w=>d.jsx("span",{className:"bg-gray-900 text-green-300 px-2 py-1 rounded text-xs",children:w},w))})]}),A.technicalDetails.validParameters&&d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-xs",children:"Valid Parameters:"}),d.jsx("pre",{className:"text-gray-300 text-xs mt-1 overflow-x-auto bg-gray-900 p-2 rounded",children:JSON.stringify(A.technicalDetails.validParameters,null,2)})]}),A.technicalDetails.notes&&d.jsx("div",{className:"text-xs text-gray-400 italic mt-2",children:A.technicalDetails.notes})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3 text-sm",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400 font-semibold",children:"Used in:"})," ",d.jsx("span",{className:"text-gray-300",children:A.usedIn.join(", ")})]}),A.targetingTypes.length>0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400 font-semibold",children:"Targeting:"})," ",d.jsx("span",{className:"text-gray-300",children:A.targetingTypes.join(", ")})]})]}),A.relatedTargeting&&A.relatedTargeting.length>0&&d.jsxs("div",{className:"mb-3",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Related Targeting Types:"}),d.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:A.relatedTargeting.map(w=>d.jsxs("button",{onClick:()=>n("targeting"),className:"bg-gray-900 text-blue-300 px-2 py-1 rounded text-xs hover:bg-gray-700 transition-colors",title:w.description||"No description",children:[w.type," "]},w.type))})]}),A.relatedConditions&&A.relatedConditions.length>0&&d.jsxs("div",{className:"mb-3",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Related Conditions:"}),d.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:A.relatedConditions.map(w=>d.jsxs("button",{onClick:()=>n("conditions"),className:"bg-gray-900 text-purple-300 px-2 py-1 rounded text-xs hover:bg-gray-700 transition-colors",title:w.description||"No description",children:[w.type," "]},w.type))})]}),A.parameters.length>0&&d.jsxs("div",{className:"mb-3",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Discovered Parameters:"}),d.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:A.parameters.map(w=>d.jsx("span",{className:"bg-gray-900 text-cyan-300 px-2 py-1 rounded text-xs",children:w},w))})]}),A.examples.length>0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Examples:"}),d.jsx("div",{className:"mt-2 space-y-2",children:A.examples.map((w,P)=>d.jsxs("div",{className:"bg-gray-900 p-2 rounded text-xs",children:[d.jsx("div",{className:"text-cyan-300 font-semibold",children:w.name}),d.jsx("div",{className:"text-gray-400 italic mb-1",children:w.description}),d.jsx("pre",{className:"text-gray-300 overflow-x-auto",children:JSON.stringify(w.effect,null,2)})]},P))})]})]},C))]}),p=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400",children:"Targeting Types"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Available targeting patterns and their configuration options"})]}),Object.entries(r.targetingTypes).sort(([C],[A])=>C.localeCompare(A)).map(([C,A])=>d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-bold text-lg mb-2",children:C}),A.description&&d.jsx("div",{className:"bg-gray-900 p-3 rounded mb-3 border-l-4 border-cyan-500",children:d.jsx("p",{className:"text-gray-300 text-sm italic",children:A.description})}),!A.hasDescription&&d.jsx("div",{className:"bg-red-900 bg-opacity-20 border border-red-500 p-2 rounded mb-3",children:d.jsx("p",{className:"text-red-300 text-xs",children:" Missing developer description"})}),A.technicalDetails&&d.jsxs("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 p-3 rounded mb-3",children:[d.jsx("h5",{className:"text-blue-300 font-semibold text-sm mb-2",children:"Technical Details"}),A.technicalDetails.validParameters&&d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-xs",children:"Valid Parameters:"}),d.jsx("pre",{className:"text-gray-300 text-xs mt-1 overflow-x-auto bg-gray-900 p-2 rounded",children:JSON.stringify(A.technicalDetails.validParameters,null,2)})]}),A.technicalDetails.notes&&d.jsx("div",{className:"text-xs text-gray-400 italic mt-2",children:A.technicalDetails.notes})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3 text-sm",children:[A.affinityOptions.length>0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400 font-semibold",children:"Affinity:"}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:A.affinityOptions.map(w=>d.jsx("span",{className:"bg-gray-900 text-green-300 px-2 py-1 rounded text-xs",children:w},w))})]}),A.locationOptions.length>0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400 font-semibold",children:"Location:"}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:A.locationOptions.map(w=>d.jsx("span",{className:"bg-gray-900 text-blue-300 px-2 py-1 rounded text-xs",children:w},w))})]}),A.customFilters.length>0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400 font-semibold",children:"Custom Filters:"}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:A.customFilters.map(w=>d.jsx("span",{className:"bg-gray-900 text-yellow-300 px-2 py-1 rounded text-xs",children:w},w))})]})]}),A.relatedEffects&&A.relatedEffects.length>0&&d.jsxs("div",{className:"mb-3",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Related Effect Types:"}),d.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:A.relatedEffects.map(w=>d.jsxs("button",{onClick:()=>n("effects"),className:"bg-gray-900 text-cyan-300 px-2 py-1 rounded text-xs hover:bg-gray-700 transition-colors",title:w.description||"No description",children:[w.type," "]},w.type))})]}),A.usedByEffects.length>0&&d.jsxs("div",{className:"mb-3",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Used by effects:"}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:A.usedByEffects.map(w=>d.jsx("span",{className:"bg-gray-900 text-cyan-300 px-2 py-1 rounded text-xs",children:w},w))})]}),A.examples.length>0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Examples:"}),d.jsx("div",{className:"mt-2 space-y-2",children:A.examples.map((w,P)=>d.jsxs("div",{className:"bg-gray-900 p-2 rounded text-xs",children:[d.jsx("div",{className:"text-cyan-300 font-semibold",children:w.name}),d.jsx("div",{className:"text-gray-400 italic mb-1",children:w.description}),d.jsx("pre",{className:"text-gray-300",children:JSON.stringify(w.targeting,null,2)})]},P))})]})]},C))]}),f=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400",children:"Stat Modifications"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"All modifiable stats and their value ranges"})]}),d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-semibold mb-3",children:"Modifiable Drone Stats"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:r.modifiableStats.droneStats.map(C=>d.jsx("span",{className:"bg-gray-900 text-green-300 px-3 py-1 rounded",children:C},C))})]}),d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-semibold mb-3",children:"Modification Types"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:r.modifiableStats.modificationTypes.map(C=>d.jsx("span",{className:"bg-gray-900 text-blue-300 px-3 py-1 rounded",children:C},C))})]}),d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-semibold mb-3",children:"Value Ranges by Stat"}),d.jsx("div",{className:"space-y-2",children:Object.entries(r.modifiableStats.valueRanges).map(([C,A])=>d.jsxs("div",{className:"bg-gray-900 p-3 rounded",children:[d.jsx("div",{className:"text-gray-300 font-semibold",children:C}),d.jsxs("div",{className:"text-sm text-gray-400",children:["Range: ",A.min," to ",A.max]}),d.jsxs("div",{className:"text-xs text-gray-500",children:["Values used: ",[...new Set(A.values)].sort((w,P)=>w-P).join(", ")]})]},C))})]})]}),h=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400",children:"Keywords"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Special keywords granted to drones and their sources"})]}),Object.entries(r.keywords).sort(([C],[A])=>C.localeCompare(A)).map(([C,A])=>d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-bold text-lg mb-3",children:C}),A.description&&d.jsx("div",{className:"bg-gray-900 p-3 rounded mb-3 border-l-4 border-cyan-500",children:d.jsx("p",{className:"text-gray-300 text-sm italic",children:A.description})}),!A.hasDescription&&d.jsx("div",{className:"bg-red-900 bg-opacity-20 border border-red-500 p-2 rounded mb-3",children:d.jsx("p",{className:"text-red-300 text-xs",children:" Missing developer description"})}),A.technicalDetails&&d.jsxs("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 p-3 rounded mb-3",children:[d.jsx("h5",{className:"text-blue-300 font-semibold text-sm mb-2",children:"Technical Behavior"}),d.jsx("div",{className:"text-xs text-gray-400 italic",children:A.technicalDetails})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Granted by:"}),d.jsx("div",{className:"mt-2 space-y-2",children:A.grantedBy.map((w,P)=>d.jsxs("div",{className:"bg-gray-900 p-2 rounded",children:[d.jsxs("div",{className:"text-cyan-300 font-semibold text-sm",children:[w.name," ",d.jsxs("span",{className:"text-gray-500",children:["(",w.type,")"]})]}),d.jsx("div",{className:"text-gray-400 text-xs italic",children:w.description})]},P))})]})]},C)),Object.keys(r.keywords).length===0&&d.jsx("div",{className:"text-gray-400 text-center py-8",children:"No keywords found in current game data."})]}),g=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400",children:"Conditions"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Conditional triggers and requirements for effects"})]}),Object.entries(r.conditions).sort(([C],[A])=>C.localeCompare(A)).map(([C,A])=>d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-bold text-lg mb-2",children:C}),A.description&&d.jsx("div",{className:"bg-gray-900 p-3 rounded mb-3 border-l-4 border-cyan-500",children:d.jsx("p",{className:"text-gray-300 text-sm italic",children:A.description})}),!A.hasDescription&&d.jsx("div",{className:"bg-red-900 bg-opacity-20 border border-red-500 p-2 rounded mb-3",children:d.jsx("p",{className:"text-red-300 text-xs",children:" Missing developer description"})}),A.technicalDetails&&d.jsxs("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 p-3 rounded mb-3",children:[d.jsx("h5",{className:"text-blue-300 font-semibold text-sm mb-2",children:"Technical Details"}),A.technicalDetails.validParameters&&d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-xs",children:"Valid Parameters:"}),d.jsx("pre",{className:"text-gray-300 text-xs mt-1 overflow-x-auto bg-gray-900 p-2 rounded",children:JSON.stringify(A.technicalDetails.validParameters,null,2)})]}),A.technicalDetails.returns&&d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-xs",children:"Returns:"})," ",d.jsx("span",{className:"text-purple-300 text-xs",children:A.technicalDetails.returns})]}),A.technicalDetails.notes&&d.jsx("div",{className:"text-xs text-gray-400 italic mt-2",children:A.technicalDetails.notes})]}),A.parameters.length>0&&d.jsxs("div",{className:"mb-3",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Discovered Parameters:"}),d.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:A.parameters.map(w=>d.jsx("span",{className:"bg-gray-900 text-purple-300 px-2 py-1 rounded text-xs",children:w},w))})]}),A.examples.length>0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Examples:"}),d.jsx("div",{className:"mt-2 space-y-2",children:A.examples.map((w,P)=>d.jsxs("div",{className:"bg-gray-900 p-2 rounded text-xs",children:[d.jsx("div",{className:"text-cyan-300 font-semibold",children:w.name}),d.jsx("div",{className:"text-gray-400 italic mb-1",children:w.description}),d.jsx("pre",{className:"text-gray-300",children:JSON.stringify(w.condition,null,2)})]},P))})]})]},C)),Object.keys(r.conditions).length===0&&d.jsx("div",{className:"text-gray-400 text-center py-8",children:"No conditions found in current game data."})]}),y=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400",children:"Filters"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Filter patterns for scoped and conditional effects"})]}),d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-semibold mb-3",children:"Filterable Stats"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:r.filters.stats.map(C=>d.jsx("span",{className:"bg-gray-900 text-green-300 px-3 py-1 rounded",children:C},C))})]}),d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-semibold mb-3",children:"Comparison Operators"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:r.filters.comparisons.map(C=>d.jsx("span",{className:"bg-gray-900 text-blue-300 px-3 py-1 rounded",children:C},C))})]}),r.filters.valueRange&&d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-semibold mb-3",children:"Value Range"}),d.jsxs("div",{className:"text-gray-300",children:[r.filters.valueRange.min," to ",r.filters.valueRange.max]})]}),r.filters.examples.length>0&&d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-semibold mb-3",children:"Examples"}),d.jsx("div",{className:"space-y-2",children:r.filters.examples.map((C,A)=>d.jsxs("div",{className:"bg-gray-900 p-2 rounded text-xs",children:[d.jsx("div",{className:"text-cyan-300 font-semibold",children:C.name}),d.jsx("div",{className:"text-gray-400 italic mb-1",children:C.description}),d.jsx("pre",{className:"text-gray-300",children:JSON.stringify(C.filter,null,2)})]},A))})]})]}),x=()=>d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400",children:"Scopes"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"Area-of-effect scope patterns for multi-target effects"})]}),Object.entries(r.scopes).sort(([C],[A])=>C.localeCompare(A)).map(([C,A])=>d.jsxs("div",{className:"bg-gray-800 p-4 rounded border border-gray-700",children:[d.jsx("h4",{className:"text-cyan-400 font-bold text-lg mb-3",children:C}),A.description&&d.jsx("div",{className:"bg-gray-900 p-3 rounded mb-3 border-l-4 border-cyan-500",children:d.jsx("p",{className:"text-gray-300 text-sm italic",children:A.description})}),!A.hasDescription&&d.jsx("div",{className:"bg-red-900 bg-opacity-20 border border-red-500 p-2 rounded mb-3",children:d.jsx("p",{className:"text-red-300 text-xs",children:" Missing developer description"})}),A.technicalDetails&&d.jsxs("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 p-3 rounded mb-3",children:[d.jsx("h5",{className:"text-blue-300 font-semibold text-sm mb-2",children:"Technical Behavior"}),d.jsx("div",{className:"text-xs text-gray-400 italic",children:A.technicalDetails})]}),d.jsxs("div",{className:"mb-3",children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Used with effect types:"}),d.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:A.effectTypes.map(w=>d.jsxs("button",{onClick:()=>n("effects"),className:"bg-gray-900 text-cyan-300 px-2 py-1 rounded text-xs hover:bg-gray-700 transition-colors",children:[w," "]},w))})]}),A.examples.length>0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-400 font-semibold text-sm",children:"Examples:"}),d.jsx("div",{className:"mt-2 space-y-2",children:A.examples.map((w,P)=>d.jsxs("div",{className:"bg-gray-900 p-2 rounded text-xs",children:[d.jsx("div",{className:"text-cyan-300 font-semibold",children:w.name}),d.jsx("div",{className:"text-gray-400 italic",children:w.description}),d.jsxs("div",{className:"text-gray-500",children:["Effect: ",w.effect]})]},P))})]})]},C)),Object.keys(r.scopes).length===0&&d.jsx("div",{className:"text-gray-400 text-center py-8",children:"No scopes found in current game data."})]}),S=()=>{switch(t){case"overview":return l();case"effects":return u();case"targeting":return p();case"stats":return f();case"keywords":return h();case"conditions":return g();case"filters":return y();case"scopes":return x();default:return l()}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gray-900 rounded-lg shadow-2xl border-2 border-cyan-500 w-full max-w-6xl max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-cyan-400",children:"Game Mechanics Glossary"}),d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl font-bold px-3",children:""})]}),d.jsx("div",{className:"border-b border-gray-700 px-4",children:d.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:s.map(C=>d.jsx("button",{onClick:()=>n(C.id),className:`px-4 py-2 font-semibold transition-colors whitespace-nowrap ${t===C.id?"text-cyan-400 border-b-2 border-cyan-400":"text-gray-400 hover:text-gray-300"}`,children:C.label},C.id))})}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:S()}),d.jsx("div",{className:"p-4 border-t border-gray-700 text-center text-sm text-gray-500",children:"This glossary is automatically generated from game data. All mechanics are extracted dynamically."})]})})},us=({text:e,className:t})=>{const n=E.useRef(null),r=E.useRef(null);return E.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,p;t.includes("font-orbitron")?(u=8,p=16):(u=8,p=12);let f=p;for(s.style.fontSize=f+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&f>u;)f-=.5,s.style.fontSize=f+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),d.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:d.jsx("span",{ref:r,className:t,children:e})})};function dA(){const{gameStateManager:e}=wi(),[t,n]=E.useState(0),[r,i]=E.useState(!1);E.useEffect(()=>{const u=()=>{const f=2e4+Math.random()*2e4;return setTimeout(()=>{n(g=>g+1),u()},f)},p=u();return()=>{clearTimeout(p)}},[]),E.useEffect(()=>{on.reset(),e?.actionProcessor&&e.actionProcessor.clearQueue(),e?.gameFlowManager&&e.gameFlowManager.reset()},[e]);const s=()=>{e.setState({appState:"lobby",gameMode:"local"})},l=()=>{e.setState({appState:"lobby",gameMode:"multiplayer"})};return d.jsxs("div",{className:"body-font",style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",minHeight:"100vh",color:"#ffffff",padding:"60px 20px 20px 20px",boxSizing:"border-box",position:"relative"},children:[d.jsxs("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[d.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"2rem"},children:[d.jsx("h1",{className:"menu-rgb-split-red heading-font","aria-hidden":"true",style:{position:"absolute",fontSize:"4rem",margin:0,textAlign:"center",color:"#ff0000",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0},children:"EREMOS"},`rgb-red-${t}`),d.jsx("h1",{className:"menu-rgb-split-blue heading-font","aria-hidden":"true",style:{position:"absolute",fontSize:"4rem",margin:0,textAlign:"center",color:"#00ffff",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0},children:"EREMOS"},`rgb-blue-${t}`),d.jsx("h1",{className:"menu-gradient-cycle menu-title-glitch-distort menu-title-opacity-glitch animate-pulse heading-font",style:{fontSize:"4rem",margin:0,textAlign:"center",background:"linear-gradient(90deg, #00ff88, #00d4aa, #00a0cc, #0088ff, #00aaff, #00ffff, #00d4aa, #00ff88)",backgroundSize:"300% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))",textShadow:"0 0 20px rgba(0, 255, 136, 0.4), 0 0 40px rgba(0, 136, 255, 0.3)",position:"relative",zIndex:1},children:"EREMOS"},`title-${t}`)]}),d.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"the wilderness left when civilization departs"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",alignItems:"center"},children:[d.jsxs("button",{onClick:s,className:"btn-continue",style:{width:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:[d.jsx(us,{text:"SINGLE PLAYER",className:"uppercase tracking-wider font-semibold"}),d.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),d.jsxs("button",{onClick:l,className:"btn-continue",style:{width:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:[d.jsx(us,{text:"MULTIPLAYER",className:"uppercase tracking-wider font-semibold"}),d.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]}),d.jsxs("button",{onClick:()=>e.setState({appState:"testingSetup"}),className:"btn-reset",style:{width:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:[d.jsx(us,{text:"TESTING MODE",className:"uppercase tracking-wider font-semibold"}),d.jsx("div",{className:"body-font",style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"Dev Scenario Setup"})]}),d.jsxs("button",{onClick:()=>e.setState({appState:"deckBuilder"}),className:"btn-continue",style:{width:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:[d.jsx(us,{text:"DECK BUILDER",className:"uppercase tracking-wider font-semibold"}),d.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"Build Your Deck"})]}),d.jsxs("button",{onClick:()=>i(!0),className:"btn-info",style:{width:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:[d.jsx(us,{text:"MECHANICS GLOSSARY",className:"uppercase tracking-wider font-semibold"}),d.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"Developer Reference"})]}),d.jsxs("button",{onClick:()=>e.setState({appState:"modalShowcase"}),className:"btn-info",style:{width:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:[d.jsx(us,{text:"MODAL SHOWCASE",className:"uppercase tracking-wider font-semibold"}),d.jsx("div",{className:"body-font",style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"Dev Preview Tool"})]})]})]}),r&&d.jsx(MT,{onClose:()=>i(!1)})]})}const Xf=[{name:"TEST AI",description:"Used for test scenarios.",difficulty:"Easy",imagePath:"/AI/TEST.png",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",difficulty:"Normal",imagePath:"/AI/Manticore.png",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}],e3=({onGameStart:e,onBack:t})=>{const[n,r]=E.useState("menu"),[i,s]=E.useState(""),[l,u]=E.useState(""),[p,f]=E.useState("disconnected"),[h,g]=E.useState(""),[y,x]=E.useState(!1),[S,C]=E.useState(!1);E.useEffect(()=>Qn.subscribe(z=>{switch(z.type){case"room_created":s(z.data.roomCode),r("waiting"),f("waiting"),x(!1);break;case"joined_room":s(z.data.roomCode),r("connected"),f("connected"),x(!1);break;case"connected":r("connected"),f("connected"),x(!1),g("");break;case"disconnected":f("disconnected"),r("menu"),s(""),g("");break;case"connection_error":g(z.data.error),x(!1),r("menu");break}}),[]);const A=async()=>{x(!0),g(""),r("host");try{const k=await Qn.hostGame();K("MULTIPLAYER","Room created with code:",k)}catch(k){console.error("Failed to host game:",k),g(k.message),x(!1),r("menu")}},w=async()=>{if(l.length!==6){g("Please enter a 6-digit room code");return}x(!0),g(""),r("join");try{await Qn.joinGame(l)}catch(k){console.error("Failed to join game:",k),g(k.message),x(!1),r("menu")}},P=async()=>{try{await navigator.clipboard.writeText(i),C(!0),setTimeout(()=>C(!1),2e3)}catch(k){console.error("Failed to copy room code:",k)}},T=()=>{p==="connected"&&e()},N=()=>{Qn.disconnect(),r("menu"),s(""),u(""),g("")},_=()=>{p!=="disconnected"&&N(),t()},j=()=>{switch(p){case"waiting":return d.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[d.jsx(yl,{className:"w-4 h-4 animate-spin"}),d.jsx("span",{children:"Waiting for opponent..."})]});case"connected":return d.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[d.jsx(RC,{className:"w-4 h-4"}),d.jsx("span",{children:"Connected to opponent"})]});case"disconnected":default:return d.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[d.jsx(KM,{className:"w-4 h-4"}),d.jsx("span",{children:"Not connected"})]})}};return d.jsx("div",{style:{maxWidth:"500px",width:"100%",margin:"0 auto"},children:d.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20",style:{backgroundColor:"rgba(15, 23, 42, 0.95)",borderColor:"#a855f7",boxShadow:"0 20px 50px rgba(168, 85, 247, 0.2)"},children:[d.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[d.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffffff",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[d.jsx(FM,{className:"w-8 h-8 text-purple-400"}),"Multiplayer Lobby"]}),d.jsx("div",{style:{marginBottom:"1rem"},children:j()})]}),h&&d.jsx("div",{style:{backgroundColor:"rgba(127, 29, 29, 0.5)",border:"1px solid #ef4444",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"1rem"},children:d.jsx("p",{style:{color:"#fca5a5",fontSize:"0.875rem"},children:h})}),n==="menu"&&d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[d.jsxs("button",{onClick:A,disabled:y,className:"btn-continue",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y?d.jsx(yl,{className:"w-5 h-5 animate-spin"}):d.jsx(EM,{className:"w-5 h-5"}),"Host Game"]}),d.jsx("div",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.875rem"},children:"or"}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[d.jsx("input",{type:"text",placeholder:"Enter 6-digit room code",value:l,onChange:k=>u(k.target.value.replace(/[^0-9]/g,"").slice(0,6)),style:{width:"100%",backgroundColor:"#1e293b",border:"1px solid #4b5563",borderRadius:"0.5rem",padding:"0.75rem 1rem",color:"#ffffff",textAlign:"center",fontSize:"1.125rem",letterSpacing:"0.1em"},maxLength:6}),d.jsxs("button",{onClick:w,disabled:y||l.length!==6,className:"btn-confirm",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y?d.jsx(yl,{className:"w-5 h-5 animate-spin"}):d.jsx(RC,{className:"w-5 h-5"}),"Join Game"]})]})]}),n==="waiting"&&d.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[d.jsxs("div",{style:{backgroundColor:"#1e293b",borderRadius:"0.5rem",padding:"1rem"},children:[d.jsx("p",{style:{color:"#d1d5db",marginBottom:"0.5rem"},children:"Share this room code:"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[d.jsx("code",{style:{fontSize:"1.5rem",fontFamily:"monospace",color:"#ffffff",backgroundColor:"#334155",padding:"0.5rem 1rem",borderRadius:"0.25rem"},children:i}),d.jsx("button",{onClick:P,style:{backgroundColor:"#9333ea",color:"#ffffff",padding:"0.5rem",borderRadius:"0.25rem",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:k=>k.target.style.backgroundColor="#7c3aed",onMouseOut:k=>k.target.style.backgroundColor="#9333ea",children:S?d.jsx(hM,{className:"w-5 h-5"}):d.jsx(fv,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"#facc15"},children:[d.jsx(yl,{className:"w-5 h-5 animate-spin"}),d.jsx("span",{children:"Waiting for opponent to join..."})]})]}),n==="connected"&&d.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[d.jsxs("div",{style:{backgroundColor:"rgba(20, 83, 45, 0.5)",border:"1px solid #22c55e",borderRadius:"0.5rem",padding:"1rem"},children:[d.jsx("p",{style:{color:"#86efac"},children:" Connected to opponent!"}),i&&d.jsxs("p",{style:{color:"#9ca3af",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Room: ",i]})]}),d.jsx("button",{onClick:T,className:"btn-continue",style:{width:"100%"},children:"Start Game"})]}),(n==="host"||n==="join")&&y&&d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx(yl,{className:"w-8 h-8 animate-spin text-purple-400",style:{margin:"0 auto 1rem auto",color:"#c084fc"}}),d.jsx("p",{style:{color:"#d1d5db"},children:n==="host"?"Creating room...":"Joining room..."})]}),d.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid #374151"},children:d.jsx("button",{onClick:_,className:"btn-cancel",style:{width:"100%"},children:p!=="disconnected"?"Disconnect & Back":"Back"})})]})})},fA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>d.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:d.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:d.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&d.jsx(n,{size:14,className:r}),d.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),bi=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:p,scale:f=1,isViewOnly:h=!1})=>{let g=e.limit;l.forEach(G=>{G.mod.stat==="limit"&&(g+=G.mod.value)});const y=i>=g,x=n&&(!y||s),S=E.useMemo(()=>{const G={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(ie=>{ie.mod.stat==="cost"?G.cost=Math.max(0,G.cost+ie.mod.value):G.hasOwnProperty(ie.mod.stat)&&(G[ie.mod.stat]+=ie.mod.value)}),G},[e,l]),C=S.cost,A=S.attack>e.attack,w=S.attack<e.attack,P=A?"text-green-400":w?"text-red-400":"text-white",T=S.speed>e.speed,N=S.speed<e.speed,_=T?"text-green-400":N?"text-red-400":"text-white",j=S.cost<e.class,k=S.cost>e.class,z=j?"text-green-400":k?"text-red-400":"text-white",M=g>e.limit?"text-green-400":"text-white",{name:R,image:U,hull:W,shields:Z,abilities:Q}=e,I=f!==1?{transform:`scale(${f})`,transformOrigin:"center center"}:{};return d.jsx("div",{onClick:x?()=>t(e):void 0,className:`
        rounded-lg p-[4px] relative group
        transition-all duration-200
        ${x?"cursor-pointer":h?"cursor-default":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${!x&&!h?"opacity-60":""}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{width:"225px",height:"275px",clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...I},children:d.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[d.jsx("img",{src:U,alt:R,className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-black/40"}),d.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[d.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:d.jsx(us,{text:R,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),d.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[d.jsx("div",{className:"w-10 h-12",children:d.jsx(fA,{value:S.attack,isFlat:!1,icon:HM,iconColor:"text-red-400",textColor:P})}),d.jsxs("div",{className:"flex flex-col items-center gap-1",children:[d.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:Z>0&&Array.from({length:Z}).map((G,ie)=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:d.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${ie}`))}),d.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:W}).map((G,ie)=>d.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${ie}`))})]}),d.jsx("div",{className:"w-12 h-12",children:d.jsx(fA,{value:S.speed,isFlat:!0,icon:s0,iconColor:"text-blue-400",textColor:_})})]}),d.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-48 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:Q&&Q.length>0?Q.map((G,ie)=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-xs text-purple-400 tracking-wider font-bold",children:G.name}),d.jsx("p",{className:"text-white text-xs leading-tight font-exo",children:G.description})]},ie)):d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx("p",{className:"text-xs text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),d.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(Ff,{size:14,className:"text-yellow-300"}),d.jsx("span",{className:`font-bold text-base ml-1 ${z}`,children:C})]})]}),e.upgradeSlots>0&&d.jsxs("button",{onClick:G=>{G.stopPropagation(),p&&p(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[d.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),d.jsx("div",{className:"flex items-center",children:d.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),d.jsx("div",{className:"flex items-center",children:d.jsxs("span",{className:`font-bold text-base ${y?"text-pink-500":M}`,children:[i,"/",g]})})]})]})]})]})})},Ga=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i,scale:s=1})=>{const{name:l,cost:u,image:p,description:f,type:h,effect:g}=e,y=g?.goAgain,x=e.id?.includes("_ENHANCED"),S=s!==1?{transform:`scale(${s})`,transformOrigin:"center center"}:{};return d.jsx("div",{onClick:C=>{C.stopPropagation(),K("CARD_PLAY",` ActionCard clicked: ${e.name}`,{cardId:e.id,cardName:e.name}),n||i?t(e):K("CARD_PLAY",` Card click blocked - not playable: ${e.name}`,{})},className:`
        rounded-lg p-[4px] relative group
        transition-all duration-200
        ${n||i?"cursor-pointer":"cursor-not-allowed"}
        ${x?"card-border-shimmer-silver":"card-border-rotate-purple"}
        ${!n&&!i?"opacity-60":""}
        ${i?"ring-4 ring-red-500 animate-pulse":""}
      `,style:{width:"225px",height:"275px",clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...S},children:d.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-purple-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[d.jsx("div",{className:"absolute inset-0 bg-slate-900"}),d.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[d.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-center py-1 px-3 bg-black/40 flex-shrink-0 h-8",children:[d.jsx("div",{className:"text-center min-w-0",children:d.jsx(us,{text:l,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),d.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full flex-shrink-0",children:[d.jsx(Ff,{size:14,className:"text-yellow-300"}),d.jsx("span",{className:"text-white font-bold text-sm ml-1",children:u})]})]}),d.jsx("div",{className:"p-1 flex-shrink-0",children:d.jsx("div",{className:`relative h-[80px] rounded border overflow-hidden ${x?"border-slate-400/50":"border-purple-400/50"}`,children:d.jsx("img",{src:p,alt:l,className:"w-full h-full object-cover object-center",style:{objectFit:"cover"}})})}),d.jsx("div",{className:`mx-1 mb-1 flex-grow bg-black/60 backdrop-blur-sm border p-2 overflow-y-auto rounded-md ${x?"border-slate-600/70":"border-purple-800/70"}`,children:d.jsx("p",{className:"text-sm text-white leading-tight text-center font-exo font-normal",children:f})}),d.jsxs("div",{className:`grid grid-cols-[auto_1fr_auto] gap-2 items-center px-2 border-t flex-shrink-0 h-6 mt-auto ${x?"border-slate-600/70":"border-purple-800/70"}`,children:[d.jsx("div",{className:"w-4"}),d.jsx("div",{className:"flex items-center justify-center",children:d.jsxs("span",{className:`text-[10px] uppercase tracking-widest font-semibold ${x?"text-slate-400":"text-purple-400"}`,children:[h," Card"]})}),d.jsx("div",{className:"w-4 flex items-center justify-center",children:y&&d.jsx(kM,{size:14,className:"text-cyan-400",style:{marginLeft:"-20px"}})})]})]})]})})},t3=({onClick:e,ability:t,isUsable:n,isSelected:r})=>d.jsx("button",{onClick:e,disabled:!n,className:`w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 flex-shrink-0 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("circle",{cx:"12",cy:"12",r:"6"}),d.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),go=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:p,isHovered:f,onMouseEnter:h,onMouseLeave:g,isCardTarget:y,isInMiddleLane:x,reallocationState:S,gameEngine:C,turnPhase:A,isMyTurn:w,passInfo:P,getLocalPlayerId:T,localPlayerState:N,shipAbilityMode:_,sectionRef:j})=>{if(i)return d.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:d.jsx("span",{className:"text-center",children:"Click to place section"})});const k=C.getShipStatus(t),z=k==="critical"?"bg-red-900/60":k==="damaged"?"bg-yellow-900/50":"bg-black/60";let F=k==="critical"?"border-red-500":k==="damaged"?"border-yellow-500":p?"border-pink-500":"border-cyan-500";const M=p?"shadow-pink-500/20":"shadow-cyan-500/20",R=f?"scale-105 shadow-xl":"";let U="";if(S)switch(S){case"can-remove":F="border-orange-400",U="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":F="border-orange-600",U="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":F="border-gray-600",U="opacity-50";break;case"can-add":F="border-green-400",U="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":F="border-green-600",U="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":F="border-gray-600",U="opacity-50";break}const W=y?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",Z=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,I=>I.toUpperCase()),Q={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return d.jsxs("div",{ref:j,className:`
        relative rounded-xl shadow-lg ${M} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${F}
        ${u?`cursor-pointer ${R}`:""}
        ${W}
        ${U}
      `,style:Q,onClick:s,onMouseEnter:h,onMouseLeave:g,children:[d.jsx("div",{className:`absolute inset-0 ${z}`}),d.jsxs("div",{className:"relative z-10 flex flex-col items-center p-2 h-full",children:[d.jsxs("div",{className:"flex items-center justify-between w-full mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("p",{className:"font-bold text-lg text-white",children:t.name||Z}),d.jsx("div",{className:`flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${k==="healthy"?"bg-green-500/20 text-green-300":k==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:k.charAt(0).toUpperCase()+k.slice(1)})]}),r&&t.ability&&d.jsx(t3,{ability:t.ability,isUsable:A==="action"&&w()&&!P[`${T()}Passed`]&&N.energy>=t.ability.cost.energy,isSelected:_?.ability.id===t.ability.id,onClick:I=>l(I,{...t,name:e},t.ability)})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[d.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([I,G])=>{const ie=x&&t.middleLaneBonus&&t.middleLaneBonus[I];return d.jsxs("span",{className:"flex items-center text-xs",children:[d.jsxs("span",{className:"font-semibold mr-1",children:[I,":"]}),d.jsx("span",{className:ie?"text-green-400 font-bold":"",children:G})]},I)})}),d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((I,G)=>d.jsx("div",{children:G<t.allocatedShields?d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:d.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:d.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},G))}),d.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((I,G)=>{const ie=G+1,{critical:le,damaged:$}=t.thresholds;let q;ie<=le?q="bg-red-500":ie<=$?q="bg-orange-500":q="bg-green-500";const V=G<t.hull;return d.jsx("div",{className:`h-4 w-4 rounded-sm ${V?q:"bg-gray-400"} border border-black/50`},G)})})]}),d.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:t.ability&&d.jsxs(d.Fragment,{children:[d.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight mb-1",children:t.ability.name}),d.jsx("p",{className:"text-xs text-white leading-tight",children:t.ability.description})]})})]})]})]})},Av=({isOpen:e,onClose:t,title:n,drones:r=[],cards:i=[],shipComponents:s={}})=>{if(!e)return null;const l=[...r].sort((f,h)=>f.class-h.class),u=[...i].sort((f,h)=>f.card.cost-h.card.cost),p=(f,h)=>{const g=f.stats.healthy,y=f.middleLaneBonus||{},x={};return Object.keys(g).forEach(S=>{x[S]=g[S]+(h&&y[S]||0)}),x};return d.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 max-w-[1500px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:f=>f.stopPropagation(),children:[d.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[d.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:n}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:d.jsx(ln,{size:32})})]}),d.jsxs("div",{className:"overflow-y-auto flex-grow pr-4",children:[Object.keys(s).length>0&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-xl font-orbitron text-yellow-400 mb-3",children:"Ship Layout"}),d.jsx("div",{className:"grid grid-cols-3 gap-4 mb-4",children:["l","m","r"].map((f,h)=>{const g=Object.entries(s).find(([x,S])=>S===f),y=g?ur.find(x=>x.id===g[0]):null;return d.jsxs("div",{children:[d.jsx("div",{className:"text-center mb-2",children:d.jsx("span",{className:`font-bold text-sm ${h===1?"text-yellow-400":"text-cyan-400"}`,children:h===1?"MIDDLE (Bonus)":h===0?"LEFT":"RIGHT"})}),y?d.jsx("div",{className:"h-[200px]",children:d.jsx(go,{section:y.key,stats:y,effectiveStatsForDisplay:p(y,h===1),isPlayer:!0,isInMiddleLane:h===1,gameEngine:Ie,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})}):d.jsx("div",{className:"h-[200px] bg-gray-800/30 rounded-lg border-2 border-dashed border-gray-600 flex items-center justify-center",children:d.jsx("span",{className:"text-center text-gray-500 italic text-xs",children:"Empty Lane"})})]},f)})}),d.jsx("div",{className:"border-t border-purple-500/30 mb-6"})]}),d.jsxs("div",{className:"mb-6",children:[d.jsxs("h3",{className:"text-xl font-orbitron text-cyan-400 mb-3",children:["Drones (",l.length,")"]}),l.length>0?d.jsx("div",{className:"max-w-[1165px] mx-auto",children:d.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:l.map((f,h)=>d.jsx("div",{children:d.jsx(bi,{drone:f,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,appliedUpgrades:[],isViewOnly:!0})},`${f.name}-${h}`))})}):d.jsx("div",{className:"flex items-center justify-center py-20",children:d.jsx("p",{className:"text-gray-500 text-xl italic",children:"No drones selected"})})]}),d.jsx("div",{className:"border-t border-purple-500/30 mb-6"}),d.jsxs("div",{className:"mb-6",children:[d.jsxs("h3",{className:"text-xl font-orbitron text-purple-400 mb-3",children:["Cards (",u.reduce((f,h)=>f+h.quantity,0),")"]}),u.length>0?d.jsx("div",{className:"max-w-[1165px] mx-auto",children:d.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:u.map((f,h)=>d.jsxs("div",{className:"relative",children:[d.jsx(Ga,{card:f.card,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1}),f.quantity>1&&d.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white font-bold text-sm px-2 py-1 rounded z-10",children:["x",f.quantity]})]},`${f.card.id}-${h}`))})}):d.jsx("div",{className:"flex items-center justify-center py-20",children:d.jsx("p",{className:"text-gray-500 text-xl italic",children:"No cards in deck"})})]})]})]})})};function n3(){const{gameState:e,gameStateManager:t}=wi(),[n,r]=E.useState(null),[i,s]=E.useState(!1),[l,u]=E.useState(null),p=e.gameMode==="local",f=e.gameMode!=="local";E.useEffect(()=>{f&&t.setupP2PIntegration(Qn)},[f]);const h=()=>{t.setState({appState:"menu",gameMode:"local"})},g=A=>{K("PHASE_TRANSITIONS"," Selected AI:",A.name),r(A)},y=()=>{if(p&&n){if(K("PHASE_TRANSITIONS"," Starting single player game with AI:",n.name),!n.dronePool||!Array.isArray(n.dronePool)){const P=`Cannot start game: AI '${n.name}' has invalid dronePool configuration.`;console.error("",P),alert(P);return}if(n.dronePool.length<5){const P=`Cannot start game: AI '${n.name}' has only ${n.dronePool.length} drones. Minimum 5 drones required.`;console.error("",P),alert(P);return}if(n.dronePool.length>10){const P=`Cannot start game: AI '${n.name}' has ${n.dronePool.length} drones. Maximum 10 drones allowed.`;console.error("",P),alert(P);return}K("PHASE_TRANSITIONS",` AI drone pool validated: ${n.dronePool.length} drones`);const A=Ze.filter(P=>n.dronePool.includes(P.name)),w={};A.forEach(P=>{w[P.name]=0}),Tr.initialize(Xf,Ze,n,t.actionProcessor,t),K("PHASE_TRANSITIONS"," AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:A,deployedDroneCounts:w,aiPersonality:n})}},x=()=>{const A=Qn.isHost,w=A?"host":"guest";t.startGame(w,{name:A?"Host Player":"Guest Player"},{name:A?"Guest Player":"Host Player"})},S=A=>{K("LOBBY"," Opening deck view for AI:",A.name),u(A),s(!0)},C=A=>{if(!A)return{drones:[],cards:[],shipComponents:{}};const w=Ze.filter(_=>A.dronePool.includes(_.name)),P=A.decklist.filter(_=>_.quantity>0).map(_=>({card:Ot.find(j=>j.id===_.id),quantity:_.quantity})).filter(_=>_.card),T={},N=["l","m","r"];return A.shipDeployment.placement.forEach((_,j)=>{const k=ur.find(z=>z.key===_);k&&(T[k.id]=N[j])}),{drones:w,cards:P,shipComponents:T}};return d.jsxs("div",{className:"body-font",style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",minHeight:"100vh",color:"#ffffff",padding:"60px 20px 20px 20px",boxSizing:"border-box",position:"relative"},children:[d.jsxs("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[p?d.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"2rem"},children:[d.jsx("h2",{"aria-hidden":"true",className:"heading-font",style:{position:"absolute",fontSize:"3.5rem",margin:0,textAlign:"center",color:"#ef4444",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0,fontWeight:"bold"},children:"SELECT OPPONENT"}),d.jsx("h2",{"aria-hidden":"true",className:"heading-font",style:{position:"absolute",fontSize:"3.5rem",margin:0,textAlign:"center",color:"#ff9944",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0,fontWeight:"bold"},children:"SELECT OPPONENT"}),d.jsx("h2",{className:"defeat-glow heading-font",style:{fontSize:"3.5rem",margin:0,textAlign:"center",background:"linear-gradient(90deg, #dc2626, #ef4444, #fca5a5, #ffffff, #fca5a5, #ef4444, #dc2626)",backgroundSize:"300% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",filter:"drop-shadow(0 0 10px rgba(239, 68, 68, 0.3))",position:"relative",zIndex:1,fontWeight:"bold"},children:"SELECT OPPONENT"})]}):d.jsx("h2",{className:"body-font",style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:"MULTIPLAYER SETUP"}),p&&d.jsx("div",{style:{maxWidth:"600px",width:"100%",marginBottom:"2rem"},children:d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginBottom:"2rem"},children:Xf.map(A=>d.jsxs("div",{className:`ai-opponent-card ${n?.name===A.name?"selected":""}`,onClick:()=>g(A),children:[d.jsx("div",{className:"ai-opponent-card-bg",style:{backgroundImage:`url(${A.imagePath})`}}),d.jsx("div",{className:"ai-opponent-card-overlay"}),d.jsxs("div",{className:"ai-opponent-card-content",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"body-font",style:{margin:"0 0 8px 0",fontSize:"1.8rem",fontWeight:"bold",color:"#ffffff",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px"},children:A.name}),d.jsx("p",{className:"body-font",style:{margin:"0",fontSize:"1rem",color:"#dddddd",lineHeight:"1.4",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:A.description})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{className:"body-font",style:{fontSize:"0.9rem",fontWeight:"bold",color:"#ffcc00",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",textTransform:"uppercase",letterSpacing:"1px"},children:["Difficulty: ",A.difficulty]}),d.jsx("button",{onClick:w=>{w.stopPropagation(),S(A)},className:"btn-info",children:"View Deck"})]})]})]},A.name))})}),f&&d.jsx(e3,{onGameStart:x,onBack:h}),p&&d.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[d.jsx("button",{onClick:h,className:"btn-cancel",children:"BACK TO MENU"}),d.jsx("button",{onClick:y,disabled:!n,className:"btn-continue",children:"START GAME"})]})]}),i&&l&&d.jsx(Av,{isOpen:i,onClose:()=>{s(!1),u(null)},title:`${l.name} - Complete Loadout`,...C(l)})]})}const Ev=({phase:e,localPlayerStatus:t})=>d.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:d.jsxs("div",{className:"text-center p-8",children:[d.jsx(yl,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),d.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&d.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[d.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:" Your Selection Complete"}),d.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function r3(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i}=wi(),{turnPhase:s}=e;i();const l=t(),u=`${l}DroneSelectionTrio`,p=`${l}DroneSelectionPool`,f=e[u],h=e[p];K("DRONE_SELECTION","DroneSelectionScreen render:",{trioLength:f?.length,poolLength:h?.length,trioData:f?.map(k=>k.name),player1Trio:e.player1DroneSelectionTrio?.map(k=>k.name),player2Trio:e.player2DroneSelectionTrio?.map(k=>k.name),gameMode:e.gameMode});const[g,y]=E.useState([]),[x,S]=E.useState(f||[]),[C,A]=E.useState(h||[]),w=k=>{if(s!=="droneSelection")return;K("DRONE_SELECTION"," handleChooseDroneForSelection called with:",k.name);const z=[...g,k];if(y(z),z.length<5){const F=eR(C,2);S(F.droneSelectionTrio),A(F.droneSelectionPool),K("DRONE_SELECTION"," Advanced to next pair locally, selected:",z.length)}},P=()=>{if(s!=="droneSelection")return;K("DRONE_SELECTION"," handleContinueDroneSelection called with:",g.length);const z={playerId:t(),phase:"droneSelection",actionData:{drones:g}};if(K("DRONE_SELECTION","Submitting commitment:",{gameMode:e.gameMode,droneCount:g.length,commitmentsBefore:e.commitments?.droneSelection}),e.gameMode==="guest"){Qn.sendActionToHost("commitment",z);return}Ue.actionProcessor.queueAction({type:"commitment",payload:z}).then(F=>{if(!F.success){console.error(" Drone selection submission failed:",F.error);return}}).catch(F=>{console.error(" Drone selection submission error:",F)})};E.useEffect(()=>{f&&f.length>0&&x.length===0&&S(f),h&&h.length>0&&C.length===0&&A(h)},[f,h]),E.useEffect(()=>{e.gameMode==="guest"&&Ue.emit("render_complete")},[e,Ue]);const T=n(),N=e.commitments?.droneSelection?.[l]?.completed||!1,_=e.commitments?.droneSelection?.[T]?.completed||!1;if(K("DRONE_SELECTION","Render check:",{gameMode:e.gameMode,isMultiplayer:r(),fullCommitmentsObject:e.commitments?.droneSelection,willShowWaiting:r()&&N&&!_}),r()&&N&&!_){const k=e.commitments?.droneSelection?.[l]?.drones||g,z=k.length>0?k.map(F=>F.name).join(", "):"Selection complete";return d.jsx(Ev,{phase:"droneSelection",localPlayerStatus:`You selected: ${z}`})}const j=g.length===5;return d.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[d.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),d.jsxs("div",{className:"flex flex-col items-center w-full p-4 relative z-10",children:[d.jsx("h2",{className:"text-3xl font-bold mb-8 text-white text-center",children:"Select Your Active Drone Pool"}),j?null:d.jsxs(d.Fragment,{children:[d.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",g.length+1," of 5: Select one drone from the two options below for your Active Drone Pool."]}),x&&x.length>0&&d.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:x.map((k,z)=>d.jsx(bi,{drone:k,onClick:()=>w(k),isSelectable:!0,deployedCount:0},k.name||z))})]}),j&&d.jsx("button",{onClick:P,className:"btn-continue mb-8",children:"Continue to Ship Placement"}),d.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[d.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",g.length,"/5)",j&&d.jsx("span",{className:"text-green-400 ml-2",children:""})]}),g.length>0?d.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:g.map((k,z)=>d.jsx(bi,{drone:k,isSelectable:!1,deployedCount:0,isViewOnly:!0},z))}):d.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function IT(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=IT(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function dt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=IT(e))&&(r&&(r+=" "),r+=t);return r}var Tg={},Dg={},pA;function a3(){return pA||(pA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Dg)),Dg}var Ng={},hA;function RT(){return hA||(hA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Ng)),Ng}var Og={},mA;function LT(){return mA||(mA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Og)),Og}var jg={},gA;function wv(){return gA||(gA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",p=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const f=n[s];u?f==="\\"&&s+1<i?(s++,l+=n[s]):f===u?u="":l+=f:p?f==='"'||f==="'"?u=f:f==="]"?(p=!1,r.push(l),l=""):l+=f:f==="["?(p=!0,l&&(r.push(l),l="")):f==="."?l&&(r.push(l),l=""):l+=f,s++}return l&&r.push(l),r}e.toPath=t})(jg)),jg}var yA;function Pv(){return yA||(yA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a3(),n=RT(),r=LT(),i=wv();function s(u,p,f){if(u==null)return f;switch(typeof p){case"string":{if(t.isUnsafeProperty(p))return f;const h=u[p];return h===void 0?n.isDeepKey(p)?s(u,i.toPath(p),f):f:h}case"number":case"symbol":{typeof p=="number"&&(p=r.toKey(p));const h=u[p];return h===void 0?f:h}default:{if(Array.isArray(p))return l(u,p,f);if(Object.is(p?.valueOf(),-0)?p="-0":p=String(p),t.isUnsafeProperty(p))return f;const h=u[p];return h===void 0?f:h}}}function l(u,p,f){if(p.length===0)return f;let h=u;for(let g=0;g<p.length;g++){if(h==null||t.isUnsafeProperty(p[g]))return f;h=h[p[g]]}return h===void 0?f:h}e.get=s})(Tg)),Tg}var _g,vA;function i3(){return vA||(vA=1,_g=Pv().get),_g}var s3=i3();const yo=Ca(s3);var kg={exports:{}},yt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xA;function o3(){if(xA)return yt;xA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function S(C){if(typeof C=="object"&&C!==null){var A=C.$$typeof;switch(A){case e:switch(C=C.type,C){case n:case i:case r:case p:case f:case y:return C;default:switch(C=C&&C.$$typeof,C){case l:case u:case g:case h:return C;case s:return C;default:return A}}case t:return A}}}return yt.ContextConsumer=s,yt.ContextProvider=l,yt.Element=e,yt.ForwardRef=u,yt.Fragment=n,yt.Lazy=g,yt.Memo=h,yt.Portal=t,yt.Profiler=i,yt.StrictMode=r,yt.Suspense=p,yt.SuspenseList=f,yt.isContextConsumer=function(C){return S(C)===s},yt.isContextProvider=function(C){return S(C)===l},yt.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===e},yt.isForwardRef=function(C){return S(C)===u},yt.isFragment=function(C){return S(C)===n},yt.isLazy=function(C){return S(C)===g},yt.isMemo=function(C){return S(C)===h},yt.isPortal=function(C){return S(C)===t},yt.isProfiler=function(C){return S(C)===i},yt.isStrictMode=function(C){return S(C)===r},yt.isSuspense=function(C){return S(C)===p},yt.isSuspenseList=function(C){return S(C)===f},yt.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===n||C===i||C===r||C===p||C===f||typeof C=="object"&&C!==null&&(C.$$typeof===g||C.$$typeof===h||C.$$typeof===l||C.$$typeof===s||C.$$typeof===u||C.$$typeof===x||C.getModuleId!==void 0)},yt.typeOf=S,yt}var bA;function l3(){return bA||(bA=1,kg.exports=o3()),kg.exports}var c3=l3(),vn=e=>e===0?0:e>0?1:-1,jr=e=>typeof e=="number"&&e!=+e,so=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ke=e=>(typeof e=="number"||e instanceof Number)&&!jr(e),za=e=>ke(e)||typeof e=="string",u3=0,Su=e=>{var t=++u3;return"".concat(e||"").concat(t)},zn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ke(t)&&typeof t!="string")return r;var s;if(so(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return jr(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},$T=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Nn(e,t,n){return ke(e)&&ke(t)?e+n*(t-e):t}function d3(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):yo(r,t))===n)}var xn=e=>e===null||typeof e>"u",ju=e=>xn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),f3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Tv(e){if(typeof e!="string")return!1;var t=f3;return t.includes(e)}var p3=["viewBox","children"],SA=["points","pathLength"],Mg={svg:p3,polygon:SA,polyline:SA},h3=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Tv(i)&&(r[i]=(s=>n[i](n,s)))}),r},m3=(e,t,n)=>r=>(e(t,n,r),null),_u=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];Tv(i)&&typeof s=="function"&&(r||(r={}),r[i]=m3(s,t,n))}),r},g3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function BT(e){if(typeof e!="string")return!1;var t=g3;return t.includes(e)}function wo(e){var t=Object.entries(e).filter(n=>{var[r]=n;return BT(r)});return Object.fromEntries(t)}var CA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",AA=null,Ig=null,zT=e=>{if(e===AA&&Array.isArray(Ig))return Ig;var t=[];return E.Children.forEach(e,n=>{xn(n)||(c3.isFragment(n)?t=t.concat(zT(n.props.children)):t.push(n))}),Ig=t,AA=e,t};function Dv(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>CA(i)):r=[CA(t)],zT(e).forEach(i=>{var s=yo(i,"type.displayName")||yo(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var y3=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&Mg?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||BT(t)),p=!!n&&Tv(t);return l||u||p},Zt=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(E.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;y3((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},v3=["children","width","height","viewBox","className","style","title","desc"];function v0(){return v0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v0.apply(null,arguments)}function x3(e,t){if(e==null)return{};var n,r,i=b3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function b3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Nv=E.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:p,desc:f}=e,h=x3(e,v3),g=s||{width:r,height:i,x:0,y:0},y=dt("recharts-surface",l);return E.createElement("svg",v0({},Zt(h,!0,"svg"),{className:y,width:r,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),E.createElement("title",null,p),E.createElement("desc",null,f),n)}),S3=["children","className"];function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x0.apply(null,arguments)}function C3(e,t){if(e==null)return{};var n,r,i=A3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var mr=E.forwardRef((e,t)=>{var{children:n,className:r}=e,i=C3(e,S3),s=dt("recharts-layer",r);return E.createElement("g",x0({className:s},Zt(i,!0),{ref:t}),n)}),UT=b2(),HT=E.createContext(null),E3=()=>E.useContext(HT);function Et(e){return function(){return e}}const GT=Math.cos,Qf=Math.sin,Aa=Math.sqrt,Jf=Math.PI,Rp=2*Jf,b0=Math.PI,S0=2*b0,ro=1e-6,w3=S0-ro;function qT(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function P3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return qT;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class T3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?qT:P3(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,p=r-t,f=i-n,h=l-t,g=u-n,y=h*h+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>ro)if(!(Math.abs(g*p-f*h)>ro)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-l,S=i-u,C=p*p+f*f,A=x*x+S*S,w=Math.sqrt(C),P=Math.sqrt(y),T=s*Math.tan((b0-Math.acos((C+y-A)/(2*w*P)))/2),N=T/P,_=T/w;Math.abs(N-1)>ro&&this._append`L${t+N*h},${n+N*g}`,this._append`A${s},${s},0,0,${+(g*x>h*S)},${this._x1=t+_*p},${this._y1=n+_*f}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),p=r*Math.sin(i),f=t+u,h=n+p,g=1^l,y=l?i-s:s-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>ro||Math.abs(this._y1-h)>ro)&&this._append`L${f},${h}`,r&&(y<0&&(y=y%S0+S0),y>w3?this._append`A${r},${r},0,1,${g},${t-u},${n-p}A${r},${r},0,1,${g},${this._x1=f},${this._y1=h}`:y>ro&&this._append`A${r},${r},0,${+(y>=b0)},${g},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ov(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new T3(t)}function jv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function YT(e){this._context=e}YT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Lp(e){return new YT(e)}function FT(e){return e[0]}function VT(e){return e[1]}function KT(e,t){var n=Et(!0),r=null,i=Lp,s=null,l=Ov(u);e=typeof e=="function"?e:e===void 0?FT:Et(e),t=typeof t=="function"?t:t===void 0?VT:Et(t);function u(p){var f,h=(p=jv(p)).length,g,y=!1,x;for(r==null&&(s=i(x=l())),f=0;f<=h;++f)!(f<h&&n(g=p[f],f,p))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(g,f,p),+t(g,f,p));if(x)return s=null,x+""||null}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:Et(+p),u):e},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:Et(+p),u):t},u.defined=function(p){return arguments.length?(n=typeof p=="function"?p:Et(!!p),u):n},u.curve=function(p){return arguments.length?(i=p,r!=null&&(s=i(r)),u):i},u.context=function(p){return arguments.length?(p==null?r=s=null:s=i(r=p),u):r},u}function xf(e,t,n){var r=null,i=Et(!0),s=null,l=Lp,u=null,p=Ov(f);e=typeof e=="function"?e:e===void 0?FT:Et(+e),t=typeof t=="function"?t:Et(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?VT:Et(+n);function f(g){var y,x,S,C=(g=jv(g)).length,A,w=!1,P,T=new Array(C),N=new Array(C);for(s==null&&(u=l(P=p())),y=0;y<=C;++y){if(!(y<C&&i(A=g[y],y,g))===w)if(w=!w)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=y-1;S>=x;--S)u.point(T[S],N[S]);u.lineEnd(),u.areaEnd()}w&&(T[y]=+e(A,y,g),N[y]=+t(A,y,g),u.point(r?+r(A,y,g):T[y],n?+n(A,y,g):N[y]))}if(P)return u=null,P+""||null}function h(){return KT().defined(i).curve(l).context(s)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:Et(+g),r=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:Et(+g),f):e},f.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Et(+g),f):r},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:Et(+g),n=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:Et(+g),f):t},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Et(+g),f):n},f.lineX0=f.lineY0=function(){return h().x(e).y(t)},f.lineY1=function(){return h().x(e).y(n)},f.lineX1=function(){return h().x(r).y(t)},f.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Et(!!g),f):i},f.curve=function(g){return arguments.length?(l=g,s!=null&&(u=l(s)),f):l},f.context=function(g){return arguments.length?(g==null?s=u=null:u=l(s=g),f):s},f}class WT{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function D3(e){return new WT(e,!0)}function N3(e){return new WT(e,!1)}const _v={draw(e,t){const n=Aa(t/Jf);e.moveTo(n,0),e.arc(0,0,n,0,Rp)}},O3={draw(e,t){const n=Aa(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},XT=Aa(1/3),j3=XT*2,_3={draw(e,t){const n=Aa(t/j3),r=n*XT;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},k3={draw(e,t){const n=Aa(t),r=-n/2;e.rect(r,r,n,n)}},M3=.8908130915292852,QT=Qf(Jf/10)/Qf(7*Jf/10),I3=Qf(Rp/10)*QT,R3=-GT(Rp/10)*QT,L3={draw(e,t){const n=Aa(t*M3),r=I3*n,i=R3*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=Rp*s/5,u=GT(l),p=Qf(l);e.lineTo(p*n,-u*n),e.lineTo(u*r-p*i,p*r+u*i)}e.closePath()}},Rg=Aa(3),$3={draw(e,t){const n=-Aa(t/(Rg*3));e.moveTo(0,n*2),e.lineTo(-Rg*n,-n),e.lineTo(Rg*n,-n),e.closePath()}},Fr=-.5,Vr=Aa(3)/2,C0=1/Aa(12),B3=(C0/2+1)*3,z3={draw(e,t){const n=Aa(t/B3),r=n/2,i=n*C0,s=r,l=n*C0+n,u=-s,p=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,p),e.lineTo(Fr*r-Vr*i,Vr*r+Fr*i),e.lineTo(Fr*s-Vr*l,Vr*s+Fr*l),e.lineTo(Fr*u-Vr*p,Vr*u+Fr*p),e.lineTo(Fr*r+Vr*i,Fr*i-Vr*r),e.lineTo(Fr*s+Vr*l,Fr*l-Vr*s),e.lineTo(Fr*u+Vr*p,Fr*p-Vr*u),e.closePath()}};function U3(e,t){let n=null,r=Ov(i);e=typeof e=="function"?e:Et(e||_v),t=typeof t=="function"?t:Et(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Et(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Et(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Zf(){}function ep(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function JT(e){this._context=e}JT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ep(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ep(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function H3(e){return new JT(e)}function ZT(e){this._context=e}ZT.prototype={areaStart:Zf,areaEnd:Zf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ep(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function G3(e){return new ZT(e)}function eD(e){this._context=e}eD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ep(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q3(e){return new eD(e)}function tD(e){this._context=e}tD.prototype={areaStart:Zf,areaEnd:Zf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Y3(e){return new tD(e)}function EA(e){return e<0?-1:1}function wA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(EA(s)+EA(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function PA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Lg(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function tp(e){this._context=e}tp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lg(this,this._t0,PA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Lg(this,PA(this,n=wA(this,e,t)),n);break;default:Lg(this,this._t0,n=wA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function nD(e){this._context=new rD(e)}(nD.prototype=Object.create(tp.prototype)).point=function(e,t){tp.prototype.point.call(this,t,e)};function rD(e){this._context=e}rD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function F3(e){return new tp(e)}function V3(e){return new nD(e)}function aD(e){this._context=e}aD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=TA(e),i=TA(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function TA(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function K3(e){return new aD(e)}function $p(e,t){this._context=e,this._t=t}$p.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function W3(e){return new $p(e,.5)}function X3(e){return new $p(e,0)}function Q3(e){return new $p(e,1)}function wl(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function A0(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function J3(e,t){return e[t]}function Z3(e){const t=[];return t.key=e,t}function e5(){var e=Et([]),t=A0,n=wl,r=J3;function i(s){var l=Array.from(e.apply(this,arguments),Z3),u,p=l.length,f=-1,h;for(const g of s)for(u=0,++f;u<p;++u)(l[u][f]=[0,+r(g,l[u].key,f,s)]).data=g;for(u=0,h=jv(t(l));u<p;++u)l[h[u]].index=u;return n(l,h),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Et(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Et(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?A0:typeof s=="function"?s:Et(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??wl,i):n},i}function t5(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}wl(e,t)}}function n5(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}wl(e,t)}}function r5(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,p=0,f=0;u<l;++u){for(var h=e[t[u]],g=h[r][1]||0,y=h[r-1][1]||0,x=(g-y)/2,S=0;S<u;++S){var C=e[t[S]],A=C[r][1]||0,w=C[r-1][1]||0;x+=A-w}p+=g,f+=x*g}i[r-1][1]+=i[r-1][0]=n,p&&(n-=f/p)}i[r-1][1]+=i[r-1][0]=n,wl(e,t)}}var a5=["type","size","sizeType"];function E0(){return E0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E0.apply(null,arguments)}function DA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function NA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(n),!0).forEach(function(r){i5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i5(e,t,n){return(t=s5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s5(e){var t=o5(e,"string");return typeof t=="symbol"?t:t+""}function o5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l5(e,t){if(e==null)return{};var n,r,i=c5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c5(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iD={symbolCircle:_v,symbolCross:O3,symbolDiamond:_3,symbolSquare:k3,symbolStar:L3,symbolTriangle:$3,symbolWye:z3},u5=Math.PI/180,d5=e=>{var t="symbol".concat(ju(e));return iD[t]||_v},f5=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*u5;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},p5=(e,t)=>{iD["symbol".concat(ju(e))]=t},kv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=l5(e,a5),s=NA(NA({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=d5(l),x=U3().type(y).size(f5(n,r,l));return x()},{className:p,cx:f,cy:h}=s,g=Zt(s,!0);return f===+f&&h===+h&&n===+n?E.createElement("path",E0({},g,{className:dt("recharts-symbols",p),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};kv.registerSymbol=p5;function w0(){return w0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w0.apply(null,arguments)}function OA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function h5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(n),!0).forEach(function(r){Mv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mv(e,t,n){return(t=m5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m5(e){var t=g5(e,"string");return typeof t=="symbol"?t:t+""}function g5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kr=32;class Iv extends E.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Kr/2,s=Kr/6,l=Kr/3,u=t.inactive?r:t.color,p=n??t.type;if(p==="none")return null;if(p==="plainline")return E.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Kr,y2:i,className:"recharts-legend-icon"});if(p==="line")return E.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Kr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(p==="rect")return E.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Kr/8,"h").concat(Kr,"v").concat(Kr*3/4,"h").concat(-Kr,"z"),className:"recharts-legend-icon"});if(E.isValidElement(t.legendIcon)){var f=h5({},t);return delete f.legendIcon,E.cloneElement(t.legendIcon,f)}return E.createElement(kv,{fill:u,cx:i,cy:i,size:Kr,sizeType:"diameter",type:p})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:Kr,height:Kr},p={display:r==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,g)=>{var y=h.formatter||i,x=dt({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:h.inactive});if(h.type==="none")return null;var S=h.inactive?s:h.color,C=y?y(h.value,h,g):h.value;return E.createElement("li",w0({className:x,style:p,key:"legend-item-".concat(g)},_u(this.props,h,g)),E.createElement(Nv,{width:n,height:n,viewBox:u,style:f,"aria-label":"".concat(C," legend icon")},this.renderIcon(h,l)),E.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},C))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return E.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Mv(Iv,"displayName","Legend");Mv(Iv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var $g={},Bg={},jA;function y5(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(Bg)),Bg}var zg={},_A;function sD(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(zg)),zg}var Ug={},Hg={},Gg={},kA;function v5(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(Gg)),Gg}var MA;function Rv(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v5();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(Hg)),Hg}var qg={},IA;function x5(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(qg)),qg}var RA;function b5(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rv(),n=x5();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(Ug)),Ug}var Yg={},Fg={},LA;function S5(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pv();function n(r){return function(i){return t.get(i,r)}}e.property=n})(Fg)),Fg}var Vg={},Kg={},Wg={},Xg={},$A;function oD(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Xg)),Xg}var Qg={},BA;function lD(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Qg)),Qg}var Jg={},zA;function cD(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Jg)),Jg}var UA;function C5(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lv(),n=oD(),r=lD(),i=cD();function s(g,y,x){return typeof x!="function"?t.isMatch(g,y):l(g,y,function S(C,A,w,P,T,N){const _=x(C,A,w,P,T,N);return _!==void 0?!!_:l(C,A,S,N)},new Map)}function l(g,y,x,S){if(y===g)return!0;switch(typeof y){case"object":return u(g,y,x,S);case"function":return Object.keys(y).length>0?l(g,{...y},x,S):i.eq(g,y);default:return n.isObject(g)?typeof y=="string"?y==="":!0:i.eq(g,y)}}function u(g,y,x,S){if(y==null)return!0;if(Array.isArray(y))return f(g,y,x,S);if(y instanceof Map)return p(g,y,x,S);if(y instanceof Set)return h(g,y,x,S);const C=Object.keys(y);if(g==null)return C.length===0;if(C.length===0)return!0;if(S&&S.has(y))return S.get(y)===g;S&&S.set(y,g);try{for(let A=0;A<C.length;A++){const w=C[A];if(!r.isPrimitive(g)&&!(w in g)||y[w]===void 0&&g[w]!==void 0||y[w]===null&&g[w]!==null||!x(g[w],y[w],w,g,y,S))return!1}return!0}finally{S&&S.delete(y)}}function p(g,y,x,S){if(y.size===0)return!0;if(!(g instanceof Map))return!1;for(const[C,A]of y.entries()){const w=g.get(C);if(x(w,A,C,g,y,S)===!1)return!1}return!0}function f(g,y,x,S){if(y.length===0)return!0;if(!Array.isArray(g))return!1;const C=new Set;for(let A=0;A<y.length;A++){const w=y[A];let P=!1;for(let T=0;T<g.length;T++){if(C.has(T))continue;const N=g[T];let _=!1;if(x(N,w,A,g,y,S)&&(_=!0),_){C.add(T),P=!0;break}}if(!P)return!1}return!0}function h(g,y,x,S){return y.size===0?!0:g instanceof Set?f([...g],[...y],x,S):!1}e.isMatchWith=s,e.isSetMatch=h})(Wg)),Wg}var HA;function Lv(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Kg)),Kg}var Zg={},ey={},ty={},GA;function A5(){return GA||(GA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(ty)),ty}var ny={},qA;function uD(){return qA||(qA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(ny)),ny}var ry={},YA;function dD(){return YA||(YA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",p="[object Map]",f="[object Set]",h="[object Array]",g="[object Function]",y="[object ArrayBuffer]",x="[object Object]",S="[object Error]",C="[object DataView]",A="[object Uint8Array]",w="[object Uint8ClampedArray]",P="[object Uint16Array]",T="[object Uint32Array]",N="[object BigUint64Array]",_="[object Int8Array]",j="[object Int16Array]",k="[object Int32Array]",z="[object BigInt64Array]",F="[object Float32Array]",M="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=h,e.bigInt64ArrayTag=z,e.bigUint64ArrayTag=N,e.booleanTag=i,e.dataViewTag=C,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=F,e.float64ArrayTag=M,e.functionTag=g,e.int16ArrayTag=j,e.int32ArrayTag=k,e.int8ArrayTag=_,e.mapTag=p,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=f,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=P,e.uint32ArrayTag=T,e.uint8ArrayTag=A,e.uint8ClampedArrayTag=w})(ry)),ry}var ay={},FA;function E5(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(ay)),ay}var VA;function fD(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A5(),n=uD(),r=dD(),i=lD(),s=E5();function l(h,g){return u(h,void 0,h,new Map,g)}function u(h,g,y,x=new Map,S=void 0){const C=S?.(h,g,y,x);if(C!==void 0)return C;if(i.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const A=new Array(h.length);x.set(h,A);for(let w=0;w<h.length;w++)A[w]=u(h[w],w,y,x,S);return Object.hasOwn(h,"index")&&(A.index=h.index),Object.hasOwn(h,"input")&&(A.input=h.input),A}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const A=new RegExp(h.source,h.flags);return A.lastIndex=h.lastIndex,A}if(h instanceof Map){const A=new Map;x.set(h,A);for(const[w,P]of h)A.set(w,u(P,w,y,x,S));return A}if(h instanceof Set){const A=new Set;x.set(h,A);for(const w of h)A.add(u(w,void 0,y,x,S));return A}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const A=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,A);for(let w=0;w<h.length;w++)A[w]=u(h[w],w,y,x,S);return A}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const A=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,A),p(A,h,y,x,S),A}if(typeof File<"u"&&h instanceof File){const A=new File([h],h.name,{type:h.type});return x.set(h,A),p(A,h,y,x,S),A}if(h instanceof Blob){const A=new Blob([h],{type:h.type});return x.set(h,A),p(A,h,y,x,S),A}if(h instanceof Error){const A=new h.constructor;return x.set(h,A),A.message=h.message,A.name=h.name,A.stack=h.stack,A.cause=h.cause,p(A,h,y,x,S),A}if(typeof h=="object"&&f(h)){const A=Object.create(Object.getPrototypeOf(h));return x.set(h,A),p(A,h,y,x,S),A}return h}function p(h,g,y=h,x,S){const C=[...Object.keys(g),...t.getSymbols(g)];for(let A=0;A<C.length;A++){const w=C[A],P=Object.getOwnPropertyDescriptor(h,w);(P==null||P.writable)&&(h[w]=u(g[w],w,y,x,S))}}function f(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=p})(ey)),ey}var KA;function w5(){return KA||(KA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fD();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(Zg)),Zg}var WA;function P5(){return WA||(WA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lv(),n=w5();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Vg)),Vg}var iy={},sy={},oy={},XA;function T5(){return XA||(XA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fD(),n=dD();function r(i,s){return t.cloneDeepWith(i,(l,u,p,f)=>{const h=s?.(l,u,p,f);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i?.valueOf());return t.copyProperties(g,i),g}case n.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=r})(oy)),oy}var QA;function D5(){return QA||(QA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T5();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(sy)),sy}var ly={},cy={},JA;function pD(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(cy)),cy}var uy={},ZA;function N5(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uD();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(uy)),uy}var eE;function O5(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RT(),n=pD(),r=N5(),i=wv();function s(l,u){let p;if(Array.isArray(u)?p=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?p=i.toPath(u):p=[u],p.length===0)return!1;let f=l;for(let h=0;h<p.length;h++){const g=p[h];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}e.has=s})(ly)),ly}var tE;function j5(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lv(),n=LT(),r=D5(),i=Pv(),s=O5();function l(u,p){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return p=r.cloneDeep(p),function(f){const h=i.get(f,u);return h===void 0?s.has(f,u):p===void 0?h===void 0:t.isMatch(h,p)}}e.matchesProperty=l})(iy)),iy}var nE;function _5(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sD(),n=S5(),r=P5(),i=j5();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Yg)),Yg}var rE;function k5(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y5(),n=sD(),r=b5(),i=_5();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})($g)),$g}var dy,aE;function M5(){return aE||(aE=1,dy=k5().uniqBy),dy}var I5=M5();const iE=Ca(I5);function hD(e,t,n){return t===!0?iE(e,n):typeof t=="function"?iE(e,t):e}var fy={exports:{}},py={},hy={exports:{}},my={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function R5(){if(sE)return my;sE=1;var e=Il();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(g,y){var x=y(),S=r({inst:{value:x,getSnapshot:y}}),C=S[0].inst,A=S[1];return s(function(){C.value=x,C.getSnapshot=y,p(C)&&A({inst:C})},[g,x,y]),i(function(){return p(C)&&A({inst:C}),g(function(){p(C)&&A({inst:C})})},[g]),l(x),x}function p(g){var y=g.getSnapshot;g=g.value;try{var x=y();return!n(g,x)}catch{return!0}}function f(g,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return my.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,my}var oE;function L5(){return oE||(oE=1,hy.exports=R5()),hy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE;function $5(){if(lE)return py;lE=1;var e=Il(),t=L5();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,p=e.useDebugValue;return py.useSyncExternalStoreWithSelector=function(f,h,g,y,x){var S=s(null);if(S.current===null){var C={hasValue:!1,value:null};S.current=C}else C=S.current;S=u(function(){function w(j){if(!P){if(P=!0,T=j,j=y(j),x!==void 0&&C.hasValue){var k=C.value;if(x(k,j))return N=k}return N=j}if(k=N,r(T,j))return k;var z=y(j);return x!==void 0&&x(k,z)?(T=j,k):(T=j,N=z)}var P=!1,T,N,_=g===void 0?null:g;return[function(){return w(h())},_===null?void 0:function(){return w(_())}]},[h,g,y,x]);var A=i(f,S[0],S[1]);return l(function(){C.hasValue=!0,C.value=A},[A]),p(A),A},py}var cE;function B5(){return cE||(cE=1,fy.exports=$5()),fy.exports}var z5=B5(),$v=E.createContext(null),U5=e=>e,$t=()=>{var e=E.useContext($v);return e?e.store.dispatch:U5},Hf=()=>{},H5=()=>Hf,G5=(e,t)=>e===t;function Ne(e){var t=E.useContext($v);return z5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:H5,t?t.store.getState:Hf,t?t.store.getState:Hf,t?e:Hf,G5)}function q5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Y5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function F5(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var uE=e=>Array.isArray(e)?e:[e];function V5(e){const t=Array.isArray(e[0])?e[0]:e;return F5(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function K5(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var W5=class{constructor(e){this.value=e}deref(){return this.value}},X5=typeof WeakRef<"u"?WeakRef:W5,Q5=0,dE=1;function bf(){return{s:Q5,v:void 0,o:null,p:null}}function mD(e,t={}){let n=bf();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:p}=arguments;for(let g=0,y=p;g<y;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const C=S.get(x);C===void 0?(u=bf(),S.set(x,u)):u=C}else{let S=u.p;S===null&&(u.p=S=new Map);const C=S.get(x);C===void 0?(u=bf(),S.set(x,u)):u=C}}const f=u;let h;if(u.s===dE)h=u.v;else if(h=e.apply(null,arguments),s++,r){const g=i?.deref?.()??i;g!=null&&r(g,h)&&(h=g,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new X5(h):h}return f.s=dE,f.v=h,h}return l.clearCache=()=>{n=bf(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function J5(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,p={},f=i.pop();typeof f=="object"&&(p=f,f=i.pop()),q5(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...n,...p},{memoize:g,memoizeOptions:y=[],argsMemoize:x=mD,argsMemoizeOptions:S=[]}=h,C=uE(y),A=uE(S),w=V5(i),P=g(function(){return s++,f.apply(null,arguments)},...C),T=x(function(){l++;const _=K5(w,arguments);return u=P.apply(null,_),u},...A);return Object.assign(T,{resultFunc:f,memoizedResultFunc:P,dependencies:w,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var se=J5(mD),Z5=Object.assign((e,t=se)=>{Y5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,p)=>(l[n[p]]=u,l),{}))},{withTypes:()=>Z5}),gy={},yy={},vy={},fE;function eL(){return fE||(fE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(vy)),vy}var xy={},by={},pE;function gD(){return pE||(pE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(by)),by}var hE;function tL(){return hE||(hE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gD(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(xy)),xy}var mE;function nL(){return mE||(mE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eL(),n=tL(),r=wv();function i(s,l,u,p){if(s==null)return[];u=p?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const f=(x,S)=>{let C=x;for(let A=0;A<S.length&&C!=null;++A)C=C[S[A]];return C},h=(x,S)=>S==null||x==null?S:typeof x=="object"&&"key"in x?Object.hasOwn(S,x.key)?S[x.key]:f(S,x.path):typeof x=="function"?x(S):Array.isArray(x)?f(S,x):typeof S=="object"?S[x]:S,g=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return s.map(x=>({original:x,criteria:g.map(S=>h(S,x))})).slice().sort((x,S)=>{for(let C=0;C<g.length;C++){const A=t.compareValues(x.criteria[C],S.criteria[C],u[C]);if(A!==0)return A}return 0}).map(x=>x.original)}e.orderBy=i})(yy)),yy}var Sy={},gE;function rL(){return gE||(gE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,p)=>{for(let f=0;f<u.length;f++){const h=u[f];Array.isArray(h)&&p<s?l(h,p+1):i.push(h)}};return l(n,0),i}e.flatten=t})(Sy)),Sy}var Cy={},yE;function yD(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pD(),n=Rv(),r=oD(),i=cD();function s(l,u,p){return r.isObject(p)&&(typeof u=="number"&&n.isArrayLike(p)&&t.isIndex(u)&&u<p.length||typeof u=="string"&&u in p)?i.eq(p[u],l):!1}e.isIterateeCall=s})(Cy)),Cy}var vE;function aL(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nL(),n=rL(),r=yD();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(gy)),gy}var Ay,xE;function iL(){return xE||(xE=1,Ay=aL().sortBy),Ay}var sL=iL();const Bp=Ca(sL);var vD=e=>e.legend.settings,oL=e=>e.legend.size,lL=e=>e.legend.payload,cL=se([lL,vD],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Bp(r,n):r});function uL(){return Ne(cL)}var Sf=1;function xD(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>Sf||Math.abs(l.left-t.left)>Sf||Math.abs(l.top-t.top)>Sf||Math.abs(l.width-t.width)>Sf)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Tn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dL=typeof Symbol=="function"&&Symbol.observable||"@@observable",bE=dL,Ey=()=>Math.random().toString(36).substring(7).split("").join("."),fL={INIT:`@@redux/INIT${Ey()}`,REPLACE:`@@redux/REPLACE${Ey()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ey()}`},np=fL;function Bv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bD(e,t,n){if(typeof e!="function")throw new Error(Tn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Tn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Tn(1));return n(bD)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,p=!1;function f(){l===s&&(l=new Map,s.forEach((A,w)=>{l.set(w,A)}))}function h(){if(p)throw new Error(Tn(3));return i}function g(A){if(typeof A!="function")throw new Error(Tn(4));if(p)throw new Error(Tn(5));let w=!0;f();const P=u++;return l.set(P,A),function(){if(w){if(p)throw new Error(Tn(6));w=!1,f(),l.delete(P),s=null}}}function y(A){if(!Bv(A))throw new Error(Tn(7));if(typeof A.type>"u")throw new Error(Tn(8));if(typeof A.type!="string")throw new Error(Tn(17));if(p)throw new Error(Tn(9));try{p=!0,i=r(i,A)}finally{p=!1}return(s=l).forEach(P=>{P()}),A}function x(A){if(typeof A!="function")throw new Error(Tn(10));r=A,y({type:np.REPLACE})}function S(){const A=g;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Tn(11));function P(){const N=w;N.next&&N.next(h())}return P(),{unsubscribe:A(P)}},[bE](){return this}}}return y({type:np.INIT}),{dispatch:y,subscribe:g,getState:h,replaceReducer:x,[bE]:S}}function pL(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:np.INIT})>"u")throw new Error(Tn(12));if(typeof n(void 0,{type:np.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tn(13))})}function SD(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{pL(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let p=!1;const f={};for(let h=0;h<r.length;h++){const g=r[h],y=n[g],x=l[g],S=y(x,u);if(typeof S>"u")throw u&&u.type,new Error(Tn(14));f[g]=S,p=p||S!==x}return p=p||r.length!==Object.keys(l).length,p?f:l}}function rp(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function hL(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Tn(15))};const l={getState:i.getState,dispatch:(p,...f)=>s(p,...f)},u=e.map(p=>p(l));return s=rp(...u)(i.dispatch),{...i,dispatch:s}}}function CD(e){return Bv(e)&&"type"in e&&typeof e.type=="string"}var AD=Symbol.for("immer-nothing"),SE=Symbol.for("immer-draftable"),_r=Symbol.for("immer-state");function ba(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pl=Object.getPrototypeOf;function vo(e){return!!e&&!!e[_r]}function Si(e){return e?ED(e)||Array.isArray(e)||!!e[SE]||!!e.constructor?.[SE]||ku(e)||Up(e):!1}var mL=Object.prototype.constructor.toString();function ED(e){if(!e||typeof e!="object")return!1;const t=Pl(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===mL}function ap(e,t){zp(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function zp(e){const t=e[_r];return t?t.type_:Array.isArray(e)?1:ku(e)?2:Up(e)?3:0}function P0(e,t){return zp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function wD(e,t,n){const r=zp(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function gL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ku(e){return e instanceof Map}function Up(e){return e instanceof Set}function ao(e){return e.copy_||e.base_}function T0(e,t){if(ku(e))return new Map(e);if(Up(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ED(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[_r];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Pl(e),r)}else{const r=Pl(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function zv(e,t=!1){return Hp(e)||vo(e)||!Si(e)||(zp(e)>1&&Object.defineProperties(e,{set:{value:Cf},add:{value:Cf},clear:{value:Cf},delete:{value:Cf}}),Object.freeze(e),t&&Object.values(e).forEach(n=>zv(n,!0))),e}function Cf(){ba(2)}function Hp(e){return Object.isFrozen(e)}var yL={};function xo(e){const t=yL[e];return t||ba(0,e),t}var Cu;function PD(){return Cu}function vL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function CE(e,t){t&&(xo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function D0(e){N0(e),e.drafts_.forEach(xL),e.drafts_=null}function N0(e){e===Cu&&(Cu=e.parent_)}function AE(e){return Cu=vL(Cu,e)}function xL(e){const t=e[_r];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function EE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[_r].modified_&&(D0(t),ba(4)),Si(e)&&(e=ip(t,e),t.parent_||sp(t,e)),t.patches_&&xo("Patches").generateReplacementPatches_(n[_r].base_,e,t.patches_,t.inversePatches_)):e=ip(t,n,[]),D0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==AD?e:void 0}function ip(e,t,n){if(Hp(t))return t;const r=t[_r];if(!r)return ap(t,(i,s)=>wE(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return sp(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),ap(s,(u,p)=>wE(e,r,i,u,p,n,l)),sp(e,i,!1),n&&e.patches_&&xo("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function wE(e,t,n,r,i,s,l){if(vo(i)){const u=s&&t&&t.type_!==3&&!P0(t.assigned_,r)?s.concat(r):void 0,p=ip(e,i,u);if(wD(n,r,p),vo(p))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Si(i)&&!Hp(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ip(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(ku(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&sp(e,i)}}function sp(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&zv(t,n)}function bL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:PD(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Uv;n&&(i=[r],s=Au);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var Uv={get(e,t){if(t===_r)return e;const n=ao(e);if(!P0(n,t))return SL(e,n,t);const r=n[t];return e.finalized_||!Si(r)?r:r===wy(e.base_,t)?(Py(e),e.copy_[t]=j0(r,e)):r},has(e,t){return t in ao(e)},ownKeys(e){return Reflect.ownKeys(ao(e))},set(e,t,n){const r=TD(ao(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=wy(ao(e),t),s=i?.[_r];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(gL(n,i)&&(n!==void 0||P0(e.base_,t)))return!0;Py(e),O0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return wy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Py(e),O0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ao(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ba(11)},getPrototypeOf(e){return Pl(e.base_)},setPrototypeOf(){ba(12)}},Au={};ap(Uv,(e,t)=>{Au[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Au.deleteProperty=function(e,t){return Au.set.call(this,e,t,void 0)};Au.set=function(e,t,n){return Uv.set.call(this,e[0],t,n,e[0])};function wy(e,t){const n=e[_r];return(n?ao(n):e)[t]}function SL(e,t,n){const r=TD(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function TD(e,t){if(!(t in e))return;let n=Pl(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Pl(n)}}function O0(e){e.modified_||(e.modified_=!0,e.parent_&&O0(e.parent_))}function Py(e){e.copy_||(e.copy_=T0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var CL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(p=s,...f){return l.produce(p,h=>n.call(this,h,...f))}}typeof n!="function"&&ba(6),r!==void 0&&typeof r!="function"&&ba(7);let i;if(Si(t)){const s=AE(this),l=j0(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?D0(s):N0(s)}return CE(s,r),EE(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===AD&&(i=void 0),this.autoFreeze_&&zv(i,!0),r){const s=[],l=[];xo("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else ba(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,p=>t(p,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Si(e)||ba(8),vo(e)&&(e=vi(e));const t=AE(this),n=j0(e,void 0);return n[_r].isManual_=!0,N0(t),n}finishDraft(e,t){const n=e&&e[_r];(!n||!n.isManual_)&&ba(9);const{scope_:r}=n;return CE(r,t),EE(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=xo("Patches").applyPatches_;return vo(e)?r(e,t):this.produce(e,i=>r(i,t))}};function j0(e,t){const n=ku(e)?xo("MapSet").proxyMap_(e,t):Up(e)?xo("MapSet").proxySet_(e,t):bL(e,t);return(t?t.scope_:PD()).drafts_.push(n),n}function vi(e){return vo(e)||ba(10,e),DD(e)}function DD(e){if(!Si(e)||Hp(e))return e;const t=e[_r];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=T0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=T0(e,!0);return ap(n,(r,i)=>{wD(n,r,DD(i))}),t&&(t.finalized_=!1),n}var AL=new CL,ND=AL.produce;function OD(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var EL=OD(),wL=OD,PL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?rp:rp.apply(null,arguments)};function Zr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Or(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>CD(r)&&r.type===e,n}var jD=class uu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,uu.prototype)}static get[Symbol.species](){return uu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new uu(...t[0].concat(this)):new uu(...t.concat(this))}};function PE(e){return Si(e)?ND(e,()=>{}):e}function Af(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function TL(e){return typeof e=="boolean"}var DL=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new jD;return n&&(TL(n)?l.push(EL):l.push(wL(n.extraArgument))),l},NL="RTK_autoBatch",TE=e=>t=>{setTimeout(t,e)},OL=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:TE(10):e.type==="callback"?e.queueNotification:TE(e.timeout),f=()=>{l=!1,s&&(s=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const g=()=>i&&h(),y=r.subscribe(g);return u.add(h),()=>{y(),u.delete(h)}},dispatch(h){try{return i=!h?.meta?.[NL],s=!i,s&&(l||(l=!0,p(f))),r.dispatch(h)}finally{i=!0}}})},jL=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new jD(e);return r&&i.push(OL(typeof r=="object"?r:void 0)),i};function _L(e){const t=DL(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(Bv(n))u=SD(n);else throw new Error(Or(1));let p;typeof r=="function"?p=r(t):p=t();let f=rp;i&&(f=PL({trace:!1,...typeof i=="object"&&i}));const h=hL(...p),g=jL(h);let y=typeof l=="function"?l(g):g();const x=f(...y);return bD(u,s,x)}function _D(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(Or(28));if(u in t)throw new Error(Or(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function kL(e){return typeof e=="function"}function ML(e,t){let[n,r,i]=_D(t),s;if(kL(e))s=()=>PE(e());else{const u=PE(e);s=()=>u}function l(u=s(),p){let f=[n[p.type],...r.filter(({matcher:h})=>h(p)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,g)=>{if(g)if(vo(h)){const x=g(h,p);return x===void 0?h:x}else{if(Si(h))return ND(h,y=>g(y,p));{const y=g(h,p);if(y===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return h},u)}return l.getInitialState=s,l}var IL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",RL=(e=21)=>{let t="",n=e;for(;n--;)t+=IL[Math.random()*64|0];return t},LL=Symbol.for("rtk-slice-createasyncthunk");function $L(e,t){return`${e}/${t}`}function BL({creators:e}={}){const t=e?.asyncThunk?.[LL];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(Or(11));const l=(typeof r.reducers=="function"?r.reducers(UL()):r.reducers)||{},u=Object.keys(l),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(T,N){const _=typeof T=="string"?T:T.type;if(!_)throw new Error(Or(12));if(_ in p.sliceCaseReducersByType)throw new Error(Or(13));return p.sliceCaseReducersByType[_]=N,f},addMatcher(T,N){return p.sliceMatchers.push({matcher:T,reducer:N}),f},exposeAction(T,N){return p.actionCreators[T]=N,f},exposeCaseReducer(T,N){return p.sliceCaseReducersByName[T]=N,f}};u.forEach(T=>{const N=l[T],_={reducerName:T,type:$L(i,T),createNotation:typeof r.reducers=="function"};GL(N)?YL(_,N,f,t):HL(_,N,f)});function h(){const[T={},N=[],_=void 0]=typeof r.extraReducers=="function"?_D(r.extraReducers):[r.extraReducers],j={...T,...p.sliceCaseReducersByType};return ML(r.initialState,k=>{for(let z in j)k.addCase(z,j[z]);for(let z of p.sliceMatchers)k.addMatcher(z.matcher,z.reducer);for(let z of N)k.addMatcher(z.matcher,z.reducer);_&&k.addDefaultCase(_)})}const g=T=>T,y=new Map,x=new WeakMap;let S;function C(T,N){return S||(S=h()),S(T,N)}function A(){return S||(S=h()),S.getInitialState()}function w(T,N=!1){function _(k){let z=k[T];return typeof z>"u"&&N&&(z=Af(x,_,A)),z}function j(k=g){const z=Af(y,N,()=>new WeakMap);return Af(z,k,()=>{const F={};for(const[M,R]of Object.entries(r.selectors??{}))F[M]=zL(R,k,()=>Af(x,k,A),N);return F})}return{reducerPath:T,getSelectors:j,get selectors(){return j(_)},selectSlice:_}}const P={name:i,reducer:C,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:A,...w(s),injectInto(T,{reducerPath:N,..._}={}){const j=N??s;return T.inject({reducerPath:j,reducer:C},_),{...P,...w(j,!0)}}};return P}}function zL(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var Mr=BL();function UL(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function HL({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!qL(r))throw new Error(Or(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?Zr(e,l):Zr(e))}function GL(e){return e._reducerDefinitionType==="asyncThunk"}function qL(e){return e._reducerDefinitionType==="reducerWithPrepare"}function YL({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Or(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:p,settled:f,options:h}=n,g=i(e,s,h);r.exposeAction(t,g),l&&r.addCase(g.fulfilled,l),u&&r.addCase(g.pending,u),p&&r.addCase(g.rejected,p),f&&r.addMatcher(g.settled,f),r.exposeCaseReducer(t,{fulfilled:l||Ef,pending:u||Ef,rejected:p||Ef,settled:f||Ef})}function Ef(){}var FL="task",kD="listener",MD="completed",Hv="cancelled",VL=`task-${Hv}`,KL=`task-${MD}`,_0=`${kD}-${Hv}`,WL=`${kD}-${MD}`,Gp=class{constructor(e){this.code=e,this.message=`${FL} ${Hv} (reason: ${e})`}name="TaskAbortError";message},Gv=(e,t)=>{if(typeof e!="function")throw new TypeError(Or(32))},op=()=>{},ID=(e,t=op)=>(e.catch(t),e),RD=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),uo=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},fo=e=>{if(e.aborted){const{reason:t}=e;throw new Gp(t)}};function LD(e,t){let n=op;return new Promise((r,i)=>{const s=()=>i(new Gp(e.reason));if(e.aborted){s();return}n=RD(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=op})}var XL=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Gp?"cancelled":"rejected",error:n}}finally{t?.()}},lp=e=>t=>ID(LD(e,t).then(n=>(fo(e),n))),$D=e=>{const t=lp(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Al}=Object,DE={},qp="listenerMiddleware",QL=(e,t)=>{const n=r=>RD(e,()=>uo(r,e.reason));return(r,i)=>{Gv(r);const s=new AbortController;n(s);const l=XL(async()=>{fo(e),fo(s.signal);const u=await r({pause:lp(s.signal),delay:$D(s.signal),signal:s.signal});return fo(s.signal),u},()=>uo(s,KL));return i?.autoJoin&&t.push(l.catch(op)),{result:lp(e)(l),cancel(){uo(s,VL)}}}},JL=(e,t)=>{const n=async(r,i)=>{fo(t);let s=()=>{};const u=[new Promise((p,f)=>{let h=e({predicate:r,effect:(g,y)=>{y.unsubscribe(),p([g,y.getState(),y.getOriginalState()])}});s=()=>{h(),f()}})];i!=null&&u.push(new Promise(p=>setTimeout(p,i,null)));try{const p=await LD(t,Promise.race(u));return fo(t),p}finally{s()}};return(r,i)=>ID(n(r,i))},BD=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Zr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Or(21));return Gv(s),{predicate:i,type:t,effect:s}},zD=Al(e=>{const{type:t,predicate:n,effect:r}=BD(e);return{id:RL(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Or(22))}}},{withTypes:()=>zD}),NE=(e,t)=>{const{type:n,effect:r,predicate:i}=BD(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},k0=e=>{e.pending.forEach(t=>{uo(t,_0)})},ZL=e=>()=>{e.forEach(k0),e.clear()},OE=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},UD=Al(Zr(`${qp}/add`),{withTypes:()=>UD}),e4=Zr(`${qp}/removeAll`),HD=Al(Zr(`${qp}/remove`),{withTypes:()=>HD}),t4=(...e)=>{console.error(`${qp}/error`,...e)},Mu=(e={})=>{const t=new Map,{extra:n,onError:r=t4}=e;Gv(r);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),g=>{h.unsubscribe(),g?.cancelActive&&k0(h)}),s=h=>{const g=NE(t,h)??zD(h);return i(g)};Al(s,{withTypes:()=>s});const l=h=>{const g=NE(t,h);return g&&(g.unsubscribe(),h.cancelActive&&k0(g)),!!g};Al(l,{withTypes:()=>l});const u=async(h,g,y,x)=>{const S=new AbortController,C=JL(s,S.signal),A=[];try{h.pending.add(S),await Promise.resolve(h.effect(g,Al({},y,{getOriginalState:x,condition:(w,P)=>C(w,P).then(Boolean),take:C,delay:$D(S.signal),pause:lp(S.signal),extra:n,signal:S.signal,fork:QL(S.signal,A),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((w,P,T)=>{w!==S&&(uo(w,_0),T.delete(w))})},cancel:()=>{uo(S,_0),h.pending.delete(S)},throwIfCancelled:()=>{fo(S.signal)}})))}catch(w){w instanceof Gp||OE(r,w,{raisedBy:"effect"})}finally{await Promise.all(A),uo(S,WL),h.pending.delete(S)}},p=ZL(t);return{middleware:h=>g=>y=>{if(!CD(y))return g(y);if(UD.match(y))return s(y.payload);if(e4.match(y)){p();return}if(HD.match(y))return l(y.payload);let x=h.getState();const S=()=>{if(x===DE)throw new Error(Or(23));return x};let C;try{if(C=g(y),t.size>0){const A=h.getState(),w=Array.from(t.values());for(const P of w){let T=!1;try{T=P.predicate(y,A,x)}catch(N){T=!1,OE(r,N,{raisedBy:"predicate"})}T&&u(P,y,h,S)}}}finally{x=DE}return C},startListening:s,stopListening:l,clearListeners:p}};function Or(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var n4={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},GD=Mr({name:"chartLayout",initialState:n4,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:r4,setLayout:a4,setChartSize:i4,setScale:s4}=GD.actions,o4=GD.reducer;function jE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _E(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(n),!0).forEach(function(r){l4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l4(e,t,n){return(t=c4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c4(e){var t=u4(e,"string");return typeof t=="symbol"?t:t+""}function u4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cp=Math.PI/180,d4=e=>e*180/Math.PI,en=(e,t,n,r)=>({x:e+Math.cos(-cp*r)*n,y:t+Math.sin(-cp*r)*n}),qD=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},f4=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},p4=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=f4({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,p=Math.acos(u);return r>s&&(p=2*Math.PI-p),{radius:l,angle:d4(p),angleInRadian:p}},h4=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},m4=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},g4=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=p4({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:p,endAngle:f}=h4(t),h=s,g;if(p<=f){for(;h>f;)h-=360;for(;h<p;)h+=360;g=h>=p&&h<=f}else{for(;h>p;)h-=360;for(;h<f;)h+=360;g=h>=f&&h<=p}return g?_E(_E({},t),{},{radius:i,angle:m4(h,t)}):null};function YD(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function kE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(n),!0).forEach(function(r){y4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y4(e,t,n){return(t=v4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v4(e){var t=x4(e,"string");return typeof t=="symbol"?t:t+""}function x4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mt(e,t,n){return xn(e)||xn(t)?n:za(t)?yo(e,t,n):typeof t=="function"?t(e):n}var b4=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var p=0;p<u;p++){var f=p>0?n[p-1].coordinate:n[u-1].coordinate,h=n[p].coordinate,g=p>=u-1?n[0].coordinate:n[p+1].coordinate,y=void 0;if(vn(h-f)!==vn(g-h)){var x=[];if(vn(g-h)===vn(i[1]-i[0])){y=g;var S=h+i[1]-i[0];x[0]=Math.min(S,(S+f)/2),x[1]=Math.max(S,(S+f)/2)}else{y=f;var C=g+i[1]-i[0];x[0]=Math.min(h,(C+h)/2),x[1]=Math.max(h,(C+h)/2)}var A=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(e>A[0]&&e<=A[1]||e>=x[0]&&e<=x[1]){({index:l}=n[p]);break}}else{var w=Math.min(f,g),P=Math.max(f,g);if(e>(w+h)/2&&e<=(P+h)/2){({index:l}=n[p]);break}}}else if(t){for(var T=0;T<u;T++)if(T===0&&e<=(t[T].coordinate+t[T+1].coordinate)/2||T>0&&T<u-1&&e>(t[T].coordinate+t[T-1].coordinate)/2&&e<=(t[T].coordinate+t[T+1].coordinate)/2||T===u-1&&e>(t[T].coordinate+t[T-1].coordinate)/2){({index:l}=t[T]);break}}return l},S4=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&ke(e[s]))return Qr(Qr({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&ke(e[l]))return Qr(Qr({},e),{},{[l]:e[l]+(i||0)})}return e},Po=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",FD=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},VD=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:p,categoricalDomain:f,tickCount:h,ticks:g,niceTicks:y,axisType:x}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,C=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(C=x==="angleAxis"&&s&&s.length>=2?vn(s[0]-s[1])*2*C:C,g||y){var A=(g||y||[]).map((w,P)=>{var T=r?r.indexOf(w):w;return{coordinate:l(T)+C,value:w,offset:C,index:P}});return A.filter(w=>!jr(w.coordinate))}return p&&f?f.map((w,P)=>({coordinate:l(w)+C,value:w,index:P,offset:C})):l.ticks&&h!=null?l.ticks(h).map((w,P)=>({coordinate:l(w)+C,value:w,offset:C,index:P})):l.domain().map((w,P)=>({coordinate:l(w)+C,value:r?r[w]:w,index:P,offset:C}))},ME=1e-4,C4=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-ME,s=Math.max(r[0],r[1])+ME,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},A4=(e,t)=>{if(!t||t.length!==2||!ke(t[0])||!ke(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ke(e[0])||e[0]<n)&&(i[0]=n),(!ke(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},E4=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=jr(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},w4=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=jr(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},P4={sign:E4,expand:t5,none:wl,silhouette:n5,wiggle:r5,positive:w4},T4=(e,t,n)=>{var r=P4[n],i=e5().keys(t).value((s,l)=>+Mt(s,l,0)).order(A0).offset(r);return i(e)};function D4(e){return e==null?void 0:String(e)}var IE=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=Mt(s,t.dataKey,t.scale.domain()[l]);return xn(u)?null:t.scale(u)-i/2+r},N4=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},O4=e=>{var t=e.flat(2).filter(ke);return[Math.min(...t),Math.max(...t)]},j4=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],_4=(e,t,n)=>{if(e!=null)return j4(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((p,f)=>{var h=YD(f,t,n),g=O4(h);return[Math.min(p[0],g[0]),Math.max(p[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},RE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Bp(t,h=>h.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var p=i[l],f=i[l-1];s=Math.min((p.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function $E(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Qr(Qr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function Yp(e,t){if(e)return String(e);if(typeof t=="string")return t}function k4(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?g4({x:e,y:t},r):null}var M4=(e,t,n,r)=>{var i=t.find(f=>f&&f.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return Qr(Qr(Qr({},r),en(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:p}=r;return Qr(Qr(Qr({},r),en(r.cx,r.cy,u,p)),{},{angle:p,radius:u})}return{x:0,y:0}},I4=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Pi=e=>e.layout.width,Ti=e=>e.layout.height,R4=e=>e.layout.scale,KD=e=>e.layout.margin,Fp=se(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Vp=se(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),WD="data-recharts-item-index",XD="data-recharts-item-data-key",Iu=60;function BE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(n),!0).forEach(function(r){L4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L4(e,t,n){return(t=$4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $4(e){var t=B4(e,"string");return typeof t=="symbol"?t:t+""}function B4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z4=e=>e.brush.height;function U4(e){var t=Vp(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Iu;return n+i}return n},0)}function H4(e){var t=Vp(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Iu;return n+i}return n},0)}function G4(e){var t=Fp(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function q4(e){var t=Fp(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var cn=se([Pi,Ti,KD,z4,U4,H4,G4,q4,vD,oL],(e,t,n,r,i,s,l,u,p,f)=>{var h={left:(n.left||0)+i,right:(n.right||0)+s},g={top:(n.top||0)+l,bottom:(n.bottom||0)+u},y=wf(wf({},g),h),x=y.bottom;y.bottom+=r,y=S4(y,p,f);var S=e-y.left-y.right,C=t-y.top-y.bottom;return wf(wf({brushBottom:x},y),{},{width:Math.max(S,0),height:Math.max(C,0)})}),Y4=se(cn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Yv=se(Pi,Ti,(e,t)=>({x:0,y:0,width:e,height:t})),F4=E.createContext(null),ta=()=>E.useContext(F4)!=null,Kp=e=>e.brush,Wp=se([Kp,cn,KD],(e,t,n)=>({height:e.height,x:ke(e.x)?e.x:t.left,y:ke(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:ke(e.width)?e.width:t.width})),Fv=()=>{var e,t=ta(),n=Ne(Y4),r=Ne(Wp),i=(e=Ne(Kp))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},V4={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},QD=()=>{var e;return(e=Ne(cn))!==null&&e!==void 0?e:V4},Vv=()=>Ne(Pi),Kv=()=>Ne(Ti),K4=()=>Ne(e=>e.layout.margin),st=e=>e.layout.layoutType,Wv=()=>Ne(st),W4={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},JD=Mr({name:"legend",initialState:W4,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=vi(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:zE,setLegendSettings:X4,addLegendPayload:ZD,removeLegendPayload:eN}=JD.actions,Q4=JD.reducer,J4=["contextPayload"];function M0(){return M0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M0.apply(null,arguments)}function UE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UE(Object(n),!0).forEach(function(r){Xv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xv(e,t,n){return(t=Z4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z4(e){var t=e$(e,"string");return typeof t=="symbol"?t:t+""}function e$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t$(e,t){if(e==null)return{};var n,r,i=n$(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function n$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function r$(e){return e.value}function a$(e){var{contextPayload:t}=e,n=t$(e,J4),r=hD(t,e.payloadUniqBy,r$),i=Tl(Tl({},n),{},{payload:r});return E.isValidElement(e.content)?E.cloneElement(e.content,i):typeof e.content=="function"?E.createElement(e.content,i):E.createElement(Iv,i)}function i$(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:p}=t,f,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?f={left:((r||0)-s.width)/2}:f=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(p==="middle"?h={top:((i||0)-s.height)/2}:h=p==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Tl(Tl({},f),h)}function s$(e){var t=$t();return E.useEffect(()=>{t(X4(e))},[t,e]),null}function o$(e){var t=$t();return E.useEffect(()=>(t(zE(e)),()=>{t(zE({width:0,height:0}))}),[t,e]),null}function l$(e){var t=uL(),n=E3(),r=K4(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[p,f]=xD([t]),h=Vv(),g=Kv();if(h==null||g==null)return null;var y=h-(r.left||0)-(r.right||0),x=Xp.getWidthOrHeight(e.layout,s,i,y),S=u?l:Tl(Tl({position:"absolute",width:x?.width||i||"auto",height:x?.height||s||"auto"},i$(l,e,r,h,g,p)),l),C=u??n;if(C==null)return null;var A=E.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:f},E.createElement(s$,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),E.createElement(o$,{width:p.width,height:p.height}),E.createElement(a$,M0({},e,x,{margin:r,chartWidth:h,chartHeight:g,contextPayload:t})));return UT.createPortal(A,C)}class Xp extends E.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&ke(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return E.createElement(l$,this.props)}}Xv(Xp,"displayName","Legend");Xv(Xp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I0.apply(null,arguments)}function HE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ty(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(n),!0).forEach(function(r){c$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c$(e,t,n){return(t=u$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u$(e){var t=d$(e,"string");return typeof t=="symbol"?t:t+""}function d$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f$(e){return Array.isArray(e)&&za(e[0])&&za(e[1])?e.join(" ~ "):e}var p$=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:p,labelClassName:f,label:h,labelFormatter:g,accessibilityLayer:y=!1}=e,x=()=>{if(s&&s.length){var _={padding:0,margin:0},j=(u?Bp(s,u):s).map((k,z)=>{if(k.type==="none")return null;var F=k.formatter||l||f$,{value:M,name:R}=k,U=M,W=R;if(F){var Z=F(M,R,k,z,s);if(Array.isArray(Z))[U,W]=Z;else if(Z!=null)U=Z;else return null}var Q=Ty({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:Q},za(W)?E.createElement("span",{className:"recharts-tooltip-item-name"},W):null,za(W)?E.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,E.createElement("span",{className:"recharts-tooltip-item-value"},U),E.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:_},j)}return null},S=Ty({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),C=Ty({margin:0},i),A=!xn(h),w=A?h:"",P=dt("recharts-default-tooltip",p),T=dt("recharts-tooltip-label",f);A&&g&&s!==void 0&&s!==null&&(w=g(h,s));var N=y?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",I0({className:P,style:S},N),E.createElement("p",{className:T,style:C},E.isValidElement(w)?w:"".concat(w)),x())},eu="recharts-tooltip-wrapper",h$={visibility:"hidden"};function m$(e){var{coordinate:t,translateX:n,translateY:r}=e;return dt(eu,{["".concat(eu,"-right")]:ke(n)&&t&&ke(t.x)&&n>=t.x,["".concat(eu,"-left")]:ke(n)&&t&&ke(t.x)&&n<t.x,["".concat(eu,"-bottom")]:ke(r)&&t&&ke(t.y)&&r>=t.y,["".concat(eu,"-top")]:ke(r)&&t&&ke(t.y)&&r<t.y})}function GE(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:p,viewBoxDimension:f}=e;if(s&&ke(s[r]))return s[r];var h=n[r]-u-(i>0?i:0),g=n[r]+i;if(t[r])return l[r]?h:g;var y=p[r];if(y==null)return 0;if(l[r]){var x=h,S=y;return x<S?Math.max(g,y):Math.max(h,y)}if(f==null)return 0;var C=g+u,A=y+f;return C>A?Math.max(h,y):Math.max(g,y)}function g$(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function y$(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:p}=e,f,h,g;return l.height>0&&l.width>0&&n?(h=GE({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:p,viewBoxDimension:p.width}),g=GE({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:p,viewBoxDimension:p.height}),f=g$({translateX:h,translateY:g,useTranslate3d:u})):f=h$,{cssProperties:f,cssClasses:m$({translateX:h,translateY:g,coordinate:n})}}function qE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(n),!0).forEach(function(r){R0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R0(e,t,n){return(t=v$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v$(e){var t=x$(e,"string");return typeof t=="symbol"?t:t+""}function x$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class b$ extends E.PureComponent{constructor(){super(...arguments),R0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),R0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:p,offset:f,position:h,reverseDirection:g,useTranslate3d:y,viewBox:x,wrapperStyle:S,lastBoundingBox:C,innerRef:A,hasPortalFromProps:w}=this.props,{cssClasses:P,cssProperties:T}=y$({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:f,position:h,reverseDirection:g,tooltipBox:{height:C.height,width:C.width},useTranslate3d:y,viewBox:x}),N=w?{}:Pf(Pf({transition:p&&t?"transform ".concat(r,"ms ").concat(i):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),_=Pf(Pf({},N),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:P,style:_,ref:A},s)}}var S$=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ll={isSsr:S$()},tN=()=>Ne(e=>e.rootProps.accessibilityLayer);function kr(e){return Number.isFinite(e)}function Dl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function L0(){return L0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L0.apply(null,arguments)}function YE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function FE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YE(Object(n),!0).forEach(function(r){C$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function C$(e,t,n){return(t=A$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A$(e){var t=E$(e,"string");return typeof t=="symbol"?t:t+""}function E$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VE={curveBasisClosed:G3,curveBasisOpen:q3,curveBasis:H3,curveBumpX:D3,curveBumpY:N3,curveLinearClosed:Y3,curveLinear:Lp,curveMonotoneX:F3,curveMonotoneY:V3,curveNatural:K3,curveStep:W3,curveStepAfter:Q3,curveStepBefore:X3},Tf=e=>kr(e.x)&&kr(e.y),tu=e=>e.x,nu=e=>e.y,w$=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(ju(e));return(n==="curveMonotone"||n==="curveBump")&&t?VE["".concat(n).concat(t==="vertical"?"Y":"X")]:VE[n]||Lp},P$=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=w$(t,i),u=s?n.filter(Tf):n,p;if(Array.isArray(r)){var f=s?r.filter(g=>Tf(g)):r,h=u.map((g,y)=>FE(FE({},g),{},{base:f[y]}));return i==="vertical"?p=xf().y(nu).x1(tu).x0(g=>g.base.x):p=xf().x(tu).y1(nu).y0(g=>g.base.y),p.defined(Tf).curve(l),p(h)}return i==="vertical"&&ke(r)?p=xf().y(nu).x1(tu).x0(r):ke(r)?p=xf().x(tu).y1(nu).y0(r):p=KT().x(tu).y(nu),p.defined(Tf).curve(l),p(u)},nN=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?P$(e):r;return E.createElement("path",L0({},wo(e),h3(e),{className:dt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},T$=["x","y","top","left","width","height","className"];function $0(){return $0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$0.apply(null,arguments)}function KE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function D$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(n),!0).forEach(function(r){N$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N$(e,t,n){return(t=O$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O$(e){var t=j$(e,"string");return typeof t=="symbol"?t:t+""}function j$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _$(e,t){if(e==null)return{};var n,r,i=k$(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function k$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var M$=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),I$=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,p=_$(e,T$),f=D$({x:t,y:n,top:r,left:i,width:s,height:l},p);return!ke(t)||!ke(n)||!ke(s)||!ke(l)||!ke(r)||!ke(i)?null:E.createElement("path",$0({},Zt(f,!0),{className:dt("recharts-cross",u),d:M$(t,n,s,l,r,i)}))};function R$(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function L$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(n),!0).forEach(function(r){$$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $$(e,t,n){return(t=B$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B$(e){var t=z$(e,"string");return typeof t=="symbol"?t:t+""}function z$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function na(e,t){var n=L$({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function U$(){}function XE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function QE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XE(Object(n),!0).forEach(function(r){H$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H$(e,t,n){return(t=G$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G$(e){var t=q$(e,"string");return typeof t=="symbol"?t:t+""}function q$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y$=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),rN=(e,t,n)=>e.map(r=>"".concat(Y$(r)," ").concat(t,"ms ").concat(n)).join(","),F$=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Eu=(e,t)=>Object.keys(t).reduce((n,r)=>QE(QE({},n),{},{[r]:e(r,t[r])}),{});function JE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(n),!0).forEach(function(r){V$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V$(e,t,n){return(t=K$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K$(e){var t=W$(e,"string");return typeof t=="symbol"?t:t+""}function W$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var up=(e,t,n)=>e+(t-e)*n,B0=e=>{var{from:t,to:n}=e;return t!==n},aN=(e,t,n)=>{var r=Eu((i,s)=>{if(B0(s)){var[l,u]=e(s.from,s.to,s.velocity);return Dn(Dn({},s),{},{from:l,velocity:u})}return s},t);return n<1?Eu((i,s)=>B0(s)?Dn(Dn({},s),{},{velocity:up(s.velocity,r[i].velocity,n),from:up(s.from,r[i].from,n)}):s,t):aN(e,r,n-1)};function X$(e,t,n,r,i,s){var l,u=r.reduce((y,x)=>Dn(Dn({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),p=()=>Eu((y,x)=>x.from,u),f=()=>!Object.values(u).filter(B0).length,h=null,g=y=>{l||(l=y);var x=y-l,S=x/n.dt;u=aN(n,u,S),i(Dn(Dn(Dn({},e),t),p())),l=y,f()||(h=s.setTimeout(g))};return()=>(h=s.setTimeout(g),()=>{h()})}function Q$(e,t,n,r,i,s,l){var u=null,p=i.reduce((g,y)=>Dn(Dn({},g),{},{[y]:[e[y],t[y]]}),{}),f,h=g=>{f||(f=g);var y=(g-f)/r,x=Eu((C,A)=>up(...A,n(y)),p);if(s(Dn(Dn(Dn({},e),t),x)),y<1)u=l.setTimeout(h);else{var S=Eu((C,A)=>up(...A,n(1)),p);s(Dn(Dn(Dn({},e),t),S))}};return()=>(u=l.setTimeout(h),()=>{u()})}const J$=(e,t,n,r,i,s)=>{var l=F$(e,t);return n.isStepper===!0?X$(e,t,n,l,i,s):Q$(e,t,n,r,l,i,s)};var dp=1e-4,iN=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],sN=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),ZE=(e,t)=>n=>{var r=iN(e,t);return sN(r,n)},Z$=(e,t)=>n=>{var r=iN(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return sN(i,n)},ew=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var p=l[0].split("(");p[0]==="cubic-bezier"&&p[1].split(")")[0].split(",").length===4&&([t,r,n,i]=p[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var f=ZE(t,n),h=ZE(r,i),g=Z$(t,n),y=S=>S>1?1:S<0?0:S,x=S=>{for(var C=S>1?1:S,A=C,w=0;w<8;++w){var P=f(A)-C,T=g(A);if(Math.abs(P-C)<dp||T<dp)return h(A);A=y(A-P/T)}return h(A)};return x.isStepper=!1,x},e8=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,p)=>{var f=-(l-u)*n,h=p*r,g=p+(f-h)*i/1e3,y=p*i/1e3+l;return Math.abs(y-u)<dp&&Math.abs(g)<dp?[u,0]:[y,g]};return s.isStepper=!0,s.dt=i,s},t8=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return ew(e);case"spring":return e8();default:if(e.split("(")[0]==="cubic-bezier")return ew(e)}return typeof e=="function"?e:null};function n8(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[p,...f]=u;if(typeof p=="number"){i=e.setTimeout(s.bind(null,f),p);return}s(p),i=e.setTimeout(s.bind(null,f));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class r8{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function a8(){return n8(new r8)}var i8=E.createContext(a8);function s8(e,t){var n=E.useContext(i8);return E.useMemo(()=>t??n(e),[e,t,n])}var o8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},tw={t:0},Dy={t:1};function Qp(e){var t=na(e,o8),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:p,children:f}=t,h=s8(t.animationId,t.animationManager),[g,y]=E.useState(n?tw:Dy),x=E.useRef(null);return E.useEffect(()=>{n||y(Dy)},[n]),E.useEffect(()=>{if(!n||!r)return U$;var S=J$(tw,Dy,t8(s),i,y,h.getTimeoutController()),C=()=>{x.current=S()};return h.start([p,l,C,i,u]),()=>{h.stop(),x.current&&x.current(),u()}},[n,r,i,s,l,p,u,h]),f(g.t)}function Jp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(Su(t)),r=E.useRef(e);return r.current!==e&&(n.current=Su(t),r.current=e),n.current}function nw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nw(Object(n),!0).forEach(function(r){l8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l8(e,t,n){return(t=c8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c8(e){var t=u8(e,"string");return typeof t=="symbol"?t:t+""}function u8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fp.apply(null,arguments)}var aw=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,p=r>=0&&n>=0||r<0&&n<0?1:0,f;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],g=0,y=4;g<y;g++)h[g]=i[g]>s?s:i[g];f="M".concat(e,",").concat(t+l*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(p,",").concat(e+u*h[0],",").concat(t)),f+="L ".concat(e+n-u*h[1],",").concat(t),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(p,`,
        `).concat(e+n,",").concat(t+l*h[1])),f+="L ".concat(e+n,",").concat(t+r-l*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(p,`,
        `).concat(e+n-u*h[2],",").concat(t+r)),f+="L ".concat(e+u*h[3],",").concat(t+r),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(p,`,
        `).concat(e,",").concat(t+r-l*h[3])),f+="Z"}else if(s>0&&i===+i&&i>0){var x=Math.min(s,i);f="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(p,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+n-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(p,",").concat(e+n,",").concat(t+l*x,`
            L `).concat(e+n,",").concat(t+r-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(p,",").concat(e+n-u*x,",").concat(t+r,`
            L `).concat(e+u*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(p,",").concat(e,",").concat(t+r-l*x," Z")}else f="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},d8={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oN=e=>{var t=na(e,d8),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Z=n.current.getTotalLength();Z&&i(Z)}catch{}},[]);var{x:s,y:l,width:u,height:p,radius:f,className:h}=t,{animationEasing:g,animationDuration:y,animationBegin:x,isAnimationActive:S,isUpdateAnimationActive:C}=t,A=E.useRef(u),w=E.useRef(p),P=E.useRef(s),T=E.useRef(l),N=E.useMemo(()=>({x:s,y:l,width:u,height:p,radius:f}),[s,l,u,p,f]),_=Jp(N,"rectangle-");if(s!==+s||l!==+l||u!==+u||p!==+p||u===0||p===0)return null;var j=dt("recharts-rectangle",h);if(!C)return E.createElement("path",fp({},Zt(t,!0),{className:j,d:aw(s,l,u,p,f)}));var k=A.current,z=w.current,F=P.current,M=T.current,R="0px ".concat(r===-1?1:r,"px"),U="".concat(r,"px 0px"),W=rN(["strokeDasharray"],y,typeof g=="string"?g:void 0);return E.createElement(Qp,{animationId:_,key:_,canBegin:r>0,duration:y,easing:g,isActive:C,begin:x},Z=>{var Q=Nn(k,u,Z),I=Nn(z,p,Z),G=Nn(F,s,Z),ie=Nn(M,l,Z);n.current&&(A.current=Q,w.current=I,P.current=G,T.current=ie);var le;return S?Z>0?le={transition:W,strokeDasharray:U}:le={strokeDasharray:R}:le={strokeDasharray:U},E.createElement("path",fp({},Zt(t,!0),{className:j,d:aw(G,ie,Q,I,f),ref:n,style:rw(rw({},le),t.style)}))})};function lN(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=en(t,n,r,i),u=en(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function z0(){return z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z0.apply(null,arguments)}var f8=(e,t)=>{var n=vn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Df=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:p}=e,f=u*(l?1:-1)+r,h=Math.asin(u/f)/cp,g=p?i:i+s*h,y=en(t,n,f,g),x=en(t,n,r,g),S=p?i-s*h:i,C=en(t,n,f*Math.cos(h*cp),S);return{center:y,circleTangency:x,lineTangency:C,theta:h}},cN=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=f8(s,l),p=s+u,f=en(t,n,i,s),h=en(t,n,i,p),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>p),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var y=en(t,n,r,s),x=en(t,n,r,p);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=p),`,
            `).concat(y.x,",").concat(y.y," Z")}else g+="L ".concat(t,",").concat(n," Z");return g},p8=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:p,endAngle:f}=e,h=vn(f-p),{circleTangency:g,lineTangency:y,theta:x}=Df({cx:t,cy:n,radius:i,angle:p,sign:h,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:C,theta:A}=Df({cx:t,cy:n,radius:i,angle:f,sign:-h,cornerRadius:s,cornerIsExternal:u}),w=u?Math.abs(p-f):Math.abs(p-f)-x-A;if(w<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):cN({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:p,endAngle:f});var P="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,`
  `);if(r>0){var{circleTangency:T,lineTangency:N,theta:_}=Df({cx:t,cy:n,radius:r,angle:p,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:j,lineTangency:k,theta:z}=Df({cx:t,cy:n,radius:r,angle:f,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),F=u?Math.abs(p-f):Math.abs(p-f)-_-z;if(F<0&&s===0)return"".concat(P,"L").concat(t,",").concat(n,"Z");P+="L".concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(F>180),",").concat(+(h>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(N.x,",").concat(N.y,"Z")}else P+="L".concat(t,",").concat(n,"Z");return P},h8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},uN=e=>{var t=na(e,h8),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:p,startAngle:f,endAngle:h,className:g}=t;if(s<i||f===h)return null;var y=dt("recharts-sector",g),x=s-i,S=zn(l,x,0,!0),C;return S>0&&Math.abs(f-h)<360?C=p8({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,x/2),forceCornerRadius:u,cornerIsExternal:p,startAngle:f,endAngle:h}):C=cN({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:f,endAngle:h}),E.createElement("path",z0({},Zt(t,!0),{className:y,d:C}))};function m8(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:p,innerRadius:f,outerRadius:h,angle:g}=t,y=en(u,p,f,g),x=en(u,p,h,g);r=y.x,i=y.y,s=x.x,l=x.y}else return lN(t);return[{x:r,y:i},{x:s,y:l}]}var Ny={},Oy={},jy={},iw;function g8(){return iw||(iw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gD();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(jy)),jy}var sw;function y8(){return sw||(sw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g8();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(Oy)),Oy}var ow;function v8(){return ow||(ow=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yD(),n=y8();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),p=new Array(u);for(let f=0;f<u;f++)p[f]=i,i+=l;return p}e.range=r})(Ny)),Ny}var _y,lw;function x8(){return lw||(lw=1,_y=v8().range),_y}var b8=x8();const dN=Ca(b8);function gs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function S8(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qv(e){let t,n,r;e.length!==2?(t=gs,n=(u,p)=>gs(e(u),p),r=(u,p)=>e(u)-p):(t=e===gs||e===S8?e:C8,n=e,r=e);function i(u,p,f=0,h=u.length){if(f<h){if(t(p,p)!==0)return h;do{const g=f+h>>>1;n(u[g],p)<0?f=g+1:h=g}while(f<h)}return f}function s(u,p,f=0,h=u.length){if(f<h){if(t(p,p)!==0)return h;do{const g=f+h>>>1;n(u[g],p)<=0?f=g+1:h=g}while(f<h)}return f}function l(u,p,f=0,h=u.length){const g=i(u,p,f,h-1);return g>f&&r(u[g-1],p)>-r(u[g],p)?g-1:g}return{left:i,center:l,right:s}}function C8(){return 0}function fN(e){return e===null?NaN:+e}function*A8(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const E8=Qv(gs),Ru=E8.right;Qv(fN).center;class cw extends Map{constructor(t,n=T8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(uw(this,t))}has(t){return super.has(uw(this,t))}set(t,n){return super.set(w8(this,t),n)}delete(t){return super.delete(P8(this,t))}}function uw({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function w8({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function P8({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function T8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function D8(e=gs){if(e===gs)return pN;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function pN(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const N8=Math.sqrt(50),O8=Math.sqrt(10),j8=Math.sqrt(2);function pp(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=N8?10:s>=O8?5:s>=j8?2:1;let u,p,f;return i<0?(f=Math.pow(10,-i)/l,u=Math.round(e*f),p=Math.round(t*f),u/f<e&&++u,p/f>t&&--p,f=-f):(f=Math.pow(10,i)*l,u=Math.round(e/f),p=Math.round(t/f),u*f<e&&++u,p*f>t&&--p),p<u&&.5<=n&&n<2?pp(e,t,n*2):[u,p,f]}function U0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?pp(t,e,n):pp(e,t,n);if(!(s>=i))return[];const u=s-i+1,p=new Array(u);if(r)if(l<0)for(let f=0;f<u;++f)p[f]=(s-f)/-l;else for(let f=0;f<u;++f)p[f]=(s-f)*l;else if(l<0)for(let f=0;f<u;++f)p[f]=(i+f)/-l;else for(let f=0;f<u;++f)p[f]=(i+f)*l;return p}function H0(e,t,n){return t=+t,e=+e,n=+n,pp(e,t,n)[2]}function G0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?H0(t,e,n):H0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function dw(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function fw(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function hN(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?pN:D8(i);r>n;){if(r-n>600){const p=r-n+1,f=t-n+1,h=Math.log(p),g=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*g*(p-g)/p)*(f-p/2<0?-1:1),x=Math.max(n,Math.floor(t-f*g/p+y)),S=Math.min(r,Math.floor(t+(p-f)*g/p+y));hN(e,t,x,S,i)}const s=e[t];let l=n,u=r;for(ru(e,n,t),i(e[r],s)>0&&ru(e,n,r);l<u;){for(ru(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?ru(e,n,u):(++u,ru(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function ru(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function _8(e,t,n){if(e=Float64Array.from(A8(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return fw(e);if(t>=1)return dw(e);var r,i=(r-1)*t,s=Math.floor(i),l=dw(hN(e,s).subarray(0,s+1)),u=fw(e.subarray(s+1));return l+(u-l)*(i-s)}}function k8(e,t,n=fN){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function M8(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function ra(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Di(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const q0=Symbol("implicit");function Jv(){var e=new cw,t=[],n=[],r=q0;function i(s){let l=e.get(s);if(l===void 0){if(r!==q0)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new cw;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Jv(t,n).unknown(r)},ra.apply(i,arguments),i}function Zv(){var e=Jv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,p=0,f=0,h=.5;delete e.unknown;function g(){var y=t().length,x=i<r,S=x?i:r,C=x?r:i;s=(C-S)/Math.max(1,y-p+f*2),u&&(s=Math.floor(s)),S+=(C-S-s*(y-p))*h,l=s*(1-p),u&&(S=Math.round(S),l=Math.round(l));var A=M8(y).map(function(w){return S+s*w});return n(x?A.reverse():A)}return e.domain=function(y){return arguments.length?(t(y),g()):t()},e.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,g()):[r,i]},e.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,g()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(y){return arguments.length?(u=!!y,g()):u},e.padding=function(y){return arguments.length?(p=Math.min(1,f=+y),g()):p},e.paddingInner=function(y){return arguments.length?(p=Math.min(1,y),g()):p},e.paddingOuter=function(y){return arguments.length?(f=+y,g()):f},e.align=function(y){return arguments.length?(h=Math.max(0,Math.min(1,y)),g()):h},e.copy=function(){return Zv(t(),[r,i]).round(u).paddingInner(p).paddingOuter(f).align(h)},ra.apply(g(),arguments)}function mN(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return mN(t())},e}function I8(){return mN(Zv.apply(null,arguments).paddingInner(1))}function ex(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Lu(){}var wu=.7,hp=1/wu,El="\\s*([+-]?\\d+)\\s*",Pu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ba="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",R8=/^#([0-9a-f]{3,8})$/,L8=new RegExp(`^rgb\\(${El},${El},${El}\\)$`),$8=new RegExp(`^rgb\\(${Ba},${Ba},${Ba}\\)$`),B8=new RegExp(`^rgba\\(${El},${El},${El},${Pu}\\)$`),z8=new RegExp(`^rgba\\(${Ba},${Ba},${Ba},${Pu}\\)$`),U8=new RegExp(`^hsl\\(${Pu},${Ba},${Ba}\\)$`),H8=new RegExp(`^hsla\\(${Pu},${Ba},${Ba},${Pu}\\)$`),pw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ex(Lu,Tu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hw,formatHex:hw,formatHex8:G8,formatHsl:q8,formatRgb:mw,toString:mw});function hw(){return this.rgb().formatHex()}function G8(){return this.rgb().formatHex8()}function q8(){return yN(this).formatHsl()}function mw(){return this.rgb().formatRgb()}function Tu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=R8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gw(t):n===3?new pr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Nf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Nf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=L8.exec(e))?new pr(t[1],t[2],t[3],1):(t=$8.exec(e))?new pr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=B8.exec(e))?Nf(t[1],t[2],t[3],t[4]):(t=z8.exec(e))?Nf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=U8.exec(e))?xw(t[1],t[2]/100,t[3]/100,1):(t=H8.exec(e))?xw(t[1],t[2]/100,t[3]/100,t[4]):pw.hasOwnProperty(e)?gw(pw[e]):e==="transparent"?new pr(NaN,NaN,NaN,0):null}function gw(e){return new pr(e>>16&255,e>>8&255,e&255,1)}function Nf(e,t,n,r){return r<=0&&(e=t=n=NaN),new pr(e,t,n,r)}function Y8(e){return e instanceof Lu||(e=Tu(e)),e?(e=e.rgb(),new pr(e.r,e.g,e.b,e.opacity)):new pr}function Y0(e,t,n,r){return arguments.length===1?Y8(e):new pr(e,t,n,r??1)}function pr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ex(pr,Y0,gN(Lu,{brighter(e){return e=e==null?hp:Math.pow(hp,e),new pr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wu:Math.pow(wu,e),new pr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pr(po(this.r),po(this.g),po(this.b),mp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yw,formatHex:yw,formatHex8:F8,formatRgb:vw,toString:vw}));function yw(){return`#${oo(this.r)}${oo(this.g)}${oo(this.b)}`}function F8(){return`#${oo(this.r)}${oo(this.g)}${oo(this.b)}${oo((isNaN(this.opacity)?1:this.opacity)*255)}`}function vw(){const e=mp(this.opacity);return`${e===1?"rgb(":"rgba("}${po(this.r)}, ${po(this.g)}, ${po(this.b)}${e===1?")":`, ${e})`}`}function mp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function po(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function oo(e){return e=po(e),(e<16?"0":"")+e.toString(16)}function xw(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Sa(e,t,n,r)}function yN(e){if(e instanceof Sa)return new Sa(e.h,e.s,e.l,e.opacity);if(e instanceof Lu||(e=Tu(e)),!e)return new Sa;if(e instanceof Sa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,p=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=p<.5?s+i:2-s-i,l*=60):u=p>0&&p<1?0:l,new Sa(l,u,p,e.opacity)}function V8(e,t,n,r){return arguments.length===1?yN(e):new Sa(e,t,n,r??1)}function Sa(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ex(Sa,V8,gN(Lu,{brighter(e){return e=e==null?hp:Math.pow(hp,e),new Sa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wu:Math.pow(wu,e),new Sa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new pr(ky(e>=240?e-240:e+120,i,r),ky(e,i,r),ky(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Sa(bw(this.h),Of(this.s),Of(this.l),mp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mp(this.opacity);return`${e===1?"hsl(":"hsla("}${bw(this.h)}, ${Of(this.s)*100}%, ${Of(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bw(e){return e=(e||0)%360,e<0?e+360:e}function Of(e){return Math.max(0,Math.min(1,e||0))}function ky(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tx=e=>()=>e;function K8(e,t){return function(n){return e+n*t}}function W8(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function X8(e){return(e=+e)==1?vN:function(t,n){return n-t?W8(t,n,e):tx(isNaN(t)?n:t)}}function vN(e,t){var n=t-e;return n?K8(e,n):tx(isNaN(e)?t:e)}const Sw=(function e(t){var n=X8(t);function r(i,s){var l=n((i=Y0(i)).r,(s=Y0(s)).r),u=n(i.g,s.g),p=n(i.b,s.b),f=vN(i.opacity,s.opacity);return function(h){return i.r=l(h),i.g=u(h),i.b=p(h),i.opacity=f(h),i+""}}return r.gamma=e,r})(1);function Q8(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function J8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Z8(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=$l(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function eB(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function gp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function tB(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=$l(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var F0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,My=new RegExp(F0.source,"g");function nB(e){return function(){return e}}function rB(e){return function(t){return e(t)+""}}function aB(e,t){var n=F0.lastIndex=My.lastIndex=0,r,i,s,l=-1,u=[],p=[];for(e=e+"",t=t+"";(r=F0.exec(e))&&(i=My.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,p.push({i:l,x:gp(r,i)})),n=My.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?p[0]?rB(p[0].x):nB(t):(t=p.length,function(f){for(var h=0,g;h<t;++h)u[(g=p[h]).i]=g.x(f);return u.join("")})}function $l(e,t){var n=typeof t,r;return t==null||n==="boolean"?tx(t):(n==="number"?gp:n==="string"?(r=Tu(t))?(t=r,Sw):aB:t instanceof Tu?Sw:t instanceof Date?eB:J8(t)?Q8:Array.isArray(t)?Z8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?tB:gp)(e,t)}function nx(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function iB(e,t){t===void 0&&(t=e,e=$l);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function sB(e){return function(){return e}}function yp(e){return+e}var Cw=[0,1];function Jn(e){return e}function V0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:sB(isNaN(t)?NaN:.5)}function oB(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function lB(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=V0(i,r),s=n(l,s)):(r=V0(r,i),s=n(s,l)),function(u){return s(r(u))}}function cB(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=V0(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var p=Ru(e,u,1,r)-1;return s[p](i[p](u))}}function $u(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zp(){var e=Cw,t=Cw,n=$l,r,i,s,l=Jn,u,p,f;function h(){var y=Math.min(e.length,t.length);return l!==Jn&&(l=oB(e[0],e[y-1])),u=y>2?cB:lB,p=f=null,g}function g(y){return y==null||isNaN(y=+y)?s:(p||(p=u(e.map(r),t,n)))(r(l(y)))}return g.invert=function(y){return l(i((f||(f=u(t,e.map(r),gp)))(y)))},g.domain=function(y){return arguments.length?(e=Array.from(y,yp),h()):e.slice()},g.range=function(y){return arguments.length?(t=Array.from(y),h()):t.slice()},g.rangeRound=function(y){return t=Array.from(y),n=nx,h()},g.clamp=function(y){return arguments.length?(l=y?!0:Jn,h()):l!==Jn},g.interpolate=function(y){return arguments.length?(n=y,h()):n},g.unknown=function(y){return arguments.length?(s=y,g):s},function(y,x){return r=y,i=x,h()}}function rx(){return Zp()(Jn,Jn)}function uB(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Nl(e){return e=vp(Math.abs(e)),e?e[1]:NaN}function dB(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],p=0;i>0&&u>0&&(p+u+1>r&&(u=Math.max(1,r-p)),s.push(n.substring(i-=u,i+u)),!((p+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function fB(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var pB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Du(e){if(!(t=pB.exec(e)))throw new Error("invalid format: "+e);var t;return new ax({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Du.prototype=ax.prototype;function ax(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ax.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hB(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var xN;function mB(e,t){var n=vp(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(xN=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+vp(e,Math.max(0,t+s-1))[0]}function Aw(e,t){var n=vp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ew={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:uB,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Aw(e*100,t),r:Aw,s:mB,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ww(e){return e}var Pw=Array.prototype.map,Tw=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function gB(e){var t=e.grouping===void 0||e.thousands===void 0?ww:dB(Pw.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?ww:fB(Pw.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function f(g){g=Du(g);var y=g.fill,x=g.align,S=g.sign,C=g.symbol,A=g.zero,w=g.width,P=g.comma,T=g.precision,N=g.trim,_=g.type;_==="n"?(P=!0,_="g"):Ew[_]||(T===void 0&&(T=12),N=!0,_="g"),(A||y==="0"&&x==="=")&&(A=!0,y="0",x="=");var j=C==="$"?n:C==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",k=C==="$"?r:/[%p]/.test(_)?l:"",z=Ew[_],F=/[defgprs%]/.test(_);T=T===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function M(R){var U=j,W=k,Z,Q,I;if(_==="c")W=z(R)+W,R="";else{R=+R;var G=R<0||1/R<0;if(R=isNaN(R)?p:z(Math.abs(R),T),N&&(R=hB(R)),G&&+R==0&&S!=="+"&&(G=!1),U=(G?S==="("?S:u:S==="-"||S==="("?"":S)+U,W=(_==="s"?Tw[8+xN/3]:"")+W+(G&&S==="("?")":""),F){for(Z=-1,Q=R.length;++Z<Q;)if(I=R.charCodeAt(Z),48>I||I>57){W=(I===46?i+R.slice(Z+1):R.slice(Z))+W,R=R.slice(0,Z);break}}}P&&!A&&(R=t(R,1/0));var ie=U.length+R.length+W.length,le=ie<w?new Array(w-ie+1).join(y):"";switch(P&&A&&(R=t(le+R,le.length?w-W.length:1/0),le=""),x){case"<":R=U+R+W+le;break;case"=":R=U+le+R+W;break;case"^":R=le.slice(0,ie=le.length>>1)+U+R+W+le.slice(ie);break;default:R=le+U+R+W;break}return s(R)}return M.toString=function(){return g+""},M}function h(g,y){var x=f((g=Du(g),g.type="f",g)),S=Math.max(-8,Math.min(8,Math.floor(Nl(y)/3)))*3,C=Math.pow(10,-S),A=Tw[8+S/3];return function(w){return x(C*w)+A}}return{format:f,formatPrefix:h}}var jf,ix,bN;yB({thousands:",",grouping:[3],currency:["$",""]});function yB(e){return jf=gB(e),ix=jf.format,bN=jf.formatPrefix,jf}function vB(e){return Math.max(0,-Nl(Math.abs(e)))}function xB(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nl(t)/3)))*3-Nl(Math.abs(e)))}function bB(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Nl(t)-Nl(e))+1}function SN(e,t,n,r){var i=G0(e,t,n),s;switch(r=Du(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=xB(i,l))&&(r.precision=s),bN(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=bB(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=vB(i))&&(r.precision=s-(r.type==="%")*2);break}}return ix(r)}function bs(e){var t=e.domain;return e.ticks=function(n){var r=t();return U0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return SN(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],p,f,h=10;for(u<l&&(f=l,l=u,u=f,f=i,i=s,s=f);h-- >0;){if(f=H0(l,u,n),f===p)return r[i]=l,r[s]=u,t(r);if(f>0)l=Math.floor(l/f)*f,u=Math.ceil(u/f)*f;else if(f<0)l=Math.ceil(l*f)/f,u=Math.floor(u*f)/f;else break;p=f}return e},e}function CN(){var e=rx();return e.copy=function(){return $u(e,CN())},ra.apply(e,arguments),bs(e)}function AN(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,yp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return AN(e).unknown(t)},e=arguments.length?Array.from(e,yp):[0,1],bs(n)}function EN(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Dw(e){return Math.log(e)}function Nw(e){return Math.exp(e)}function SB(e){return-Math.log(-e)}function CB(e){return-Math.exp(-e)}function AB(e){return isFinite(e)?+("1e"+e):e<0?0:e}function EB(e){return e===10?AB:e===Math.E?Math.exp:t=>Math.pow(e,t)}function wB(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Ow(e){return(t,n)=>-e(-t,n)}function sx(e){const t=e(Dw,Nw),n=t.domain;let r=10,i,s;function l(){return i=wB(r),s=EB(r),n()[0]<0?(i=Ow(i),s=Ow(s),e(SB,CB)):e(Dw,Nw),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const p=n();let f=p[0],h=p[p.length-1];const g=h<f;g&&([f,h]=[h,f]);let y=i(f),x=i(h),S,C;const A=u==null?10:+u;let w=[];if(!(r%1)&&x-y<A){if(y=Math.floor(y),x=Math.ceil(x),f>0){for(;y<=x;++y)for(S=1;S<r;++S)if(C=y<0?S/s(-y):S*s(y),!(C<f)){if(C>h)break;w.push(C)}}else for(;y<=x;++y)for(S=r-1;S>=1;--S)if(C=y>0?S/s(-y):S*s(y),!(C<f)){if(C>h)break;w.push(C)}w.length*2<A&&(w=U0(f,h,A))}else w=U0(y,x,Math.min(x-y,A)).map(s);return g?w.reverse():w},t.tickFormat=(u,p)=>{if(u==null&&(u=10),p==null&&(p=r===10?"s":","),typeof p!="function"&&(!(r%1)&&(p=Du(p)).precision==null&&(p.trim=!0),p=ix(p)),u===1/0)return p;const f=Math.max(1,r*u/t.ticks().length);return h=>{let g=h/s(Math.round(i(h)));return g*r<r-.5&&(g*=r),g<=f?p(h):""}},t.nice=()=>n(EN(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function wN(){const e=sx(Zp()).domain([1,10]);return e.copy=()=>$u(e,wN()).base(e.base()),ra.apply(e,arguments),e}function jw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function _w(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ox(e){var t=1,n=e(jw(t),_w(t));return n.constant=function(r){return arguments.length?e(jw(t=+r),_w(t)):t},bs(n)}function PN(){var e=ox(Zp());return e.copy=function(){return $u(e,PN()).constant(e.constant())},ra.apply(e,arguments)}function kw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function PB(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function TB(e){return e<0?-e*e:e*e}function lx(e){var t=e(Jn,Jn),n=1;function r(){return n===1?e(Jn,Jn):n===.5?e(PB,TB):e(kw(n),kw(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},bs(t)}function cx(){var e=lx(Zp());return e.copy=function(){return $u(e,cx()).exponent(e.exponent())},ra.apply(e,arguments),e}function DB(){return cx.apply(null,arguments).exponent(.5)}function Mw(e){return Math.sign(e)*e*e}function NB(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function TN(){var e=rx(),t=[0,1],n=!1,r;function i(s){var l=NB(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(Mw(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,yp)).map(Mw)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return TN(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},ra.apply(i,arguments),bs(i)}function DN(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=k8(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[Ru(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(gs),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return DN().domain(e).range(t).unknown(r)},ra.apply(s,arguments)}function NN(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(p){return p!=null&&p<=p?i[Ru(r,p,0,n)]:s}function u(){var p=-1;for(r=new Array(n);++p<n;)r[p]=((p+1)*t-(p-n)*e)/(n+1);return l}return l.domain=function(p){return arguments.length?([e,t]=p,e=+e,t=+t,u()):[e,t]},l.range=function(p){return arguments.length?(n=(i=Array.from(p)).length-1,u()):i.slice()},l.invertExtent=function(p){var f=i.indexOf(p);return f<0?[NaN,NaN]:f<1?[e,r[0]]:f>=n?[r[n-1],t]:[r[f-1],r[f]]},l.unknown=function(p){return arguments.length&&(s=p),l},l.thresholds=function(){return r.slice()},l.copy=function(){return NN().domain([e,t]).range(i).unknown(s)},ra.apply(bs(l),arguments)}function ON(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Ru(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return ON().domain(e).range(t).unknown(n)},ra.apply(i,arguments)}const Iy=new Date,Ry=new Date;function un(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const p=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return p;let f;do p.push(f=new Date(+s)),t(s,u),e(s);while(f<s&&s<l);return p},i.filter=s=>un(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(Iy.setTime(+s),Ry.setTime(+l),e(Iy),e(Ry),Math.floor(n(Iy,Ry))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const xp=un(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?un(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):xp);xp.range;const gi=1e3,Jr=gi*60,yi=Jr*60,Ci=yi*24,ux=Ci*7,Iw=Ci*30,Ly=Ci*365,lo=un(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*gi)},(e,t)=>(t-e)/gi,e=>e.getUTCSeconds());lo.range;const dx=un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gi)},(e,t)=>{e.setTime(+e+t*Jr)},(e,t)=>(t-e)/Jr,e=>e.getMinutes());dx.range;const fx=un(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jr)},(e,t)=>(t-e)/Jr,e=>e.getUTCMinutes());fx.range;const px=un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gi-e.getMinutes()*Jr)},(e,t)=>{e.setTime(+e+t*yi)},(e,t)=>(t-e)/yi,e=>e.getHours());px.range;const hx=un(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yi)},(e,t)=>(t-e)/yi,e=>e.getUTCHours());hx.range;const Bu=un(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jr)/Ci,e=>e.getDate()-1);Bu.range;const eh=un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ci,e=>e.getUTCDate()-1);eh.range;const jN=un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ci,e=>Math.floor(e/Ci));jN.range;function To(e){return un(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Jr)/ux)}const th=To(0),bp=To(1),OB=To(2),jB=To(3),Ol=To(4),_B=To(5),kB=To(6);th.range;bp.range;OB.range;jB.range;Ol.range;_B.range;kB.range;function Do(e){return un(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ux)}const nh=Do(0),Sp=Do(1),MB=Do(2),IB=Do(3),jl=Do(4),RB=Do(5),LB=Do(6);nh.range;Sp.range;MB.range;IB.range;jl.range;RB.range;LB.range;const mx=un(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());mx.range;const gx=un(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gx.range;const Ai=un(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ai.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:un(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ai.range;const Ei=un(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ei.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:un(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ei.range;function _N(e,t,n,r,i,s){const l=[[lo,1,gi],[lo,5,5*gi],[lo,15,15*gi],[lo,30,30*gi],[s,1,Jr],[s,5,5*Jr],[s,15,15*Jr],[s,30,30*Jr],[i,1,yi],[i,3,3*yi],[i,6,6*yi],[i,12,12*yi],[r,1,Ci],[r,2,2*Ci],[n,1,ux],[t,1,Iw],[t,3,3*Iw],[e,1,Ly]];function u(f,h,g){const y=h<f;y&&([f,h]=[h,f]);const x=g&&typeof g.range=="function"?g:p(f,h,g),S=x?x.range(f,+h+1):[];return y?S.reverse():S}function p(f,h,g){const y=Math.abs(h-f)/g,x=Qv(([,,A])=>A).right(l,y);if(x===l.length)return e.every(G0(f/Ly,h/Ly,g));if(x===0)return xp.every(Math.max(G0(f,h,g),1));const[S,C]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return S.every(C)}return[u,p]}const[$B,BB]=_N(Ei,gx,nh,jN,hx,fx),[zB,UB]=_N(Ai,mx,th,Bu,px,dx);function $y(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function By(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function au(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function HB(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,p=e.shortMonths,f=iu(i),h=su(i),g=iu(s),y=su(s),x=iu(l),S=su(l),C=iu(u),A=su(u),w=iu(p),P=su(p),T={a:G,A:ie,b:le,B:$,c:null,d:Uw,e:Uw,f:d6,g:S6,G:A6,H:l6,I:c6,j:u6,L:kN,m:f6,M:p6,p:q,q:V,Q:qw,s:Yw,S:h6,u:m6,U:g6,V:y6,w:v6,W:x6,x:null,X:null,y:b6,Y:C6,Z:E6,"%":Gw},N={a:ne,A:ye,b:Se,B:Ce,c:null,d:Hw,e:Hw,f:D6,g:$6,G:z6,H:w6,I:P6,j:T6,L:IN,m:N6,M:O6,p:Me,q:qe,Q:qw,s:Yw,S:j6,u:_6,U:k6,V:M6,w:I6,W:R6,x:null,X:null,y:L6,Y:B6,Z:U6,"%":Gw},_={a:M,A:R,b:U,B:W,c:Z,d:Bw,e:Bw,f:a6,g:$w,G:Lw,H:zw,I:zw,j:e6,L:r6,m:ZB,M:t6,p:F,q:JB,Q:s6,s:o6,S:n6,u:VB,U:KB,V:WB,w:FB,W:XB,x:Q,X:I,y:$w,Y:Lw,Z:QB,"%":i6};T.x=j(n,T),T.X=j(r,T),T.c=j(t,T),N.x=j(n,N),N.X=j(r,N),N.c=j(t,N);function j(be,we){return function(Oe){var ge=[],xt=-1,He=0,Bt=be.length,Gt,wt,er;for(Oe instanceof Date||(Oe=new Date(+Oe));++xt<Bt;)be.charCodeAt(xt)===37&&(ge.push(be.slice(He,xt)),(wt=Rw[Gt=be.charAt(++xt)])!=null?Gt=be.charAt(++xt):wt=Gt==="e"?" ":"0",(er=we[Gt])&&(Gt=er(Oe,wt)),ge.push(Gt),He=xt+1);return ge.push(be.slice(He,xt)),ge.join("")}}function k(be,we){return function(Oe){var ge=au(1900,void 0,1),xt=z(ge,be,Oe+="",0),He,Bt;if(xt!=Oe.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(we&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(He=By(au(ge.y,0,1)),Bt=He.getUTCDay(),He=Bt>4||Bt===0?Sp.ceil(He):Sp(He),He=eh.offset(He,(ge.V-1)*7),ge.y=He.getUTCFullYear(),ge.m=He.getUTCMonth(),ge.d=He.getUTCDate()+(ge.w+6)%7):(He=$y(au(ge.y,0,1)),Bt=He.getDay(),He=Bt>4||Bt===0?bp.ceil(He):bp(He),He=Bu.offset(He,(ge.V-1)*7),ge.y=He.getFullYear(),ge.m=He.getMonth(),ge.d=He.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),Bt="Z"in ge?By(au(ge.y,0,1)).getUTCDay():$y(au(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(Bt+5)%7:ge.w+ge.U*7-(Bt+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,By(ge)):$y(ge)}}function z(be,we,Oe,ge){for(var xt=0,He=we.length,Bt=Oe.length,Gt,wt;xt<He;){if(ge>=Bt)return-1;if(Gt=we.charCodeAt(xt++),Gt===37){if(Gt=we.charAt(xt++),wt=_[Gt in Rw?we.charAt(xt++):Gt],!wt||(ge=wt(be,Oe,ge))<0)return-1}else if(Gt!=Oe.charCodeAt(ge++))return-1}return ge}function F(be,we,Oe){var ge=f.exec(we.slice(Oe));return ge?(be.p=h.get(ge[0].toLowerCase()),Oe+ge[0].length):-1}function M(be,we,Oe){var ge=x.exec(we.slice(Oe));return ge?(be.w=S.get(ge[0].toLowerCase()),Oe+ge[0].length):-1}function R(be,we,Oe){var ge=g.exec(we.slice(Oe));return ge?(be.w=y.get(ge[0].toLowerCase()),Oe+ge[0].length):-1}function U(be,we,Oe){var ge=w.exec(we.slice(Oe));return ge?(be.m=P.get(ge[0].toLowerCase()),Oe+ge[0].length):-1}function W(be,we,Oe){var ge=C.exec(we.slice(Oe));return ge?(be.m=A.get(ge[0].toLowerCase()),Oe+ge[0].length):-1}function Z(be,we,Oe){return z(be,t,we,Oe)}function Q(be,we,Oe){return z(be,n,we,Oe)}function I(be,we,Oe){return z(be,r,we,Oe)}function G(be){return l[be.getDay()]}function ie(be){return s[be.getDay()]}function le(be){return p[be.getMonth()]}function $(be){return u[be.getMonth()]}function q(be){return i[+(be.getHours()>=12)]}function V(be){return 1+~~(be.getMonth()/3)}function ne(be){return l[be.getUTCDay()]}function ye(be){return s[be.getUTCDay()]}function Se(be){return p[be.getUTCMonth()]}function Ce(be){return u[be.getUTCMonth()]}function Me(be){return i[+(be.getUTCHours()>=12)]}function qe(be){return 1+~~(be.getUTCMonth()/3)}return{format:function(be){var we=j(be+="",T);return we.toString=function(){return be},we},parse:function(be){var we=k(be+="",!1);return we.toString=function(){return be},we},utcFormat:function(be){var we=j(be+="",N);return we.toString=function(){return be},we},utcParse:function(be){var we=k(be+="",!0);return we.toString=function(){return be},we}}}var Rw={"-":"",_:" ",0:"0"},bn=/^\s*\d+/,GB=/^%/,qB=/[\\^$*+?|[\]().{}]/g;function it(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function YB(e){return e.replace(qB,"\\$&")}function iu(e){return new RegExp("^(?:"+e.map(YB).join("|")+")","i")}function su(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function FB(e,t,n){var r=bn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function VB(e,t,n){var r=bn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function KB(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function WB(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function XB(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Lw(e,t,n){var r=bn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function $w(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function QB(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function JB(e,t,n){var r=bn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function ZB(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Bw(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function e6(e,t,n){var r=bn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function zw(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function t6(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function n6(e,t,n){var r=bn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function r6(e,t,n){var r=bn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function a6(e,t,n){var r=bn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function i6(e,t,n){var r=GB.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function s6(e,t,n){var r=bn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function o6(e,t,n){var r=bn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Uw(e,t){return it(e.getDate(),t,2)}function l6(e,t){return it(e.getHours(),t,2)}function c6(e,t){return it(e.getHours()%12||12,t,2)}function u6(e,t){return it(1+Bu.count(Ai(e),e),t,3)}function kN(e,t){return it(e.getMilliseconds(),t,3)}function d6(e,t){return kN(e,t)+"000"}function f6(e,t){return it(e.getMonth()+1,t,2)}function p6(e,t){return it(e.getMinutes(),t,2)}function h6(e,t){return it(e.getSeconds(),t,2)}function m6(e){var t=e.getDay();return t===0?7:t}function g6(e,t){return it(th.count(Ai(e)-1,e),t,2)}function MN(e){var t=e.getDay();return t>=4||t===0?Ol(e):Ol.ceil(e)}function y6(e,t){return e=MN(e),it(Ol.count(Ai(e),e)+(Ai(e).getDay()===4),t,2)}function v6(e){return e.getDay()}function x6(e,t){return it(bp.count(Ai(e)-1,e),t,2)}function b6(e,t){return it(e.getFullYear()%100,t,2)}function S6(e,t){return e=MN(e),it(e.getFullYear()%100,t,2)}function C6(e,t){return it(e.getFullYear()%1e4,t,4)}function A6(e,t){var n=e.getDay();return e=n>=4||n===0?Ol(e):Ol.ceil(e),it(e.getFullYear()%1e4,t,4)}function E6(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+it(t/60|0,"0",2)+it(t%60,"0",2)}function Hw(e,t){return it(e.getUTCDate(),t,2)}function w6(e,t){return it(e.getUTCHours(),t,2)}function P6(e,t){return it(e.getUTCHours()%12||12,t,2)}function T6(e,t){return it(1+eh.count(Ei(e),e),t,3)}function IN(e,t){return it(e.getUTCMilliseconds(),t,3)}function D6(e,t){return IN(e,t)+"000"}function N6(e,t){return it(e.getUTCMonth()+1,t,2)}function O6(e,t){return it(e.getUTCMinutes(),t,2)}function j6(e,t){return it(e.getUTCSeconds(),t,2)}function _6(e){var t=e.getUTCDay();return t===0?7:t}function k6(e,t){return it(nh.count(Ei(e)-1,e),t,2)}function RN(e){var t=e.getUTCDay();return t>=4||t===0?jl(e):jl.ceil(e)}function M6(e,t){return e=RN(e),it(jl.count(Ei(e),e)+(Ei(e).getUTCDay()===4),t,2)}function I6(e){return e.getUTCDay()}function R6(e,t){return it(Sp.count(Ei(e)-1,e),t,2)}function L6(e,t){return it(e.getUTCFullYear()%100,t,2)}function $6(e,t){return e=RN(e),it(e.getUTCFullYear()%100,t,2)}function B6(e,t){return it(e.getUTCFullYear()%1e4,t,4)}function z6(e,t){var n=e.getUTCDay();return e=n>=4||n===0?jl(e):jl.ceil(e),it(e.getUTCFullYear()%1e4,t,4)}function U6(){return"+0000"}function Gw(){return"%"}function qw(e){return+e}function Yw(e){return Math.floor(+e/1e3)}var gl,LN,$N;H6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function H6(e){return gl=HB(e),LN=gl.format,gl.parse,$N=gl.utcFormat,gl.utcParse,gl}function G6(e){return new Date(e)}function q6(e){return e instanceof Date?+e:+new Date(+e)}function yx(e,t,n,r,i,s,l,u,p,f){var h=rx(),g=h.invert,y=h.domain,x=f(".%L"),S=f(":%S"),C=f("%I:%M"),A=f("%I %p"),w=f("%a %d"),P=f("%b %d"),T=f("%B"),N=f("%Y");function _(j){return(p(j)<j?x:u(j)<j?S:l(j)<j?C:s(j)<j?A:r(j)<j?i(j)<j?w:P:n(j)<j?T:N)(j)}return h.invert=function(j){return new Date(g(j))},h.domain=function(j){return arguments.length?y(Array.from(j,q6)):y().map(G6)},h.ticks=function(j){var k=y();return e(k[0],k[k.length-1],j??10)},h.tickFormat=function(j,k){return k==null?_:f(k)},h.nice=function(j){var k=y();return(!j||typeof j.range!="function")&&(j=t(k[0],k[k.length-1],j??10)),j?y(EN(k,j)):h},h.copy=function(){return $u(h,yx(e,t,n,r,i,s,l,u,p,f))},h}function Y6(){return ra.apply(yx(zB,UB,Ai,mx,th,Bu,px,dx,lo,LN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function F6(){return ra.apply(yx($B,BB,Ei,gx,nh,eh,hx,fx,lo,$N).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rh(){var e=0,t=1,n,r,i,s,l=Jn,u=!1,p;function f(g){return g==null||isNaN(g=+g)?p:l(i===0?.5:(g=(s(g)-n)*i,u?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(g){return arguments.length?(u=!!g,f):u},f.interpolator=function(g){return arguments.length?(l=g,f):l};function h(g){return function(y){var x,S;return arguments.length?([x,S]=y,l=g(x,S),f):[l(0),l(1)]}}return f.range=h($l),f.rangeRound=h(nx),f.unknown=function(g){return arguments.length?(p=g,f):p},function(g){return s=g,n=g(e),r=g(t),i=n===r?0:1/(r-n),f}}function Ss(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function BN(){var e=bs(rh()(Jn));return e.copy=function(){return Ss(e,BN())},Di.apply(e,arguments)}function zN(){var e=sx(rh()).domain([1,10]);return e.copy=function(){return Ss(e,zN()).base(e.base())},Di.apply(e,arguments)}function UN(){var e=ox(rh());return e.copy=function(){return Ss(e,UN()).constant(e.constant())},Di.apply(e,arguments)}function vx(){var e=lx(rh());return e.copy=function(){return Ss(e,vx()).exponent(e.exponent())},Di.apply(e,arguments)}function V6(){return vx.apply(null,arguments).exponent(.5)}function HN(){var e=[],t=Jn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Ru(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(gs),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>_8(e,s/r))},n.copy=function(){return HN(t).domain(e)},Di.apply(n,arguments)}function ah(){var e=0,t=.5,n=1,r=1,i,s,l,u,p,f=Jn,h,g=!1,y;function x(C){return isNaN(C=+C)?y:(C=.5+((C=+h(C))-s)*(r*C<r*s?u:p),f(g?Math.max(0,Math.min(1,C)):C))}x.domain=function(C){return arguments.length?([e,t,n]=C,i=h(e=+e),s=h(t=+t),l=h(n=+n),u=i===s?0:.5/(s-i),p=s===l?0:.5/(l-s),r=s<i?-1:1,x):[e,t,n]},x.clamp=function(C){return arguments.length?(g=!!C,x):g},x.interpolator=function(C){return arguments.length?(f=C,x):f};function S(C){return function(A){var w,P,T;return arguments.length?([w,P,T]=A,f=iB(C,[w,P,T]),x):[f(0),f(.5),f(1)]}}return x.range=S($l),x.rangeRound=S(nx),x.unknown=function(C){return arguments.length?(y=C,x):y},function(C){return h=C,i=C(e),s=C(t),l=C(n),u=i===s?0:.5/(s-i),p=s===l?0:.5/(l-s),r=s<i?-1:1,x}}function GN(){var e=bs(ah()(Jn));return e.copy=function(){return Ss(e,GN())},Di.apply(e,arguments)}function qN(){var e=sx(ah()).domain([.1,1,10]);return e.copy=function(){return Ss(e,qN()).base(e.base())},Di.apply(e,arguments)}function YN(){var e=ox(ah());return e.copy=function(){return Ss(e,YN()).constant(e.constant())},Di.apply(e,arguments)}function xx(){var e=lx(ah());return e.copy=function(){return Ss(e,xx()).exponent(e.exponent())},Di.apply(e,arguments)}function K6(){return xx.apply(null,arguments).exponent(.5)}const du=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Zv,scaleDiverging:GN,scaleDivergingLog:qN,scaleDivergingPow:xx,scaleDivergingSqrt:K6,scaleDivergingSymlog:YN,scaleIdentity:AN,scaleImplicit:q0,scaleLinear:CN,scaleLog:wN,scaleOrdinal:Jv,scalePoint:I8,scalePow:cx,scaleQuantile:DN,scaleQuantize:NN,scaleRadial:TN,scaleSequential:BN,scaleSequentialLog:zN,scaleSequentialPow:vx,scaleSequentialQuantile:HN,scaleSequentialSqrt:V6,scaleSequentialSymlog:UN,scaleSqrt:DB,scaleSymlog:PN,scaleThreshold:ON,scaleTime:Y6,scaleUtc:F6,tickFormat:SN},Symbol.toStringTag,{value:"Module"}));var Cs=e=>e.chartData,bx=se([Cs],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Sx=(e,t,n,r)=>r?bx(e):Cs(e);function _l(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(kr(t)&&kr(n))return!0}return!1}function Fw(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function W6(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(kr(n))i=n;else if(typeof n=="function")return;if(kr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(_l(l))return l}}function X6(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(_l(r))return Fw(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(ke(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&RE.test(i)){var p=RE.exec(i);if(p==null||t==null)l=void 0;else{var f=+p[1];l=t[0]-f}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(ke(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&LE.test(s)){var h=LE.exec(s);if(h==null||t==null)u=void 0;else{var g=+h[1];u=t[1]+g}}else u=t?.[1];var y=[l,u];if(_l(y))return t==null?y:Fw(y,t,n)}}}var Bl=1e9,Q6={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Ax,It=!0,ea="[DecimalError] ",ho=ea+"Invalid argument: ",Cx=ea+"Exponent out of range: ",zl=Math.floor,io=Math.pow,J6=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Nr,yn=1e7,Nt=7,FN=9007199254740991,Cp=zl(FN/Nt),Pe={};Pe.absoluteValue=Pe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Pe.comparedTo=Pe.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Pe.decimalPlaces=Pe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Nt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Pe.dividedBy=Pe.div=function(e){return xi(this,new this.constructor(e))};Pe.dividedToIntegerBy=Pe.idiv=function(e){var t=this,n=t.constructor;return St(xi(t,new n(e),0,1),n.precision)};Pe.equals=Pe.eq=function(e){return!this.cmp(e)};Pe.exponent=function(){return tn(this)};Pe.greaterThan=Pe.gt=function(e){return this.cmp(e)>0};Pe.greaterThanOrEqualTo=Pe.gte=function(e){return this.cmp(e)>=0};Pe.isInteger=Pe.isint=function(){return this.e>this.d.length-2};Pe.isNegative=Pe.isneg=function(){return this.s<0};Pe.isPositive=Pe.ispos=function(){return this.s>0};Pe.isZero=function(){return this.s===0};Pe.lessThan=Pe.lt=function(e){return this.cmp(e)<0};Pe.lessThanOrEqualTo=Pe.lte=function(e){return this.cmp(e)<1};Pe.logarithm=Pe.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Nr))throw Error(ea+"NaN");if(n.s<1)throw Error(ea+(n.s?"NaN":"-Infinity"));return n.eq(Nr)?new r(0):(It=!1,t=xi(Nu(n,s),Nu(e,s),s),It=!0,St(t,i))};Pe.minus=Pe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WN(t,e):VN(t,(e.s=-e.s,e))};Pe.modulo=Pe.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(ea+"NaN");return n.s?(It=!1,t=xi(n,e,0,1).times(e),It=!0,n.minus(t)):St(new r(n),i)};Pe.naturalExponential=Pe.exp=function(){return KN(this)};Pe.naturalLogarithm=Pe.ln=function(){return Nu(this)};Pe.negated=Pe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Pe.plus=Pe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?VN(t,e):WN(t,(e.s=-e.s,e))};Pe.precision=Pe.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ho+e);if(t=tn(i)+1,r=i.d.length-1,n=r*Nt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Pe.squareRoot=Pe.sqrt=function(){var e,t,n,r,i,s,l,u=this,p=u.constructor;if(u.s<1){if(!u.s)return new p(0);throw Error(ea+"NaN")}for(e=tn(u),It=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=$a(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=zl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new p(t)):r=new p(i.toString()),n=p.precision,i=l=n+3;;)if(s=r,r=s.plus(xi(u,s,l+2)).times(.5),$a(s.d).slice(0,l)===(t=$a(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(St(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return It=!0,St(r,n)};Pe.times=Pe.mul=function(e){var t,n,r,i,s,l,u,p,f,h=this,g=h.constructor,y=h.d,x=(e=new g(e)).d;if(!h.s||!e.s)return new g(0);for(e.s*=h.s,n=h.e+e.e,p=y.length,f=x.length,p<f&&(s=y,y=x,x=s,l=p,p=f,f=l),s=[],l=p+f,r=l;r--;)s.push(0);for(r=f;--r>=0;){for(t=0,i=p+r;i>r;)u=s[i]+x[r]*y[i-r-1]+t,s[i--]=u%yn|0,t=u/yn|0;s[i]=(s[i]+t)%yn|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,It?St(e,g.precision):e};Pe.toDecimalPlaces=Pe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ua(e,0,Bl),t===void 0?t=r.rounding:Ua(t,0,8),St(n,e+tn(n)+1,t))};Pe.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=bo(r,!0):(Ua(e,0,Bl),t===void 0?t=i.rounding:Ua(t,0,8),r=St(new i(r),e+1,t),n=bo(r,!0,e+1)),n};Pe.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?bo(i):(Ua(e,0,Bl),t===void 0?t=s.rounding:Ua(t,0,8),r=St(new s(i),e+tn(i)+1,t),n=bo(r.abs(),!1,e+tn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Pe.toInteger=Pe.toint=function(){var e=this,t=e.constructor;return St(new t(e),tn(e)+1,t.rounding)};Pe.toNumber=function(){return+this};Pe.toPower=Pe.pow=function(e){var t,n,r,i,s,l,u=this,p=u.constructor,f=12,h=+(e=new p(e));if(!e.s)return new p(Nr);if(u=new p(u),!u.s){if(e.s<1)throw Error(ea+"Infinity");return u}if(u.eq(Nr))return u;if(r=p.precision,e.eq(Nr))return St(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=h<0?-h:h)<=FN){for(i=new p(Nr),t=Math.ceil(r/Nt+4),It=!1;n%2&&(i=i.times(u),Kw(i.d,t)),n=zl(n/2),n!==0;)u=u.times(u),Kw(u.d,t);return It=!0,e.s<0?new p(Nr).div(i):St(i,r)}}else if(s<0)throw Error(ea+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,It=!1,i=e.times(Nu(u,r+f)),It=!0,i=KN(i),i.s=s,i};Pe.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=tn(i),r=bo(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ua(e,1,Bl),t===void 0?t=s.rounding:Ua(t,0,8),i=St(new s(i),e,t),n=tn(i),r=bo(i,e<=n||n<=s.toExpNeg,e)),r};Pe.toSignificantDigits=Pe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ua(e,1,Bl),t===void 0?t=r.rounding:Ua(t,0,8)),St(new r(n),e,t)};Pe.toString=Pe.valueOf=Pe.val=Pe.toJSON=Pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=tn(e),n=e.constructor;return bo(e,t<=n.toExpNeg||t>=n.toExpPos)};function VN(e,t){var n,r,i,s,l,u,p,f,h=e.constructor,g=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),It?St(t,g):t;if(p=e.d,f=t.d,l=e.e,i=t.e,p=p.slice(),s=l-i,s){for(s<0?(r=p,s=-s,u=f.length):(r=f,i=l,u=p.length),l=Math.ceil(g/Nt),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=p.length,s=f.length,u-s<0&&(s=u,r=f,f=p,p=r),n=0;s;)n=(p[--s]=p[s]+f[s]+n)/yn|0,p[s]%=yn;for(n&&(p.unshift(n),++i),u=p.length;p[--u]==0;)p.pop();return t.d=p,t.e=i,It?St(t,g):t}function Ua(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ho+e)}function $a(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=Nt-r.length,n&&(s+=ds(n)),s+=r;l=e[t],r=l+"",n=Nt-r.length,n&&(s+=ds(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var xi=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%yn|0,l=s/yn|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,p;if(s!=l)p=s>l?1:-1;else for(u=p=0;u<s;u++)if(r[u]!=i[u]){p=r[u]>i[u]?1:-1;break}return p}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*yn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,p,f,h,g,y,x,S,C,A,w,P,T,N,_,j,k,z,F=r.constructor,M=r.s==i.s?1:-1,R=r.d,U=i.d;if(!r.s)return new F(r);if(!i.s)throw Error(ea+"Division by zero");for(p=r.e-i.e,k=U.length,_=R.length,x=new F(M),S=x.d=[],f=0;U[f]==(R[f]||0);)++f;if(U[f]>(R[f]||0)&&--p,s==null?P=s=F.precision:l?P=s+(tn(r)-tn(i))+1:P=s,P<0)return new F(0);if(P=P/Nt+2|0,f=0,k==1)for(h=0,U=U[0],P++;(f<_||h)&&P--;f++)T=h*yn+(R[f]||0),S[f]=T/U|0,h=T%U|0;else{for(h=yn/(U[0]+1)|0,h>1&&(U=e(U,h),R=e(R,h),k=U.length,_=R.length),N=k,C=R.slice(0,k),A=C.length;A<k;)C[A++]=0;z=U.slice(),z.unshift(0),j=U[0],U[1]>=yn/2&&++j;do h=0,u=t(U,C,k,A),u<0?(w=C[0],k!=A&&(w=w*yn+(C[1]||0)),h=w/j|0,h>1?(h>=yn&&(h=yn-1),g=e(U,h),y=g.length,A=C.length,u=t(g,C,y,A),u==1&&(h--,n(g,k<y?z:U,y))):(h==0&&(u=h=1),g=U.slice()),y=g.length,y<A&&g.unshift(0),n(C,g,A),u==-1&&(A=C.length,u=t(U,C,k,A),u<1&&(h++,n(C,k<A?z:U,A))),A=C.length):u===0&&(h++,C=[0]),S[f++]=h,u&&C[0]?C[A++]=R[N]||0:(C=[R[N]],A=1);while((N++<_||C[0]!==void 0)&&P--)}return S[0]||S.shift(),x.e=p,St(x,l?s+tn(x)+1:s)}})();function KN(e,t){var n,r,i,s,l,u,p=0,f=0,h=e.constructor,g=h.precision;if(tn(e)>16)throw Error(Cx+tn(e));if(!e.s)return new h(Nr);for(It=!1,u=g,l=new h(.03125);e.abs().gte(.1);)e=e.times(l),f+=5;for(r=Math.log(io(2,f))/Math.LN10*2+5|0,u+=r,n=i=s=new h(Nr),h.precision=u;;){if(i=St(i.times(e),u),n=n.times(++p),l=s.plus(xi(i,n,u)),$a(l.d).slice(0,u)===$a(s.d).slice(0,u)){for(;f--;)s=St(s.times(s),u);return h.precision=g,t==null?(It=!0,St(s,g)):s}s=l}}function tn(e){for(var t=e.e*Nt,n=e.d[0];n>=10;n/=10)t++;return t}function zy(e,t,n){if(t>e.LN10.sd())throw It=!0,n&&(e.precision=n),Error(ea+"LN10 precision limit exceeded");return St(new e(e.LN10),t)}function ds(e){for(var t="";e--;)t+="0";return t}function Nu(e,t){var n,r,i,s,l,u,p,f,h,g=1,y=10,x=e,S=x.d,C=x.constructor,A=C.precision;if(x.s<1)throw Error(ea+(x.s?"NaN":"-Infinity"));if(x.eq(Nr))return new C(0);if(t==null?(It=!1,f=A):f=t,x.eq(10))return t==null&&(It=!0),zy(C,f);if(f+=y,C.precision=f,n=$a(S),r=n.charAt(0),s=tn(x),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=$a(x.d),r=n.charAt(0),g++;s=tn(x),r>1?(x=new C("0."+n),s++):x=new C(r+"."+n.slice(1))}else return p=zy(C,f+2,A).times(s+""),x=Nu(new C(r+"."+n.slice(1)),f-y).plus(p),C.precision=A,t==null?(It=!0,St(x,A)):x;for(u=l=x=xi(x.minus(Nr),x.plus(Nr),f),h=St(x.times(x),f),i=3;;){if(l=St(l.times(h),f),p=u.plus(xi(l,new C(i),f)),$a(p.d).slice(0,f)===$a(u.d).slice(0,f))return u=u.times(2),s!==0&&(u=u.plus(zy(C,f+2,A).times(s+""))),u=xi(u,new C(g),f),C.precision=A,t==null?(It=!0,St(u,A)):u;u=p,i+=2}}function Vw(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=zl(n/Nt),e.d=[],r=(n+1)%Nt,n<0&&(r+=Nt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Nt;r<i;)e.d.push(+t.slice(r,r+=Nt));t=t.slice(r),r=Nt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),It&&(e.e>Cp||e.e<-Cp))throw Error(Cx+n)}else e.s=0,e.e=0,e.d=[0];return e}function St(e,t,n){var r,i,s,l,u,p,f,h,g=e.d;for(l=1,s=g[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=Nt,i=t,f=g[h=0];else{if(h=Math.ceil((r+1)/Nt),s=g.length,h>=s)return e;for(f=s=g[h],l=1;s>=10;s/=10)l++;r%=Nt,i=r-Nt+l}if(n!==void 0&&(s=io(10,l-i-1),u=f/s%10|0,p=t<0||g[h+1]!==void 0||f%s,p=n<4?(u||p)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||p||n==6&&(r>0?i>0?f/io(10,l-i):0:g[h-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return p?(s=tn(e),g.length=1,t=t-s-1,g[0]=io(10,(Nt-t%Nt)%Nt),e.e=zl(-t/Nt)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(r==0?(g.length=h,s=1,h--):(g.length=h+1,s=io(10,Nt-r),g[h]=i>0?(f/io(10,l-i)%io(10,i)|0)*s:0),p)for(;;)if(h==0){(g[0]+=s)==yn&&(g[0]=1,++e.e);break}else{if(g[h]+=s,g[h]!=yn)break;g[h--]=0,s=1}for(r=g.length;g[--r]===0;)g.pop();if(It&&(e.e>Cp||e.e<-Cp))throw Error(Cx+tn(e));return e}function WN(e,t){var n,r,i,s,l,u,p,f,h,g,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),It?St(t,x):t;if(p=e.d,g=t.d,r=t.e,f=e.e,p=p.slice(),l=f-r,l){for(h=l<0,h?(n=p,l=-l,u=g.length):(n=g,r=f,u=p.length),i=Math.max(Math.ceil(x/Nt),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=p.length,u=g.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(p[i]!=g[i]){h=p[i]<g[i];break}l=0}for(h&&(n=p,p=g,g=n,t.s=-t.s),u=p.length,i=g.length-u;i>0;--i)p[u++]=0;for(i=g.length;i>l;){if(p[--i]<g[i]){for(s=i;s&&p[--s]===0;)p[s]=yn-1;--p[s],p[i]+=yn}p[i]-=g[i]}for(;p[--u]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=r,It?St(t,x):t):new y(0)}function bo(e,t,n){var r,i=tn(e),s=$a(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+ds(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+ds(-i-1)+s,n&&(r=n-l)>0&&(s+=ds(r))):i>=l?(s+=ds(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+ds(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=ds(r))),e.s<0?"-"+s:s}function Kw(e,t){if(e.length>t)return e.length=t,!0}function XN(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ho+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return Vw(l,s.toString())}else if(typeof s!="string")throw Error(ho+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,J6.test(s))Vw(l,s);else throw Error(ho+s)}if(i.prototype=Pe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=XN,i.config=i.set=Z6,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Z6(e){if(!e||typeof e!="object")throw Error(ea+"Object expected");var t,n,r,i=["precision",1,Bl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(zl(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(ho+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ho+n+": "+r);return this}var Ax=XN(Q6);Nr=new Ax(1);const ut=Ax;var ez=e=>e,QN={},JN=e=>e===QN,Ww=e=>function t(){return arguments.length===0||arguments.length===1&&JN(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},ZN=(e,t)=>e===1?t:Ww(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==QN).length;return s>=e?t(...r):ZN(e-s,Ww(function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];var f=r.map(h=>JN(h)?u.shift():h);return t(...f,...u)}))}),ih=e=>ZN(e.length,e),K0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},tz=ih((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),nz=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return ez;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,p)=>p(u),s(...arguments))}},W0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),eO=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var p;return l===((p=t)===null||p===void 0?void 0:p[u])})||(t=i,n=e(...i)),n}};function tO(e){var t;return e===0?t=1:t=Math.floor(new ut(e).abs().log(10).toNumber())+1,t}function nO(e,t,n){for(var r=new ut(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}ih((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});ih((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});ih((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var rO=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},aO=(e,t,n)=>{if(e.lte(0))return new ut(0);var r=tO(e.toNumber()),i=new ut(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new ut(Math.ceil(s.div(l).toNumber())).add(n).mul(l),p=u.mul(i);return t?new ut(p.toNumber()):new ut(Math.ceil(p.toNumber()))},rz=(e,t,n)=>{var r=new ut(1),i=new ut(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new ut(10).pow(tO(e)-1),i=new ut(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new ut(Math.floor(e)))}else e===0?i=new ut(Math.floor((t-1)/2)):n||(i=new ut(Math.floor(e)));var l=Math.floor((t-1)/2),u=nz(tz(p=>i.add(new ut(p-l).mul(r)).toNumber()),K0);return u(0,t)},iO=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new ut(0),tickMin:new ut(0),tickMax:new ut(0)};var l=aO(new ut(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new ut(0):(u=new ut(t).add(n).div(2),u=u.sub(new ut(u).mod(l)));var p=Math.ceil(u.sub(t).div(l).toNumber()),f=Math.ceil(new ut(n).sub(u).div(l).toNumber()),h=p+f+1;return h>r?iO(t,n,r,i,s+1):(h<r&&(f=n>0?f+(r-h):f,p=n>0?p:p+(r-h)),{step:l,tickMin:u.sub(new ut(p).mul(l)),tickMax:u.add(new ut(f).mul(l))})};function az(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=rO([t,n]);if(l===-1/0||u===1/0){var p=u===1/0?[l,...K0(0,r-1).map(()=>1/0)]:[...K0(0,r-1).map(()=>-1/0),u];return t>n?W0(p):p}if(l===u)return rz(l,r,i);var{step:f,tickMin:h,tickMax:g}=iO(l,u,s,i,0),y=nO(h,g.add(new ut(.1).mul(f)),f);return t>n?W0(y):y}function iz(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=rO([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),p=aO(new ut(l).sub(s).div(u-1),i,0),f=[...nO(new ut(s),new ut(l),p),l];return i===!1&&(f=f.map(h=>Math.round(h))),n>r?W0(f):f}var sz=eO(az),oz=eO(iz),sO=e=>e.rootProps.maxBarSize,lz=e=>e.rootProps.barGap,oO=e=>e.rootProps.barCategoryGap,cz=e=>e.rootProps.barSize,zu=e=>e.rootProps.stackOffset,Ex=e=>e.options.chartName,wx=e=>e.rootProps.syncId,lO=e=>e.rootProps.syncMethod,Px=e=>e.options.eventEmitter,hi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Dr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},sh=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},uz={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:hi.angleAxisId,includeHidden:!1,name:void 0,reversed:hi.reversed,scale:hi.scale,tick:hi.tick,tickCount:void 0,ticks:void 0,type:hi.type,unit:void 0},dz={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Dr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Dr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Dr.scale,tick:Dr.tick,tickCount:Dr.tickCount,ticks:void 0,type:Dr.type,unit:void 0},fz={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:hi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hi.scale,tick:hi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},pz={allowDataOverflow:Dr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Dr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Dr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Dr.scale,tick:Dr.tick,tickCount:Dr.tickCount,ticks:void 0,type:"category",unit:void 0},Tx=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?fz:uz,Dx=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?pz:dz,oh=e=>e.polarOptions,Nx=se([Pi,Ti,cn],qD),cO=se([oh,Nx],(e,t)=>{if(e!=null)return zn(e.innerRadius,t,0)}),uO=se([oh,Nx],(e,t)=>{if(e!=null)return zn(e.outerRadius,t,t*.8)}),hz=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},dO=se([oh],hz);se([Tx,dO],sh);var fO=se([Nx,cO,uO],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});se([Dx,fO],sh);var pO=se([st,oh,cO,uO,Pi,Ti],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:p,endAngle:f}=t;return{cx:zn(l,i,i/2),cy:zn(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:p,endAngle:f,clockWise:!1}}}),Rt=(e,t)=>t,Uu=(e,t,n)=>n;function Ox(e){return e?.id}var dn=e=>{var t=st(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ul=e=>e.tooltip.settings.axisId,Sn=e=>{var t=dn(e),n=Ul(e);return Hu(e,t,n)},hO=se([Sn],e=>e?.dataKey);function mO(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var p,f=(p=u.data)!==null&&p!==void 0?p:r;if(!(f==null||f.length===0)){var h=Ox(u);f.forEach((g,y)=>{var x=s==null||i?y:String(Mt(g,s,null)),S=Mt(g,u.dataKey,0),C;l.has(x)?C=l.get(x):C={},Object.assign(C,{[h]:S}),l.set(x,C)})}}),Array.from(l.values())}function lh(e){return e.stackId!=null&&e.dataKey!=null}function Xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ap(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xw(Object(n),!0).forEach(function(r){mz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mz(e,t,n){return(t=gz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gz(e){var t=yz(e,"string");return typeof t=="symbol"?t:t+""}function yz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X0=[0,"auto"],Er={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},gO=(e,t)=>e.cartesianAxis.xAxis[t],As=(e,t)=>{var n=gO(e,t);return n??Er},wr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:X0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Iu},yO=(e,t)=>e.cartesianAxis.yAxis[t],Es=(e,t)=>{var n=yO(e,t);return n??wr},vz={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},jx=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??vz},Vt=(e,t,n)=>{switch(t){case"xAxis":return As(e,n);case"yAxis":return Es(e,n);case"zAxis":return jx(e,n);case"angleAxis":return Tx(e,n);case"radiusAxis":return Dx(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},xz=(e,t,n)=>{switch(t){case"xAxis":return As(e,n);case"yAxis":return Es(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Hu=(e,t,n)=>{switch(t){case"xAxis":return As(e,n);case"yAxis":return Es(e,n);case"angleAxis":return Tx(e,n);case"radiusAxis":return Dx(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},vO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function _x(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var kx=e=>e.graphicalItems.cartesianItems,bz=se([Rt,Uu],_x),Mx=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Gu=se([kx,Vt,bz],Mx),xO=se([Gu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(lh)),bO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),SO=se([Gu],bO),Ix=e=>e.map(t=>t.data).filter(Boolean).flat(1),Sz=se([Gu],Ix),Rx=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},Lx=se([Sz,Sx],Rx),$x=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Mt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Mt(i,r)}))):e.map(r=>({value:r})),ch=se([Lx,Vt,Gu],$x);function CO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function No(e){return e.filter(t=>za(t)||t instanceof Date).map(Number).filter(t=>jr(t)===!1)}function Cz(e,t,n){return!n||typeof t!="number"||jr(t)?[]:n.length?No(n.flatMap(r=>{var i=Mt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!kr(s)||!kr(l)))return[t-s,t+l]})):[]}var Az=se([xO,Sx,Sn],mO),AO=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,p=u.map(Ox);return[l,{stackedData:T4(e,p,n),graphicalItems:u}]}))},Q0=se([Az,xO,zu],AO),EO=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=_4(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Ez=se([Q0,Cs,Rt],EO),wO=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,p,f=(u=r[l.id])===null||u===void 0?void 0:u.filter(g=>CO(i,g)),h=Mt(s,(p=t.dataKey)!==null&&p!==void 0?p:l.dataKey);return{value:h,errorDomain:Cz(s,h,f)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Mt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),uh=e=>e.errorBars,PO=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>CO(n,r));se([SO,uh,Rt],PO);var wz=se([Lx,Vt,SO,uh,Rt],wO);function Pz(e){var{value:t}=e;if(za(t)||t instanceof Date)return t}var Qw=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=No(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Tz=(e,t,n)=>{var r=e.map(Pz).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&$T(r))?dN(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},Bx=e=>{var t;if(e==null||!("domain"in e))return X0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=No(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:X0},Ep=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},TO=e=>e.referenceElements.dots,Hl=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),Dz=se([TO,Rt,Uu],Hl),DO=e=>e.referenceElements.areas,Nz=se([DO,Rt,Uu],Hl),NO=e=>e.referenceElements.lines,Oz=se([NO,Rt,Uu],Hl),OO=(e,t)=>{var n=No(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},jz=se(Dz,Rt,OO),jO=(e,t)=>{var n=No(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},_z=se([Nz,Rt],jO),_O=(e,t)=>{var n=No(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},kz=se(Oz,Rt,_O),Mz=se(jz,kz,_z,(e,t,n)=>Ep(e,n,t)),kO=se([Vt],Bx),zx=(e,t,n,r,i,s,l)=>{var u=W6(t,e.allowDataOverflow);if(u!=null)return u;var p=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",f=p?Ep(n,i,Qw(r)):Ep(i,Qw(r));return X6(t,f,e.allowDataOverflow)},Iz=se([Vt,kO,Ez,wz,Mz,st,Rt],zx),Rz=[0,1],Ux=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:p}=e,f=Po(t,s);return f&&u==null?dN(0,n.length):p==="category"?Tz(r,e,f):i==="expand"?Rz:l}},Hx=se([Vt,st,Lx,ch,zu,Rt,Iz],Ux),MO=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(ju(s));return u in du?u:"point"}}},Gl=se([Vt,st,vO,Ex,Rt],MO);function Lz(e){if(e!=null){if(e in du)return du[e]();var t="scale".concat(ju(e));if(t in du)return du[t]()}}function Gx(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=Lz(t);if(i!=null){var s=i.domain(n).range(r);return C4(s),s}}}var qx=(e,t,n)=>{var r=Bx(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&_l(e))return sz(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&_l(e))return oz(e,t.tickCount,t.allowDecimals)}},Yx=se([Hx,Hu,Gl],qx),Fx=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&_l(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},$z=se([Vt,Hx,Yx,Rt],Fx),Bz=se(ch,Vt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(No(e.map(u=>u.value))).sort((u,p)=>u-p);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),IO=se(Bz,st,oO,cn,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!kr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=zn(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),zz=(e,t)=>{var n=As(e,t);return n==null||typeof n.padding!="string"?0:IO(e,"xAxis",t,n.padding)},Uz=(e,t)=>{var n=Es(e,t);return n==null||typeof n.padding!="string"?0:IO(e,"yAxis",t,n.padding)},Hz=se(As,zz,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),Gz=se(Es,Uz,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),qz=se([cn,Hz,Wp,Kp,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),Yz=se([cn,st,Gz,Wp,Kp,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),qu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return qz(e,n,r);case"yAxis":return Yz(e,n,r);case"zAxis":return(i=jx(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return dO(e);case"radiusAxis":return fO(e,n);default:return}},RO=se([Vt,qu],sh),ql=se([Vt,Gl,$z,RO],Gx);se([Gu,uh,Rt],PO);function LO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dh=(e,t)=>t,fh=(e,t,n)=>n,Fz=se(Fp,dh,fh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(LO)),Vz=se(Vp,dh,fh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(LO)),$O=(e,t)=>({width:e.width,height:t.height}),Kz=(e,t)=>{var n=typeof t.width=="number"?t.width:Iu;return{width:n,height:e.height}},BO=se(cn,As,$O),Wz=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},Xz=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},Qz=se(Ti,cn,Fz,dh,fh,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var p=$O(t,u);l==null&&(l=Wz(t,r,e));var f=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(f)*p.height,l+=(f?-1:1)*p.height}),s}),Jz=se(Pi,cn,Vz,dh,fh,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var p=Kz(t,u);l==null&&(l=Xz(t,r,e));var f=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(f)*p.width,l+=(f?-1:1)*p.width}),s}),Zz=(e,t)=>{var n=cn(e),r=As(e,t);if(r!=null){var i=Qz(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},eU=(e,t)=>{var n=cn(e),r=Es(e,t);if(r!=null){var i=Jz(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},zO=se(cn,Es,(e,t)=>{var n=typeof t.width=="number"?t.width:Iu;return{width:n,height:e.height}}),Jw=(e,t,n)=>{switch(t){case"xAxis":return BO(e,n).width;case"yAxis":return zO(e,n).height;default:return}},UO=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=Po(e,r),p=t.map(f=>f.value);if(l&&u&&s==="category"&&i&&$T(p))return p}},Vx=se([st,ch,Vt,Rt],UO),HO=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Po(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},Kx=se([st,ch,Hu,Rt],HO),Zw=se([st,xz,Gl,ql,Vx,Kx,qu,Yx,Rt],(e,t,n,r,i,s,l,u,p)=>{if(t==null)return null;var f=Po(e,p);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:p,categoricalDomain:s,duplicateDomain:i,isCategorical:f,niceTicks:u,range:l,realScaleType:n,scale:r}}),tU=(e,t,n,r,i,s,l,u,p)=>{if(!(t==null||r==null)){var f=Po(e,p),{type:h,ticks:g,tickCount:y}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=h==="category"&&r.bandwidth?r.bandwidth()/x:0;S=p==="angleAxis"&&s!=null&&s.length>=2?vn(s[0]-s[1])*2*S:S;var C=g||i;if(C){var A=C.map((w,P)=>{var T=l?l.indexOf(w):w;return{index:P,coordinate:r(T)+S,value:w,offset:S}});return A.filter(w=>!jr(w.coordinate))}return f&&u?u.map((w,P)=>({coordinate:r(w)+S,value:w,index:P,offset:S})):r.ticks?r.ticks(y).map(w=>({coordinate:r(w)+S,value:w,offset:S})):r.domain().map((w,P)=>({coordinate:r(w)+S,value:l?l[w]:w,index:P,offset:S}))}},GO=se([st,Hu,Gl,ql,Yx,qu,Vx,Kx,Rt],tU),nU=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Po(e,l),{tickCount:p}=t,f=0;return f=l==="angleAxis"&&r?.length>=2?vn(r[0]-r[1])*2*f:f,u&&s?s.map((h,g)=>({coordinate:n(h)+f,value:h,index:g,offset:f})):n.ticks?n.ticks(p).map(h=>({coordinate:n(h)+f,value:h,offset:f})):n.domain().map((h,g)=>({coordinate:n(h)+f,value:i?i[h]:h,index:g,offset:f}))}},kl=se([st,Hu,ql,qu,Vx,Kx,Rt],nU),Ml=se(Vt,ql,(e,t)=>{if(!(e==null||t==null))return Ap(Ap({},e),{},{scale:t})}),rU=se([Vt,Gl,Hx,RO],Gx);se((e,t,n)=>jx(e,n),rU,(e,t)=>{if(!(e==null||t==null))return Ap(Ap({},e),{},{scale:t})});var aU=se([st,Fp,Vp],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),qO=e=>e.options.defaultTooltipEventType,YO=e=>e.options.validateTooltipEventTypes;function FO(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Wx(e,t){var n=qO(e),r=YO(e);return FO(t,n,r)}function iU(e){return Ne(t=>Wx(t,e))}var VO=(e,t)=>{var n,r=Number(t);if(!(jr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},sU=e=>e.tooltip.settings,ps={active:!1,index:null,dataKey:void 0,coordinate:void 0},oU={itemInteraction:{click:ps,hover:ps},axisInteraction:{click:ps,hover:ps},keyboardInteraction:ps,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},KO=Mr({name:"tooltip",initialState:oU,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=vi(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:lU,removeTooltipEntrySettings:cU,setTooltipSettingsState:uU,setActiveMouseOverItemIndex:WO,mouseLeaveItem:dU,mouseLeaveChart:XO,setActiveClickItemIndex:fU,setMouseOverAxisIndex:QO,setMouseClickAxisIndex:pU,setSyncInteraction:J0,setKeyboardInteraction:Z0}=KO.actions,hU=KO.reducer;function eP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(n),!0).forEach(function(r){mU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mU(e,t,n){return(t=gU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gU(e){var t=yU(e,"string");return typeof t=="symbol"?t:t+""}function yU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vU(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function xU(e){return e.index!=null}var JO=(e,t,n,r)=>{if(t==null)return ps;var i=vU(e,t,n);if(i==null)return ps;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(xU(i)){if(s)return _f(_f({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return _f(_f({},ps),{},{coordinate:i.coordinate})},Xx=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!kr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},ZO=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var p=l[0],f=p==null?void 0:u(p.positions,s);if(f!=null)return f;var h=i?.[Number(s)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},ej=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},Yu=e=>e.options.tooltipPayloadSearcher,Yl=e=>e.tooltip;function tP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(n),!0).forEach(function(r){bU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bU(e,t,n){return(t=SU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SU(e){var t=CU(e,"string");return typeof t=="symbol"?t:t+""}function CU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AU(e,t){return e??t}var tj=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:p,dataStartIndex:f,dataEndIndex:h}=n,g=[];return e.reduce((y,x)=>{var S,{dataDefinedOnItem:C,settings:A}=x,w=AU(C,u),P=Array.isArray(w)?YD(w,f,h):w,T=(S=A?.dataKey)!==null&&S!==void 0?S:r,N=A?.nameKey,_;if(r&&Array.isArray(P)&&!Array.isArray(P[0])&&l==="axis"?_=d3(P,r,i):_=s(P,t,p,N),Array.isArray(_))_.forEach(k=>{var z=nP(nP({},A),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});y.push($E({tooltipEntrySettings:z,dataKey:k.dataKey,payload:k.payload,value:Mt(k.payload,k.dataKey),name:k.name}))});else{var j;y.push($E({tooltipEntrySettings:A,dataKey:T,payload:_,value:Mt(_,T),name:(j=Mt(_,N))!==null&&j!==void 0?j:A?.name}))}return y},g)}},Qx=se([Sn,st,vO,Ex,dn],MO),EU=se([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),wU=se([dn,Ul],_x),Fu=se([EU,Sn,wU],Mx),PU=se([Fu],e=>e.filter(lh)),TU=se([Fu],Ix),Fl=se([TU,Cs],Rx),DU=se([PU,Cs,Sn],mO),Jx=se([Fl,Sn,Fu],$x),NU=se([Sn],Bx),OU=se([Fu],e=>e.filter(lh)),jU=se([DU,OU,zu],AO),_U=se([jU,Cs,dn],EO),kU=se([Fu],bO),MU=se([Fl,Sn,kU,uh,dn],wO),IU=se([TO,dn,Ul],Hl),RU=se([IU,dn],OO),LU=se([DO,dn,Ul],Hl),$U=se([LU,dn],jO),BU=se([NO,dn,Ul],Hl),zU=se([BU,dn],_O),UU=se([RU,zU,$U],Ep),HU=se([Sn,NU,_U,MU,UU,st,dn],zx),nj=se([Sn,st,Fl,Jx,zu,dn,HU],Ux),GU=se([nj,Sn,Qx],qx),qU=se([Sn,nj,GU,dn],Fx),rj=e=>{var t=dn(e),n=Ul(e),r=!1;return qu(e,t,n,r)},aj=se([Sn,rj],sh),ij=se([Sn,Qx,qU,aj],Gx),YU=se([st,Jx,Sn,dn],UO),FU=se([st,Jx,Sn,dn],HO),VU=(e,t,n,r,i,s,l,u)=>{if(t){var{type:p}=t,f=Po(e,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=p==="category"&&r.bandwidth?r.bandwidth()/h:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?vn(i[0]-i[1])*2*g:g,f&&l?l.map((y,x)=>({coordinate:r(y)+g,value:y,index:x,offset:g})):r.domain().map((y,x)=>({coordinate:r(y)+g,value:s?s[y]:y,index:x,offset:g}))}}},Ni=se([st,Sn,Qx,ij,rj,YU,FU,dn],VU),Zx=se([qO,YO,sU],(e,t,n)=>FO(n.shared,e,t)),sj=e=>e.tooltip.settings.trigger,eb=e=>e.tooltip.settings.defaultIndex,ph=se([Yl,Zx,sj,eb],JO),So=se([ph,Fl],Xx),oj=se([Ni,So],VO),lj=se([ph],e=>{if(e)return e.dataKey}),cj=se([Yl,Zx,sj,eb],ej),KU=se([Pi,Ti,st,cn,Ni,eb,cj,Yu],ZO),WU=se([ph,KU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),XU=se([ph],e=>e.active),QU=se([cj,So,Cs,hO,oj,Yu,Zx],tj);se([QU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function rP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rP(Object(n),!0).forEach(function(r){JU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JU(e,t,n){return(t=ZU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZU(e){var t=e9(e,"string");return typeof t=="symbol"?t:t+""}function e9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t9=()=>Ne(Sn),n9=()=>{var e=t9(),t=Ne(Ni),n=Ne(ij);return qv(aP(aP({},e),{},{scale:n}),t)},r9=()=>Ne(Ex),tb=(e,t)=>t,uj=(e,t,n)=>n,nb=(e,t,n,r)=>r,a9=se(Ni,e=>Bp(e,t=>t.coordinate)),rb=se([Yl,tb,uj,nb],JO),dj=se([rb,Fl],Xx),i9=(e,t,n)=>{if(t!=null){var r=Yl(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},fj=se([Yl,tb,uj,nb],ej),wp=se([Pi,Ti,st,cn,Ni,nb,fj,Yu],ZO),s9=se([rb,wp],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),pj=se(Ni,dj,VO),o9=se([fj,dj,Cs,hO,pj,Yu,tb],tj),l9=se([rb],e=>({isActive:e.active,activeIndex:e.index})),c9=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var p=k4(e.chartX,e.chartY,t,n,u);if(p){var f=I4(p,t),h=b4(f,l,s,r,i),g=M4(t,s,h,p);return{activeIndex:String(h),activeCoordinate:g}}}};function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(null,arguments)}function iP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(n),!0).forEach(function(r){u9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u9(e,t,n){return(t=d9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d9(e){var t=f9(e,"string");return typeof t=="symbol"?t:t+""}function f9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p9(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:p,chartName:f}=e,h=t,g=n,y=r;if(!u||!h||f!=="ScatterChart"&&p!=="axis")return null;var x,S;if(f==="ScatterChart")x=h,S=I$;else if(f==="BarChart")x=R$(l,h,i,s),S=oN;else if(l==="radial"){var{cx:C,cy:A,radius:w,startAngle:P,endAngle:T}=lN(h);x={cx:C,cy:A,startAngle:P,endAngle:T,innerRadius:w,outerRadius:w},S=uN}else x={points:m8(l,h,i)},S=nN;var N=typeof u=="object"&&"className"in u?u.className:void 0,_=kf(kf(kf(kf({stroke:"#ccc",pointerEvents:"none"},i),x),Zt(u,!1)),{},{payload:g,payloadIndex:y,className:dt("recharts-tooltip-cursor",N)});return E.isValidElement(u)?E.cloneElement(u,_):E.createElement(S,_)}function h9(e){var t=n9(),n=QD(),r=Wv(),i=r9();return E.createElement(p9,ev({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var hj=E.createContext(null),m9=()=>E.useContext(hj),Uy={exports:{}},sP;function g9(){return sP||(sP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(p,f,h){this.fn=p,this.context=f,this.once=h||!1}function s(p,f,h,g,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,g||p,y),S=n?n+f:f;return p._events[S]?p._events[S].fn?p._events[S]=[p._events[S],x]:p._events[S].push(x):(p._events[S]=x,p._eventsCount++),p}function l(p,f){--p._eventsCount===0?p._events=new r:delete p._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],h,g;if(this._eventsCount===0)return f;for(g in h=this._events)t.call(h,g)&&f.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},u.prototype.listeners=function(f){var h=n?n+f:f,g=this._events[h];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,x=g.length,S=new Array(x);y<x;y++)S[y]=g[y].fn;return S},u.prototype.listenerCount=function(f){var h=n?n+f:f,g=this._events[h];return g?g.fn?1:g.length:0},u.prototype.emit=function(f,h,g,y,x,S){var C=n?n+f:f;if(!this._events[C])return!1;var A=this._events[C],w=arguments.length,P,T;if(A.fn){switch(A.once&&this.removeListener(f,A.fn,void 0,!0),w){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,g),!0;case 4:return A.fn.call(A.context,h,g,y),!0;case 5:return A.fn.call(A.context,h,g,y,x),!0;case 6:return A.fn.call(A.context,h,g,y,x,S),!0}for(T=1,P=new Array(w-1);T<w;T++)P[T-1]=arguments[T];A.fn.apply(A.context,P)}else{var N=A.length,_;for(T=0;T<N;T++)switch(A[T].once&&this.removeListener(f,A[T].fn,void 0,!0),w){case 1:A[T].fn.call(A[T].context);break;case 2:A[T].fn.call(A[T].context,h);break;case 3:A[T].fn.call(A[T].context,h,g);break;case 4:A[T].fn.call(A[T].context,h,g,y);break;default:if(!P)for(_=1,P=new Array(w-1);_<w;_++)P[_-1]=arguments[_];A[T].fn.apply(A[T].context,P)}}return!0},u.prototype.on=function(f,h,g){return s(this,f,h,g,!1)},u.prototype.once=function(f,h,g){return s(this,f,h,g,!0)},u.prototype.removeListener=function(f,h,g,y){var x=n?n+f:f;if(!this._events[x])return this;if(!h)return l(this,x),this;var S=this._events[x];if(S.fn)S.fn===h&&(!y||S.once)&&(!g||S.context===g)&&l(this,x);else{for(var C=0,A=[],w=S.length;C<w;C++)(S[C].fn!==h||y&&!S[C].once||g&&S[C].context!==g)&&A.push(S[C]);A.length?this._events[x]=A.length===1?A[0]:A:l(this,x)}return this},u.prototype.removeAllListeners=function(f){var h;return f?(h=n?n+f:f,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(Uy)),Uy.exports}var y9=g9();const v9=Ca(y9);var Ou=new v9,tv="recharts.syncEvent.tooltip",oP="recharts.syncEvent.brush";function mj(e,t){if(t){var n=Number.parseInt(t,10);if(!jr(n))return e?.[n]}}var x9={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},gj=Mr({name:"options",initialState:x9,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),b9=gj.reducer,{createEventEmitter:S9}=gj.actions;function C9(e){return e.tooltip.syncInteraction}var A9={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},yj=Mr({name:"chartData",initialState:A9,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:lP,setDataStartEndIndexes:E9,setComputedData:HK}=yj.actions,w9=yj.reducer,P9=["x","y"];function cP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(n),!0).forEach(function(r){T9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T9(e,t,n){return(t=D9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D9(e){var t=N9(e,"string");return typeof t=="symbol"?t:t+""}function N9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O9(e,t){if(e==null)return{};var n,r,i=j9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function j9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var vj=()=>{};function _9(){var e=Ne(wx),t=Ne(Px),n=$t(),r=Ne(lO),i=Ne(Ni),s=Wv(),l=Fv(),u=Ne(p=>p.rootProps.className);E.useEffect(()=>{if(e==null)return vj;var p=(f,h,g)=>{if(t!==g&&e===f){if(r==="index"){var y;if(l&&h!==null&&h!==void 0&&(y=h.payload)!==null&&y!==void 0&&y.coordinate){var x=h.payload.coordinate,{x:S,y:C}=x,A=O9(x,P9),w=no(no(no({},A),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof C=="number"&&{y:Math.max(l.y,Math.min(C,l.y+l.height))}),P=no(no({},h),{},{payload:no(no({},h.payload),{},{coordinate:w})});n(P)}else n(h);return}if(i!=null){var T;if(typeof r=="function"){var N={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},_=r(i,N);T=i[_]}else r==="value"&&(T=i.find(W=>String(W.value)===h.payload.label));var{coordinate:j}=h.payload;if(T==null||h.payload.active===!1||j==null||l==null){n(J0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:k,y:z}=j,F=Math.min(k,l.x+l.width),M=Math.min(z,l.y+l.height),R={x:s==="horizontal"?T.coordinate:F,y:s==="horizontal"?M:T.coordinate},U=J0({active:h.payload.active,coordinate:R,dataKey:h.payload.dataKey,index:String(T.index),label:h.payload.label});n(U)}}};return Ou.on(tv,p),()=>{Ou.off(tv,p)}},[u,n,t,e,r,i,s,l])}function k9(){var e=Ne(wx),t=Ne(Px),n=$t();E.useEffect(()=>{if(e==null)return vj;var r=(i,s,l)=>{t!==l&&e===i&&n(E9(s))};return Ou.on(oP,r),()=>{Ou.off(oP,r)}},[n,t,e])}function M9(){var e=$t();E.useEffect(()=>{e(S9())},[e]),_9(),k9()}function I9(e,t,n,r,i,s){var l=Ne(y=>i9(y,e,t)),u=Ne(Px),p=Ne(wx),f=Ne(lO),h=Ne(C9),g=h?.active;E.useEffect(()=>{if(!g&&p!=null&&u!=null){var y=J0({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});Ou.emit(tv,p,y,u)}},[g,n,l,i,r,u,p,f,s])}function uP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function dP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(n),!0).forEach(function(r){R9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R9(e,t,n){return(t=L9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L9(e){var t=$9(e,"string");return typeof t=="symbol"?t:t+""}function $9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B9(e){return e.dataKey}function z9(e,t){return E.isValidElement(e)?E.cloneElement(e,t):typeof e=="function"?E.createElement(e,t):E.createElement(p$,t)}var fP=[],U9={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ll.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ya(e){var t=na(e,U9),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:p,offset:f,payloadUniqBy:h,position:g,reverseDirection:y,useTranslate3d:x,wrapperStyle:S,cursor:C,shared:A,trigger:w,defaultIndex:P,portal:T,axisId:N}=t,_=$t(),j=typeof P=="number"?String(P):P;E.useEffect(()=>{_(uU({shared:A,trigger:w,axisId:N,active:n,defaultIndex:j}))},[_,A,w,N,n,j]);var k=Fv(),z=tN(),F=iU(A),{activeIndex:M,isActive:R}=Ne(Se=>l9(Se,F,w,j)),U=Ne(Se=>o9(Se,F,w,j)),W=Ne(Se=>pj(Se,F,w,j)),Z=Ne(Se=>s9(Se,F,w,j)),Q=U,I=m9(),G=n??R,[ie,le]=xD([Q,G]),$=F==="axis"?W:void 0;I9(F,w,Z,$,M,G);var q=T??I;if(q==null)return null;var V=Q??fP;G||(V=fP),u&&V.length&&(V=hD(Q.filter(Se=>Se.value!=null&&(Se.hide!==!0||t.includeHidden)),h,B9));var ne=V.length>0,ye=E.createElement(b$,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:p,active:G,coordinate:Z,hasPayload:ne,offset:f,position:g,reverseDirection:y,useTranslate3d:x,viewBox:k,wrapperStyle:S,lastBoundingBox:ie,innerRef:le,hasPortalFromProps:!!T},z9(l,dP(dP({},t),{},{payload:V,label:$,active:G,coordinate:Z,accessibilityLayer:z})));return E.createElement(E.Fragment,null,UT.createPortal(ye,q),G&&E.createElement(h9,{cursor:C,tooltipEventType:F,coordinate:Z,payload:Q,index:M}))}var Hy={},Gy={},qy={},pP;function H9(){return pP||(pP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const p=s!=null&&s.includes("leading"),f=s==null||s.includes("trailing"),h=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},g=()=>{f&&h(),C()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},r)},S=()=>{y!==null&&(clearTimeout(y),y=null)},C=()=>{S(),l=void 0,u=null},A=()=>{h()},w=function(...P){if(i?.aborted)return;l=this,u=P;const T=y==null;x(),p&&T&&h()};return w.schedule=x,w.cancel=C,w.flush=A,i?.addEventListener("abort",C,{once:!0}),w}e.debounce=t})(qy)),qy}var hP;function G9(){return hP||(hP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H9();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:p}=s,f=Array(2);l&&(f[0]="leading"),u&&(f[1]="trailing");let h,g=null;const y=t.debounce(function(...C){h=r.apply(this,C),g=null},i,{edges:f}),x=function(...C){return p!=null&&(g===null&&(g=Date.now()),Date.now()-g>=p)?(h=r.apply(this,C),g=Date.now(),y.cancel(),y.schedule(),h):(y.apply(this,C),h)},S=()=>(y.flush(),h);return x.cancel=y.cancel,x.flush=S,x}e.debounce=n})(Gy)),Gy}var mP;function q9(){return mP||(mP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G9();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(Hy)),Hy}var Yy,gP;function Y9(){return gP||(gP=1,Yy=q9().throttle),Yy}var F9=Y9();const V9=Ca(F9);var gu=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(n),!0).forEach(function(r){K9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K9(e,t,n){return(t=W9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W9(e){var t=X9(e,"string");return typeof t=="symbol"?t:t+""}function X9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var va=E.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:p,children:f,debounce:h=0,id:g,className:y,onResize:x,style:S={}}=e,C=E.useRef(null),A=E.useRef();A.current=x,E.useImperativeHandle(t,()=>C.current);var[w,P]=E.useState({containerWidth:r.width,containerHeight:r.height}),T=E.useCallback((_,j)=>{P(k=>{var z=Math.round(_),F=Math.round(j);return k.containerWidth===z&&k.containerHeight===F?k:{containerWidth:z,containerHeight:F}})},[]);E.useEffect(()=>{var _=F=>{var M,{width:R,height:U}=F[0].contentRect;T(R,U),(M=A.current)===null||M===void 0||M.call(A,R,U)};h>0&&(_=V9(_,h,{trailing:!0,leading:!1}));var j=new ResizeObserver(_),{width:k,height:z}=C.current.getBoundingClientRect();return T(k,z),j.observe(C.current),()=>{j.disconnect()}},[T,h]);var N=E.useMemo(()=>{var{containerWidth:_,containerHeight:j}=w;if(_<0||j<0)return null;gu(so(i)||so(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),gu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var k=so(i)?_:i,z=so(s)?j:s;return n&&n>0&&(k?z=k/n:z&&(k=z*n),p&&z>p&&(z=p)),gu(k>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,z,i,s,l,u,n),E.Children.map(f,F=>E.cloneElement(F,{width:k,height:z,style:Fy({width:k,height:z},F.props.style)}))},[n,f,s,p,u,l,w,i]);return E.createElement("div",{id:g?"".concat(g):void 0,className:dt("recharts-responsive-container",y),style:Fy(Fy({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:p}),ref:C},E.createElement("div",{style:{width:0,height:0,overflow:"visible"}},N))}),mo=e=>null;mo.displayName="Cell";function Q9(e,t,n){return(t=J9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J9(e){var t=Z9(e,"string");return typeof t=="symbol"?t:t+""}function Z9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class eH{constructor(t){Q9(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tH(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(n),!0).forEach(function(r){nH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nH(e,t,n){return(t=rH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rH(e){var t=aH(e,"string");return typeof t=="symbol"?t:t+""}function aH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iH={cacheSize:2e3,enableCache:!0},xj=tH({},iH),xP=new eH(xj.cacheSize),sH={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},bP="recharts_measurement_span";function oH(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var SP=(e,t)=>{try{var n=document.getElementById(bP);n||(n=document.createElement("span"),n.setAttribute("id",bP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,sH,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},yu=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ll.isSsr)return{width:0,height:0};if(!xj.enableCache)return SP(t,n);var r=oH(t,n),i=xP.get(r);if(i)return i;var s=SP(t,n);return xP.set(r,s),s},CP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lH=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cH=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,bj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},uH=Object.keys(bj),xl="NaN";function dH(e,t){return e*bj[t]}class cr{static parse(t){var n,[,r,i]=(n=cH.exec(t))!==null&&n!==void 0?n:[];return new cr(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,jr(t)&&(this.unit=""),n!==""&&!lH.test(n)&&(this.num=NaN,this.unit=""),uH.includes(n)&&(this.num=dH(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new cr(NaN,""):new cr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new cr(NaN,""):new cr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new cr(NaN,""):new cr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new cr(NaN,""):new cr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return jr(this.num)}}function Sj(e){if(e.includes(xl))return xl;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=CP.exec(t))!==null&&n!==void 0?n:[],l=cr.parse(r??""),u=cr.parse(s??""),p=i==="*"?l.multiply(u):l.divide(u);if(p.isNaN())return xl;t=t.replace(CP,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,h,g,y]=(f=AP.exec(t))!==null&&f!==void 0?f:[],x=cr.parse(h??""),S=cr.parse(y??""),C=g==="+"?x.add(S):x.subtract(S);if(C.isNaN())return xl;t=t.replace(AP,C.toString())}return t}var EP=/\(([^()]*)\)/;function fH(e){for(var t=e,n;(n=EP.exec(t))!=null;){var[,r]=n;t=t.replace(EP,Sj(r))}return t}function pH(e){var t=e.replace(/\s+/g,"");return t=fH(t),t=Sj(t),t}function hH(e){try{return pH(e)}catch{return xl}}function Vy(e){var t=hH(e.slice(5,-1));return t===xl?"":t}var mH=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],gH=["dx","dy","angle","className","breakAll"];function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nv.apply(null,arguments)}function wP(e,t){if(e==null)return{};var n,r,i=yH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Cj=/[ \f\n\r\t\v\u2028\u2029]+/,Aj=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];xn(t)||(n?i=t.toString().split(""):i=t.toString().split(Cj));var s=i.map(u=>({word:u,width:yu(u,r).width})),l=n?0:yu("",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},vH=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:p}=e,f=ke(s),h=l,g=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce((U,W)=>{var{word:Z,width:Q}=W,I=U[U.length-1];if(I&&(r==null||i||I.width+Q+n<Number(r)))I.words.push(Z),I.width+=Q+n;else{var G={words:[Z],width:Q};U.push(G)}return U},[])},y=g(t),x=M=>M.reduce((R,U)=>R.width>U.width?R:U);if(!f||i)return y;var S=y.length>s||x(y).width>Number(r);if(!S)return y;for(var C="",A=M=>{var R=h.slice(0,M),U=Aj({breakAll:p,style:u,children:R+C}).wordsWithComputedWidth,W=g(U),Z=W.length>s||x(W).width>Number(r);return[Z,W]},w=0,P=h.length-1,T=0,N;w<=P&&T<=h.length-1;){var _=Math.floor((w+P)/2),j=_-1,[k,z]=A(j),[F]=A(_);if(!k&&!F&&(w=_+1),k&&F&&(P=_-1),!k&&F){N=z;break}T++}return N||y},PP=e=>{var t=xn(e)?[]:e.toString().split(Cj);return[{words:t}]},xH=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!Ll.isSsr){var u,p,f=Aj({breakAll:s,children:r,style:i});if(f){var{wordsWithComputedWidth:h,spaceWidth:g}=f;u=h,p=g}else return PP(r);return vH({breakAll:s,children:r,maxLines:l,style:i},u,p,t,n)}return PP(r)},TP="#808080",hh=E.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:p="end",fill:f=TP}=e,h=wP(e,mH),g=E.useMemo(()=>xH({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:y,dy:x,angle:S,className:C,breakAll:A}=h,w=wP(h,gH);if(!za(n)||!za(r)||g.length===0)return null;var P=n+(ke(y)?y:0),T=r+(ke(x)?x:0),N;switch(p){case"start":N=Vy("calc(".concat(s,")"));break;case"middle":N=Vy("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:N=Vy("calc(".concat(g.length-1," * -").concat(i,")"));break}var _=[];if(l){var j=g[0].width,{width:k}=h;_.push("scale(".concat(ke(k)?k/j:1,")"))}return S&&_.push("rotate(".concat(S,", ").concat(P,", ").concat(T,")")),_.length&&(w.transform=_.join(" ")),E.createElement("text",nv({},Zt(w,!0),{ref:t,x:P,y:T,className:dt("recharts-text",C),textAnchor:u,fill:f.includes("url")?TP:f}),g.map((z,F)=>{var M=z.words.join(A?"":" ");return E.createElement("tspan",{x:P,dy:F===0?N:i,key:"".concat(M,"-").concat(F)},M)}))});hh.displayName="Text";var bH=["labelRef"];function SH(e,t){if(e==null)return{};var n,r,i=CH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function CH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(n),!0).forEach(function(r){AH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AH(e,t,n){return(t=EH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EH(e){var t=wH(e,"string");return typeof t=="symbol"?t:t+""}function wH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mi(){return mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mi.apply(null,arguments)}var Ej=E.createContext(null),PH=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=E.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return E.createElement(Ej.Provider,{value:l},s)},wj=()=>{var e=E.useContext(Ej),t=Fv();return e||t},TH=E.createContext(null),DH=()=>{var e=E.useContext(TH),t=Ne(pO);return e||t},NH=e=>{var{value:t,formatter:n}=e,r=xn(e.children)?t:e.children;return typeof n=="function"?n(r):r},ab=e=>e!=null&&typeof e=="function",OH=(e,t)=>{var n=vn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},jH=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:p,innerRadius:f,outerRadius:h,startAngle:g,endAngle:y,clockWise:x}=i,S=(f+h)/2,C=OH(g,y),A=C>=0?1:-1,w,P;switch(t){case"insideStart":w=g+A*s,P=x;break;case"insideEnd":w=y-A*s,P=!x;break;case"end":w=y+A*s,P=x;break;default:throw new Error("Unsupported position ".concat(t))}P=C<=0?P:!P;var T=en(u,p,S,w),N=en(u,p,S,w+(P?1:-1)*359),_="M".concat(T.x,",").concat(T.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(P?0:1,`,
    `).concat(N.x,",").concat(N.y),j=xn(e.id)?Su("recharts-radial-line-"):e.id;return E.createElement("text",mi({},r,{dominantBaseline:"central",className:dt("recharts-radial-bar-label",l)}),E.createElement("defs",null,E.createElement("path",{id:j,d:_})),E.createElement("textPath",{xlinkHref:"#".concat(j)},n))},_H=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:p}=e,f=(u+p)/2;if(n==="outside"){var{x:h,y:g}=en(r,i,l+t,f);return{x:h,y:g,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(s+l)/2,{x,y:S}=en(r,i,y,f);return{x,y:S,textAnchor:"middle",verticalAnchor:"middle"}},Pj=e=>"cx"in e&&ke(e.cx),kH=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!Pj(n)&&(s=n);var{x:l,y:u,width:p,height:f}=t,h=f>=0?1:-1,g=h*r,y=h>0?"end":"start",x=h>0?"start":"end",S=p>=0?1:-1,C=S*r,A=S>0?"end":"start",w=S>0?"start":"end";if(i==="top"){var P={x:l+p/2,y:u-h*r,textAnchor:"middle",verticalAnchor:y};return Ft(Ft({},P),s?{height:Math.max(u-s.y,0),width:p}:{})}if(i==="bottom"){var T={x:l+p/2,y:u+f+g,textAnchor:"middle",verticalAnchor:x};return Ft(Ft({},T),s?{height:Math.max(s.y+s.height-(u+f),0),width:p}:{})}if(i==="left"){var N={x:l-C,y:u+f/2,textAnchor:A,verticalAnchor:"middle"};return Ft(Ft({},N),s?{width:Math.max(N.x-s.x,0),height:f}:{})}if(i==="right"){var _={x:l+p+C,y:u+f/2,textAnchor:w,verticalAnchor:"middle"};return Ft(Ft({},_),s?{width:Math.max(s.x+s.width-_.x,0),height:f}:{})}var j=s?{width:p,height:f}:{};return i==="insideLeft"?Ft({x:l+C,y:u+f/2,textAnchor:w,verticalAnchor:"middle"},j):i==="insideRight"?Ft({x:l+p-C,y:u+f/2,textAnchor:A,verticalAnchor:"middle"},j):i==="insideTop"?Ft({x:l+p/2,y:u+g,textAnchor:"middle",verticalAnchor:x},j):i==="insideBottom"?Ft({x:l+p/2,y:u+f-g,textAnchor:"middle",verticalAnchor:y},j):i==="insideTopLeft"?Ft({x:l+C,y:u+g,textAnchor:w,verticalAnchor:x},j):i==="insideTopRight"?Ft({x:l+p-C,y:u+g,textAnchor:A,verticalAnchor:x},j):i==="insideBottomLeft"?Ft({x:l+C,y:u+f-g,textAnchor:w,verticalAnchor:y},j):i==="insideBottomRight"?Ft({x:l+p-C,y:u+f-g,textAnchor:A,verticalAnchor:y},j):i&&typeof i=="object"&&(ke(i.x)||so(i.x))&&(ke(i.y)||so(i.y))?Ft({x:l+zn(i.x,p),y:u+zn(i.y,f),textAnchor:"end",verticalAnchor:"end"},j):Ft({x:l+p/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},j)},MH={offset:5};function fs(e){var t=na(e,MH),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:p,labelRef:f}=t,h=DH(),g=wj(),y=r==="center"?g:h??g,x=n||y;if(!x||xn(i)&&xn(s)&&!E.isValidElement(l)&&typeof l!="function")return null;var S=Ft(Ft({},t),{},{viewBox:x});if(E.isValidElement(l)){var{labelRef:C}=S,A=SH(S,bH);return E.cloneElement(l,A)}var w;if(typeof l=="function"){if(w=E.createElement(l,S),E.isValidElement(w))return w}else w=NH(t);var P=Pj(x),T=Zt(t,!0);if(P&&(r==="insideStart"||r==="insideEnd"||r==="end"))return jH(t,r,w,T,x);var N=P?_H(x,t.offset,t.position):kH(t,x);return E.createElement(hh,mi({ref:f,className:dt("recharts-label",u)},T,N,{breakAll:p}),w)}fs.displayName="Label";var IH=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?E.createElement(fs,mi({key:"label-implicit"},r)):za(e)?E.createElement(fs,mi({key:"label-implicit",value:e},r)):E.isValidElement(e)?e.type===fs?E.cloneElement(e,Ft({key:"label-implicit"},r)):E.createElement(fs,mi({key:"label-implicit",content:e},r)):ab(e)?E.createElement(fs,mi({key:"label-implicit",content:e},r)):e&&typeof e=="object"?E.createElement(fs,mi({},e,{key:"label-implicit"},r)):null};function RH(e){var{label:t}=e,n=wj();return IH(t,n)||null}var Ky={},Wy={},NP;function LH(){return NP||(NP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Wy)),Wy}var Xy={},OP;function $H(){return OP||(OP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Xy)),Xy}var jP;function BH(){return jP||(jP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LH(),n=$H(),r=Rv();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(Ky)),Ky}var Qy,_P;function zH(){return _P||(_P=1,Qy=BH().last),Qy}var UH=zH();const HH=Ca(UH);var GH=["valueAccessor"],qH=["dataKey","clockWise","id","textBreakAll"];function Pp(){return Pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pp.apply(null,arguments)}function kP(e,t){if(e==null)return{};var n,r,i=YH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function YH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var FH=e=>Array.isArray(e.value)?HH(e.value):e.value,Tj=E.createContext(void 0),VH=Tj.Provider,Dj=E.createContext(void 0),KH=Dj.Provider;function WH(){return E.useContext(Tj)}function XH(){return E.useContext(Dj)}function Gf(e){var{valueAccessor:t=FH}=e,n=kP(e,GH),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=kP(n,qH),p=WH(),f=XH(),h=p||f;return!h||!h.length?null:E.createElement(mr,{className:"recharts-label-list"},h.map((g,y)=>{var x,S=xn(r)?t(g,y):Mt(g&&g.payload,r),C=xn(s)?{}:{id:"".concat(s,"-").concat(y)};return E.createElement(fs,Pp({},Zt(g,!0),u,C,{fill:(x=n.fill)!==null&&x!==void 0?x:g.fill,parentViewBox:g.parentViewBox,value:S,textBreakAll:l,viewBox:g.viewBox,key:"label-".concat(y),index:y}))}))}Gf.displayName="LabelList";function Nj(e){var{label:t}=e;return t?t===!0?E.createElement(Gf,{key:"labelList-implicit"}):E.isValidElement(t)||ab(t)?E.createElement(Gf,{key:"labelList-implicit",content:t}):typeof t=="object"?E.createElement(Gf,Pp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var Oj=e=>e.graphicalItems.polarItems,QH=se([Rt,Uu],_x),ib=se([Oj,Vt,QH],Mx),JH=se([ib],Ix),sb=se([JH,bx],Rx),ZH=se([sb,Vt,ib],$x),e7=se([sb,Vt,ib],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=Mt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:Mt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),MP=()=>{},t7=se([Vt,kO,MP,e7,MP,st,Rt],zx),jj=se([Vt,st,sb,ZH,zu,Rt,t7],Ux),n7=se([jj,Vt,Gl],qx);se([Vt,jj,n7,Rt],Fx);var r7={radiusAxis:{},angleAxis:{}},_j=Mr({name:"polarAxis",initialState:r7,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:GK,removeRadiusAxis:qK,addAngleAxis:YK,removeAngleAxis:FK}=_j.actions,a7=_j.reducer;function IP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function RP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(n),!0).forEach(function(r){i7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i7(e,t,n){return(t=s7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s7(e){var t=o7(e,"string");return typeof t=="symbol"?t:t+""}function o7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l7=(e,t)=>t,ob=se([Oj,l7],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),c7=[],lb=(e,t,n)=>n?.length===0?c7:n,kj=se([bx,ob,lb],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>RP(RP({},t.presentationProps),s.props))),i!=null)return i}}),u7=se([kj,ob,lb],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=Mt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:Yp(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),d7=se([kj,ob,lb,cn],(e,t,n,r)=>{if(!(t==null||e==null))return uG({offset:r,pieSettings:t,displayedData:e,cells:n})}),Jy={},LP;function f7(){return LP||(LP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(Jy)),Jy}var Zy,$P;function p7(){return $P||($P=1,Zy=f7().isPlainObject),Zy}var h7=p7();const m7=Ca(h7);function BP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(n),!0).forEach(function(r){g7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g7(e,t,n){return(t=y7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y7(e){var t=v7(e,"string");return typeof t=="symbol"?t:t+""}function v7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tp.apply(null,arguments)}var UP=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},x7={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},b7=e=>{var t=na(e,x7),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:p,animationDuration:f,animationBegin:h,isUpdateAnimationActive:g}=t,y=E.useRef(),[x,S]=E.useState(-1),C=E.useRef(i),A=E.useRef(s),w=E.useRef(l),P=E.useRef(n),T=E.useRef(r),N=Jp(e,"trapezoid-");if(E.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var Z=y.current.getTotalLength();Z&&S(Z)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var _=dt("recharts-trapezoid",u);if(!g)return E.createElement("g",null,E.createElement("path",Tp({},Zt(t,!0),{className:_,d:UP(n,r,i,s,l)})));var j=C.current,k=A.current,z=w.current,F=P.current,M=T.current,R="0px ".concat(x===-1?1:x,"px"),U="".concat(x,"px 0px"),W=rN(["strokeDasharray"],f,p);return E.createElement(Qp,{animationId:N,key:N,canBegin:x>0,duration:f,easing:p,isActive:g,begin:h},Z=>{var Q=Nn(j,i,Z),I=Nn(k,s,Z),G=Nn(z,l,Z),ie=Nn(F,n,Z),le=Nn(M,r,Z);y.current&&(C.current=Q,A.current=I,w.current=G,P.current=ie,T.current=le);var $=Z>0?{transition:W,strokeDasharray:U}:{strokeDasharray:R};return E.createElement("path",Tp({},Zt(t,!0),{className:_,d:UP(ie,le,Q,I,G),ref:y,style:zP(zP({},$),t.style)}))})},S7=["option","shapeType","propTransformer","activeClassName","isActive"];function C7(e,t){if(e==null)return{};var n,r,i=A7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function HP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(n),!0).forEach(function(r){E7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E7(e,t,n){return(t=w7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w7(e){var t=P7(e,"string");return typeof t=="symbol"?t:t+""}function P7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T7(e,t){return Dp(Dp({},t),e)}function D7(e,t){return e==="symbols"}function GP(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return E.createElement(oN,n);case"trapezoid":return E.createElement(b7,n);case"sector":return E.createElement(uN,n);case"symbols":if(D7(t))return E.createElement(kv,n);break;default:return null}}function N7(e){return E.isValidElement(e)?e.props:e}function Mj(e){var{option:t,shapeType:n,propTransformer:r=T7,activeClassName:i="recharts-active-shape",isActive:s}=e,l=C7(e,S7),u;if(E.isValidElement(t))u=E.cloneElement(t,Dp(Dp({},l),N7(t)));else if(typeof t=="function")u=t(l);else if(m7(t)&&typeof t!="boolean"){var p=r(t,l);u=E.createElement(GP,{shapeType:n,elementProps:p})}else{var f=l;u=E.createElement(GP,{shapeType:n,elementProps:f})}return s?E.createElement(mr,{className:i},u):u}var cb=(e,t)=>{var n=$t();return(r,i)=>s=>{e?.(r,i,s),n(WO({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},ub=e=>{var t=$t();return(n,r)=>i=>{e?.(n,r,i),t(dU())}},db=(e,t)=>{var n=$t();return(r,i)=>s=>{e?.(r,i,s),n(fU({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function Ij(e){var{fn:t,args:n}=e,r=$t(),i=ta();return E.useEffect(()=>{if(!i){var s=t(n);return r(lU(s)),()=>{r(cU(s))}}},[t,n,r,i]),null}var Rj=()=>{};function O7(e){var{legendPayload:t}=e,n=$t(),r=ta();return E.useEffect(()=>r?Rj:(n(ZD(t)),()=>{n(eN(t))}),[n,r,t]),null}function j7(e){var{legendPayload:t}=e,n=$t(),r=Ne(st);return E.useEffect(()=>r!=="centric"&&r!=="radial"?Rj:(n(ZD(t)),()=>{n(eN(t))}),[n,r,t]),null}var e0,_7=()=>{var[e]=E.useState(()=>Su("uid-"));return e},k7=(e0=nM.useId)!==null&&e0!==void 0?e0:_7;function M7(e,t){var n=k7();return t||(e?"".concat(e,"-").concat(n):n)}var I7=E.createContext(void 0),Lj=e=>{var{id:t,type:n,children:r}=e,i=M7("recharts-".concat(n),t);return E.createElement(I7.Provider,{value:i},r(i))},R7={cartesianItems:[],polarItems:[]},$j=Mr({name:"graphicalItems",initialState:R7,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=vi(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=vi(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=vi(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:L7,replaceCartesianGraphicalItem:$7,removeCartesianGraphicalItem:B7,addPolarGraphicalItem:z7,removePolarGraphicalItem:U7}=$j.actions,H7=$j.reducer;function G7(e){var t=$t(),n=E.useRef(null);return E.useEffect(()=>{n.current===null?t(L7(e)):n.current!==e&&t($7({prev:n.current,next:e})),n.current=e},[t,e]),E.useEffect(()=>()=>{n.current&&(t(B7(n.current)),n.current=null)},[t]),null}function q7(e){var t=$t();return E.useEffect(()=>(t(z7(e)),()=>{t(U7(e))}),[t,e]),null}var Y7=["onMouseEnter","onClick","onMouseLeave"],F7=["id"],V7=["id"];function fb(e,t){if(e==null)return{};var n,r,i=K7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function K7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function qP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qP(Object(n),!0).forEach(function(r){W7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W7(e,t,n){return(t=X7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X7(e){var t=Q7(e,"string");return typeof t=="symbol"?t:t+""}function Q7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vs(){return vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vs.apply(null,arguments)}function J7(e){var t=E.useMemo(()=>Dv(e.children,mo),[e.children]),n=Ne(r=>u7(r,e.id,t));return n==null?null:E.createElement(j7,{legendPayload:n})}function Z7(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:p,tooltipType:f}=e;return{dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:Yp(u,t),hide:p,type:f,color:l,unit:""}}}var eG=(e,t)=>e>t?"start":e<t?"end":"middle",tG=(e,t,n)=>zn(typeof t=="function"?t(e):t,n,n*.8),nG=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=qD(s,l),p=i+zn(e.cx,s,s/2),f=r+zn(e.cy,l,l/2),h=zn(e.innerRadius,u,0),g=tG(n,e.outerRadius,u),y=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:p,cy:f,innerRadius:h,outerRadius:g,maxRadius:y}},rG=(e,t)=>{var n=vn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function aG(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var iG=(e,t)=>{if(E.isValidElement(e))return E.cloneElement(e,t);if(typeof e=="function")return e(t);var n=dt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return E.createElement(nN,vs({},t,{type:"linear",className:n}))},sG=(e,t,n)=>{if(E.isValidElement(e))return E.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),E.isValidElement(r)))return r;var i=dt("recharts-pie-label-text",aG(e));return E.createElement(hh,vs({},t,{alignmentBaseline:"middle",className:i}),r)};function oG(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=wo(n),p=Zt(i,!1),f=Zt(s,!1),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((y,x)=>{var S=(y.startAngle+y.endAngle)/2,C=en(y.cx,y.cy,y.outerRadius+h,S),A=kt(kt(kt(kt({},u),y),{},{stroke:"none"},p),{},{index:x,textAnchor:eG(C.x,y.cx)},C),w=kt(kt(kt(kt({},u),y),{},{fill:"none",stroke:y.fill},f),{},{index:x,points:[en(y.cx,y.cy,y.outerRadius,S),C],key:"line"});return E.createElement(mr,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(x)},s&&iG(s,w),sG(i,A,Mt(y,l)))});return E.createElement(mr,{className:"recharts-pie-labels"},g)}function lG(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?E.createElement(Nj,{label:n.label}):E.createElement(oG,{sectors:t,props:n,showLabels:r})}function cG(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=Ne(So),{onMouseEnter:l,onClick:u,onMouseLeave:p}=i,f=fb(i,Y7),h=cb(l,i.dataKey),g=ub(p),y=db(u,i.dataKey);return t==null||t.length===0?null:E.createElement(E.Fragment,null,t.map((x,S)=>{if(x?.startAngle===0&&x?.endAngle===0&&t.length!==1)return null;var C=n&&String(S)===s,A=s?r:null,w=C?n:A,P=kt(kt({},x),{},{stroke:x.stroke,tabIndex:-1,[WD]:S,[XD]:i.dataKey});return E.createElement(mr,vs({tabIndex:-1,className:"recharts-pie-sector"},_u(f,x,S),{onMouseEnter:h(x,S),onMouseLeave:g(x,S),onClick:y(x,S),key:"sector-".concat(x?.startAngle,"-").concat(x?.endAngle,"-").concat(x.midAngle,"-").concat(S)}),E.createElement(Mj,vs({option:w,isActive:C,shapeType:"sector"},P)))}))}function uG(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:p,dataKey:f,nameKey:h,tooltipType:g}=n,y=Math.abs(n.minAngle),x=rG(u,p),S=Math.abs(x),C=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,A=r.filter(j=>Mt(j,f,0)!==0).length,w=(S>=360?A:A-1)*C,P=S-A*y-w,T=r.reduce((j,k)=>{var z=Mt(k,f,0);return j+(ke(z)?z:0)},0),N;if(T>0){var _;N=r.map((j,k)=>{var z=Mt(j,f,0),F=Mt(j,h,k),M=nG(n,s,j),R=(ke(z)?z:0)/T,U,W=kt(kt({},j),i&&i[k]&&i[k].props);k?U=_.endAngle+vn(x)*C*(z!==0?1:0):U=u;var Z=U+vn(x)*((z!==0?y:0)+R*P),Q=(U+Z)/2,I=(M.innerRadius+M.outerRadius)/2,G=[{name:F,value:z,payload:W,dataKey:f,type:g}],ie=en(M.cx,M.cy,I,Q);return _=kt(kt(kt(kt({},n.presentationProps),{},{percent:R,cornerRadius:l,name:F,tooltipPayload:G,midAngle:Q,middleRadius:I,tooltipPosition:ie},W),M),{},{value:Mt(j,f),startAngle:U,endAngle:Z,payload:W,paddingAngle:vn(x)*C}),_})}return N}function dG(e){var{showLabels:t,sectors:n,children:r}=e,i=E.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return E.createElement(KH,{value:t?i:void 0},r)}function fG(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:p,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=t,y=Jp(t,"recharts-pie-"),x=n.current,[S,C]=E.useState(!1),A=E.useCallback(()=>{typeof g=="function"&&g(),C(!1)},[g]),w=E.useCallback(()=>{typeof h=="function"&&h(),C(!0)},[h]);return E.createElement(dG,{showLabels:!S,sectors:r},E.createElement(Qp,{animationId:y,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:w,onAnimationEnd:A,key:y},P=>{var T=[],N=r&&r[0],_=N?.startAngle;return r?.forEach((j,k)=>{var z=x&&x[k],F=k>0?yo(j,"paddingAngle",0):0;if(z){var M=Nn(z.endAngle-z.startAngle,j.endAngle-j.startAngle,P),R=kt(kt({},j),{},{startAngle:_+F,endAngle:_+M+F});T.push(R),_=R.endAngle}else{var{endAngle:U,startAngle:W}=j,Z=Nn(0,U-W,P),Q=kt(kt({},j),{},{startAngle:_+F,endAngle:_+Z+F});T.push(Q),_=Q.endAngle}}),n.current=T,E.createElement(mr,null,E.createElement(cG,{sectors:T,activeShape:p,inactiveShape:f,allOtherPieProps:t}))}),E.createElement(lG,{showLabels:!S,sectors:r,props:t}),t.children)}var pG={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ll.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function hG(e){var{id:t}=e,n=fb(e,F7),{hide:r,className:i,rootTabIndex:s}=e,l=E.useMemo(()=>Dv(e.children,mo),[e.children]),u=Ne(h=>d7(h,t,l)),p=E.useRef(null),f=dt("recharts-pie",i);return r||u==null?(p.current=null,E.createElement(mr,{tabIndex:s,className:f})):E.createElement(E.Fragment,null,E.createElement(Ij,{fn:Z7,args:kt(kt({},e),{},{sectors:u})}),E.createElement(mr,{tabIndex:s,className:f},E.createElement(fG,{props:kt(kt({},n),{},{sectors:u}),previousSectorsRef:p})))}function qf(e){var t=na(e,pG),{id:n}=t,r=fb(t,V7),i=wo(r);return E.createElement(Lj,{id:n,type:"pie"},s=>E.createElement(E.Fragment,null,E.createElement(q7,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),E.createElement(J7,vs({},r,{id:s})),E.createElement(hG,vs({},r,{id:s}))))}qf.displayName="Pie";function YP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function FP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YP(Object(n),!0).forEach(function(r){mG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mG(e,t,n){return(t=gG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gG(e){var t=yG(e,"string");return typeof t=="symbol"?t:t+""}function yG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vG={xAxis:{},yAxis:{},zAxis:{}},Bj=Mr({name:"cartesianAxis",initialState:vG,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=FP(FP({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:xG,removeXAxis:bG,addYAxis:SG,removeYAxis:CG,addZAxis:VK,removeZAxis:KK,updateYAxisWidth:AG}=Bj.actions,EG=Bj.reducer,wG=se([cn],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),PG=se([wG,Pi,Ti],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),zj=()=>Ne(PG),TG="Invariant failed";function DG(e,t){throw new Error(TG)}var NG=["x","y"];function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rv.apply(null,arguments)}function VP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VP(Object(n),!0).forEach(function(r){OG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OG(e,t,n){return(t=jG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jG(e){var t=_G(e,"string");return typeof t=="symbol"?t:t+""}function _G(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kG(e,t){if(e==null)return{};var n,r,i=MG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function MG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function IG(e,t){var{x:n,y:r}=e,i=kG(e,NG),s="".concat(n),l=parseInt(s,10),u="".concat(r),p=parseInt(u,10),f="".concat(t.height||i.height),h=parseInt(f,10),g="".concat(t.width||i.width),y=parseInt(g,10);return ou(ou(ou(ou(ou({},t),i),l?{x:l}:{}),p?{y:p}:{}),{},{height:h,width:y,name:t.name,radius:t.radius})}function pb(e){return E.createElement(Mj,rv({shapeType:"rectangle",propTransformer:IG,activeClassName:"recharts-active-bar"},e))}var RG=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(ke(t))return t;var s=ke(r)||xn(r);return s?t(r,i):(s||DG(),n)}},LG={},Uj=Mr({name:"errorBars",initialState:LG,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:WK,replaceErrorBar:XK,removeErrorBar:QK}=Uj.actions,$G=Uj.reducer,BG=["children"];function zG(e,t){if(e==null)return{};var n,r,i=UG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function UG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var HG={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},GG=E.createContext(HG);function qG(e){var{children:t}=e,n=zG(e,BG);return E.createElement(GG.Provider,{value:n},t)}function Hj(e,t){var n,r,i=Ne(f=>As(f,e)),s=Ne(f=>Es(f,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Er.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:wr.allowDataOverflow,p=l||u;return{needClip:p,needClipX:l,needClipY:u}}function YG(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=zj(),{needClipX:s,needClipY:l,needClip:u}=Hj(t,n);if(!u)return null;var{x:p,y:f,width:h,height:g}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:s?p:p-h/2,y:l?f:f-g/2,width:s?h:h*2,height:l?g:g*2}))}var FG=["onMouseEnter","onMouseLeave","onClick"],VG=["value","background","tooltipPosition"],KG=["id"],WG=["onMouseEnter","onClick","onMouseLeave"];function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xs.apply(null,arguments)}function KP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(n),!0).forEach(function(r){XG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XG(e,t,n){return(t=QG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QG(e){var t=JG(e,"string");return typeof t=="symbol"?t:t+""}function JG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Np(e,t){if(e==null)return{};var n,r,i=ZG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ZG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var eq=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Yp(n,t),payload:e}]};function tq(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Yp(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function nq(e){var t=Ne(So),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:p}=s,f=Np(s,FG),h=cb(l,r),g=ub(u),y=db(p,r);if(!i||n==null)return null;var x=Zt(i,!1);return E.createElement(E.Fragment,null,n.map((S,C)=>{var{value:A,background:w,tooltipPosition:P}=S,T=Np(S,VG);if(!w)return null;var N=h(S,C),_=g(S,C),j=y(S,C),k=Xn(Xn(Xn(Xn(Xn({option:i,isActive:String(C)===t},T),{},{fill:"#eee"},w),x),_u(f,S,C)),{},{onMouseEnter:N,onMouseLeave:_,onClick:j,dataKey:r,index:C,className:"recharts-bar-background-rectangle"});return E.createElement(pb,xs({key:"background-bar-".concat(C)},k))}))}function rq(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Xn(Xn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return E.createElement(VH,{value:t?i:void 0},n)}function aq(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=Ne(So),p=Ne(lj),f=n&&String(s)===u&&(p==null||l===p),h=f?n:t;return E.createElement(pb,xs({},r,i,{isActive:f,option:h,index:s,dataKey:l}))}function iq(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return E.createElement(pb,xs({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function sq(e){var{data:t,props:n}=e,r=wo(n),{id:i}=r,s=Np(r,KG),{shape:l,dataKey:u,activeBar:p}=n,{onMouseEnter:f,onClick:h,onMouseLeave:g}=n,y=Np(n,WG),x=cb(f,u),S=ub(g),C=db(h,u);return t?E.createElement(E.Fragment,null,t.map((A,w)=>E.createElement(mr,xs({className:"recharts-bar-rectangle"},_u(y,A,w),{onMouseEnter:x(A,w),onMouseLeave:S(A,w),onClick:C(A,w),key:"rectangle-".concat(A?.x,"-").concat(A?.y,"-").concat(A?.value,"-").concat(w)}),p?E.createElement(aq,{shape:l,activeBar:p,baseProps:s,entry:A,index:w,dataKey:u}):E.createElement(iq,{shape:l,baseProps:s,entry:A,index:w,dataKey:u})))):null}function oq(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:p,onAnimationEnd:f,onAnimationStart:h}=t,g=n.current,y=Jp(t,"recharts-bar-"),[x,S]=E.useState(!1),C=!x,A=E.useCallback(()=>{typeof f=="function"&&f(),S(!1)},[f]),w=E.useCallback(()=>{typeof h=="function"&&h(),S(!0)},[h]);return E.createElement(rq,{showLabels:C,rects:r},E.createElement(Qp,{animationId:y,begin:l,duration:u,isActive:s,easing:p,onAnimationEnd:A,onAnimationStart:w,key:y},P=>{var T=P===1?r:r?.map((N,_)=>{var j=g&&g[_];if(j)return Xn(Xn({},N),{},{x:Nn(j.x,N.x,P),y:Nn(j.y,N.y,P),width:Nn(j.width,N.width,P),height:Nn(j.height,N.height,P)});if(i==="horizontal"){var k=Nn(0,N.height,P);return Xn(Xn({},N),{},{y:N.y+N.height-k,height:k})}var z=Nn(0,N.width,P);return Xn(Xn({},N),{},{width:z})});return P>0&&(n.current=T??null),T==null?null:E.createElement(mr,null,E.createElement(sq,{props:t,data:T}))}),E.createElement(Nj,{label:t.label}),t.children)}function lq(e){var t=E.useRef(null);return E.createElement(oq,{previousRectanglesRef:t,props:e})}var Gj=0,cq=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Mt(e,t)}};class uq extends E.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:p,id:f}=this.props;if(t||n==null)return null;var h=dt("recharts-bar",i),g=f;return E.createElement(mr,{className:h,id:f},u&&E.createElement("defs",null,E.createElement(YG,{clipPathId:g,xAxisId:s,yAxisId:l})),E.createElement(mr,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},E.createElement(nq,{data:n,dataKey:r,background:p,allOtherBarProps:this.props}),E.createElement(lq,this.props)))}}var dq={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ll.isSsr,legendType:"rect",minPointSize:Gj,xAxisId:0,yAxisId:0};function fq(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:f,isAnimationActive:h}=e,{needClip:g}=Hj(t,n),y=Wv(),x=ta(),S=Dv(e.children,mo),C=Ne(P=>Bq(P,t,n,x,e.id,S));if(y!=="vertical"&&y!=="horizontal")return null;var A,w=C?.[0];return w==null||w.height==null||w.width==null?A=0:A=y==="vertical"?w.height/2:w.width/2,E.createElement(qG,{xAxisId:t,yAxisId:n,data:C,dataPointFormatter:cq,errorBarOffset:A},E.createElement(uq,xs({},e,{layout:y,needClip:g,data:C,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:f,isAnimationActive:h})))}function pq(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:p,yAxisTicks:f,stackedData:h,displayedData:g,offset:y,cells:x,parentViewBox:S}=e,C=t==="horizontal"?u:l,A=h?C.scale.domain():null,w=N4({numericAxis:C});return g.map((P,T)=>{var N,_,j,k,z,F;h?N=A4(h[T],A):(N=Mt(P,n),Array.isArray(N)||(N=[w,N]));var M=RG(r,Gj)(N[1],T);if(t==="horizontal"){var R,[U,W]=[u.scale(N[0]),u.scale(N[1])];_=IE({axis:l,ticks:p,bandSize:s,offset:i.offset,entry:P,index:T}),j=(R=W??U)!==null&&R!==void 0?R:void 0,k=i.size;var Z=U-W;if(z=jr(Z)?0:Z,F={x:_,y:y.top,width:k,height:y.height},Math.abs(M)>0&&Math.abs(z)<Math.abs(M)){var Q=vn(z||M)*(Math.abs(M)-Math.abs(z));j-=Q,z+=Q}}else{var[I,G]=[l.scale(N[0]),l.scale(N[1])];if(_=I,j=IE({axis:u,ticks:f,bandSize:s,offset:i.offset,entry:P,index:T}),k=G-I,z=i.size,F={x:y.left,y:j,width:y.width,height:z},Math.abs(M)>0&&Math.abs(k)<Math.abs(M)){var ie=vn(k||M)*(Math.abs(M)-Math.abs(k));k+=ie}}if(_==null||j==null||k==null||z==null)return null;var le=Xn(Xn({},P),{},{x:_,y:j,width:k,height:z,value:h?N:N[1],payload:P,background:F,tooltipPosition:{x:_+k/2,y:j+z/2},parentViewBox:S},x&&x[T]&&x[T].props);return le}).filter(Boolean)}function di(e){var t=na(e,dq),n=ta();return E.createElement(Lj,{id:t.id,type:"bar"},r=>E.createElement(E.Fragment,null,E.createElement(O7,{legendPayload:eq(t)}),E.createElement(Ij,{fn:tq,args:t}),E.createElement(G7,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:D4(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),E.createElement(fq,xs({},t,{id:r}))))}di.displayName="Bar";function WP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WP(Object(n),!0).forEach(function(r){hq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hq(e,t,n){return(t=mq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mq(e){var t=gq(e,"string");return typeof t=="symbol"?t:t+""}function gq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yq=(e,t)=>t,vq=(e,t,n)=>n,xq=(e,t,n,r)=>r,bq=(e,t,n,r,i)=>i,Vu=se([kx,bq],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),Sq=se([Vu],e=>e?.maxBarSize),Cq=(e,t,n,r,i,s)=>s,XP=(e,t,n)=>{var r=n??e;if(!xn(r))return zn(r,t,0)},Aq=se([st,kx,yq,vq,xq],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Eq=(e,t,n,r)=>{var i=st(e);return i==="horizontal"?Q0(e,"yAxis",n,r):Q0(e,"xAxis",t,r)},wq=(e,t,n)=>{var r=st(e);return r==="horizontal"?Jw(e,"xAxis",t):Jw(e,"yAxis",n)},Pq=(e,t,n)=>{var r={},i=e.filter(lh),s=e.filter(f=>f.stackId==null),l=i.reduce((f,h)=>(f[h.stackId]||(f[h.stackId]=[]),f[h.stackId].push(h),f),r),u=Object.entries(l).map(f=>{var[h,g]=f,y=g.map(S=>S.dataKey),x=XP(t,n,g[0].barSize);return{stackId:h,dataKeys:y,barSize:x}}),p=s.map(f=>{var h=[f.dataKey].filter(y=>y!=null),g=XP(t,n,f.barSize);return{stackId:void 0,dataKeys:h,barSize:g}});return[...u,...p]},Tq=se([Aq,cz,wq],Pq),Dq=(e,t,n,r,i)=>{var s,l,u=Vu(e,t,n,r,i);if(u!=null){var p=st(e),f=sO(e),{maxBarSize:h}=u,g=xn(h)?f:h,y,x;return p==="horizontal"?(y=Ml(e,"xAxis",t,r),x=kl(e,"xAxis",t,r)):(y=Ml(e,"yAxis",n,r),x=kl(e,"yAxis",n,r)),(s=(l=qv(y,x,!0))!==null&&l!==void 0?l:g)!==null&&s!==void 0?s:0}},qj=(e,t,n,r)=>{var i=st(e),s,l;return i==="horizontal"?(s=Ml(e,"xAxis",t,r),l=kl(e,"xAxis",t,r)):(s=Ml(e,"yAxis",n,r),l=kl(e,"yAxis",n,r)),qv(s,l)};function Nq(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=zn(e,n,0,!0),u,p=[];if(kr(r[0].barSize)){var f=!1,h=n/s,g=r.reduce((w,P)=>w+(P.barSize||0),0);g+=(s-1)*l,g>=n&&(g-=(s-1)*l,l=0),g>=n&&h>0&&(f=!0,h*=.9,g=s*h);var y=(n-g)/2>>0,x={offset:y-l,size:0};u=r.reduce((w,P)=>{var T,N={stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:x.offset+x.size+l,size:f?h:(T=P.barSize)!==null&&T!==void 0?T:0}},_=[...w,N];return x=_[_.length-1].position,_},p)}else{var S=zn(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var C=(n-2*S-(s-1)*l)/s;C>1&&(C>>=0);var A=kr(i)?Math.min(C,i):C;u=r.reduce((w,P,T)=>[...w,{stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:S+(C+l)*T+(C-A)/2,size:A}}],p)}return u}}var Oq=(e,t,n,r,i,s,l)=>{var u=xn(l)?t:l,p=Nq(n,r,i!==s?i:s,e,u);return i!==s&&p!=null&&(p=p.map(f=>Mf(Mf({},f),{},{position:Mf(Mf({},f.position),{},{offset:f.position.offset-i/2})}))),p},jq=se([Tq,sO,lz,oO,Dq,qj,Sq],Oq),_q=(e,t,n,r)=>Ml(e,"xAxis",t,r),kq=(e,t,n,r)=>Ml(e,"yAxis",n,r),Mq=(e,t,n,r)=>kl(e,"xAxis",t,r),Iq=(e,t,n,r)=>kl(e,"yAxis",n,r),Rq=se([jq,Vu],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),Lq=(e,t)=>{var n=Ox(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},$q=se([Eq,Vu],Lq),Bq=se([cn,Yv,_q,kq,Mq,Iq,Rq,st,Sx,qj,$q,Vu,Cq],(e,t,n,r,i,s,l,u,p,f,h,g,y)=>{var{chartData:x,dataStartIndex:S,dataEndIndex:C}=p;if(!(g==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||f==null)){var{data:A}=g,w;if(A!=null&&A.length>0?w=A:w=x?.slice(S,C+1),w!=null)return pq({layout:u,barSettings:g,pos:l,parentViewBox:t,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:h,displayedData:w,offset:e,cells:y})}}),Yj=e=>{var{chartData:t}=e,n=$t(),r=ta();return E.useEffect(()=>r?()=>{}:(n(lP(t)),()=>{n(lP(void 0))}),[t,n,r]),null},QP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Fj=Mr({name:"brush",initialState:QP,reducers:{setBrushSettings(e,t){return t.payload==null?QP:t.payload}}}),{setBrushSettings:JK}=Fj.actions,zq=Fj.reducer;function Uq(e,t,n){return(t=Hq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hq(e){var t=Gq(e,"string");return typeof t=="symbol"?t:t+""}function Gq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class hb{static create(t){return new hb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}Uq(hb,"EPS",1e-4);function qq(e){return(e%180+180)%180}var Yq=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=qq(i),l=s*Math.PI/180,u=Math.atan(r/n),p=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(p)},Fq={dots:[],areas:[],lines:[]},Vj=Mr({name:"referenceElements",initialState:Fq,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=vi(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=vi(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=vi(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:ZK,removeDot:eW,addArea:tW,removeArea:nW,addLine:rW,removeLine:aW}=Vj.actions,Vq=Vj.reducer,Kq=E.createContext(void 0),Wq=e=>{var{children:t}=e,[n]=E.useState("".concat(Su("recharts"),"-clip")),r=zj();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return E.createElement(Kq.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function t0(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Kj(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function Xq(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Yq(r,n)}function Qq(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Op(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function Jq(e,t){return Kj(e,t+1)}function Zq(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,p=0,f=1,h=l,g=function(){var S=r?.[p];if(S===void 0)return{v:Kj(r,f)};var C=p,A,w=()=>(A===void 0&&(A=n(S,C)),A),P=S.coordinate,T=p===0||Op(e,P,w,h,u);T||(p=0,h=l,f+=1),T&&(h=P+e*(w()/2+i),p+=f)},y;f<=s.length;)if(y=g(),y)return y.v;return[]}function JP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JP(Object(n),!0).forEach(function(r){eY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eY(e,t,n){return(t=tY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tY(e){var t=nY(e,"string");return typeof t=="symbol"?t:t+""}function nY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rY(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:p}=t,f=function(y){var x=s[y],S,C=()=>(S===void 0&&(S=n(x,y)),S);if(y===l-1){var A=e*(x.coordinate+e*C()/2-p);s[y]=x=Ln(Ln({},x),{},{tickCoord:A>0?x.coordinate-A*e:x.coordinate})}else s[y]=x=Ln(Ln({},x),{},{tickCoord:x.coordinate});var w=Op(e,x.tickCoord,C,u,p);w&&(p=x.tickCoord-e*(C()/2+i),s[y]=Ln(Ln({},x),{},{isShow:!0}))},h=l-1;h>=0;h--)f(h);return s}function aY(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:p,end:f}=t;if(s){var h=r[u-1],g=n(h,u-1),y=e*(h.coordinate+e*g/2-f);l[u-1]=h=Ln(Ln({},h),{},{tickCoord:y>0?h.coordinate-y*e:h.coordinate});var x=Op(e,h.tickCoord,()=>g,p,f);x&&(f=h.tickCoord-e*(g/2+i),l[u-1]=Ln(Ln({},h),{},{isShow:!0}))}for(var S=s?u-1:u,C=function(P){var T=l[P],N,_=()=>(N===void 0&&(N=n(T,P)),N);if(P===0){var j=e*(T.coordinate-e*_()/2-p);l[P]=T=Ln(Ln({},T),{},{tickCoord:j<0?T.coordinate-j*e:T.coordinate})}else l[P]=T=Ln(Ln({},T),{},{tickCoord:T.coordinate});var k=Op(e,T.tickCoord,_,p,f);k&&(p=T.tickCoord+e*(_()/2+i),l[P]=Ln(Ln({},T),{},{isShow:!0}))},A=0;A<S;A++)C(A);return l}function mb(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:p,tickFormatter:f,unit:h,angle:g}=e;if(!i||!i.length||!r)return[];if(ke(p)||Ll.isSsr){var y;return(y=Jq(i,ke(p)?p:0))!==null&&y!==void 0?y:[]}var x=[],S=u==="top"||u==="bottom"?"width":"height",C=h&&S==="width"?yu(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},A=(T,N)=>{var _=typeof f=="function"?f(T.value,N):T.value;return S==="width"?Xq(yu(_,{fontSize:t,letterSpacing:n}),C,g):yu(_,{fontSize:t,letterSpacing:n})[S]},w=i.length>=2?vn(i[1].coordinate-i[0].coordinate):1,P=Qq(s,w,S);return p==="equidistantPreserveStart"?Zq(w,P,A,i,l):(p==="preserveStart"||p==="preserveStartEnd"?x=aY(w,P,A,i,l,p==="preserveStartEnd"):x=rY(w,P,A,i,l),x.filter(T=>T.isShow))}var iY=["viewBox"],sY=["viewBox"];function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bl.apply(null,arguments)}function ZP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(n),!0).forEach(function(r){gb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e2(e,t){if(e==null)return{};var n,r,i=oY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function oY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function gb(e,t,n){return(t=lY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lY(e){var t=cY(e,"string");return typeof t=="symbol"?t:t+""}function cY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ws extends E.Component{constructor(t){super(t),this.tickRefs=E.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=e2(t,iY),s=this.props,{viewBox:l}=s,u=e2(s,sY);return!t0(r,l)||!t0(i,u)||!t0(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:p,tickMargin:f}=this.props,h,g,y,x,S,C,A=p?-1:1,w=t.tickSize||u,P=ke(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":h=g=t.coordinate,x=r+ +!p*s,y=x-A*w,C=y-A*f,S=P;break;case"left":y=x=t.coordinate,g=n+ +!p*i,h=g-A*w,S=h-A*f,C=P;break;case"right":y=x=t.coordinate,g=n+ +p*i,h=g+A*w,S=h+A*f,C=P;break;default:h=g=t.coordinate,x=r+ +p*s,y=x+A*w,C=y+A*f,S=P;break}return{line:{x1:h,y1:y,x2:g,y2:x},tick:{x:S,y:C}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,p=sn(sn(sn({},Zt(this.props,!1)),Zt(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var f=+(s==="top"&&!l||s==="bottom"&&l);p=sn(sn({},p),{},{x1:t,y1:n+f*i,x2:t+r,y2:n+f*i})}else{var h=+(s==="left"&&!l||s==="right"&&l);p=sn(sn({},p),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return E.createElement("line",bl({},p,{className:dt("recharts-cartesian-axis-line",yo(u,"className"))}))}static renderTickItem(t,n,r){var i,s=dt(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(t))i=E.cloneElement(t,sn(sn({},n),{},{className:s}));else if(typeof t=="function")i=t(sn(sn({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=dt(l,t.className)),i=E.createElement(hh,bl({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:p,padding:f,tickTextProps:h}=this.props,g=mb(sn(sn({},this.props),{},{ticks:r}),t,n),y=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),S=wo(this.props),C=Zt(l,!1),A=sn(sn({},S),{},{fill:"none"},Zt(i,!1)),w=g.map((P,T)=>{var{line:N,tick:_}=this.getTickLineCoord(P),j=sn(sn(sn(sn({textAnchor:y,verticalAnchor:x},S),{},{stroke:"none",fill:s},C),_),{},{index:T,payload:P,visibleTicksCount:g.length,tickFormatter:u,padding:f},h);return E.createElement(mr,bl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},_u(this.props,P,T)),i&&E.createElement("line",bl({},A,N,{className:dt("recharts-cartesian-axis-tick-line",yo(i,"className"))})),l&&ws.renderTickItem(l,j,"".concat(typeof u=="function"?u(P.value,T):P.value).concat(p||"")))});return w.length>0?E.createElement("g",{className:"recharts-cartesian-axis-ticks"},w):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:E.createElement(mr,{className:dt("recharts-cartesian-axis",i),ref:u=>{if(u){var p=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(p);var f=p[0];if(f){var h=window.getComputedStyle(f).fontSize,g=window.getComputedStyle(f).letterSpacing;(h!==this.state.fontSize||g!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),E.createElement(PH,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},E.createElement(RH,{label:this.props.label}),this.props.children))}}gb(ws,"displayName","CartesianAxis");gb(ws,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var uY=["x1","y1","x2","y2","key"],dY=["offset"],fY=["xAxisId","yAxisId"],pY=["xAxisId","yAxisId"];function t2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(n),!0).forEach(function(r){hY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hY(e,t,n){return(t=mY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mY(e){var t=gY(e,"string");return typeof t=="symbol"?t:t+""}function gY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function co(){return co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},co.apply(null,arguments)}function jp(e,t){if(e==null)return{};var n,r,i=yY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var vY=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return E.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Wj(e,t){var n;if(E.isValidElement(e))n=E.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,p=jp(t,uY),f=wo(p),{offset:h}=f,g=jp(f,dY);n=E.createElement("line",co({},g,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function xY(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=jp(e,fY),p=i.map((f,h)=>{var g=Bn(Bn({},u),{},{x1:t,y1:f,x2:t+n,y2:f,key:"line-".concat(h),index:h});return Wj(r,g)});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function bY(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=jp(e,pY),p=i.map((f,h)=>{var g=Bn(Bn({},u),{},{x1:f,y1:t,x2:f,y2:t+n,key:"line-".concat(h),index:h});return Wj(r,g)});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function SY(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:p=!0}=e;if(!p||!t||!t.length)return null;var f=u.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==f[0]&&f.unshift(0);var h=f.map((g,y)=>{var x=!f[y+1],S=x?i+l-g:f[y+1]-g;if(S<=0)return null;var C=y%t.length;return E.createElement("rect",{key:"react-".concat(y),y:g,x:r,height:S,width:s,stroke:"none",fill:t[C],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function CY(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:p}=e;if(!t||!n||!n.length)return null;var f=p.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==f[0]&&f.unshift(0);var h=f.map((g,y)=>{var x=!f[y+1],S=x?i+l-g:f[y+1]-g;if(S<=0)return null;var C=y%n.length;return E.createElement("rect",{key:"react-".concat(y),x:g,y:s,width:S,height:u,stroke:"none",fill:n[C],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var AY=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return FD(mb(Bn(Bn(Bn({},ws.defaultProps),n),{},{ticks:VD(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},EY=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return FD(mb(Bn(Bn(Bn({},ws.defaultProps),n),{},{ticks:VD(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},wY={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function fi(e){var t=Vv(),n=Kv(),r=QD(),i=Bn(Bn({},na(e,wY)),{},{x:ke(e.x)?e.x:r.left,y:ke(e.y)?e.y:r.top,width:ke(e.width)?e.width:r.width,height:ke(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:p,width:f,height:h,syncWithTicks:g,horizontalValues:y,verticalValues:x}=i,S=ta(),C=Ne(F=>Zw(F,"xAxis",s,S)),A=Ne(F=>Zw(F,"yAxis",l,S));if(!ke(f)||f<=0||!ke(h)||h<=0||!ke(u)||u!==+u||!ke(p)||p!==+p)return null;var w=i.verticalCoordinatesGenerator||AY,P=i.horizontalCoordinatesGenerator||EY,{horizontalPoints:T,verticalPoints:N}=i;if((!T||!T.length)&&typeof P=="function"){var _=y&&y.length,j=P({yAxis:A?Bn(Bn({},A),{},{ticks:_?y:A.ticks}):void 0,width:t,height:n,offset:r},_?!0:g);gu(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(T=j)}if((!N||!N.length)&&typeof w=="function"){var k=x&&x.length,z=w({xAxis:C?Bn(Bn({},C),{},{ticks:k?x:C.ticks}):void 0,width:t,height:n,offset:r},k?!0:g);gu(Array.isArray(z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(N=z)}return E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement(vY,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement(SY,co({},i,{horizontalPoints:T})),E.createElement(CY,co({},i,{verticalPoints:N})),E.createElement(xY,co({},i,{offset:r,horizontalPoints:T,xAxis:C,yAxis:A})),E.createElement(bY,co({},i,{offset:r,verticalPoints:N,xAxis:C,yAxis:A})))}fi.displayName="CartesianGrid";var PY=["children"],TY=["dangerouslySetInnerHTML","ticks"],DY=["id"];function Xj(e,t,n){return(t=NY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NY(e){var t=OY(e,"string");return typeof t=="symbol"?t:t+""}function OY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},av.apply(null,arguments)}function iv(e,t){if(e==null)return{};var n,r,i=jY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function jY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function _Y(e){var t=$t(),n=E.useMemo(()=>{var{children:r}=e,i=iv(e,PY);return i},[e]);return E.useEffect(()=>(t(xG(n)),()=>{t(bG(n))}),[n,t]),e.children}var kY=e=>{var{xAxisId:t,className:n}=e,r=Ne(Yv),i=ta(),s="xAxis",l=Ne(A=>ql(A,s,t,i)),u=Ne(A=>GO(A,s,t,i)),p=Ne(A=>BO(A,t)),f=Ne(A=>Zz(A,t)),h=Ne(A=>gO(A,t));if(p==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:g,ticks:y}=e,x=iv(e,TY),{id:S}=h,C=iv(h,DY);return E.createElement(ws,av({},x,C,{scale:l,x:f.x,y:f.y,width:p.width,height:p.height,className:dt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},MY=e=>{var t,n,r,i,s;return E.createElement(_Y,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},E.createElement(kY,e))};class Ra extends E.Component{render(){return E.createElement(MY,this.props)}}Xj(Ra,"displayName","XAxis");Xj(Ra,"defaultProps",{allowDataOverflow:Er.allowDataOverflow,allowDecimals:Er.allowDecimals,allowDuplicatedCategory:Er.allowDuplicatedCategory,height:Er.height,hide:!1,mirror:Er.mirror,orientation:Er.orientation,padding:Er.padding,reversed:Er.reversed,scale:Er.scale,tickCount:Er.tickCount,type:Er.type,xAxisId:0});var IY=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(h=>{if(h){var g=h.getBoundingClientRect();g.width>l&&(l=g.width)}});var u=n?n.getBoundingClientRect().width:0,p=i+s,f=l+p+u+(n?r:0);return Math.round(f)}return 0},RY=["dangerouslySetInnerHTML","ticks"],LY=["id"];function Qj(e,t,n){return(t=$Y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $Y(e){var t=BY(e,"string");return typeof t=="symbol"?t:t+""}function BY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sv.apply(null,arguments)}function n2(e,t){if(e==null)return{};var n,r,i=zY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function UY(e){var t=$t();return E.useEffect(()=>(t(SG(e)),()=>{t(CG(e))}),[e,t]),null}var HY=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=E.useRef(null),u=E.useRef(null),p=Ne(Yv),f=ta(),h=$t(),g="yAxis",y=Ne(j=>ql(j,g,n,f)),x=Ne(j=>zO(j,n)),S=Ne(j=>eU(j,n)),C=Ne(j=>GO(j,g,n,f)),A=Ne(j=>yO(j,n));if(E.useLayoutEffect(()=>{var j;if(!(i!=="auto"||!x||ab(s)||E.isValidElement(s)||A==null)){var k=l.current,z=k==null||(j=k.tickRefs)===null||j===void 0?void 0:j.current,{tickSize:F,tickMargin:M}=k.props,R=IY({ticks:z,label:u.current,labelGapWithTick:5,tickSize:F,tickMargin:M});Math.round(x.width)!==Math.round(R)&&h(AG({id:n,width:R}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x?.width,x,h,s,n,i]),x==null||S==null||A==null)return null;var{dangerouslySetInnerHTML:w,ticks:P}=e,T=n2(e,RY),{id:N}=A,_=n2(A,LY);return E.createElement(ws,sv({},T,_,{ref:l,labelRef:u,scale:y,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:x.width,height:x.height,className:dt("recharts-".concat(g," ").concat(g),r),viewBox:p,ticks:C}))},GY=e=>{var t,n,r,i,s;return E.createElement(E.Fragment,null,E.createElement(UY,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),E.createElement(HY,e))},qY={allowDataOverflow:wr.allowDataOverflow,allowDecimals:wr.allowDecimals,allowDuplicatedCategory:wr.allowDuplicatedCategory,hide:!1,mirror:wr.mirror,orientation:wr.orientation,padding:wr.padding,reversed:wr.reversed,scale:wr.scale,tickCount:wr.tickCount,type:wr.type,width:wr.width,yAxisId:0};class La extends E.Component{render(){return E.createElement(GY,this.props)}}Qj(La,"displayName","YAxis");Qj(La,"defaultProps",qY);var n0={exports:{}},r0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r2;function YY(){if(r2)return r0;r2=1;var e=Il();function t(p,f){return p===f&&(p!==0||1/p===1/f)||p!==p&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return r0.useSyncExternalStoreWithSelector=function(p,f,h,g,y){var x=i(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function A(_){if(!w){if(w=!0,P=_,_=g(_),y!==void 0&&S.hasValue){var j=S.value;if(y(j,_))return T=j}return T=_}if(j=T,n(P,_))return j;var k=g(_);return y!==void 0&&y(j,k)?(P=_,j):(P=_,T=k)}var w=!1,P,T,N=h===void 0?null:h;return[function(){return A(f())},N===null?void 0:function(){return A(N())}]},[f,h,g,y]);var C=r(p,x[0],x[1]);return s(function(){S.hasValue=!0,S.value=C},[C]),u(C),C},r0}var a2;function FY(){return a2||(a2=1,n0.exports=YY()),n0.exports}FY();function VY(e){e()}function KY(){let e=null,t=null;return{clear(){e=null,t=null},notify(){VY(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var i2={notify(){},get:()=>[]};function WY(e,t){let n,r=i2,i=0,s=!1;function l(C){h();const A=r.subscribe(C);let w=!1;return()=>{w||(w=!0,A(),g())}}function u(){r.notify()}function p(){S.onStateChange&&S.onStateChange()}function f(){return s}function h(){i++,n||(n=e.subscribe(p),r=KY())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=i2)}function y(){s||(s=!0,h())}function x(){s&&(s=!1,g())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:p,isSubscribed:f,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>r};return S}var XY=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QY=XY(),JY=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ZY=JY(),eF=()=>QY||ZY?E.useLayoutEffect:E.useEffect,tF=eF(),nF=Symbol.for("react-redux-context"),rF=typeof globalThis<"u"?globalThis:{};function aF(){if(!E.createContext)return{};const e=rF[nF]??=new Map;let t=e.get(E.createContext);return t||(t=E.createContext(null),e.set(E.createContext,t)),t}var iF=aF();function sF(e){const{children:t,context:n,serverState:r,store:i}=e,s=E.useMemo(()=>{const p=WY(i);return{store:i,subscription:p,getServerState:r?()=>r:void 0}},[i,r]),l=E.useMemo(()=>i.getState(),[i]);tF(()=>{const{subscription:p}=s;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),l!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[s,l]);const u=n||iF;return E.createElement(u.Provider,{value:s},t)}var oF=sF,lF=(e,t)=>t,yb=se([lF,st,pO,dn,aj,Ni,a9,cn],c9),vb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},Jj=Zr("mouseClick"),Zj=Mu();Zj.startListening({actionCreator:Jj,effect:(e,t)=>{var n=e.payload,r=yb(t.getState(),vb(n));r?.activeIndex!=null&&t.dispatch(pU({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var ov=Zr("mouseMove"),e_=Mu();e_.startListening({actionCreator:ov,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Wx(r,r.tooltip.settings.shared),s=yb(r,vb(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(QO({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(XO()))}});function cF(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var s2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},t_=Mr({name:"rootProps",initialState:s2,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:s2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),uF=t_.reducer,{updateOptions:dF}=t_.actions,n_=Mr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:fF}=n_.actions,pF=n_.reducer,r_=Zr("keyDown"),a_=Zr("focus"),xb=Mu();xb.startListening({actionCreator:r_,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(Xx(i,Fl(n))),u=Ni(n);if(s==="Enter"){var p=wp(n,"axis","hover",String(i.index));t.dispatch(Z0({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:p}));return}var f=aU(n),h=f==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,y=l+g*h;if(!(u==null||y>=u.length||y<0)){var x=wp(n,"axis","hover",String(y));t.dispatch(Z0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});xb.startListening({actionCreator:a_,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=wp(n,"axis","hover",String(s));t.dispatch(Z0({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Xr=Zr("externalEvent"),i_=Mu();i_.startListening({actionCreator:Xr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:WU(n),activeDataKey:lj(n),activeIndex:So(n),activeLabel:oj(n),activeTooltipIndex:So(n),isTooltipActive:XU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var hF=se([Yl],e=>e.tooltipItemPayloads),mF=se([hF,Yu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),s_=Zr("touchMove"),o_=Mu();o_.startListening({actionCreator:s_,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Wx(r,r.tooltip.settings.shared);if(i==="axis"){var s=yb(r,vb({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(QO({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],p=document.elementFromPoint(u.clientX,u.clientY);if(!p||!p.getAttribute)return;var f=p.getAttribute(WD),h=(l=p.getAttribute(XD))!==null&&l!==void 0?l:void 0,g=mF(t.getState(),f,h);t.dispatch(WO({activeDataKey:h,activeIndex:f,activeCoordinate:g}))}}});var gF=SD({brush:zq,cartesianAxis:EG,chartData:w9,errorBars:$G,graphicalItems:H7,layout:o4,legend:Q4,options:b9,polarAxis:a7,polarOptions:pF,referenceElements:Vq,rootProps:uF,tooltip:hU}),yF=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return _L({reducer:gF,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([Zj.middleware,e_.middleware,xb.middleware,i_.middleware,o_.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:cF},name:"recharts-".concat(n)}})};function l_(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=ta(),s=E.useRef(null);if(i)return n;s.current==null&&(s.current=yF(t,r));var l=$v;return E.createElement(oF,{context:l,store:s.current},n)}function c_(e){var{layout:t,width:n,height:r,margin:i}=e,s=$t(),l=ta();return E.useEffect(()=>{l||(s(a4(t)),s(i4({width:n,height:r})),s(r4(i)))},[s,l,t,n,r,i]),null}function u_(e){var t=$t();return E.useEffect(()=>{t(dF(e))},[t,e]),null}var vF=["children"];function xF(e,t){if(e==null)return{};var n,r,i=bF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function bF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function _p(){return _p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_p.apply(null,arguments)}var SF={width:"100%",height:"100%"},CF=E.forwardRef((e,t)=>{var n=Vv(),r=Kv(),i=tN();if(!Dl(n)||!Dl(r))return null;var{children:s,otherAttributes:l,title:u,desc:p}=e,f,h;return typeof l.tabIndex=="number"?f=l.tabIndex:f=i?0:void 0,typeof l.role=="string"?h=l.role:h=i?"application":void 0,E.createElement(Nv,_p({},l,{title:u,desc:p,role:h,tabIndex:f,width:n,height:r,style:SF,ref:t}),s)}),AF=e=>{var{children:t}=e,n=Ne(Wp);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return E.createElement(Nv,{width:r,height:i,x:l,y:s},t)},o2=E.forwardRef((e,t)=>{var{children:n}=e,r=xF(e,vF),i=ta();return i?E.createElement(AF,null,n):E.createElement(CF,_p({ref:t},r),n)});function EF(){var e=$t(),[t,n]=E.useState(null),r=Ne(R4);return E.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;kr(s)&&s!==r&&e(s4(s))}},[t,e,r]),n}function l2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l2(Object(n),!0).forEach(function(r){PF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PF(e,t,n){return(t=TF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TF(e){var t=DF(e,"string");return typeof t=="symbol"?t:t+""}function DF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NF=E.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:p,onMouseEnter:f,onMouseLeave:h,onMouseMove:g,onMouseUp:y,onTouchEnd:x,onTouchMove:S,onTouchStart:C,style:A,width:w}=e,P=$t(),[T,N]=E.useState(null),[_,j]=E.useState(null);M9();var k=EF(),z=E.useCallback(V=>{k(V),typeof t=="function"&&t(V),N(V),j(V)},[k,t,N,j]),F=E.useCallback(V=>{P(Jj(V)),P(Xr({handler:s,reactEvent:V}))},[P,s]),M=E.useCallback(V=>{P(ov(V)),P(Xr({handler:f,reactEvent:V}))},[P,f]),R=E.useCallback(V=>{P(XO()),P(Xr({handler:h,reactEvent:V}))},[P,h]),U=E.useCallback(V=>{P(ov(V)),P(Xr({handler:g,reactEvent:V}))},[P,g]),W=E.useCallback(()=>{P(a_())},[P]),Z=E.useCallback(V=>{P(r_(V.key))},[P]),Q=E.useCallback(V=>{P(Xr({handler:l,reactEvent:V}))},[P,l]),I=E.useCallback(V=>{P(Xr({handler:u,reactEvent:V}))},[P,u]),G=E.useCallback(V=>{P(Xr({handler:p,reactEvent:V}))},[P,p]),ie=E.useCallback(V=>{P(Xr({handler:y,reactEvent:V}))},[P,y]),le=E.useCallback(V=>{P(Xr({handler:C,reactEvent:V}))},[P,C]),$=E.useCallback(V=>{P(s_(V)),P(Xr({handler:S,reactEvent:V}))},[P,S]),q=E.useCallback(V=>{P(Xr({handler:x,reactEvent:V}))},[P,x]);return E.createElement(hj.Provider,{value:T},E.createElement(HT.Provider,{value:_},E.createElement("div",{className:dt("recharts-wrapper",r),style:wF({position:"relative",cursor:"default",width:w,height:i},A),onClick:F,onContextMenu:Q,onDoubleClick:I,onFocus:W,onKeyDown:Z,onMouseDown:G,onMouseEnter:M,onMouseLeave:R,onMouseMove:U,onMouseUp:ie,onTouchEnd:q,onTouchMove:$,onTouchStart:le,ref:z},n)))}),OF=["children","className","width","height","style","compact","title","desc"];function jF(e,t){if(e==null)return{};var n,r,i=_F(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _F(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var d_=E.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:p,desc:f}=e,h=jF(e,OF),g=wo(h);return u?E.createElement(o2,{otherAttributes:g,title:p,desc:f},n):E.createElement(NF,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},E.createElement(o2,{otherAttributes:g,title:p,desc:f,ref:t},E.createElement(Wq,null,n)))}),kF=["width","height"];function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lv.apply(null,arguments)}function MF(e,t){if(e==null)return{};var n,r,i=IF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function IF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var RF={top:5,right:5,bottom:5,left:5},LF={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:RF,reverseStackOrder:!1,syncMethod:"index"},$F=E.forwardRef(function(t,n){var r,i=na(t.categoricalChartProps,LF),{width:s,height:l}=i,u=MF(i,kF);if(!Dl(s)||!Dl(l))return null;var{chartName:p,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,categoricalChartProps:y}=t,x={chartName:p,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,eventEmitter:void 0};return E.createElement(l_,{preloadedState:{options:x},reduxStoreName:(r=y.id)!==null&&r!==void 0?r:p},E.createElement(Yj,{chartData:y.data}),E.createElement(c_,{width:s,height:l,layout:i.layout,margin:i.margin}),E.createElement(u_,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(d_,lv({},u,{width:s,height:l,ref:n})))}),BF=["axis","item"],cs=E.forwardRef((e,t)=>E.createElement($F,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:BF,tooltipPayloadSearcher:mj,categoricalChartProps:e,ref:t}));function zF(e){var t=$t();return E.useEffect(()=>{t(fF(e))},[t,e]),null}var UF=["width","height","layout"];function cv(){return cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cv.apply(null,arguments)}function HF(e,t){if(e==null)return{};var n,r,i=GF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function GF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var qF={top:5,right:5,bottom:5,left:5},YF={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:qF,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},FF=E.forwardRef(function(t,n){var r,i=na(t.categoricalChartProps,YF),{width:s,height:l,layout:u}=i,p=HF(i,UF);if(!Dl(s)||!Dl(l))return null;var{chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:g,tooltipPayloadSearcher:y}=t,x={chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:g,tooltipPayloadSearcher:y,eventEmitter:void 0};return E.createElement(l_,{preloadedState:{options:x},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:f},E.createElement(Yj,{chartData:i.data}),E.createElement(c_,{width:s,height:l,layout:u,margin:i.margin}),E.createElement(u_,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(zF,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),E.createElement(d_,cv({width:s,height:l},p,{ref:n})))}),VF=["item"],KF={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},a0=E.forwardRef((e,t)=>{var n=na(e,KF);return E.createElement(FF,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:VF,tooltipPayloadSearcher:mj,categoricalChartProps:n,ref:t})});const WF=({card:e,onClose:t})=>e?d.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:d.jsx("div",{onClick:n=>n.stopPropagation(),children:d.jsx(Ga,{card:e,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1,scale:1.5})})}):null,XF=({drone:e,onClose:t})=>e?d.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:d.jsx("div",{onClick:n=>n.stopPropagation(),children:d.jsx(bi,{drone:e,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,ignoreDeployLimit:!0,appliedUpgrades:[],scale:1.5,isViewOnly:!0})})}):null,QF=({component:e,onClose:t})=>{if(!e)return null;const n=(r,i)=>{const s=r.stats.healthy,l=r.middleLaneBonus||{},u={};return Object.keys(s).forEach(p=>{u[p]=s[p]+(i&&l[p]||0)}),u};return d.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-cyan-500 p-8 shadow-2xl shadow-cyan-500/20 max-w-6xl w-[95vw]",onClick:r=>r.stopPropagation(),children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-orbitron font-bold text-cyan-400 mb-2",children:e.name}),d.jsx("p",{className:"text-gray-400 text-sm",children:e.description})]}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:d.jsx(ln,{size:32})})]}),d.jsx("div",{className:"mb-4 text-center",children:d.jsx("p",{className:"text-yellow-400 font-semibold text-sm",children:"Compare standard lane stats with middle lane bonus stats. The middle lane provides enhanced performance!"})}),d.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-center font-orbitron text-lg text-gray-300 mb-3",children:"LEFT / RIGHT LANE"}),d.jsx("div",{className:"h-[250px]",children:d.jsx(go,{section:e.key,stats:e,effectiveStatsForDisplay:n(e,!1),isPlayer:!0,isInMiddleLane:!1,gameEngine:Ie,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-xl animate-pulse"}),d.jsxs("div",{className:"relative",children:[d.jsx("h3",{className:"text-center font-orbitron text-lg text-yellow-400 mb-3 font-bold",children:"MIDDLE LANE (BONUS)"}),d.jsx("div",{className:"h-[250px]",children:d.jsx(go,{section:e.key,stats:e,effectiveStatsForDisplay:n(e,!0),isPlayer:!0,isInMiddleLane:!0,gameEngine:Ie,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})})]})]})]}),e.ability&&d.jsxs("div",{className:"mt-6 p-4 bg-purple-900/30 rounded-lg border border-purple-500/50",children:[d.jsxs("h4",{className:"font-orbitron text-purple-400 font-bold mb-2",children:["Ship Ability: ",e.ability.name]}),d.jsx("p",{className:"text-gray-300 text-sm mb-2",children:e.ability.description}),d.jsxs("p",{className:"text-gray-400 text-xs",children:["Cost: ",e.ability.cost.energy," Energy"]})]})]})})},f_=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onDronesChange:i,selectedShipComponents:s,onShipComponentsChange:l,onConfirmDeck:u,onImportDeck:p,onBack:f})=>{const[h,g]=E.useState(null),[y,x]=E.useState(null),[S,C]=E.useState(null),[A,w]=E.useState(!1),[P,T]=E.useState(!1),[N,_]=E.useState(!1),[j,k]=E.useState("cards"),[z,F]=E.useState("deck"),[M,R]=E.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[U,W]=E.useState(!1),Z=E.useRef(null),[Q,I]=E.useState({key:"name",direction:"ascending"}),[G,ie]=E.useState({abilities:[]}),[le,$]=E.useState({key:"name",direction:"ascending"}),[q,V]=E.useState("cost"),[ne,ye]=E.useState(!0),[Se,Ce]=E.useState("table"),[Me,qe]=E.useState("table"),be=E.useMemo(()=>{const L=oe=>oe?oe.replace(/_/g," ").toLowerCase().split(" ").map(ce=>ce.charAt(0).toUpperCase()+ce.slice(1)).join(" "):"";return t.map(oe=>{const de=[],ce=oe.effect;if(ce.type==="REPEATING_EFFECT")de.push(L(ce.type)),ce.effects&&Array.isArray(ce.effects)&&ce.effects.forEach(xe=>{xe.type&&de.push(L(xe.type))});else if(ce.type==="MODIFY_DRONE_BASE"&&ce.mod){const xe=ce.mod.stat,je=ce.mod.value;xe==="attack"?de.push(je>0?"Attack Buff":"Attack Debuff"):xe==="speed"?de.push(je>0?"Speed Buff":"Speed Debuff"):xe==="shields"?de.push(je>0?"Shield Buff":"Shield Debuff"):xe==="cost"?de.push(je<0?"Cost Reduction":"Cost Increase"):xe==="limit"?de.push(je>0?"Limit Buff":"Limit Debuff"):xe==="ability"?(de.push("Ability Grant"),ce.mod.abilityToAdd&&ce.mod.abilityToAdd.name&&de.push(ce.mod.abilityToAdd.name)):de.push(L(`${xe} Modification`))}else if(ce.type==="MODIFY_STAT"&&ce.mod){const xe=ce.mod.stat,je=ce.mod.value;ce.mod.type,xe==="attack"?de.push(je>0?"Attack Buff":"Attack Debuff"):xe==="speed"?de.push(je>0?"Speed Buff":"Speed Debuff"):xe==="shields"?de.push(je>0?"Shield Buff":"Shield Debuff"):de.push(je>0?`${xe} Buff`:`${xe} Debuff`)}else ce.type==="SEARCH_AND_DRAW"?(de.push(L(ce.type)),de.push("Draw")):ce.type&&de.push(L(ce.type));ce.goAgain&&de.push("Go Again"),ce.damageType==="PIERCING"&&de.push("Piercing"),ce.mod?.type&&de.push(L(ce.mod.type));const he=(()=>{if(oe.targeting){const xe=L(oe.targeting.type);if(oe.targeting.affinity){const je=oe.targeting.affinity.charAt(0)+oe.targeting.affinity.slice(1).toLowerCase();return`${xe} (${je})`}return xe}else if(ce.type==="MULTI_MOVE"&&ce.source){const xe=ce.source.location||"Any",je=ce.source.affinity||"Any",nn=je.charAt(0).toUpperCase()+je.slice(1).toLowerCase();return`${L(xe)} (${nn})`}else if(ce.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...oe,keywords:de,targetingText:he}})},[t]),we=E.useMemo(()=>Ze.filter(L=>L.selectable!==!1).map(L=>{const oe=[];L.abilities&&L.abilities.length>0&&L.abilities.forEach(ce=>{ce.name&&oe.push(ce.name),ce.type&&oe.push(ce.type==="ACTIVE"?"Active":ce.type==="PASSIVE"?"Passive":"Triggered"),ce.effect?.keyword&&oe.push(ce.effect.keyword)});const de=L.abilities&&L.abilities.length>0?L.abilities.map(ce=>ce.description).join(" | "):"No abilities";return{...L,keywords:oe,description:de}}),[]),Oe=E.useMemo(()=>{const L=new Set,oe=new Set,de=new Set;be.forEach(he=>{L.add(he.cost),oe.add(he.targetingText),he.keywords.forEach(xe=>de.add(xe))});const ce=Array.from(L);return{minCost:Math.min(...ce),maxCost:Math.max(...ce),targets:["all",...Array.from(oe).sort()],abilities:Array.from(de).sort()}},[be]),ge=E.useMemo(()=>{const L=new Set;return we.forEach(oe=>{oe.keywords.forEach(de=>L.add(de))}),{abilities:Array.from(L).sort()}},[we]);E.useEffect(()=>{Oe.minCost!==1/0&&Oe.maxCost!==-1/0&&R(L=>({...L,cost:{min:Oe.minCost,max:Oe.maxCost}}))},[Oe.minCost,Oe.maxCost]);const{cardCount:xt,deckListForDisplay:He,baseCardCounts:Bt}=E.useMemo(()=>{const L={};let oe=0;Object.entries(n).forEach(([ce,he])=>{if(he>0){oe+=he;const xe=be.find(je=>je.id===ce);if(xe){const je=xe.baseCardId;L[je]=(L[je]||0)+he}}});const de=Object.entries(n).filter(([,ce])=>ce>0).map(([ce,he])=>({...be.find(je=>je.id===ce),quantity:he})).sort((ce,he)=>ce.name.localeCompare(he.name));return{cardCount:oe,deckListForDisplay:de,baseCardCounts:L}},[n,be]),Gt=xt>=40,{droneCount:wt,droneListForDisplay:er}=E.useMemo(()=>{let L=0;const oe=[];return Object.entries(e||{}).forEach(([de,ce])=>{if(ce>0){L+=ce;const he=we.find(xe=>xe.name===de);he&&oe.push({...he,quantity:ce})}}),oe.sort((de,ce)=>de.name.localeCompare(ce.name)),{droneCount:L,droneListForDisplay:oe}},[e,we]),Oo=wt===10,{shipComponentCount:Oi,shipComponentsValid:Hn}=E.useMemo(()=>{const L=s||{},oe=Object.keys(L).filter(Ge=>L[Ge]).length,de=Object.keys(L).some(Ge=>{const Fe=ur.find(Tt=>Tt.id===Ge);return Fe&&Fe.type==="Bridge"&&L[Ge]}),ce=Object.keys(L).some(Ge=>{const Fe=ur.find(Tt=>Tt.id===Ge);return Fe&&Fe.type==="Power Cell"&&L[Ge]}),he=Object.keys(L).some(Ge=>{const Fe=ur.find(Tt=>Tt.id===Ge);return Fe&&Fe.type==="Drone Control Hub"&&L[Ge]}),xe=Object.values(L).filter(Ge=>Ge),je=new Set(xe),nn=xe.length===3,Pt=je.size===3;return{shipComponentCount:oe,shipComponentsValid:de&&ce&&he&&nn&&Pt}},[s]),Gn=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],Ea=E.useMemo(()=>{const L={};He.forEach(he=>{const xe=he.cost||0;L[xe]=(L[xe]||0)+he.quantity});const oe=Object.entries(L).map(([he,xe])=>({name:`${he}`,count:xe})).sort((he,xe)=>parseInt(he.name)-parseInt(xe.name)),de={};He.forEach(he=>{he.keywords&&he.keywords.forEach(xe=>{de[xe]=(de[xe]||0)+he.quantity})});const ce=Object.entries(de).map(([he,xe])=>({name:he,value:xe})).sort((he,xe)=>xe.value-he.value);return{barChartData:oe,pieChartData:ce}},[He]),qn=E.useMemo(()=>{const L=Ge=>{const Fe={};return er.forEach(Tt=>{const pn=Tt[Ge]||0;Fe[pn]=(Fe[pn]||0)+Tt.quantity}),Object.entries(Fe).map(([Tt,pn])=>({name:`${Tt}`,count:pn})).sort((Tt,pn)=>parseInt(Tt.name)-parseInt(pn.name))},oe=L("class"),de=L("attack"),ce=L("speed"),he=L("shields"),xe=L("hull"),je=L("limit"),nn=L("upgradeSlots"),Pt={};er.forEach(Ge=>{Ge.keywords&&Ge.keywords.forEach(Fe=>{Pt[Fe]=(Pt[Fe]||0)+Ge.quantity})});const Ct=Object.entries(Pt).map(([Ge,Fe])=>({name:Ge,value:Fe})).sort((Ge,Fe)=>Fe.value-Ge.value);return{costData:oe,attackData:de,speedData:ce,shieldsData:he,hullData:xe,limitData:je,upgradesData:nn,abilityData:Ct}},[er]),jo=E.useMemo(()=>{const L=[];Object.entries(e||{}).forEach(([de,ce])=>{if(ce>0){const he=we.find(xe=>xe.name===de);he&&L.push(he)}});const oe=[];return Object.entries(n).forEach(([de,ce])=>{if(ce>0){const he=be.find(xe=>xe.id===de);he&&oe.push({card:he,quantity:ce})}}),{drones:L,cards:oe}},[e,n,we,be]),aa=E.useMemo(()=>{let L=[...be].filter(oe=>oe.cost<M.cost.min||oe.cost>M.cost.max||M.target!=="all"&&oe.targetingText!==M.target||M.type!=="all"&&oe.type!==M.type?!1:M.abilities.length>0?M.abilities.every(de=>oe.keywords.includes(de)):!(M.hideEnhanced&&oe.id.endsWith("_ENHANCED")));return Q.key!==null&&L.sort((oe,de)=>{const ce=oe[Q.key],he=de[Q.key];if(ce==null&&he==null)return 0;if(ce==null)return 1;if(he==null)return-1;const xe=String(ce).toLowerCase(),je=String(he).toLowerCase();return xe<je?Q.direction==="ascending"?-1:1:xe>je?Q.direction==="ascending"?1:-1:oe.id.localeCompare(de.id)}),L},[be,M,Q]),fn=E.useMemo(()=>{let L=[...we].filter(oe=>G.abilities.length>0?G.abilities.every(de=>oe.keywords.includes(de)):!0);return le.key!==null&&L.sort((oe,de)=>{const ce=oe[le.key],he=de[le.key];if(ce==null&&he==null)return 0;if(ce==null)return 1;if(he==null)return-1;const xe=String(ce).toLowerCase(),je=String(he).toLowerCase();return xe<je?le.direction==="ascending"?-1:1:xe>je?le.direction==="ascending"?1:-1:oe.name.localeCompare(de.name)}),L},[we,G,le]),On=L=>{let oe="ascending";Q.key===L&&Q.direction==="ascending"&&(oe="descending"),I({key:L,direction:oe})},jt=L=>{let oe="ascending";le.key===L&&le.direction==="ascending"&&(oe="descending"),$({key:L,direction:oe})},qa=(L,oe)=>{R(de=>({...de,[L]:oe}))},Ke=L=>{R(oe=>{const de=oe.abilities.includes(L)?oe.abilities.filter(ce=>ce!==L):[...oe.abilities,L];return{...oe,abilities:de}})},jn=L=>{ie(oe=>{const de=oe.abilities.includes(L)?oe.abilities.filter(ce=>ce!==L):[...oe.abilities,L];return{...oe,abilities:de}})},ji=()=>{R({cost:{min:Oe.minCost,max:Oe.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),W(!1)},Ya=()=>{ie({abilities:[]})},ia=()=>{Object.keys(n).forEach(L=>{n[L]>0&&r(L,0)})},_i=()=>{Object.keys(e||{}).forEach(L=>{e[L]>0&&i(L,0)})};E.useEffect(()=>{const L=oe=>{Z.current&&!Z.current.contains(oe.target)&&W(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const gr=Math.PI/180,Fa=({cx:L,cy:oe,midAngle:de,outerRadius:ce,fill:he,name:xe,value:je})=>{const nn=Math.sin(-gr*de),Pt=Math.cos(-gr*de),Ct=L+(ce+5)*Pt,Ge=oe+(ce+5)*nn,Fe=L+(ce+15)*Pt,Tt=oe+(ce+15)*nn,pn=Fe+(Pt>=0?1:-1)*12,Ds=Tt,Ku=Pt>=0?"start":"end";return d.jsxs("g",{children:[d.jsx("path",{d:`M${Ct},${Ge}L${Fe},${Tt}L${pn},${Ds}`,stroke:he,fill:"none"}),d.jsx("circle",{cx:pn,cy:Ds,r:2,fill:he,stroke:"none"}),d.jsx("text",{x:pn+(Pt>=0?1:-1)*8,y:Ds,dy:4,textAnchor:Ku,fill:"#9CA3AF",fontSize:"11px",children:`${xe} (${je})`})]})},_o=()=>{const[L,oe]=E.useState(""),de=E.useRef(null),ce=E.useMemo(()=>{const xe=Object.entries(n).map(([Pt,Ct])=>`${Pt}:${Ct}`).join(","),je=Object.entries(e||{}).map(([Pt,Ct])=>`${Pt}:${Ct}`).join(","),nn=Object.entries(s||{}).filter(([Pt,Ct])=>Ct).map(([Pt,Ct])=>`${Pt}:${Ct}`).join(",");return`cards:${xe}|drones:${je}|ship:${nn}`},[n,e,s]),he=()=>{de.current.select(),document.execCommand("copy"),oe("Copied!"),setTimeout(()=>oe(""),2e3)};return d.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>w(!1),children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:xe=>xe.stopPropagation(),children:[d.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"}),d.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck and drones."}),d.jsx("textarea",{ref:de,readOnly:!0,value:ce,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),d.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[d.jsx("span",{className:"text-green-400 self-center",children:L}),d.jsxs("button",{onClick:he,className:"btn-confirm flex items-center gap-2",children:[d.jsx(fv,{size:16})," Copy to Clipboard"]}),d.jsxs("button",{onClick:()=>w(!1),className:"btn-cancel flex items-center gap-2",children:[d.jsx(ln,{size:16})," Close"]})]})]})})},Ts=()=>{const[L,oe]=E.useState(""),[de,ce]=E.useState(""),he=()=>{ce("");const xe=p(L);xe.success?T(!1):ce(xe.message||"Invalid deck code format.")};return d.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>T(!1),children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:xe=>xe.stopPropagation(),children:[d.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),d.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load both cards and drones into the builder."}),d.jsx("textarea",{value:L,onChange:xe=>oe(xe.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"cards:CARD001:4,CARD002:2|drones:Scout Drone:1,Heavy Fighter:1"}),de&&d.jsx("p",{className:"text-red-500 mt-2",children:de}),d.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[d.jsx("button",{onClick:()=>T(!1),className:"btn-cancel",children:"Cancel"}),d.jsx("button",{onClick:he,className:"btn-confirm",children:"Load Deck"})]})]})})};return d.jsxs("div",{className:"w-full flex flex-col text-white font-exo mt-8 text-sm",children:[h&&d.jsx(WF,{card:h,onClose:()=>g(null)}),y&&d.jsx(XF,{drone:y,onClose:()=>x(null)}),S&&d.jsx(QF,{component:S,onClose:()=>C(null)}),A&&d.jsx(_o,{}),P&&d.jsx(Ts,{}),d.jsx(Av,{isOpen:N,onClose:()=>_(!1),title:"Your Deck & Drones",drones:jo.drones,cards:jo.cards,shipComponents:s||{}}),d.jsx("div",{className:"flex justify-center items-center mb-4",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("h1",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),f&&d.jsxs("button",{onClick:f,className:"btn-cancel flex items-center gap-2",children:[d.jsx(cM,{size:16})," Back"]})]})}),d.jsxs("div",{className:"flex-grow flex gap-6 min-h-0 mb-[10px]",children:[d.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700 h-[calc(100vh-99px)] ml-[10px]",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{k("cards"),F("deck")},className:`btn-utility ${j==="cards"?"opacity-100":"opacity-60"}`,children:"Cards"}),d.jsx("button",{onClick:()=>{k("drones"),F("drones")},className:`btn-utility ${j==="drones"?"opacity-100":"opacity-60"}`,children:"Drones"}),d.jsx("button",{onClick:()=>{k("ship"),F("ship")},className:`btn-utility ${j==="ship"?"opacity-100":"opacity-60"}`,children:"Ship Components"}),d.jsxs("button",{onClick:()=>_(!0),className:"btn-utility flex items-center gap-2",children:[d.jsx(PM,{size:16}),"View Deck"]}),d.jsxs("button",{onClick:()=>T(!0),className:"btn-utility flex items-center gap-2",children:[d.jsx(qM,{size:16}),"Import"]}),d.jsxs("button",{onClick:()=>w(!0),className:"btn-utility flex items-center gap-2",children:[d.jsx(SM,{size:16}),"Export"]})]}),d.jsxs("div",{className:"flex gap-2 items-center",children:[j==="cards"&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>Ce("table"),className:`btn-utility p-2 ${Se==="table"?"opacity-100":"opacity-60"}`,title:"Table View",children:d.jsx(MC,{size:18})}),d.jsx("button",{onClick:()=>Ce("grid"),className:`btn-utility p-2 ${Se==="grid"?"opacity-100":"opacity-60"}`,title:"Grid View",children:d.jsx(kC,{size:18})})]}),j==="drones"&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>qe("table"),className:`btn-utility p-2 ${Me==="table"?"opacity-100":"opacity-60"}`,title:"Table View",children:d.jsx(MC,{size:18})}),d.jsx("button",{onClick:()=>qe("grid"),className:`btn-utility p-2 ${Me==="grid"?"opacity-100":"opacity-60"}`,title:"Grid View",children:d.jsx(kC,{size:18})})]}),d.jsx("button",{onClick:j==="cards"?ji:Ya,className:"btn-reset",children:"Reset Filters"})]})]}),j==="cards"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[d.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[d.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",M.cost.min," - ",M.cost.max]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"range",min:Oe.minCost,max:Oe.maxCost,value:M.cost.min,onChange:L=>qa("cost",{...M.cost,min:Math.min(parseInt(L.target.value),M.cost.max)}),className:"w-1/2"}),d.jsx("input",{type:"range",min:Oe.minCost,max:Oe.maxCost,value:M.cost.max,onChange:L=>qa("cost",{...M.cost,max:Math.max(parseInt(L.target.value),M.cost.min)}),className:"w-1/2"})]})]}),d.jsxs("div",{className:"relative",ref:Z,children:[d.jsx("button",{onClick:()=>W(!U),className:"filter-select w-full text-left h-full",children:M.abilities.length===0?"Select Abilities":`${M.abilities.length} Abilities Selected`}),U&&d.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:Oe.abilities.map(L=>d.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:M.abilities.includes(L),onChange:()=>Ke(L),className:"mr-2"}),L]},L))})]}),d.jsxs("select",{onChange:L=>qa("type",L.target.value),value:M.type,className:"filter-select h-full",children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"Action",children:"Action Cards"}),d.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),d.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:d.jsxs("label",{className:"flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:M.hideEnhanced,onChange:L=>qa("hideEnhanced",L.target.checked),className:"mr-2"}),d.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),Se==="table"&&d.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:d.jsxs("table",{className:"w-full text-left deck-builder-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Info"}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>On("name"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",Q.key==="name"&&(Q.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>On("type"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",Q.key==="type"&&(Q.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>On("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",Q.key==="cost"&&(Q.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>On("description"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",Q.key==="description"&&(Q.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:"Abilities"}),d.jsx("th",{children:"Targeting"}),d.jsx("th",{children:"Quantity"})]})}),d.jsx("tbody",{children:aa.map((L,oe)=>{const de=n[L.id]||0,ce=Bt[L.baseCardId]||0,he=L.maxInDeck;return d.jsxs("tr",{className:L.type==="Upgrade"?"bg-purple-900/10":"",children:[d.jsx("td",{children:d.jsx("button",{onClick:()=>g(L),className:"p-1 text-gray-400 hover:text-white",children:d.jsx(to,{size:18})})}),d.jsx("td",{className:"font-bold",children:L.name}),d.jsx("td",{className:`font-semibold ${L.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:L.type}),d.jsx("td",{children:L.cost}),d.jsx("td",{className:"text-xs text-gray-400",children:L.description}),d.jsx("td",{children:d.jsx("div",{className:"flex flex-wrap gap-2",children:L.keywords.map(xe=>d.jsx("span",{className:"ability-chip",children:xe},xe))})}),d.jsx("td",{className:"text-xs",children:L.targetingText==="N/A"?d.jsx("span",{className:"text-gray-500",children:"N/A"}):L.targetingText}),d.jsx("td",{children:d.jsx("div",{className:"quantity-buttons",children:Array.from({length:he+1}).map((xe,je)=>{const nn=je===de,Pt=he-(ce-de),Ct=je>Pt;return d.jsx("button",{onClick:()=>r(L.id,je),className:`quantity-btn ${nn?"selected":""}`,disabled:Ct,children:je},je)})})})]},`${L.id}-${oe}`)})})]})}),Se==="grid"&&d.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:aa.map((L,oe)=>{const de=n[L.id]||0,ce=Bt[L.baseCardId]||0,he=L.maxInDeck,je=he-(ce-de)<=de;return d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(Ga,{card:L,onClick:()=>g(L),isPlayable:!0,isSelected:!1,isMandatoryTarget:!1,scale:1}),d.jsxs("div",{className:"flex items-center gap-2 bg-slate-800/70 px-3 py-1 rounded-lg border border-gray-600",children:[d.jsx("button",{onClick:()=>de>0&&r(L.id,de-1),className:`text-lg font-bold px-2 rounded transition-all ${de===0?"opacity-50 cursor-not-allowed text-gray-500":"text-cyan-400 hover:text-cyan-300 hover:bg-slate-700"}`,children:"-"}),d.jsxs("span",{className:"font-bold text-base min-w-[50px] text-center",children:[de,"/",he]}),d.jsx("button",{onClick:()=>!je&&r(L.id,de+1),className:`text-lg font-bold px-2 rounded transition-all ${je?"opacity-50 cursor-not-allowed text-gray-500":"text-cyan-400 hover:text-cyan-300 hover:bg-slate-700"}`,children:"+"})]})]},`${L.id}-${oe}`)})})})]}),j==="drones"&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:d.jsxs("div",{className:"relative",ref:Z,children:[d.jsx("button",{onClick:()=>W(!U),className:"filter-select w-full text-left h-full",children:G.abilities.length===0?"Select Abilities":`${G.abilities.length} Abilities Selected`}),U&&d.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:ge.abilities.map(L=>d.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:G.abilities.includes(L),onChange:()=>jn(L),className:"mr-2"}),L]},L))})]})}),Me==="table"&&d.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:d.jsxs("table",{className:"w-full text-left deck-builder-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Info"}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>jt("name"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",le.key==="name"&&(le.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>jt("class"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="class"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",le.key==="class"&&(le.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>jt("attack"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="attack"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Attack",le.key==="attack"&&(le.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>jt("speed"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="speed"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Speed",le.key==="speed"&&(le.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>jt("shields"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="shields"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Shields",le.key==="shields"&&(le.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>jt("hull"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="hull"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Hull",le.key==="hull"&&(le.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:"Abilities"}),d.jsx("th",{children:"Description"}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>jt("limit"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="limit"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Limit",le.key==="limit"&&(le.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:d.jsxs("button",{onClick:()=>jt("upgradeSlots"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="upgradeSlots"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Upgrades",le.key==="upgradeSlots"&&(le.direction==="ascending"?" ":" ")]})}),d.jsx("th",{children:"Quantity"})]})}),d.jsx("tbody",{children:fn.map((L,oe)=>{const de=e&&e[L.name]||0;return d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("button",{onClick:()=>x(L),className:"p-1 text-gray-400 hover:text-white",children:d.jsx(to,{size:18})})}),d.jsx("td",{className:"font-bold",children:L.name}),d.jsx("td",{children:L.class}),d.jsx("td",{children:L.attack}),d.jsx("td",{children:L.speed}),d.jsx("td",{children:L.shields}),d.jsx("td",{children:L.hull}),d.jsx("td",{children:d.jsx("div",{className:"flex flex-wrap gap-2",children:L.keywords.map(ce=>d.jsx("span",{className:"ability-chip",children:ce},ce))})}),d.jsx("td",{className:"text-xs text-gray-400",children:L.description}),d.jsx("td",{children:L.limit}),d.jsx("td",{children:L.upgradeSlots}),d.jsx("td",{children:d.jsxs("div",{className:"quantity-buttons",children:[d.jsx("button",{onClick:()=>i(L.name,0),className:`quantity-btn ${de===0?"selected":""}`,children:"0"}),d.jsx("button",{onClick:()=>i(L.name,1),className:`quantity-btn ${de===1?"selected":""}`,children:"1"})]})})]},`${L.name}-${oe}`)})})]})}),Me==="grid"&&d.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:fn.map((L,oe)=>{const de=e&&e[L.name]||0,ce=1,he=de>=ce;return d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx(bi,{drone:L,onClick:()=>x(L),isSelectable:!1,isSelected:!1,deployedCount:0,ignoreDeployLimit:!0,appliedUpgrades:[],scale:1,isViewOnly:!0}),d.jsxs("div",{className:"flex items-center gap-2 bg-slate-800/70 px-3 py-1 rounded-lg border border-gray-600",children:[d.jsx("button",{onClick:()=>de>0&&i(L.name,de-1),className:`text-lg font-bold px-2 rounded transition-all ${de===0?"opacity-50 cursor-not-allowed text-gray-500":"text-cyan-400 hover:text-cyan-300 hover:bg-slate-700"}`,children:"-"}),d.jsxs("span",{className:"font-bold text-base min-w-[50px] text-center",children:[de,"/",ce]}),d.jsx("button",{onClick:()=>!he&&i(L.name,de+1),className:`text-lg font-bold px-2 rounded transition-all ${he?"opacity-50 cursor-not-allowed text-gray-500":"text-cyan-400 hover:text-cyan-300 hover:bg-slate-700"}`,children:"+"})]})]},`${L.name}-${oe}`)})})})]}),j==="ship"&&d.jsx(d.Fragment,{children:d.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:d.jsxs("table",{className:"w-full text-left deck-builder-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Info"}),d.jsx("th",{children:"Type"}),d.jsx("th",{children:"Name"}),d.jsx("th",{children:"Description"}),d.jsx("th",{children:"Lane"})]})}),d.jsxs("tbody",{children:[d.jsx("tr",{className:"bg-cyan-900/20",children:d.jsx("td",{colSpan:"5",className:"font-bold text-cyan-400 text-sm py-2",children:"BRIDGE"})}),ur.filter(L=>L.type==="Bridge").map((L,oe)=>{const de=s?.[L.id]||null,ce=Object.entries(s||{}).filter(([he,xe])=>he!==L.id&&xe).map(([he,xe])=>xe);return d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("button",{onClick:()=>C(L),className:"p-1 text-gray-400 hover:text-white",children:d.jsx(to,{size:18})})}),d.jsx("td",{className:"font-semibold text-cyan-400",children:L.type}),d.jsx("td",{className:"font-bold",children:L.name}),d.jsx("td",{className:"text-xs text-gray-400",children:L.description}),d.jsx("td",{children:d.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(he=>d.jsx("button",{onClick:()=>l(L.id,de===he?null:he),disabled:ce.includes(he)&&de!==he,className:`px-3 py-1 rounded text-xs font-bold transition-all ${de===he?"bg-cyan-500 text-white":ce.includes(he)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-cyan-600 hover:text-white"}`,children:he.toUpperCase()},he))})})]},`${L.id}-${oe}`)}),d.jsx("tr",{className:"bg-purple-900/20",children:d.jsx("td",{colSpan:"5",className:"font-bold text-purple-400 text-sm py-2",children:"POWER CELL"})}),ur.filter(L=>L.type==="Power Cell").map((L,oe)=>{const de=s?.[L.id]||null,ce=Object.entries(s||{}).filter(([he,xe])=>he!==L.id&&xe).map(([he,xe])=>xe);return d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("button",{onClick:()=>C(L),className:"p-1 text-gray-400 hover:text-white",children:d.jsx(to,{size:18})})}),d.jsx("td",{className:"font-semibold text-purple-400",children:L.type}),d.jsx("td",{className:"font-bold",children:L.name}),d.jsx("td",{className:"text-xs text-gray-400",children:L.description}),d.jsx("td",{children:d.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(he=>d.jsx("button",{onClick:()=>l(L.id,de===he?null:he),disabled:ce.includes(he)&&de!==he,className:`px-3 py-1 rounded text-xs font-bold transition-all ${de===he?"bg-purple-500 text-white":ce.includes(he)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-purple-600 hover:text-white"}`,children:he.toUpperCase()},he))})})]},`${L.id}-${oe}`)}),d.jsx("tr",{className:"bg-pink-900/20",children:d.jsx("td",{colSpan:"5",className:"font-bold text-pink-400 text-sm py-2",children:"DRONE CONTROL HUB"})}),ur.filter(L=>L.type==="Drone Control Hub").map((L,oe)=>{const de=s?.[L.id]||null,ce=Object.entries(s||{}).filter(([he,xe])=>he!==L.id&&xe).map(([he,xe])=>xe);return d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("button",{onClick:()=>C(L),className:"p-1 text-gray-400 hover:text-white",children:d.jsx(to,{size:18})})}),d.jsx("td",{className:"font-semibold text-pink-400",children:L.type}),d.jsx("td",{className:"font-bold",children:L.name}),d.jsx("td",{className:"text-xs text-gray-400",children:L.description}),d.jsx("td",{children:d.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(he=>d.jsx("button",{onClick:()=>l(L.id,de===he?null:he),disabled:ce.includes(he)&&de!==he,className:`px-3 py-1 rounded text-xs font-bold transition-all ${de===he?"bg-pink-500 text-white":ce.includes(he)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-pink-600 hover:text-white"}`,children:he.toUpperCase()},he))})})]},`${L.id}-${oe}`)})]})]})})})]}),d.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700 h-[calc(100vh-99px)] mr-[10px]",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("div",{className:"flex gap-2 flex-wrap",children:[d.jsxs("button",{onClick:()=>F("deck"),className:`btn-utility ${z==="deck"?"opacity-100":"opacity-60"}`,children:["Deck (",xt,"/40)"]}),d.jsxs("button",{onClick:()=>F("drones"),className:`btn-utility ${z==="drones"?"opacity-100":"opacity-60"}`,children:["Drones (",wt,"/10)"]}),d.jsxs("button",{onClick:()=>F("ship"),className:`btn-utility ${z==="ship"?"opacity-100":"opacity-60"}`,children:["Ship (",Oi,"/3)"]})]}),d.jsx("button",{onClick:z==="deck"?ia:z==="drones"?_i:()=>l(null,null),className:"btn-reset",children:"Reset"})]}),z==="deck"&&d.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:He.length>0?He.map(L=>{const oe=Bt[L.baseCardId]>=L.maxInDeck;return d.jsxs("div",{className:"deck-list-item",children:[d.jsx("button",{onClick:()=>g(L),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:d.jsx(to,{size:18})}),d.jsx("span",{className:"flex-grow truncate",title:L.name,children:L.name}),d.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[d.jsx("button",{onClick:()=>r(L.id,L.quantity-1),className:"deck-edit-btn",children:"-"}),d.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",L.quantity]}),d.jsx("button",{onClick:()=>r(L.id,L.quantity+1),disabled:oe,className:"deck-edit-btn",children:"+"})]})]},L.id)}):d.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),z==="drones"&&d.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:er.length>0?er.map(L=>d.jsxs("div",{className:"deck-list-item",children:[d.jsx("button",{onClick:()=>x(L),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Drone Details",children:d.jsx(to,{size:18})}),d.jsx("span",{className:"flex-grow truncate",title:L.name,children:L.name}),d.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[d.jsx("button",{onClick:()=>i(L.name,0),className:"deck-edit-btn",children:"-"}),d.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",L.quantity]}),d.jsx("button",{onClick:()=>i(L.name,1),disabled:wt>=10,className:"deck-edit-btn",children:"+"})]})]},L.name)):d.jsx("p",{className:"text-gray-500 italic",children:"Your drone pool is empty. Add drones from the left."})}),z==="ship"&&d.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("div",{className:"grid grid-cols-3 gap-4",children:["l","m","r"].map((L,oe)=>{const de=Object.entries(s||{}).find(([he,xe])=>xe===L),ce=de?ur.find(he=>he.id===de[0]):null;return d.jsxs("div",{className:`p-4 rounded-lg border-2 ${ce?"border-cyan-500 bg-cyan-900/10":"border-dashed border-gray-600 bg-gray-800/30"}`,children:[d.jsx("div",{className:"text-center mb-2",children:d.jsx("span",{className:"font-bold text-sm text-cyan-400",children:oe===1?"MIDDLE (Bonus)":oe===0?"LEFT":"RIGHT"})}),ce?d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-xs text-gray-400 mb-1",children:ce.type}),d.jsx("div",{className:"font-bold text-white mb-2",children:ce.name}),d.jsx("div",{className:"text-xs text-gray-500 mb-2",children:ce.description}),oe===1&&d.jsx("div",{className:"text-xs text-cyan-300 font-semibold",children:"+ Bonus Stats"})]}):d.jsx("div",{className:"text-center text-gray-500 italic text-xs py-4",children:"No component"})]},L)})}),Oi>0&&d.jsxs("div",{className:"mt-4",children:[d.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Selected Components"}),d.jsx("div",{className:"deck-list",children:Object.entries(s||{}).filter(([L,oe])=>oe).map(([L,oe])=>{const de=ur.find(ce=>ce.id===L);return de?d.jsxs("div",{className:"deck-list-item",children:[d.jsxs("span",{className:"flex-grow truncate",title:de.name,children:[de.name," (",de.type,")"]}),d.jsxs("span",{className:"font-bold text-cyan-400",children:["Lane: ",oe.toUpperCase()]})]},L):null})})]}),Oi===0&&d.jsx("p",{className:"text-gray-500 italic text-center py-8",children:"No ship components selected. Select components from the left."})]})}),z==="deck"&&xt>0&&d.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[d.jsxs("button",{onClick:()=>ye(!ne),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",d.jsx(fu,{size:20,className:`transition-transform duration-300 ${ne?"rotate-0":"rotate-180"}`})]}),d.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${ne?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[d.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[d.jsx("button",{onClick:()=>V("cost"),className:`btn-info text-xs ${q==="cost"?"opacity-100":"opacity-60"}`,children:"Cost"}),d.jsx("button",{onClick:()=>V("type"),className:`btn-info text-xs ${q==="type"?"opacity-100":"opacity-60"}`,children:"Type"}),d.jsx("button",{onClick:()=>V("ability"),className:`btn-info text-xs ${q==="ability"?"opacity-100":"opacity-60"}`,children:"Abilities"})]}),d.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[q==="cost"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(cs,{data:Ea.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[d.jsx(fi,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(Ra,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),d.jsx(La,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),d.jsx(ya,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(di,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),q==="type"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(a0,{margin:{top:20,right:30,bottom:20,left:30},children:[d.jsx(qf,{data:[{name:"Action Cards",value:He.filter(L=>L.type==="Action").reduce((L,oe)=>L+oe.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:He.filter(L=>L.type==="Upgrade").reduce((L,oe)=>L+oe.quantity,0),color:"#c084fc"}].filter(L=>L.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:L,value:oe,percent:de})=>`${L}: ${oe} (${(de*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:He.filter(L=>L.type==="Action").reduce((L,oe)=>L+oe.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:He.filter(L=>L.type==="Upgrade").reduce((L,oe)=>L+oe.quantity,0),color:"#c084fc"}].filter(L=>L.value>0).map((L,oe)=>d.jsx(mo,{fill:L.color},`cell-${oe}`))}),d.jsx(ya,{}),d.jsx(Xp,{})]})})]}),q==="ability"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(a0,{margin:{top:20,right:30,bottom:20,left:30},children:[d.jsx(qf,{data:Ea.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:Fa,outerRadius:60,dataKey:"value",children:Ea.pieChartData.map((L,oe)=>d.jsx(mo,{fill:Gn[oe%Gn.length]},`cell-${oe}`))}),d.jsx(ya,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),z==="drones"&&wt>0&&d.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[d.jsxs("button",{onClick:()=>ye(!ne),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Drone Statistics",d.jsx(fu,{size:20,className:`transition-transform duration-300 ${ne?"rotate-0":"rotate-180"}`})]}),d.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${ne?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[d.jsxs("div",{className:"flex justify-center gap-2 mb-2 flex-wrap",children:[d.jsx("button",{onClick:()=>V("cost"),className:`btn-info text-xs ${q==="cost"?"opacity-100":"opacity-60"}`,children:"Cost"}),d.jsx("button",{onClick:()=>V("attack"),className:`btn-info text-xs ${q==="attack"?"opacity-100":"opacity-60"}`,children:"Attack"}),d.jsx("button",{onClick:()=>V("speed"),className:`btn-info text-xs ${q==="speed"?"opacity-100":"opacity-60"}`,children:"Speed"}),d.jsx("button",{onClick:()=>V("shields"),className:`btn-info text-xs ${q==="shields"?"opacity-100":"opacity-60"}`,children:"Shields"}),d.jsx("button",{onClick:()=>V("hull"),className:`btn-info text-xs ${q==="hull"?"opacity-100":"opacity-60"}`,children:"Hull"}),d.jsx("button",{onClick:()=>V("limit"),className:`btn-info text-xs ${q==="limit"?"opacity-100":"opacity-60"}`,children:"Limit"}),d.jsx("button",{onClick:()=>V("upgrades"),className:`btn-info text-xs ${q==="upgrades"?"opacity-100":"opacity-60"}`,children:"Upgrades"}),d.jsx("button",{onClick:()=>V("ability"),className:`btn-info text-xs ${q==="ability"?"opacity-100":"opacity-60"}`,children:"Abilities"})]}),d.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[q==="cost"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Drone Cost Distribution"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(cs,{data:qn.costData,margin:{top:5,right:20,left:-15,bottom:0},children:[d.jsx(fi,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(Ra,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),d.jsx(La,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),d.jsx(ya,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(di,{dataKey:"count",fill:"#8884d8",name:"Drone Count"})]})})]}),q==="attack"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Attack Distribution"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(cs,{data:qn.attackData,margin:{top:5,right:20,left:-15,bottom:0},children:[d.jsx(fi,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(Ra,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),d.jsx(La,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),d.jsx(ya,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(di,{dataKey:"count",fill:"#ef4444",name:"Drone Count"})]})})]}),q==="speed"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Speed Distribution"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(cs,{data:qn.speedData,margin:{top:5,right:20,left:-15,bottom:0},children:[d.jsx(fi,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(Ra,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),d.jsx(La,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),d.jsx(ya,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(di,{dataKey:"count",fill:"#3b82f6",name:"Drone Count"})]})})]}),q==="shields"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Shield Distribution"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(cs,{data:qn.shieldsData,margin:{top:5,right:20,left:-15,bottom:0},children:[d.jsx(fi,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(Ra,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),d.jsx(La,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),d.jsx(ya,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(di,{dataKey:"count",fill:"#06b6d4",name:"Drone Count"})]})})]}),q==="hull"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Hull Distribution"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(cs,{data:qn.hullData,margin:{top:5,right:20,left:-15,bottom:0},children:[d.jsx(fi,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(Ra,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),d.jsx(La,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),d.jsx(ya,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(di,{dataKey:"count",fill:"#22c55e",name:"Drone Count"})]})})]}),q==="limit"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Deployment Limit Distribution"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(cs,{data:qn.limitData,margin:{top:5,right:20,left:-15,bottom:0},children:[d.jsx(fi,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(Ra,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),d.jsx(La,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),d.jsx(ya,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(di,{dataKey:"count",fill:"#f59e0b",name:"Drone Count"})]})})]}),q==="upgrades"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Upgrade Slots Distribution"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(cs,{data:qn.upgradesData,margin:{top:5,right:20,left:-15,bottom:0},children:[d.jsx(fi,{strokeDasharray:"3 3",stroke:"#4A5568"}),d.jsx(Ra,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),d.jsx(La,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),d.jsx(ya,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),d.jsx(di,{dataKey:"count",fill:"#a855f7",name:"Drone Count"})]})})]}),q==="ability"&&d.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[d.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),d.jsx(va,{width:"100%",height:"100%",children:d.jsxs(a0,{margin:{top:20,right:30,bottom:20,left:30},children:[d.jsx(qf,{data:qn.abilityData,cx:"50%",cy:"50%",labelLine:!1,label:({name:L,value:oe,percent:de})=>`${L}: ${oe} (${(de*100).toFixed(0)}%)`,outerRadius:60,dataKey:"value",children:qn.abilityData.map((L,oe)=>d.jsx(mo,{fill:Gn[oe%Gn.length]},`cell-${oe}`))}),d.jsx(ya,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),d.jsx("button",{onClick:u,disabled:!Gt||!Oo||!Hn,className:"btn-confirm w-full p-4 mt-4 text-lg font-bold font-orbitron",title:Hn?"":"You must select all 3 ship components with lanes assigned",children:"Confirm Deck, Drones & Ship"})]})]})]})};function JF(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getOpponentPlayerState:s,addLogEntry:l}=wi(),{turnPhase:u}=e,p=i();s();const[f,h]=E.useState(!1),[g,y]=E.useState({}),[x,S]=E.useState({}),[C,A]=E.useState({}),w=async R=>{if(u==="deckSelection")if(R==="standard"){const U=t(),W=Ie.buildDeckFromList(vl),Z=[...C2];if(Z.length!==10){console.error(` Standard drone list has ${Z.length} drones, expected 10`),l({player:"SYSTEM",actionType:"ERROR",source:"Deck Validation",target:"N/A",outcome:`Invalid standard drone list: ${Z.length} drones instead of 10.`},"handleDeckChoice");return}const I={phase:"deckSelection",playerId:U,actionData:{deck:W,drones:Z,shipComponents:{BRIDGE_001:"l",POWERCELL_001:"m",DRONECONTROL_001:"r"}}};if(e.gameMode==="guest"){Qn.sendActionToHost("commitment",I);return}const G=await Ue.actionProcessor.processCommitment(I);if(!G.success){console.error(" Deck selection submission failed:",G.error);return}l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else R==="custom"&&h(!0)},P=(R,U)=>{y(W=>({...W,[R]:U}))},T=(R,U)=>{S(W=>({...W,[R]:U}))},N=(R,U)=>{if(R===null&&U===null){A({});return}A(W=>({...W,[R]:U}))},_=async()=>{const R=[];let U=0;Object.entries(g).forEach(([ie,le])=>{for(let $=0;$<le;$++){const q=Ot.find(V=>V.id===ie);q&&R.push(Ie.createCard(q,`card-${Date.now()}-${U++}`))}});const W=R.sort(()=>.5-Math.random());K("DECK_SELECTION",` Custom deck shuffled: ${W.length} cards`,{sampleCard:W[0],sampleInstanceId:W[0]?.instanceId,hasInstanceId:W[0]?.instanceId!==void 0});const Z=[];Object.entries(x).forEach(([ie,le])=>{le>0&&Z.push(ie)}),K("DECK_SELECTION",` Custom deck includes ${Z.length} drones:`,Z.join(", "));const I={phase:"deckSelection",playerId:t(),actionData:{deck:W,drones:Z,shipComponents:C}};if(e.gameMode==="guest"){Qn.sendActionToHost("commitment",I),h(!1);return}const G=await Ue.actionProcessor.processCommitment(I);if(!G.success){console.error(" Custom deck submission failed:",G.error);return}l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected a Custom Deck."},"handleConfirmDeck"),h(!1)},j=R=>{try{const U={},W={},Z={},Q=R.split("|");for(const I of Q){const[G,...ie]=I.split(":"),le=ie.join(":");if(G==="cards"){const $=le.split(",");for(const q of $){const[V,ne]=q.split(":"),ye=parseInt(ne,10);if(!V||isNaN(ye))return{success:!1,message:"Invalid card format in deck code."};if(!Ot.find(Ce=>Ce.id===V))return{success:!1,message:`Card ${V} not found.`};U[V]=ye}}else if(G==="drones"){const $=le.split(",");for(const q of $){const V=q.split(":"),ne=V.pop(),ye=V.join(":"),Se=parseInt(ne,10);if(!ye||isNaN(Se))return{success:!1,message:"Invalid drone format in deck code."};W[ye]=Se}}else if(G==="ship"){const $=le.split(",");for(const q of $){const[V,ne]=q.split(":");if(!V||!ne||!["l","m","r"].includes(ne))return{success:!1,message:"Invalid ship component format in deck code."};Z[V]=ne}}}return y(U),S(W),A(Z),{success:!0}}catch(U){return console.error("Error importing deck:",U),{success:!1,message:"Failed to parse deck code."}}};E.useEffect(()=>{e.gameMode==="guest"&&Ue.emit("render_complete")},[e,Ue]);const k=t(),z=n(),F=e.commitments?.deckSelection?.[k]?.completed||!1,M=e.commitments?.deckSelection?.[z]?.completed||!1;return K("DECK_SELECTION"," [DECK SELECTION] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),fullCommitmentsObject:e.commitments?.deckSelection,localPlayerDeckLength:p.deck?.length,willShowWaiting:r()&&F&&!M}),r()&&F&&!M?d.jsx(Ev,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):f?d.jsx(f_,{selectedDrones:x,fullCardCollection:Ot,deck:g,onDeckChange:P,onDronesChange:T,selectedShipComponents:C,onShipComponentsChange:N,onConfirmDeck:_,onImportDeck:j}):d.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[d.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),d.jsxs("div",{className:"flex flex-col items-center justify-center h-full relative z-10",children:[d.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),d.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[d.jsxs("div",{onClick:()=>w("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[d.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),d.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),d.jsx("button",{className:"btn-confirm mt-6",children:"Select"})]}),d.jsxs("div",{onClick:()=>w("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[d.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),d.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),d.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}function ZF(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getLocalPlacedSections:s}=wi(),{turnPhase:l,unplacedSections:u}=e,p=i(),f=s(),[h,g]=E.useState(null),x=(()=>{const M=p.selectedShipComponents;if(!M||Object.keys(M).length===0)return{placed:f||[null,null,null],unplaced:u||["bridge","powerCell","droneControlHub"]};const R=[null,null,null],U=[],W={l:0,m:1,r:2};return Object.entries(M).forEach(([Q,I])=>{if(I){const G=ur.find(ie=>ie.id===Q);if(G&&G.key){const ie=W[I];R[ie]=G.key}}}),["bridge","powerCell","droneControlHub"].forEach(Q=>{R.includes(Q)||U.push(Q)}),{placed:R,unplaced:U}})(),[S,C]=E.useState(x.placed),[A,w]=E.useState(x.unplaced),P=M=>{if(l==="placement")if(K("PLACEMENT"," handleSelectSectionForPlacement called with:",M,"gameMode:",e.gameMode),A.includes(M))g(R=>R===M?null:M);else{const R=S.indexOf(M),U=[...S];U[R]=null,C(U),w(W=>[...W,M]),g(null)}},T=M=>{if(l==="placement")if(K("PLACEMENT"," handleLaneSelectForPlacement called with lane:",M,"gameMode:",e.gameMode),h){if(S[M]){const R=S[M],U=[...S];U[M]=h;const W=A.indexOf(h),Z=[...A];Z.splice(W,1,R),C(U),w(Z)}else{const R=[...S];R[M]=h,C(R),w(U=>U.filter(W=>W!==h))}g(null)}else S[M]&&P(S[M])},N=async()=>{if(l!=="placement")return;if(S.some(U=>U==null)){console.warn(" Cannot confirm placement: All ship sections must be placed");return}const R={phase:"placement",playerId:t(),actionData:{placedSections:S}};if(e.gameMode==="guest"){Qn.sendActionToHost("commitment",R);return}try{const U=await Ue.actionProcessor.processCommitment(R);if(!U.success){console.error(" Placement submission failed:",U.error);return}K("PLACEMENT"," Placement submitted to PhaseManager")}catch(U){console.error(" Error submitting placement:",U)}};E.useEffect(()=>{e.gameMode==="guest"&&Ue.emit("render_complete")},[e,Ue]);const _=t(),j=n(),k=e.commitments?.placement?.[_]?.completed||!1,z=e.commitments?.placement?.[j]?.completed||!1;if(K("PLACEMENT"," [SHIP PLACEMENT] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),fullCommitmentsObject:e.commitments?.placement,willShowWaiting:r()&&k&&!z}),r()&&k&&!z){const M=S.map((R,U)=>R?R.name:"Empty").join(", ");return d.jsx(Ev,{phase:"placement",localPlayerStatus:`Your ship layout: ${M}`})}const F=S.every(M=>M!==null);return d.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[d.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),d.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[d.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),d.jsxs("p",{className:"text-center text-gray-400 mb-8",children:[A.length>0?"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again.":"Your ship components are pre-configured. You can rearrange them by clicking a section to pick it up."," ","The ship section placed in the centre lane will gain a bonus to its stats."]}),F&&d.jsx("button",{onClick:()=>{N()},className:"btn-confirm text-lg mb-6",children:"Confirm Layout"}),d.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[d.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(M=>{const R=S[M],U=h&&!S[M];return d.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>T(M),children:R?d.jsx(go,{section:R,stats:p.shipSections[R],effectiveStatsForDisplay:p.shipSections[R].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:M===1,gameEngine:Ie,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null}):d.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${U?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:d.jsx("span",{className:"text-center font-bold",children:M===1?"Lane 2 (Center Bonus)":`Lane ${M+1}`})})},M)})}),A.length>0&&d.jsx("div",{className:"w-full text-center mt-6 mb-2",children:d.jsx("h3",{className:"text-lg font-orbitron text-gray-400",children:"Available Sections"})}),d.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(M=>d.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:A.includes(M)&&d.jsx("div",{onClick:()=>P(M),className:`h-full transition-all duration-300 rounded-xl ${h===M?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:d.jsx(go,{section:M,stats:p.shipSections[M],effectiveStatsForDisplay:p.shipSections[M].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:Ie,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null})})},M))})]})]})]})}const dr=(e=null)=>({...e?Ze.find(n=>n.name===e):Ze[0],id:`mock-${Date.now()}-${Math.random()}`,isExhausted:!1,temporaryMods:[],permanentMods:[]}),vu=(e=3)=>Ze.slice(0,e).map((t,n)=>({...t,id:`mock-drone-${n}`,isExhausted:n%2===0,temporaryMods:[],permanentMods:[]})),lu=(e=null)=>({...e?Ot.find(n=>n.name===e):Ot[0],instanceId:`mock-card-${Date.now()}-${Math.random()}`}),xa=(e=5)=>Ot.slice(0,e).map((t,n)=>({...t,instanceId:`mock-card-${n}`})),Wr=(e="bridge")=>{const t={bridge:{name:"bridge",health:15,maxHealth:20,shields:2},powerCell:{name:"powerCell",health:12,maxHealth:15,shields:1},droneControlHub:{name:"droneControlHub",health:18,maxHealth:20,shields:3}};return t[e]||t.bridge},eV=()=>({gameMode:"local",turnPhase:"action",currentPlayer:"player1",turn:3,roundNumber:3,player1:{name:"Player 1",energy:10,hand:xa(5),deck:xa(20),discardPile:xa(5),dronesOnBoard:{lane1:[dr("Scout Drone")],lane2:[dr("Standard Fighter"),dr("Heavy Fighter")],lane3:[]},shipSections:{bridge:Wr("bridge"),powerCell:Wr("powerCell"),droneControlHub:Wr("droneControlHub")},activeDronePool:vu(5),deployedDroneCounts:{},droneUpgrades:{}},player2:{name:"AI Opponent",energy:8,hand:xa(4),deck:xa(15),discardPile:xa(3),dronesOnBoard:{lane1:[dr("Interceptor")],lane2:[dr("Guardian Drone")],lane3:[dr("Bomber")]},shipSections:{bridge:Wr("bridge"),powerCell:Wr("powerCell"),droneControlHub:Wr("droneControlHub")},activeDronePool:vu(5),deployedDroneCounts:{},droneUpgrades:{}},placedSections:[Wr("bridge"),Wr("powerCell"),Wr("droneControlHub")],opponentPlacedSections:[Wr("bridge"),Wr("powerCell"),Wr("droneControlHub")],passInfo:{player1Passed:!1,player2Passed:!1,firstPasser:null},gameLog:[]}),tV={all:{name:"All",count:23},confirmation:{name:"Confirmation",count:5},interception:{name:"Interception",count:2},gamePhase:{name:"Game Phase",count:3},aiDebug:{name:"AI Debug",count:3},playerActions:{name:"Player Actions",count:3},upgrades:{name:"Upgrades",count:3},utility:{name:"Utility",count:3},debug:{name:"Debug",count:2}},c2=e=>{const t=eV(),n=dr();return lu(),{DeploymentConfirmationModal:{category:"confirmation",props:{show:!0,deploymentConfirmation:{budgetCost:3,energyCost:2},onConfirm:()=>console.log("Deployment confirmed"),onCancel:()=>console.log("Deployment cancelled")}},CardConfirmationModal:{category:"confirmation",props:{show:!0,cardConfirmation:{card:lu("Laser Blast"),target:n},onConfirm:()=>console.log("Card play confirmed"),onCancel:()=>console.log("Card play cancelled")}},DroneAbilityConfirmationModal:{category:"confirmation",props:{show:!0,abilityConfirmation:{drone:dr("Repair Drone"),ability:{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",cost:{energy:1}},target:{id:"lane2"}},onConfirm:()=>console.log("Ability confirmed"),onCancel:()=>console.log("Ability cancelled")}},ShipAbilityConfirmationModal:{category:"confirmation",props:{show:!0,shipAbilityConfirmation:{sectionName:"bridge",ability:{name:"Emergency Protocols",description:"Draw 2 cards",type:"ACTIVE",cost:{energy:2}},target:null},onConfirm:()=>console.log("Ship ability confirmed"),onCancel:()=>console.log("Ship ability cancelled")}},MoveConfirmationModal:{category:"confirmation",props:{show:!0,moveConfirmation:{drone:n,from:"lane1",to:"lane2"},onConfirm:()=>console.log("Move confirmed"),onCancel:()=>console.log("Move cancelled")}},InterceptionOpportunityModal:{category:"interception",props:{show:!0,choiceData:{attackDetails:{attacker:dr("Standard Fighter"),target:dr("Scout Drone"),targetType:"drone",lane:"lane2"},interceptors:vu(3)},onIntercept:i=>console.log("Intercept with:",i.name),onDecline:()=>console.log("Declined interception"),gameEngine:Ie,turnPhase:"action",isMyTurn:!0,passInfo:{player1Passed:!1,player2Passed:!1},getLocalPlayerId:()=>"player1",localPlayerState:t.player1,shipAbilityMode:null,droneRefs:{current:{}},mandatoryAction:null}},OpponentDecidingInterceptionModal:{category:"interception",props:{show:!0,attacker:n,target:dr("Heavy Fighter")}},WinnerModal:{category:"gamePhase",props:{show:!0,winner:"player1",localPlayerId:"player1",onClose:()=>console.log("View board")}},WaitingForPlayerModal:{category:"gamePhase",props:{show:!0,message:"Waiting for opponent to complete placement...",phase:"placement"}},GamePhaseModal:{category:"gamePhase",props:{title:"Deployment Phase",text:"Deploy drones to lanes using your deployment budget",onClose:()=>console.log("Modal closed"),children:null}},AICardPlayReportModal:{category:"aiDebug",props:{show:!0,card:lu("Energy Surge"),result:{success:!0,energyGained:2},onClose:()=>console.log("Modal closed")}},AIDecisionLogModal:{category:"aiDebug",props:{show:!0,aiDecisionContext:{phase:"action",decision:"attack",reasoning:"Target has low health and no shields",alternatives:["pass","ability","card"],scores:{attack:85,ability:60,card:45,pass:20}},onClose:()=>console.log("Modal closed")}},AIHandDebugModal:{category:"aiDebug",props:{show:!0,aiHand:xa(5),onClose:()=>console.log("Modal closed")}},MandatoryActionModal:{category:"playerActions",props:{show:!0,mandatoryAction:{type:"discard",count:2},effectiveStats:{handLimit:5,cpuLimit:8},onClose:()=>console.log("Modal closed")}},ConfirmationModal:{category:"playerActions",props:{show:!0,title:"Confirm Action",message:"Are you sure you want to pass this phase?",onConfirm:()=>console.log("Confirmed"),onCancel:()=>console.log("Cancelled")}},OpponentDronesModal:{category:"playerActions",props:{show:!0,drones:vu(5),lane:"lane2",onClose:()=>console.log("Modal closed")}},ViewUpgradesModal:{category:"upgrades",props:{modalData:{droneName:"Scout Drone",upgrades:[{instanceId:"CARD020",name:"Slimline Bodywork",description:"+1 to Deployment Limit",stat:"limit",value:1},{instanceId:"CARD021",name:"Overclocked Thrusters",description:"+1 Speed",stat:"speed",value:1}]},onClose:()=>console.log("Modal closed")}},UpgradeSelectionModal:{category:"upgrades",props:{selectionData:{card:lu("Combat Enhancement"),targets:vu(5)},onConfirm:(i,s)=>console.log("Selected drone:",s.name),onCancel:()=>console.log("Cancelled")}},DestroyUpgradeModal:{category:"upgrades",props:{selectionData:{card:lu("System Sabotage"),targets:[dr("Scout Drone"),dr("Heavy Fighter")],opponentState:{appliedUpgrades:{"Scout Drone":[{instanceId:"upgrade-1",name:"Slimline Bodywork",stat:"limit",value:1}],"Heavy Fighter":[{instanceId:"upgrade-2",name:"Combat Enhancement",stat:"attack",value:1},{instanceId:"upgrade-3",name:"Shield Amplifier",stat:"shields",value:1}]}}},onConfirm:(i,s)=>console.log("Destroying upgrade:",s),onCancel:()=>console.log("Cancelled")}},CardSelectionModal:{category:"utility",props:{isOpen:!0,selectionData:{searchedCards:xa(8),drawCount:2,type:"search_and_draw",filter:{type:"upgrade"}},onConfirm:i=>console.log("Selected:",i),onClose:()=>console.log("Cancelled")}},CardViewerModal:{category:"utility",props:{isOpen:!0,cards:xa(5),title:"Your Deck",shouldSort:!0,onClose:()=>console.log("Modal closed")}},ViewDeckModal:{category:"utility",props:{show:!0,deck:xa(20),discardPile:xa(5),onClose:()=>console.log("Modal closed")}},GameDebugModal:{category:"debug",props:{show:!0,gameState:t,onClose:()=>console.log("Modal closed")}},DetailedDroneModal:{category:"debug",props:{show:!0,drone:dr("Heavy Fighter"),lane:"lane2",effectiveStats:{attack:4,hull:4,shields:1,speed:3,power:11},onClose:()=>console.log("Modal closed")}}}[e]||null},nV=()=>({all:["DeploymentConfirmationModal","CardConfirmationModal","DroneAbilityConfirmationModal","ShipAbilityConfirmationModal","MoveConfirmationModal","InterceptionOpportunityModal","OpponentDecidingInterceptionModal","WinnerModal","WaitingForPlayerModal","GamePhaseModal","AICardPlayReportModal","AIDecisionLogModal","AIHandDebugModal","MandatoryActionModal","ConfirmationModal","OpponentDronesModal","ViewUpgradesModal","UpgradeSelectionModal","DestroyUpgradeModal","CardSelectionModal","CardViewerModal","ViewDeckModal","GameDebugModal","DetailedDroneModal"],confirmation:["DeploymentConfirmationModal","CardConfirmationModal","DroneAbilityConfirmationModal","ShipAbilityConfirmationModal","MoveConfirmationModal"],interception:["InterceptionOpportunityModal","OpponentDecidingInterceptionModal"],gamePhase:["WinnerModal","WaitingForPlayerModal","GamePhaseModal"],aiDebug:["AICardPlayReportModal","AIDecisionLogModal","AIHandDebugModal"],playerActions:["MandatoryActionModal","ConfirmationModal","OpponentDronesModal"],upgrades:["ViewUpgradesModal","UpgradeSelectionModal","DestroyUpgradeModal"],utility:["CardSelectionModal","CardViewerModal","ViewDeckModal"],debug:["GameDebugModal","DetailedDroneModal"]}),p_=({winner:e,localPlayerId:t,show:n,onClose:r})=>{const i=e===t;if(!n)return null;const s=()=>{r()},l=()=>{Ue.setState({appState:"menu"})};return d.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-sm flex items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center gap-12",children:[i?d.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"VICTORY"}):d.jsxs("div",{className:"relative w-full h-full flex items-center justify-center screen-flicker",children:[d.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center defeat-glow screen-distort z-10",style:{color:"#ff3232",textShadow:"0 0 30px rgba(255, 50, 50, 1), 0 0 60px rgba(255, 50, 50, 0.8), 0 0 90px rgba(255, 50, 50, 0.6)",filter:"drop-shadow(0 0 30px rgba(255, 50, 50, 0.6))"},children:"DEFEAT"}),d.jsx("div",{className:"absolute w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent scanline-shutdown",style:{boxShadow:"0 0 10px rgba(255, 50, 50, 0.8)"}}),d.jsx("div",{className:"absolute inset-0 bg-red-900/20 defeat-glow",style:{mixBlendMode:"multiply"}})]}),d.jsxs("div",{className:"flex gap-6 z-20",children:[d.jsx("button",{onClick:s,className:"btn-continue text-xl px-8 py-4",children:"View Board"}),d.jsx("button",{onClick:l,className:"btn-cancel text-xl px-8 py-4",children:"Exit to Menu"})]})]})})},mh=()=>{const{gameStateManager:e}=wi(),t=E.useMemo(()=>e?on.getInstance(e):null,[e]),[n,r]=E.useState(null);E.useEffect(()=>{if(!t)return;const h=()=>{r(t.getCacheStats())};h();const g=setInterval(h,5e3);return()=>clearInterval(g)},[t]);const i=E.useCallback((h,g)=>t?t.getEffectiveStats(h,g):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},[t]),s=E.useCallback(h=>t?t.getLaneData(h):{lane:h,localDrones:[],opponentDrones:[],hasGuardian:!1},[t]),l=E.useCallback((h,g=null)=>t?t.hasGuardianInLane(h,g):!1,[t]),u=E.useCallback(()=>t?t.getPlacedSectionsForEngine():{},[t]),p=E.useCallback((h,g=[])=>t?t.getEffectiveShipStats(h,g):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},[t]),f=E.useCallback(()=>{t&&t.clearCache()},[t]);return{gameDataService:t,getEffectiveStats:i,getEffectiveShipStats:p,getLaneData:s,hasGuardianInLane:l,getPlacedSections:u,clearCache:f,cacheStats:n,isReady:!!t}},rV=({droneId:e,timestamp:t,duration:n=2e3})=>{const[r,i]=E.useState(!0);return E.useEffect(()=>{const s=setTimeout(()=>{i(!1)},n);return()=>clearTimeout(s)},[t,n]),r?d.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:d.jsx("div",{className:"bg-red-600/90 rounded-lg px-4 py-2 shadow-2xl border-2 border-red-400 animate-pulse",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(zM,{className:"w-5 h-5 text-white"}),d.jsx("span",{className:"text-white font-bold text-lg tracking-wide drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]",children:"Intercepted!"})]})})}):null},u2=({value:e,isFlat:t,bgColor:n,textColor:r})=>d.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:d.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),aV=({onClick:e})=>d.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("circle",{cx:"12",cy:"12",r:"6"}),d.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Yf=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,isPotentialGuardian:u,onMouseEnter:p,onMouseLeave:f,lane:h,onAbilityClick:g,isActionTarget:y,droneRefs:x,mandatoryAction:S,localPlayerState:C,interceptedBadge:A,enableFloatAnimation:w=!1})=>{const{getEffectiveStats:P}=mh(),T=E.useMemo(()=>Ze.find(Me=>Me.name===e.name),[e.name]),N=P(e,h),{maxShields:_}=N,j=e.currentShields??_,k=T.abilities.filter(Me=>Me.type==="ACTIVE"),z=n?"border-cyan-400":"border-pink-500",F=n?"bg-cyan-900":"bg-pink-950",M=n?"text-cyan-100":"text-pink-100",R=n?"bg-cyan-900":"bg-pink-950",U=n?"text-cyan-400":"text-pink-500",W=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",Z=N.attack>N.baseAttack,Q=N.attack<N.baseAttack,I=Z?"text-green-400":Q?"text-red-400":"text-white",G=N.speed>N.baseSpeed,ie=N.speed<N.baseSpeed,le=G?"text-green-400":ie?"text-red-400":"text-white",$=e.isExhausted?"grayscale opacity-60":"",q=s?"animate-shake":"",V=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",ne=y?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",ye=S?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",Se=Me=>!(e.isExhausted&&Me.cost.exhausts!==!1||Me.cost.energy&&C.energy<Me.cost.energy),Ce=e.isTeleporting?"opacity-0 pointer-events-none":"";return d.jsxs("div",{ref:Me=>x.current[e.id]=Me,onClick:Me=>t&&t(Me,e,n),onMouseEnter:p,onMouseLeave:f,className:`relative transition-all duration-200 ${$} ${q} ${V} ${ne} ${ye} ${Ce} ${w?"drone-float":""}`,style:{width:"clamp(85px, 4.427vw, 115px)",height:"clamp(115px, 5.99vw, 156px)"},children:[d.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${z} cursor-pointer shadow-black overflow-hidden ${u?"guardian-glow":""}`,children:[d.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-black/10"}),d.jsxs("div",{className:"relative z-10 h-full",children:[d.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[d.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:_}).map((Me,qe)=>qe<j?d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:U,children:d.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},qe):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:W,children:d.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},qe))}),d.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:T.hull}).map((Me,qe)=>{const be=qe<e.hull,we=e.isExhausted?"bg-green-800":"bg-green-500";return d.jsx("div",{className:`h-2 w-2 rounded-sm ${be?we:"bg-gray-400"} border border-black/50`},qe)})})]}),d.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${F} flex items-center justify-center border-t ${z}`,children:d.jsx("span",{className:`font-orbitron text-[8px] uppercase ${M} tracking-wider w-full text-center`,children:e.name})})]})]}),d.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:d.jsx(u2,{value:N.attack,isFlat:!1,bgColor:R,textColor:I})}),d.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:d.jsx(u2,{value:N.speed,isFlat:!0,bgColor:R,textColor:le})}),n&&k.length>0&&Se(k[0])&&d.jsx(aV,{onClick:Me=>g&&g(Me,e,k[0])}),A&&A.droneId===e.id&&d.jsx(rV,{droneId:e.id,timestamp:A.timestamp})]})},h_=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:f,shipAbilityMode:h,droneRefs:g,mandatoryAction:y})=>{if(!t||!e)return null;const{attackDetails:x,interceptors:S}=e,{attacker:C,target:A,targetType:w,lane:P}=x;return d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),d.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500 max-w-4xl w-full",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:d.jsxs("div",{className:"bg-gray-900/95 p-8",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:[d.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center mb-2",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Interception!"}),d.jsxs("p",{className:"text-center text-cyan-300/60 uppercase text-sm tracking-widest mb-8",children:["Combat in ",P?.replace("lane","Lane ")||"Unknown Lane"]}),d.jsx("div",{className:"mb-6 py-8",children:d.jsxs("div",{className:"flex items-start justify-center gap-6",children:[d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsx("div",{className:"text-xs uppercase tracking-widest text-pink-400/60",children:"Attacker"}),d.jsx("div",{className:"transform scale-150 origin-top",children:d.jsx(Yf,{drone:C,isPlayer:!1,lane:P,droneRefs:g,mandatoryAction:y,localPlayerState:f})})]}),d.jsx("div",{className:"text-5xl font-light text-cyan-500/30 px-4 pt-16",children:"VS"}),d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsx("div",{className:"text-xs uppercase tracking-widest text-cyan-400/60",children:"Target"}),w==="drone"?d.jsx("div",{className:"transform scale-150 origin-top",children:d.jsx(Yf,{drone:A,isPlayer:!0,lane:P,droneRefs:g,mandatoryAction:y,localPlayerState:f})}):d.jsx("div",{className:"transform scale-[0.95] origin-top",style:{width:"400px"},children:d.jsx(go,{section:A.name,stats:f.shipSections[A.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:f,shipAbilityMode:h})})]})]})}),d.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent mb-4"}),d.jsx("h3",{className:"text-center text-2xl font-bold uppercase tracking-wider mb-1",style:{background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Choose Interceptor"}),d.jsx("p",{className:"text-center text-cyan-300/50 text-sm mb-4",children:"Select a drone to intercept the attack"}),d.jsx("div",{className:"flex flex-wrap justify-center gap-12 mb-6",children:S.map(T=>d.jsx("div",{className:"cursor-pointer transition-all hover:scale-110 hover:drop-shadow-[0_0_20px_rgba(0,255,136,0.4)]",children:d.jsx(Yf,{drone:T,isPlayer:!0,onClick:()=>n(T),lane:P,droneRefs:g,mandatoryAction:y,localPlayerState:f})},T.id))}),d.jsx("div",{className:"flex justify-center gap-6 pt-4",children:d.jsx("button",{onClick:r,className:"btn-cancel",children:"Decline"})}),d.jsx("div",{className:"h-px w-80 mx-auto mt-8 bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})]})},m_=({show:e,opponentName:t="Opponent"})=>e?d.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:d.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Opponent Deciding Interception"})}):null,g_=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),d.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:d.jsx("div",{className:"bg-gray-900/95 p-8 text-center",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:d.jsxs("div",{className:"space-y-8",children:[d.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Deploy Drone?"}),d.jsxs("div",{className:"flex items-center justify-center gap-8",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-5xl font-bold text-cyan-400 mb-2",children:i}),d.jsx("div",{className:"text-cyan-300/50 uppercase text-xs tracking-widest",children:"Deployment"})]}),d.jsx("div",{className:"text-4xl text-cyan-500/30 font-light",children:"|"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-5xl font-bold text-blue-400 mb-2",children:s}),d.jsx("div",{className:"text-blue-300/50 uppercase text-xs tracking-widest",children:"Energy"})]})]}),d.jsxs("div",{className:"flex justify-center gap-6 pt-4",children:[d.jsx("button",{onClick:n,className:"w-32 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Cancel"}),d.jsx("button",{onClick:r,className:"w-32 py-3 border-2 rounded uppercase text-sm tracking-wider font-semibold transition-all hover:scale-110 hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",style:{borderColor:"#00ff88",background:"linear-gradient(45deg, rgba(0, 255, 136, 0.2), rgba(0, 136, 255, 0.2))",color:"#00ff88",boxShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"Confirm"})]}),d.jsx("div",{className:"h-px w-80 mx-auto bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})})]})},y_=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal-container modal-container-md",children:[n&&d.jsx("button",{onClick:n,className:"modal-close",children:d.jsx(ln,{size:24})}),d.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),d.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),d.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[d.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),d.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},v_=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal-container modal-container-md",children:[n&&d.jsx("button",{onClick:n,className:"modal-close",children:d.jsx(ln,{size:24})}),d.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),d.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),d.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[d.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),d.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},x_=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,f=>f.toUpperCase());let p="";return l&&(p=l.name),d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal-container modal-container-md",children:[n&&d.jsx("button",{onClick:n,className:"modal-close",children:d.jsx(ln,{size:24})}),d.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),d.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${p}`:"","? This will cost ",i.cost.energy," energy."]}),d.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[d.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),d.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},b_=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal-container modal-container-md",children:[n&&d.jsx("button",{onClick:n,className:"modal-close",children:d.jsx(ln,{size:24})}),d.jsx("h2",{className:"modal-title",children:"Confirm Move"}),d.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),d.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[d.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),d.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},S_=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal-container modal-container-md",children:[r&&d.jsx("button",{onClick:r,className:"modal-close",children:d.jsx(ln,{size:24})}),d.jsx("h2",{className:"modal-title",children:s}),d.jsx("p",{className:"modal-text",children:l})]})})},C_=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&d.jsx("button",{onClick:e.onCancel,className:"modal-close",children:d.jsx(ln,{size:24})}),d.jsx("h2",{className:"modal-title",children:n}),d.jsx("p",{className:"modal-text",children:e.text}),d.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[d.jsx("button",{onClick:e.onCancel,className:"btn-cancel",children:"Cancel"}),d.jsx("button",{onClick:e.onConfirm,className:"btn-confirm",children:"Confirm"})]})]})})},Ps=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&d.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:d.jsx(ln,{size:24})}),d.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),d.jsx("p",{className:"text-center text-gray-400",children:t}),r]})}),A_=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return d.jsxs(Ps,{title:"AI Action: Card Played",text:"",onClose:t,children:[d.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[d.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",d.jsx("strong",{className:"text-purple-400",children:n.name}),r&&d.jsxs(d.Fragment,{children:[" on ",d.jsx("strong",{className:"text-cyan-400",children:r}),i&&d.jsxs(d.Fragment,{children:[" in ",d.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),d.jsx("div",{className:"transform scale-75",children:d.jsx(Ga,{card:n,isPlayable:!1})})]}),d.jsx("div",{className:"flex justify-center mt-6",children:d.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},E_=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,p=>p.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&d.jsx("button",{onClick:n,className:"modal-close",children:d.jsx(ln,{size:24})}),d.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),d.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),d.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:d.jsxs("table",{className:"w-full text-left text-sm",children:[d.jsx("thead",{className:"sticky top-0 bg-slate-800",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-2",children:"Type"}),d.jsx("th",{className:"p-2",children:"Instigator"}),d.jsx("th",{className:"p-2",children:"Target"}),d.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),d.jsx("th",{className:"p-2",children:"Score"}),d.jsx("th",{className:"p-2",children:"Chosen"})]})}),d.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>d.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[d.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),d.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),d.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),d.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),d.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),d.jsx("td",{className:"p-2 text-center",children:s.isChosen&&d.jsx("span",{className:"text-yellow-400",children:""})})]},l))})]})}),d.jsx("div",{className:"flex justify-center mt-6",children:d.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},w_=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&d.jsx("button",{onClick:r,className:"modal-close",children:d.jsx(ln,{size:24})}),d.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),d.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),d.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>d.jsx(Ga,{card:i,isPlayable:!1},i.instanceId)):d.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),d.jsx("div",{className:"flex justify-center mt-6",children:d.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),P_=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=E.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(y,x)=>{navigator.clipboard.writeText(JSON.stringify(y,null,2)).then(()=>K()).catch(S=>console.error("Failed to copy:",S))},p=y=>y===null?"null":y===void 0?"undefined":typeof y=="boolean"?y.toString():typeof y=="string"?`"${y}"`:typeof y=="number"?y.toString():Array.isArray(y)?y.length===0?"[]":`[${y.length} items]`:typeof y=="object"?Object.keys(y).length===0?"{}":`{${Object.keys(y).length} properties}`:String(y),f=(y,x,S="")=>d.jsxs("div",{className:`mb-6 ${S}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h3",{className:"text-lg font-bold text-white",children:x}),d.jsxs("button",{onClick:()=>u(y),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[d.jsx(fv,{size:12}),"Copy"]})]}),d.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-gray-800",children:[d.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),d.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),d.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),d.jsx("tbody",{children:Object.entries(y).map(([C,A],w)=>d.jsxs("tr",{className:w%2===0?"bg-gray-900":"bg-gray-800",children:[d.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:C}),d.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:p(A)}),d.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof A=="object"&&A!==null?Array.isArray(A)?"array":"object":typeof A})]},C))})]})})]}),h=()=>{const y={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return d.jsxs("div",{className:"p-4 space-y-6",children:[f(y,"Core Game Info"),f(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),f(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),f({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),f({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&f(l.passInfo,"Pass Information")]})},g=()=>{if(!r)return d.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const y=r.getEffectiveShipStats(l.player1,l.placedSections),x=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},C={};["lane1","lane2","lane3"].forEach(w=>{S[w]=l.player1.dronesOnBoard[w].map(P=>({drone:P.name,effectiveStats:r.getEffectiveStats(P,w)})),C[w]=l.player2.dronesOnBoard[w].map(P=>({drone:P.name,effectiveStats:r.getEffectiveStats(P,w)}))});const A=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return d.jsxs("div",{className:"p-4 space-y-6",children:[f(y,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),f(x,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),f(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),f(C,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),f(A,"GameDataService Cache Statistics")]})}catch(y){return d.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",y.message]})}};return d.jsx("div",{className:"modal-overlay",children:d.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[d.jsx("button",{onClick:t,className:"modal-close",children:d.jsx(ln,{size:24})}),d.jsx("h2",{className:"modal-title",children:"Game Debug View"}),d.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[d.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),d.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),d.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?h():g()}),d.jsx("div",{className:"flex justify-center mt-6",children:d.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},T_=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=s=>{switch(s){case"determineFirstPlayer":return"Waiting for Opponent";case"mandatoryDiscard":return"Opponent Discarding";case"optionalDiscard":return"Opponent Discarding Cards";case"allocateShields":return"Opponent Allocating Shields";case"mandatoryDroneRemoval":return"Opponent Removing Drones";case"deploymentComplete":return"Waiting for Opponent";default:return"Waiting for Opponent"}};return d.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-auto",children:d.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:i(t)})})},D_=({isOpen:e,onClose:t,drones:n=[]})=>{if(!e)return null;const r=[...n].sort((i,s)=>i.class-s.class);return d.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-pink-500 p-8 shadow-2xl shadow-pink-500/20 max-w-[1400px] max-h-[600px] w-[95vw] flex flex-col",onClick:i=>i.stopPropagation(),children:[d.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[d.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-pink-400",children:"Opponent's Selected Drones"}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:d.jsx(ln,{size:32})})]}),d.jsx("div",{className:"overflow-y-auto flex-grow pr-4",children:d.jsxs("div",{className:"mb-6",children:[d.jsxs("h3",{className:"text-xl font-orbitron text-cyan-400 mb-3",children:["Drones (",r.length,")"]}),r.length>0?d.jsx("div",{className:"w-full mx-auto",children:d.jsx("div",{className:"flex flex-nowrap gap-[10px] justify-center",children:r.map((i,s)=>d.jsx("div",{children:d.jsx(bi,{drone:i,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,appliedUpgrades:[],isViewOnly:!0})},`${i.name}-${s}`))})}):d.jsx("div",{className:"flex items-center justify-center py-20",children:d.jsx("p",{className:"text-gray-500 text-xl italic",children:"No drones selected yet"})})]})})]})})},N_=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return d.jsxs(Ps,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[d.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>d.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[d.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),d.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):d.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),d.jsx("div",{className:"flex justify-center mt-6",children:d.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},O_=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=E.useState(null);return d.jsxs(Ps,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[d.jsx("div",{className:"flex justify-center my-4",children:d.jsx(Ga,{card:r,isPlayable:!1})}),d.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>d.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[d.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),d.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),d.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[d.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),d.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"btn-confirm disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Upgrade"})]})]})},j_=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=E.useState(null);return d.jsxs(Ps,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[d.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(p=>{const f=s.appliedUpgrades[p.name]||[];return d.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[d.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",p.name]}),d.jsx("div",{className:"space-y-2",children:f.map(h=>d.jsx("div",{onClick:()=>u({droneName:p.name,instanceId:h.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===h.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:d.jsx("p",{className:"font-semibold text-white",children:h.name})},h.instanceId))})]},p.id)}):d.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),d.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[d.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),d.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"btn-confirm disabled:opacity-50 disabled:cursor-not-allowed",children:"Destroy Upgrade"})]})]})},iV=({card:e,isSelected:t,onClick:n})=>d.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:d.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[d.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[d.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),d.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:d.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),d.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),d.jsx("div",{className:"p-1",children:d.jsxs("div",{className:"relative h-24",children:[d.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),d.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&d.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:d.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:""})})]})}),d.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:d.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:d.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),d.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),__=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=E.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:p,filter:f}=r,h=S=>{s(C=>{const A=S.instanceId||`${S.id}-${S.name}`;return C.some(P=>(P.instanceId||`${P.id}-${P.name}`)===A)?C.filter(P=>(P.instanceId||`${P.id}-${P.name}`)!==A):C.length<u?[...C,S]:[...C.slice(0,-1),S]})},g=()=>{i.length===u&&(n(i),s([]))},y=()=>{s([]),t()},x=i.length===u;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:y,children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[d.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:d.jsx(ln,{size:24})}),d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:p==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),d.jsx("p",{className:"text-gray-300 text-lg",children:f?`Select ${u} ${f.type} card${u>1?"s":""} from ${l.length} found ${f.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),d.jsx("div",{className:"mt-2",children:d.jsxs("span",{className:`text-lg font-bold ${x?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto",children:d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,C)=>d.jsx(iV,{card:S,isSelected:i.some(A=>{const w=S.instanceId||`${S.id}-${S.name}`;return(A.instanceId||`${A.id}-${A.name}`)===w}),onClick:h},S.instanceId||`${S.id}-${C}`))})}),d.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[d.jsx("button",{onClick:y,className:"btn-cancel",children:"Cancel"}),d.jsx("button",{onClick:g,disabled:!x,className:"btn-confirm",children:"Confirm Selection"})]})]})})},uv=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[d.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:d.jsx(ln,{size:24})}),d.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?d.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:d.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>d.jsx("div",{className:"flex justify-center",children:d.jsx(Ga,{card:l,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1})},`${l.instanceId}-${u}`))})}):d.jsx("div",{className:"flex-grow flex items-center justify-center",children:d.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},k_=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[d.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:d.jsx(ln,{size:24})}),d.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),d.jsx("div",{className:"flex justify-center",children:d.jsx(bi,{drone:t,isSelectable:!1,deployedCount:0,isViewOnly:!0})})]})});function sV(){const[e,t]=E.useState(""),[n,r]=E.useState("all"),[i,s]=E.useState(null),[l,u]=E.useState(null),f=nV()[n].filter(S=>S.toLowerCase().includes(e.toLowerCase())),h=S=>{const C=c2(S);C&&(s(S),u(C.props))};E.useEffect(()=>{const S=C=>{C.key==="Escape"&&i&&(s(null),u(null))};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[i]);const g=()=>{s(null),u(null)},y=()=>{Ue.setState({appState:"menu"})},x=()=>{if(!i||!l)return null;const S={...l,onClose:g,onCancel:g,onConfirm:()=>{console.log(`${i}: Confirmed`),g()},onIntercept:w=>{console.log(`${i}: Intercept with`,w),g()},onDecline:()=>{console.log(`${i}: Declined`),g()},onComplete:()=>{console.log(`${i}: Completed`),g()},onSelect:w=>{console.log(`${i}: Selected`,w),g()}},A={WinnerModal:p_,InterceptionOpportunityModal:h_,OpponentDecidingInterceptionModal:m_,DeploymentConfirmationModal:g_,CardConfirmationModal:y_,DroneAbilityConfirmationModal:v_,ShipAbilityConfirmationModal:x_,MoveConfirmationModal:b_,MandatoryActionModal:S_,ConfirmationModal:C_,AICardPlayReportModal:A_,AIDecisionLogModal:E_,AIHandDebugModal:w_,GameDebugModal:P_,WaitingForPlayerModal:T_,OpponentDronesModal:D_,ViewUpgradesModal:N_,UpgradeSelectionModal:O_,DestroyUpgradeModal:j_,CardSelectionModal:__,CardViewerModal:uv,ViewDeckModal:Av,GamePhaseModal:Ps,DetailedDroneModal:k_}[i];return A?d.jsx(A,{...S}):(console.warn(`Modal component not found: ${i}`),null)};return d.jsxs("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(2, 6, 23, 1)",overflow:"auto",padding:"40px 20px"},children:[d.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",marginBottom:"30px"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[d.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 20px rgba(0, 255, 136, 0.4)"},children:"MODAL SHOWCASE"}),d.jsx("button",{onClick:y,className:"btn-cancel",style:{fontSize:"1rem"},children:"Close Showcase"})]}),d.jsx("p",{style:{color:"#cccccc",fontSize:"1rem",marginBottom:"30px"},children:"Preview all modal components with realistic mock data. Press ESC to close modal preview, Ctrl+M to toggle showcase."}),d.jsx("input",{type:"text",placeholder:"Search modals...",value:e,onChange:S=>t(S.target.value),style:{width:"100%",padding:"12px 20px",fontSize:"1rem",backgroundColor:"#1a1a1a",border:"2px solid #333",borderRadius:"8px",color:"#ffffff",outline:"none",transition:"border-color 0.3s"},onFocus:S=>S.target.style.borderColor="#00ff88",onBlur:S=>S.target.style.borderColor="#333"})]}),d.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",marginBottom:"30px"},children:d.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:Object.entries(tV).map(([S,{name:C,count:A}])=>d.jsxs("button",{onClick:()=>r(S),style:{padding:"10px 20px",fontSize:"0.9rem",fontWeight:n===S?"bold":"normal",backgroundColor:n===S?"#0088ff":"#2a2a2a",color:n===S?"#ffffff":"#cccccc",border:`2px solid ${n===S?"#00ff88":"#444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:w=>{n!==S&&(w.target.style.backgroundColor="#333",w.target.style.borderColor="#666")},onMouseOut:w=>{n!==S&&(w.target.style.backgroundColor="#2a2a2a",w.target.style.borderColor="#444")},children:[C," (",A,")"]},S))})}),d.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:f.length===0?d.jsx("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:d.jsxs("p",{style:{fontSize:"1.2rem"},children:['No modals found matching "',e,'"']})}):d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},children:f.map(S=>{const A=c2(S)?.category||"unknown";return d.jsxs("button",{onClick:()=>h(S),style:{padding:"20px",backgroundColor:"#2a2a2a",border:"2px solid #444",borderRadius:"8px",cursor:"pointer",textAlign:"left",transition:"all 0.3s ease",position:"relative"},onMouseOver:w=>{w.currentTarget.style.backgroundColor="#333",w.currentTarget.style.borderColor="#00ff88",w.currentTarget.style.transform="translateY(-4px)",w.currentTarget.style.boxShadow="0 8px 16px rgba(0, 255, 136, 0.2)"},onMouseOut:w=>{w.currentTarget.style.backgroundColor="#2a2a2a",w.currentTarget.style.borderColor="#444",w.currentTarget.style.transform="translateY(0)",w.currentTarget.style.boxShadow="none"},children:[d.jsx("div",{style:{fontSize:"0.75rem",color:"#888",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px"},children:A}),d.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#00ff88",marginBottom:"4px"},children:S.replace(/Modal$/,"")}),d.jsx("div",{style:{fontSize:"0.85rem",color:"#999"},children:"Click to preview"})]},S)})})}),x(),d.jsxs("div",{style:{maxWidth:"1400px",margin:"40px auto 0",padding:"20px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",fontSize:"0.9rem",color:"#888"},children:[d.jsx("div",{style:{marginBottom:"10px",fontWeight:"bold",color:"#00ff88"},children:"Keyboard Shortcuts:"}),d.jsxs("ul",{style:{margin:0,paddingLeft:"20px"},children:[d.jsxs("li",{style:{marginBottom:"5px"},children:[d.jsx("strong",{style:{color:"#ccc"},children:"ESC:"})," Close modal preview"]}),d.jsxs("li",{style:{marginBottom:"5px"},children:[d.jsx("strong",{style:{color:"#ccc"},children:"Ctrl+M:"})," Toggle Modal Showcase from anywhere"]})]}),d.jsx("div",{style:{marginTop:"15px",fontStyle:"italic"},children:"All modal interactions are logged to console. Buttons will close the preview instead of performing actual actions."})]})]})}function i0(e){return{...e,id:`test-drone-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1,statMods:[]}}function bb(e,t){const n=Sb(e);if(!n.valid)return console.error(" TEST MODE: Invalid configuration:",n.errors),alert(`Test configuration invalid:
${n.errors.join(`
`)}`),!1;try{const r=d2(e.player1,"Player 1"),i=d2(e.player2,"Player 2"),s=e.player1.shipSections||["bridge","powerCell","droneControlHub"],l=e.player2.shipSections||["bridge","powerCell","droneControlHub"],u={appState:"inGame",gameActive:!0,gameMode:"local",testMode:!0,turnPhase:"action",gameStage:"roundLoop",roundNumber:e.roundNumber||1,turn:e.roundNumber||1,currentPlayer:e.firstPlayer||"player1",firstPlayerOfRound:e.firstPlayer||"player1",firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:r,player2:i,placedSections:s,opponentPlacedSections:l,unplacedSections:[],shieldsToAllocate:0,winner:null,gameLog:[{type:"system",message:" Test game initialized",timestamp:Date.now(),round:e.roundNumber||1}],droneSelectionPool:[],droneSelectionTrio:[],commitments:{droneSelection:{player1:{drones:r.activeDronePool,timestamp:Date.now()},player2:{drones:i.activeDronePool,timestamp:Date.now()}}}};t.setState(u,"TEST_GAME_INITIALIZED");const p=Xf[0];return Tr.initialize(Xf,Ze,p,t.actionProcessor,t),K("TESTING"," TEST MODE: AIPhaseProcessor initialized with:",p.name),K("TESTING"," TEST MODE: Game state initialized successfully"),K("TESTING"," TEST MODE: Starting at action phase with first player:",e.firstPlayer),!0}catch(r){return console.error(" TEST MODE: Error initializing test game:",r),alert(`Failed to initialize test game: ${r.message}`),!1}}function d2(e,t){const n={bridge:JSON.parse(JSON.stringify(pu.bridge)),powerCell:JSON.parse(JSON.stringify(pu.powerCell)),droneControlHub:JSON.parse(JSON.stringify(pu.droneControlHub))};let r=e.deck||[];if(e.deckComposition&&Object.keys(e.deckComposition).length>0){const p=[];let f=0;Object.entries(e.deckComposition).forEach(([h,g])=>{for(let y=0;y<g;y++){const x=Ot.find(S=>S.id===h);x&&p.push(Ie.createCard(x,`card-${Date.now()}-${f++}`))}}),r=p.sort(()=>.5-Math.random()),K("TESTING",` Built deck from composition for ${t}: ${r.length} cards`)}const i=e.laneAssignments||{lane1:[],lane2:[],lane3:[]},s={lane1:i.lane1.map(p=>i0(p)),lane2:i.lane2.map(p=>i0(p)),lane3:i.lane3.map(p=>i0(p))};let l=[];if(e.handCards&&Array.isArray(e.handCards)&&e.handCards.length>0){let p=0;e.handCards.forEach(f=>{if(typeof f=="string"){const h=Ot.find(g=>g.id===f);h?l.push(Ie.createCard(h,`hand-${Date.now()}-${p++}`)):console.warn(` TEST MODE: Card ID "${f}" not found in card collection`)}else f&&f.id&&(f.instanceId?l.push(f):l.push({...f,instanceId:`hand-${Date.now()}-${p++}`}))}),K("TESTING",` Built hand from configuration for ${t}: ${l.length} cards`)}else if(r.length>0){const h=Ha({shipSections:n},e.shipSections||["bridge","powerCell","droneControlHub"]).totals.handLimit,g=Math.min(h,r.length);l=r.splice(0,g)}const u={name:t,shipSections:n,energy:e.energy||10,initialDeploymentBudget:e.initialDeploymentBudget||10,deploymentBudget:e.deploymentBudget||10,hand:l,deck:r,discardPile:[],activeDronePool:e.selectedDrones||[],dronesOnBoard:s,deployedDroneCounts:oV(i),appliedUpgrades:{}};return K("TESTING",` Created ${t} state:`,{energy:u.energy,handSize:u.hand.length,deckSize:u.deck.length,activeDronePoolSize:u.activeDronePool.length,dronesOnBoard:{lane1:u.dronesOnBoard.lane1.length,lane2:u.dronesOnBoard.lane2.length,lane3:u.dronesOnBoard.lane3.length}}),u}function oV(e){if(!e)return{};const t={};return Object.values(e).forEach(n=>{n.forEach(r=>{t[r.name]=(t[r.name]||0)+1})}),t}function Sb(e){const t=[];if(!e.player1)t.push("Player 1 configuration is required");else{const n=f2(e.player1,"Player 1");t.push(...n)}if(!e.player2)t.push("Player 2 configuration is required");else{const n=f2(e.player2,"Player 2");t.push(...n)}return e.firstPlayer&&!["player1","player2"].includes(e.firstPlayer)&&t.push('First player must be "player1" or "player2"'),e.roundNumber!==void 0&&(e.roundNumber<1||!Number.isInteger(e.roundNumber))&&t.push("Round number must be a positive integer"),{valid:t.length===0,errors:t}}function f2(e,t){const n=[];if(e.selectedDrones&&(Array.isArray(e.selectedDrones)?e.selectedDrones.length!==5&&n.push(`${t}: Must have exactly 5 selected drones (found ${e.selectedDrones.length})`):n.push(`${t}: selectedDrones must be an array`)),e.laneAssignments)if(!e.laneAssignments.lane1||!e.laneAssignments.lane2||!e.laneAssignments.lane3)n.push(`${t}: Lane assignments must include lane1, lane2, and lane3`);else{const r=e.laneAssignments.lane1.length+e.laneAssignments.lane2.length+e.laneAssignments.lane3.length;if(e.selectedDrones&&r>0){const i=new Set(e.selectedDrones.map(s=>s.name));Object.values(e.laneAssignments).forEach(s=>{s.forEach(l=>{i.has(l.name)||n.push(`${t}: Drone "${l.name}" in lane not in selected drone pool`)})})}}return e.energy!==void 0&&(e.energy<0||e.energy>100)&&n.push(`${t}: Energy must be between 0 and 100`),e.handCards&&!Array.isArray(e.handCards)&&n.push(`${t}: Hand cards must be an array`),e.deck&&!Array.isArray(e.deck)&&n.push(`${t}: Deck must be an array`),n}function Cb(){return{player1:{selectedDrones:[],laneAssignments:{lane1:[],lane2:[],lane3:[]},handCards:[],deck:[],deckComposition:{},energy:10,initialDeploymentBudget:10,deploymentBudget:10,shipSections:["bridge","powerCell","droneControlHub"]},player2:{selectedDrones:[],laneAssignments:{lane1:[],lane2:[],lane3:[]},handCards:[],deck:[],deckComposition:{},energy:10,initialDeploymentBudget:10,deploymentBudget:10,shipSections:["bridge","powerCell","droneControlHub"]},firstPlayer:"player1",roundNumber:1}}const lV={initializeTestGame:bb,validateTestConfig:Sb,createDefaultTestConfig:Cb},cV=Object.freeze(Object.defineProperty({__proto__:null,createDefaultTestConfig:Cb,default:lV,initializeTestGame:bb,validateTestConfig:Sb},Symbol.toStringTag,{value:"Module"})),p2=({isOpen:e,onClose:t,onConfirm:n,initialSelection:r=[],allDrones:i=[],title:s="Select Drones"})=>{const[l,u]=E.useState([]);if(E.useEffect(()=>{if(e){const A=r.map(w=>i.find(T=>T.name===w.name)||w);u(A)}},[e,r,i]),!e)return null;const p=5,f=l.length,h=f===p,g=h,y=A=>l.some(w=>w.name===A.name),x=A=>{y(A)?u(P=>P.filter(T=>T.name!==A.name)):f<p?u(P=>[...P,A]):console.log("Maximum 5 drones already selected")},S=()=>{g&&n(l)},C=[...i].sort((A,w)=>A.class-w.class);return d.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-cyan-500 p-8 shadow-2xl shadow-cyan-500/20 max-w-[1500px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:A=>A.stopPropagation(),children:[d.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[d.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:s}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:d.jsx(ln,{size:32})})]}),d.jsx("div",{className:"flex-shrink-0 mb-6",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:`text-4xl font-orbitron font-bold ${h?"text-green-400":"text-yellow-400"}`,children:[f,"/",p," Drones Selected"]}),!h&&d.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Click on drones to select or deselect them"}),h&&d.jsx("p",{className:"text-green-400 text-sm mt-2",children:" Ready to confirm selection"})]})}),d.jsx("div",{className:"overflow-y-auto flex-grow pr-4 mb-6",children:d.jsx("div",{className:"max-w-[1300px] mx-auto",children:d.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:C.map((A,w)=>{const P=y(A),T=f<p||P;return d.jsxs("div",{className:`relative transition-all duration-200 ${P?"ring-4 ring-cyan-400 ring-offset-2 ring-offset-gray-900 scale-105":T?"hover:ring-2 hover:ring-cyan-600 hover:scale-102":"opacity-40"}`,style:{filter:P?"drop-shadow(0 0 20px rgba(34, 211, 238, 0.6))":"none"},children:[d.jsx(bi,{drone:A,onClick:()=>x(A),isSelectable:T,isSelected:P,deployedCount:0,appliedUpgrades:[],isViewOnly:!1}),P&&d.jsxs("div",{className:"absolute top-2 right-2 bg-cyan-400 text-gray-900 font-bold text-sm px-2 py-1 rounded-full shadow-lg z-20 flex items-center gap-1",children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Selected"})]})]},`${A.name}-${w}`)})})})}),d.jsxs("div",{className:"flex justify-center gap-4 flex-shrink-0",children:[d.jsx("button",{onClick:t,className:"btn-cancel",style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:"Cancel"}),d.jsx("button",{onClick:S,disabled:!g,className:`btn-confirm ${g?"":"opacity-50 cursor-not-allowed"}`,style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:g?"Confirm Selection":`Select ${p-f} More`})]})]})})},If=({isOpen:e,onClose:t,onConfirm:n,initialSelection:r={},allCards:i=[],title:s="Select Cards",minCards:l=40,mandatory:u=!1})=>{const[p,f]=E.useState({}),[h,g]=E.useState({cost:{min:0,max:20},type:"all",search:""});E.useEffect(()=>{e&&f({...r})},[e,r]);const y=Object.values(p).reduce((T,N)=>T+N,0),x=y>=l,S=l===0?!0:x,C=E.useMemo(()=>i.filter(T=>!(T.cost<h.cost.min||T.cost>h.cost.max||h.type!=="all"&&T.type!==h.type||h.search&&!T.name.toLowerCase().includes(h.search.toLowerCase()))).sort((T,N)=>T.cost!==N.cost?T.cost-N.cost:T.name.localeCompare(N.name)),[i,h]);if(!e)return null;const A=T=>p[T]||0,w=(T,N)=>{if(N<=0){const _={...p};delete _[T],f(_)}else f(_=>({..._,[T]:N}))},P=()=>{S&&n(p)};return d.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:u?void 0:t,children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-cyan-500 p-8 shadow-2xl shadow-cyan-500/20 max-w-[1600px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:T=>T.stopPropagation(),children:[d.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[d.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:s}),!u&&d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:d.jsx(ln,{size:32})})]}),d.jsxs("div",{className:"flex-shrink-0 mb-4",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("div",{className:`text-3xl font-orbitron font-bold ${x?"text-green-400":l===0?"text-cyan-400":"text-yellow-400"}`,children:l===0?`${y} Cards Selected`:`${y} / ${l}+ Cards Selected`}),!x&&l>0&&d.jsxs("p",{className:"text-gray-400 text-sm",children:["Minimum ",l," cards required"]}),l===0&&d.jsx("p",{className:"text-gray-400 text-sm",children:"Select any number of cards"}),x&&l>0&&d.jsx("p",{className:"text-green-400 text-sm",children:" Ready to confirm selection"})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[d.jsx("input",{type:"text",placeholder:"Search cards...",value:h.search,onChange:T=>g(N=>({...N,search:T.target.value})),className:"px-3 py-2 bg-gray-800 border border-gray-600 rounded text-white"}),d.jsxs("select",{value:h.type,onChange:T=>g(N=>({...N,type:T.target.value})),className:"px-3 py-2 bg-gray-800 border border-gray-600 rounded text-white",children:[d.jsx("option",{value:"all",children:"All Types"}),d.jsx("option",{value:"Action",children:"Action Cards"}),d.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),d.jsxs("div",{className:"col-span-2",children:[d.jsxs("label",{className:"text-gray-400 text-sm mb-1 block",children:["Cost Range: ",h.cost.min," - ",h.cost.max]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"range",min:0,max:20,value:h.cost.min,onChange:T=>g(N=>({...N,cost:{...N.cost,min:Math.min(parseInt(T.target.value),N.cost.max)}})),className:"flex-1"}),d.jsx("input",{type:"range",min:0,max:20,value:h.cost.max,onChange:T=>g(N=>({...N,cost:{...N.cost,max:Math.max(parseInt(T.target.value),N.cost.min)}})),className:"flex-1"})]})]})]})]}),d.jsx("div",{className:"overflow-y-auto flex-grow pr-4 mb-6",children:d.jsx("div",{className:"max-w-[1400px] mx-auto",children:d.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:C.map((T,N)=>{const _=A(T.id),j=T.maxInDeck||3;return d.jsxs("div",{className:"relative flex flex-col items-center",children:[d.jsx("div",{className:`transition-all duration-200 ${_>0?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-gray-900":"hover:ring-2 hover:ring-cyan-600"}`,style:{filter:_>0?"drop-shadow(0 0 10px rgba(34, 211, 238, 0.4))":"none"},children:d.jsx(Ga,{card:T,onClick:()=>{},isPlayable:!0,isSelected:_>0,isMandatoryTarget:!1,scale:.7})}),d.jsx("div",{className:"mt-2 flex items-center gap-2 bg-gray-800 rounded px-3 py-1",children:Array.from({length:j+1}).map((k,z)=>d.jsx("button",{onClick:()=>w(T.id,z),className:`px-3 py-1 rounded text-sm font-bold transition-all ${_===z?"bg-cyan-500 text-white":"bg-gray-700 text-gray-300 hover:bg-cyan-600 hover:text-white"}`,children:z},z))})]},`${T.id}-${N}`)})})})}),d.jsxs("div",{className:"flex justify-center gap-4 flex-shrink-0",children:[!u&&d.jsx("button",{onClick:t,className:"btn-cancel",style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:"Cancel"}),d.jsx("button",{onClick:P,disabled:!S,className:`btn-confirm ${S?"":"opacity-50 cursor-not-allowed"}`,style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:S?"Confirm Selection":l>0?`Add ${l-y} More Cards`:"Confirm Selection"})]})]})})};function uV(){const{gameStateManager:e}=wi(),[t,n]=E.useState(Cb()),[r,i]=E.useState(null),[s,l]=E.useState(null),[u,p]=E.useState(null),[f,h]=E.useState(null),g=()=>{e.setState({appState:"menu"})},y=()=>{bb(t,e)||console.error("Failed to initialize test game")},x=(M,R,U)=>{n(W=>({...W,[M]:{...W[M],[R]:U}}))},S=(M,R,U)=>{const W=t[M].selectedDrones.find(G=>G.name===R);if(!W)return;const Z={...W,id:`${M}-${R}-${U}-${Date.now()}-${Math.random()}`,currentHealth:W.health,currentShields:0,currentMaxShields:W.maxShields||0},Q=t[M].laneAssignments,I={...Q,[U]:[...Q[U],Z]};x(M,"laneAssignments",I)},C=(M,R,U)=>{const W=t[M].laneAssignments,Z=W[U],Q=Z.map(ie=>ie.name).lastIndexOf(R);if(Q===-1)return;const I=[...Z.slice(0,Q),...Z.slice(Q+1)],G={...W,[U]:I};x(M,"laneAssignments",G)},A=M=>{i(M)},w=(M,R)=>{const U=R.map(W=>({...W,id:`${M}-${W.name}-${Date.now()}-${Math.random()}`,currentHealth:W.health,currentShields:0,currentMaxShields:W.maxShields||0}));x(M,"selectedDrones",U),i(null)},P=M=>{l(M)},T=(M,R)=>{x(M,"deckComposition",R),l(null)},N=M=>{p(M)},_=(M,R)=>{const U=[];Object.entries(R).forEach(([W,Z])=>{for(let Q=0;Q<Z;Q++)U.push(W)}),x(M,"handCards",U),p(null)},j=M=>{x(M,"handCards",[])},k=M=>{h(M)},z=(M,R)=>{try{const U=R.split("|"),W={},Z=[];for(const Q of U){const[I,...G]=Q.split(":"),ie=G.join(":");if(I==="cards"){const le=ie.split(",");for(const $ of le){const[q,V]=$.split(":"),ne=parseInt(V,10);if(!q||isNaN(ne)){alert("Invalid card format in deck code.");return}if(!Ot.find(Se=>Se.id===q)){alert(`Card ${q} not found.`);return}W[q]=ne}}else if(I==="drones"){const le=ie.split(",");for(const $ of le){const q=$.split(":"),V=q.pop(),ne=q.join(":"),ye=parseInt(V,10);if(!ne||isNaN(ye)||ye<=0)continue;const Se=Ze.find(Ce=>Ce.name===ne);Se&&Z.push(Se)}}}if(x(M,"deckComposition",W),Z.length>0){const Q=Z.slice(0,5);w(M,Q)}K("TESTING",` Imported deck for ${M}: ${Object.values(W).reduce((Q,I)=>Q+I,0)} cards, ${Z.length} drones`),alert(`Deck imported successfully!
${Object.values(W).reduce((Q,I)=>Q+I,0)} cards${Z.length>0?` and ${Math.min(Z.length,5)} drones`:""}`)}catch(U){console.error("Error importing deck:",U),alert("Failed to parse deck code. Please check the format.")}},F=M=>{const U=t[M==="player1"?"player2":"player1"],W=U.selectedDrones.map(G=>({...G,id:`${M}-${G.name}-${Date.now()}-${Math.random()}`})),Z=G=>G.map(ie=>W.find($=>$.name===ie.name)||ie),Q={lane1:Z(U.laneAssignments.lane1),lane2:Z(U.laneAssignments.lane2),lane3:Z(U.laneAssignments.lane3)},I={...U.deckComposition};x(M,"selectedDrones",W),x(M,"laneAssignments",Q),x(M,"deckComposition",I)};return d.jsxs("div",{className:"body-font",style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",minHeight:"100vh",color:"#ffffff",padding:"20px",boxSizing:"border-box",overflow:"auto"},children:[d.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[d.jsx("h1",{className:"heading-font",style:{fontSize:"2.5rem",color:"#ffb74d",marginBottom:"0.5rem"},children:" TESTING MODE"}),d.jsx("p",{style:{color:"#aaaaaa",fontSize:"1rem"},children:"Configure game scenario - Start directly at action phase"})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[d.jsx(h2,{player:"player1",playerLabel:"Player 1",config:t.player1,updateConfig:(M,R)=>x("player1",M,R),addDroneInstanceToLane:(M,R)=>S("player1",M,R),removeDroneInstanceFromLane:(M,R)=>C("player1",M,R),onOpenDroneSelection:()=>A("player1"),onOpenCardSelection:()=>P("player1"),onOpenHandCardSelection:()=>N("player1"),onClearHandCards:()=>j("player1"),onOpenImportDeck:()=>k("player1"),onCopyFromOtherPlayer:()=>F("player1")}),d.jsx(h2,{player:"player2",playerLabel:"Player 2",config:t.player2,updateConfig:(M,R)=>x("player2",M,R),addDroneInstanceToLane:(M,R)=>S("player2",M,R),removeDroneInstanceFromLane:(M,R)=>C("player2",M,R),onOpenDroneSelection:()=>A("player2"),onOpenCardSelection:()=>P("player2"),onOpenHandCardSelection:()=>N("player2"),onClearHandCards:()=>j("player2"),onOpenImportDeck:()=>k("player2"),onCopyFromOtherPlayer:()=>F("player2")})]}),d.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"1.5rem",borderRadius:"8px",marginBottom:"2rem"},children:[d.jsx("h3",{className:"heading-font",style:{fontSize:"1.2rem",marginBottom:"1rem"},children:"Global Settings"}),d.jsxs("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:[d.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[d.jsx("span",{children:"First Player:"}),d.jsxs("select",{value:t.firstPlayer,onChange:M=>n(R=>({...R,firstPlayer:M.target.value})),style:{padding:"8px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"},children:[d.jsx("option",{value:"player1",children:"Player 1"}),d.jsx("option",{value:"player2",children:"Player 2"})]})]}),d.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[d.jsx("span",{children:"Round Number:"}),d.jsx("input",{type:"number",min:"1",max:"99",value:t.roundNumber,onChange:M=>n(R=>({...R,roundNumber:parseInt(M.target.value)||1})),style:{padding:"8px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",width:"100px"}})]})]})]}),d.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[d.jsx("button",{onClick:g,className:"btn-cancel",children:"BACK TO MENU"}),d.jsx("button",{onClick:y,className:"btn-confirm",children:"START TEST GAME"})]}),d.jsx(p2,{isOpen:r==="player1",onClose:()=>i(null),onConfirm:M=>w("player1",M),initialSelection:t.player1.selectedDrones,allDrones:Ze,title:"Select Drones for Player 1"}),d.jsx(p2,{isOpen:r==="player2",onClose:()=>i(null),onConfirm:M=>w("player2",M),initialSelection:t.player2.selectedDrones,allDrones:Ze,title:"Select Drones for Player 2"}),d.jsx(If,{isOpen:s==="player1",onClose:()=>l(null),onConfirm:M=>T("player1",M),initialSelection:t.player1.deckComposition,allCards:Ot,title:"Select Cards for Player 1"}),d.jsx(If,{isOpen:s==="player2",onClose:()=>l(null),onConfirm:M=>T("player2",M),initialSelection:t.player2.deckComposition,allCards:Ot,title:"Select Cards for Player 2"}),d.jsx(If,{isOpen:u==="player1",onClose:()=>p(null),onConfirm:M=>_("player1",M),initialSelection:{},allCards:Ot,title:"Select Starting Hand for Player 1",minCards:0}),d.jsx(If,{isOpen:u==="player2",onClose:()=>p(null),onConfirm:M=>_("player2",M),initialSelection:{},allCards:Ot,title:"Select Starting Hand for Player 2",minCards:0}),f&&d.jsx(fV,{isOpen:!0,onClose:()=>h(null),onImport:M=>{z(f,M),h(null)},playerLabel:f==="player1"?"Player 1":"Player 2"})]})}function h2({player:e,playerLabel:t,config:n,updateConfig:r,addDroneInstanceToLane:i,removeDroneInstanceFromLane:s,onOpenDroneSelection:l,onOpenCardSelection:u,onOpenHandCardSelection:p,onClearHandCards:f,onOpenImportDeck:h,onCopyFromOtherPlayer:g}){const y=e==="player1"?"Player 2":"Player 1",x=Object.values(n.deckComposition||{}).reduce((C,A)=>C+A,0),S=(n.handCards||[]).length;return d.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"1.5rem",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("h2",{className:"heading-font",style:{fontSize:"1.5rem",color:"#6dd5fa",margin:0},children:t}),d.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.jsx("button",{onClick:h,className:"btn-utility",style:{padding:"6px 12px",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"4px"},children:" Import Deck"}),d.jsxs("button",{onClick:g,className:"btn-utility",style:{padding:"6px 12px",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"4px"},children:[" Copy from ",y]})]})]}),d.jsxs("div",{children:[d.jsxs("h3",{style:{fontSize:"1rem",margin:0,marginBottom:"0.5rem",color:"#aaa"},children:["Deck (",x," cards)"]}),d.jsxs("button",{onClick:u,className:"btn-confirm",style:{width:"100%",padding:"12px",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[d.jsx("span",{children:""}),d.jsxs("span",{children:["SELECT CARDS (",x," total, ",Object.keys(n.deckComposition||{}).length," unique)"]})]})]}),d.jsxs("div",{children:[d.jsxs("h3",{style:{fontSize:"1rem",margin:0,marginBottom:"0.5rem",color:"#aaa"},children:["Starting Hand (",S," cards)"]}),d.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d.jsxs("button",{onClick:p,className:"btn-confirm",style:{flex:1,padding:"12px",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[d.jsx("span",{children:""}),d.jsxs("span",{children:["SELECT HAND (",S," cards)"]})]}),S>0&&d.jsx("button",{onClick:f,className:"btn-cancel",style:{padding:"12px",fontSize:"0.9rem"},children:"Clear"})]})]}),d.jsxs("div",{children:[d.jsxs("h3",{style:{fontSize:"1rem",margin:0,marginBottom:"0.5rem",color:"#aaa"},children:["Drone Pool (",n.selectedDrones.length,"/5)"]}),d.jsxs("button",{onClick:l,className:"btn-confirm",style:{width:"100%",padding:"12px",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[d.jsx("span",{children:""}),d.jsxs("span",{children:["SELECT DRONES (",n.selectedDrones.length,"/5)"]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.5rem",color:"#aaa"},children:"Lane Assignments"}),d.jsx(dV,{selectedDrones:n.selectedDrones,laneAssignments:n.laneAssignments,addDroneInstanceToLane:i,removeDroneInstanceFromLane:s})]}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.5rem",color:"#aaa"},children:"Resources"}),d.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[d.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.3rem",flex:1},children:[d.jsx("span",{style:{fontSize:"0.9rem"},children:"Energy:"}),d.jsx("input",{type:"number",min:"0",max:"50",value:n.energy,onChange:C=>r("energy",parseInt(C.target.value)||0),style:{padding:"6px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}})]}),d.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.3rem",flex:1},children:[d.jsx("span",{style:{fontSize:"0.9rem"},children:"Deployment Budget:"}),d.jsx("input",{type:"number",min:"0",max:"50",value:n.deploymentBudget,onChange:C=>r("deploymentBudget",parseInt(C.target.value)||0),style:{padding:"6px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}})]})]})]})]})}function dV({selectedDrones:e,laneAssignments:t,addDroneInstanceToLane:n,removeDroneInstanceFromLane:r}){const i=(l,u)=>t[u].filter(p=>p.name===l).length,s={lane1:t.lane1.length,lane2:t.lane2.length,lane3:t.lane3.length};return e.length===0?d.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:"0.8rem",padding:"1rem",fontStyle:"italic",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"4px"},children:"Select drones first to assign them to lanes"}):d.jsx("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"4px",padding:"0.5rem",overflow:"auto"},children:d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(140px, 1fr) repeat(3, minmax(100px, 1fr))",gap:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[d.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"left"},children:"Drone Name"}),d.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"center"},children:"Lane 1"}),d.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"center"},children:"Lane 2 (Center)"}),d.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"center"},children:"Lane 3"}),e.map((l,u)=>{const f=u%2===0?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.03)";return d.jsxs(dv.Fragment,{children:[d.jsx("div",{style:{padding:"6px 8px",backgroundColor:f,fontSize:"0.8rem",display:"flex",alignItems:"center"},children:l.name}),d.jsxs("div",{style:{padding:"6px 8px",backgroundColor:f,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[d.jsx("button",{onClick:()=>r(l.name,"lane1"),disabled:i(l.name,"lane1")===0,className:"btn-cancel",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px",opacity:i(l.name,"lane1")===0?.3:1,cursor:i(l.name,"lane1")===0?"not-allowed":"pointer"},children:""}),d.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",color:i(l.name,"lane1")>0?"#6dd5fa":"#666"},children:i(l.name,"lane1")}),d.jsx("button",{onClick:()=>n(l.name,"lane1"),className:"btn-confirm",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px"},children:"+"})]},`${l.id}-lane1`),d.jsxs("div",{style:{padding:"6px 8px",backgroundColor:f,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[d.jsx("button",{onClick:()=>r(l.name,"lane2"),disabled:i(l.name,"lane2")===0,className:"btn-cancel",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px",opacity:i(l.name,"lane2")===0?.3:1,cursor:i(l.name,"lane2")===0?"not-allowed":"pointer"},children:""}),d.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",color:i(l.name,"lane2")>0?"#6dd5fa":"#666"},children:i(l.name,"lane2")}),d.jsx("button",{onClick:()=>n(l.name,"lane2"),className:"btn-confirm",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px"},children:"+"})]},`${l.id}-lane2`),d.jsxs("div",{style:{padding:"6px 8px",backgroundColor:f,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[d.jsx("button",{onClick:()=>r(l.name,"lane3"),disabled:i(l.name,"lane3")===0,className:"btn-cancel",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px",opacity:i(l.name,"lane3")===0?.3:1,cursor:i(l.name,"lane3")===0?"not-allowed":"pointer"},children:""}),d.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",color:i(l.name,"lane3")>0?"#6dd5fa":"#666"},children:i(l.name,"lane3")}),d.jsx("button",{onClick:()=>n(l.name,"lane3"),className:"btn-confirm",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px"},children:"+"})]},`${l.id}-lane3`)]},l.id)}),d.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.75rem",color:"#aaa",textAlign:"left",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:"Total:"}),d.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.85rem",color:s.lane1>0?"#6dd5fa":"#666",textAlign:"center",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:s.lane1}),d.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.85rem",color:s.lane2>0?"#6dd5fa":"#666",textAlign:"center",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:s.lane2}),d.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.85rem",color:s.lane3>0?"#6dd5fa":"#666",textAlign:"center",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:s.lane3})]})})}function fV({isOpen:e,onClose:t,onImport:n,playerLabel:r}){const[i,s]=E.useState("");if(!e)return null;const l=()=>{i.trim()?(n(i),s("")):alert("Please enter a deck code")};return d.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:d.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:u=>u.stopPropagation(),children:[d.jsxs("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-4",children:["Import Deck for ",r]}),d.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below. The deck will be imported with both cards and drones (if included)."}),d.jsx("textarea",{value:i,onChange:u=>s(u.target.value),className:"w-full h-32 p-3 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono text-sm",placeholder:"cards:CARD001:4,CARD002:2|drones:Scout Drone:1,Heavy Fighter:1"}),d.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[d.jsx("button",{onClick:t,className:"btn-cancel",children:"Cancel"}),d.jsx("button",{onClick:l,className:"btn-confirm",children:"Import Deck"})]})]})})}function pV(){const[e,t]=E.useState({}),[n,r]=E.useState({}),[i,s]=E.useState({}),[l,u]=E.useState(!1);E.useEffect(()=>{try{const S=localStorage.getItem("customDeck"),C=localStorage.getItem("customDrones"),A=localStorage.getItem("customShipComponents");S&&t(JSON.parse(S)),C&&r(JSON.parse(C)),A&&s(JSON.parse(A))}catch(S){console.error("Error loading saved deck:",S)}},[]);const p=(S,C)=>{t(A=>({...A,[S]:C}))},f=(S,C)=>{r(A=>({...A,[S]:C}))},h=(S,C)=>{if(S===null&&C===null){s({});return}s(A=>({...A,[S]:C}))},g=()=>{try{localStorage.setItem("customDeck",JSON.stringify(e)),localStorage.setItem("customDrones",JSON.stringify(n)),localStorage.setItem("customShipComponents",JSON.stringify(i)),u(!0),setTimeout(()=>{u(!1)},3e3),console.log(" Deck saved successfully to localStorage")}catch(S){console.error(" Error saving deck:",S)}},y=S=>{try{const C={},A={},w={},P=S.split("|");for(const T of P){const[N,..._]=T.split(":"),j=_.join(":");if(N==="cards"){const k=j.split(",");for(const z of k){const[F,M]=z.split(":"),R=parseInt(M,10);if(!F||isNaN(R))return{success:!1,message:"Invalid card format in deck code."};if(!Ot.find(W=>W.id===F))return{success:!1,message:`Card ${F} not found.`};C[F]=R}}else if(N==="drones"){const k=j.split(",");for(const z of k){const F=z.split(":"),M=F.pop(),R=F.join(":"),U=parseInt(M,10);if(!R||isNaN(U))return{success:!1,message:"Invalid drone format in deck code."};const W=Ze.find(Z=>Z.name===R);if(!W)return{success:!1,message:`Drone ${R} not found.`};if(W.selectable===!1)return{success:!1,message:`Drone ${R} cannot be imported (non-selectable token).`};A[R]=U}}else if(N==="ship"){const k=j.split(",");for(const z of k){const[F,M]=z.split(":");if(!F||!M||!["l","m","r"].includes(M))return{success:!1,message:"Invalid ship component format in deck code."};w[F]=M}}}return t(C),r(A),s(w),{success:!0}}catch(C){return console.error("Error importing deck:",C),{success:!1,message:"Failed to parse deck code."}}},x=()=>{Ue.setState({appState:"menu"})};return d.jsxs(d.Fragment,{children:[l&&d.jsx("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#10b981",color:"white",padding:"16px 32px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",zIndex:9999,fontFamily:"Orbitron, sans-serif",fontSize:"16px",fontWeight:"bold"},children:" Deck Saved Successfully!"}),d.jsx(f_,{selectedDrones:n,fullCardCollection:Ot,deck:e,onDeckChange:p,onDronesChange:f,selectedShipComponents:i,onShipComponentsChange:h,onConfirmDeck:g,onImportDeck:y,onBack:x})]})}const hV=()=>{const e=E.useRef(null);return E.useEffect(()=>{const t=e.current,n=t.getContext("2d");let r;const i=Array.from({length:500},()=>{const f=Math.random();let h;return f<.9?h="rgba(255, 255, 255, ":f<.94?h="rgba(100, 150, 255, ":f<.98?h="rgba(255, 200, 100, ":h="rgba(255, 100, 100, ",{x:0,y:0,radius:Math.random()*1.5+.5,opacity:Math.random()*.5+.3,twinkleSpeed:.005+Math.random()*.01,twinklePhase:Math.random()*Math.PI*2,color:h}}),s=["rgba(147, 51, 234, ","rgba(59, 130, 246, ","rgba(236, 72, 153, ","rgba(16, 185, 129, ","rgba(6, 182, 212, ","rgba(139, 92, 246, ","rgba(34, 211, 238, "],l=Array.from({length:4},()=>({x:0,y:0,radius:180+Math.random()*150,color:s[Math.floor(Math.random()*s.length)],pulsePhase:Math.random()*Math.PI*2,pulseSpeed:.004+Math.random()*.003})),u=()=>{t.width=window.innerWidth,t.height=window.innerHeight,i.forEach(f=>{f.x=Math.random()*t.width,f.y=Math.random()*(t.height*.75)}),l.forEach(f=>{f.x=Math.random()*t.width,f.y=Math.random()*(t.height*.75)})};u(),window.addEventListener("resize",u);const p=()=>{n.fillStyle="#0a0a1a",n.fillRect(0,0,t.width,t.height),l.forEach(f=>{f.pulsePhase+=f.pulseSpeed;const h=.08+Math.sin(f.pulsePhase)*.04;for(let g=0;g<3;g++){const y=Math.sin(f.pulsePhase*.5+g)*30,x=Math.cos(f.pulsePhase*.3+g)*30,S=h*(.4+g*.3),C=n.createRadialGradient(f.x+y,f.y+x,0,f.x+y,f.y+x,f.radius*(.7+g*.15));C.addColorStop(0,f.color+S+")"),C.addColorStop(.3,f.color+S*.6+")"),C.addColorStop(.7,f.color+S*.2+")"),C.addColorStop(1,f.color+"0)"),n.fillStyle=C,n.fillRect(0,0,t.width,t.height)}}),i.forEach(f=>{f.twinklePhase+=f.twinkleSpeed;const h=.3+Math.sin(f.twinklePhase)*.7;n.beginPath(),n.arc(f.x,f.y,f.radius,0,Math.PI*2),n.fillStyle=f.color+f.opacity*h+")",n.fill(),f.radius>1&&(n.beginPath(),n.arc(f.x,f.y,f.radius*2,0,Math.PI*2),n.fillStyle=f.color+f.opacity*h*.1+")",n.fill())}),r=requestAnimationFrame(p)};return p(),()=>{window.removeEventListener("resize",u),cancelAnimationFrame(r)}},[]),d.jsx("canvas",{ref:e,className:"fixed inset-0 -z-10",style:{background:"#0a0a1a"}})},Ia=({icon:e,value:t,max:n,iconColor:r,isPlayer:i})=>{const s=i?"from-cyan-400/30 via-blue-400/30 to-blue-500/30":"from-pink-400/30 via-pink-500/30 to-pink-600/30";return d.jsx("div",{className:`relative p-[1px] bg-gradient-to-br ${s}`,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:d.jsxs("div",{className:"bg-gradient-to-br from-gray-900/95 to-gray-800/95 px-3 py-1 flex items-center gap-2",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[d.jsx(e,{size:18,className:r}),d.jsxs("span",{className:"font-bold text-base text-white whitespace-nowrap",children:[t,n!==void 0&&d.jsxs("span",{className:"hidden xl:inline",children:[" / ",n]})]})]})})};function mV({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:p,opponentShieldsToAllocate:f,shieldsToRemove:h,shieldsToAdd:g,reallocationPhase:y,totalLocalPlayerDrones:x,totalOpponentPlayerDrones:S,getLocalPlayerId:C,getOpponentPlayerId:A,isMyTurn:w,currentPlayer:P,isMultiplayer:T,handlePlayerPass:N,handleExitGame:_,handleResetShields:j,handleConfirmShields:k,handleCancelReallocation:z,handleResetReallocation:F,handleContinueToAddPhase:M,handleConfirmReallocation:R,handleRoundStartDraw:U,optionalDiscardCount:W,mandatoryAction:Z,multiSelectState:Q,AI_HAND_DEBUG_MODE:I,setShowAiHandModal:G,onShowDebugModal:ie,onShowOpponentDrones:le,onShowGlossary:$,testMode:q}){const[V,ne]=E.useState(!1),ye=E.useRef(null);return E.useEffect(()=>{const Se=Ce=>{ye.current&&!ye.current.contains(Ce.target)&&ne(!1)};return document.addEventListener("mousedown",Se),()=>{document.removeEventListener("mousedown",Se)}},[]),d.jsxs("header",{className:"w-full flex justify-between items-start mb-2 flex-shrink-0 px-5 pt-2",children:[q&&d.jsx("div",{className:"body-font",style:{position:"absolute",top:"10px",right:"10px",padding:"8px 16px",backgroundColor:"rgba(255, 165, 0, 0.2)",border:"2px solid #ff9800",borderRadius:"8px",color:"#ffb74d",fontWeight:"bold",fontSize:"0.9rem",zIndex:1e3,boxShadow:"0 0 20px rgba(255, 152, 0, 0.4)",backdropFilter:"blur(4px)"},children:" TESTING MODE"}),d.jsxs("div",{className:"flex flex-col gap-1.5",children:[d.jsxs("h2",{className:"text-base font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Opponent",(i==="deployment"||i==="action")&&u===A()&&d.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&d.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ia,{icon:Ff,value:t.energy,max:r.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!1}),d.jsx("div",{onClick:()=>I&&setTimeout(()=>G(!0),100),className:I?"cursor-pointer":"",children:d.jsx(Ia,{icon:DM,value:t.hand.length,max:r.totals.handLimit,iconColor:"text-gray-400",isPlayer:!1})}),i==="deployment"&&d.jsx(Ia,{icon:s0,value:s===1?t.initialDeploymentBudget:t.deploymentBudget,iconColor:"text-purple-400",isPlayer:!1}),d.jsx("div",{onClick:()=>setTimeout(()=>le(),100),className:"cursor-pointer hover:scale-105 transition-transform",children:d.jsx(Ia,{icon:_C,value:S,max:r.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!1})})]})]}),d.jsxs("div",{className:"text-center flex flex-col items-center gap-2",children:[d.jsxs("h2",{className:"text-base font-bold uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #6b7280, #9ca3af)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[TR(i),i==="allocateShields"&&d.jsxs("span",{className:"text-base font-semibold text-cyan-300 ml-2",children:["(",p," shields to assign)"]}),y==="removing"&&d.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",h," shields to remove)"]}),y==="adding"&&d.jsxs("span",{className:"text-base font-semibold text-green-300 ml-2",children:["(",g," shields to add)"]}),i==="mandatoryDiscard"&&Z?.type==="discard"&&d.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",Z.count," ",Z.count===1?"card":"cards"," to discard)"]}),i==="optionalDiscard"&&d.jsxs("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:["(",n.totals.discardLimit-W," ",n.totals.discardLimit-W===1?"card":"cards"," to discard)"]})]}),d.jsx("div",{className:"flex items-center gap-3",children:i==="deployment"||i==="action"||y?d.jsxs(d.Fragment,{children:[w()?d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Your Turn"})}):d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest phase-announcement-shine animate-pulse",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6, #ec4899)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(236, 72, 153, 0.5), 0 0 60px rgba(244, 114, 182, 0.3)",filter:"drop-shadow(0 0 20px rgba(236, 72, 153, 0.4))",animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:T()?"Opponent's Turn":"AI Thinking"})}),w()&&!Z&&!Q&&!y&&d.jsx("button",{onClick:N,disabled:l[`${C()}Passed`],className:"relative p-[1px] transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:l[`${C()}Passed`]?"linear-gradient(45deg, rgba(75, 85, 99, 0.6), rgba(107, 114, 128, 0.6))":"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:d.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:l[`${C()}Passed`]?"#9ca3af":"#fca5a5"},children:"Pass"})}),y==="removing"&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:z,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:d.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),d.jsx("button",{onClick:F,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:d.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),d.jsx("button",{onClick:M,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:d.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Continue"})})]}),y==="adding"&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:z,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:d.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),d.jsx("button",{onClick:F,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:d.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),d.jsx("button",{onClick:R,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:d.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Initialising"})}),i==="allocateShields"&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:j,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:d.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),d.jsx("button",{onClick:k,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:d.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]}),i==="optionalDiscard"&&d.jsx("button",{onClick:U,className:"btn-confirm",children:"Confirm"})]})})]}),d.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[d.jsxs("h2",{className:"text-base font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Your Resources",(i==="deployment"||i==="action")&&u===C()&&d.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${C()}Passed`]&&d.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ia,{icon:Ff,value:e.energy,max:n.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!0}),i==="deployment"&&d.jsx(Ia,{icon:s0,value:s===1?e.initialDeploymentBudget:e.deploymentBudget,iconColor:"text-purple-400",isPlayer:!0}),d.jsx(Ia,{icon:_C,value:x,max:n.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!0}),i==="allocateShields"&&d.jsx(Ia,{icon:xg,value:p,iconColor:"text-cyan-300",isPlayer:!0}),y==="removing"&&d.jsx(Ia,{icon:xg,value:h,iconColor:"text-orange-300",isPlayer:!0}),y==="adding"&&d.jsx(Ia,{icon:xg,value:g,iconColor:"text-green-300",isPlayer:!0}),d.jsxs("div",{className:"relative",ref:ye,children:[d.jsx("button",{onClick:()=>ne(!V),className:"relative p-[2px] bg-gradient-to-br from-gray-500 to-gray-700",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Settings",children:d.jsxs("div",{className:"bg-slate-700 hover:bg-slate-600 p-1.5 transition-colors flex items-center gap-1",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[d.jsx(IC,{size:20,className:"text-white"}),d.jsx(gM,{size:16,className:"text-white"})]})}),V&&d.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:[d.jsxs("button",{onClick:()=>{ie&&ie(),ne(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors flex items-center gap-2 border-b border-gray-700",children:[d.jsx(IC,{size:16}),"Debug View"]}),d.jsxs("button",{onClick:()=>{$&&$(),ne(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors flex items-center gap-2 border-b border-gray-700",children:[d.jsx(fM,{size:16}),"Mechanics Glossary"]}),d.jsxs("button",{onClick:()=>{_(),ne(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-b-lg flex items-center gap-2",children:[d.jsx(RM,{size:16}),"Exit"]})]})]})]})]})]})}const m2=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:p,gameEngine:f,turnPhase:h,isMyTurn:g,passInfo:y,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:C,hoveredTarget:A,setHoveredTarget:w,sectionRefs:P})=>{const{getEffectiveShipStats:T}=mh(),N=T(e,n);return d.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(_=>{const j=n[_];if(!j)return K("STATE_SYNC",`Lane ${_} rendering EMPTY div - no hover possible:`,{sectionNameValue:JSON.stringify(j),playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),d.jsx("div",{className:"bg-black/20 rounded-lg border-2 border-dashed border-gray-700",style:{width:"clamp(600px, 31.25vw, 810px)",height:"clamp(120px, 6.25vw, 162px)"}},_);const k=e.shipSections[j],z=u.some(M=>M.id===j);let F=null;if(p&&t){if(p==="removing")k.allocatedShields>0?F="can-remove":F="cannot-remove";else if(p==="adding"){const M=f.getEffectiveSectionMaxShields(j,e,n);k.allocatedShields<M?F="can-add":F="cannot-add"}}return d.jsx("div",{style:{width:"clamp(600px, 31.25vw, 810px)",height:"clamp(120px, 6.25vw, 162px)"},children:d.jsx(go,{section:j,stats:k,effectiveStatsForDisplay:N.bySection[j],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(j):s&&s({...k,id:j,name:j},"section",t)},onAbilityClick:i,isInteractive:l||h==="action"&&t&&k.ability&&S.energy>=k.ability.cost.energy,isCardTarget:z,isInMiddleLane:_===1,isHovered:A?.type==="section"&&A?.target.name===j&&A?.isOpponent===!t,onMouseEnter:()=>!t&&w({target:{...k,name:j},type:"section",isOpponent:!0}),onMouseLeave:()=>!t&&w(null),reallocationState:F,gameEngine:f,turnPhase:h,isMyTurn:g,passInfo:y,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:C,sectionRef:M=>{if(P&&M){const R=`${t?"local":"opponent"}-${j}`;P.current[R]=M}}})},_)})})},gV=(e,t,n,r,i,s,l,u,p,f,h,g,y,x,S,C,A,w,P,T,N,_)=>d.jsx("div",{className:"flex flex-wrap gap-8 justify-center items-center",style:{minHeight:"clamp(130px, 6.77vw, 175px)",paddingTop:"2px"},children:e.map(j=>d.jsx(Yf,{drone:j,lane:n,isPlayer:t,onClick:f,onAbilityClick:h,isSelected:g&&g.id===j.id,isSelectedForMove:y?.phase==="select_drones"&&y.selectedDrones.some(k=>k.id===j.id),isHit:x.includes(j.id),isPotentialInterceptor:S.includes(j.id),isPotentialGuardian:C.includes(j.id),droneRefs:A,mandatoryAction:w,localPlayerState:r,isActionTarget:P.some(k=>k.id===j.id)||T.some(k=>k.id===j.id),onMouseEnter:()=>!t&&N({target:j,type:"drone",lane:n}),onMouseLeave:()=>!t&&N(null),interceptedBadge:_,enableFloatAnimation:!0},j.id))}),g2=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:p,multiSelectState:f,turnPhase:h,localPlayerState:g,opponentPlayerState:y,localPlacedSections:x,opponentPlacedSections:S,gameEngine:C,getPlacedSectionsForEngine:A,handleTokenClick:w,handleAbilityIconClick:P,selectedDrone:T,recentlyHitDrones:N,potentialInterceptors:_,potentialGuardians:j,droneRefs:k,mandatoryAction:z,setHoveredTarget:F,interceptedBadge:M})=>(mh(),d.jsx("div",{className:"flex w-full justify-between gap-8",style:{minHeight:"clamp(140px, 7.292vw, 190px)"},children:["lane1","lane2","lane3"].map(R=>{const U=t?r():i(),W=s&&l.some(I=>I.id===R&&I.owner===U)||u&&p.some(I=>I.id===R&&I.owner===U)||f&&p.some(I=>I.id===R&&I.owner===U),Z=t&&(h==="deployment"||h==="action"),Q=t?"bg-cyan-400/10":"bg-pink-500/10";return d.jsx("div",{onClick:I=>n(I,R,t),className:`flex-1 rounded-lg transition-all duration-200 p-2
              ${W?"bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":Q}
              ${Z?"cursor-pointer hover:bg-cyan-900/20":""}
            `,children:gV(e.dronesOnBoard[R],t,R,g,y,x,S,C,A,w,P,T,f,N,_,j,k,z,l,p,F,M)},R)})}));function yV({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:p,turnPhase:f,reallocationPhase:h,shipAbilityMode:g,hoveredTarget:y,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:C,potentialGuardians:A,droneRefs:w,sectionRefs:P,mandatoryAction:T,gameEngine:N,getLocalPlayerId:_,getOpponentPlayerId:j,isMyTurn:k,getPlacedSectionsForEngine:z,passInfo:F,handleTargetClick:M,handleLaneClick:R,handleShipSectionClick:U,handleShipAbilityClick:W,handleTokenClick:Z,handleAbilityIconClick:Q,setHoveredTarget:I,interceptedBadge:G}){const ie=f==="allocateShields"||h;return d.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:d.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[d.jsx(m2,{player:t,isPlayer:!1,placedSections:r,onTargetClick:M,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:N,turnPhase:f,isMyTurn:k,passInfo:F,getLocalPlayerId:_,localPlayerState:e,shipAbilityMode:g,hoveredTarget:y,setHoveredTarget:I,sectionRefs:P}),d.jsx(g2,{player:t,isPlayer:!1,onLaneClick:R,getLocalPlayerId:_,getOpponentPlayerId:j,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:p,turnPhase:f,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:N,getPlacedSectionsForEngine:z,handleTokenClick:Z,handleAbilityIconClick:Q,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:C,potentialGuardians:A,droneRefs:w,mandatoryAction:T,setHoveredTarget:I,interceptedBadge:G}),d.jsx(g2,{player:e,isPlayer:!0,onLaneClick:R,getLocalPlayerId:_,getOpponentPlayerId:j,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:p,turnPhase:f,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:N,getPlacedSectionsForEngine:z,handleTokenClick:Z,handleAbilityIconClick:Q,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:C,potentialGuardians:A,droneRefs:w,mandatoryAction:T,setHoveredTarget:I,interceptedBadge:G}),d.jsx(m2,{player:e,isPlayer:!0,placedSections:n,onSectionClick:U,onAbilityClick:W,onTargetClick:M,isInteractive:ie,selectedCard:i,validCardTargets:s,reallocationPhase:h,gameEngine:N,turnPhase:f,isMyTurn:k,passInfo:F,getLocalPlayerId:_,localPlayerState:e,shipAbilityMode:g,hoveredTarget:y,setHoveredTarget:I,sectionRefs:P})]})})}const vV="_footer_15bg8_15",xV="_tabContainer_15bg8_21",bV="_contentContainer_15bg8_25",SV="_contentOpen_15bg8_29",CV="_contentClosed_15bg8_34",AV="_contentWrapper_15bg8_38",EV="_tabButton_15bg8_44",wV="_tabButtonActive_15bg8_48",PV="_tabButtonInactive_15bg8_52",TV="_tabIcon_15bg8_56",DV="_multiSelectOverlay_15bg8_62",NV="_multiSelectText_15bg8_66",OV="_handContainer_15bg8_72",jV="_cardPile_15bg8_76",_V="_deckCard_15bg8_80",kV="_deckCardText_15bg8_88",MV="_discardCard_15bg8_93",IV="_discardCardText_15bg8_101",RV="_pileLabel_15bg8_106",LV="_handSection_15bg8_110",$V="_handCardsContainer_15bg8_134",BV="_handCardsWrapper_15bg8_139",zV="_handCardsWrapperGap_15bg8_143",UV="_cardWrapper_15bg8_148",HV="_droneContainer_15bg8_155",GV="_droneGrid_15bg8_159",qV="_logContainer_15bg8_170",YV="_logHeader_15bg8_174",FV="_logTitle_15bg8_178",VV="_downloadButton_15bg8_182",KV="_logTableWrapper_15bg8_187",WV="_logTable_15bg8_187",XV="_logTableHeader_15bg8_195",QV="_logTableHeaderCell_15bg8_199",JV="_logTableDebugHeader_15bg8_203",ZV="_logTableRow_15bg8_207",eK="_logTableCell_15bg8_211",tK="_logTableCellBold_15bg8_215",nK="_logTableCellGray_15bg8_219",rK="_logTableCellCyan_15bg8_223",aK="_logTableCellYellow_15bg8_227",iK="_logTableCellGrayText_15bg8_231",sK="_logTableCellDebug_15bg8_235",oK="_logTableCellCenter_15bg8_239",lK="_aiDecisionButton_15bg8_243",cK="_buttonDanger_15bg8_254",uK="_buttonSuccess_15bg8_259",dK="_buttonDisabled_15bg8_264",Ee={footer:vV,tabContainer:xV,contentContainer:bV,contentOpen:SV,contentClosed:CV,contentWrapper:AV,tabButton:EV,tabButtonActive:wV,tabButtonInactive:PV,tabIcon:TV,multiSelectOverlay:DV,multiSelectText:NV,handContainer:OV,cardPile:jV,deckCard:_V,deckCardText:kV,discardCard:MV,discardCardText:IV,pileLabel:RV,handSection:LV,handCardsContainer:$V,handCardsWrapper:BV,handCardsWrapperGap:zV,cardWrapper:UV,droneContainer:HV,droneGrid:GV,logContainer:qV,logHeader:YV,logTitle:FV,downloadButton:VV,logTableWrapper:KV,logTable:WV,logTableHeader:XV,logTableHeaderCell:QV,logTableDebugHeader:JV,logTableRow:ZV,logTableCell:eK,logTableCellBold:tK,logTableCellGray:nK,logTableCellCyan:rK,logTableCellYellow:aK,logTableCellGrayText:iK,logTableCellDebug:sK,logTableCellCenter:oK,aiDecisionButton:lK,buttonDanger:cK,buttonSuccess:uK,buttonDisabled:dK};function fK({gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,selectedCard:r,turnPhase:i,mandatoryAction:s,handleCardClick:l,getLocalPlayerId:u,isMyTurn:p,hoveredCardId:f,setHoveredCardId:h,setIsViewDiscardModalOpen:g,setIsViewDeckModalOpen:y,optionalDiscardCount:x,handleRoundStartDraw:S,checkBothPlayersHandLimitComplete:C,handleConfirmMandatoryDiscard:A,handleRoundStartDiscard:w,setConfirmationModal:P,passInfo:T,validCardTargets:N,gameEngine:_,opponentPlayerState:j}){const k=u(),z=p(),F=T[`${k}Passed`];K("HAND_VIEW","HandView render:",{handSize:t.hand.length,energy:t.energy});const M=225,R=12,U=6,W=t.hand.length>U,Z=U*M+(U-1)*R,Q=t.hand.length;let I=0;return Q>1&&W&&(I=(Z-M)/(Q-1)-M),d.jsxs("div",{className:Ee.handContainer,children:[d.jsxs("div",{className:Ee.cardPile,children:[d.jsx("div",{onClick:()=>g(!0),className:Ee.discardCard,children:d.jsx("p",{className:Ee.discardCardText,children:t.discardPile.length})}),d.jsx("p",{className:Ee.pileLabel,children:"Discard Pile"})]}),d.jsx("div",{className:Ee.handSection,children:d.jsx("div",{className:Ee.handCardsContainer,style:W?{width:`${Z}px`}:{},children:d.jsx("div",{className:`${Ee.handCardsWrapper} ${W?"":Ee.handCardsWrapperGap}`,children:t.hand.map((G,ie)=>{const le=f?t.hand.findIndex(Me=>Me.instanceId===f):-1,$=t.energy>=G.cost,q=!G.targeting||_.getValidTargets(k,null,G,t,j).length>0,V=i==="action"&&z&&!F&&$&&q,ne=i==="optionalDiscard"&&x<n.totals.discardLimit,ye=V||ne;K("CARD_PLAY",`Card ${ie}: ${G.name}`,{instanceId:G.instanceId,hasInstanceId:G.instanceId!==void 0,instanceIdType:typeof G.instanceId,id:G.id,cost:G.cost,targeting:G.targeting,conditions:{energy:t.energy,cardCost:G.cost}});let Se="",Ce={zIndex:ie};return W&&le!==-1&&(ie<le?Se="transform -translate-x-12":ie>le?Se="transform translate-x-12":(Se="",Ce.zIndex=50)),W&&ie>0&&(Ce.marginLeft=`${I}px`),d.jsx("div",{className:`${Ee.cardWrapper} ${Se}`,style:Ce,onMouseEnter:()=>h(G.instanceId),onMouseLeave:()=>h(null),children:d.jsx(Ga,{card:G,isSelected:r?.instanceId===G.instanceId,isPlayable:ye,isMandatoryTarget:s?.type==="discard",onClick:s?.type==="discard"?Me=>P({type:"discard",target:Me,onConfirm:()=>A(Me),onCancel:()=>P(null),text:`Are you sure you want to discard ${Me.name}?`}):i==="optionalDiscard"?Me=>P({type:"discard",target:Me,onConfirm:()=>w(Me),onCancel:()=>P(null),text:`Are you sure you want to discard ${Me.name}?`}):l})},G.instanceId||`${G.id}-${ie}`)})})})}),d.jsxs("div",{className:Ee.cardPile,children:[d.jsx("div",{onClick:()=>y(!0),className:Ee.deckCard,children:d.jsx("p",{className:Ee.deckCardText,children:t.deck.length})}),d.jsx("p",{className:Ee.pileLabel,children:"Deck"})]})]})}function pK({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:p,isMyTurn:f,turn:h,passInfo:g,validCardTargets:y}){return d.jsx("div",{className:Ee.droneContainer,children:d.jsx("div",{className:Ee.droneGrid,children:t.map((x,S)=>{const A=(h===1?e.initialDeploymentBudget+e.energy:e.energy)>=x.class,w=n?.type==="Upgrade"&&y.some(P=>P.id===x.name);return d.jsx(bi,{drone:x,onClick:s,isSelected:l&&l.name===x.name,isSelectable:r==="deployment"&&f()&&!g[`${p()}Passed`]&&A&&!i||w,deployedCount:e.deployedDroneCounts[x.name]||0,appliedUpgrades:e.appliedUpgrades[x.name]||[],isUpgradeTarget:w,onViewUpgrades:(P,T)=>u({droneName:P.name,upgrades:T})},S)})})})}function hK({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return d.jsxs("div",{className:Ee.logContainer,children:[d.jsxs("div",{className:Ee.logHeader,children:[d.jsx("h3",{className:Ee.logTitle,children:"Game Log"}),d.jsx("button",{onClick:t,className:Ee.downloadButton,children:"Download CSV"})]}),d.jsx("div",{className:Ee.logTableWrapper,children:d.jsxs("table",{className:Ee.logTable,children:[d.jsx("thead",{className:Ee.logTableHeader,children:d.jsxs("tr",{children:[d.jsx("th",{className:Ee.logTableHeaderCell,children:"Rnd"}),d.jsx("th",{className:Ee.logTableHeaderCell,children:"Timestamp (UTC)"}),d.jsx("th",{className:Ee.logTableHeaderCell,children:"Player"}),d.jsx("th",{className:Ee.logTableHeaderCell,children:"Action"}),d.jsx("th",{className:Ee.logTableHeaderCell,children:"Source"}),d.jsx("th",{className:Ee.logTableHeaderCell,children:"Target"}),d.jsx("th",{className:Ee.logTableHeaderCell,children:"Outcome"}),d.jsx("th",{className:Ee.logTableDebugHeader,children:"Debug Source"}),d.jsx("th",{className:Ee.logTableHeaderCell})]})}),d.jsx("tbody",{children:e.map((r,i)=>d.jsxs("tr",{className:Ee.logTableRow,children:[d.jsx("td",{className:Ee.logTableCellBold,children:r.round}),d.jsx("td",{className:Ee.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),d.jsx("td",{className:Ee.logTableCellCyan,children:r.player}),d.jsx("td",{className:Ee.logTableCellYellow,children:r.actionType}),d.jsx("td",{className:Ee.logTableCell,children:r.source}),d.jsx("td",{className:Ee.logTableCell,children:r.target}),d.jsx("td",{className:Ee.logTableCellGrayText,children:r.outcome}),d.jsx("td",{className:Ee.logTableCellDebug,children:r.debugSource}),d.jsx("td",{className:Ee.logTableCellCenter,children:r.aiDecisionContext&&d.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:Ee.aiDecisionButton,title:"Show AI Decision Logic",children:""})})]},i)).reverse()})]})})]})}function mK({gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,sortedLocalActivePool:r,gameLog:i,footerView:s,isFooterOpen:l,multiSelectState:u,selectedCard:p,turnPhase:f,mandatoryAction:h,handleFooterButtonClick:g,handleCardClick:y,cancelCardSelection:x,downloadLogAsCSV:S,getLocalPlayerId:C,isMyTurn:A,hoveredCardId:w,setHoveredCardId:P,setIsViewDiscardModalOpen:T,setIsViewDeckModalOpen:N,optionalDiscardCount:_,handleRoundStartDraw:j,checkBothPlayersHandLimitComplete:k,handleToggleDroneSelection:z,selectedDrone:F,setViewUpgradesModal:M,handleConfirmMandatoryDiscard:R,handleRoundStartDiscard:U,setConfirmationModal:W,turn:Z,passInfo:Q,validCardTargets:I,gameEngine:G,opponentPlayerState:ie,setAiDecisionLogToShow:le}){return d.jsxs("footer",{className:Ee.footer,children:[d.jsxs("div",{className:Ee.tabContainer,children:[d.jsx("button",{onClick:()=>g("hand"),className:`${Ee.tabButton} ${l&&s==="hand"?Ee.tabButtonActive:Ee.tabButtonInactive}`,children:d.jsxs("span",{className:Ee.tabIcon,children:[l&&s==="hand"&&d.jsx(fu,{size:14}),"Hand (",t.hand.length,"/",n.totals.handLimit,")"]})}),d.jsx("button",{onClick:()=>g("drones"),className:`${Ee.tabButton} ${l&&s==="drones"?Ee.tabButtonActive:Ee.tabButtonInactive}`,children:d.jsxs("span",{className:Ee.tabIcon,children:[l&&s==="drones"&&d.jsx(fu,{size:14}),"Drones"]})}),d.jsx("button",{onClick:()=>g("log"),className:`${Ee.tabButton} ${l&&s==="log"?Ee.tabButtonActive:Ee.tabButtonInactive}`,children:d.jsxs("span",{className:Ee.tabIcon,children:[l&&s==="log"&&d.jsx(fu,{size:14}),"Log (",i.length,")"]})})]}),d.jsx("div",{className:`${Ee.contentContainer} ${l?Ee.contentOpen:Ee.contentClosed}`,children:d.jsxs("div",{className:Ee.contentWrapper,children:[u&&d.jsxs("div",{className:Ee.multiSelectOverlay,children:[d.jsxs("span",{className:Ee.multiSelectText,children:[u.phase==="select_source_lane"&&"Reposition: Select a source lane",u.phase==="select_drones"&&`Select Drones (${u.selectedDrones.length} / ${u.maxSelection})`,u.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),d.jsx("button",{onClick:$=>{$.stopPropagation(),x()},className:Ee.buttonDanger,children:"Cancel"}),u.phase==="select_drones"&&d.jsx("button",{onClick:$=>{$.stopPropagation(),u.selectedDrones.length>0},disabled:u.selectedDrones.length===0,className:`${Ee.buttonSuccess} ${u.selectedDrones.length===0?Ee.buttonDisabled:""}`,children:"Confirm Drones"})]}),s==="hand"&&d.jsx("div",{className:Ee.viewContent,children:d.jsx(fK,{gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,selectedCard:p,turnPhase:f,mandatoryAction:h,handleCardClick:y,getLocalPlayerId:C,isMyTurn:A,hoveredCardId:w,setHoveredCardId:P,setIsViewDiscardModalOpen:T,setIsViewDeckModalOpen:N,optionalDiscardCount:_,handleRoundStartDraw:j,checkBothPlayersHandLimitComplete:k,handleConfirmMandatoryDiscard:R,handleRoundStartDiscard:U,setConfirmationModal:W,passInfo:Q,validCardTargets:I,gameEngine:G,opponentPlayerState:ie})}),s==="drones"&&d.jsx("div",{className:Ee.viewContent,children:d.jsx(pK,{localPlayerState:t,sortedLocalActivePool:r,selectedCard:p,turnPhase:f,mandatoryAction:h,handleToggleDroneSelection:z,selectedDrone:F,setViewUpgradesModal:M,getLocalPlayerId:C,isMyTurn:A,turn:Z,passInfo:Q,validCardTargets:I})}),s==="log"&&d.jsx("div",{className:Ee.viewContent,children:d.jsx(hK,{gameLog:i,downloadLogAsCSV:S,setAiDecisionLogToShow:le})})]})})]})}const gK=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:p})=>d.jsxs(d.Fragment,{children:[e&&d.jsx(N_,{modalData:e,onClose:()=>t(null)}),n&&d.jsx(j_,{selectionData:n,onConfirm:async(f,h)=>{await l(f,h,u()),r(null)},onCancel:()=>{r(null),p()}}),i&&d.jsx(O_,{selectionData:i,onConfirm:async(f,h)=>{await l(f,h,u()),s(null)},onCancel:()=>{s(null),p()}})]}),yK=({visible:e,start:t,end:n,lineRef:r})=>e?d.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[d.jsx("defs",{children:d.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:d.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),d.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,vK=({top:e,left:t,size:n="large"})=>{const[r,i]=E.useState([]),s={small:{particleCount:8,radiusMin:30,radiusMax:50,particleSizeMin:4,particleSizeMax:8,duration:500},large:{particleCount:15,radiusMin:60,radiusMax:100,particleSizeMin:8,particleSizeMax:16,duration:800}},l=s[n]||s.large;return E.useEffect(()=>{const u=[];for(let p=0;p<l.particleCount;p++){const f=Math.PI*2*p/l.particleCount,h=l.radiusMin+Math.random()*(l.radiusMax-l.radiusMin),g=l.particleSizeMin+Math.random()*(l.particleSizeMax-l.particleSizeMin);u.push({id:p,x:Math.cos(f)*h,y:Math.sin(f)*h,size:g,opacity:1})}i(u)},[l.particleCount,l.radiusMin,l.radiusMax,l.particleSizeMin,l.particleSizeMax]),d.jsx("div",{style:{position:"fixed",top:`${e}px`,left:`${t}px`,pointerEvents:"none",zIndex:9999},children:r.map(u=>d.jsx("div",{style:{position:"absolute",width:`${u.size}px`,height:`${u.size}px`,borderRadius:"50%",backgroundColor:"#ff6b00",boxShadow:"0 0 10px #ff6b00","--tx":`${u.x}px`,"--ty":`${u.y}px`,animation:`explosionParticle ${l.duration}ms ease-out forwards`,animationDelay:"0ms"}},u.id))})},xK=()=>{const e=Math.random()>.5;return{width:`${180+Math.random()*40}%`,height:`${60+Math.random()*40}%`,gradientAngle:e?120+Math.random()*30:-60+Math.random()*30,colorIntensity:{r:4+Math.random()*10,g:8+Math.random()*16,b:24+Math.random()*20},opacity:.5+Math.random()*.4,scale:1+(Math.random()*.2-.1),position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},bK=()=>{const e=Math.random()>.5;return{position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},SK=({id:e,properties:t})=>{const n=`rgb(${t.colorIntensity.r} ${t.colorIntensity.g} ${t.colorIntensity.b})`,r=t.position.top!==void 0?{top:t.position.top,left:t.position.left}:{bottom:t.position.bottom,right:t.position.right};return d.jsx("div",{className:"absolute",style:{width:t.width,height:t.height,...r,transform:`rotate(${t.rotation}deg) scale(${t.scale})`,background:`linear-gradient(${t.gradientAngle}deg, ${n} 0%, transparent 100%)`,opacity:t.opacity,transition:"all 8s ease-in-out",willChange:"transform"}})},M_=()=>{const[e,t]=E.useState([]);return E.useEffect(()=>{const n=3+Math.floor(Math.random()*3),r=Array.from({length:n},(i,s)=>({id:s,properties:xK()}));t(r)},[]),E.useEffect(()=>{if(e.length===0)return;const n=setInterval(()=>{t(r=>{const i=Math.floor(Math.random()*r.length);return r.map((s,l)=>{if(l===i){const u=bK();return{...s,properties:{...s.properties,position:u.position,rotation:u.rotation}}}return s})})},1e4);return()=>clearInterval(n)},[e.length]),d.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",style:{zIndex:-1},children:e.map(n=>d.jsx(SK,{id:n.id,properties:n.properties},n.id))})},CK=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const p=n!=="local";return d.jsxs("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:[d.jsx(M_,{}),d.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine relative z-10",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:p?"Opponent Thinking":"AI Thinking"})]})},AK=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:s})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return d.jsx(Ps,{title:"Deployment Complete",text:u,onClose:s,children:d.jsx("div",{className:"flex justify-center mt-6",children:d.jsx("button",{onClick:s,className:"btn-continue",children:"Continue to Action Phase"})})})},EK=({show:e,onContinue:t})=>e?d.jsx(Ps,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:d.jsx("div",{className:"flex justify-center mt-6",children:d.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,wK=(e,t)=>{const[n,r]=E.useState([]),i=E.useCallback((s,l=null,u="large")=>{const p=Ie.createExplosionEffect(s);let f=l;if(!f){const h=e.current[s];f=y0(h,t.current)}if(f){const h=`${p.timestamp}-${Math.random()}`;K("ANIMATIONS"," [EXPLOSION] Adding explosion to state:",{top:f.y,left:f.x}),r(g=>[...g,{id:h,top:f.y,left:f.x,size:u}]),setTimeout(()=>{r(g=>g.filter(y=>y.id!==h))},p.duration)}else console.warn(" [EXPLOSION] No position found, explosion not triggered")},[e,t]);return{explosions:n,triggerExplosion:i}};class PK{constructor(t){this.gameStateManager=t,this.isBlocking=!1,this.visualHandlers=new Map,this.animations={DRONE_ATTACK_START:{duration:500,type:"DRONE_FLY",config:{trail:!0,easing:"easeInOut",isReturn:!1}},DRONE_RETURN:{duration:0,type:"DRONE_FLY",config:{trail:!1,easing:"easeOut",isReturn:!0}},CARD_REVEAL:{duration:1e3,type:"CARD_REVEAL_EFFECT",config:{}},SHIP_ABILITY_REVEAL:{duration:1e3,type:"SHIP_ABILITY_REVEAL_EFFECT",config:{}},CARD_VISUAL:{duration:5e3,type:"CARD_VISUAL_EFFECT",config:{}},PASS_NOTIFICATION:{duration:1e3,type:"PASS_NOTIFICATION_EFFECT",config:{}},PHASE_ANNOUNCEMENT:{duration:1500,type:"PHASE_ANNOUNCEMENT_EFFECT",config:{}},TELEPORT_IN:{duration:600,type:"TELEPORT_EFFECT",config:{revealAt:.7}},TELEPORT_OUT:{duration:600,type:"TELEPORT_EFFECT",config:{}},SHIELD_DAMAGE:{duration:2e3,type:"FLASH_EFFECT",config:{color:"#00bcd4",intensity:.6}},HULL_DAMAGE:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"small"}},DRONE_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DAMAGED:{duration:2e3,type:"SHAKE_EFFECT",config:{intensity:10}},HEAL_EFFECT:{duration:1400,type:"HEAL_EFFECT",config:{}}}}registerVisualHandler(t,n){this.visualHandlers.set(t,n)}async executeAnimations(t,n="unknown"){const r=this.gameStateManager?.getState()?.gameMode;if(K("ANIMATIONS"," [EXECUTE] AnimationManager.executeAnimations() START:",{effectCount:t?.length||0,effects:t?.map(i=>i.animationName)}),t.forEach((i,s)=>{K("ANIMATIONS",`   [EXECUTE] Animation ${s+1}/${t.length}: ${i.animationName}`,{type:this.animations[i.animationName]?.type,duration:this.animations[i.animationName]?.duration})}),!(!t||t.length===0)){K("ANIMATIONS",` [EXECUTE] PLAYING ${t.length} ANIMATION(S) - Source: ${n} - Mode: ${r}`),this.setBlocking(!0);try{const i=["SHIELD_DAMAGE","HULL_DAMAGE","DRONE_DESTROYED","SECTION_DESTROYED","SECTION_DAMAGED","HEAL_EFFECT"];let s=0;for(;s<t.length;){const l=t[s];if(i.includes(l.animationName)){const u=[];for(;s<t.length&&i.includes(t[s].animationName);)u.push(t[s]),s++;K("ANIMATIONS"," [ANIMATION DEBUG] Playing damage effects in parallel:",u.map(p=>p.animationName)),await Promise.all(u.map(async p=>{const f=this.animations[p.animationName];if(!f){console.warn(` [ANIMATION DEBUG] Unknown animation: ${p.animationName}`);return}const h=this.visualHandlers.get(f.type);if(!h){console.warn(` [ANIMATION DEBUG] No visual handler for: ${f.type}`);return}return new Promise(g=>{h({...p.payload,config:f.config,onComplete:g}),setTimeout(g,f.duration)})})),K("ANIMATIONS"," [ANIMATION DEBUG] All damage effects completed")}else{K("ANIMATIONS"," [ANIMATION DEBUG] Processing sequential effect:",l.animationName);const u=this.animations[l.animationName];if(!u){console.warn(` [ANIMATION DEBUG] Unknown animation: ${l.animationName}`),s++;continue}const p=this.visualHandlers.get(u.type);if(!p){console.warn(` [ANIMATION DEBUG] No visual handler for: ${u.type}`),s++;continue}await new Promise(f=>{p({...l.payload,config:u.config,onComplete:f}),setTimeout(f,u.duration)}),K("ANIMATIONS"," [ANIMATION DEBUG] Animation completed:",l.animationName),s++}}}finally{await new Promise(i=>setTimeout(i,200)),this.setBlocking(!1)}}}setBlocking(t){this.isBlocking=t,this.gameStateManager.emit("animationStateChange",{blocking:t})}}const TK=({position:e,color:t="#00bcd4",intensity:n=.6,onComplete:r})=>{const[i,s]=E.useState(0);return E.useEffect(()=>{if(!e){r?.();return}const l=50,u=100,p=150;setTimeout(()=>s(n),10),setTimeout(()=>s(0),l+u),setTimeout(()=>{r?.()},l+u+p)},[n,r,e]),e?d.jsx("div",{style:{position:"fixed",left:e.left,top:e.top,width:e.width,height:e.height,backgroundColor:t,opacity:i,borderRadius:"8px",pointerEvents:"none",zIndex:9997,transition:`opacity ${i>0?"50ms":"150ms"} ease-${i>0?"in":"out"}`}}):null},DK=({visualType:e,startPos:t,endPos:n,duration:r=800,onComplete:i})=>{const[s,l]=E.useState(!1);if(E.useEffect(()=>{if(!t||!n){i?.();return}l(!0);const u=setTimeout(()=>{l(!1),i?.()},r);return()=>clearTimeout(u)},[e,t,n,r,i]),!s||!t||!n)return null;switch(e){case"LASER_BLAST":return d.jsx(NK,{startPos:t,endPos:n,duration:r});case"ENERGY_WAVE":return d.jsx(OK,{startPos:t,endPos:n,duration:r});case"NUKE_BLAST":return d.jsx(jK,{endPos:n,duration:r});default:return null}},NK=({startPos:e,endPos:t,duration:n})=>{const r=Math.atan2(t.y-e.y,t.x-e.x),i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return d.jsx("div",{style:{position:"fixed",left:e.x,top:e.y,width:i,height:"4px",backgroundColor:"#ff0000",boxShadow:"0 0 10px #ff0000, 0 0 20px #ff0000",transformOrigin:"0 50%",transform:`rotate(${r}rad)`,zIndex:9998,pointerEvents:"none",animation:`laserFade ${n}ms ease-out forwards`}})},OK=({startPos:e,duration:t})=>d.jsx("div",{style:{position:"fixed",left:e.x-20,top:e.y-20,width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#00ff00",opacity:.7,zIndex:9998,pointerEvents:"none",animation:`energyPulse ${t}ms ease-out forwards`}}),jK=({endPos:e,duration:t})=>d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{position:"fixed",left:e.x-150,top:e.y-150,width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,100,0,0.9) 0%, rgba(255,50,0,0.6) 40%, rgba(255,200,0,0.3) 70%, transparent 100%)",zIndex:9998,pointerEvents:"none",animation:`nukeExpand ${t}ms ease-out forwards`}}),d.jsx("div",{style:{position:"fixed",left:e.x-200,top:e.y-200,width:"400px",height:"400px",borderRadius:"50%",backgroundColor:"#ffffff",opacity:.8,zIndex:9997,pointerEvents:"none",animation:`nukeFlash ${t}ms ease-out forwards`}})]});function _K(e,t,n,r,i,s,l,u,p,f,h,g,y,x,S,C,A,w,P){E.useEffect(()=>{r(),i();const T=new PK(e),N=(j,k,z,F)=>{if(F==="drone")return t.current[z]||null;if(F==="section"){const M=e.getLocalPlayerId(),R=j===M?"local":"opponent";return n.current[`${R}-${z}`]||null}return null};T.registerVisualHandler("DRONE_FLY",j=>{const{droneId:k,sourcePlayer:z,sourceLane:F,targetId:M,targetPlayer:R,targetLane:U,targetType:W,config:Z,attackValue:Q,onComplete:I}=j;if(Z.isReturn){I?.();return}const G=N(z,F,k,"drone"),ie=N(R,U,M,W);if(!G||!ie){console.warn(" [LASER DEBUG] Missing DOM elements, skipping laser",{hasDrone:!!G,hasTarget:!!ie,sourcePlayer:z,sourceLane:F,targetPlayer:R,targetType:W,targetId:M}),I?.();return}const le=l(G,u.current),$=l(ie,u.current),q=`laser-${k}-${Date.now()}`;A(V=>[...V,{id:q,startPos:le,endPos:$,attackValue:Q||1,duration:500,onComplete:()=>{A(ne=>ne.filter(ye=>ye.id!==q)),I?.()}}])}),T.registerVisualHandler("EXPLOSION_EFFECT",j=>{const{targetId:k,targetPlayer:z,targetLane:F,targetType:M,config:R,onComplete:U}=j,W=N(z,F,k,M);if(W){const Z=l(W,u.current);s(k,Z,R?.size||"large")}else console.warn(" [EXPLOSION DEBUG] Target element not found:",{targetId:k,targetPlayer:z,targetLane:F,targetType:M});U?.()}),T.registerVisualHandler("FLASH_EFFECT",j=>{const{targetId:k,targetPlayer:z,targetLane:F,targetType:M,config:R,onComplete:U}=j,W=N(z,F,k,M);if(!W){console.warn(" [FLASH DEBUG] Target element not found:",{targetId:k,targetPlayer:z,targetLane:F,targetType:M}),U?.();return}const Z=W.getBoundingClientRect(),Q=`flash-${k}-${Date.now()}`;h(I=>[...I,{id:Q,position:{left:Z.left,top:Z.top,width:Z.width,height:Z.height},color:R.color,intensity:R.intensity,onComplete:()=>{h(G=>G.filter(ie=>ie.id!==Q)),U?.()}}])}),T.registerVisualHandler("HEAL_EFFECT",j=>{const{targetId:k,targetPlayer:z,targetLane:F,targetType:M,healAmount:R,onComplete:U}=j,W=N(z,F,k,M);if(!W){console.warn(" [HEAL DEBUG] Target element not found:",{targetId:k,targetPlayer:z,targetLane:F,targetType:M,droneRefsKeys:Object.keys(t.current),sectionRefsKeys:Object.keys(n.current)}),U?.();return}const Z=W.getBoundingClientRect(),Q=`heal-${k}-${Date.now()}`;g(I=>[...I,{id:Q,position:{left:Z.left,top:Z.top,width:Z.width,height:Z.height},healAmount:R,onComplete:()=>{g(G=>G.filter(ie=>ie.id!==Q)),U?.()}}])}),T.registerVisualHandler("CARD_VISUAL_EFFECT",j=>{const{visualType:k,sourcePlayer:z,targetId:F,targetPlayer:M,targetLane:R,targetType:U,duration:W,onComplete:Z}=j,Q=u.current?.getBoundingClientRect();if(!Q){Z?.();return}const I=e.getLocalPlayerId(),G=z===I?Q.bottom-100:Q.top+100,ie=Q.left+Q.width/2;let le;if(U==="lane")if(M==="center")le={x:Q.left+Q.width/2,y:Q.top+Q.height/2};else{const q=z===I?M:M===I?I:M,Se=(e.getState()[q]?.dronesOnBoard||{})[R]||[];if(Se.length>0){const Ce=Se[0],Me=t.current[Ce.id];if(Me){const qe=Me.getBoundingClientRect();le={x:qe.left+qe.width/2,y:qe.top+qe.height/2}}else le={x:Q.left+Q.width/2,y:Q.top+Q.height/2}}else{const Ce=R==="lane1"?0:R==="lane2"?1:2,Me=q===I?Q.bottom-200:Q.top+200;le={x:Q.left+Q.width/4*(Ce+1),y:Me}}}else{const q=N(M,R,F,U);if(!q){console.warn(" [CARD VISUAL DEBUG] Target element not found:",{targetId:F,targetPlayer:M,targetLane:R,targetType:U}),Z?.();return}const V=q.getBoundingClientRect();le={x:V.left+V.width/2,y:V.top+V.height/2}}const $=`cardvisual-${Date.now()}`;y(q=>[...q,{id:$,visualType:k||"LASER_BLAST",startPos:{x:ie,y:G},endPos:le,duration:W||800,onComplete:()=>{y(V=>V.filter(ne=>ne.id!==$)),Z?.()}}])}),T.registerVisualHandler("CARD_REVEAL_EFFECT",j=>{const{cardData:k,actingPlayerId:z,onComplete:F}=j;K("ANIMATIONS"," [CARD REVEAL DEBUG] CARD_REVEAL_EFFECT handler called:",{cardName:k?.name});const M=e.getLocalPlayerId(),R=z===M,U=`cardreveal-${Date.now()}`;x(W=>[...W,{id:U,card:k,label:R?"You Played":"Opponent Played",onComplete:()=>{x(Z=>Z.filter(Q=>Q.id!==U)),F?.()}}])}),T.registerVisualHandler("SHIP_ABILITY_REVEAL_EFFECT",j=>{const{abilityName:k,actingPlayerId:z,onComplete:F}=j,M=e.getLocalPlayerId();if(z===M)F?.();else{const U=`shipability-${Date.now()}`;S(W=>[...W,{id:U,abilityName:k,label:"Opponent Used",onComplete:()=>{S(Z=>Z.filter(Q=>Q.id!==U)),F?.()}}])}}),T.registerVisualHandler("PHASE_ANNOUNCEMENT_EFFECT",async j=>{const{phaseText:k,phaseName:z,firstPlayerId:F,onComplete:M}=j;await new Promise(W=>setTimeout(W,300));let R=null;if(F){const W=e.getLocalPlayerId();R=F===W?"You Go First":"Opponent Goes First"}K("ANIMATIONS"," [PHASE ANNOUNCEMENT DEBUG] PHASE_ANNOUNCEMENT_EFFECT handler called:",{localPlayerId:e.getLocalPlayerId()});const U=`phaseannouncement-${Date.now()}`;C(W=>[...W,{id:U,phaseText:k,subtitle:R,onComplete:()=>{C(Z=>Z.filter(Q=>Q.id!==U)),M?.()}}])}),T.registerVisualHandler("PASS_NOTIFICATION_EFFECT",j=>{const{passingPlayerId:k,onComplete:z}=j,F=e.getLocalPlayerId(),M=k===F,R=`passnotif-${Date.now()}`;P(U=>[...U,{id:R,label:M?"You Passed":"Opponent Passed",onComplete:()=>{P(W=>W.filter(Z=>Z.id!==R)),z?.()}}])}),T.registerVisualHandler("SHAKE_EFFECT",j=>{const{targetId:k,config:z,onComplete:F}=j,M=t.current[k];M?(M.classList.add("animate-shake-damage"),setTimeout(()=>{M.classList.remove("animate-shake-damage"),F?.()},z?.duration||500)):F?.()}),T.registerVisualHandler("TELEPORT_EFFECT",j=>{const{targetId:k,laneId:z,playerId:F,onComplete:M}=j,R=t.current[k];if(!R){console.warn(" [TELEPORT DEBUG] Drone element not found - placeholder may not have rendered yet:",k),M?.();return}const U=l(R,u.current),W=e.getLocalPlayerId(),Q=F===W?"#00ffff":"#ec4899",I=`teleport-${k}-${Date.now()}`;w(G=>[...G,{id:I,top:U.y,left:U.x,color:Q,duration:600,onComplete:()=>{w(ie=>ie.filter(le=>le.id!==I)),M?.()}}])});const _=e.subscribe(j=>{j.type==="animationStateChange"&&f(j.payload.blocking)});return e.actionProcessor.setAnimationManager(T),_},[r,i,e,s,t,n,l,u,p,f,h,g,y,x,C,A,w,P])}const kK=({droneData:e,startPos:t,endPos:n,config:r,onComplete:i})=>{const[s,l]=E.useState(t),[u,p]=E.useState([]),f=E.useRef(),h=E.useRef(Date.now());return E.useEffect(()=>{const g=r.duration||800,y=()=>{const x=Date.now()-h.current,S=Math.min(x/g,1),C=S<.5?2*S*S:-1+(4-2*S)*S,A=t.x+(n.x-t.x)*C,w=t.y+(n.y-t.y)*C;l({x:A,y:w}),r.trail&&p(P=>[...P.slice(-8),{id:Date.now(),x:A,y:w}]),S<1?f.current=requestAnimationFrame(y):i?.()};return f.current=requestAnimationFrame(y),()=>{f.current&&cancelAnimationFrame(f.current)}},[t,n,r,i]),d.jsxs(d.Fragment,{children:[u.map((g,y)=>d.jsx("div",{style:{position:"fixed",left:g.x+35,top:g.y+60,width:"10px",height:"10px",borderRadius:"50%",background:e.owner==="player1"?"#00bcd4":"#e91e63",opacity:.3+y*.05,filter:"blur(2px)",pointerEvents:"none",zIndex:9998}},g.id)),d.jsx("div",{style:{position:"fixed",left:s.x,top:s.y,width:"90px",height:"135px",zIndex:9999,pointerEvents:"none",transform:`scale(${r.isReturn?1:1.1})`,transition:"transform 0.3s"},children:d.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"}})})]})},MK=({position:e,healAmount:t,onComplete:n})=>{const[r,i]=E.useState([]);if(E.useEffect(()=>{if(!e||!t){n?.();return}const u=t===1?"small":t<=3?"medium":"large",p={small:{particleCount:12,spread:40,glowSize:30,duration:1e3},medium:{particleCount:18,spread:60,glowSize:50,duration:1200},large:{particleCount:24,spread:80,glowSize:70,duration:1400}}[u],f=[];for(let g=0;g<p.particleCount;g++){const y=Math.PI*2*g/p.particleCount+(Math.random()-.5)*.5,x=p.spread*(.5+Math.random()*.5);f.push({id:g,x:Math.cos(y)*x,y:Math.sin(y)*x,delay:g/p.particleCount*300,floatDistance:40+Math.random()*30,symbol:Math.random()>.3?"+":""})}i(f);const h=setTimeout(()=>{n?.()},p.duration);return()=>clearTimeout(h)},[t,n,e]),!e||!t)return null;const s=t===1?"small":t<=3?"medium":"large",l={small:{particleCount:12,spread:40,glowSize:30,duration:1e3},medium:{particleCount:18,spread:60,glowSize:50,duration:1200},large:{particleCount:24,spread:80,glowSize:70,duration:1400}}[s];return d.jsxs("div",{style:{position:"fixed",left:`${e.left+e.width/2}px`,top:`${e.top+e.height/2}px`,width:`${l.spread*2}px`,height:`${l.spread*2}px`,transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9998},children:[d.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:`${l.glowSize}px`,height:`${l.glowSize}px`,transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(34, 197, 94, 0.8) 0%, rgba(34, 197, 94, 0.4) 50%, rgba(34, 197, 94, 0) 70%)",animation:`healPulse ${l.duration}ms ease-out forwards`,borderRadius:"50%"}}),r.map(u=>d.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",color:"#22c55e",fontSize:s==="large"?"18px":s==="medium"?"16px":"14px",fontWeight:"bold",textShadow:"0 0 4px rgba(34, 197, 94, 0.8)",display:"flex",alignItems:"center",justifyContent:"center","--start-x":`${u.x}px`,"--start-y":`${u.y}px`,"--float-distance":`${u.floatDistance}px`,animation:`healFloat ${l.duration}ms ease-out ${u.delay}ms forwards`,opacity:0},children:u.symbol},u.id)),d.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:`${l.glowSize*1.5}px`,height:`${l.glowSize*1.5}px`,transform:"translate(-50%, -50%)",border:"2px solid rgba(34, 197, 94, 0.6)",borderRadius:"50%",animation:`healPulse ${l.duration}ms ease-out 100ms forwards`,boxShadow:"0 0 15px rgba(34, 197, 94, 0.4)"}}),s!=="small"&&r.slice(0,Math.floor(l.particleCount/3)).map((u,p)=>d.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"8px",height:"8px",backgroundColor:"#22c55e",borderRadius:"50%",boxShadow:"0 0 8px rgba(34, 197, 94, 0.8)","--start-x":`${u.x*.7}px`,"--start-y":`${u.y*.7}px`,"--float-distance":`${u.floatDistance*.8}px`,animation:`healFloat ${l.duration}ms ease-out ${u.delay+150}ms forwards, healSparkle ${l.duration}ms ease-in-out ${u.delay+150}ms infinite`,opacity:0}},`sparkle-${p}`))]})},IK=({card:e,label:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),d.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[d.jsx("h2",{className:`
            text-4xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
            card-reveal-label
            ${r?"card-reveal-label-show":""}
          `,children:t}),d.jsx("div",{className:`
            transform scale-110 card-reveal-card
            ${r?"":"card-reveal-dissolve"}
          `,children:d.jsx(Ga,{card:e,isPlayable:!1})}),d.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            card-reveal-scanline
            ${r?"card-reveal-scanline-active":""}
          `})]})]})},RK=({abilityName:e,label:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),d.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[d.jsx("h2",{className:`
            text-5xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
          `,children:t}),d.jsx("div",{className:`
            px-8 py-4 rounded-xl
            bg-gradient-to-r from-purple-900/80 via-pink-900/80 to-purple-900/80
            border-2 border-purple-400
            shadow-[0_0_30px_rgba(168,85,247,0.6)]
            transition-all duration-300
            ${r?"scale-100":"scale-90"}
          `,children:d.jsx("p",{className:"text-3xl font-bold text-white text-center",children:e})}),d.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            transition-all duration-1000
            ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-full"}
          `})]})]})},LK=({label:e,onComplete:t})=>{const[n,r]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{r(!0)});const i=setTimeout(()=>{r(!1);const s=setTimeout(()=>{t?.()},300);return()=>clearTimeout(s)},1e3);return()=>clearTimeout(i)},[t]),d.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${n?"opacity-100":"opacity-0"}
      `,children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${n?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[d.jsx("h2",{className:`
            text-5xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-red-300 via-red-400 to-red-300
            animate-pulse
            drop-shadow-[0_0_20px_rgba(239,68,68,0.8)]
          `,children:e}),d.jsx("div",{className:`
            absolute top-1/2 left-0 w-full h-1 pointer-events-none
            ${n?"animate-horizontalScan":""}
          `,style:{background:"linear-gradient(to right, rgba(239, 68, 68, 0) 0%, rgba(239, 68, 68, 0.8) 50%, rgba(239, 68, 68, 0) 100%)",boxShadow:"0 0 10px rgba(239, 68, 68, 0.8), 0 0 20px rgba(239, 68, 68, 0.4)",transform:"translateY(-50%)"}})]}),d.jsx("style",{children:`
        @keyframes horizontalScan {
          0% {
            transform: translateX(-100%) translateY(-50%);
            opacity: 0;
          }
          10% {
            opacity: 1;
          }
          90% {
            opacity: 1;
          }
          100% {
            transform: translateX(100%) translateY(-50%);
            opacity: 0;
          }
        }

        .animate-horizontalScan {
          animation: horizontalScan 800ms ease-in-out;
        }
      `})]})},$K=({phaseText:e,subtitle:t,onComplete:n})=>{const[r,i]=E.useState(!1);return E.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1500);return()=>clearTimeout(s)},[n]),d.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:`
          relative flex flex-col items-center
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[d.jsx("h1",{className:`
            text-6xl font-orbitron font-black uppercase tracking-widest text-center
            phase-announcement-text
            ${r?"phase-announcement-shine":""}
          `,style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:e}),t&&d.jsx("p",{className:`
              text-2xl font-orbitron font-medium uppercase tracking-wider text-center
              text-cyan-300/80 mt-4
              transition-all duration-300
              ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
            `,children:t}),d.jsx("div",{className:`
            mt-8 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent
            transition-all duration-500
            ${r?"w-96 opacity-100":"w-0 opacity-0"}
          `}),d.jsx("div",{className:`
            absolute inset-0 pointer-events-none overflow-hidden
          `,children:d.jsx("div",{className:`
              absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent
              phase-announcement-scanline
              ${r?"phase-announcement-scanline-active":""}
            `})})]})]})},BK=({startPos:e,endPos:t,attackValue:n=1,duration:r=500,onComplete:i})=>{const[s,l]=E.useState(0);E.useEffect(()=>{setTimeout(()=>l(1),50);const y=r*.7;setTimeout(()=>l(0),y);const x=setTimeout(()=>{i?.()},r);return()=>{clearTimeout(x)}},[r,i]);const u=t.x-e.x,p=t.y-e.y,f=Math.sqrt(u*u+p*p),h=Math.atan2(p,u)*(180/Math.PI),g=Math.max(3,2+n*1.5);return d.jsxs("div",{style:{position:"fixed",left:`${e.x}px`,top:`${e.y}px`,width:`${f}px`,height:`${g}px`,transformOrigin:"0 50%",transform:`rotate(${h}deg)`,pointerEvents:"none",zIndex:9998,opacity:s,transition:`opacity ${r*.15}ms ease-in-out`},children:[d.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1) 10%, rgba(255, 0, 0, 1) 90%, rgba(255, 0, 0, 0))",boxShadow:`0 0 ${g*2}px rgba(255, 0, 0, 0.8), 0 0 ${g*4}px rgba(255, 0, 0, 0.4)`,animation:`laserPulse ${r}ms ease-in-out`}}),d.jsx("div",{style:{position:"absolute",width:"100%",height:"40%",top:"30%",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 20%, rgba(255, 255, 255, 0.9) 80%, rgba(255, 255, 255, 0))",filter:"blur(1px)"}})]})},zK=({top:e,left:t,duration:n=800,color:r="#00ffff",onComplete:i})=>{const[s,l]=E.useState([]);return E.useEffect(()=>{const u=[];for(let h=0;h<16;h++){const g=Math.PI*2*h/16;u.push({id:h,angle:g,delay:h/16*200})}l(u);const f=setTimeout(()=>{i?.()},n);return()=>clearTimeout(f)},[n,i]),d.jsxs("div",{style:{position:"fixed",left:`${t}px`,top:`${e}px`,width:"120px",height:"180px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999},children:[d.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out forwards`},children:d.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out forwards`,boxShadow:`0 0 20px ${r}`}})}),d.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out ${n*.2}ms forwards`},children:d.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out ${n*.2}ms forwards`,boxShadow:`0 0 15px ${r}`}})}),s.map(u=>d.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"6px",height:"6px",backgroundColor:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`,"--angle":`${u.angle}rad`,animation:`teleportParticle ${n}ms ease-in ${u.delay}ms forwards`}},u.id)),d.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"40px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${r}cc 0%, ${r}00 70%)`,animation:`teleportGlow ${n}ms ease-in-out forwards`}})]})},y2=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:p,endGame:f,processAction:h,gameStateManager:g,p2pManager:y}=wi(),{getEffectiveStats:x,getEffectiveShipStats:S,gameDataService:C}=mh(),A=_R.features.aiHandDebug,[w,P]=E.useState(!1),[T,N]=E.useState(!1),[_,j]=E.useState(!1),[k,z]=E.useState([]),[F,M]=E.useState([]),[R,U]=E.useState([]),[W,Z]=E.useState([]),[Q,I]=E.useState([]),[G,ie]=E.useState([]),[le,$]=E.useState([]),[q,V]=E.useState([]),[ne,ye]=E.useState([]),[Se,Ce]=E.useState([]),[Me,qe]=E.useState(!1),[be,we]=E.useState(null),[Oe,ge]=E.useState(null),[xt,He]=E.useState(null),[Bt,Gt]=E.useState(null),[wt,er]=E.useState(!1),[Oo,Oi]=E.useState(!1),[Hn,Gn]=E.useState(null),[Ea,qn]=E.useState(!1),[jo,aa]=E.useState(!1),[fn,On]=E.useState(!1),[jt,qa]=E.useState(!1),[Ke,jn]=E.useState(null),[ji,Ya]=E.useState(null),[ia,_i]=E.useState(null),[gr,Fa]=E.useState(null),[_o,Ts]=E.useState([]),[L,oe]=E.useState([]),[de,ce]=E.useState(!1),[he,xe]=E.useState(null),[je,nn]=E.useState(null),[Pt,Ct]=E.useState(null),[Ge,Fe]=E.useState("drones"),[Tt,pn]=E.useState(!0),[Ds,Ku]=E.useState([]),[ki,Mi]=E.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[Wu,Ns]=E.useState({}),[ft,sa]=E.useState(null),[Ir,zt]=E.useState([]),[tr,oa]=E.useState(null),[nr,Yn]=E.useState(null),[_n,Va]=E.useState(null),[wa,Vl]=E.useState([]),[Pa,Fn]=E.useState(null),[kn,Ka]=E.useState(null),[pt,Cn]=E.useState(null),[Kl,ko]=E.useState(null),[gh,Wl]=E.useState(null),[rr,Xl]=E.useState(null),[la,ca]=E.useState(null),[Xu,Os]=E.useState(!1),[Qu,Kt]=E.useState(null),[Ii,js]=E.useState(null),[Rr,Ta]=E.useState(null),[Mo,Wa]=E.useState(0),[Da,Io]=E.useState(0),[Ql,Jl]=E.useState(null),[Zl,Ju]=E.useState(null),[Ab,ec]=E.useState(null),[_s,Ro]=E.useState(null),[ks,Ms]=E.useState(null),[tc,Lo]=E.useState(0),Is=E.useRef(null),ua=E.useRef({}),Lr=E.useRef({}),da=E.useRef(null),yr=E.useRef(!1),$r=E.useRef(null),{explosions:nc,triggerExplosion:Rs}=wK(ua,da);_K(g,ua,Lr,s,l,Rs,y0,da,z,qe,M,U,Z,I,ie,$,V,ye,Ce),E.useEffect(()=>{Wf.initialize(g,g.actionProcessor,()=>e.gameMode!=="local",Tr)},[]),E.useEffect(()=>{if(e.gameMode==="guest")return;const B=ve=>{const{type:me,phase:Ae,playerId:Be,data:Ye}=ve;if(me==="bothPlayersComplete"){const{phase:Dt}=ve;Hn===Dt&&Gn(null)}if(me==="phaseTransition"){const{newPhase:Dt,previousPhase:Mn,firstPlayerResult:Bi}=ve;Hn===Mn&&Gn(null),Dt==="deploymentComplete"&&er(!0)}},te=Wf.subscribe(B);return()=>{te()}},[i,n,we,Hn,e.gameMode]);const{turnPhase:nt,turn:fa,currentPlayer:pa,firstPlayerOfRound:rc,firstPasserOfPreviousRound:Vn,firstPlayerOverride:Ri,passInfo:Wt,winner:An,unplacedSections:Eb,shieldsToAllocate:ac,opponentShieldsToAllocate:ic,gameLog:Xa,placedSections:sc,testMode:Zu}=e,[wb,Pb]=E.useState(pa),yh=E.useRef(Wt),oc=E.useRef(nt),vh=E.useRef(An);E.useEffect(()=>{yh.current=Wt},[Wt]),E.useEffect(()=>{oc.current=nt},[nt]),E.useEffect(()=>{vh.current=An},[An]);const Re=s(),et=l(),Ls=u(),$o=p();if(!Re||!et)return d.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:d.jsx("div",{children:"Initializing game board..."})});E.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]);const lc=E.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);E.useEffect(()=>{if(!i())return;const B=ve=>{if(ve.type==="PHASE_COMPLETED"){const{phase:me}=ve.data||ve}};return y.subscribe(B)},[i,y]);const Bo=Re?S(Re,Ls):null,ed=et?S(et,$o):null,td=E.useMemo(()=>Re?Object.values(Re.dronesOnBoard).flat().length:0,[Re?.dronesOnBoard]),nd=E.useMemo(()=>et?Object.values(et.dronesOnBoard).flat().length:0,[et?.dronesOnBoard]),cc=E.useMemo(()=>e.commitments?.droneSelection?.[r()]?.drones||[],[e.commitments?.droneSelection,r]),xh=E.useMemo(()=>[...Re.activeDronePool].sort((B,te)=>B.class!==te.class?B.class-te.class:B.name.localeCompare(te.name)),[Re.activeDronePool]);E.useMemo(()=>Re?Object.keys(Re.shipSections).some(B=>Re.shipSections[B].allocatedShields<C.getEffectiveSectionMaxShields(B,Re,Ls)):!1,[Re.shipSections,Ls,C]);const bh=["commitment","destroyDrone","addShield","resetShields"],rt=E.useCallback(async(B,te)=>{if(e.gameMode==="guest"){if(bh.includes(B))return y.sendActionToHost(B,te),{success:!0,hostProcessing:!0};g.trackOptimisticAction(B,te),K("ANIMATIONS"," [GUEST OPTIMISTIC] Tracked action for deduplication:",{totalTracked:g.optimisticActions?.length||0});const me=await h(B,te);return y.sendActionToHost(B,te),me}return await h(B,te)},[e.gameMode,h,y,g]);E.useCallback(B=>{if(i()){const te={type:"PHASE_COMPLETED",data:{phase:B}};y.sendData(te)}},[i,y]),E.useCallback(async()=>{je&&!je.card.effect.goAgain?await rt("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):je&&je.card.effect.goAgain&&!An&&await rt("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),nn(null)},[h,n,r,je,An]);const rd=E.useCallback(async()=>{await rt("resetShields",{playerId:n()})},[rt,n]),Sh=E.useCallback(()=>{qa(!0)},[]),Ch=E.useCallback(async()=>{const B=await rt("commitment",{playerId:n(),phase:"allocateShields",actionData:{committed:!0}});K("COMMITMENTS"," Shield allocation commitment result:",{hasData:!!B.data,bothPlayersComplete:B.data?.bothPlayersComplete}),((e.commitments||{}).allocateShields||{})[r()]?.completed||Gn("allocateShields")},[rt,n,e.commitments,r]);E.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:te}=Ie.calculateAllValidTargets(ft,tr,pt,_n,Re,et);zt(B),Vl(te),ft&&(Va(null),oa(null))},[ft,tr,_n,Re,et,pt]);const $s=()=>{ft&&(sa(null),jn(null))},Kn=()=>{Va(null),Cn(null)},ar=()=>{Ke&&jn(null),ft&&sa(null),tr&&oa(null),(_n||pt)&&(Va(null),Cn(null)),Rr&&ud(),kn&&Ka(null),nr&&Yn(null),Pa&&Fn(null),Oe&&ge(null)},zo=E.useCallback(async B=>{if(yr.current){console.warn("Attack already in progress. Aborting duplicate call.");return}yr.current=!0;try{await new Promise(ve=>setTimeout(ve,250));const te=await rt("attack",{attackDetails:B});if(te?.needsInterceptionDecision){K("COMBAT"," [APP] Interception decision needed, showing modal..."),Fa(te.interceptionData),yr.current=!1;return}}catch(te){console.error("Error in resolveAttack:",te)}finally{yr.current=!1}},[Rs,h,n,r]),ad=E.useCallback(async(B,te,ve)=>{try{const me=await rt("ability",{droneId:te.id,abilityIndex:te.abilities.findIndex(Ae=>Ae.name===B.name),targetId:ve?.id||null});$s()}catch(me){console.error("Error in resolveAbility:",me),$s()}},[h,n]),Ah=E.useCallback(async(B,te,ve)=>{const me=await rt("shipAbility",{ability:B,sectionName:te,targetId:ve?.id||null,playerId:n()});if(me.mandatoryAction){ca(me.mandatoryAction),Fe("hand"),pn(!0),oa(null),Yn(null);return}if(me.requiresShieldReallocation){oa(null),Yn(null);return}return oa(null),Yn(null),me},[h,n]),uc=E.useCallback(async(B,te,ve,me=null)=>{if(ve===r()){let Be="",Ye="";if(te)if(te.name){if(Be=te.name,te.id&&te.owner){const Dt=te.owner===n()?Re:et;for(const[Mn,Bi]of Object.entries(Dt.dronesOnBoard))if(Bi.some(Na=>Na.id===te.id)){Ye=Mn.replace("lane","Lane ");break}}}else te.id.startsWith("lane")?(Be=`Lane ${te.id.slice(-1)}`,Ye=`Lane ${te.id.slice(-1)}`):Be=te.id.replace(/([A-Z])/g," $1").replace(/^./,Dt=>Dt.toUpperCase());nn({card:B,targetName:Be,targetLane:Ye})}const Ae=await rt("cardPlay",{card:B,targetId:te?.id||null,playerId:ve});if(Ae.needsCardSelection){if(Ae.needsCardSelection.type==="single_move"||Ae.needsCardSelection.type==="multi_move"){Cn({card:Ae.needsCardSelection.card,phase:Ae.needsCardSelection.phase,selectedDrones:[],sourceLane:null});return}js({...Ae.needsCardSelection,onConfirm:async Be=>{await dc(Be,Ae.needsCardSelection,B,te,ve,me,null),js(null)},onCancel:()=>{js(null),ve===n()&&(Kn(),Fn(null))}});return}return ve===n()&&(Kn(),Fn(null)),Ae},[h,n,Re,et]),dc=E.useCallback(async(B,te,ve,me,Ae,Be,Ye=null)=>{await h("searchAndDrawCompletion",{card:ve,selectedCards:B,selectionData:te,playerId:Ae,playerStatesWithEnergyCosts:Ye}),Ae===n()&&(Kn(),Fn(null))},[h,n,Kn]),Bs=E.useCallback(async(B,te,ve,me)=>{await rt("movementCompletion",{card:B,movementType:"multi_move",drones:te,fromLane:ve,toLane:me,playerId:n()}),Cn(null),Kn()},[h,n]),Eh=E.useCallback(async(B,te,ve,me)=>{await rt("movementCompletion",{card:B,movementType:"single_move",drones:[te],fromLane:ve,toLane:me,playerId:n()}),Cn(null),Kn()},[h,n]),id=B=>{Tt?Ge===B?pn(!1):Fe(B):(pn(!0),Fe(B))};E.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:te}=Ie.calculateAllValidTargets(ft,tr,pt,_n,Re,et);zt(B),Vl(te),ft&&(Va(null),oa(null))},[ft,tr,_n,Re,et,pt]),E.useEffect(()=>{An&&!Ea&&qn(!0)},[An,Ea]),E.useEffect(()=>{if(nt==="action"){const B=Ie.calculatePotentialInterceptors(Ke,Re,et,lc());Ts(B)}else Ts([])},[Ke,nt,Re,et,Ie,Ls,$o]),E.useEffect(()=>{if(nt==="action"&&Ke&&!Ke.isExhausted){const[B]=Object.entries(Re.dronesOnBoard).find(([te,ve])=>ve.some(me=>me.id===Ke.id))||[];if(B){const ve=(et.dronesOnBoard[B]||[]).filter(me=>x(me,B).keywords.has("GUARDIAN")).map(me=>me.id);oe(ve)}else oe([])}else oe([])},[Ke,nt,Re,et,x]),E.useEffect(()=>{const B=n();if(e.interceptionPending){const{attackingPlayerId:te,defendingPlayerId:ve,attackDetails:me,interceptors:Ae}=e.interceptionPending;te===B?ce(!0):ve===B&&Fa({attackDetails:me,interceptors:Ae})}else ce(!1),Fa(null)},[e.interceptionPending,n]),E.useEffect(()=>{if(e.lastInterception){const{interceptor:B,timestamp:te}=e.lastInterception;xe({droneId:B.id,timestamp:te})}},[e.lastInterception]),E.useEffect(()=>{Ya(null)},[Ke]),E.useEffect(()=>{if(Ke&&!ft&&nt==="action"){const B=y0(ua.current[Ke.id],da.current);B&&Mi({visible:!0,start:B,end:{x:B.x,y:B.y}})}else Mi(B=>({...B,visible:!1}))},[Ke,nt,ft]),E.useEffect(()=>{const B=ve=>{if(ki.visible&&Is.current&&da.current){const me=da.current.getBoundingClientRect(),Ae=ve.clientX-me.left,Be=ve.clientY-me.top;Is.current.setAttribute("x2",Ae),Is.current.setAttribute("y2",Be)}},te=da.current;return te?.addEventListener("mousemove",B),()=>{te?.removeEventListener("mousemove",B)}},[ki.visible]),E.useEffect(()=>{An&&yr.current&&(yr.current=!1)},[An,nt,pa]),E.useEffect(()=>{e.gameMode==="guest"&&g.emit("render_complete")},[e,g]),E.useEffect(()=>{if(e.gameMode!=="guest")return;const B=$r.current;if(B===null){$r.current=nt;return}if(B!==nt){const te={newPhase:nt,previousPhase:B,gameStage:e.gameStage,roundNumber:e.roundNumber};(me=>{{const{newPhase:Ae,previousPhase:Be}=me;Hn===Be&&Gn(null),Ae==="deploymentComplete"&&er(!0)}})(te),$r.current=nt}},[nt,e.gameStage,e.roundNumber,e.gameMode,Hn]);const sd=()=>{e.gameMode==="local"&&Tr.cleanup(),f(),yr.current=!1,jn(null),we(null),sa(null),zt([]),ca(null),Os(!1),Kt(null),Va(null),Vl([]),Fn(null),qn(!1)},od=async B=>{const{turnPhase:te}=e;K("SHIELD_CLICKS"," handleAllocateShield called",{localPlayerId:n()}),te==="allocateShields"?await rt("addShield",{sectionName:B,playerId:n()}):await rt("reallocateShields",{action:"add",sectionName:B,playerId:n()})},ld=async B=>{if(Da<=0||Re.shipSections[B].allocatedShields<=0)return;(await rt("reallocateShields",{action:"remove",sectionName:B,playerId:n()})).success&&(Io(me=>me-1),Wa(me=>me+1))},cd=async B=>{if(Mo<=0)return;(await rt("reallocateShields",{action:"add",sectionName:B,playerId:n()})).success&&Wa(ve=>ve-1)},Li=()=>{Ju(JSON.parse(JSON.stringify(Re.shipSections))),Ta("adding")},wh=async()=>{Rr==="removing"?(await rt("reallocateShields",{action:"restore",originalShipSections:Ql,playerId:n()}),Io(_s.ability.effect.value.maxShields),Wa(0)):Rr==="adding"&&(await rt("reallocateShields",{action:"restore",originalShipSections:Zl,playerId:n()}),Wa(Da+Mo))},ud=async()=>{await rt("reallocateShields",{action:"restore",originalShipSections:Ql,playerId:n()}),Ta(null),Io(0),Wa(0),Jl(null),Ju(null),Ro(null)},Ph=()=>{Yn({ability:_s.ability,sectionName:_s.sectionName,target:null})},dd=async()=>{const B=n(),te=await rt("acknowledgeDeploymentComplete",{playerId:B});te.success&&(er(!1),te.data?.bothPlayersComplete||Gn("deploymentComplete"))},fd=B=>{if(Rr){Rr==="removing"?ld(B):Rr==="adding"&&cd(B);return}nt==="allocateShields"&&od(B)},zs=B=>{Wt[n()+"Passed"]||(Ke&&Ke.name===B.name?jn(null):(jn(B),sa(null),Kn()))},$i=async(B,te=Ke)=>{const ve=te;try{K("DEPLOYMENT"," App.jsx: Deploying drone:",{droneName:ve?.name,droneObject:ve,lane:B,playerId:n(),turn:fa});const me=await rt("deployment",{droneData:ve,laneId:B,playerId:n(),turn:fa});me.success?jn(null):we({title:me.error,text:me.message,isBlocking:!0})}catch(me){console.error("Error executing deployment:",me),we({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},Th=B=>{if(!(!Ke||pa!==n()||Wt[n()+"Passed"])){if(ar(),fa===1){const te=Ie.validateDeployment(Re,Ke,fa,td,Bo);if(!te.isValid){we({title:te.reason,text:te.message,isBlocking:!0});return}const{budgetCost:ve,energyCost:me}=te;if(me>0){ge({lane:B,budgetCost:ve,energyCost:me,drone:Ke});return}}$i(B)}},Uo=async()=>{Wt[`${n()}Passed`]||(ar(),await rt("playerPass",{playerId:n(),playerName:Re.name,turnPhase:nt,passInfo:Wt,opponentPlayerId:r()}))},pd=(B,te,ve)=>{if(B.stopPropagation(),nt!=="action"||pa!==n()||Wt[n()+"Passed"])return;const me=ve.cost||{};if(te.isExhausted&&me.exhausts!==!1){we({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(me.energy&&Re.energy<me.energy){we({title:"Not Enough Energy",text:`This ability costs ${me.energy} energy, but you only have ${Re.energy}.`,isBlocking:!0});return}if(ve.targeting?.type==="LANE"&&ve.targeting?.location==="SAME_LANE"){const Ae=Ie.getLaneOfDrone(te.id,Re);if(Ae){Ka({ability:ve,drone:te,target:{id:Ae,owner:n()}});return}}ft&&ft.drone.id===te.id?$s():(ar(),sa({drone:te,ability:ve}),jn(te))},hd=(B,te,ve)=>{if(B.stopPropagation(),!(nt!=="action"||!t()||Wt[`${n()}Passed`])){if(Re.energy<ve.cost.energy){we({title:"Not Enough Energy",text:`This ability costs ${ve.cost.energy} energy, but you only have ${Re.energy}.`,isBlocking:!0});return}tr?.ability.id===ve.id?oa(null):ve.targeting?(ar(),oa({sectionName:te.name,ability:ve})):ve.effect.type==="REALLOCATE_SHIELDS"?(ar(),Ta("removing"),Io(ve.effect.value.maxShields),Wa(0),Jl(JSON.parse(JSON.stringify(Re.shipSections))),Ro({ability:ve,sectionName:te.name})):(ar(),Yn({ability:ve,sectionName:te.name,target:null}))}},fc=(B,te,ve)=>{if(B.stopPropagation(),K("COMBAT",`--- handleTokenClick triggered for ${te.name} (isPlayer: ${ve}) ---`),pt&&pt.phase==="select_drones"&&ve){const{selectedDrones:me,maxSelection:Ae}=pt;me.some(Ye=>Ye.id===te.id)?Cn(Ye=>({...Ye,selectedDrones:Ye.selectedDrones.filter(Dt=>Dt.id!==te.id)})):me.length<Ae&&Cn(Ye=>({...Ye,selectedDrones:[...Ye.selectedDrones,te]}));return}if(Ir.some(me=>me.id===te.id)||wa.some(me=>me.id===te.id)){Ho(te,"drone",ve);return}if(nt==="action"&&t()&&Ke&&!Ke.isExhausted&&!ve){K("COMBAT","Attacker selected:",Ke.name,`(ID: ${Ke.id})`),K("COMBAT","Target clicked:",te.name,`(ID: ${te.id})`);const[me]=Object.entries(Re.dronesOnBoard).find(([Be,Ye])=>Ye.some(Dt=>Dt.id===Ke.id))||[],[Ae]=Object.entries(et.dronesOnBoard).find(([Be,Ye])=>Ye.some(Dt=>Dt.id===te.id))||[];if(me&&Ae&&me===Ae){const Be={attacker:Ke,target:te,targetType:"drone",lane:me,attackingPlayer:n()};zo(Be),jn(null)}else we({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(pt&&pt.phase==="select_drones"&&ve){const{selectedDrones:me,maxSelection:Ae}=pt;me.some(Ye=>Ye.id===te.id)?Cn(Ye=>({...Ye,selectedDrones:Ye.selectedDrones.filter(Dt=>Dt.id!==te.id)})):me.length<Ae&&Cn(Ye=>({...Ye,selectedDrones:[...Ye.selectedDrones,te]}));return}if(la?.type==="destroy"&&ve){Kt({type:"destroy",target:te,onConfirm:()=>Oh(te),onCancel:()=>Kt(null),text:`Are you sure you want to destroy your ${te.name}?`});return}if(ve&&nt==="action"&&t()&&!Wt[`${n()}Passed`]){if(te.isExhausted)return;Ke?.id===te.id?(K("COMBAT","Action: Deselecting drone",te.name),jn(null)):(K("COMBAT","Action: Selecting drone",te.name),ar(),jn(te));return}Gt(te)},Ho=(B,te,ve)=>{if(tr&&Ir.some(me=>me.id===B.id)){Yn({ability:tr.ability,sectionName:tr.sectionName,target:B});return}if(ft&&Ir.some(me=>me.id===B.id)){ad(ft.ability,ft.drone,B);return}if(_n&&wa.some(me=>me.id===B.id)){const me=ve?n():r();Fn({card:_n,target:{...B,owner:me}});return}if(nt==="action"&&t()&&Ke&&!Ke.isExhausted&&!ve&&te==="section"){K("COMBAT","Attacker selected:",Ke.name,`(ID: ${Ke.id})`),K("COMBAT","Target clicked:",B.name);const[me]=Object.entries(Re.dronesOnBoard).find(([Ae,Be])=>Be.some(Ye=>Ye.id===Ke.id))||[];if(me){const Ae=et.dronesOnBoard[me];if(Ae&&Ae.some(Ye=>x(Ye,me).keywords.has("GUARDIAN")&&!Ye.isExhausted))we({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{const Ye={attacker:Ke,target:B,targetType:"section",lane:me,attackingPlayer:n()};zo(Ye),jn(null)}}else we({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}te==="drone"&&Gt(B)},md=(B,te,ve)=>{if(B.stopPropagation(),ft&&ft.ability.targeting.type==="LANE"){const me=ve?n():r();if(Ir.some(Ae=>Ae.id===te&&Ae.owner===me)){Ka({ability:ft.ability,drone:ft.drone,target:{id:te,owner:me}});return}}if(pt&&ve&&wa.some(me=>me.id===te)){const{phase:me,sourceLane:Ae,selectedDrones:Be}=pt;if(me==="select_source_lane"){Cn(Ye=>({...Ye,phase:"select_drones",sourceLane:te}));return}if(me==="select_destination_lane"){Bs(pt.card,Be,Ae,te);return}}if(pt&&pt.card.effect.type==="SINGLE_MOVE"&&pt.phase==="select_destination"&&ve){wa.some(me=>me.id===te)&&Eh(pt.card,pt.selectedDrone,pt.sourceLane,te);return}if(_n&&_n.targeting.type==="LANE"){const me=ve?n():r();if(wa.some(Ae=>Ae.id===te&&Ae.owner===me)){Fn({card:_n,target:{id:te,owner:me}});return}}if(_n){Kn();return}if(ft){$s();return}if(nt==="deployment"&&ve)Th(te);else if(nt==="action"&&ve&&Ke){const[me]=Object.entries(Re.dronesOnBoard).find(([Ye,Dt])=>Dt.some(Mn=>Mn.id===Ke.id))||[];if(!me)return;const Ae=parseInt(me.replace("lane",""),10),Be=parseInt(te.replace("lane",""),10);Math.abs(Ae-Be)===1?He({drone:Ke,from:me,to:te}):we({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},gd=async B=>{const te=n(),ve=t(),me=Wt[`${te}Passed`];if(K("CARD_PLAY",` handleCardClick called: ${B.name}`,{cardId:B.id,cardCost:B.cost,gameMode:e.gameMode,playerEnergy:Re.energy,hasEnoughEnergy:Re.energy>=B.cost}),nt!=="action"){K("CARD_PLAY",` Card click rejected - wrong phase: ${nt}`,{card:B.name});return}if(!ve){K("CARD_PLAY"," Card click rejected - not player's turn",{card:B.name,currentPlayer:e.currentPlayer});return}if(me){K("CARD_PLAY"," Card click rejected - player has passed",{card:B.name});return}if(Re.energy<B.cost){K("CARD_PLAY"," Card click rejected - not enough energy",{card:B.name,cardCost:B.cost,playerEnergy:Re.energy});return}if(B.effect.type==="MULTI_MOVE"||B.effect.type==="SINGLE_MOVE"){K("CARD_PLAY",` Movement card - processing: ${B.name}`,{effectType:B.effect.type}),pt&&pt.card.instanceId===B.instanceId?Kn():(ar(),await uc(B,null,n()));return}if(_n?.instanceId===B.instanceId)K("CARD_PLAY",` Card deselected: ${B.name}`),Kn();else if(B.name==="System Sabotage"){K("CARD_PLAY"," System Sabotage card - getting targets",{card:B.name});const Ae=Ie.getValidTargets(n(),null,B,Re,et);K("CARD_PLAY",` System Sabotage targets found: ${Ae.length}`,{}),ar(),ko({card:B,targets:Ae,opponentState:et})}else if(B.type==="Upgrade"){K("CARD_PLAY",` Upgrade card - getting targets: ${B.name}`);const Ae=Ie.getValidTargets(n(),null,B,Re,et);K("CARD_PLAY",` Upgrade targets found: ${Ae.length}`,{}),Ae.length>0?(ar(),Wl({card:B,targets:Ae})):we({title:"No Valid Targets",text:`There are no drone types that can accept the '${B.name}' upgrade right now.`,isBlocking:!0})}else B.targeting?(K("CARD_PLAY",` Targeted card - waiting for target selection: ${B.name}`,{targeting:B.targeting}),ar(),Va(B)):(K("CARD_PLAY",` Non-targeted card - showing confirmation: ${B.name}`),ar(),Fn({card:B,target:null}))},yd=async B=>{const te=la,ve=te.count-1,me=ve<=0,Ae={playerId:n(),cardsToDiscard:[B],isMandatory:!0};if(me&&te.fromAbility&&te.abilityName&&(Ae.abilityMetadata={abilityName:te.abilityName,sectionName:te.sectionName,actingPlayerId:te.actingPlayerId}),await rt("optionalDiscard",Ae),Kt(null),me)if(ca(null),te.fromAbility){const Be=n();await rt("turnTransition",{newPlayer:Be==="player1"?"player2":"player1"})}else{const Be=await rt("commitment",{playerId:n(),phase:"mandatoryDiscard",actionData:{completed:!0}});Be.data&&!Be.data.bothPlayersComplete&&Gn("mandatoryDiscard")}else ca(Be=>({...Be,count:ve}))},Dh=async B=>{await rt("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!1}),Lo(te=>te+1),Kt(null)},vd=async()=>{Lo(0),await rt("commitment",{playerId:n(),phase:"optionalDiscard",actionData:{completed:!0}}),((e.commitments||{}).optionalDiscard||{})[r()]?.completed||Gn("optionalDiscard")},Nh=()=>g.actionProcessor?.getPhaseCommitmentStatus("optionalDiscard")?.bothComplete||!1,Oh=async B=>{const te=la,ve=await rt("destroyDrone",{droneId:B.id,playerId:n()});if(!ve.success){console.error("Failed to destroy drone:",ve.error);return}const me=te.count-1;if(me<=0){if(nd>ed.totals.cpuLimit&&e.gameMode==="local"){const Ye=Object.values(et.dronesOnBoard).flat().length-S(et,$o).totals.cpuLimit;for(let Dt=0;Dt<Ye;Dt++){const Mn=Object.entries(et.dronesOnBoard).flatMap(([zi,Qa])=>Qa.map(Ui=>({...Ui,lane:zi})));if(Mn.length===0)break;const Bi=Math.min(...Mn.map(zi=>zi.class)),Na=Mn.filter(zi=>zi.class===Bi),pc=Na[Math.floor(Math.random()*Na.length)];await rt("destroyDrone",{droneId:pc.id,playerId:r()})}}ca(null);const Be=await rt("commitment",{playerId:n(),phase:"mandatoryDroneRemoval",actionData:{completed:!0}});Be.data&&!Be.data.bothPlayersComplete&&Gn("mandatoryDroneRemoval")}else ca(Ae=>({...Ae,count:me}));Kt(null)},jh=()=>{if(Xa.length===0){alert("The game log is empty.");return}const B=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],te=Xa.map(Be=>[Be.round,Be.player,Be.actionType,Be.source,Be.target,Be.outcome,Be.debugSource||"N/A"].map(Dt=>`"${String(Dt).replace(/"/g,'""')}"`).join(",")),ve=[B.join(","),...te].join(`
`),me=new Blob([ve],{type:"text/csv;charset=utf-8;"}),Ae=document.createElement("a");if(Ae.download!==void 0){const Be=URL.createObjectURL(me);Ae.setAttribute("href",Be),Ae.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Ae.style.visibility="hidden",document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae)}};return d.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col relative",ref:da,onClick:()=>{$s(),Kn()},children:[d.jsx(hV,{}),d.jsx(yK,{visible:ki.visible,start:ki.start,end:ki.end,lineRef:Is}),nc.map(B=>d.jsx(vK,{top:B.top,left:B.left,size:B.size},B.id)),k.map(B=>d.jsx(kK,{droneData:B.droneData,startPos:B.startPos,endPos:B.endPos,config:B.config,onComplete:B.onComplete},B.id)),F.map(B=>d.jsx(TK,{position:B.position,color:B.color,intensity:B.intensity,onComplete:B.onComplete},B.id)),R.map(B=>d.jsx(MK,{position:B.position,healAmount:B.healAmount,onComplete:B.onComplete},B.id)),W.map(B=>d.jsx(DK,{visualType:B.visualType,startPos:B.startPos,endPos:B.endPos,duration:B.duration,onComplete:B.onComplete},B.id)),Q.map(B=>d.jsx(IK,{card:B.card,label:B.label,onComplete:B.onComplete},B.id)),G.map(B=>d.jsx(RK,{abilityName:B.abilityName,label:B.label,onComplete:B.onComplete},B.id)),le.map(B=>d.jsx($K,{phaseText:B.phaseText,subtitle:B.subtitle,onComplete:B.onComplete},B.id)),Se.map(B=>d.jsx(LK,{label:B.label,onComplete:B.onComplete},B.id)),q.map(B=>d.jsx(BK,{startPos:B.startPos,endPos:B.endPos,attackValue:B.attackValue,duration:B.duration,onComplete:B.onComplete},B.id)),ne.map(B=>d.jsx(zK,{top:B.top,left:B.left,color:B.color,duration:B.duration,onComplete:B.onComplete},B.id)),Me&&d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,cursor:"not-allowed",pointerEvents:"all",backgroundColor:"transparent"}}),d.jsx(mV,{localPlayerState:Re,opponentPlayerState:et,localPlayerEffectiveStats:Bo,opponentPlayerEffectiveStats:ed,turnPhase:nt,turn:fa,passInfo:Wt,firstPlayerOfRound:rc,shieldsToAllocate:ac,opponentShieldsToAllocate:ic,shieldsToRemove:Da,shieldsToAdd:Mo,reallocationPhase:Rr,totalLocalPlayerDrones:td,totalOpponentPlayerDrones:nd,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,currentPlayer:pa,isMultiplayer:i,handlePlayerPass:Uo,handleExitGame:sd,handleResetShields:rd,handleConfirmShields:Ch,handleCancelReallocation:ud,handleResetReallocation:wh,handleContinueToAddPhase:Li,handleConfirmReallocation:Ph,handleRoundStartDraw:vd,optionalDiscardCount:tc,mandatoryAction:la,multiSelectState:pt,AI_HAND_DEBUG_MODE:A,setShowAiHandModal:P,onShowDebugModal:()=>N(!0),onShowOpponentDrones:Sh,onShowGlossary:()=>j(!0),testMode:Zu}),d.jsx(yV,{localPlayerState:Re,opponentPlayerState:et,localPlacedSections:Ls,opponentPlacedSections:$o,selectedCard:_n,validCardTargets:wa,abilityMode:ft,validAbilityTargets:Ir,multiSelectState:pt,turnPhase:nt,reallocationPhase:Rr,shipAbilityMode:tr,hoveredTarget:ji,selectedDrone:Ke,recentlyHitDrones:Ds,potentialInterceptors:_o,potentialGuardians:L,droneRefs:ua,sectionRefs:Lr,mandatoryAction:la,gameEngine:Ie,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:lc,passInfo:Wt,handleTargetClick:Ho,handleLaneClick:md,handleShipSectionClick:fd,handleShipAbilityClick:hd,handleTokenClick:fc,handleAbilityIconClick:pd,setHoveredTarget:Ya,interceptedBadge:he}),d.jsx(mK,{gameMode:e.gameMode,localPlayerState:Re,localPlayerEffectiveStats:Bo,sortedLocalActivePool:xh,gameLog:Xa,footerView:Ge,isFooterOpen:Tt,multiSelectState:pt,selectedCard:_n,turnPhase:nt,mandatoryAction:la,handleFooterButtonClick:id,handleCardClick:gd,cancelCardSelection:Kn,downloadLogAsCSV:jh,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:ia,setHoveredCardId:_i,setIsViewDiscardModalOpen:On,setIsViewDeckModalOpen:aa,handleToggleDroneSelection:zs,selectedDrone:Ke,setViewUpgradesModal:Xl,handleConfirmMandatoryDiscard:yd,setConfirmationModal:Kt,turn:fa,passInfo:Wt,validCardTargets:wa,gameEngine:Ie,opponentPlayerState:et,setAiDecisionLogToShow:Ct,optionalDiscardCount:tc,handleRoundStartDraw:vd,handleRoundStartDiscard:Dh,checkBothPlayersHandLimitComplete:Nh}),be&&d.jsx(Ps,{title:be.title,text:be.text,onClose:be.onClose===null?null:be.onClose||(()=>we(null)),children:be.children}),d.jsx(AK,{show:wt,firstPlayerOfRound:rc,localPlayerId:n(),localPlayerName:Re.name,opponentPlayerName:et.name,onContinue:dd}),d.jsx(EK,{show:Oo,onContinue:()=>Oi(!1)}),d.jsx(T_,{show:!!Hn,phase:Hn,opponentName:et.name,roomCode:y.roomCode}),d.jsx(g_,{deploymentConfirmation:Oe,show:!!Oe,onCancel:()=>ge(null),onConfirm:async()=>{if(!Oe)return;const{lane:B,drone:te}=Oe;ge(null),await $i(B,te)}}),d.jsx(b_,{moveConfirmation:xt,show:!!xt,onCancel:()=>He(null),onConfirm:async()=>{if(!xt)return;const{drone:B,from:te,to:ve}=xt;await rt("move",{droneId:B.id,fromLane:te,toLane:ve,playerId:n()}),He(null),jn(null)}}),d.jsx(h_,{choiceData:gr,show:!!gr,onIntercept:async B=>{const te={...gr.attackDetails,interceptor:B};Fa(null),setTimeout(async()=>{await zo(te)},400)},onDecline:async()=>{const B={...gr.attackDetails,interceptor:null};Fa(null),setTimeout(async()=>{await zo(B)},400)},gameEngine:Ie,turnPhase:nt,isMyTurn:t,passInfo:Wt,getLocalPlayerId:n,localPlayerState:Re,shipAbilityMode:tr,droneRefs:ua,mandatoryAction:la}),d.jsx(m_,{show:de,opponentName:et?.name||"Opponent"}),d.jsx(k_,{isOpen:!!Bt,drone:Bt,onClose:()=>Gt(null)}),je&&d.jsx(A_,{report:je,onClose:()=>nn(null)}),d.jsx(E_,{decisionLog:Pt,show:!!Pt,onClose:()=>Ct(null),getLocalPlayerId:n}),d.jsx(p_,{winner:An,localPlayerId:n(),show:An&&Ea,onClose:()=>qn(!1)}),d.jsx(S_,{mandatoryAction:la,effectiveStats:Bo,show:la&&Xu,onClose:()=>Os(!1)}),d.jsx(C_,{confirmationModal:Qu,show:!!Qu}),d.jsx(gK,{viewUpgradesModal:rr,setViewUpgradesModal:Xl,destroyUpgradeModal:Kl,setDestroyUpgradeModal:ko,upgradeSelectionModal:gh,setUpgradeSelectionModal:Wl,resolveCardPlay:uc,getLocalPlayerId:n,cancelCardSelection:Kn}),d.jsx(y_,{cardConfirmation:Pa,show:!!Pa,onCancel:()=>Fn(null),onConfirm:async()=>{const B=Pa.card,te=Pa.target;Fn(null),setTimeout(async()=>{await uc(B,te,n())},400)}}),d.jsx(v_,{abilityConfirmation:kn,show:!!kn,onCancel:()=>Ka(null),onConfirm:()=>{ad(kn.ability,kn.drone,kn.target),Ka(null)}}),d.jsx(w_,{opponentPlayerState:et,show:w,debugMode:A,onClose:()=>P(!1)}),d.jsx(D_,{isOpen:jt,onClose:()=>qa(!1),drones:cc}),d.jsx(P_,{show:T,onClose:()=>N(!1),gameStateManager:g,gameDataService:C}),_&&d.jsx(MT,{onClose:()=>j(!1)}),d.jsx(uv,{isOpen:jo,onClose:()=>aa(!1),cards:Re.deck,title:"Remaining Cards in Deck",shouldSort:!0}),d.jsx(uv,{isOpen:fn,onClose:()=>On(!1),cards:Re.discardPile,title:"Discard Pile",shouldSort:!1}),d.jsx(__,{isOpen:!!Ii,onClose:Ii?.onCancel||(()=>js(null)),onConfirm:Ii?.onConfirm||(()=>{}),selectionData:Ii,mandatory:!0}),d.jsx(x_,{shipAbilityConfirmation:nr,show:!!nr,onCancel:()=>Yn(null),onConfirm:async()=>await Ah(nr.ability,nr.sectionName,nr.target)}),d.jsx(CK,{isVisible:!1,currentPlayer:pa,gameMode:e.gameMode,roomCode:y.roomCode,lastAction:null,localPlayerState:Re,opponentPlayerState:et,getLocalPlayerId:n})]})};function UK(){const{gameState:e}=wi(),[t,n]=E.useState(!0),r=E.useRef(!1);if(E.useEffect(()=>{const l=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(l)},[]),E.useEffect(()=>{e.gameMode!=="guest"&&(r.current||(Wf.initialize(Ue,Ue.actionProcessor,()=>e.gameMode!=="local",Tr),Ue.setGameFlowManager(Wf),r.current=!0))},[e.gameMode]),E.useEffect(()=>{const l=u=>{if(u.ctrlKey&&u.key==="m"){u.preventDefault();const f=e.appState==="modalShowcase"?"menu":"modalShowcase";Ue.setState({appState:f})}};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[e.appState]),t)return d.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:d.jsx("div",{children:"Loading EREMOS..."})});const i=!(e.appState==="inGame"&&!["droneSelection","placement"].includes(e.turnPhase));let s;switch(e.appState){case"menu":s=d.jsx(dA,{});break;case"lobby":s=d.jsx(n3,{});break;case"deckBuilder":s=d.jsx(pV,{});break;case"modalShowcase":s=d.jsx(sV,{});break;case"testingSetup":s=d.jsx(uV,{});break;case"inGame":switch(e.turnPhase){case"droneSelection":s=d.jsx(r3,{});break;case"deckSelection":s=d.jsx(JF,{});break;case"placement":s=d.jsx(ZF,{});break;case"gameInitializing":s=d.jsx(y2,{});break;default:s=d.jsx(y2,{})}break;default:console.warn("Unknown app state:",e.appState,"defaulting to menu"),s=d.jsx(dA,{})}return d.jsxs("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(2, 6, 23, 1)",overflow:"auto"},children:[i&&d.jsx(M_,{}),s]})}rI.createRoot(document.getElementById("root")).render(d.jsx(dv.StrictMode,{children:d.jsx(UK,{})}));export{on as G,K as d,Ze as f};
