function lP(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function xa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vg={exports:{}},Kc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wC;function Uk(){if(wC)return Kc;wC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return Kc.Fragment=t,Kc.jsx=n,Kc.jsxs=n,Kc}var PC;function Hk(){return PC||(PC=1,vg.exports=Uk()),vg.exports}var p=Hk(),bg={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC;function Gk(){if(TC)return Ke;TC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y($){return $===null||typeof $!="object"?null:($=g&&$[g]||$["@@iterator"],typeof $=="function"?$:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function E($,q,V){this.props=$,this.context=q,this.refs=C,this.updater=V||b}E.prototype.isReactComponent={},E.prototype.setState=function($,q){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,q,"setState")},E.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function w(){}w.prototype=E.prototype;function T($,q,V){this.props=$,this.context=q,this.refs=C,this.updater=V||b}var D=T.prototype=new w;D.constructor=T,S(D,E.prototype),D.isPureReactComponent=!0;var O=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function k($,q,V,te,ve,Se){return V=Se.ref,{$$typeof:e,type:$,key:q,ref:V!==void 0?V:null,props:Se}}function B($,q){return k($.type,q,void 0,void 0,void 0,$.props)}function F($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function M($){var q={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(V){return q[V]})}var R=/\/+/g;function z($,q){return typeof $=="object"&&$!==null&&$.key!=null?M(""+$.key):q.toString(36)}function W(){}function Z($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(W,W):($.status="pending",$.then(function(q){$.status==="pending"&&($.status="fulfilled",$.value=q)},function(q){$.status==="pending"&&($.status="rejected",$.reason=q)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function Q($,q,V,te,ve){var Se=typeof $;(Se==="undefined"||Se==="boolean")&&($=null);var Ee=!1;if($===null)Ee=!0;else switch(Se){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch($.$$typeof){case e:case t:Ee=!0;break;case m:return Ee=$._init,Q(Ee($._payload),q,V,te,ve)}}if(Ee)return ve=ve($),Ee=te===""?"."+z($,0):te,O(ve)?(V="",Ee!=null&&(V=Ee.replace(R,"$&/")+"/"),Q(ve,q,V,"",function(xe){return xe})):ve!=null&&(F(ve)&&(ve=B(ve,V+(ve.key==null||$&&$.key===ve.key?"":(""+ve.key).replace(R,"$&/")+"/")+Ee)),q.push(ve)),1;Ee=0;var Oe=te===""?".":te+":";if(O($))for(var ke=0;ke<$.length;ke++)te=$[ke],Se=Oe+z(te,ke),Ee+=Q(te,q,V,Se,ve);else if(ke=y($),typeof ke=="function")for($=ke.call($),ke=0;!(te=$.next()).done;)te=te.value,Se=Oe+z(te,ke++),Ee+=Q(te,q,V,Se,ve);else if(Se==="object"){if(typeof $.then=="function")return Q(Z($),q,V,te,ve);throw q=String($),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function I($,q,V){if($==null)return $;var te=[],ve=0;return Q($,te,"","",function(Se){return q.call(V,Se,ve++)}),te}function G($){if($._status===-1){var q=$._result;q=q(),q.then(function(V){($._status===0||$._status===-1)&&($._status=1,$._result=V)},function(V){($._status===0||$._status===-1)&&($._status=2,$._result=V)}),$._status===-1&&($._status=0,$._result=q)}if($._status===1)return $._result.default;throw $._result}var ie=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function le(){}return Ke.Children={map:I,forEach:function($,q,V){I($,function(){q.apply(this,arguments)},V)},count:function($){var q=0;return I($,function(){q++}),q},toArray:function($){return I($,function(q){return q})||[]},only:function($){if(!F($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Ke.Component=E,Ke.Fragment=n,Ke.Profiler=i,Ke.PureComponent=T,Ke.StrictMode=r,Ke.Suspense=f,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ke.__COMPILER_RUNTIME={__proto__:null,c:function($){return j.H.useMemoCache($)}},Ke.cache=function($){return function(){return $.apply(null,arguments)}},Ke.cloneElement=function($,q,V){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var te=S({},$.props),ve=$.key,Se=void 0;if(q!=null)for(Ee in q.ref!==void 0&&(Se=void 0),q.key!==void 0&&(ve=""+q.key),q)!N.call(q,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&q.ref===void 0||(te[Ee]=q[Ee]);var Ee=arguments.length-2;if(Ee===1)te.children=V;else if(1<Ee){for(var Oe=Array(Ee),ke=0;ke<Ee;ke++)Oe[ke]=arguments[ke+2];te.children=Oe}return k($.type,ve,void 0,void 0,Se,te)},Ke.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:s,_context:$},$},Ke.createElement=function($,q,V){var te,ve={},Se=null;if(q!=null)for(te in q.key!==void 0&&(Se=""+q.key),q)N.call(q,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ve[te]=q[te]);var Ee=arguments.length-2;if(Ee===1)ve.children=V;else if(1<Ee){for(var Oe=Array(Ee),ke=0;ke<Ee;ke++)Oe[ke]=arguments[ke+2];ve.children=Oe}if($&&$.defaultProps)for(te in Ee=$.defaultProps,Ee)ve[te]===void 0&&(ve[te]=Ee[te]);return k($,Se,void 0,void 0,null,ve)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function($){return{$$typeof:u,render:$}},Ke.isValidElement=F,Ke.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:G}},Ke.memo=function($,q){return{$$typeof:d,type:$,compare:q===void 0?null:q}},Ke.startTransition=function($){var q=j.T,V={};j.T=V;try{var te=$(),ve=j.S;ve!==null&&ve(V,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(le,ie)}catch(Se){ie(Se)}finally{j.T=q}},Ke.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ke.use=function($){return j.H.use($)},Ke.useActionState=function($,q,V){return j.H.useActionState($,q,V)},Ke.useCallback=function($,q){return j.H.useCallback($,q)},Ke.useContext=function($){return j.H.useContext($)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function($,q){return j.H.useDeferredValue($,q)},Ke.useEffect=function($,q,V){var te=j.H;if(typeof V=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect($,q)},Ke.useId=function(){return j.H.useId()},Ke.useImperativeHandle=function($,q,V){return j.H.useImperativeHandle($,q,V)},Ke.useInsertionEffect=function($,q){return j.H.useInsertionEffect($,q)},Ke.useLayoutEffect=function($,q){return j.H.useLayoutEffect($,q)},Ke.useMemo=function($,q){return j.H.useMemo($,q)},Ke.useOptimistic=function($,q){return j.H.useOptimistic($,q)},Ke.useReducer=function($,q,V){return j.H.useReducer($,q,V)},Ke.useRef=function($){return j.H.useRef($)},Ke.useState=function($){return j.H.useState($)},Ke.useSyncExternalStore=function($,q,V){return j.H.useSyncExternalStore($,q,V)},Ke.useTransition=function(){return j.H.useTransition()},Ke.version="19.1.1",Ke}var DC;function jl(){return DC||(DC=1,bg.exports=Gk()),bg.exports}var A=jl();const fv=xa(A),qk=lP({__proto__:null,default:fv},[A]);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fk=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),OC=e=>{const t=Fk(e);return t.charAt(0).toUpperCase()+t.slice(1)},cP=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Vk=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},f)=>A.createElement("svg",{ref:f,...Kk,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:cP("lucide",i),...!s&&!Vk(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,m])=>A.createElement(d,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=(e,t)=>{const n=A.forwardRef(({className:r,...i},s)=>A.createElement(Wk,{ref:s,iconNode:t,className:cP(`lucide-${Yk(OC(e))}`,`lucide-${e}`,r),...i}));return n.displayName=OC(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Qk=Ct("arrow-left",Xk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Bf=Ct("bolt",Jk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],eM=Ct("check",Zk);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nM=Ct("chevron-down",tM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],cu=Ct("chevron-up",rM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],pv=Ct("copy",aM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],_C=Ct("cpu",iM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],oM=Ct("download",sM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ks=Ct("eye",lM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],uM=Ct("gamepad",cM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],fM=Ct("grid-3x3",dM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],hM=Ct("hand",pM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],NC=Ct("layout-grid",mM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],jC=Ct("list",gM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hl=Ct("loader-circle",yM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],bM=Ct("refresh-cw",vM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],o0=Ct("rocket",xM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],CM=Ct("rotate-ccw",SM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kC=Ct("settings",AM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xg=Ct("shield-check",EM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],PM=Ct("shield",wM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],DM=Ct("sword",TM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_M=Ct("upload",OM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jM=Ct("users",NM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],MM=Ct("wifi-off",kM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],MC=Ct("wifi",IM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ln=Ct("x",RM),K=(e,t,n=null)=>{};var Sg={exports:{}},Wc={},Cg={exports:{}},Ag={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC;function LM(){return IC||(IC=1,(function(e){function t(I,G){var ie=I.length;I.push(G);e:for(;0<ie;){var le=ie-1>>>1,$=I[le];if(0<i($,G))I[le]=G,I[ie]=$,ie=le;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var G=I[0],ie=I.pop();if(ie!==G){I[0]=ie;e:for(var le=0,$=I.length,q=$>>>1;le<q;){var V=2*(le+1)-1,te=I[V],ve=V+1,Se=I[ve];if(0>i(te,ie))ve<$&&0>i(Se,te)?(I[le]=Se,I[ve]=ie,le=ve):(I[le]=te,I[V]=ie,le=V);else if(ve<$&&0>i(Se,ie))I[le]=Se,I[ve]=ie,le=ve;else break e}}return G}function i(I,G){var ie=I.sortIndex-G.sortIndex;return ie!==0?ie:I.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var f=[],d=[],m=1,g=null,y=3,b=!1,S=!1,C=!1,E=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function O(I){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=I)r(d),G.sortIndex=G.expirationTime,t(f,G);else break;G=n(d)}}function j(I){if(C=!1,O(I),!S)if(n(f)!==null)S=!0,N||(N=!0,z());else{var G=n(d);G!==null&&Q(j,G.startTime-I)}}var N=!1,k=-1,B=5,F=-1;function M(){return E?!0:!(e.unstable_now()-F<B)}function R(){if(E=!1,N){var I=e.unstable_now();F=I;var G=!0;try{e:{S=!1,C&&(C=!1,T(k),k=-1),b=!0;var ie=y;try{t:{for(O(I),g=n(f);g!==null&&!(g.expirationTime>I&&M());){var le=g.callback;if(typeof le=="function"){g.callback=null,y=g.priorityLevel;var $=le(g.expirationTime<=I);if(I=e.unstable_now(),typeof $=="function"){g.callback=$,O(I),G=!0;break t}g===n(f)&&r(f),O(I)}else r(f);g=n(f)}if(g!==null)G=!0;else{var q=n(d);q!==null&&Q(j,q.startTime-I),G=!1}}break e}finally{g=null,y=ie,b=!1}G=void 0}}finally{G?z():N=!1}}}var z;if(typeof D=="function")z=function(){D(R)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=R,z=function(){Z.postMessage(null)}}else z=function(){w(R,0)};function Q(I,G){k=w(function(){I(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(I){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var ie=y;y=G;try{return I()}finally{y=ie}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(I,G){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var ie=y;y=I;try{return G()}finally{y=ie}},e.unstable_scheduleCallback=function(I,G,ie){var le=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?le+ie:le):ie=le,I){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ie+$,I={id:m++,callback:G,priorityLevel:I,startTime:ie,expirationTime:$,sortIndex:-1},ie>le?(I.sortIndex=ie,t(d,I),n(f)===null&&I===n(d)&&(C?(T(k),k=-1):C=!0,Q(j,ie-le))):(I.sortIndex=$,t(f,I),S||b||(S=!0,N||(N=!0,z()))),I},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(I){var G=y;return function(){var ie=y;y=G;try{return I.apply(this,arguments)}finally{y=ie}}}})(Ag)),Ag}var RC;function $M(){return RC||(RC=1,Cg.exports=LM()),Cg.exports}var Eg={exports:{}},Mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LC;function BM(){if(LC)return Mn;LC=1;var e=jl();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(f,d,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:d,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Mn.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(f,d,null,m)},Mn.flushSync=function(f){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=d,r.p=m,r.d.f()}},Mn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},Mn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Mn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,g=u(m,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):m==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Mn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=u(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},Mn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,g=u(m,d.crossOrigin);r.d.L(f,m,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Mn.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=u(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},Mn.requestFormReset=function(f){r.d.r(f)},Mn.unstable_batchedUpdates=function(f,d){return f(d)},Mn.useFormState=function(f,d,m){return l.H.useFormState(f,d,m)},Mn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Mn.version="19.1.1",Mn}var $C;function uP(){if($C)return Eg.exports;$C=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Eg.exports=BM(),Eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC;function zM(){if(BC)return Wc;BC=1;var e=$M(),t=jl(),n=uP();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function f(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,h=o;;){var v=c.return;if(v===null)break;var x=v.alternate;if(x===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===c)return u(v),a;if(x===h)return u(v),o;x=x.sibling}throw Error(r(188))}if(c.return!==h.return)c=v,h=x;else{for(var P=!1,_=v.child;_;){if(_===c){P=!0,c=v,h=x;break}if(_===h){P=!0,h=v,c=x;break}_=_.sibling}if(!P){for(_=x.child;_;){if(_===c){P=!0,c=x,h=v;break}if(_===h){P=!0,h=x,c=v;break}_=_.sibling}if(!P)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function d(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=d(a),o!==null)return o;a=a.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function z(a){return a===null||typeof a!="object"?null:(a=R&&a[R]||a["@@iterator"],typeof a=="function"?a:null)}var W=Symbol.for("react.client.reference");function Z(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===W?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case j:return"Suspense";case N:return"SuspenseList";case F:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case D:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case O:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case k:return o=a.displayName||null,o!==null?o:Z(a.type)||"Memo";case B:o=a._payload,a=a._init;try{return Z(a(o))}catch{}}return null}var Q=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},le=[],$=-1;function q(a){return{current:a}}function V(a){0>$||(a.current=le[$],le[$]=null,$--)}function te(a,o){$++,le[$]=a.current,a.current=o}var ve=q(null),Se=q(null),Ee=q(null),Oe=q(null);function ke(a,o){switch(te(Ee,o),te(Se,a),te(ve,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?Z1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=Z1(o),a=eC(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}V(ve),te(ve,a)}function xe(){V(ve),V(Se),V(Ee)}function Me(a){a.memoizedState!==null&&te(Oe,a);var o=ve.current,c=eC(o,a.type);o!==c&&(te(Se,a),te(ve,c))}function Ne(a){Se.current===a&&(V(ve),V(Se)),Oe.current===a&&(V(Oe),Gc._currentValue=ie)}var ye=Object.prototype.hasOwnProperty,Pt=e.unstable_scheduleCallback,qe=e.unstable_cancelCallback,Gt=e.unstable_shouldYield,qt=e.unstable_requestPaint,Tt=e.unstable_now,_r=e.unstable_getCurrentPriorityLevel,Nr=e.unstable_ImmediatePriority,zn=e.unstable_UserBlockingPriority,ra=e.unstable_NormalPriority,Ca=e.unstable_LowPriority,Di=e.unstable_IdlePriority,Kn=e.log,Ao=e.unstable_setDisableYieldValue,aa=null,fn=null;function jn(a){if(typeof Kn=="function"&&Ao(a),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(aa,a)}catch{}}var _e=Math.clz32?Math.clz32:Eo,tn=Math.log,ql=Math.LN2;function Eo(a){return a>>>=0,a===0?32:31-(tn(a)/ql|0)|0}var Oi=256,_i=4194304;function Wn(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function jr(a,o,c){var h=a.pendingLanes;if(h===0)return 0;var v=0,x=a.suspendedLanes,P=a.pingedLanes;a=a.warmLanes;var _=h&134217727;return _!==0?(h=_&~x,h!==0?v=Wn(h):(P&=_,P!==0?v=Wn(P):c||(c=_&~a,c!==0&&(v=Wn(c))))):(_=h&~x,_!==0?v=Wn(_):P!==0?v=Wn(P):c||(c=h&~a,c!==0&&(v=Wn(c)))),v===0?0:o!==0&&o!==v&&(o&x)===0&&(x=v&-v,c=o&-o,x>=c||x===32&&(c&4194048)!==0)?o:v}function Aa(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function wo(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Po(){var a=Oi;return Oi<<=1,(Oi&4194048)===0&&(Oi=256),a}function Ni(){var a=_i;return _i<<=1,(_i&62914560)===0&&(_i=4194304),a}function L(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function oe(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function de(a,o,c,h,v,x){var P=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var _=a.entanglements,U=a.expirationTimes,ee=a.hiddenUpdates;for(c=P&~c;0<c;){var ue=31-_e(c),me=1<<ue;_[ue]=0,U[ue]=-1;var re=ee[ue];if(re!==null)for(ee[ue]=null,ue=0;ue<re.length;ue++){var ae=re[ue];ae!==null&&(ae.lane&=-536870913)}c&=~me}h!==0&&ce(a,h,0),x!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=x&~(P&~o))}function ce(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var h=31-_e(o);a.entangledLanes|=o,a.entanglements[h]=a.entanglements[h]|1073741824|c&4194090}function pe(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var h=31-_e(c),v=1<<h;v&o|a[h]&o&&(a[h]|=o),c&=~v}}function be(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function $e(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function pn(){var a=G.p;return a!==0?a:(a=window.event,a===void 0?32:bC(a.type))}function Dt(a,o){var c=G.p;try{return G.p=a,o()}finally{G.p=c}}var vt=Math.random().toString(36).slice(2),Ye="__reactFiber$"+vt,Ve="__reactProps$"+vt,Nt="__reactContainer$"+vt,Un="__reactEvents$"+vt,ia="__reactListeners$"+vt,To="__reactHandles$"+vt,ch="__reactResources$"+vt,Do="__reactMarker$"+vt;function Ot(a){delete a[Ye],delete a[Ve],delete a[Un],delete a[ia],delete a[To]}function kr(a){var o=a[Ye];if(o)return o;for(var c=a.parentNode;c;){if(o=c[Nt]||c[Ye]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=aC(a);a!==null;){if(c=a[Ye])return c;a=aC(a)}return o}a=c,c=a.parentNode}return null}function Mr(a){if(a=a[Ye]||a[Nt]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function Ba(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function hn(a){var o=a[ch];return o||(o=a[ch]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function bt(a){a[Do]=!0}var za=new Set,sa={};function Bt(a,o){cr(a,o),cr(a+"Capture",o)}function cr(a,o){for(sa[a]=o,a=0;a<o.length;a++)za.add(o[a])}var Ua=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oo={},ji={};function Ir(a){return ye.call(ji,a)?!0:ye.call(Oo,a)?!1:Ua.test(a)?ji[a]=!0:(Oo[a]=!0,!1)}function oa(a,o,c){if(Ir(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function Ea(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function Ze(a,o,c,h){if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+h)}}var Xn,qu;function Ha(a){if(Xn===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Xn=o&&o[1]||"",qu=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xn+a+qu}var Yl=!1;function _o(a,o){if(!a||Yl)return"";Yl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ae){var re=ae}Reflect.construct(a,[],me)}else{try{me.call()}catch(ae){re=ae}a.call(me.prototype)}}else{try{throw Error()}catch(ae){re=ae}(me=a())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ae){if(ae&&re&&typeof ae.stack=="string")return[ae.stack,re.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=h.DetermineComponentFrameRoot(),P=x[0],_=x[1];if(P&&_){var U=P.split(`
`),ee=_.split(`
`);for(v=h=0;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;for(;v<ee.length&&!ee[v].includes("DetermineComponentFrameRoot");)v++;if(h===U.length||v===ee.length)for(h=U.length-1,v=ee.length-1;1<=h&&0<=v&&U[h]!==ee[v];)v--;for(;1<=h&&0<=v;h--,v--)if(U[h]!==ee[v]){if(h!==1||v!==1)do if(h--,v--,0>v||U[h]!==ee[v]){var ue=`
`+U[h].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=h&&0<=v);break}}}finally{Yl=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?Ha(c):""}function uh(a){switch(a.tag){case 26:case 27:case 5:return Ha(a.type);case 16:return Ha("Lazy");case 13:return Ha("Suspense");case 19:return Ha("SuspenseList");case 0:case 15:return _o(a.type,!1);case 11:return _o(a.type.render,!1);case 1:return _o(a.type,!0);case 31:return Ha("Activity");default:return""}}function Fl(a){try{var o="";do o+=uh(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function zt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ga(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function dh(a){var o=Ga(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),h=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,x=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return v.call(this)},set:function(P){h=""+P,x.call(this,P)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function ys(a){a._valueTracker||(a._valueTracker=dh(a))}function Vl(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return a&&(h=Ga(a)?a.checked?"true":"false":a.value),a=h,a!==c?(o.setValue(a),!0):!1}function Rr(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var No=/[\n"\\]/g;function An(a){return a.replace(No,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Lr(a,o,c,h,v,x,P,_){a.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.type=P:a.removeAttribute("type"),o!=null?P==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+zt(o)):a.value!==""+zt(o)&&(a.value=""+zt(o)):P!=="submit"&&P!=="reset"||a.removeAttribute("value"),o!=null?vs(a,P,zt(o)):c!=null?vs(a,P,zt(c)):h!=null&&a.removeAttribute("value"),v==null&&x!=null&&(a.defaultChecked=!!x),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.name=""+zt(_):a.removeAttribute("name")}function jo(a,o,c,h,v,x,P,_){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),o!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||o!=null))return;c=c!=null?""+zt(c):"",o=o!=null?""+zt(o):c,_||o===a.value||(a.value=o),a.defaultValue=o}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,a.checked=_?a.checked:!!h,a.defaultChecked=!!h,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(a.name=P)}function vs(a,o,c){o==="number"&&Rr(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function ur(a,o,c,h){if(a=a.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<a.length;c++)v=o.hasOwnProperty("$"+a[c].value),a[c].selected!==v&&(a[c].selected=v),v&&h&&(a[c].defaultSelected=!0)}else{for(c=""+zt(c),o=null,v=0;v<a.length;v++){if(a[v].value===c){a[v].selected=!0,h&&(a[v].defaultSelected=!0);return}o!==null||a[v].disabled||(o=a[v])}o!==null&&(o.selected=!0)}}function ko(a,o,c){if(o!=null&&(o=""+zt(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+zt(c):""}function bs(a,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(r(92));if(Q(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=zt(o),a.defaultValue=c,h=a.textContent,h===c&&h!==""&&h!==null&&(a.value=h)}function qa(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var Yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fu(a,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":h?a.setProperty(o,c):typeof c!="number"||c===0||Yu.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function Kl(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?a.setProperty(h,""):h==="float"?a.cssFloat="":a[h]="");for(var v in o)h=o[v],o.hasOwnProperty(v)&&c[v]!==h&&Fu(a,v,h)}else for(var x in o)o.hasOwnProperty(x)&&Fu(a,x,o[x])}function Vu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ex=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xs(a){return Wl.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Ku=null;function Wu(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ya=null,Fa=null;function Ss(a){var o=Mr(a);if(o&&(a=o.stateNode)){var c=a[Ve]||null;e:switch(a=o.stateNode,o.type){case"input":if(Lr(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+An(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==a&&h.form===a.form){var v=h[Ve]||null;if(!v)throw Error(r(90));Lr(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===a.form&&Vl(h)}break e;case"textarea":ko(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&ur(a,!!c.multiple,o,!1)}}}var Va=!1;function Xl(a,o,c){if(Va)return a(o,c);Va=!0;try{var h=a(o);return h}finally{if(Va=!1,(Ya!==null||Fa!==null)&&(qd(),Ya&&(o=Ya,a=Fa,Fa=Ya=null,Ss(o),a)))for(o=0;o<a.length;o++)Ss(a[o])}}function dr(a,o){var c=a.stateNode;if(c===null)return null;var h=c[Ve]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(a=a.type,h=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!h;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cs=!1;if(En)try{var As={};Object.defineProperty(As,"passive",{get:function(){Cs=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{Cs=!1}var la=null,et=null,ca=null;function Ka(){if(ca)return ca;var a,o=et,c=o.length,h,v="value"in la?la.value:la.textContent,x=v.length;for(a=0;a<c&&o[a]===v[a];a++);var P=c-a;for(h=1;h<=P&&o[c-h]===v[x-h];h++);return ca=v.slice(a,1<h?1-h:void 0)}function Es(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Ql(){return!0}function fh(){return!1}function lt(a){function o(c,h,v,x,P){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=x,this.target=P,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(c=a[_],this[_]=c?c(x):x[_]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ql:fh,this.isPropagationStopped=fh,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ql)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ql)},persist:function(){},isPersistent:Ql}),o}var nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jl=lt(nn),ws=m({},nn,{view:0,detail:0}),ph=lt(ws),Ps,Xu,Ts,Zl=m({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tc,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ts&&(Ts&&a.type==="mousemove"?(Ps=a.screenX-Ts.screenX,Xu=a.screenY-Ts.screenY):Xu=Ps=0,Ts=a),Ps)},movementY:function(a){return"movementY"in a?a.movementY:Xu}}),hh=lt(Zl),mh=m({},Zl,{dataTransfer:0}),gh=lt(mh),yh=m({},ws,{relatedTarget:0}),Re=lt(yh),tt=m({},nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ds=lt(tt),Mo=m({},nn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Qu=lt(Mo),Io=m({},nn,{data:0}),ec=lt(Io),Ju={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bh(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=vh[a])?!!o[a]:!1}function tc(){return bh}var rt=m({},ws,{key:function(a){if(a.key){var o=Ju[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Es(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Zu[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tc,charCode:function(a){return a.type==="keypress"?Es(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Es(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),xh=lt(rt),Sh=m({},Zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=lt(Sh),Os=m({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tc}),Hn=lt(Os),Qn=m({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ro=lt(Qn),td=m({},Zl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ch=lt(td),nc=m({},nn,{newState:0,oldState:0}),Ah=lt(nc),Eh=[9,13,27,32],rc=En&&"CompositionEvent"in window,_s=null;En&&"documentMode"in document&&(_s=document.documentMode);var wh=En&&"TextEvent"in window&&!_s,nd=En&&(!rc||_s&&8<_s&&11>=_s),rd=" ",ad=!1;function id(a,o){switch(a){case"keyup":return Eh.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Wa=!1;function Ph(a,o){switch(a){case"compositionend":return sd(o);case"keypress":return o.which!==32?null:(ad=!0,rd);case"textInput":return a=o.data,a===rd&&ad?null:a;default:return null}}function Th(a,o){if(Wa)return a==="compositionend"||!rc&&id(a,o)?(a=Ka(),ca=et=la=null,Wa=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return nd&&o.locale!=="ko"?null:o.data;default:return null}}var Dh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function od(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Dh[a.type]:o==="textarea"}function ac(a,o,c,h){Ya?Fa?Fa.push(h):Fa=[h]:Ya=h,o=Xd(o,"onChange"),0<o.length&&(c=new Jl("onChange","change",null,c,h),a.push({event:c,listeners:o}))}var Ns=null,js=null;function Oh(a){K1(a,0)}function Lo(a){var o=Ba(a);if(Vl(o))return a}function ld(a,o){if(a==="change")return o}var ic=!1;if(En){var sc;if(En){var oc="oninput"in document;if(!oc){var cd=document.createElement("div");cd.setAttribute("oninput","return;"),oc=typeof cd.oninput=="function"}sc=oc}else sc=!1;ic=sc&&(!document.documentMode||9<document.documentMode)}function ud(){Ns&&(Ns.detachEvent("onpropertychange",lc),js=Ns=null)}function lc(a){if(a.propertyName==="value"&&Lo(js)){var o=[];ac(o,js,a,Wu(a)),Xl(Oh,o)}}function _h(a,o,c){a==="focusin"?(ud(),Ns=o,js=c,Ns.attachEvent("onpropertychange",lc)):a==="focusout"&&ud()}function Nh(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Lo(js)}function jh(a,o){if(a==="click")return Lo(o)}function H(a,o){if(a==="input"||a==="change")return Lo(o)}function ne(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var ge=typeof Object.is=="function"?Object.is:ne;function he(a,o){if(ge(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!ye.call(o,v)||!ge(a[v],o[v]))return!1}return!0}function Ce(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ue(a,o){var c=Ce(a);a=0;for(var h;c;){if(c.nodeType===3){if(h=a+c.textContent.length,a<=o&&h>=o)return{node:c,offset:o-a};a=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ce(c)}}function Fe(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Fe(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function At(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Rr(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=Rr(a.document)}return o}function fr(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var $o=En&&"documentMode"in document&&11>=document.documentMode,ua=null,cc=null,da=null,uc=!1;function dd(a,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;uc||ua==null||ua!==Rr(h)||(h=ua,"selectionStart"in h&&fr(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),da&&he(da,h)||(da=h,h=Xd(cc,"onSelect"),0<h.length&&(o=new Jl("onSelect","select",null,o,c),a.push({event:o,listeners:h}),o.target=ua)))}function ks(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var Bo={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},kh={},wx={};En&&(wx=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function Ms(a){if(kh[a])return kh[a];if(!Bo[a])return a;var o=Bo[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in wx)return kh[a]=o[c];return a}var Px=Ms("animationend"),Tx=Ms("animationiteration"),Dx=Ms("animationstart"),Aj=Ms("transitionrun"),Ej=Ms("transitionstart"),wj=Ms("transitioncancel"),Ox=Ms("transitionend"),_x=new Map,Mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mh.push("scrollEnd");function fa(a,o){_x.set(a,o),Bt(o,[a])}var Nx=new WeakMap;function $r(a,o){if(typeof a=="object"&&a!==null){var c=Nx.get(a);return c!==void 0?c:(o={value:a,source:o,stack:Fl(o)},Nx.set(a,o),o)}return{value:a,source:o,stack:Fl(o)}}var Br=[],zo=0,Ih=0;function fd(){for(var a=zo,o=Ih=zo=0;o<a;){var c=Br[o];Br[o++]=null;var h=Br[o];Br[o++]=null;var v=Br[o];Br[o++]=null;var x=Br[o];if(Br[o++]=null,h!==null&&v!==null){var P=h.pending;P===null?v.next=v:(v.next=P.next,P.next=v),h.pending=v}x!==0&&jx(c,v,x)}}function pd(a,o,c,h){Br[zo++]=a,Br[zo++]=o,Br[zo++]=c,Br[zo++]=h,Ih|=h,a.lanes|=h,a=a.alternate,a!==null&&(a.lanes|=h)}function Rh(a,o,c,h){return pd(a,o,c,h),hd(a)}function Uo(a,o){return pd(a,null,null,o),hd(a)}function jx(a,o,c){a.lanes|=c;var h=a.alternate;h!==null&&(h.lanes|=c);for(var v=!1,x=a.return;x!==null;)x.childLanes|=c,h=x.alternate,h!==null&&(h.childLanes|=c),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(v=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,v&&o!==null&&(v=31-_e(c),a=x.hiddenUpdates,h=a[v],h===null?a[v]=[o]:h.push(o),o.lane=c|536870912),x):null}function hd(a){if(50<Ic)throw Ic=0,Hm=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Ho={};function Pj(a,o,c,h){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(a,o,c,h){return new Pj(a,o,c,h)}function Lh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Xa(a,o){var c=a.alternate;return c===null?(c=pr(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function kx(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function md(a,o,c,h,v,x){var P=0;if(h=a,typeof a=="function")Lh(a)&&(P=1);else if(typeof a=="string")P=Dk(a,c,ve.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case F:return a=pr(31,c,o,v),a.elementType=F,a.lanes=x,a;case S:return Is(c.children,v,x,o);case C:P=8,v|=24;break;case E:return a=pr(12,c,o,v|2),a.elementType=E,a.lanes=x,a;case j:return a=pr(13,c,o,v),a.elementType=j,a.lanes=x,a;case N:return a=pr(19,c,o,v),a.elementType=N,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case w:case D:P=10;break e;case T:P=9;break e;case O:P=11;break e;case k:P=14;break e;case B:P=16,h=null;break e}P=29,c=Error(r(130,a===null?"null":typeof a,"")),h=null}return o=pr(P,c,o,v),o.elementType=a,o.type=h,o.lanes=x,o}function Is(a,o,c,h){return a=pr(7,a,h,o),a.lanes=c,a}function $h(a,o,c){return a=pr(6,a,null,o),a.lanes=c,a}function Bh(a,o,c){return o=pr(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Go=[],qo=0,gd=null,yd=0,zr=[],Ur=0,Rs=null,Qa=1,Ja="";function Ls(a,o){Go[qo++]=yd,Go[qo++]=gd,gd=a,yd=o}function Mx(a,o,c){zr[Ur++]=Qa,zr[Ur++]=Ja,zr[Ur++]=Rs,Rs=a;var h=Qa;a=Ja;var v=32-_e(h)-1;h&=~(1<<v),c+=1;var x=32-_e(o)+v;if(30<x){var P=v-v%5;x=(h&(1<<P)-1).toString(32),h>>=P,v-=P,Qa=1<<32-_e(o)+v|c<<v|h,Ja=x+a}else Qa=1<<x|c<<v|h,Ja=a}function zh(a){a.return!==null&&(Ls(a,1),Mx(a,1,0))}function Uh(a){for(;a===gd;)gd=Go[--qo],Go[qo]=null,yd=Go[--qo],Go[qo]=null;for(;a===Rs;)Rs=zr[--Ur],zr[Ur]=null,Ja=zr[--Ur],zr[Ur]=null,Qa=zr[--Ur],zr[Ur]=null}var Gn=null,Ut=null,ot=!1,$s=null,wa=!1,Hh=Error(r(519));function Bs(a){var o=Error(r(418,""));throw pc($r(o,a)),Hh}function Ix(a){var o=a.stateNode,c=a.type,h=a.memoizedProps;switch(o[Ye]=a,o[Ve]=h,c){case"dialog":Je("cancel",o),Je("close",o);break;case"iframe":case"object":case"embed":Je("load",o);break;case"video":case"audio":for(c=0;c<Lc.length;c++)Je(Lc[c],o);break;case"source":Je("error",o);break;case"img":case"image":case"link":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"input":Je("invalid",o),jo(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),ys(o);break;case"select":Je("invalid",o);break;case"textarea":Je("invalid",o),bs(o,h.value,h.defaultValue,h.children),ys(o)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||J1(o.textContent,c)?(h.popover!=null&&(Je("beforetoggle",o),Je("toggle",o)),h.onScroll!=null&&Je("scroll",o),h.onScrollEnd!=null&&Je("scrollend",o),h.onClick!=null&&(o.onclick=Qd),o=!0):o=!1,o||Bs(a)}function Rx(a){for(Gn=a.return;Gn;)switch(Gn.tag){case 5:case 13:wa=!1;return;case 27:case 3:wa=!0;return;default:Gn=Gn.return}}function dc(a){if(a!==Gn)return!1;if(!ot)return Rx(a),ot=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||ag(a.type,a.memoizedProps)),c=!c),c&&Ut&&Bs(a),Rx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){Ut=ha(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}Ut=null}}else o===27?(o=Ut,Ki(a.type)?(a=lg,lg=null,Ut=a):Ut=o):Ut=Gn?ha(a.stateNode.nextSibling):null;return!0}function fc(){Ut=Gn=null,ot=!1}function Lx(){var a=$s;return a!==null&&(er===null?er=a:er.push.apply(er,a),$s=null),a}function pc(a){$s===null?$s=[a]:$s.push(a)}var Gh=q(null),zs=null,Za=null;function ki(a,o,c){te(Gh,o._currentValue),o._currentValue=c}function ei(a){a._currentValue=Gh.current,V(Gh)}function qh(a,o,c){for(;a!==null;){var h=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),a===c)break;a=a.return}}function Yh(a,o,c,h){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var x=v.dependencies;if(x!==null){var P=v.child;x=x.firstContext;e:for(;x!==null;){var _=x;x=v;for(var U=0;U<o.length;U++)if(_.context===o[U]){x.lanes|=c,_=x.alternate,_!==null&&(_.lanes|=c),qh(x.return,c,a),h||(P=null);break e}x=_.next}}else if(v.tag===18){if(P=v.return,P===null)throw Error(r(341));P.lanes|=c,x=P.alternate,x!==null&&(x.lanes|=c),qh(P,c,a),P=null}else P=v.child;if(P!==null)P.return=v;else for(P=v;P!==null;){if(P===a){P=null;break}if(v=P.sibling,v!==null){v.return=P.return,P=v;break}P=P.return}v=P}}function hc(a,o,c,h){a=null;for(var v=o,x=!1;v!==null;){if(!x){if((v.flags&524288)!==0)x=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var P=v.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var _=v.type;ge(v.pendingProps.value,P.value)||(a!==null?a.push(_):a=[_])}}else if(v===Oe.current){if(P=v.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Gc):a=[Gc])}v=v.return}a!==null&&Yh(o,a,c,h),o.flags|=262144}function vd(a){for(a=a.firstContext;a!==null;){if(!ge(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Us(a){zs=a,Za=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function kn(a){return $x(zs,a)}function bd(a,o){return zs===null&&Us(a),$x(a,o)}function $x(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Za===null){if(a===null)throw Error(r(308));Za=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Za=Za.next=o;return c}var Tj=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,h){a.push(h)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},Dj=e.unstable_scheduleCallback,Oj=e.unstable_NormalPriority,rn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fh(){return{controller:new Tj,data:new Map,refCount:0}}function mc(a){a.refCount--,a.refCount===0&&Dj(Oj,function(){a.controller.abort()})}var gc=null,Vh=0,Yo=0,Fo=null;function _j(a,o){if(gc===null){var c=gc=[];Vh=0,Yo=Wm(),Fo={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Vh++,o.then(Bx,Bx),o}function Bx(){if(--Vh===0&&gc!==null){Fo!==null&&(Fo.status="fulfilled");var a=gc;gc=null,Yo=0,Fo=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function Nj(a,o){var c=[],h={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return a.then(function(){h.status="fulfilled",h.value=o;for(var v=0;v<c.length;v++)(0,c[v])(o)},function(v){for(h.status="rejected",h.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),h}var zx=I.S;I.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&_j(a,o),zx!==null&&zx(a,o)};var Hs=q(null);function Kh(){var a=Hs.current;return a!==null?a:Et.pooledCache}function xd(a,o){o===null?te(Hs,Hs.current):te(Hs,o.pool)}function Ux(){var a=Kh();return a===null?null:{parent:rn._currentValue,pool:a}}var yc=Error(r(460)),Hx=Error(r(474)),Sd=Error(r(542)),Wh={then:function(){}};function Gx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Cd(){}function qx(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Cd,Cd),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Fx(a),a;default:if(typeof o.status=="string")o.then(Cd,Cd);else{if(a=Et,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(h){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=h}},function(h){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Fx(a),a}throw vc=o,yc}}var vc=null;function Yx(){if(vc===null)throw Error(r(459));var a=vc;return vc=null,a}function Fx(a){if(a===yc||a===Sd)throw Error(r(483))}var Mi=!1;function Xh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ii(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ri(a,o,c){var h=a.updateQueue;if(h===null)return null;if(h=h.shared,(ct&2)!==0){var v=h.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),h.pending=o,o=hd(a),jx(a,null,c),o}return pd(a,h,o,c),hd(a)}function bc(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=a.pendingLanes,c|=h,o.lanes=c,pe(a,c)}}function Jh(a,o){var c=a.updateQueue,h=a.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var P={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?v=x=P:x=x.next=P,c=c.next}while(c!==null);x===null?v=x=o:x=x.next=o}else v=x=o;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:h.shared,callbacks:h.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var Zh=!1;function xc(){if(Zh){var a=Fo;if(a!==null)throw a}}function Sc(a,o,c,h){Zh=!1;var v=a.updateQueue;Mi=!1;var x=v.firstBaseUpdate,P=v.lastBaseUpdate,_=v.shared.pending;if(_!==null){v.shared.pending=null;var U=_,ee=U.next;U.next=null,P===null?x=ee:P.next=ee,P=U;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,_=ue.lastBaseUpdate,_!==P&&(_===null?ue.firstBaseUpdate=ee:_.next=ee,ue.lastBaseUpdate=U))}if(x!==null){var me=v.baseState;P=0,ue=ee=U=null,_=x;do{var re=_.lane&-536870913,ae=re!==_.lane;if(ae?(nt&re)===re:(h&re)===re){re!==0&&re===Yo&&(Zh=!0),ue!==null&&(ue=ue.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var He=a,Be=_;re=o;var mt=c;switch(Be.tag){case 1:if(He=Be.payload,typeof He=="function"){me=He.call(mt,me,re);break e}me=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Be.payload,re=typeof He=="function"?He.call(mt,me,re):He,re==null)break e;me=m({},me,re);break e;case 2:Mi=!0}}re=_.callback,re!==null&&(a.flags|=64,ae&&(a.flags|=8192),ae=v.callbacks,ae===null?v.callbacks=[re]:ae.push(re))}else ae={lane:re,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ue===null?(ee=ue=ae,U=me):ue=ue.next=ae,P|=re;if(_=_.next,_===null){if(_=v.shared.pending,_===null)break;ae=_,_=ae.next,ae.next=null,v.lastBaseUpdate=ae,v.shared.pending=null}}while(!0);ue===null&&(U=me),v.baseState=U,v.firstBaseUpdate=ee,v.lastBaseUpdate=ue,x===null&&(v.shared.lanes=0),qi|=P,a.lanes=P,a.memoizedState=me}}function Vx(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function Kx(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Vx(c[a],o)}var Vo=q(null),Ad=q(0);function Wx(a,o){a=oi,te(Ad,a),te(Vo,o),oi=a|o.baseLanes}function em(){te(Ad,oi),te(Vo,Vo.current)}function tm(){oi=Ad.current,V(Vo),V(Ad)}var Li=0,We=null,pt=null,Wt=null,Ed=!1,Ko=!1,Gs=!1,wd=0,Cc=0,Wo=null,jj=0;function Yt(){throw Error(r(321))}function nm(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!ge(a[c],o[c]))return!1;return!0}function rm(a,o,c,h,v,x){return Li=x,We=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=a===null||a.memoizedState===null?jS:kS,Gs=!1,x=c(h,v),Gs=!1,Ko&&(x=Qx(o,c,h,v)),Xx(a),x}function Xx(a){I.H=Nd;var o=pt!==null&&pt.next!==null;if(Li=0,Wt=pt=We=null,Ed=!1,Cc=0,Wo=null,o)throw Error(r(300));a===null||mn||(a=a.dependencies,a!==null&&vd(a)&&(mn=!0))}function Qx(a,o,c,h){We=a;var v=0;do{if(Ko&&(Wo=null),Cc=0,Ko=!1,25<=v)throw Error(r(301));if(v+=1,Wt=pt=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}I.H=Bj,x=o(c,h)}while(Ko);return x}function kj(){var a=I.H,o=a.useState()[0];return o=typeof o.then=="function"?Ac(o):o,a=a.useState()[0],(pt!==null?pt.memoizedState:null)!==a&&(We.flags|=1024),o}function am(){var a=wd!==0;return wd=0,a}function im(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function sm(a){if(Ed){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ed=!1}Li=0,Wt=pt=We=null,Ko=!1,Cc=wd=0,Wo=null}function Jn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?We.memoizedState=Wt=a:Wt=Wt.next=a,Wt}function Xt(){if(pt===null){var a=We.alternate;a=a!==null?a.memoizedState:null}else a=pt.next;var o=Wt===null?We.memoizedState:Wt.next;if(o!==null)Wt=o,pt=a;else{if(a===null)throw We.alternate===null?Error(r(467)):Error(r(310));pt=a,a={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Wt===null?We.memoizedState=Wt=a:Wt=Wt.next=a}return Wt}function om(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ac(a){var o=Cc;return Cc+=1,Wo===null&&(Wo=[]),a=qx(Wo,a,o),o=We,(Wt===null?o.memoizedState:Wt.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?jS:kS),a}function Pd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ac(a);if(a.$$typeof===D)return kn(a)}throw Error(r(438,String(a)))}function lm(a){var o=null,c=We.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=We.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=om(),We.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),h=0;h<a;h++)c[h]=M;return o.index++,c}function ti(a,o){return typeof o=="function"?o(a):o}function Td(a){var o=Xt();return cm(o,pt,a)}function cm(a,o,c){var h=a.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var v=a.baseQueue,x=h.pending;if(x!==null){if(v!==null){var P=v.next;v.next=x.next,x.next=P}o.baseQueue=v=x,h.pending=null}if(x=a.baseState,v===null)a.memoizedState=x;else{o=v.next;var _=P=null,U=null,ee=o,ue=!1;do{var me=ee.lane&-536870913;if(me!==ee.lane?(nt&me)===me:(Li&me)===me){var re=ee.revertLane;if(re===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),me===Yo&&(ue=!0);else if((Li&re)===re){ee=ee.next,re===Yo&&(ue=!0);continue}else me={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},U===null?(_=U=me,P=x):U=U.next=me,We.lanes|=re,qi|=re;me=ee.action,Gs&&c(x,me),x=ee.hasEagerState?ee.eagerState:c(x,me)}else re={lane:me,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},U===null?(_=U=re,P=x):U=U.next=re,We.lanes|=me,qi|=me;ee=ee.next}while(ee!==null&&ee!==o);if(U===null?P=x:U.next=_,!ge(x,a.memoizedState)&&(mn=!0,ue&&(c=Fo,c!==null)))throw c;a.memoizedState=x,a.baseState=P,a.baseQueue=U,h.lastRenderedState=x}return v===null&&(h.lanes=0),[a.memoizedState,h.dispatch]}function um(a){var o=Xt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var h=c.dispatch,v=c.pending,x=o.memoizedState;if(v!==null){c.pending=null;var P=v=v.next;do x=a(x,P.action),P=P.next;while(P!==v);ge(x,o.memoizedState)||(mn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),c.lastRenderedState=x}return[x,h]}function Jx(a,o,c){var h=We,v=Xt(),x=ot;if(x){if(c===void 0)throw Error(r(407));c=c()}else c=o();var P=!ge((pt||v).memoizedState,c);P&&(v.memoizedState=c,mn=!0),v=v.queue;var _=tS.bind(null,h,v,a);if(Ec(2048,8,_,[a]),v.getSnapshot!==o||P||Wt!==null&&Wt.memoizedState.tag&1){if(h.flags|=2048,Xo(9,Dd(),eS.bind(null,h,v,c,o),null),Et===null)throw Error(r(349));x||(Li&124)!==0||Zx(h,o,c)}return c}function Zx(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=We.updateQueue,o===null?(o=om(),We.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function eS(a,o,c,h){o.value=c,o.getSnapshot=h,nS(o)&&rS(a)}function tS(a,o,c){return c(function(){nS(o)&&rS(a)})}function nS(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!ge(a,c)}catch{return!0}}function rS(a){var o=Uo(a,2);o!==null&&vr(o,a,2)}function dm(a){var o=Jn();if(typeof a=="function"){var c=a;if(a=c(),Gs){jn(!0);try{c()}finally{jn(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:a},o}function aS(a,o,c,h){return a.baseState=c,cm(a,pt,typeof h=="function"?h:ti)}function Mj(a,o,c,h,v){if(_d(a))throw Error(r(485));if(a=o.action,a!==null){var x={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){x.listeners.push(P)}};I.T!==null?c(!0):x.isTransition=!1,h(x),c=o.pending,c===null?(x.next=o.pending=x,iS(o,x)):(x.next=c.next,o.pending=c.next=x)}}function iS(a,o){var c=o.action,h=o.payload,v=a.state;if(o.isTransition){var x=I.T,P={};I.T=P;try{var _=c(v,h),U=I.S;U!==null&&U(P,_),sS(a,o,_)}catch(ee){fm(a,o,ee)}finally{I.T=x}}else try{x=c(v,h),sS(a,o,x)}catch(ee){fm(a,o,ee)}}function sS(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){oS(a,o,h)},function(h){return fm(a,o,h)}):oS(a,o,c)}function oS(a,o,c){o.status="fulfilled",o.value=c,lS(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,iS(a,c)))}function fm(a,o,c){var h=a.pending;if(a.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,lS(o),o=o.next;while(o!==h)}a.action=null}function lS(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function cS(a,o){return o}function uS(a,o){if(ot){var c=Et.formState;if(c!==null){e:{var h=We;if(ot){if(Ut){t:{for(var v=Ut,x=wa;v.nodeType!==8;){if(!x){v=null;break t}if(v=ha(v.nextSibling),v===null){v=null;break t}}x=v.data,v=x==="F!"||x==="F"?v:null}if(v){Ut=ha(v.nextSibling),h=v.data==="F!";break e}}Bs(h)}h=!1}h&&(o=c[0])}}return c=Jn(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cS,lastRenderedState:o},c.queue=h,c=OS.bind(null,We,h),h.dispatch=c,h=dm(!1),x=ym.bind(null,We,!1,h.queue),h=Jn(),v={state:o,dispatch:null,action:a,pending:null},h.queue=v,c=Mj.bind(null,We,v,x,c),v.dispatch=c,h.memoizedState=a,[o,c,!1]}function dS(a){var o=Xt();return fS(o,pt,a)}function fS(a,o,c){if(o=cm(a,o,cS)[0],a=Td(ti)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=Ac(o)}catch(P){throw P===yc?Sd:P}else h=o;o=Xt();var v=o.queue,x=v.dispatch;return c!==o.memoizedState&&(We.flags|=2048,Xo(9,Dd(),Ij.bind(null,v,c),null)),[h,x,a]}function Ij(a,o){a.action=o}function pS(a){var o=Xt(),c=pt;if(c!==null)return fS(o,c,a);Xt(),o=o.memoizedState,c=Xt();var h=c.queue.dispatch;return c.memoizedState=a,[o,h,!1]}function Xo(a,o,c,h){return a={tag:a,create:c,deps:h,inst:o,next:null},o=We.updateQueue,o===null&&(o=om(),We.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(h=c.next,c.next=a,a.next=h,o.lastEffect=a),a}function Dd(){return{destroy:void 0,resource:void 0}}function hS(){return Xt().memoizedState}function Od(a,o,c,h){var v=Jn();h=h===void 0?null:h,We.flags|=a,v.memoizedState=Xo(1|o,Dd(),c,h)}function Ec(a,o,c,h){var v=Xt();h=h===void 0?null:h;var x=v.memoizedState.inst;pt!==null&&h!==null&&nm(h,pt.memoizedState.deps)?v.memoizedState=Xo(o,x,c,h):(We.flags|=a,v.memoizedState=Xo(1|o,x,c,h))}function mS(a,o){Od(8390656,8,a,o)}function gS(a,o){Ec(2048,8,a,o)}function yS(a,o){return Ec(4,2,a,o)}function vS(a,o){return Ec(4,4,a,o)}function bS(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function xS(a,o,c){c=c!=null?c.concat([a]):null,Ec(4,4,bS.bind(null,o,a),c)}function pm(){}function SS(a,o){var c=Xt();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&nm(o,h[1])?h[0]:(c.memoizedState=[a,o],a)}function CS(a,o){var c=Xt();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&nm(o,h[1]))return h[0];if(h=a(),Gs){jn(!0);try{a()}finally{jn(!1)}}return c.memoizedState=[h,o],h}function hm(a,o,c){return c===void 0||(Li&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=w1(),We.lanes|=a,qi|=a,c)}function AS(a,o,c,h){return ge(c,o)?c:Vo.current!==null?(a=hm(a,c,h),ge(a,o)||(mn=!0),a):(Li&42)===0?(mn=!0,a.memoizedState=c):(a=w1(),We.lanes|=a,qi|=a,o)}function ES(a,o,c,h,v){var x=G.p;G.p=x!==0&&8>x?x:8;var P=I.T,_={};I.T=_,ym(a,!1,o,c);try{var U=v(),ee=I.S;if(ee!==null&&ee(_,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ue=Nj(U,h);wc(a,o,ue,yr(a))}else wc(a,o,h,yr(a))}catch(me){wc(a,o,{then:function(){},status:"rejected",reason:me},yr())}finally{G.p=x,I.T=P}}function Rj(){}function mm(a,o,c,h){if(a.tag!==5)throw Error(r(476));var v=wS(a).queue;ES(a,v,o,ie,c===null?Rj:function(){return PS(a),c(h)})}function wS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:ie},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function PS(a){var o=wS(a).next.queue;wc(a,o,{},yr())}function gm(){return kn(Gc)}function TS(){return Xt().memoizedState}function DS(){return Xt().memoizedState}function Lj(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=yr();a=Ii(c);var h=Ri(o,a,c);h!==null&&(vr(h,o,c),bc(h,o,c)),o={cache:Fh()},a.payload=o;return}o=o.return}}function $j(a,o,c){var h=yr();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},_d(a)?_S(o,c):(c=Rh(a,o,c,h),c!==null&&(vr(c,a,h),NS(c,o,h)))}function OS(a,o,c){var h=yr();wc(a,o,c,h)}function wc(a,o,c,h){var v={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(_d(a))_S(o,v);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var P=o.lastRenderedState,_=x(P,c);if(v.hasEagerState=!0,v.eagerState=_,ge(_,P))return pd(a,o,v,0),Et===null&&fd(),!1}catch{}finally{}if(c=Rh(a,o,v,h),c!==null)return vr(c,a,h),NS(c,o,h),!0}return!1}function ym(a,o,c,h){if(h={lane:2,revertLane:Wm(),action:h,hasEagerState:!1,eagerState:null,next:null},_d(a)){if(o)throw Error(r(479))}else o=Rh(a,c,h,2),o!==null&&vr(o,a,2)}function _d(a){var o=a.alternate;return a===We||o!==null&&o===We}function _S(a,o){Ko=Ed=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function NS(a,o,c){if((c&4194048)!==0){var h=o.lanes;h&=a.pendingLanes,c|=h,o.lanes=c,pe(a,c)}}var Nd={readContext:kn,use:Pd,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},jS={readContext:kn,use:Pd,useCallback:function(a,o){return Jn().memoizedState=[a,o===void 0?null:o],a},useContext:kn,useEffect:mS,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,Od(4194308,4,bS.bind(null,o,a),c)},useLayoutEffect:function(a,o){return Od(4194308,4,a,o)},useInsertionEffect:function(a,o){Od(4,2,a,o)},useMemo:function(a,o){var c=Jn();o=o===void 0?null:o;var h=a();if(Gs){jn(!0);try{a()}finally{jn(!1)}}return c.memoizedState=[h,o],h},useReducer:function(a,o,c){var h=Jn();if(c!==void 0){var v=c(o);if(Gs){jn(!0);try{c(o)}finally{jn(!1)}}}else v=o;return h.memoizedState=h.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},h.queue=a,a=a.dispatch=$j.bind(null,We,a),[h.memoizedState,a]},useRef:function(a){var o=Jn();return a={current:a},o.memoizedState=a},useState:function(a){a=dm(a);var o=a.queue,c=OS.bind(null,We,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:pm,useDeferredValue:function(a,o){var c=Jn();return hm(c,a,o)},useTransition:function(){var a=dm(!1);return a=ES.bind(null,We,a.queue,!0,!1),Jn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var h=We,v=Jn();if(ot){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),Et===null)throw Error(r(349));(nt&124)!==0||Zx(h,o,c)}v.memoizedState=c;var x={value:c,getSnapshot:o};return v.queue=x,mS(tS.bind(null,h,x,a),[a]),h.flags|=2048,Xo(9,Dd(),eS.bind(null,h,x,c,o),null),c},useId:function(){var a=Jn(),o=Et.identifierPrefix;if(ot){var c=Ja,h=Qa;c=(h&~(1<<32-_e(h)-1)).toString(32)+c,o=""+o+"R"+c,c=wd++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=jj++,o=""+o+"r"+c.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:gm,useFormState:uS,useActionState:uS,useOptimistic:function(a){var o=Jn();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=ym.bind(null,We,!0,c),c.dispatch=o,[a,o]},useMemoCache:lm,useCacheRefresh:function(){return Jn().memoizedState=Lj.bind(null,We)}},kS={readContext:kn,use:Pd,useCallback:SS,useContext:kn,useEffect:gS,useImperativeHandle:xS,useInsertionEffect:yS,useLayoutEffect:vS,useMemo:CS,useReducer:Td,useRef:hS,useState:function(){return Td(ti)},useDebugValue:pm,useDeferredValue:function(a,o){var c=Xt();return AS(c,pt.memoizedState,a,o)},useTransition:function(){var a=Td(ti)[0],o=Xt().memoizedState;return[typeof a=="boolean"?a:Ac(a),o]},useSyncExternalStore:Jx,useId:TS,useHostTransitionStatus:gm,useFormState:dS,useActionState:dS,useOptimistic:function(a,o){var c=Xt();return aS(c,pt,a,o)},useMemoCache:lm,useCacheRefresh:DS},Bj={readContext:kn,use:Pd,useCallback:SS,useContext:kn,useEffect:gS,useImperativeHandle:xS,useInsertionEffect:yS,useLayoutEffect:vS,useMemo:CS,useReducer:um,useRef:hS,useState:function(){return um(ti)},useDebugValue:pm,useDeferredValue:function(a,o){var c=Xt();return pt===null?hm(c,a,o):AS(c,pt.memoizedState,a,o)},useTransition:function(){var a=um(ti)[0],o=Xt().memoizedState;return[typeof a=="boolean"?a:Ac(a),o]},useSyncExternalStore:Jx,useId:TS,useHostTransitionStatus:gm,useFormState:pS,useActionState:pS,useOptimistic:function(a,o){var c=Xt();return pt!==null?aS(c,pt,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:lm,useCacheRefresh:DS},Qo=null,Pc=0;function jd(a){var o=Pc;return Pc+=1,Qo===null&&(Qo=[]),qx(Qo,a,o)}function Tc(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function kd(a,o){throw o.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function MS(a){var o=a._init;return o(a._payload)}function IS(a){function o(X,Y){if(a){var J=X.deletions;J===null?(X.deletions=[Y],X.flags|=16):J.push(Y)}}function c(X,Y){if(!a)return null;for(;Y!==null;)o(X,Y),Y=Y.sibling;return null}function h(X){for(var Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function v(X,Y){return X=Xa(X,Y),X.index=0,X.sibling=null,X}function x(X,Y,J){return X.index=J,a?(J=X.alternate,J!==null?(J=J.index,J<Y?(X.flags|=67108866,Y):J):(X.flags|=67108866,Y)):(X.flags|=1048576,Y)}function P(X){return a&&X.alternate===null&&(X.flags|=67108866),X}function _(X,Y,J,fe){return Y===null||Y.tag!==6?(Y=$h(J,X.mode,fe),Y.return=X,Y):(Y=v(Y,J),Y.return=X,Y)}function U(X,Y,J,fe){var Pe=J.type;return Pe===S?ue(X,Y,J.props.children,fe,J.key):Y!==null&&(Y.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===B&&MS(Pe)===Y.type)?(Y=v(Y,J.props),Tc(Y,J),Y.return=X,Y):(Y=md(J.type,J.key,J.props,null,X.mode,fe),Tc(Y,J),Y.return=X,Y)}function ee(X,Y,J,fe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==J.containerInfo||Y.stateNode.implementation!==J.implementation?(Y=Bh(J,X.mode,fe),Y.return=X,Y):(Y=v(Y,J.children||[]),Y.return=X,Y)}function ue(X,Y,J,fe,Pe){return Y===null||Y.tag!==7?(Y=Is(J,X.mode,fe,Pe),Y.return=X,Y):(Y=v(Y,J),Y.return=X,Y)}function me(X,Y,J){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=$h(""+Y,X.mode,J),Y.return=X,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:return J=md(Y.type,Y.key,Y.props,null,X.mode,J),Tc(J,Y),J.return=X,J;case b:return Y=Bh(Y,X.mode,J),Y.return=X,Y;case B:var fe=Y._init;return Y=fe(Y._payload),me(X,Y,J)}if(Q(Y)||z(Y))return Y=Is(Y,X.mode,J,null),Y.return=X,Y;if(typeof Y.then=="function")return me(X,jd(Y),J);if(Y.$$typeof===D)return me(X,bd(X,Y),J);kd(X,Y)}return null}function re(X,Y,J,fe){var Pe=Y!==null?Y.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Pe!==null?null:_(X,Y,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case y:return J.key===Pe?U(X,Y,J,fe):null;case b:return J.key===Pe?ee(X,Y,J,fe):null;case B:return Pe=J._init,J=Pe(J._payload),re(X,Y,J,fe)}if(Q(J)||z(J))return Pe!==null?null:ue(X,Y,J,fe,null);if(typeof J.then=="function")return re(X,Y,jd(J),fe);if(J.$$typeof===D)return re(X,Y,bd(X,J),fe);kd(X,J)}return null}function ae(X,Y,J,fe,Pe){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return X=X.get(J)||null,_(Y,X,""+fe,Pe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case y:return X=X.get(fe.key===null?J:fe.key)||null,U(Y,X,fe,Pe);case b:return X=X.get(fe.key===null?J:fe.key)||null,ee(Y,X,fe,Pe);case B:var Xe=fe._init;return fe=Xe(fe._payload),ae(X,Y,J,fe,Pe)}if(Q(fe)||z(fe))return X=X.get(J)||null,ue(Y,X,fe,Pe,null);if(typeof fe.then=="function")return ae(X,Y,J,jd(fe),Pe);if(fe.$$typeof===D)return ae(X,Y,J,bd(Y,fe),Pe);kd(Y,fe)}return null}function He(X,Y,J,fe){for(var Pe=null,Xe=null,je=Y,ze=Y=0,yn=null;je!==null&&ze<J.length;ze++){je.index>ze?(yn=je,je=null):yn=je.sibling;var at=re(X,je,J[ze],fe);if(at===null){je===null&&(je=yn);break}a&&je&&at.alternate===null&&o(X,je),Y=x(at,Y,ze),Xe===null?Pe=at:Xe.sibling=at,Xe=at,je=yn}if(ze===J.length)return c(X,je),ot&&Ls(X,ze),Pe;if(je===null){for(;ze<J.length;ze++)je=me(X,J[ze],fe),je!==null&&(Y=x(je,Y,ze),Xe===null?Pe=je:Xe.sibling=je,Xe=je);return ot&&Ls(X,ze),Pe}for(je=h(je);ze<J.length;ze++)yn=ae(je,X,ze,J[ze],fe),yn!==null&&(a&&yn.alternate!==null&&je.delete(yn.key===null?ze:yn.key),Y=x(yn,Y,ze),Xe===null?Pe=yn:Xe.sibling=yn,Xe=yn);return a&&je.forEach(function(Zi){return o(X,Zi)}),ot&&Ls(X,ze),Pe}function Be(X,Y,J,fe){if(J==null)throw Error(r(151));for(var Pe=null,Xe=null,je=Y,ze=Y=0,yn=null,at=J.next();je!==null&&!at.done;ze++,at=J.next()){je.index>ze?(yn=je,je=null):yn=je.sibling;var Zi=re(X,je,at.value,fe);if(Zi===null){je===null&&(je=yn);break}a&&je&&Zi.alternate===null&&o(X,je),Y=x(Zi,Y,ze),Xe===null?Pe=Zi:Xe.sibling=Zi,Xe=Zi,je=yn}if(at.done)return c(X,je),ot&&Ls(X,ze),Pe;if(je===null){for(;!at.done;ze++,at=J.next())at=me(X,at.value,fe),at!==null&&(Y=x(at,Y,ze),Xe===null?Pe=at:Xe.sibling=at,Xe=at);return ot&&Ls(X,ze),Pe}for(je=h(je);!at.done;ze++,at=J.next())at=ae(je,X,ze,at.value,fe),at!==null&&(a&&at.alternate!==null&&je.delete(at.key===null?ze:at.key),Y=x(at,Y,ze),Xe===null?Pe=at:Xe.sibling=at,Xe=at);return a&&je.forEach(function(zk){return o(X,zk)}),ot&&Ls(X,ze),Pe}function mt(X,Y,J,fe){if(typeof J=="object"&&J!==null&&J.type===S&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case y:e:{for(var Pe=J.key;Y!==null;){if(Y.key===Pe){if(Pe=J.type,Pe===S){if(Y.tag===7){c(X,Y.sibling),fe=v(Y,J.props.children),fe.return=X,X=fe;break e}}else if(Y.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===B&&MS(Pe)===Y.type){c(X,Y.sibling),fe=v(Y,J.props),Tc(fe,J),fe.return=X,X=fe;break e}c(X,Y);break}else o(X,Y);Y=Y.sibling}J.type===S?(fe=Is(J.props.children,X.mode,fe,J.key),fe.return=X,X=fe):(fe=md(J.type,J.key,J.props,null,X.mode,fe),Tc(fe,J),fe.return=X,X=fe)}return P(X);case b:e:{for(Pe=J.key;Y!==null;){if(Y.key===Pe)if(Y.tag===4&&Y.stateNode.containerInfo===J.containerInfo&&Y.stateNode.implementation===J.implementation){c(X,Y.sibling),fe=v(Y,J.children||[]),fe.return=X,X=fe;break e}else{c(X,Y);break}else o(X,Y);Y=Y.sibling}fe=Bh(J,X.mode,fe),fe.return=X,X=fe}return P(X);case B:return Pe=J._init,J=Pe(J._payload),mt(X,Y,J,fe)}if(Q(J))return He(X,Y,J,fe);if(z(J)){if(Pe=z(J),typeof Pe!="function")throw Error(r(150));return J=Pe.call(J),Be(X,Y,J,fe)}if(typeof J.then=="function")return mt(X,Y,jd(J),fe);if(J.$$typeof===D)return mt(X,Y,bd(X,J),fe);kd(X,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,Y!==null&&Y.tag===6?(c(X,Y.sibling),fe=v(Y,J),fe.return=X,X=fe):(c(X,Y),fe=$h(J,X.mode,fe),fe.return=X,X=fe),P(X)):c(X,Y)}return function(X,Y,J,fe){try{Pc=0;var Pe=mt(X,Y,J,fe);return Qo=null,Pe}catch(je){if(je===yc||je===Sd)throw je;var Xe=pr(29,je,null,X.mode);return Xe.lanes=fe,Xe.return=X,Xe}finally{}}}var Jo=IS(!0),RS=IS(!1),Hr=q(null),Pa=null;function $i(a){var o=a.alternate;te(an,an.current&1),te(Hr,a),Pa===null&&(o===null||Vo.current!==null||o.memoizedState!==null)&&(Pa=a)}function LS(a){if(a.tag===22){if(te(an,an.current),te(Hr,a),Pa===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(Pa=a)}}else Bi()}function Bi(){te(an,an.current),te(Hr,Hr.current)}function ni(a){V(Hr),Pa===a&&(Pa=null),V(an)}var an=q(0);function Md(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||og(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function vm(a,o,c,h){o=a.memoizedState,c=c(h,o),c=c==null?o:m({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var bm={enqueueSetState:function(a,o,c){a=a._reactInternals;var h=yr(),v=Ii(h);v.payload=o,c!=null&&(v.callback=c),o=Ri(a,v,h),o!==null&&(vr(o,a,h),bc(o,a,h))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var h=yr(),v=Ii(h);v.tag=1,v.payload=o,c!=null&&(v.callback=c),o=Ri(a,v,h),o!==null&&(vr(o,a,h),bc(o,a,h))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=yr(),h=Ii(c);h.tag=2,o!=null&&(h.callback=o),o=Ri(a,h,c),o!==null&&(vr(o,a,c),bc(o,a,c))}};function $S(a,o,c,h,v,x,P){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(h,x,P):o.prototype&&o.prototype.isPureReactComponent?!he(c,h)||!he(v,x):!0}function BS(a,o,c,h){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==a&&bm.enqueueReplaceState(o,o.state,null)}function qs(a,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(a=a.defaultProps){c===o&&(c=m({},c));for(var v in a)c[v]===void 0&&(c[v]=a[v])}return c}var Id=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function zS(a){Id(a)}function US(a){console.error(a)}function HS(a){Id(a)}function Rd(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function GS(a,o,c){try{var h=a.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function xm(a,o,c){return c=Ii(c),c.tag=3,c.payload={element:null},c.callback=function(){Rd(a,o)},c}function qS(a){return a=Ii(a),a.tag=3,a}function YS(a,o,c,h){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var x=h.value;a.payload=function(){return v(x)},a.callback=function(){GS(o,c,h)}}var P=c.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(a.callback=function(){GS(o,c,h),typeof v!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var _=h.stack;this.componentDidCatch(h.value,{componentStack:_!==null?_:""})})}function zj(a,o,c,h,v){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&hc(o,c,v,!0),c=Hr.current,c!==null){switch(c.tag){case 13:return Pa===null?qm():c.alternate===null&&Ht===0&&(Ht=3),c.flags&=-257,c.flags|=65536,c.lanes=v,h===Wh?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),Fm(a,h,v)),!1;case 22:return c.flags|=65536,h===Wh?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),Fm(a,h,v)),!1}throw Error(r(435,c.tag))}return Fm(a,h,v),qm(),!1}if(ot)return o=Hr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,h!==Hh&&(a=Error(r(422),{cause:h}),pc($r(a,c)))):(h!==Hh&&(o=Error(r(423),{cause:h}),pc($r(o,c))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,h=$r(h,c),v=xm(a.stateNode,h,v),Jh(a,v),Ht!==4&&(Ht=2)),!1;var x=Error(r(520),{cause:h});if(x=$r(x,c),Mc===null?Mc=[x]:Mc.push(x),Ht!==4&&(Ht=2),o===null)return!0;h=$r(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=v&-v,c.lanes|=a,a=xm(c.stateNode,h,a),Jh(c,a),!1;case 1:if(o=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Yi===null||!Yi.has(x))))return c.flags|=65536,v&=-v,c.lanes|=v,v=qS(v),YS(v,a,c,h),Jh(c,v),!1}c=c.return}while(c!==null);return!1}var FS=Error(r(461)),mn=!1;function wn(a,o,c,h){o.child=a===null?RS(o,null,c,h):Jo(o,a.child,c,h)}function VS(a,o,c,h,v){c=c.render;var x=o.ref;if("ref"in h){var P={};for(var _ in h)_!=="ref"&&(P[_]=h[_])}else P=h;return Us(o),h=rm(a,o,c,P,x,v),_=am(),a!==null&&!mn?(im(a,o,v),ri(a,o,v)):(ot&&_&&zh(o),o.flags|=1,wn(a,o,h,v),o.child)}function KS(a,o,c,h,v){if(a===null){var x=c.type;return typeof x=="function"&&!Lh(x)&&x.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=x,WS(a,o,x,h,v)):(a=md(c.type,null,h,o,o.mode,v),a.ref=o.ref,a.return=o,o.child=a)}if(x=a.child,!Dm(a,v)){var P=x.memoizedProps;if(c=c.compare,c=c!==null?c:he,c(P,h)&&a.ref===o.ref)return ri(a,o,v)}return o.flags|=1,a=Xa(x,h),a.ref=o.ref,a.return=o,o.child=a}function WS(a,o,c,h,v){if(a!==null){var x=a.memoizedProps;if(he(x,h)&&a.ref===o.ref)if(mn=!1,o.pendingProps=h=x,Dm(a,v))(a.flags&131072)!==0&&(mn=!0);else return o.lanes=a.lanes,ri(a,o,v)}return Sm(a,o,c,h,v)}function XS(a,o,c){var h=o.pendingProps,v=h.children,x=a!==null?a.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=x!==null?x.baseLanes|c:c,a!==null){for(v=o.child=a.child,x=0;v!==null;)x=x|v.lanes|v.childLanes,v=v.sibling;o.childLanes=x&~h}else o.childLanes=0,o.child=null;return QS(a,o,h,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&xd(o,x!==null?x.cachePool:null),x!==null?Wx(o,x):em(),LS(o);else return o.lanes=o.childLanes=536870912,QS(a,o,x!==null?x.baseLanes|c:c,c)}else x!==null?(xd(o,x.cachePool),Wx(o,x),Bi(),o.memoizedState=null):(a!==null&&xd(o,null),em(),Bi());return wn(a,o,v,c),o.child}function QS(a,o,c,h){var v=Kh();return v=v===null?null:{parent:rn._currentValue,pool:v},o.memoizedState={baseLanes:c,cachePool:v},a!==null&&xd(o,null),em(),LS(o),a!==null&&hc(a,o,h,!0),null}function Ld(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function Sm(a,o,c,h,v){return Us(o),c=rm(a,o,c,h,void 0,v),h=am(),a!==null&&!mn?(im(a,o,v),ri(a,o,v)):(ot&&h&&zh(o),o.flags|=1,wn(a,o,c,v),o.child)}function JS(a,o,c,h,v,x){return Us(o),o.updateQueue=null,c=Qx(o,h,c,v),Xx(a),h=am(),a!==null&&!mn?(im(a,o,x),ri(a,o,x)):(ot&&h&&zh(o),o.flags|=1,wn(a,o,c,x),o.child)}function ZS(a,o,c,h,v){if(Us(o),o.stateNode===null){var x=Ho,P=c.contextType;typeof P=="object"&&P!==null&&(x=kn(P)),x=new c(h,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=bm,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=h,x.state=o.memoizedState,x.refs={},Xh(o),P=c.contextType,x.context=typeof P=="object"&&P!==null?kn(P):Ho,x.state=o.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(vm(o,c,P,h),x.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(P=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),P!==x.state&&bm.enqueueReplaceState(x,x.state,null),Sc(o,h,x,v),xc(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(a===null){x=o.stateNode;var _=o.memoizedProps,U=qs(c,_);x.props=U;var ee=x.context,ue=c.contextType;P=Ho,typeof ue=="object"&&ue!==null&&(P=kn(ue));var me=c.getDerivedStateFromProps;ue=typeof me=="function"||typeof x.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,ue||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_||ee!==P)&&BS(o,x,h,P),Mi=!1;var re=o.memoizedState;x.state=re,Sc(o,h,x,v),xc(),ee=o.memoizedState,_||re!==ee||Mi?(typeof me=="function"&&(vm(o,c,me,h),ee=o.memoizedState),(U=Mi||$S(o,c,U,h,re,ee,P))?(ue||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=ee),x.props=h,x.state=ee,x.context=P,h=U):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{x=o.stateNode,Qh(a,o),P=o.memoizedProps,ue=qs(c,P),x.props=ue,me=o.pendingProps,re=x.context,ee=c.contextType,U=Ho,typeof ee=="object"&&ee!==null&&(U=kn(ee)),_=c.getDerivedStateFromProps,(ee=typeof _=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(P!==me||re!==U)&&BS(o,x,h,U),Mi=!1,re=o.memoizedState,x.state=re,Sc(o,h,x,v),xc();var ae=o.memoizedState;P!==me||re!==ae||Mi||a!==null&&a.dependencies!==null&&vd(a.dependencies)?(typeof _=="function"&&(vm(o,c,_,h),ae=o.memoizedState),(ue=Mi||$S(o,c,ue,h,re,ae,U)||a!==null&&a.dependencies!==null&&vd(a.dependencies))?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,ae,U),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,ae,U)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||P===a.memoizedProps&&re===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&re===a.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ae),x.props=h,x.state=ae,x.context=U,h=ue):(typeof x.componentDidUpdate!="function"||P===a.memoizedProps&&re===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&re===a.memoizedState||(o.flags|=1024),h=!1)}return x=h,Ld(a,o),h=(o.flags&128)!==0,x||h?(x=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,a!==null&&h?(o.child=Jo(o,a.child,null,v),o.child=Jo(o,null,c,v)):wn(a,o,c,v),o.memoizedState=x.state,a=o.child):a=ri(a,o,v),a}function e1(a,o,c,h){return fc(),o.flags|=256,wn(a,o,c,h),o.child}var Cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Am(a){return{baseLanes:a,cachePool:Ux()}}function Em(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=Gr),a}function t1(a,o,c){var h=o.pendingProps,v=!1,x=(o.flags&128)!==0,P;if((P=x)||(P=a!==null&&a.memoizedState===null?!1:(an.current&2)!==0),P&&(v=!0,o.flags&=-129),P=(o.flags&32)!==0,o.flags&=-33,a===null){if(ot){if(v?$i(o):Bi(),ot){var _=Ut,U;if(U=_){e:{for(U=_,_=wa;U.nodeType!==8;){if(!_){_=null;break e}if(U=ha(U.nextSibling),U===null){_=null;break e}}_=U}_!==null?(o.memoizedState={dehydrated:_,treeContext:Rs!==null?{id:Qa,overflow:Ja}:null,retryLane:536870912,hydrationErrors:null},U=pr(18,null,null,0),U.stateNode=_,U.return=o,o.child=U,Gn=o,Ut=null,U=!0):U=!1}U||Bs(o)}if(_=o.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return og(_)?o.lanes=32:o.lanes=536870912,null;ni(o)}return _=h.children,h=h.fallback,v?(Bi(),v=o.mode,_=$d({mode:"hidden",children:_},v),h=Is(h,v,c,null),_.return=o,h.return=o,_.sibling=h,o.child=_,v=o.child,v.memoizedState=Am(c),v.childLanes=Em(a,P,c),o.memoizedState=Cm,h):($i(o),wm(o,_))}if(U=a.memoizedState,U!==null&&(_=U.dehydrated,_!==null)){if(x)o.flags&256?($i(o),o.flags&=-257,o=Pm(a,o,c)):o.memoizedState!==null?(Bi(),o.child=a.child,o.flags|=128,o=null):(Bi(),v=h.fallback,_=o.mode,h=$d({mode:"visible",children:h.children},_),v=Is(v,_,c,null),v.flags|=2,h.return=o,v.return=o,h.sibling=v,o.child=h,Jo(o,a.child,null,c),h=o.child,h.memoizedState=Am(c),h.childLanes=Em(a,P,c),o.memoizedState=Cm,o=v);else if($i(o),og(_)){if(P=_.nextSibling&&_.nextSibling.dataset,P)var ee=P.dgst;P=ee,h=Error(r(419)),h.stack="",h.digest=P,pc({value:h,source:null,stack:null}),o=Pm(a,o,c)}else if(mn||hc(a,o,c,!1),P=(c&a.childLanes)!==0,mn||P){if(P=Et,P!==null&&(h=c&-c,h=(h&42)!==0?1:be(h),h=(h&(P.suspendedLanes|c))!==0?0:h,h!==0&&h!==U.retryLane))throw U.retryLane=h,Uo(a,h),vr(P,a,h),FS;_.data==="$?"||qm(),o=Pm(a,o,c)}else _.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=U.treeContext,Ut=ha(_.nextSibling),Gn=o,ot=!0,$s=null,wa=!1,a!==null&&(zr[Ur++]=Qa,zr[Ur++]=Ja,zr[Ur++]=Rs,Qa=a.id,Ja=a.overflow,Rs=o),o=wm(o,h.children),o.flags|=4096);return o}return v?(Bi(),v=h.fallback,_=o.mode,U=a.child,ee=U.sibling,h=Xa(U,{mode:"hidden",children:h.children}),h.subtreeFlags=U.subtreeFlags&65011712,ee!==null?v=Xa(ee,v):(v=Is(v,_,c,null),v.flags|=2),v.return=o,h.return=o,h.sibling=v,o.child=h,h=v,v=o.child,_=a.child.memoizedState,_===null?_=Am(c):(U=_.cachePool,U!==null?(ee=rn._currentValue,U=U.parent!==ee?{parent:ee,pool:ee}:U):U=Ux(),_={baseLanes:_.baseLanes|c,cachePool:U}),v.memoizedState=_,v.childLanes=Em(a,P,c),o.memoizedState=Cm,h):($i(o),c=a.child,a=c.sibling,c=Xa(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,a!==null&&(P=o.deletions,P===null?(o.deletions=[a],o.flags|=16):P.push(a)),o.child=c,o.memoizedState=null,c)}function wm(a,o){return o=$d({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function $d(a,o){return a=pr(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Pm(a,o,c){return Jo(o,a.child,null,c),a=wm(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function n1(a,o,c){a.lanes|=o;var h=a.alternate;h!==null&&(h.lanes|=o),qh(a.return,o,c)}function Tm(a,o,c,h,v){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=h,x.tail=c,x.tailMode=v)}function r1(a,o,c){var h=o.pendingProps,v=h.revealOrder,x=h.tail;if(wn(a,o,h.children,c),h=an.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&n1(a,c,o);else if(a.tag===19)n1(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}h&=1}switch(te(an,h),v){case"forwards":for(c=o.child,v=null;c!==null;)a=c.alternate,a!==null&&Md(a)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),Tm(o,!1,v,c,x);break;case"backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(a=v.alternate,a!==null&&Md(a)===null){o.child=v;break}a=v.sibling,v.sibling=c,c=v,v=a}Tm(o,!0,c,null,x);break;case"together":Tm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ri(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),qi|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(hc(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=Xa(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=Xa(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function Dm(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&vd(a)))}function Uj(a,o,c){switch(o.tag){case 3:ke(o,o.stateNode.containerInfo),ki(o,rn,a.memoizedState.cache),fc();break;case 27:case 5:Me(o);break;case 4:ke(o,o.stateNode.containerInfo);break;case 10:ki(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?($i(o),o.flags|=128,null):(c&o.child.childLanes)!==0?t1(a,o,c):($i(o),a=ri(a,o,c),a!==null?a.sibling:null);$i(o);break;case 19:var v=(a.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(hc(a,o,c,!1),h=(c&o.childLanes)!==0),v){if(h)return r1(a,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),te(an,an.current),h)break;return null;case 22:case 23:return o.lanes=0,XS(a,o,c);case 24:ki(o,rn,a.memoizedState.cache)}return ri(a,o,c)}function a1(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)mn=!0;else{if(!Dm(a,c)&&(o.flags&128)===0)return mn=!1,Uj(a,o,c);mn=(a.flags&131072)!==0}else mn=!1,ot&&(o.flags&1048576)!==0&&Mx(o,yd,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var h=o.elementType,v=h._init;if(h=v(h._payload),o.type=h,typeof h=="function")Lh(h)?(a=qs(h,a),o.tag=1,o=ZS(null,o,h,a,c)):(o.tag=0,o=Sm(null,o,h,a,c));else{if(h!=null){if(v=h.$$typeof,v===O){o.tag=11,o=VS(null,o,h,a,c);break e}else if(v===k){o.tag=14,o=KS(null,o,h,a,c);break e}}throw o=Z(h)||h,Error(r(306,o,""))}}return o;case 0:return Sm(a,o,o.type,o.pendingProps,c);case 1:return h=o.type,v=qs(h,o.pendingProps),ZS(a,o,h,v,c);case 3:e:{if(ke(o,o.stateNode.containerInfo),a===null)throw Error(r(387));h=o.pendingProps;var x=o.memoizedState;v=x.element,Qh(a,o),Sc(o,h,null,c);var P=o.memoizedState;if(h=P.cache,ki(o,rn,h),h!==x.cache&&Yh(o,[rn],c,!0),xc(),h=P.element,x.isDehydrated)if(x={element:h,isDehydrated:!1,cache:P.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=e1(a,o,h,c);break e}else if(h!==v){v=$r(Error(r(424)),o),pc(v),o=e1(a,o,h,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ut=ha(a.firstChild),Gn=o,ot=!0,$s=null,wa=!0,c=RS(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(fc(),h===v){o=ri(a,o,c);break e}wn(a,o,h,c)}o=o.child}return o;case 26:return Ld(a,o),a===null?(c=lC(o.type,null,o.pendingProps,null))?o.memoizedState=c:ot||(c=o.type,a=o.pendingProps,h=Jd(Ee.current).createElement(c),h[Ye]=o,h[Ve]=a,Tn(h,c,a),bt(h),o.stateNode=h):o.memoizedState=lC(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Me(o),a===null&&ot&&(h=o.stateNode=iC(o.type,o.pendingProps,Ee.current),Gn=o,wa=!0,v=Ut,Ki(o.type)?(lg=v,Ut=ha(h.firstChild)):Ut=v),wn(a,o,o.pendingProps.children,c),Ld(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&ot&&((v=h=Ut)&&(h=mk(h,o.type,o.pendingProps,wa),h!==null?(o.stateNode=h,Gn=o,Ut=ha(h.firstChild),wa=!1,v=!0):v=!1),v||Bs(o)),Me(o),v=o.type,x=o.pendingProps,P=a!==null?a.memoizedProps:null,h=x.children,ag(v,x)?h=null:P!==null&&ag(v,P)&&(o.flags|=32),o.memoizedState!==null&&(v=rm(a,o,kj,null,null,c),Gc._currentValue=v),Ld(a,o),wn(a,o,h,c),o.child;case 6:return a===null&&ot&&((a=c=Ut)&&(c=gk(c,o.pendingProps,wa),c!==null?(o.stateNode=c,Gn=o,Ut=null,a=!0):a=!1),a||Bs(o)),null;case 13:return t1(a,o,c);case 4:return ke(o,o.stateNode.containerInfo),h=o.pendingProps,a===null?o.child=Jo(o,null,h,c):wn(a,o,h,c),o.child;case 11:return VS(a,o,o.type,o.pendingProps,c);case 7:return wn(a,o,o.pendingProps,c),o.child;case 8:return wn(a,o,o.pendingProps.children,c),o.child;case 12:return wn(a,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,ki(o,o.type,h.value),wn(a,o,h.children,c),o.child;case 9:return v=o.type._context,h=o.pendingProps.children,Us(o),v=kn(v),h=h(v),o.flags|=1,wn(a,o,h,c),o.child;case 14:return KS(a,o,o.type,o.pendingProps,c);case 15:return WS(a,o,o.type,o.pendingProps,c);case 19:return r1(a,o,c);case 31:return h=o.pendingProps,c=o.mode,h={mode:h.mode,children:h.children},a===null?(c=$d(h,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Xa(a.child,h),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return XS(a,o,c);case 24:return Us(o),h=kn(rn),a===null?(v=Kh(),v===null&&(v=Et,x=Fh(),v.pooledCache=x,x.refCount++,x!==null&&(v.pooledCacheLanes|=c),v=x),o.memoizedState={parent:h,cache:v},Xh(o),ki(o,rn,v)):((a.lanes&c)!==0&&(Qh(a,o),Sc(o,null,null,c),xc()),v=a.memoizedState,x=o.memoizedState,v.parent!==h?(v={parent:h,cache:h},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),ki(o,rn,h)):(h=x.cache,ki(o,rn,h),h!==v.cache&&Yh(o,[rn],c,!0))),wn(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ai(a){a.flags|=4}function i1(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!pC(o)){if(o=Hr.current,o!==null&&((nt&4194048)===nt?Pa!==null:(nt&62914560)!==nt&&(nt&536870912)===0||o!==Pa))throw vc=Wh,Hx;a.flags|=8192}}function Bd(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?Ni():536870912,a.lanes|=o,nl|=o)}function Dc(a,o){if(!ot)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:h.sibling=null}}function Lt(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,h=0;if(o)for(var v=a.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=h,a.childLanes=c,o}function Hj(a,o,c){var h=o.pendingProps;switch(Uh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(o),null;case 1:return Lt(o),null;case 3:return c=o.stateNode,h=null,a!==null&&(h=a.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),ei(rn),xe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(dc(o)?ai(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Lx())),Lt(o),null;case 26:return c=o.memoizedState,a===null?(ai(o),c!==null?(Lt(o),i1(o,c)):(Lt(o),o.flags&=-16777217)):c?c!==a.memoizedState?(ai(o),Lt(o),i1(o,c)):(Lt(o),o.flags&=-16777217):(a.memoizedProps!==h&&ai(o),Lt(o),o.flags&=-16777217),null;case 27:Ne(o),c=Ee.current;var v=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==h&&ai(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Lt(o),null}a=ve.current,dc(o)?Ix(o):(a=iC(v,h,c),o.stateNode=a,ai(o))}return Lt(o),null;case 5:if(Ne(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==h&&ai(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return Lt(o),null}if(a=ve.current,dc(o))Ix(o);else{switch(v=Jd(Ee.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof h.is=="string"?v.createElement("select",{is:h.is}):v.createElement("select"),h.multiple?a.multiple=!0:h.size&&(a.size=h.size);break;default:a=typeof h.is=="string"?v.createElement(c,{is:h.is}):v.createElement(c)}}a[Ye]=o,a[Ve]=h;e:for(v=o.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===o)break e;for(;v.sibling===null;){if(v.return===null||v.return===o)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}o.stateNode=a;e:switch(Tn(a,c,h),c){case"button":case"input":case"select":case"textarea":a=!!h.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ai(o)}}return Lt(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==h&&ai(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(a=Ee.current,dc(o)){if(a=o.stateNode,c=o.memoizedProps,h=null,v=Gn,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}a[Ye]=o,a=!!(a.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||J1(a.nodeValue,c)),a||Bs(o)}else a=Jd(a).createTextNode(h),a[Ye]=o,o.stateNode=a}return Lt(o),null;case 13:if(h=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=dc(o),h!==null&&h.dehydrated!==null){if(a===null){if(!v)throw Error(r(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Ye]=o}else fc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Lt(o),v=!1}else v=Lx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(ni(o),o):(ni(o),null)}if(ni(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=h!==null,a=a!==null&&a.memoizedState!==null,c){h=o.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool);var x=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==v&&(h.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),Bd(o,o.updateQueue),Lt(o),null;case 4:return xe(),a===null&&Zm(o.stateNode.containerInfo),Lt(o),null;case 10:return ei(o.type),Lt(o),null;case 19:if(V(an),v=o.memoizedState,v===null)return Lt(o),null;if(h=(o.flags&128)!==0,x=v.rendering,x===null)if(h)Dc(v,!1);else{if(Ht!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(x=Md(a),x!==null){for(o.flags|=128,Dc(v,!1),a=x.updateQueue,o.updateQueue=a,Bd(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)kx(c,a),c=c.sibling;return te(an,an.current&1|2),o.child}a=a.sibling}v.tail!==null&&Tt()>Hd&&(o.flags|=128,h=!0,Dc(v,!1),o.lanes=4194304)}else{if(!h)if(a=Md(x),a!==null){if(o.flags|=128,h=!0,a=a.updateQueue,o.updateQueue=a,Bd(o,a),Dc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!x.alternate&&!ot)return Lt(o),null}else 2*Tt()-v.renderingStartTime>Hd&&c!==536870912&&(o.flags|=128,h=!0,Dc(v,!1),o.lanes=4194304);v.isBackwards?(x.sibling=o.child,o.child=x):(a=v.last,a!==null?a.sibling=x:o.child=x,v.last=x)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=Tt(),o.sibling=null,a=an.current,te(an,h?a&1|2:a&1),o):(Lt(o),null);case 22:case 23:return ni(o),tm(),h=o.memoizedState!==null,a!==null?a.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(Lt(o),o.subtreeFlags&6&&(o.flags|=8192)):Lt(o),c=o.updateQueue,c!==null&&Bd(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),a!==null&&V(Hs),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),ei(rn),Lt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Gj(a,o){switch(Uh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return ei(rn),xe(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Ne(o),null;case 13:if(ni(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));fc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return V(an),null;case 4:return xe(),null;case 10:return ei(o.type),null;case 22:case 23:return ni(o),tm(),a!==null&&V(Hs),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return ei(rn),null;case 25:return null;default:return null}}function s1(a,o){switch(Uh(o),o.tag){case 3:ei(rn),xe();break;case 26:case 27:case 5:Ne(o);break;case 4:xe();break;case 13:ni(o);break;case 19:V(an);break;case 10:ei(o.type);break;case 22:case 23:ni(o),tm(),a!==null&&V(Hs);break;case 24:ei(rn)}}function Oc(a,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var v=h.next;c=v;do{if((c.tag&a)===a){h=void 0;var x=c.create,P=c.inst;h=x(),P.destroy=h}c=c.next}while(c!==v)}}catch(_){xt(o,o.return,_)}}function zi(a,o,c){try{var h=o.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var x=v.next;h=x;do{if((h.tag&a)===a){var P=h.inst,_=P.destroy;if(_!==void 0){P.destroy=void 0,v=o;var U=c,ee=_;try{ee()}catch(ue){xt(v,U,ue)}}}h=h.next}while(h!==x)}}catch(ue){xt(o,o.return,ue)}}function o1(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{Kx(o,c)}catch(h){xt(a,a.return,h)}}}function l1(a,o,c){c.props=qs(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(h){xt(a,o,h)}}function _c(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var h=a.stateNode;break;case 30:h=a.stateNode;break;default:h=a.stateNode}typeof c=="function"?a.refCleanup=c(h):c.current=h}}catch(v){xt(a,o,v)}}function Ta(a,o){var c=a.ref,h=a.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(v){xt(a,o,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){xt(a,o,v)}else c.current=null}function c1(a){var o=a.type,c=a.memoizedProps,h=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(v){xt(a,a.return,v)}}function Om(a,o,c){try{var h=a.stateNode;uk(h,a.type,c,o),h[Ve]=o}catch(v){xt(a,a.return,v)}}function u1(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ki(a.type)||a.tag===4}function _m(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||u1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ki(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Nm(a,o,c){var h=a.tag;if(h===5||h===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Qd));else if(h!==4&&(h===27&&Ki(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(Nm(a,o,c),a=a.sibling;a!==null;)Nm(a,o,c),a=a.sibling}function zd(a,o,c){var h=a.tag;if(h===5||h===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(h!==4&&(h===27&&Ki(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(zd(a,o,c),a=a.sibling;a!==null;)zd(a,o,c),a=a.sibling}function d1(a){var o=a.stateNode,c=a.memoizedProps;try{for(var h=a.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Tn(o,h,c),o[Ye]=a,o[Ve]=c}catch(x){xt(a,a.return,x)}}var ii=!1,Ft=!1,jm=!1,f1=typeof WeakSet=="function"?WeakSet:Set,gn=null;function qj(a,o){if(a=a.containerInfo,ng=af,a=At(a),fr(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,x=h.focusNode;h=h.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var P=0,_=-1,U=-1,ee=0,ue=0,me=a,re=null;t:for(;;){for(var ae;me!==c||v!==0&&me.nodeType!==3||(_=P+v),me!==x||h!==0&&me.nodeType!==3||(U=P+h),me.nodeType===3&&(P+=me.nodeValue.length),(ae=me.firstChild)!==null;)re=me,me=ae;for(;;){if(me===a)break t;if(re===c&&++ee===v&&(_=P),re===x&&++ue===h&&(U=P),(ae=me.nextSibling)!==null)break;me=re,re=me.parentNode}me=ae}c=_===-1||U===-1?null:{start:_,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(rg={focusedElem:a,selectionRange:c},af=!1,gn=o;gn!==null;)if(o=gn,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,gn=a;else for(;gn!==null;){switch(o=gn,x=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,c=o,v=x.memoizedProps,x=x.memoizedState,h=c.stateNode;try{var He=qs(c.type,v,c.elementType===c.type);a=h.getSnapshotBeforeUpdate(He,x),h.__reactInternalSnapshotBeforeUpdate=a}catch(Be){xt(c,c.return,Be)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)sg(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":sg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,gn=a;break}gn=o.return}}function p1(a,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Ui(a,c),h&4&&Oc(5,c);break;case 1:if(Ui(a,c),h&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(P){xt(c,c.return,P)}else{var v=qs(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(v,o,a.__reactInternalSnapshotBeforeUpdate)}catch(P){xt(c,c.return,P)}}h&64&&o1(c),h&512&&_c(c,c.return);break;case 3:if(Ui(a,c),h&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Kx(a,o)}catch(P){xt(c,c.return,P)}}break;case 27:o===null&&h&4&&d1(c);case 26:case 5:Ui(a,c),o===null&&h&4&&c1(c),h&512&&_c(c,c.return);break;case 12:Ui(a,c);break;case 13:Ui(a,c),h&4&&g1(a,c),h&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=Zj.bind(null,c),yk(a,c))));break;case 22:if(h=c.memoizedState!==null||ii,!h){o=o!==null&&o.memoizedState!==null||Ft,v=ii;var x=Ft;ii=h,(Ft=o)&&!x?Hi(a,c,(c.subtreeFlags&8772)!==0):Ui(a,c),ii=v,Ft=x}break;case 30:break;default:Ui(a,c)}}function h1(a){var o=a.alternate;o!==null&&(a.alternate=null,h1(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Ot(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var jt=null,Zn=!1;function si(a,o,c){for(c=c.child;c!==null;)m1(a,o,c),c=c.sibling}function m1(a,o,c){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(aa,c)}catch{}switch(c.tag){case 26:Ft||Ta(c,o),si(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ft||Ta(c,o);var h=jt,v=Zn;Ki(c.type)&&(jt=c.stateNode,Zn=!1),si(a,o,c),Bc(c.stateNode),jt=h,Zn=v;break;case 5:Ft||Ta(c,o);case 6:if(h=jt,v=Zn,jt=null,si(a,o,c),jt=h,Zn=v,jt!==null)if(Zn)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(c.stateNode)}catch(x){xt(c,o,x)}else try{jt.removeChild(c.stateNode)}catch(x){xt(c,o,x)}break;case 18:jt!==null&&(Zn?(a=jt,rC(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),Vc(a)):rC(jt,c.stateNode));break;case 4:h=jt,v=Zn,jt=c.stateNode.containerInfo,Zn=!0,si(a,o,c),jt=h,Zn=v;break;case 0:case 11:case 14:case 15:Ft||zi(2,c,o),Ft||zi(4,c,o),si(a,o,c);break;case 1:Ft||(Ta(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&l1(c,o,h)),si(a,o,c);break;case 21:si(a,o,c);break;case 22:Ft=(h=Ft)||c.memoizedState!==null,si(a,o,c),Ft=h;break;default:si(a,o,c)}}function g1(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Vc(a)}catch(c){xt(o,o.return,c)}}function Yj(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new f1),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new f1),o;default:throw Error(r(435,a.tag))}}function km(a,o){var c=Yj(a);o.forEach(function(h){var v=ek.bind(null,a,h);c.has(h)||(c.add(h),h.then(v,v))})}function hr(a,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h],x=a,P=o,_=P;e:for(;_!==null;){switch(_.tag){case 27:if(Ki(_.type)){jt=_.stateNode,Zn=!1;break e}break;case 5:jt=_.stateNode,Zn=!1;break e;case 3:case 4:jt=_.stateNode.containerInfo,Zn=!0;break e}_=_.return}if(jt===null)throw Error(r(160));m1(x,P,v),jt=null,Zn=!1,x=v.alternate,x!==null&&(x.return=null),v.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)y1(o,a),o=o.sibling}var pa=null;function y1(a,o){var c=a.alternate,h=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:hr(o,a),mr(a),h&4&&(zi(3,a,a.return),Oc(3,a),zi(5,a,a.return));break;case 1:hr(o,a),mr(a),h&512&&(Ft||c===null||Ta(c,c.return)),h&64&&ii&&(a=a.updateQueue,a!==null&&(h=a.callbacks,h!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var v=pa;if(hr(o,a),mr(a),h&512&&(Ft||c===null||Ta(c,c.return)),h&4){var x=c!==null?c.memoizedState:null;if(h=a.memoizedState,c===null)if(h===null)if(a.stateNode===null){e:{h=a.type,c=a.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":x=v.getElementsByTagName("title")[0],(!x||x[Do]||x[Ye]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=v.createElement(h),v.head.insertBefore(x,v.querySelector("head > title"))),Tn(x,h,c),x[Ye]=a,bt(x),h=x;break e;case"link":var P=dC("link","href",v).get(h+(c.href||""));if(P){for(var _=0;_<P.length;_++)if(x=P[_],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){P.splice(_,1);break t}}x=v.createElement(h),Tn(x,h,c),v.head.appendChild(x);break;case"meta":if(P=dC("meta","content",v).get(h+(c.content||""))){for(_=0;_<P.length;_++)if(x=P[_],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){P.splice(_,1);break t}}x=v.createElement(h),Tn(x,h,c),v.head.appendChild(x);break;default:throw Error(r(468,h))}x[Ye]=a,bt(x),h=x}a.stateNode=h}else fC(v,a.type,a.stateNode);else a.stateNode=uC(v,h,a.memoizedProps);else x!==h?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,h===null?fC(v,a.type,a.stateNode):uC(v,h,a.memoizedProps)):h===null&&a.stateNode!==null&&Om(a,a.memoizedProps,c.memoizedProps)}break;case 27:hr(o,a),mr(a),h&512&&(Ft||c===null||Ta(c,c.return)),c!==null&&h&4&&Om(a,a.memoizedProps,c.memoizedProps);break;case 5:if(hr(o,a),mr(a),h&512&&(Ft||c===null||Ta(c,c.return)),a.flags&32){v=a.stateNode;try{qa(v,"")}catch(ae){xt(a,a.return,ae)}}h&4&&a.stateNode!=null&&(v=a.memoizedProps,Om(a,v,c!==null?c.memoizedProps:v)),h&1024&&(jm=!0);break;case 6:if(hr(o,a),mr(a),h&4){if(a.stateNode===null)throw Error(r(162));h=a.memoizedProps,c=a.stateNode;try{c.nodeValue=h}catch(ae){xt(a,a.return,ae)}}break;case 3:if(tf=null,v=pa,pa=Zd(o.containerInfo),hr(o,a),pa=v,mr(a),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Vc(o.containerInfo)}catch(ae){xt(a,a.return,ae)}jm&&(jm=!1,v1(a));break;case 4:h=pa,pa=Zd(a.stateNode.containerInfo),hr(o,a),mr(a),pa=h;break;case 12:hr(o,a),mr(a);break;case 13:hr(o,a),mr(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Bm=Tt()),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,km(a,h)));break;case 22:v=a.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,ee=ii,ue=Ft;if(ii=ee||v,Ft=ue||U,hr(o,a),Ft=ue,ii=ee,mr(a),h&8192)e:for(o=a.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(c===null||U||ii||Ft||Ys(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){U=c=o;try{if(x=U.stateNode,v)P=x.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{_=U.stateNode;var me=U.memoizedProps.style,re=me!=null&&me.hasOwnProperty("display")?me.display:null;_.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ae){xt(U,U.return,ae)}}}else if(o.tag===6){if(c===null){U=o;try{U.stateNode.nodeValue=v?"":U.memoizedProps}catch(ae){xt(U,U.return,ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=a.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,km(a,c))));break;case 19:hr(o,a),mr(a),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,km(a,h)));break;case 30:break;case 21:break;default:hr(o,a),mr(a)}}function mr(a){var o=a.flags;if(o&2){try{for(var c,h=a.return;h!==null;){if(u1(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var v=c.stateNode,x=_m(a);zd(a,x,v);break;case 5:var P=c.stateNode;c.flags&32&&(qa(P,""),c.flags&=-33);var _=_m(a);zd(a,_,P);break;case 3:case 4:var U=c.stateNode.containerInfo,ee=_m(a);Nm(a,ee,U);break;default:throw Error(r(161))}}catch(ue){xt(a,a.return,ue)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function v1(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;v1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Ui(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)p1(a,o.alternate,o),o=o.sibling}function Ys(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:zi(4,o,o.return),Ys(o);break;case 1:Ta(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&l1(o,o.return,c),Ys(o);break;case 27:Bc(o.stateNode);case 26:case 5:Ta(o,o.return),Ys(o);break;case 22:o.memoizedState===null&&Ys(o);break;case 30:Ys(o);break;default:Ys(o)}a=a.sibling}}function Hi(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,v=a,x=o,P=x.flags;switch(x.tag){case 0:case 11:case 15:Hi(v,x,c),Oc(4,x);break;case 1:if(Hi(v,x,c),h=x,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ee){xt(h,h.return,ee)}if(h=x,v=h.updateQueue,v!==null){var _=h.stateNode;try{var U=v.shared.hiddenCallbacks;if(U!==null)for(v.shared.hiddenCallbacks=null,v=0;v<U.length;v++)Vx(U[v],_)}catch(ee){xt(h,h.return,ee)}}c&&P&64&&o1(x),_c(x,x.return);break;case 27:d1(x);case 26:case 5:Hi(v,x,c),c&&h===null&&P&4&&c1(x),_c(x,x.return);break;case 12:Hi(v,x,c);break;case 13:Hi(v,x,c),c&&P&4&&g1(v,x);break;case 22:x.memoizedState===null&&Hi(v,x,c),_c(x,x.return);break;case 30:break;default:Hi(v,x,c)}o=o.sibling}}function Mm(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&mc(c))}function Im(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&mc(a))}function Da(a,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)b1(a,o,c,h),o=o.sibling}function b1(a,o,c,h){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Da(a,o,c,h),v&2048&&Oc(9,o);break;case 1:Da(a,o,c,h);break;case 3:Da(a,o,c,h),v&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&mc(a)));break;case 12:if(v&2048){Da(a,o,c,h),a=o.stateNode;try{var x=o.memoizedProps,P=x.id,_=x.onPostCommit;typeof _=="function"&&_(P,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(U){xt(o,o.return,U)}}else Da(a,o,c,h);break;case 13:Da(a,o,c,h);break;case 23:break;case 22:x=o.stateNode,P=o.alternate,o.memoizedState!==null?x._visibility&2?Da(a,o,c,h):Nc(a,o):x._visibility&2?Da(a,o,c,h):(x._visibility|=2,Zo(a,o,c,h,(o.subtreeFlags&10256)!==0)),v&2048&&Mm(P,o);break;case 24:Da(a,o,c,h),v&2048&&Im(o.alternate,o);break;default:Da(a,o,c,h)}}function Zo(a,o,c,h,v){for(v=v&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var x=a,P=o,_=c,U=h,ee=P.flags;switch(P.tag){case 0:case 11:case 15:Zo(x,P,_,U,v),Oc(8,P);break;case 23:break;case 22:var ue=P.stateNode;P.memoizedState!==null?ue._visibility&2?Zo(x,P,_,U,v):Nc(x,P):(ue._visibility|=2,Zo(x,P,_,U,v)),v&&ee&2048&&Mm(P.alternate,P);break;case 24:Zo(x,P,_,U,v),v&&ee&2048&&Im(P.alternate,P);break;default:Zo(x,P,_,U,v)}o=o.sibling}}function Nc(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,h=o,v=h.flags;switch(h.tag){case 22:Nc(c,h),v&2048&&Mm(h.alternate,h);break;case 24:Nc(c,h),v&2048&&Im(h.alternate,h);break;default:Nc(c,h)}o=o.sibling}}var jc=8192;function el(a){if(a.subtreeFlags&jc)for(a=a.child;a!==null;)x1(a),a=a.sibling}function x1(a){switch(a.tag){case 26:el(a),a.flags&jc&&a.memoizedState!==null&&_k(pa,a.memoizedState,a.memoizedProps);break;case 5:el(a);break;case 3:case 4:var o=pa;pa=Zd(a.stateNode.containerInfo),el(a),pa=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=jc,jc=16777216,el(a),jc=o):el(a));break;default:el(a)}}function S1(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function kc(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];gn=h,A1(h,a)}S1(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)C1(a),a=a.sibling}function C1(a){switch(a.tag){case 0:case 11:case 15:kc(a),a.flags&2048&&zi(9,a,a.return);break;case 3:kc(a);break;case 12:kc(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Ud(a)):kc(a);break;default:kc(a)}}function Ud(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];gn=h,A1(h,a)}S1(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:zi(8,o,o.return),Ud(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Ud(o));break;default:Ud(o)}a=a.sibling}}function A1(a,o){for(;gn!==null;){var c=gn;switch(c.tag){case 0:case 11:case 15:zi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:mc(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,gn=h;else e:for(c=a;gn!==null;){h=gn;var v=h.sibling,x=h.return;if(h1(h),h===c){gn=null;break e}if(v!==null){v.return=x,gn=v;break e}gn=x}}}var Fj={getCacheForType:function(a){var o=kn(rn),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},Vj=typeof WeakMap=="function"?WeakMap:Map,ct=0,Et=null,Qe=null,nt=0,ut=0,gr=null,Gi=!1,tl=!1,Rm=!1,oi=0,Ht=0,qi=0,Fs=0,Lm=0,Gr=0,nl=0,Mc=null,er=null,$m=!1,Bm=0,Hd=1/0,Gd=null,Yi=null,Pn=0,Fi=null,rl=null,al=0,zm=0,Um=null,E1=null,Ic=0,Hm=null;function yr(){if((ct&2)!==0&&nt!==0)return nt&-nt;if(I.T!==null){var a=Yo;return a!==0?a:Wm()}return pn()}function w1(){Gr===0&&(Gr=(nt&536870912)===0||ot?Po():536870912);var a=Hr.current;return a!==null&&(a.flags|=32),Gr}function vr(a,o,c){(a===Et&&(ut===2||ut===9)||a.cancelPendingCommit!==null)&&(il(a,0),Vi(a,nt,Gr,!1)),oe(a,c),((ct&2)===0||a!==Et)&&(a===Et&&((ct&2)===0&&(Fs|=c),Ht===4&&Vi(a,nt,Gr,!1)),Oa(a))}function P1(a,o,c){if((ct&6)!==0)throw Error(r(327));var h=!c&&(o&124)===0&&(o&a.expiredLanes)===0||Aa(a,o),v=h?Xj(a,o):Ym(a,o,!0),x=h;do{if(v===0){tl&&!h&&Vi(a,o,0,!1);break}else{if(c=a.current.alternate,x&&!Kj(c)){v=Ym(a,o,!1),x=!1;continue}if(v===2){if(x=o,a.errorRecoveryDisabledLanes&x)var P=0;else P=a.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){o=P;e:{var _=a;v=Mc;var U=_.current.memoizedState.isDehydrated;if(U&&(il(_,P).flags|=256),P=Ym(_,P,!1),P!==2){if(Rm&&!U){_.errorRecoveryDisabledLanes|=x,Fs|=x,v=4;break e}x=er,er=v,x!==null&&(er===null?er=x:er.push.apply(er,x))}v=P}if(x=!1,v!==2)continue}}if(v===1){il(a,0),Vi(a,o,0,!0);break}e:{switch(h=a,x=v,x){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Vi(h,o,Gr,!Gi);break e;case 2:er=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(v=Bm+300-Tt(),10<v)){if(Vi(h,o,Gr,!Gi),jr(h,0,!0)!==0)break e;h.timeoutHandle=tC(T1.bind(null,h,c,er,Gd,$m,o,Gr,Fs,nl,Gi,x,2,-0,0),v);break e}T1(h,c,er,Gd,$m,o,Gr,Fs,nl,Gi,x,0,-0,0)}}break}while(!0);Oa(a)}function T1(a,o,c,h,v,x,P,_,U,ee,ue,me,re,ae){if(a.timeoutHandle=-1,me=o.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(Hc={stylesheets:null,count:0,unsuspend:Ok},x1(o),me=Nk(),me!==null)){a.cancelPendingCommit=me(M1.bind(null,a,o,x,c,h,v,P,_,U,ue,1,re,ae)),Vi(a,x,P,!ee);return}M1(a,o,x,c,h,v,P,_,U)}function Kj(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var v=c[h],x=v.getSnapshot;v=v.value;try{if(!ge(x(),v))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Vi(a,o,c,h){o&=~Lm,o&=~Fs,a.suspendedLanes|=o,a.pingedLanes&=~o,h&&(a.warmLanes|=o),h=a.expirationTimes;for(var v=o;0<v;){var x=31-_e(v),P=1<<x;h[x]=-1,v&=~P}c!==0&&ce(a,c,o)}function qd(){return(ct&6)===0?(Rc(0),!1):!0}function Gm(){if(Qe!==null){if(ut===0)var a=Qe.return;else a=Qe,Za=zs=null,sm(a),Qo=null,Pc=0,a=Qe;for(;a!==null;)s1(a.alternate,a),a=a.return;Qe=null}}function il(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,fk(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),Gm(),Et=a,Qe=c=Xa(a.current,null),nt=o,ut=0,gr=null,Gi=!1,tl=Aa(a,o),Rm=!1,nl=Gr=Lm=Fs=qi=Ht=0,er=Mc=null,$m=!1,(o&8)!==0&&(o|=o&32);var h=a.entangledLanes;if(h!==0)for(a=a.entanglements,h&=o;0<h;){var v=31-_e(h),x=1<<v;o|=a[v],h&=~x}return oi=o,fd(),c}function D1(a,o){We=null,I.H=Nd,o===yc||o===Sd?(o=Yx(),ut=3):o===Hx?(o=Yx(),ut=4):ut=o===FS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,gr=o,Qe===null&&(Ht=1,Rd(a,$r(o,a.current)))}function O1(){var a=I.H;return I.H=Nd,a===null?Nd:a}function _1(){var a=I.A;return I.A=Fj,a}function qm(){Ht=4,Gi||(nt&4194048)!==nt&&Hr.current!==null||(tl=!0),(qi&134217727)===0&&(Fs&134217727)===0||Et===null||Vi(Et,nt,Gr,!1)}function Ym(a,o,c){var h=ct;ct|=2;var v=O1(),x=_1();(Et!==a||nt!==o)&&(Gd=null,il(a,o)),o=!1;var P=Ht;e:do try{if(ut!==0&&Qe!==null){var _=Qe,U=gr;switch(ut){case 8:Gm(),P=6;break e;case 3:case 2:case 9:case 6:Hr.current===null&&(o=!0);var ee=ut;if(ut=0,gr=null,sl(a,_,U,ee),c&&tl){P=0;break e}break;default:ee=ut,ut=0,gr=null,sl(a,_,U,ee)}}Wj(),P=Ht;break}catch(ue){D1(a,ue)}while(!0);return o&&a.shellSuspendCounter++,Za=zs=null,ct=h,I.H=v,I.A=x,Qe===null&&(Et=null,nt=0,fd()),P}function Wj(){for(;Qe!==null;)N1(Qe)}function Xj(a,o){var c=ct;ct|=2;var h=O1(),v=_1();Et!==a||nt!==o?(Gd=null,Hd=Tt()+500,il(a,o)):tl=Aa(a,o);e:do try{if(ut!==0&&Qe!==null){o=Qe;var x=gr;t:switch(ut){case 1:ut=0,gr=null,sl(a,o,x,1);break;case 2:case 9:if(Gx(x)){ut=0,gr=null,j1(o);break}o=function(){ut!==2&&ut!==9||Et!==a||(ut=7),Oa(a)},x.then(o,o);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Gx(x)?(ut=0,gr=null,j1(o)):(ut=0,gr=null,sl(a,o,x,7));break;case 5:var P=null;switch(Qe.tag){case 26:P=Qe.memoizedState;case 5:case 27:var _=Qe;if(!P||pC(P)){ut=0,gr=null;var U=_.sibling;if(U!==null)Qe=U;else{var ee=_.return;ee!==null?(Qe=ee,Yd(ee)):Qe=null}break t}}ut=0,gr=null,sl(a,o,x,5);break;case 6:ut=0,gr=null,sl(a,o,x,6);break;case 8:Gm(),Ht=6;break e;default:throw Error(r(462))}}Qj();break}catch(ue){D1(a,ue)}while(!0);return Za=zs=null,I.H=h,I.A=v,ct=c,Qe!==null?0:(Et=null,nt=0,fd(),Ht)}function Qj(){for(;Qe!==null&&!Gt();)N1(Qe)}function N1(a){var o=a1(a.alternate,a,oi);a.memoizedProps=a.pendingProps,o===null?Yd(a):Qe=o}function j1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=JS(c,o,o.pendingProps,o.type,void 0,nt);break;case 11:o=JS(c,o,o.pendingProps,o.type.render,o.ref,nt);break;case 5:sm(o);default:s1(c,o),o=Qe=kx(o,oi),o=a1(c,o,oi)}a.memoizedProps=a.pendingProps,o===null?Yd(a):Qe=o}function sl(a,o,c,h){Za=zs=null,sm(o),Qo=null,Pc=0;var v=o.return;try{if(zj(a,v,o,c,nt)){Ht=1,Rd(a,$r(c,a.current)),Qe=null;return}}catch(x){if(v!==null)throw Qe=v,x;Ht=1,Rd(a,$r(c,a.current)),Qe=null;return}o.flags&32768?(ot||h===1?a=!0:tl||(nt&536870912)!==0?a=!1:(Gi=a=!0,(h===2||h===9||h===3||h===6)&&(h=Hr.current,h!==null&&h.tag===13&&(h.flags|=16384))),k1(o,a)):Yd(o)}function Yd(a){var o=a;do{if((o.flags&32768)!==0){k1(o,Gi);return}a=o.return;var c=Hj(o.alternate,o,oi);if(c!==null){Qe=c;return}if(o=o.sibling,o!==null){Qe=o;return}Qe=o=a}while(o!==null);Ht===0&&(Ht=5)}function k1(a,o){do{var c=Gj(a.alternate,a);if(c!==null){c.flags&=32767,Qe=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){Qe=a;return}Qe=a=c}while(a!==null);Ht=6,Qe=null}function M1(a,o,c,h,v,x,P,_,U){a.cancelPendingCommit=null;do Fd();while(Pn!==0);if((ct&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(x=o.lanes|o.childLanes,x|=Ih,de(a,c,x,P,_,U),a===Et&&(Qe=Et=null,nt=0),rl=o,Fi=a,al=c,zm=x,Um=v,E1=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,tk(ra,function(){return B1(),null})):(a.callbackNode=null,a.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=I.T,I.T=null,v=G.p,G.p=2,P=ct,ct|=4;try{qj(a,o,c)}finally{ct=P,G.p=v,I.T=h}}Pn=1,I1(),R1(),L1()}}function I1(){if(Pn===1){Pn=0;var a=Fi,o=rl,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=I.T,I.T=null;var h=G.p;G.p=2;var v=ct;ct|=4;try{y1(o,a);var x=rg,P=At(a.containerInfo),_=x.focusedElem,U=x.selectionRange;if(P!==_&&_&&_.ownerDocument&&Fe(_.ownerDocument.documentElement,_)){if(U!==null&&fr(_)){var ee=U.start,ue=U.end;if(ue===void 0&&(ue=ee),"selectionStart"in _)_.selectionStart=ee,_.selectionEnd=Math.min(ue,_.value.length);else{var me=_.ownerDocument||document,re=me&&me.defaultView||window;if(re.getSelection){var ae=re.getSelection(),He=_.textContent.length,Be=Math.min(U.start,He),mt=U.end===void 0?Be:Math.min(U.end,He);!ae.extend&&Be>mt&&(P=mt,mt=Be,Be=P);var X=Ue(_,Be),Y=Ue(_,mt);if(X&&Y&&(ae.rangeCount!==1||ae.anchorNode!==X.node||ae.anchorOffset!==X.offset||ae.focusNode!==Y.node||ae.focusOffset!==Y.offset)){var J=me.createRange();J.setStart(X.node,X.offset),ae.removeAllRanges(),Be>mt?(ae.addRange(J),ae.extend(Y.node,Y.offset)):(J.setEnd(Y.node,Y.offset),ae.addRange(J))}}}}for(me=[],ae=_;ae=ae.parentNode;)ae.nodeType===1&&me.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<me.length;_++){var fe=me[_];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}af=!!ng,rg=ng=null}finally{ct=v,G.p=h,I.T=c}}a.current=o,Pn=2}}function R1(){if(Pn===2){Pn=0;var a=Fi,o=rl,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=I.T,I.T=null;var h=G.p;G.p=2;var v=ct;ct|=4;try{p1(a,o.alternate,o)}finally{ct=v,G.p=h,I.T=c}}Pn=3}}function L1(){if(Pn===4||Pn===3){Pn=0,qt();var a=Fi,o=rl,c=al,h=E1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Pn=5:(Pn=0,rl=Fi=null,$1(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Yi=null),$e(c),o=o.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(aa,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=I.T,v=G.p,G.p=2,I.T=null;try{for(var x=a.onRecoverableError,P=0;P<h.length;P++){var _=h[P];x(_.value,{componentStack:_.stack})}}finally{I.T=o,G.p=v}}(al&3)!==0&&Fd(),Oa(a),v=a.pendingLanes,(c&4194090)!==0&&(v&42)!==0?a===Hm?Ic++:(Ic=0,Hm=a):Ic=0,Rc(0)}}function $1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,mc(o)))}function Fd(a){return I1(),R1(),L1(),B1()}function B1(){if(Pn!==5)return!1;var a=Fi,o=zm;zm=0;var c=$e(al),h=I.T,v=G.p;try{G.p=32>c?32:c,I.T=null,c=Um,Um=null;var x=Fi,P=al;if(Pn=0,rl=Fi=null,al=0,(ct&6)!==0)throw Error(r(331));var _=ct;if(ct|=4,C1(x.current),b1(x,x.current,P,c),ct=_,Rc(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(aa,x)}catch{}return!0}finally{G.p=v,I.T=h,$1(a,o)}}function z1(a,o,c){o=$r(c,o),o=xm(a.stateNode,o,2),a=Ri(a,o,2),a!==null&&(oe(a,2),Oa(a))}function xt(a,o,c){if(a.tag===3)z1(a,a,c);else for(;o!==null;){if(o.tag===3){z1(o,a,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Yi===null||!Yi.has(h))){a=$r(c,a),c=qS(2),h=Ri(o,c,2),h!==null&&(YS(c,h,o,a),oe(h,2),Oa(h));break}}o=o.return}}function Fm(a,o,c){var h=a.pingCache;if(h===null){h=a.pingCache=new Vj;var v=new Set;h.set(o,v)}else v=h.get(o),v===void 0&&(v=new Set,h.set(o,v));v.has(c)||(Rm=!0,v.add(c),a=Jj.bind(null,a,o,c),o.then(a,a))}function Jj(a,o,c){var h=a.pingCache;h!==null&&h.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,Et===a&&(nt&c)===c&&(Ht===4||Ht===3&&(nt&62914560)===nt&&300>Tt()-Bm?(ct&2)===0&&il(a,0):Lm|=c,nl===nt&&(nl=0)),Oa(a)}function U1(a,o){o===0&&(o=Ni()),a=Uo(a,o),a!==null&&(oe(a,o),Oa(a))}function Zj(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),U1(a,c)}function ek(a,o){var c=0;switch(a.tag){case 13:var h=a.stateNode,v=a.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=a.stateNode;break;case 22:h=a.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),U1(a,c)}function tk(a,o){return Pt(a,o)}var Vd=null,ol=null,Vm=!1,Kd=!1,Km=!1,Vs=0;function Oa(a){a!==ol&&a.next===null&&(ol===null?Vd=ol=a:ol=ol.next=a),Kd=!0,Vm||(Vm=!0,rk())}function Rc(a,o){if(!Km&&Kd){Km=!0;do for(var c=!1,h=Vd;h!==null;){if(a!==0){var v=h.pendingLanes;if(v===0)var x=0;else{var P=h.suspendedLanes,_=h.pingedLanes;x=(1<<31-_e(42|a)+1)-1,x&=v&~(P&~_),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,Y1(h,x))}else x=nt,x=jr(h,h===Et?x:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(x&3)===0||Aa(h,x)||(c=!0,Y1(h,x));h=h.next}while(c);Km=!1}}function nk(){H1()}function H1(){Kd=Vm=!1;var a=0;Vs!==0&&(dk()&&(a=Vs),Vs=0);for(var o=Tt(),c=null,h=Vd;h!==null;){var v=h.next,x=G1(h,o);x===0?(h.next=null,c===null?Vd=v:c.next=v,v===null&&(ol=c)):(c=h,(a!==0||(x&3)!==0)&&(Kd=!0)),h=v}Rc(a)}function G1(a,o){for(var c=a.suspendedLanes,h=a.pingedLanes,v=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var P=31-_e(x),_=1<<P,U=v[P];U===-1?((_&c)===0||(_&h)!==0)&&(v[P]=wo(_,o)):U<=o&&(a.expiredLanes|=_),x&=~_}if(o=Et,c=nt,c=jr(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),h=a.callbackNode,c===0||a===o&&(ut===2||ut===9)||a.cancelPendingCommit!==null)return h!==null&&h!==null&&qe(h),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||Aa(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(h!==null&&qe(h),$e(c)){case 2:case 8:c=zn;break;case 32:c=ra;break;case 268435456:c=Di;break;default:c=ra}return h=q1.bind(null,a),c=Pt(c,h),a.callbackPriority=o,a.callbackNode=c,o}return h!==null&&h!==null&&qe(h),a.callbackPriority=2,a.callbackNode=null,2}function q1(a,o){if(Pn!==0&&Pn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(Fd()&&a.callbackNode!==c)return null;var h=nt;return h=jr(a,a===Et?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),h===0?null:(P1(a,h,o),G1(a,Tt()),a.callbackNode!=null&&a.callbackNode===c?q1.bind(null,a):null)}function Y1(a,o){if(Fd())return null;P1(a,o,!0)}function rk(){pk(function(){(ct&6)!==0?Pt(Nr,nk):H1()})}function Wm(){return Vs===0&&(Vs=Po()),Vs}function F1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:xs(""+a)}function V1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function ak(a,o,c,h,v){if(o==="submit"&&c&&c.stateNode===v){var x=F1((v[Ve]||null).action),P=h.submitter;P&&(o=(o=P[Ve]||null)?F1(o.formAction):P.getAttribute("formAction"),o!==null&&(x=o,P=null));var _=new Jl("action","action",null,h,v);a.push({event:_,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Vs!==0){var U=P?V1(v,P):new FormData(v);mm(c,{pending:!0,data:U,method:v.method,action:x},null,U)}}else typeof x=="function"&&(_.preventDefault(),U=P?V1(v,P):new FormData(v),mm(c,{pending:!0,data:U,method:v.method,action:x},x,U))},currentTarget:v}]})}}for(var Xm=0;Xm<Mh.length;Xm++){var Qm=Mh[Xm],ik=Qm.toLowerCase(),sk=Qm[0].toUpperCase()+Qm.slice(1);fa(ik,"on"+sk)}fa(Px,"onAnimationEnd"),fa(Tx,"onAnimationIteration"),fa(Dx,"onAnimationStart"),fa("dblclick","onDoubleClick"),fa("focusin","onFocus"),fa("focusout","onBlur"),fa(Aj,"onTransitionRun"),fa(Ej,"onTransitionStart"),fa(wj,"onTransitionCancel"),fa(Ox,"onTransitionEnd"),cr("onMouseEnter",["mouseout","mouseover"]),cr("onMouseLeave",["mouseout","mouseover"]),cr("onPointerEnter",["pointerout","pointerover"]),cr("onPointerLeave",["pointerout","pointerover"]),Bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ok=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function K1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var h=a[c],v=h.event;h=h.listeners;e:{var x=void 0;if(o)for(var P=h.length-1;0<=P;P--){var _=h[P],U=_.instance,ee=_.currentTarget;if(_=_.listener,U!==x&&v.isPropagationStopped())break e;x=_,v.currentTarget=ee;try{x(v)}catch(ue){Id(ue)}v.currentTarget=null,x=U}else for(P=0;P<h.length;P++){if(_=h[P],U=_.instance,ee=_.currentTarget,_=_.listener,U!==x&&v.isPropagationStopped())break e;x=_,v.currentTarget=ee;try{x(v)}catch(ue){Id(ue)}v.currentTarget=null,x=U}}}}function Je(a,o){var c=o[Un];c===void 0&&(c=o[Un]=new Set);var h=a+"__bubble";c.has(h)||(W1(o,a,2,!1),c.add(h))}function Jm(a,o,c){var h=0;o&&(h|=4),W1(c,a,h,o)}var Wd="_reactListening"+Math.random().toString(36).slice(2);function Zm(a){if(!a[Wd]){a[Wd]=!0,za.forEach(function(c){c!=="selectionchange"&&(ok.has(c)||Jm(c,!1,a),Jm(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Wd]||(o[Wd]=!0,Jm("selectionchange",!1,o))}}function W1(a,o,c,h){switch(bC(o)){case 2:var v=Mk;break;case 8:v=Ik;break;default:v=pg}c=v.bind(null,o,c,a),v=void 0,!Cs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),h?v!==void 0?a.addEventListener(o,c,{capture:!0,passive:v}):a.addEventListener(o,c,!0):v!==void 0?a.addEventListener(o,c,{passive:v}):a.addEventListener(o,c,!1)}function eg(a,o,c,h,v){var x=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var P=h.tag;if(P===3||P===4){var _=h.stateNode.containerInfo;if(_===v)break;if(P===4)for(P=h.return;P!==null;){var U=P.tag;if((U===3||U===4)&&P.stateNode.containerInfo===v)return;P=P.return}for(;_!==null;){if(P=kr(_),P===null)return;if(U=P.tag,U===5||U===6||U===26||U===27){h=x=P;continue e}_=_.parentNode}}h=h.return}Xl(function(){var ee=x,ue=Wu(c),me=[];e:{var re=_x.get(a);if(re!==void 0){var ae=Jl,He=a;switch(a){case"keypress":if(Es(c)===0)break e;case"keydown":case"keyup":ae=xh;break;case"focusin":He="focus",ae=Re;break;case"focusout":He="blur",ae=Re;break;case"beforeblur":case"afterblur":ae=Re;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=hh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Hn;break;case Px:case Tx:case Dx:ae=Ds;break;case Ox:ae=Ro;break;case"scroll":case"scrollend":ae=ph;break;case"wheel":ae=Ch;break;case"copy":case"cut":case"paste":ae=Qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=ed;break;case"toggle":case"beforetoggle":ae=Ah}var Be=(o&4)!==0,mt=!Be&&(a==="scroll"||a==="scrollend"),X=Be?re!==null?re+"Capture":null:re;Be=[];for(var Y=ee,J;Y!==null;){var fe=Y;if(J=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||J===null||X===null||(fe=dr(Y,X),fe!=null&&Be.push($c(Y,fe,J))),mt)break;Y=Y.return}0<Be.length&&(re=new ae(re,He,null,c,ue),me.push({event:re,listeners:Be}))}}if((o&7)===0){e:{if(re=a==="mouseover"||a==="pointerover",ae=a==="mouseout"||a==="pointerout",re&&c!==Ku&&(He=c.relatedTarget||c.fromElement)&&(kr(He)||He[Nt]))break e;if((ae||re)&&(re=ue.window===ue?ue:(re=ue.ownerDocument)?re.defaultView||re.parentWindow:window,ae?(He=c.relatedTarget||c.toElement,ae=ee,He=He?kr(He):null,He!==null&&(mt=s(He),Be=He.tag,He!==mt||Be!==5&&Be!==27&&Be!==6)&&(He=null)):(ae=null,He=ee),ae!==He)){if(Be=hh,fe="onMouseLeave",X="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(Be=ed,fe="onPointerLeave",X="onPointerEnter",Y="pointer"),mt=ae==null?re:Ba(ae),J=He==null?re:Ba(He),re=new Be(fe,Y+"leave",ae,c,ue),re.target=mt,re.relatedTarget=J,fe=null,kr(ue)===ee&&(Be=new Be(X,Y+"enter",He,c,ue),Be.target=J,Be.relatedTarget=mt,fe=Be),mt=fe,ae&&He)t:{for(Be=ae,X=He,Y=0,J=Be;J;J=ll(J))Y++;for(J=0,fe=X;fe;fe=ll(fe))J++;for(;0<Y-J;)Be=ll(Be),Y--;for(;0<J-Y;)X=ll(X),J--;for(;Y--;){if(Be===X||X!==null&&Be===X.alternate)break t;Be=ll(Be),X=ll(X)}Be=null}else Be=null;ae!==null&&X1(me,re,ae,Be,!1),He!==null&&mt!==null&&X1(me,mt,He,Be,!0)}}e:{if(re=ee?Ba(ee):window,ae=re.nodeName&&re.nodeName.toLowerCase(),ae==="select"||ae==="input"&&re.type==="file")var Pe=ld;else if(od(re))if(ic)Pe=H;else{Pe=Nh;var Xe=_h}else ae=re.nodeName,!ae||ae.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ee&&Vu(ee.elementType)&&(Pe=ld):Pe=jh;if(Pe&&(Pe=Pe(a,ee))){ac(me,Pe,c,ue);break e}Xe&&Xe(a,re,ee),a==="focusout"&&ee&&re.type==="number"&&ee.memoizedProps.value!=null&&vs(re,"number",re.value)}switch(Xe=ee?Ba(ee):window,a){case"focusin":(od(Xe)||Xe.contentEditable==="true")&&(ua=Xe,cc=ee,da=null);break;case"focusout":da=cc=ua=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,dd(me,c,ue);break;case"selectionchange":if($o)break;case"keydown":case"keyup":dd(me,c,ue)}var je;if(rc)e:{switch(a){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Wa?id(a,c)&&(ze="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(ze="onCompositionStart");ze&&(nd&&c.locale!=="ko"&&(Wa||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Wa&&(je=Ka()):(la=ue,et="value"in la?la.value:la.textContent,Wa=!0)),Xe=Xd(ee,ze),0<Xe.length&&(ze=new ec(ze,a,null,c,ue),me.push({event:ze,listeners:Xe}),je?ze.data=je:(je=sd(c),je!==null&&(ze.data=je)))),(je=wh?Ph(a,c):Th(a,c))&&(ze=Xd(ee,"onBeforeInput"),0<ze.length&&(Xe=new ec("onBeforeInput","beforeinput",null,c,ue),me.push({event:Xe,listeners:ze}),Xe.data=je)),ak(me,a,ee,c,ue)}K1(me,o)})}function $c(a,o,c){return{instance:a,listener:o,currentTarget:c}}function Xd(a,o){for(var c=o+"Capture",h=[];a!==null;){var v=a,x=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||x===null||(v=dr(a,c),v!=null&&h.unshift($c(a,v,x)),v=dr(a,o),v!=null&&h.push($c(a,v,x))),a.tag===3)return h;a=a.return}return[]}function ll(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function X1(a,o,c,h,v){for(var x=o._reactName,P=[];c!==null&&c!==h;){var _=c,U=_.alternate,ee=_.stateNode;if(_=_.tag,U!==null&&U===h)break;_!==5&&_!==26&&_!==27||ee===null||(U=ee,v?(ee=dr(c,x),ee!=null&&P.unshift($c(c,ee,U))):v||(ee=dr(c,x),ee!=null&&P.push($c(c,ee,U)))),c=c.return}P.length!==0&&a.push({event:o,listeners:P})}var lk=/\r\n?/g,ck=/\u0000|\uFFFD/g;function Q1(a){return(typeof a=="string"?a:""+a).replace(lk,`
`).replace(ck,"")}function J1(a,o){return o=Q1(o),Q1(a)===o}function Qd(){}function ht(a,o,c,h,v,x){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||qa(a,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&qa(a,""+h);break;case"className":Ea(a,"class",h);break;case"tabIndex":Ea(a,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ea(a,c,h);break;case"style":Kl(a,h,x);break;case"data":if(o!=="object"){Ea(a,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){a.removeAttribute(c);break}h=xs(""+h),a.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(o!=="input"&&ht(a,o,"name",v.name,v,null),ht(a,o,"formEncType",v.formEncType,v,null),ht(a,o,"formMethod",v.formMethod,v,null),ht(a,o,"formTarget",v.formTarget,v,null)):(ht(a,o,"encType",v.encType,v,null),ht(a,o,"method",v.method,v,null),ht(a,o,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){a.removeAttribute(c);break}h=xs(""+h),a.setAttribute(c,h);break;case"onClick":h!=null&&(a.onclick=Qd);break;case"onScroll":h!=null&&Je("scroll",a);break;case"onScrollEnd":h!=null&&Je("scrollend",a);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":a.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){a.removeAttribute("xlink:href");break}c=xs(""+h),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,""+h):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":h===!0?a.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,h):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?a.setAttribute(c,h):a.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?a.removeAttribute(c):a.setAttribute(c,h);break;case"popover":Je("beforetoggle",a),Je("toggle",a),oa(a,"popover",h);break;case"xlinkActuate":Ze(a,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ze(a,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ze(a,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ze(a,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ze(a,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ze(a,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ze(a,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ze(a,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ze(a,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":oa(a,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ex.get(c)||c,oa(a,c,h))}}function tg(a,o,c,h,v,x){switch(c){case"style":Kl(a,h,x);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof h=="string"?qa(a,h):(typeof h=="number"||typeof h=="bigint")&&qa(a,""+h);break;case"onScroll":h!=null&&Je("scroll",a);break;case"onScrollEnd":h!=null&&Je("scrollend",a);break;case"onClick":h!=null&&(a.onclick=Qd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),o=c.slice(2,v?c.length-7:void 0),x=a[Ve]||null,x=x!=null?x[c]:null,typeof x=="function"&&a.removeEventListener(o,x,v),typeof h=="function")){typeof x!="function"&&x!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,h,v);break e}c in a?a[c]=h:h===!0?a.setAttribute(c,""):oa(a,c,h)}}}function Tn(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",a),Je("load",a);var h=!1,v=!1,x;for(x in c)if(c.hasOwnProperty(x)){var P=c[x];if(P!=null)switch(x){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ht(a,o,x,P,c,null)}}v&&ht(a,o,"srcSet",c.srcSet,c,null),h&&ht(a,o,"src",c.src,c,null);return;case"input":Je("invalid",a);var _=x=P=v=null,U=null,ee=null;for(h in c)if(c.hasOwnProperty(h)){var ue=c[h];if(ue!=null)switch(h){case"name":v=ue;break;case"type":P=ue;break;case"checked":U=ue;break;case"defaultChecked":ee=ue;break;case"value":x=ue;break;case"defaultValue":_=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,o));break;default:ht(a,o,h,ue,c,null)}}jo(a,x,_,U,ee,P,v,!1),ys(a);return;case"select":Je("invalid",a),h=P=x=null;for(v in c)if(c.hasOwnProperty(v)&&(_=c[v],_!=null))switch(v){case"value":x=_;break;case"defaultValue":P=_;break;case"multiple":h=_;default:ht(a,o,v,_,c,null)}o=x,c=P,a.multiple=!!h,o!=null?ur(a,!!h,o,!1):c!=null&&ur(a,!!h,c,!0);return;case"textarea":Je("invalid",a),x=v=h=null;for(P in c)if(c.hasOwnProperty(P)&&(_=c[P],_!=null))switch(P){case"value":h=_;break;case"defaultValue":v=_;break;case"children":x=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:ht(a,o,P,_,c,null)}bs(a,h,v,x),ys(a);return;case"option":for(U in c)if(c.hasOwnProperty(U)&&(h=c[U],h!=null))switch(U){case"selected":a.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ht(a,o,U,h,c,null)}return;case"dialog":Je("beforetoggle",a),Je("toggle",a),Je("cancel",a),Je("close",a);break;case"iframe":case"object":Je("load",a);break;case"video":case"audio":for(h=0;h<Lc.length;h++)Je(Lc[h],a);break;case"image":Je("error",a),Je("load",a);break;case"details":Je("toggle",a);break;case"embed":case"source":case"link":Je("error",a),Je("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in c)if(c.hasOwnProperty(ee)&&(h=c[ee],h!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ht(a,o,ee,h,c,null)}return;default:if(Vu(o)){for(ue in c)c.hasOwnProperty(ue)&&(h=c[ue],h!==void 0&&tg(a,o,ue,h,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(h=c[_],h!=null&&ht(a,o,_,h,c,null))}function uk(a,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,x=null,P=null,_=null,U=null,ee=null,ue=null;for(ae in c){var me=c[ae];if(c.hasOwnProperty(ae)&&me!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":U=me;default:h.hasOwnProperty(ae)||ht(a,o,ae,null,h,me)}}for(var re in h){var ae=h[re];if(me=c[re],h.hasOwnProperty(re)&&(ae!=null||me!=null))switch(re){case"type":x=ae;break;case"name":v=ae;break;case"checked":ee=ae;break;case"defaultChecked":ue=ae;break;case"value":P=ae;break;case"defaultValue":_=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:ae!==me&&ht(a,o,re,ae,h,me)}}Lr(a,P,_,U,ee,ue,x,v);return;case"select":ae=P=_=re=null;for(x in c)if(U=c[x],c.hasOwnProperty(x)&&U!=null)switch(x){case"value":break;case"multiple":ae=U;default:h.hasOwnProperty(x)||ht(a,o,x,null,h,U)}for(v in h)if(x=h[v],U=c[v],h.hasOwnProperty(v)&&(x!=null||U!=null))switch(v){case"value":re=x;break;case"defaultValue":_=x;break;case"multiple":P=x;default:x!==U&&ht(a,o,v,x,h,U)}o=_,c=P,h=ae,re!=null?ur(a,!!c,re,!1):!!h!=!!c&&(o!=null?ur(a,!!c,o,!0):ur(a,!!c,c?[]:"",!1));return;case"textarea":ae=re=null;for(_ in c)if(v=c[_],c.hasOwnProperty(_)&&v!=null&&!h.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:ht(a,o,_,null,h,v)}for(P in h)if(v=h[P],x=c[P],h.hasOwnProperty(P)&&(v!=null||x!=null))switch(P){case"value":re=v;break;case"defaultValue":ae=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==x&&ht(a,o,P,v,h,x)}ko(a,re,ae);return;case"option":for(var He in c)if(re=c[He],c.hasOwnProperty(He)&&re!=null&&!h.hasOwnProperty(He))switch(He){case"selected":a.selected=!1;break;default:ht(a,o,He,null,h,re)}for(U in h)if(re=h[U],ae=c[U],h.hasOwnProperty(U)&&re!==ae&&(re!=null||ae!=null))switch(U){case"selected":a.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:ht(a,o,U,re,h,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in c)re=c[Be],c.hasOwnProperty(Be)&&re!=null&&!h.hasOwnProperty(Be)&&ht(a,o,Be,null,h,re);for(ee in h)if(re=h[ee],ae=c[ee],h.hasOwnProperty(ee)&&re!==ae&&(re!=null||ae!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:ht(a,o,ee,re,h,ae)}return;default:if(Vu(o)){for(var mt in c)re=c[mt],c.hasOwnProperty(mt)&&re!==void 0&&!h.hasOwnProperty(mt)&&tg(a,o,mt,void 0,h,re);for(ue in h)re=h[ue],ae=c[ue],!h.hasOwnProperty(ue)||re===ae||re===void 0&&ae===void 0||tg(a,o,ue,re,h,ae);return}}for(var X in c)re=c[X],c.hasOwnProperty(X)&&re!=null&&!h.hasOwnProperty(X)&&ht(a,o,X,null,h,re);for(me in h)re=h[me],ae=c[me],!h.hasOwnProperty(me)||re===ae||re==null&&ae==null||ht(a,o,me,re,h,ae)}var ng=null,rg=null;function Jd(a){return a.nodeType===9?a:a.ownerDocument}function Z1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eC(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function ag(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ig=null;function dk(){var a=window.event;return a&&a.type==="popstate"?a===ig?!1:(ig=a,!0):(ig=null,!1)}var tC=typeof setTimeout=="function"?setTimeout:void 0,fk=typeof clearTimeout=="function"?clearTimeout:void 0,nC=typeof Promise=="function"?Promise:void 0,pk=typeof queueMicrotask=="function"?queueMicrotask:typeof nC<"u"?function(a){return nC.resolve(null).then(a).catch(hk)}:tC;function hk(a){setTimeout(function(){throw a})}function Ki(a){return a==="head"}function rC(a,o){var c=o,h=0,v=0;do{var x=c.nextSibling;if(a.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(0<h&&8>h){c=h;var P=a.ownerDocument;if(c&1&&Bc(P.documentElement),c&2&&Bc(P.body),c&4)for(c=P.head,Bc(c),P=c.firstChild;P;){var _=P.nextSibling,U=P.nodeName;P[Do]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&P.rel.toLowerCase()==="stylesheet"||c.removeChild(P),P=_}}if(v===0){a.removeChild(x),Vc(o);return}v--}else c==="$"||c==="$?"||c==="$!"?v++:h=c.charCodeAt(0)-48;else h=0;c=x}while(c);Vc(o)}function sg(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":sg(c),Ot(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function mk(a,o,c,h){for(;a.nodeType===1;){var v=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(h){if(!a[Do])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var x=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=ha(a.nextSibling),a===null)break}return null}function gk(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=ha(a.nextSibling),a===null))return null;return a}function og(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function yk(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),a._reactRetry=h}}function ha(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var lg=null;function aC(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function iC(a,o,c){switch(o=Jd(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Bc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Ot(a)}var qr=new Map,sC=new Set;function Zd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var li=G.d;G.d={f:vk,r:bk,D:xk,C:Sk,L:Ck,m:Ak,X:wk,S:Ek,M:Pk};function vk(){var a=li.f(),o=qd();return a||o}function bk(a){var o=Mr(a);o!==null&&o.tag===5&&o.type==="form"?PS(o):li.r(a)}var cl=typeof document>"u"?null:document;function oC(a,o,c){var h=cl;if(h&&typeof o=="string"&&o){var v=An(o);v='link[rel="'+a+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),sC.has(v)||(sC.add(v),a={rel:a,crossOrigin:c,href:o},h.querySelector(v)===null&&(o=h.createElement("link"),Tn(o,"link",a),bt(o),h.head.appendChild(o)))}}function xk(a){li.D(a),oC("dns-prefetch",a,null)}function Sk(a,o){li.C(a,o),oC("preconnect",a,o)}function Ck(a,o,c){li.L(a,o,c);var h=cl;if(h&&a&&o){var v='link[rel="preload"][as="'+An(o)+'"]';o==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+An(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+An(c.imageSizes)+'"]')):v+='[href="'+An(a)+'"]';var x=v;switch(o){case"style":x=ul(a);break;case"script":x=dl(a)}qr.has(x)||(a=m({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),qr.set(x,a),h.querySelector(v)!==null||o==="style"&&h.querySelector(zc(x))||o==="script"&&h.querySelector(Uc(x))||(o=h.createElement("link"),Tn(o,"link",a),bt(o),h.head.appendChild(o)))}}function Ak(a,o){li.m(a,o);var c=cl;if(c&&a){var h=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+An(h)+'"][href="'+An(a)+'"]',x=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=dl(a)}if(!qr.has(x)&&(a=m({rel:"modulepreload",href:a},o),qr.set(x,a),c.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Uc(x)))return}h=c.createElement("link"),Tn(h,"link",a),bt(h),c.head.appendChild(h)}}}function Ek(a,o,c){li.S(a,o,c);var h=cl;if(h&&a){var v=hn(h).hoistableStyles,x=ul(a);o=o||"default";var P=v.get(x);if(!P){var _={loading:0,preload:null};if(P=h.querySelector(zc(x)))_.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":o},c),(c=qr.get(x))&&cg(a,c);var U=P=h.createElement("link");bt(U),Tn(U,"link",a),U._p=new Promise(function(ee,ue){U.onload=ee,U.onerror=ue}),U.addEventListener("load",function(){_.loading|=1}),U.addEventListener("error",function(){_.loading|=2}),_.loading|=4,ef(P,o,h)}P={type:"stylesheet",instance:P,count:1,state:_},v.set(x,P)}}}function wk(a,o){li.X(a,o);var c=cl;if(c&&a){var h=hn(c).hoistableScripts,v=dl(a),x=h.get(v);x||(x=c.querySelector(Uc(v)),x||(a=m({src:a,async:!0},o),(o=qr.get(v))&&ug(a,o),x=c.createElement("script"),bt(x),Tn(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(v,x))}}function Pk(a,o){li.M(a,o);var c=cl;if(c&&a){var h=hn(c).hoistableScripts,v=dl(a),x=h.get(v);x||(x=c.querySelector(Uc(v)),x||(a=m({src:a,async:!0,type:"module"},o),(o=qr.get(v))&&ug(a,o),x=c.createElement("script"),bt(x),Tn(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(v,x))}}function lC(a,o,c,h){var v=(v=Ee.current)?Zd(v):null;if(!v)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=ul(c.href),c=hn(v).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=ul(c.href);var x=hn(v).hoistableStyles,P=x.get(a);if(P||(v=v.ownerDocument||v,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,P),(x=v.querySelector(zc(a)))&&!x._p&&(P.instance=x,P.state.loading=5),qr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},qr.set(a,c),x||Tk(v,a,c,P.state))),o&&h===null)throw Error(r(528,""));return P}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=dl(c),c=hn(v).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function ul(a){return'href="'+An(a)+'"'}function zc(a){return'link[rel="stylesheet"]['+a+"]"}function cC(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function Tk(a,o,c,h){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=a.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),Tn(o,"link",c),bt(o),a.head.appendChild(o))}function dl(a){return'[src="'+An(a)+'"]'}function Uc(a){return"script[async]"+a}function uC(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=a.querySelector('style[data-href~="'+An(c.href)+'"]');if(h)return o.instance=h,bt(h),h;var v=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(a.ownerDocument||a).createElement("style"),bt(h),Tn(h,"style",v),ef(h,c.precedence,a),o.instance=h;case"stylesheet":v=ul(c.href);var x=a.querySelector(zc(v));if(x)return o.state.loading|=4,o.instance=x,bt(x),x;h=cC(c),(v=qr.get(v))&&cg(h,v),x=(a.ownerDocument||a).createElement("link"),bt(x);var P=x;return P._p=new Promise(function(_,U){P.onload=_,P.onerror=U}),Tn(x,"link",h),o.state.loading|=4,ef(x,c.precedence,a),o.instance=x;case"script":return x=dl(c.src),(v=a.querySelector(Uc(x)))?(o.instance=v,bt(v),v):(h=c,(v=qr.get(x))&&(h=m({},c),ug(h,v)),a=a.ownerDocument||a,v=a.createElement("script"),bt(v),Tn(v,"link",h),a.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,ef(h,c.precedence,a));return o.instance}function ef(a,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,x=v,P=0;P<h.length;P++){var _=h[P];if(_.dataset.precedence===o)x=_;else if(x!==v)break}x?x.parentNode.insertBefore(a,x.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function cg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function ug(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var tf=null;function dC(a,o,c){if(tf===null){var h=new Map,v=tf=new Map;v.set(c,h)}else v=tf,h=v.get(c),h||(h=new Map,v.set(c,h));if(h.has(a))return h;for(h.set(a,null),c=c.getElementsByTagName(a),v=0;v<c.length;v++){var x=c[v];if(!(x[Do]||x[Ye]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var P=x.getAttribute(o)||"";P=a+P;var _=h.get(P);_?_.push(x):h.set(P,[x])}}return h}function fC(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function Dk(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function pC(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Hc=null;function Ok(){}function _k(a,o,c){if(Hc===null)throw Error(r(475));var h=Hc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var v=ul(c.href),x=a.querySelector(zc(v));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(h.count++,h=nf.bind(h),a.then(h,h)),o.state.loading|=4,o.instance=x,bt(x);return}x=a.ownerDocument||a,c=cC(c),(v=qr.get(v))&&cg(c,v),x=x.createElement("link"),bt(x);var P=x;P._p=new Promise(function(_,U){P.onload=_,P.onerror=U}),Tn(x,"link",c),o.instance=x}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=nf.bind(h),a.addEventListener("load",o),a.addEventListener("error",o))}}function Nk(){if(Hc===null)throw Error(r(475));var a=Hc;return a.stylesheets&&a.count===0&&dg(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&dg(a,a.stylesheets),a.unsuspend){var h=a.unsuspend;a.unsuspend=null,h()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function nf(){if(this.count--,this.count===0){if(this.stylesheets)dg(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var rf=null;function dg(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,rf=new Map,o.forEach(jk,a),rf=null,nf.call(a))}function jk(a,o){if(!(o.state.loading&4)){var c=rf.get(a);if(c)var h=c.get(null);else{c=new Map,rf.set(a,c);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<v.length;x++){var P=v[x];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(c.set(P.dataset.precedence,P),h=P)}h&&c.set(null,h)}v=o.instance,P=v.getAttribute("data-precedence"),x=c.get(P)||h,x===h&&c.set(null,v),c.set(P,v),this.count++,h=nf.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),x?x.parentNode.insertBefore(v,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),o.state.loading|=4}}var Gc={$$typeof:D,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function kk(a,o,c,h,v,x,P,_){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=x,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function hC(a,o,c,h,v,x,P,_,U,ee,ue,me){return a=new kk(a,o,c,P,_,U,ee,me),o=1,x===!0&&(o|=24),x=pr(3,null,null,o),a.current=x,x.stateNode=a,o=Fh(),o.refCount++,a.pooledCache=o,o.refCount++,x.memoizedState={element:h,isDehydrated:c,cache:o},Xh(x),a}function mC(a){return a?(a=Ho,a):Ho}function gC(a,o,c,h,v,x){v=mC(v),h.context===null?h.context=v:h.pendingContext=v,h=Ii(o),h.payload={element:c},x=x===void 0?null:x,x!==null&&(h.callback=x),c=Ri(a,h,o),c!==null&&(vr(c,a,o),bc(c,a,o))}function yC(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function fg(a,o){yC(a,o),(a=a.alternate)&&yC(a,o)}function vC(a){if(a.tag===13){var o=Uo(a,67108864);o!==null&&vr(o,a,67108864),fg(a,67108864)}}var af=!0;function Mk(a,o,c,h){var v=I.T;I.T=null;var x=G.p;try{G.p=2,pg(a,o,c,h)}finally{G.p=x,I.T=v}}function Ik(a,o,c,h){var v=I.T;I.T=null;var x=G.p;try{G.p=8,pg(a,o,c,h)}finally{G.p=x,I.T=v}}function pg(a,o,c,h){if(af){var v=hg(h);if(v===null)eg(a,o,h,sf,c),xC(a,h);else if(Lk(v,a,o,c,h))h.stopPropagation();else if(xC(a,h),o&4&&-1<Rk.indexOf(a)){for(;v!==null;){var x=Mr(v);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var P=Wn(x.pendingLanes);if(P!==0){var _=x;for(_.pendingLanes|=2,_.entangledLanes|=2;P;){var U=1<<31-_e(P);_.entanglements[1]|=U,P&=~U}Oa(x),(ct&6)===0&&(Hd=Tt()+500,Rc(0))}}break;case 13:_=Uo(x,2),_!==null&&vr(_,x,2),qd(),fg(x,2)}if(x=hg(h),x===null&&eg(a,o,h,sf,c),x===v)break;v=x}v!==null&&h.stopPropagation()}else eg(a,o,h,null,c)}}function hg(a){return a=Wu(a),mg(a)}var sf=null;function mg(a){if(sf=null,a=kr(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return sf=a,null}function bC(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_r()){case Nr:return 2;case zn:return 8;case ra:case Ca:return 32;case Di:return 268435456;default:return 32}default:return 32}}var gg=!1,Wi=null,Xi=null,Qi=null,qc=new Map,Yc=new Map,Ji=[],Rk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xC(a,o){switch(a){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":qc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yc.delete(o.pointerId)}}function Fc(a,o,c,h,v,x){return a===null||a.nativeEvent!==x?(a={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:x,targetContainers:[v]},o!==null&&(o=Mr(o),o!==null&&vC(o)),a):(a.eventSystemFlags|=h,o=a.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),a)}function Lk(a,o,c,h,v){switch(o){case"focusin":return Wi=Fc(Wi,a,o,c,h,v),!0;case"dragenter":return Xi=Fc(Xi,a,o,c,h,v),!0;case"mouseover":return Qi=Fc(Qi,a,o,c,h,v),!0;case"pointerover":var x=v.pointerId;return qc.set(x,Fc(qc.get(x)||null,a,o,c,h,v)),!0;case"gotpointercapture":return x=v.pointerId,Yc.set(x,Fc(Yc.get(x)||null,a,o,c,h,v)),!0}return!1}function SC(a){var o=kr(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,Dt(a.priority,function(){if(c.tag===13){var h=yr();h=be(h);var v=Uo(c,h);v!==null&&vr(v,c,h),fg(c,h)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function of(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=hg(a.nativeEvent);if(c===null){c=a.nativeEvent;var h=new c.constructor(c.type,c);Ku=h,c.target.dispatchEvent(h),Ku=null}else return o=Mr(c),o!==null&&vC(o),a.blockedOn=c,!1;o.shift()}return!0}function CC(a,o,c){of(a)&&c.delete(o)}function $k(){gg=!1,Wi!==null&&of(Wi)&&(Wi=null),Xi!==null&&of(Xi)&&(Xi=null),Qi!==null&&of(Qi)&&(Qi=null),qc.forEach(CC),Yc.forEach(CC)}function lf(a,o){a.blockedOn===o&&(a.blockedOn=null,gg||(gg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$k)))}var cf=null;function AC(a){cf!==a&&(cf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){cf===a&&(cf=null);for(var o=0;o<a.length;o+=3){var c=a[o],h=a[o+1],v=a[o+2];if(typeof h!="function"){if(mg(h||c)===null)continue;break}var x=Mr(c);x!==null&&(a.splice(o,3),o-=3,mm(x,{pending:!0,data:v,method:c.method,action:h},h,v))}}))}function Vc(a){function o(U){return lf(U,a)}Wi!==null&&lf(Wi,a),Xi!==null&&lf(Xi,a),Qi!==null&&lf(Qi,a),qc.forEach(o),Yc.forEach(o);for(var c=0;c<Ji.length;c++){var h=Ji[c];h.blockedOn===a&&(h.blockedOn=null)}for(;0<Ji.length&&(c=Ji[0],c.blockedOn===null);)SC(c),c.blockedOn===null&&Ji.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var v=c[h],x=c[h+1],P=v[Ve]||null;if(typeof x=="function")P||AC(c);else if(P){var _=null;if(x&&x.hasAttribute("formAction")){if(v=x,P=x[Ve]||null)_=P.formAction;else if(mg(v)!==null)continue}else _=P.action;typeof _=="function"?c[h+1]=_:(c.splice(h,3),h-=3),AC(c)}}}function yg(a){this._internalRoot=a}uf.prototype.render=yg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,h=yr();gC(c,h,a,o,null,null)},uf.prototype.unmount=yg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;gC(a.current,2,null,a,null,null),qd(),o[Nt]=null}};function uf(a){this._internalRoot=a}uf.prototype.unstable_scheduleHydration=function(a){if(a){var o=pn();a={blockedOn:null,target:a,priority:o};for(var c=0;c<Ji.length&&o!==0&&o<Ji[c].priority;c++);Ji.splice(c,0,a),c===0&&SC(a)}};var EC=t.version;if(EC!=="19.1.1")throw Error(r(527,EC,"19.1.1"));G.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=f(o),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var Bk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{aa=df.inject(Bk),fn=df}catch{}}return Wc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,h="",v=zS,x=US,P=HS,_=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(_=o.unstable_transitionCallbacks)),o=hC(a,1,!1,null,null,c,h,v,x,P,_,null),a[Nt]=o.current,Zm(a),new yg(o)},Wc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var h=!1,v="",x=zS,P=US,_=HS,U=null,ee=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(P=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(U=c.unstable_transitionCallbacks),c.formState!==void 0&&(ee=c.formState)),o=hC(a,1,!0,o,c??null,h,v,x,P,_,U,ee),o.context=mC(null),c=o.current,h=yr(),h=be(h),v=Ii(h),v.callback=null,Ri(c,v,h),c=h,o.current.lanes=c,oe(o,c),Oa(o),a[Nt]=o.current,Zm(a),new uf(o)},Wc.version="19.1.1",Wc}var zC;function UM(){if(zC)return Sg.exports;zC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Sg.exports=zM(),Sg.exports}var HM=UM();const GM=xa(HM),qM="modulepreload",YM=function(e){return"/"+e},UC={},Sr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let f=function(d){return Promise.all(d.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=f(n.map(d=>{if(d=YM(d),d in UC)return;UC[d]=!0;const m=d.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":qM,m||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),m)return new Promise((b,S)=>{y.addEventListener("load",b),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})},yt=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:6,image:"/img/Interceptor.png",abilities:[{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Jammer",class:0,limit:999,attack:0,hull:1,shields:0,speed:1,image:"/img/Jammer.png",selectable:!1,abilities:[{name:"Jammer",description:"While this drone is in a lane, opponent card effects can only target this drone.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"JAMMER"}}],upgradeSlots:0}],Nn=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",visualEffect:{type:"NUKE_BLAST",duration:1200},targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",visualEffect:{type:"ENERGY_WAVE",duration:800},targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD028",baseCardId:"CARD028",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD029",baseCardId:"CARD029",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1},{id:"CARD030",baseCardId:"CARD030",name:"Deploy Jammers",maxInDeck:4,type:"Action",cost:3,image:"/cards/DeployJammers.png",description:"Create a Jammer drone token in each of your lanes. (Jammer: 0/1, Speed 1. Opponent card effects can only target Jammer drones.)",effect:{type:"CREATE_TOKENS",tokenName:"Jammer",locations:["lane1","lane2","lane3"],ignoresCPULimit:!0}}],rr=[{id:"BRIDGE_001",type:"Bridge",name:"Standard Command Bridge",key:"bridge",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},{id:"POWERCELL_001",type:"Power Cell",name:"Standard Power Cell",key:"powerCell",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},{id:"DRONECONTROL_001",type:"Drone Control Hub",name:"Standard Drone Control Hub",key:"droneControlHub",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}],uu={bridge:rr.find(e=>e.key==="bridge"),powerCell:rr.find(e=>e.key==="powerCell"),droneControlHub:rr.find(e=>e.key==="droneControlHub")},os=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",La=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=os(l),f={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const m in l.middleLaneBonus)f.hasOwnProperty(m)&&(f[m]+=l.middleLaneBonus[m]);r[s]=f}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},or=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=yt.find(y=>y.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,f=s.speed,d=s.shields,m=s.class;l.forEach(y=>{y.mod.stat==="attack"&&(u+=y.mod.value),y.mod.stat==="speed"&&(f+=y.mod.value),y.mod.stat==="shields"&&(d+=y.mod.value),y.mod.stat==="cost"&&(m+=y.mod.value)}),m=Math.max(0,m);let g={...e,attack:u,speed:f,maxShields:d,cost:m,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(y=>{y.stat==="attack"&&(g.attack+=y.value),y.stat==="speed"&&(g.speed+=y.value),y.stat==="cost"&&(g.cost=Math.max(0,g.cost+y.value))}),s.abilities?.forEach(y=>{if(y.type==="PASSIVE"){if(y.effect.type==="GRANT_KEYWORD"&&g.keywords.add(y.effect.keyword),y.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:b,mod:S}=y.effect;let C=!1;if(b.type==="SHIP_SECTION_HULL_DAMAGED"&&b.location==="SAME_LANE"){const E=parseInt(t.slice(-1))-1,T=(n.name==="Player 1"?i.player1:i.player2)[E];if(T){const D=n.shipSections[T],O=os(D);(O==="damaged"||O==="critical")&&(C=!0)}}C&&S.stat==="attack"&&(g.attack+=S.value)}if(y.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:b,mod:S}=y.effect;let C=0;if(b.type==="OWN_DAMAGED_SECTIONS")for(const E in n.shipSections){const w=n.shipSections[E],T=os(w);(T==="damaged"||T==="critical")&&C++}C>0&&(S.stat==="attack"&&(g.attack+=S.value*C),S.stat==="speed"&&(g.speed+=S.value*C))}y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(g.potentialShipDamage=(g.potentialShipDamage||0)+y.effect.value),y.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&y.effect.mods.forEach(b=>{b.stat==="attack"&&(g.attack+=b.value),b.stat==="speed"&&(g.speed+=b.value)})}}),n.dronesOnBoard[t]?.forEach(y=>{if(y.id===e.id)return;yt.find(S=>S.name===y.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:C,value:E}=S.effect;C==="shields"?g.maxShields+=E:C==="attack"?g.attack+=E:C==="speed"&&(g.speed+=E)}})}),l.forEach(y=>{y.grantedAbilities&&y.grantedAbilities.forEach(b=>{if(b.type==="PASSIVE"&&(b.effect.type==="GRANT_KEYWORD"&&g.keywords.add(b.effect.keyword),b.effect.type==="MODIFY_STAT")){const{stat:S,value:C}=b.effect;S==="attack"&&(g.attack+=C),S==="speed"&&(g.speed+=C),S==="shields"&&(g.maxShields+=C)}})}),g},dP=(e,t)=>({...e,instanceId:t}),ml=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],fP=["Scout Drone","Standard Fighter","Heavy Fighter","Guardian Drone","Bomber","Repair Drone","Interceptor","Aegis Drone","Kamikaze Drone","Swarm Drone"],pP=e=>{const t=[];let n=0;return e.forEach(r=>{const i=Nn.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(dP(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},hv=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},FM=(e,t)=>{const n=La({shipSections:uu},[]).totals;return{name:e,shipSections:uu,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:pP(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},vl=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},hP=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},kl=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=or(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},ir=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},du=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],f=typeof n.cost=="number",d=!f,{type:m,affinity:g,location:y,custom:b}=n.targeting;let S=null;if(d&&Object.values(s.dronesOnBoard).flat().some(j=>j.id===t.id)&&(S=ir(t.id,s),!S))return[];const C=O=>O.abilities?.some(j=>j.effect?.type==="GRANT_KEYWORD"&&j.effect?.keyword==="JAMMER"),E=(O,j)=>(O.dronesOnBoard[j]||[]).some(C),w=(O,j)=>(O.dronesOnBoard[j]||[]).filter(C),T=(O,j)=>{const N=e!==j&&f;Object.entries(O.dronesOnBoard).forEach(([k,B])=>{let F=!1;y==="ANY_LANE"&&(F=!0),d&&y==="SAME_LANE"&&(F=k===S),F&&(N&&E(O,k)?w(O,k).forEach(R=>{let z=!0;if(b?.includes("DAMAGED_HULL")){const W=yt.find(Z=>Z.name===R.name);(!W||R.hull>=W.hull)&&(z=!1)}b?.includes("EXHAUSTED")&&(R.isExhausted||(z=!1)),z&&u.push({...R,lane:k,owner:j})}):B.forEach(M=>{let R=!0;if(b?.includes("DAMAGED_HULL")){const z=yt.find(W=>W.name===M.name);(!z||M.hull>=z.hull)&&(R=!1)}b?.includes("EXHAUSTED")&&(M.isExhausted||(R=!1)),R&&u.push({...M,lane:k,owner:j})}))})},D=(O,j)=>{Object.keys(O.shipSections).forEach(N=>{u.push({...O.shipSections[N],id:N,name:N,owner:j})})};if(m==="DRONE")(g==="FRIENDLY"||g==="ANY")&&T(s,e),(g==="ENEMY"||g==="ANY")&&T(l,e==="player1"?"player2":"player1");else if(m==="SHIP_SECTION")(g==="FRIENDLY"||g==="ANY")&&D(s,e),(g==="ENEMY"||g==="ANY")&&D(l,e==="player1"?"player2":"player1");else if(m==="LANE")["lane1","lane2","lane3"].forEach(O=>{if((g==="FRIENDLY"||g==="ANY")&&u.push({id:O,owner:e}),g==="ENEMY"||g==="ANY"){const j=e==="player1"?"player2":"player1";u.push({id:O,owner:j})}});else if(m==="DRONE_CARD"){const O=e==="player1"?r:i;O.activeDronePool.forEach(j=>{const N=yt.find(M=>M.name===j.name),k=O.appliedUpgrades[j.name]||[],B=k.filter(M=>M.id===n.id).length,F=n.maxApplications===void 0?1:n.maxApplications;N&&k.length<N.upgradeSlots&&B<F&&u.push({...j,id:j.name,owner:e})})}else if(m==="APPLIED_UPGRADE"){const O=g==="ENEMY"?l:s,j=g==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(O.dronesOnBoard).flat().forEach(N=>{(O.appliedUpgrades[N.name]||[]).length>0&&u.push({...N,owner:j})})}return u},mP=(e,t,n,r,i)=>{const s=yt.find(d=>d.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const f=s.abilities.filter(d=>d.type==="TRIGGERED"&&d.trigger==="ON_MOVE");if(f.length>0){const d=l.dronesOnBoard[r].findIndex(m=>m.id===t.id);if(d!==-1){const m=l.dronesOnBoard[r][d];f.forEach(g=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${g.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),m.statMods||(m.statMods=[]),g.effects?.forEach(y=>{y.type==="PERMANENT_STAT_MOD"&&(u=!0,m.statMods.push(y.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${y.mod.value} ${y.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},gP=(e,t,n)=>{const r=yt.find(d=>d.name===t.name);if(!r?.abilities)return{newState:e,effects:[],animationEvents:[]};let i=JSON.parse(JSON.stringify(e));const s=[],l=[];let u=!1;return r.abilities.filter(d=>d.effect?.type==="AFTER_ATTACK").forEach(d=>{const{subEffect:m}=d.effect;if(m.type==="DESTROY_SELF")for(const g in i.dronesOnBoard){const y=i.dronesOnBoard[g].findIndex(b=>b.id===t.id);if(y!==-1){u=!0;const b=i.dronesOnBoard[g][y];s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${d.name}', destroying itself.`}}),l.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:n,targetLane:g,targetType:"drone",timestamp:Date.now()}),i.dronesOnBoard[g]=i.dronesOnBoard[g].filter(S=>S.id!==t.id),Object.assign(i,vl(i,b));break}}else if(m.type==="PERMANENT_STAT_MOD")for(const g in i.dronesOnBoard){const y=i.dronesOnBoard[g].findIndex(b=>b.id===t.id);if(y!==-1){u=!0,i.dronesOnBoard[g][y].statMods||(i.dronesOnBoard[g][y].statMods=[]),s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${d.name}', gaining a permanent +${m.mod.value} ${m.mod.stat}.`}}),i.dronesOnBoard[g][y].statMods.push(m.mod);break}}}),{newState:u?i:e,effects:s,animationEvents:l}},l0=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>os(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},yP=(e,t,n,r,i)=>{if(K("DEPLOYMENT"," validateDeployment: Entry params:",{droneName:t?.name,fullDroneCollectionLength:yt.length}),r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};K("DEPLOYMENT"," validateDeployment: About to find baseDroneInfo for:",t?.name);const s=yt.find(g=>g.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=s.limit;if(l.forEach(g=>{g.mod.stat==="limit"&&(u+=g.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const f=t.class;let d=0,m=0;return n===1?(m=Math.min(e.initialDeploymentBudget,f),d=f-m):(m=Math.min(e.deploymentBudget,f),d=f-m),e.energy<d?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${d} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:m,energyCost:d}},vP=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},mv=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=hv(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},VM=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},KM=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")vP(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=mv(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},WM=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=mv(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},XM=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=La(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(f=>{l[f]={...n.shipSections[f],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},QM=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,f=La(s,l).totals.shieldsPerTurn,d=JSON.parse(JSON.stringify(s.shipSections)),m=Object.keys(d);let g=f,y=0,b=0;for(;g>0&&b<100;){const w=m[y%m.length],T=d[w],D=hv(w,s,l);T.allocatedShields<D&&(T.allocatedShields++,g--),y++,b++}const S={...s,shipSections:d},E={success:!0,newPhase:"deployment",firstPlayer:Tp(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(E.player1State=i,E.player2State=S):(E.player1State=S,E.player2State=i),E},JM=(e,t,n,r,i,s,l)=>{const{effect:u,cost:f}=e,d=r.player1;let m="",g="Ability effect applied.";e.targeting?.type==="LANE"?m=`Lane ${n.id.slice(-1)}`:n&&(m=n.name),u.type==="HEAL"?(g=`Healed ${u.value} hull on targets in ${m}.`,u.scope!=="LANE"&&(g=`Healed ${u.value} hull on ${m}.`)):u.type==="DAMAGE"&&(g=`Dealt ${u.value} damage to ${m}.`),s&&s({player:d.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:m,outcome:g});const y={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(f.energy&&(y.player1.energy-=f.energy),f.exhausts)for(const C in y.player1.dronesOnBoard){const E=y.player1.dronesOnBoard[C].findIndex(w=>w.id===t.id);if(E!==-1){y.player1.dronesOnBoard[C][E].isExhausted=!0;break}}const b=DP(u,t,n,y,i,{resolveAttackCallback:l});y.player1=b.newPlayerStates.player1,y.player2=b.newPlayerStates.player2;const S=b.animationEvents||[];return{newPlayerStates:y,shouldEndTurn:!u.goAgain,animationEvents:S}},ZM=(e,t,n,r,i,s,l)=>{const{logCallback:u,resolveAttackCallback:f}=s||{},{cost:d,effect:m}=e,g=r[l];u&&u({player:g.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const y=[{type:"SHIP_ABILITY_REVEAL",abilityName:e.name,sectionName:t,actingPlayerId:l}],b={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(b[l].energy-=d.energy,m.type==="REALLOCATE_SHIELDS")return{newPlayerStates:b,shouldEndTurn:!1,requiresShieldReallocation:!0,animationEvents:y};{const S=OP(m,t,n,b,i,{resolveAttackCallback:f},l);return b.player1=S.newPlayerStates.player1,b.player2=S.newPlayerStates.player2,y.push(...S.animationEvents||[]),S.needsDiscardSelection?{newPlayerStates:b,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:l,count:S.needsDiscardSelection,fromAbility:!0,abilityName:e.name,sectionName:t,actingPlayerId:l},animationEvents:[]}:{newPlayerStates:b,shouldEndTurn:!0,animationEvents:y}}},bP=(e,t,n,r,i,s,l,u)=>{const f=yP(r,e,n,Object.values(r.dronesOnBoard).flat().length,La(r,s.player1||s));if(!f.isValid)return{success:!1,error:f.reason,message:f.message,newPlayerState:r};const{budgetCost:d,energyCost:m}=f;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const g=JSON.parse(JSON.stringify(r)),y={...g.dronesOnBoard,[t]:[...g.dronesOnBoard[t],{...e,id:0}]},b={...g,dronesOnBoard:y},S=or(e,t,b,i,s),C={...e,id:Date.now(),statMods:[],currentShields:S.maxShields,currentMaxShields:S.maxShields,hull:e.hull,isExhausted:!1};g.dronesOnBoard[t].push(C),g.deployedDroneCounts={...g.deployedDroneCounts,[e.name]:(g.deployedDroneCounts[e.name]||0)+1},n===1?g.initialDeploymentBudget-=d:g.deploymentBudget-=d,g.energy-=m,g.dronesOnBoard=kl(g,i,s);const E=[{type:"TELEPORT_IN",targetId:C.id,laneId:t,playerId:u,timestamp:Date.now()}];return{success:!0,newPlayerState:g,deployedDrone:C,animationEvents:E}},eI=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return l0(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):l0(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},tI=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=ir(e.id,t);if(!i)return[];const s=or(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(f=>{const d=or(f,i,n,t,r);return!f.isExhausted&&(d.speed>s.speed||d.keywords.has("ALWAYS_INTERCEPTS"))}).map(f=>f.id)},nI=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,f=e.class;let d=0;n===1?d=Math.min(r.initialDeploymentBudget,f):d=Math.min(r.deploymentBudget,f);const m=f-d;if(r.energy<m)return{success:!1,error:"Insufficient energy for deployment"};const g={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let y={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],g]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-d:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-d:r.deploymentBudget,energy:r.energy-m};return y.dronesOnBoard=kl(y,i,s),{success:!0,newPlayerState:y,deployedDrone:g,costs:{energy:m,budget:d}}},rI=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l,attackingPlayer:u}=e,d=t[u==="player1"?"player2":"player1"],m=t[u],g=or(r,l,m,d,n),y=d.dronesOnBoard[l].filter(b=>{const S=or(b,l,d,m,n);return!b.isExhausted&&(S.speed>g.speed||S.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||b.id!==i.id)});return{hasInterceptors:y.length>0,interceptors:y,attackDetails:e}},gv=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},aI=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},iI=(e,t)=>{const n=gv(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},sI=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=Tp(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},oI=(e,t,n,r)=>{const i=c0(e.player1,t,n,e.player2,e.placedSections),s=c0(e.player2,t,r,e.player1,e.opponentPlacedSections),l=u0(i,n.totals.handLimit),u=u0(s,r.totals.handLimit),f=Tp(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),d={...e,turn:t,turnPhase:"deployment",currentPlayer:f,firstPlayerOfRound:f,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},m=[{type:"ROUND_START",turn:t,firstPlayer:f},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:d,uiEffects:m}},xP=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=or(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},c0=(e,t,n,r,i)=>({...xP(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),u0=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;const s=n.pop();r.push(s),K("CARDS",` Card drawn to hand: ${s.name}`,{id:s.id,instanceId:s.instanceId,hasInstanceId:s.instanceId!==void 0,playerName:e.name})}return{...e,deck:n,hand:r,discardPile:i}},lI=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:f,opponentPlacedSections:d}=e,{addLogEntry:m,setPlayer2:g,setPendingAttack:y,endTurn:b,endDeploymentPhase:S,endActionPhase:C,setPassInfo:E}=n;let w;return l==="deployment"&&!u.player2Passed?w=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:d,placedSections:f,getShipStatus:os,calculateEffectiveShipStats:La,calculateEffectiveStats:or,addLogEntry:m}):l==="action"&&!u.player2Passed&&(w=t.handleOpponentAction({player1:r,player2:i,placedSections:f,opponentPlacedSections:d,getShipStatus:os,getLaneOfDrone:ir,getValidTargets:du,calculateEffectiveStats:or,addLogEntry:m})),w||null},cI=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:f}=t,{addLogEntry:d,setPlayer2:m,setPendingAttack:g,endTurn:y,endDeploymentPhase:b,endActionPhase:S,setPassInfo:C,resolveCardPlay:E}=n;if(e.type==="pass"){const w=!t.passInfo.player1Passed,T={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(w?"player2":null)};return C(T),T.player1Passed?l==="deployment"?b():l==="action"&&S():y("player2"),{newPassInfo:T}}else if(e.type==="deploy"){const{droneToDeploy:w,targetLane:T,logContext:D}=e.payload;d({player:i.name,actionType:"DEPLOY",source:w.name,target:T,outcome:`Deployed to ${T}.`},"aiDeploymentDeploy",D);const O=bP(w,T,i,r,s,{player1:u,player2:f});return O.success&&(m(O.newPlayerState),y("player2")),{deployedDrone:O.deployedDrone}}else if(e.type==="action"){const w=e.payload,{logContext:T}=e;switch(w.type){case"play_card":E(w.card,w.target,"player2",T);break;case"attack":g({attacker:w.attacker,target:w.target,targetType:w.targetType,lane:w.attacker.lane,attackingPlayer:"player2",aiContext:T});break;case"move":{const{drone:D,fromLane:O,toLane:j}=w;d({player:i.name,actionType:"MOVE",source:D.name,target:j,outcome:`Moved from ${O} to ${j}.`},"aiActionMove",T);let N=JSON.parse(JSON.stringify(i));N.dronesOnBoard[O]=N.dronesOnBoard[O].filter(F=>F.id!==D.id);const k={...D,isExhausted:!0};N.dronesOnBoard[j].push(k);const{newState:B}=mP(N,k,O,j,d);B.dronesOnBoard=kl(B,r,{player1:u,player2:f}),m(B),y("player2");break}default:y("player2");break}return{action:w}}return null},SP=(e,t,n,r,i,s,l,u)=>{const{cost:f,effect:d}=e,{logCallback:m,applyOnMoveEffectsCallback:g,updateAurasCallback:y}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=f,b.hand=b.hand.filter(w=>w.instanceId!==e.instanceId),b.discardPile.push(e);const S=new Set(t.map(w=>w.id));b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(w=>!S.has(w.id));const C=t.map(w=>({...w,isExhausted:w.isExhausted||!d.properties?.includes("DO_NOT_EXHAUST")}));b.dronesOnBoard[r].push(...C),m({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(w=>w.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let E=b;return C.forEach(w=>{const{newState:T}=g(E,w,n,r,m);E=T}),E.dronesOnBoard=y(E,s,l),{newPlayerState:E,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},CP=(e,t,n,r,i,s,l,u)=>{const{cost:f,effect:d}=e,{logCallback:m,applyOnMoveEffectsCallback:g,updateAurasCallback:y}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=f,b.hand=b.hand.filter(E=>E.instanceId!==e.instanceId),b.discardPile.push(e),b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(E=>E.id!==t.id);const S={...t,isExhausted:d.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};b.dronesOnBoard[r].push(S),m({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:C}=g(b,S,n,r,m);return C.dronesOnBoard=y(C,s,l),{newPlayerState:C,shouldEndTurn:!e.effect.goAgain,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},AP=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},EP=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=os(i);(s==="damaged"||s==="critical")&&n++}return n},uI=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:f,resolveAttackCallback:d}=s,m=t?t.name||t.id:"N/A";let g="Card effect applied.";const y=e.effect;if(y.type==="DRAW"&&(g=`Drew ${y.value} card(s).`),y.type==="GAIN_ENERGY"&&(g=`Gained ${y.value} energy.`),y.type==="HEAL_HULL"&&(g=`Healed ${y.value} hull on ${m}.`),y.type==="HEAL_SHIELDS"&&(g=`Healed ${y.value} shields on ${m}.`),y.type==="READY_DRONE"&&(g=`Readied ${m}.`),y.type==="DAMAGE"&&(y.scope==="FILTERED"?g=`Dealt ${y.value} damage to filtered targets in ${m}.`:g=`Dealt ${y.value} damage to ${m}.`),y.type==="MODIFY_STAT"){const w=y.mod,T=w.type==="temporary"?" until the end of the turn":" permanently";g=`Gave ${m} a ${w.value>0?"+":""}${w.value} ${w.stat} bonus${T}.`}if(y.type==="REPEATING_EFFECT"){const w=r[n],T=EP(y.condition,w);g=`Drew ${T} card(s) and gained ${T} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:m,outcome:g});let S=n==="player1"&&(e.effect.type==="SEARCH_AND_DRAW"||e.effect.type==="SINGLE_MOVE"||e.effect.type==="MULTI_MOVE")?r:AP(e,n,r);const C=dI(e.effect,t,n,S,i,s,e),E=[];if(C.needsCardSelection||E.push({type:"CARD_REVEAL",cardId:e.id,cardName:e.name,cardData:e,actingPlayerId:n,timestamp:Date.now()}),e.visualEffect&&t){let w=null,T=null,D=null;if(t.id&&(t.id==="lane1"||t.id==="lane2"||t.id==="lane3")){const O=e.targeting?.affinity||"ANY";O==="ENEMY"?(w=n==="player1"?"player2":"player1",T=t.id,D="lane"):O==="ANY"&&(w="center",T=t.id,D="lane"),w&&D&&E.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:w,targetLane:T,targetType:D,duration:e.visualEffect.duration||800,timestamp:Date.now()})}else{for(const O of["player1","player2"]){for(const j in S[O].dronesOnBoard)if(S[O].dronesOnBoard[j].some(N=>N.id===t.id)){w=O,T=j,D="drone";break}if(w)break}if(!w){for(const O of["player1","player2"])if(S[O].shipSections[t.name]||S[O].shipSections[t.id]){w=O,D="section";break}}w&&D&&E.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:w,targetLane:T,targetType:D,duration:e.visualEffect.duration||800,timestamp:Date.now()})}}if(C.animationEvents&&E.push(...C.animationEvents),!C.needsCardSelection){const w=wP(e,n,C.newPlayerStates);return{newPlayerStates:w.newPlayerStates,shouldEndTurn:w.shouldEndTurn,additionalEffects:C.additionalEffects||[],animationEvents:E,needsCardSelection:!1}}return{newPlayerStates:r,shouldEndTurn:!1,additionalEffects:C.additionalEffects||[],animationEvents:E,needsCardSelection:C.needsCardSelection}},wP=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},dI=(e,t,n,r,i,s,l=null)=>e.effects?fI(e,t,n,r,i,s,l):PP(e,t,n,r,i,s,l),fI=(e,t,n,r,i,s,l=null)=>{let u=r,f=[];if(e.type==="REPEATING_EFFECT"){const d=EP(e.condition,u[n]);for(let m=0;m<d;m++)for(const g of e.effects){const y=PP(g,t,n,u,i,s,l);u=y.newPlayerStates,y.additionalEffects&&f.push(...y.additionalEffects)}}return{newPlayerStates:u,additionalEffects:f}},PP=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return vv(e,null,t,n,r);case"SEARCH_AND_DRAW":return TP(e,null,t,n,r);case"GAIN_ENERGY":return pI(e,n,r,i);case"READY_DRONE":return hI(e,t,n,r);case"HEAL_HULL":return yv(e,null,t,n,r,i);case"HEAL_SHIELDS":return mI(e,t,n,r,s,i);case"DAMAGE":return Pp(e,null,t,n,r,i,s,l);case"DESTROY":return yI(e,t,n,r);case"MODIFY_STAT":return vI(e,t,n,r);case"MODIFY_DRONE_BASE":return bI(e,t,n,r);case"DESTROY_UPGRADE":return xI(e,t,n,r);case"SINGLE_MOVE":case"MULTI_MOVE":return EI(e,t,n,r,i,s,l);case"CREATE_TOKENS":return wI(e,t,n,r,i,s);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},pI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,f=La(l,u).totals,d=Math.min(f.maxEnergy,l.energy+e.value);return l.energy=d,{newPlayerStates:s,additionalEffects:[]}},hI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const f=l.dronesOnBoard[u].findIndex(d=>d.id===t.id);if(f!==-1){l.dronesOnBoard[u][f].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},mI=(e,t,n,r,i,s)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=[];if(t.id&&t.id.startsWith("lane")){const f=t.id,d=t.owner||n,m=l[d],y=l[d==="player1"?"player2":"player1"],b=s?.[d]||[],S=m.dronesOnBoard[f]||[];K("COMBAT",`[HEAL_SHIELDS] Healing all drones in ${d} ${f} (${S.length} drones)`),S.forEach(C=>{const w=or(C,f,m,y,b).maxShields,T=C.currentShields||0;T<w&&(C.currentShields=Math.min(w,T+e.value)),K("COMBAT",`[HEAL_SHIELDS] ${C.name}: ${T}  ${C.currentShields} (max: ${w})`),u.push({type:"HEAL_EFFECT",targetId:C.id,targetPlayer:d,targetLane:f,targetType:"drone",healAmount:e.value,config:{},onComplete:null})})}else{const f=l[t.owner||n],d=t.owner||n,g=l[d==="player1"?"player2":"player1"],y=s?.[d]||[];for(const b in f.dronesOnBoard){const S=f.dronesOnBoard[b].findIndex(C=>C.id===t.id);if(S!==-1){const C=f.dronesOnBoard[b][S],w=or(C,b,f,g,y).maxShields,T=C.currentShields||0;T<w&&(C.currentShields=Math.min(w,T+e.value),K("COMBAT",`[HEAL_SHIELDS] ${C.name} in ${b}: ${T}  ${C.currentShields} (max: ${w})`)),u.push({type:"HEAL_EFFECT",targetId:t.id,targetPlayer:d,targetLane:b,targetType:"drone",healAmount:e.value,config:{},onComplete:null});break}}}return{newPlayerStates:l,additionalEffects:[],animationEvents:u}},gI=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,d=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,g=r[d].dronesOnBoard[u]||[];K("COMBAT",`[DEBUG] Drones in ${d} ${u}:`,g.map(D=>`${D.name}(${D.id}) [${D.hull}hp, ${D.speed}spd]`));const{stat:y,comparison:b,value:S}=e.filter,C={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},w=C[d].dronesOnBoard[u]||[];for(let D=w.length-1;D>=0;D--){const O=w[D];let j=!1;if(b==="GTE"&&O[y]>=S&&(j=!0),b==="LTE"&&O[y]<=S&&(j=!0),K("COMBAT",`[DEBUG] ${O.name} ${y}=${O[y]} ${b} ${S} = ${j}`),j){K("COMBAT",`[DEBUG] Applying ${e.value} damage to ${O.name}`);const N=O.currentShields||0;let k=e.value;const B=Math.min(k,N);O.currentShields=(O.currentShields||0)-B,k-=B,k>0&&(O.hull-=k),O.hull<=0&&(K("COMBAT",`[DEBUG] ${O.name} destroyed`),w.splice(D,1))}}const T=[];for(const D of g){const O=w.find(N=>N.id===D.id);let j=!1;if(b==="GTE"&&D[y]>=S&&(j=!0),b==="LTE"&&D[y]<=S&&(j=!0),j){const N=D.currentShields||0,k=Math.min(e.value,N),B=e.value-k;k>0&&T.push({type:"SHIELD_DAMAGE",targetId:D.id,targetPlayer:d,targetLane:u,targetType:"drone",amount:k,timestamp:Date.now()}),O?B>0&&T.push({type:"HULL_DAMAGE",targetId:D.id,targetPlayer:d,targetLane:u,targetType:"drone",amount:B,timestamp:Date.now()}):T.push({type:"DRONE_DESTROYED",targetId:D.id,targetPlayer:d,targetLane:u,targetType:"drone",timestamp:Date.now()})}}return{newPlayerStates:C,additionalEffects:[],animationEvents:T}}else{const u=r[t.owner],f=ir(t.id,u);if(f){K("COMBAT",`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const d={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},g=d[t.owner].dronesOnBoard[f]||[],y=g.find(b=>b.id===t.id);if(y){let b=e.value,S=0,C=b;if(e.damageType!=="PIERCING"&&(S=Math.min(b,y.currentShields),C-=S,y.currentShields-=S),y.hull-=C,K("COMBAT",`[DEBUG] Applied ${C} hull damage to ${y.name} (${y.hull} hull remaining)`),y.hull<=0){K("COMBAT",`[DEBUG] ${y.name} destroyed`);const w=g.findIndex(T=>T.id===t.id);w>=0&&g.splice(w,1)}const E=[];return S>0&&E.push({type:"SHIELD_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:f,targetType:"drone",amount:S,timestamp:Date.now()}),y.hull<=0?E.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:t.owner,targetLane:f,targetType:"drone",timestamp:Date.now()}):C>0&&E.push({type:"HULL_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:f,targetType:"drone",amount:C,timestamp:Date.now()}),{newPlayerStates:d,additionalEffects:[],animationEvents:E}}return{newPlayerStates:d,additionalEffects:[],animationEvents:[]}}}return{newPlayerStates:r,additionalEffects:[],animationEvents:[]}},yI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=n==="player1"?"player2":"player1",u=[];if(e.scope==="LANE"&&t.id){const f=t.id;(s[l].dronesOnBoard[f]||[]).forEach(g=>{u.push({type:"DRONE_DESTROYED",targetId:g.id,targetPlayer:l,targetLane:f,targetType:"drone",timestamp:Date.now()});const y=vl(s[l],g);s[l].deployedDroneCounts={...s[l].deployedDroneCounts||{},...y.deployedDroneCounts}}),s[l].dronesOnBoard[f]=[],(s[n].dronesOnBoard[f]||[]).forEach(g=>{u.push({type:"DRONE_DESTROYED",targetId:g.id,targetPlayer:n,targetLane:f,targetType:"drone",timestamp:Date.now()});const y=vl(s[n],g);s[n].deployedDroneCounts={...s[n].deployedDroneCounts||{},...y.deployedDroneCounts}}),s[n].dronesOnBoard[f]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const f=s[l],d=ir(t.id,f);if(d){const m=f.dronesOnBoard[d].find(g=>g.id===t.id);if(m){u.push({type:"DRONE_DESTROYED",targetId:m.id,targetPlayer:l,targetLane:d,targetType:"drone",timestamp:Date.now()});const g=vl(f,m);f.deployedDroneCounts={...f.deployedDroneCounts||{},...g.deployedDroneCounts},f.dronesOnBoard[d]=f.dronesOnBoard[d].filter(y=>y.id!==t.id)}}}return{newPlayerStates:s,additionalEffects:[],animationEvents:u}},vI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&typeof t.id=="string"&&t.id.startsWith("lane")){const f=t.id;l.dronesOnBoard[f]&&l.dronesOnBoard[f].forEach(d=>{d.statMods||(d.statMods=[]),d.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const f in l.dronesOnBoard){const d=l.dronesOnBoard[f].findIndex(m=>m.id===t.id);if(d!==-1){const m=l.dronesOnBoard[f][d];m.statMods||(m.statMods=[]),m.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},bI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,f=l.appliedUpgrades[u]||[],d={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(d.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...f,d]},{newPlayerStates:s,additionalEffects:[]}},xI=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:f,instanceId:d}=t;if(u.appliedUpgrades[f]){const m=u.appliedUpgrades[f].filter(g=>g.instanceId!==d);m.length>0?u.appliedUpgrades[f]=m:delete u.appliedUpgrades[f]}return{newPlayerStates:s,additionalEffects:[]}},Pp=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:f}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return gI(e,n,r,i,l,u?.targeting);const d=n.owner==="player1"?i.player1:i.player2,m=ir(n.id,d);if(m&&f){const g={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:m,damageType:e.damageType},y=NP(g,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:y.newPlayerStates,additionalEffects:y.afterAttackEffects||[],animationEvents:y.animationEvents||[]}}return{newPlayerStates:i,additionalEffects:[],animationEvents:[]}},yv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},f=[],d=r||"player1";if(e.scope==="LANE"){const m=n.id;u[d].dronesOnBoard[m]&&u[d].dronesOnBoard[m].forEach(g=>{const y=yt.find(b=>b.name===g.name);y&&(g.hull<y.hull&&(g.hull=Math.min(y.hull,g.hull+e.value)),f.push({type:"HEAL_EFFECT",targetId:g.id,targetPlayer:d,targetLane:m,targetType:"drone",healAmount:e.value,config:{},onComplete:null}))})}else{const m=yt.find(g=>g.name===n.name);if(m){const g=ir(n.id,u[d]);if(g){const y=u[d].dronesOnBoard[g].findIndex(b=>b.id===n.id);if(y!==-1){const b=u[d].dronesOnBoard[g][y];b.hull<m.hull&&(b.hull=Math.min(m.hull,b.hull+e.value)),f.push({type:"HEAL_EFFECT",targetId:n.id,targetPlayer:d,targetLane:g,targetType:"drone",healAmount:e.value,config:{},onComplete:null})}}}else if(n.name&&u[d].shipSections[n.name]){const g=u[d].shipSections[n.name],b=(d==="player1"?s.player1:s.player2).find(S=>S.name===n.name);b&&(g.hull<b.maxHull&&(g.hull=Math.min(b.maxHull,g.hull+e.value)),f.push({type:"HEAL_EFFECT",targetId:n.name,targetPlayer:d,targetLane:null,targetType:"section",healAmount:e.value,config:{},onComplete:null}))}}return{newPlayerStates:u,additionalEffects:[],animationEvents:f}},vv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},f=r||"player1",d=u[f];let m=[...d.deck],g=[...d.hand],y=[...d.discardPile];const b=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let C=0;C<b;C++){if(m.length===0)if(y.length>0)m=[...y].sort(()=>.5-Math.random()),y=[];else break;m.length>0&&g.push(m.pop())}u[f]={...d,deck:m,hand:g,discardPile:y};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},SI=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),TP=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},f=r||"player1",d=u[f];let m=[...d.deck],g=[...d.discardPile],y,b;if(e.filter)m.length===0&&g.length>0&&(m=[...g.sort(()=>.5-Math.random())],g=[]),y=m.filter(C=>SI(C,e.filter)).slice(0,e.searchCount),b=m.filter(C=>!y.includes(C));else{const S=e.searchCount;m.length<S&&g.length>0&&(m=[...m,...g.sort(()=>.5-Math.random())],g=[]),y=m.slice(-e.searchCount).reverse(),b=m.slice(0,-e.searchCount)}if(f==="player2"){const S=CI(y,e.drawCount,u),C=y.filter(T=>!S.includes(T)),E=[...d.hand,...S];let w=[...b,...C];return e.shuffleAfter&&(w=w.sort(()=>.5-Math.random())),u[f]={...d,deck:w,hand:E,discardPile:g},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:y,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:b,discardPile:g,filter:e.filter}}},CI=(e,t,n,r)=>e.map(s=>({card:s,score:AI(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),AI=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},EI=(e,t,n,r,i,s,l)=>{if(n==="player1")return{newPlayerStates:r,additionalEffects:[],needsCardSelection:{type:e.type==="SINGLE_MOVE"?"single_move":"multi_move",card:l,effect:e,maxDrones:e.type==="MULTI_MOVE"?e.count:1,doNotExhaust:e.properties?.includes("DO_NOT_EXHAUST")||!1,phase:e.type==="SINGLE_MOVE"?"select_drone":"select_source_lane"}};const u=n==="player1"?"player2":"player1",f=r[n],d=r[u];let m=null,g=-1/0;for(const y of["lane1","lane2","lane3"]){const S=(f.dronesOnBoard[y]||[]).filter(C=>!C.isExhausted);if(S.length!==0)for(const C of["lane1","lane2","lane3"]){if(y===C)continue;if(e.type==="SINGLE_MOVE"){const D=parseInt(y.replace("lane","")),O=parseInt(C.replace("lane",""));if(Math.abs(D-O)!==1)continue}const E=d.dronesOnBoard[C]?.length||0,w=f.dronesOnBoard[C]?.length||0,T=E*10-w*5;T>g&&(g=T,m={fromLane:y,toLane:C,drones:e.type==="SINGLE_MOVE"?[S[0]]:S.slice(0,Math.min(e.count||3,S.length))})}}if(!m)return{newPlayerStates:r,additionalEffects:[]};if(e.type==="SINGLE_MOVE"){const y=CP(l,m.drones[0],m.fromLane,m.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:y.newPlayerState},additionalEffects:[]}}else{const y=SP(l,m.drones,m.fromLane,m.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:y.newPlayerState},additionalEffects:[]}}},wI=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},f=u[n],d=yt.find(g=>g.name===e.tokenName),m=[];return d?(e.locations.forEach(g=>{const y={...d,id:`${e.tokenName}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:d.name,attack:d.attack,hull:d.hull,shields:d.shields,speed:d.speed,currentShields:d.shields,currentMaxShields:d.shields,isExhausted:!1,isToken:!0,abilities:d.abilities?JSON.parse(JSON.stringify(d.abilities)):[]};f.dronesOnBoard[g].push(y),m.push({type:"TELEPORT",targetId:y.id,targetPlayer:n,targetLane:g,timestamp:Date.now()}),s&&typeof s=="function"&&s({action:`${f.name} created a ${e.tokenName} token in ${g}`,player:f.name})}),{newPlayerStates:u,additionalEffects:[],animationEvents:m}):(console.error(`Token drone ${e.tokenName} not found in drone collection`),{newPlayerStates:u,additionalEffects:[],animationEvents:[]})},DP=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return yv(e,t,n,"player1",r,i);case"DAMAGE":return Pp(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},OP=(e,t,n,r,i,s,l)=>{const u={name:t};switch(e.type){case"DAMAGE":return Pp(e,u,n,l,r,i,s);case"RECALL_DRONE":return _P(e,t,n,r,i,s,l);case"DRAW_THEN_DISCARD":return vv(e,u,n,l,r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},_P=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},f=l==="player1"?"player2":"player1",d=ir(n,u[l]);if(d){const m=u[l].dronesOnBoard[d].find(y=>y.id===n);if(!m)return console.warn(" [RECALL DEBUG] Drone not found in lane:",n,"lane:",d),{newPlayerStates:u,additionalEffects:[],animationEvents:[]};u[l].dronesOnBoard[d]=u[l].dronesOnBoard[d].filter(y=>y.id!==n),Object.assign(u[l],hP(u[l],m)),u[l].dronesOnBoard=kl(u[l],u[f],i);const g=[{type:"TELEPORT_OUT",targetId:n,laneId:d,playerId:l,timestamp:Date.now()}];return{newPlayerStates:u,additionalEffects:[],animationEvents:g}}return{newPlayerStates:u,additionalEffects:[],animationEvents:[]}},NP=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:f,interceptor:d,attackingPlayer:m,abilityDamage:g,goAgain:y,damageType:b,lane:S,aiContext:C}=e,E=g!==void 0,w=d||u,T=d?"drone":f,D=m,O=w.owner||(D==="player1"?"player2":"player1"),j=t[D],N=t[O];let k=null,B=null;!E&&l&&l.id&&(k=ir(l.id,j),B=or(l,k,j,N,n));let F=g??(B?Math.max(0,B.attack):0),M=b||(l?l.damageType:void 0);B&&B.keywords&&B.keywords.has("PIERCING")&&(M="PIERCING"),T==="section"&&!g&&l&&l.name&&yt.find(te=>te.name===l.name)?.abilities?.forEach(te=>{te.type==="PASSIVE"&&te.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(F+=te.effect.value)});let R=0,z=0,W=!1,Z=0,Q=0;if(T==="drone"){let V=null;for(const te in N.dronesOnBoard)if(V=N.dronesOnBoard[te].find(ve=>ve.id===w.id),V)break;if(V){let te=F;M!=="PIERCING"&&(R=Math.min(F,V.currentShields),te-=R),z=Math.min(te,V.hull),W=V.hull-z<=0,Z=V.currentShields-R,Q=W?0:V.hull-z}}else{const V=N.shipSections[w.name];if(V){let te=F;M!=="PIERCING"&&(R=Math.min(F,V.allocatedShields),te-=R),z=Math.min(te,V.hull),W=V.hull-z<=0,Z=V.allocatedShields-R,Q=W?0:V.hull-z}}const I=`Dealt ${R} shield and ${z} hull damage to ${w.name}.`+(T==="drone"?W?` ${w.name} Destroyed.`:` ${w.name} has ${Z} shields and ${Q} hull left.`:""),G=[];if(l&&l.id&&!E&&G.push({type:"DRONE_ATTACK_START",sourceId:l.id,sourcePlayer:D,sourceLane:k,targetId:w.id,targetPlayer:O,targetLane:T==="drone"?ir(w.id,N):null,targetType:T,attackValue:B?B.attack:1,timestamp:Date.now()}),R>0){const V={type:"SHIELD_DAMAGE",targetId:w.id,targetPlayer:O,targetLane:T==="drone"?ir(w.id,N):null,targetType:T,amount:R,timestamp:Date.now()};G.push(V)}if(W){const V={type:T==="drone"?"DRONE_DESTROYED":"SECTION_DESTROYED",targetId:w.id,targetPlayer:O,targetLane:T==="drone"?ir(w.id,N):null,targetType:T,timestamp:Date.now()};G.push(V)}else{if(z>0){const V={type:"HULL_DAMAGE",targetId:w.id,targetPlayer:O,targetLane:T==="drone"?ir(w.id,N):null,targetType:T,amount:z,timestamp:Date.now()};G.push(V)}T==="section"&&(R>0||z>0)&&G.push({type:"SECTION_DAMAGED",targetId:w.id,targetPlayer:O,targetType:"section",timestamp:Date.now()}),l&&l.id&&!E&&G.push({type:"DRONE_RETURN",sourceId:l.id,sourcePlayer:D,sourceLane:k,timestamp:Date.now()})}const ie=k||(S?S.replace("lane","Lane "):null),le=T==="drone"?`${w.name} (${ie})`:w.name,$=l&&l.name?`${l.name} (${ie})`:"Card Effect";r&&r({player:t[D].name,actionType:"ATTACK",source:$,target:le,outcome:I},"resolveAttack",C);const q={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(T==="drone"){let V=!1;for(const te in q[O].dronesOnBoard){const ve=q[O].dronesOnBoard[te].findIndex(Se=>Se.id===w.id);if(ve!==-1){if(q[O].dronesOnBoard[te][ve].hull-z<=0){V=!0;const Se=q[O].dronesOnBoard[te][ve];q[O].dronesOnBoard[te]=q[O].dronesOnBoard[te].filter(Ee=>Ee.id!==w.id),Object.assign(q[O],vl(q[O],Se))}else q[O].dronesOnBoard[te][ve].hull-=z,q[O].dronesOnBoard[te][ve].currentShields-=R;break}}if(V){const te=O==="player1"?q.player2:q.player1;q[O].dronesOnBoard=kl(q[O],te,n)}}else{q[O].shipSections[w.name].hull-=z,q[O].shipSections[w.name].allocatedShields-=R;const V=O==="player1"?n.player1:n.player2,te=La(q[O],V).totals;q[O].energy>te.maxEnergy&&(q[O].energy=te.maxEnergy)}if(!E&&l&&l.id){let V=!1;for(const te in q[D].dronesOnBoard){const ve=q[D].dronesOnBoard[te].findIndex(Se=>Se.id===l.id);if(ve!==-1){q[D].dronesOnBoard[te][ve].isExhausted=!0,V=!0;break}}if(V){const te=gP(q[D],l,D);q[D]=te.newState,te.animationEvents&&te.animationEvents.length>0&&G.push(...te.animationEvents),te.effects.forEach(ve=>{ve.type==="LOG"&&r&&r(ve.payload,"afterAttack")})}}if(d){const V=D==="player1"?"player2":"player1";for(const te in q[V].dronesOnBoard){const ve=q[V].dronesOnBoard[te].findIndex(Se=>Se.id===d.id);if(ve!==-1){or(q[V].dronesOnBoard[te][ve],te,q[V],q[D],n).keywords.has("DEFENDER")||(q[V].dronesOnBoard[te][ve].isExhausted=!0);break}}}return{newPlayerStates:q,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:k||S,targetName:w.name,targetType:T,interceptorName:d?d.name:null,shieldDamage:R,hullDamage:z,wasDestroyed:W,remainingShields:Z,remainingHull:Q,outcome:I,shouldEndTurn:!y},animationEvents:G}},PI=(e,t)=>{const n=La(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},Tp=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),TI=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},DI=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},OI=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},_I=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},NI=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(f=>f.instanceId===l.instanceId||f.name===l.name&&f.id===l.id);if(u!==-1&&s<t){const f=r.splice(u,1)[0];i.push(f),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),f=r.splice(u,1)[0];i.push(f),s++}return{...e,hand:r,discardPile:i,discardCount:s}},jP=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const f=parseInt(u.replace("lane",""),10);Math.abs(l-f)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const f=parseInt(u.replace("lane",""),10);Math.abs(l-f)===1&&s.push({id:u,owner:"player1"})})}return s},kP=(e,t)=>t.activeDronePool.map(n=>{const r=yt.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),MP=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},jI=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=du("player1",e.drone,e.ability,i,s):t?l=du("player1",{id:t.sectionName},t.ability,i,s):n?u=jP(n,i):r&&(r.type==="Upgrade"?u=kP(r,i):r.effect.type==="MULTI_MOVE"?u=MP(n,i):u=du("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},kI=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),MI=(e,t,n,r)=>{const i=gv(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},Le={initialPlayerState:FM,buildDeckFromList:pP,createCard:dP,getEffectiveSectionMaxShields:hv,getShipStatus:os,onDroneDestroyed:vl,onDroneRecalled:hP,checkWinCondition:l0,calculateAfterAttackStateAndEffects:gP,applyOnMoveEffects:mP,updateAuras:kl,getLaneOfDrone:ir,getValidTargets:du,calculateAllValidTargets:jI,calculateMultiSelectTargets:jP,calculateUpgradeTargets:kP,calculateMultiMoveTargets:MP,validateDeployment:yP,validateShieldRemoval:vP,validateShieldAddition:mv,executeShieldReallocation:VM,getValidShieldReallocationTargets:KM,processShieldAllocation:WM,processResetShieldAllocation:XM,processEndShieldAllocation:QM,resolveAttack:NP,resolveAbility:JM,resolveShipAbility:ZM,executeDeployment:bP,resolveCardPlay:uI,payCardCosts:AP,finishCardPlay:wP,resolveMultiMove:SP,resolveSingleMove:CP,checkGameStateForWinner:eI,calculatePotentialInterceptors:tI,calculateAiInterception:rI,calculateTurnTransition:gv,calculatePassTransition:aI,readyDronesAndRestoreShields:xP,calculateNewRoundPlayerState:c0,drawToHandLimit:u0,drawPlayerCards:PI,determineFirstPlayer:Tp,enforceHandLimit:TI,checkHandLimitCompliance:DI,checkHandLimitViolations:OI,enforceHandLimits:_I,processDiscardPhase:NI,processTurnTransition:iI,processPhaseChange:sI,processRoundStart:oI,createExplosionEffect:kI,createTurnEndEffects:MI,resolveUnifiedDamageEffect:Pp,resolveUnifiedHealEffect:yv,resolveUnifiedDrawEffect:vv,resolveSearchAndDrawEffect:TP,resolveDroneAbilityEffect:DP,resolveShipAbilityEffect:OP,resolveShipRecallEffect:_P,executeAiDeployment:nI,executeAiTurn:lI,executeAiAction:cI},fl=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:Le,startingDecklist:ml,startingDroneList:fP},Symbol.toStringTag,{value:"Module"}));class II{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){this.cache.size,this.cache.clear(),this.stats.invalidations++}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r))}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const RI=new II;class on{static instance=null;static getInstance(t){return on.instance||(on.instance=new on(t)),on.instance}static reset(){on.instance&&on.instance.stateSubscriptionCleanup&&on.instance.stateSubscriptionCleanup(),on.instance=null}constructor(t){if(on.instance)return console.warn(" GameDataService already exists. Use getInstance() instead of new GameDataService()"),on.instance;this.gameStateManager=t,this.cache=RI,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()})}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),f=s[l],d=s[u],m=this.getPlacedSectionsForEngine(),g=this.isDroneOwnedByPlayer(t,f),S=or(t,n,g?f:d,g?d:f,m);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=La(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(d=>({...d,effectiveStats:this.getEffectiveStats(d,t),isPlayer:!0})),f=(l.dronesOnBoard[t]||[]).map(d=>({...d,effectiveStats:this.getEffectiveStats(d,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:f,hasGuardian:this.hasGuardianInLane(t,f)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const LI=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"}));class $I{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,s=null){this.isInitialized||(this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&!this.gameDataService&&(this.gameDataService=on.getInstance(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&(this.stateSubscriptionCleanup=s.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,K("AI_DECISIONS"," AIPhaseProcessor initialized with personality:",r?.name||"Default"))}cleanup(){this.turnTimer&&(clearTimeout(this.turnTimer),this.turnTimer=null),this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.isProcessing=!1,this.isInitialized=!1}async processDroneSelection(t=null){const i=this.gameStateManager.getState().commitments?.deckSelection;if(!i||!i.player2)throw new Error("AI deck commitment not found - deckSelection phase must complete first");const s=i.player2.drones||[];if(K("AI_DECISIONS",` AI deck contains ${s.length} drones:`,s.join(", ")),s.length<5||s.length>10)throw new Error(`AI deck must have 5-10 drones, found ${s.length}`);const l=this.extractDronesFromDeck(s);if(l.length<5)throw console.error(" Failed to extract minimum required drones from deck"),new Error(`Only extracted ${l.length} drones from AI deck (minimum 5 required)`);const u=this.randomlySelectDrones(l,5),f=u.map(d=>d.name).join(", ");return K("AI_DECISIONS",` AI randomly selected 5 drones from ${l.length} available: ${f}`),u}extractDronesFromDeck(t){return t.map(r=>{const i=this.dronePool?.find(s=>s.name===r);return i||console.warn(` Drone "${r}" not found in drone collection`),i}).filter(Boolean)}randomlySelectDrones(t,n){return[...t].sort(()=>.5-Math.random()).slice(0,n)}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(f=>n.preferredDrones.includes(f.name)),u=Math.min(3,l.length);r=l.slice(0,u),K("AI_DECISIONS",` AI selected ${r.length} preferred drones:`,r.map(f=>f.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((f,d)=>{const m=(f.energyCost||1)+(f.health||0)+(f.attack||0);return(d.energyCost||1)+(d.health||0)+(d.attack||0)-m});const l=r?.aggression||.5,u=r?.economy||.5;for(let f=0;f<n&&s.length>0;f++){let d=0;if(l>.7)d=s.findIndex(m=>(m.attack||0)>2),d===-1&&(d=0);else if(u>.7)d=s.findIndex(m=>(m.energyCost||1)<=2),d===-1&&(d=0);else{const m=Math.min(3,s.length);d=Math.floor(Math.random()*m)}i.push(s.splice(d,1)[0])}return K("AI_DECISIONS",` AI balanced selection (${n}):`,i.map(f=>f.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;let r=[];if(n&&n.decklist&&n.decklist.length>0){K("AI_DECISIONS",` Using ${n.name} personality decklist`);const{gameEngine:l}=await Sr(async()=>{const{gameEngine:u}=await Promise.resolve().then(()=>fl);return{gameEngine:u}},void 0);r=l.buildDeckFromList(n.decklist)}else{const{gameEngine:l,startingDecklist:u}=await Sr(async()=>{const{gameEngine:f,startingDecklist:d}=await Promise.resolve().then(()=>fl);return{gameEngine:f,startingDecklist:d}},void 0);r=l.buildDeckFromList(u)}let i=[];if(n&&n.dronePool&&Array.isArray(n.dronePool)){if(i=[...n.dronePool],K("AI_DECISIONS",` Using ${n.name} personality dronePool: ${i.length} drones`),i.length<5)throw new Error(`AI personality '${n.name}' has only ${i.length} drones in dronePool. Minimum 5 required.`);if(i.length>10)throw new Error(`AI personality '${n.name}' has ${i.length} drones in dronePool. Maximum 10 allowed.`)}else{const{startingDroneList:l}=await Sr(async()=>{const{startingDroneList:u}=await Promise.resolve().then(()=>fl);return{startingDroneList:u}},void 0);i=[...l]}return K("AI_DECISIONS",` AI selected deck: ${r.length} cards + ${i.length} drones`),K("AI_DECISIONS",` AI drones: ${i.join(", ")}`),{deck:r,drones:i,shipComponents:{BRIDGE_001:"l",POWERCELL_001:"m",DRONECONTROL_001:"r"}}}async processPlacement(t=null){const n=t||this.currentAIPersonality,r=["bridge","powerCell","droneControlHub"];K("AI_DECISIONS",` AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n);return i.join(", "),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7)return this.arrangeAggressivePlacement(r);if(n.economy>.7)return this.arrangeEconomicPlacement(r)}return this.arrangeBalancedPlacement(r)}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(f=>f===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(f=>f===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(f=>f===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Sr(async()=>{const{aiBrain:s}=await import("./aiLogic-C_w8E1k0.js");return{aiBrain:s}},[]),{gameEngine:r}=await Sr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>fl);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await Sr(async()=>{const{aiBrain:s}=await import("./aiLogic-C_w8E1k0.js");return{aiBrain:s}},[]),{gameEngine:r}=await Sr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>fl);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});return i.type==="pass"?(await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}),null):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await Sr(async()=>{const{gameEngine:d}=await Promise.resolve().then(()=>fl);return{gameEngine:d}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},f=[];if(u.hand.length>l){const d=u.hand.length-l;f=u.hand.slice(0,d),u={...u,hand:u.hand.slice(d),discardPile:[...u.discardPile,...f]}}return u=n.drawToHandLimit(u,l),u.hand.length-(r.hand.length-f.length),{type:"optionalDiscard",cardsToDiscard:f,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];const f=n.hand.reduce((m,g)=>(m[g.cost]||(m[g.cost]=[]),m[g.cost].push(g),m),{}),d=Object.keys(f).map(Number).sort((m,g)=>m-g);for(const m of d){const g=[...f[m]].sort(()=>.5-Math.random());if(u.push(...g),u.length>=l)break}return u=u.slice(0,l),K("AI_DECISIONS",` AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let f=[];const d=t.player1,m=(b,S)=>b.reduce((C,E)=>{const w=this.gameDataService.getEffectiveStats(E,S);return C+(w.attack||0)+(w.hull||0)},0),g={lane1:m(n.dronesOnBoard.lane1||[],"lane1")-m(d.dronesOnBoard.lane1||[],"lane1"),lane2:m(n.dronesOnBoard.lane2||[],"lane2")-m(d.dronesOnBoard.lane2||[],"lane2"),lane3:m(n.dronesOnBoard.lane3||[],"lane3")-m(d.dronesOnBoard.lane3||[],"lane3")},y=[];return Object.entries(n.dronesOnBoard||{}).forEach(([b,S])=>{S.forEach(C=>{y.push({...C,lane:b,laneScore:g[b]})})}),y.sort((b,S)=>S.laneScore!==b.laneScore?S.laneScore-b.laneScore:b.class-S.class),f=y.slice(0,u),K("AI_DECISIONS",` AI removing ${f.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:f,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return!!(t.passInfo&&t.passInfo["player2Passed"])}async executePass(t){return{type:"pass",phase:t,playerId:"player2"}}async executeShieldAllocationTurn(t){if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");t.player2;const n=t.opponentPlacedSections,r=t.opponentShieldsToAllocate||0;if(r===0||n.length===0)return;let i=r,s=0;for(K("AI_DECISIONS",` AI distributing ${r} shields evenly across ${n.length} sections`);i>0;){const l=n[s];await this.actionProcessor.processAddShield({sectionName:l,playerId:"player2"}),i--,s=(s+1)%n.length}}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||t.winner||t.gameStage==="gameOver"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(K("AI_DECISIONS",` AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn()},1500)))}async executeTurn(){if(this.isProcessing)return;const t=this.gameStateManager.getState();if(!(t.currentPlayer!=="player2"||t.passInfo&&t.passInfo.player2Passed||!["deployment","action"].includes(t.turnPhase))){this.isProcessing=!0;try{K("AI_DECISIONS",` AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let r;if(t.turnPhase==="deployment")r=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")r=await this.executeActionTurn(t);else{console.warn(` AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}if(r?.needsInterceptionDecision){K("AI_DECISIONS"," AIPhaseProcessor: AI attack needs human interception decision, pausing turn loop"),this.isProcessing=!1;return}const i=this.gameStateManager.getState();i.currentPlayer==="player2"&&i.passInfo&&!i.passInfo.player2Passed&&(K("AI_DECISIONS"," AIPhaseProcessor: AI continues taking turns (either human passed or goAgain card played)"),setTimeout(()=>{this.checkForAITurn(i)},100))}catch(r){console.error(" AIPhaseProcessor: Error executing turn:",r)}finally{this.isProcessing=!1}}}async makeInterceptionDecision(t,n){if(!this.isInitialized)throw new Error("AIPhaseProcessor not initialized");K("AI_DECISIONS"," AIPhaseProcessor.makeInterceptionDecision called:",{interceptorCount:t?.length||0,target:n.target?.name});const{aiBrain:r}=await Sr(async()=>{const{aiBrain:s}=await import("./aiLogic-C_w8E1k0.js");return{aiBrain:s}},[]),i=r.makeInterceptionDecision(t,n.target);return K("AI_DECISIONS"," AI interception decision:",{willIntercept:!!i.interceptor,interceptorName:i.interceptor?.name}),i}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,interception:!0,version:"1.3.0"}}}const Cr=new $I;class di{static instance=null;static getInstance(t){return di.instance||(di.instance=new di(t)),di.instance}static reset(){di.instance=null}constructor(t){if(di.instance)return console.warn(" ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),di.instance;this.gameStateManager=t,this.gameDataService=on.getInstance(t),this.animationManager=null,this.pendingActionAnimations=[],this.pendingSystemAnimations=[],this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1}}setP2PManager(t){this.p2pManager=t}setAnimationManager(t){this.animationManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1,this.actionQueue.length>0&&this.processQueue()}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const f=`${u}Passed`;if(s.passInfo[f])throw new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"move":return await this.processMove(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"movementCompletion":return await this.processMovementCompletion(r);case"searchAndDrawCompletion":return await this.processSearchAndDrawCompletion(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeDeploymentComplete":return await this.acknowledgeDeploymentComplete(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);case"destroyDrone":return await this.processDestroyDrone(r);case"addShield":return await this.processAddShield(r);case"resetShields":return await this.processResetShields(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{i||this.broadcastStateToGuest(),this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections};let s={...n};if(n.interceptor===void 0){const g=Le.calculateAiInterception(n,{player1:r.player1,player2:r.player2},i);if(g.hasInterceptors){const y=n.attackingPlayer==="player1"?"player2":"player1";if(this.gameStateManager.setState({interceptionPending:{attackDetails:n,defendingPlayerId:y,attackingPlayerId:n.attackingPlayer,interceptors:g.interceptors,timestamp:Date.now()}}),y==="player2"&&r.gameMode==="local"){if(await new Promise(b=>setTimeout(b,1e3)),this.aiPhaseProcessor){const b=await this.aiPhaseProcessor.makeInterceptionDecision(g.interceptors,n);K("COMBAT"," [INTERCEPTION] AI decision:",b.interceptor?"INTERCEPT":"DECLINE"),b.interceptor&&(s.interceptor=b.interceptor,this.gameStateManager.setState({lastInterception:{interceptor:b.interceptor,originalTarget:n.target,timestamp:Date.now()}}))}this.gameStateManager.setState({interceptionPending:null})}else return{needsInterceptionDecision:!0,interceptionData:{interceptors:g.interceptors,attackDetails:g.attackDetails}}}}const l=g=>{this.gameStateManager.addLogEntry(g,"resolveAttack",s.attackingPlayer==="player2"?s.aiContext:null)},u=()=>{},f=()=>{},d=Le.resolveAttack(s,{player1:r.player1,player2:r.player2},i,l,u,f),m=(d.animationEvents||[]).map(g=>({animationName:g.type,payload:{...g,droneId:g.sourceId}}));return K("COMBAT","[ANIMATION EVENTS] ActionProcessor received:",d.animationEvents),K("COMBAT"," [AI ANIMATION DEBUG] Built animations array:",{count:m.length,animations:m.map(g=>({name:g.animationName,sourceId:g.payload.sourceId,targetId:g.payload.targetId})),hasAnimationManager:!!this.animationManager}),await this.executeAndCaptureAnimations(m),this.gameStateManager.setPlayerStates(d.newPlayerStates.player1,d.newPlayerStates.player2),r.interceptionPending&&this.gameStateManager.setState({interceptionPending:null}),this.checkWinCondition(),d.attackResult&&d.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),d}async processMove(t){const{droneId:n,fromLane:r,toLane:i,playerId:s}=t,u=this.gameStateManager.getState()[s];if(!u)throw new Error(`Player ${s} not found`);const f=u.dronesOnBoard[r].findIndex(g=>g.id===n);if(f===-1)throw new Error(`Drone ${n} not found in ${r}`);const d=u.dronesOnBoard[r][f],m={...u.dronesOnBoard,[r]:u.dronesOnBoard[r].filter(g=>g.id!==n),[i]:[...u.dronesOnBoard[i],{...d,isExhausted:!0}]};return this.gameStateManager.updatePlayerState(s,{dronesOnBoard:m}),this.gameStateManager.addLogEntry({player:u.name,actionType:"MOVE",source:d.name,target:i.replace("lane","Lane "),outcome:`Moved from ${r.replace("lane","Lane ")} to ${i.replace("lane","Lane ")}.`}),K("COMBAT",` Moved ${d.name} from ${r} to ${i}`),await this.processTurnTransition({newPlayer:s==="player1"?"player2":"player1"}),{success:!0,message:`${d.name} moved from ${r} to ${i}`,drone:d,fromLane:r,toLane:i}}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let f=null,d=null;if(Object.values(l).forEach(C=>{Object.values(C.dronesOnBoard).forEach(E=>{E.forEach(w=>{w.id===n&&(f=w),w.id===i&&(d=w)})})}),i&&typeof i=="string"&&i.startsWith("lane")&&!d&&(d={id:i}),!f||!f.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const m=f.abilities[r],g=C=>{this.gameStateManager.addLogEntry(C,"resolveAbility")},y=async C=>await this.processAttack({attackDetails:C}),b=Le.resolveAbility(m,f,d,l,u,g,y),S=(b.animationEvents||[]).map(C=>({animationName:C.type,payload:{...C,droneId:C.sourceId}}));if(await this.executeAndCaptureAnimations(S),this.gameStateManager.setPlayerStates(b.newPlayerStates.player1,b.newPlayerStates.player2),this.checkWinCondition(),b.shouldEndTurn){const C=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:C.currentPlayer==="player1"?"player2":"player1"})}return b}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t;K("DEPLOYMENT"," ActionProcessor.processDeployment: Received payload:",{droneDataName:n?.name});const l=this.gameStateManager.getState(),u=l[i],d=l[i==="player1"?"player2":"player1"],m={player1:l.placedSections,player2:l.opponentPlacedSections},g=b=>{this.gameStateManager.addLogEntry(b)},y=Le.executeDeployment(n,r,s||l.turn,u,d,m,g,i);if(y.success){const b=y.deployedDrone?.id||n.id,S=(y.animationEvents||[]).map(D=>({animationName:D.type,payload:{...D,droneId:D.targetId}})),C={...y.newPlayerState,dronesOnBoard:{...y.newPlayerState.dronesOnBoard,[r]:y.newPlayerState.dronesOnBoard[r].map(D=>D.id===b?{...D,isTeleporting:!0}:D)}};i==="player1"?this.gameStateManager.updatePlayers(C,{}):this.gameStateManager.updatePlayers({},C),await new Promise(D=>setTimeout(D,50));const E=this.executeAndCaptureAnimations(S),w=this.animationManager?.animations?.TELEPORT_IN||{duration:600,config:{revealAt:.7}},T=w.duration*(w.config?.revealAt||.7);setTimeout(()=>{i==="player1"?this.gameStateManager.updatePlayers(y.newPlayerState,{}):this.gameStateManager.updatePlayers({},y.newPlayerState)},T),await E,await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})}return y}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let f=null;if(r){for(const y of["player1","player2"]){for(const b of["lane1","lane2","lane3"]){const C=(l[y].dronesOnBoard[b]||[]).find(E=>E.id===r);if(C){f={...C,owner:y};break}}if(f)break}if(!f)for(const y of["player1","player2"]){const b=l[y].shipSections;if(b[r]){f={...b[r],name:r,owner:y};break}}!f&&r&&r.startsWith("lane")&&(f={id:r})}const d={logCallback:y=>this.gameStateManager.addLogEntry(y),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async y=>await this.processAttack(y)},m=Le.resolveCardPlay(n,f,i,l,u,d);K("CARDS","[ANIMATION EVENTS] Card play events:",m.animationEvents);const g=(m.animationEvents||[]).map(y=>({animationName:y.type,payload:{...y,droneId:y.sourceId||y.targetId}}));if(await this.executeAndCaptureAnimations(g),this.gameStateManager.setPlayerStates(m.newPlayerStates.player1,m.newPlayerStates.player2),this.checkWinCondition(),m.shouldEndTurn){const y=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:y.currentPlayer==="player1"?"player2":"player1"})}return m}async processMovementCompletion(t){const{card:n,movementType:r,drones:i,fromLane:s,toLane:l,playerId:u}=t,f=this.gameStateManager.getState(),d=Le.payCardCosts(n,u,{player1:f.player1,player2:f.player2}),m={player1:f.placedSections,player2:f.opponentPlacedSections},g={logCallback:S=>this.gameStateManager.addLogEntry(S),applyOnMoveEffectsCallback:Le.applyOnMoveEffects,updateAurasCallback:Le.updateAuras};let y;if(r==="single_move"){y=Le.resolveSingleMove(n,i[0],s,l,d[u],d[u==="player1"?"player2":"player1"],m,g);const S={...d,[u]:y.newPlayerState};this.gameStateManager.setPlayerStates(S.player1,S.player2)}else{y=Le.resolveMultiMove(n,i,s,l,d[u],d[u==="player1"?"player2":"player1"],m,g);const S={...d,[u]:y.newPlayerState};this.gameStateManager.setPlayerStates(S.player1,S.player2)}const b=[{animationName:"CARD_REVEAL",payload:{cardId:n.id,cardName:n.name,cardData:n,actingPlayerId:u,timestamp:Date.now()}}];if(await this.executeAndCaptureAnimations(b),y.shouldEndTurn){const S=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:S.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:y.shouldEndTurn}}async processSearchAndDrawCompletion(t){const{card:n,selectedCards:r,selectionData:i,playerId:s}=t,l=this.gameStateManager.getState(),{searchedCards:u,remainingDeck:f,discardPile:d,shuffleAfter:m}=i,g=Le.payCardCosts(n,s,{player1:l.player1,player2:l.player2}),y=u.filter(D=>{const O=D.instanceId||`${D.id}-${D.name}`;return!r.some(j=>(j.instanceId||`${j.id}-${j.name}`)===O)}),b=g[s],S=[...b.hand,...r];let C=[...f,...y];m&&(C=C.sort(()=>.5-Math.random()));const E={...b,deck:C,hand:S,discardPile:d},w={player1:s==="player1"?E:g.player1,player2:s==="player2"?E:g.player2},T=Le.finishCardPlay(n,s,w);if(this.gameStateManager.addLogEntry({player:b.name,actionType:"CARD_SELECTION",source:n.name,target:`Selected ${r.length} cards`,outcome:`Drew: ${r.map(D=>D.name).join(", ")}`},"processSearchAndDrawCompletion"),this.gameStateManager.setPlayerStates(T.newPlayerStates.player1,T.newPlayerStates.player2),T.shouldEndTurn){const D=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:D.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:T.shouldEndTurn,newPlayerStates:T.newPlayerStates}}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},f={player1:l.placedSections,player2:l.opponentPlacedSections},d={logCallback:y=>this.gameStateManager.addLogEntry(y),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async y=>await this.processAttack(y)},m=Le.resolveShipAbility(n,r,i,u,f,d,s),g=(m.animationEvents||[]).map(y=>({animationName:y.type,payload:{...y,droneId:y.sourceId}}));if(await this.executeAndCaptureAnimations(g),this.gameStateManager.setPlayerStates(m.newPlayerStates.player1,m.newPlayerStates.player2),m.shouldEndTurn){const y=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:y.currentPlayer==="player1"?"player2":"player1"})}return m}checkWinCondition(){const t=this.gameStateManager.getState();if(t.winner)return null;const n={player1:t.player1,player2:t.player2},r={logCallback:s=>{this.gameStateManager.addLogEntry(s,"checkWinCondition")},setWinnerCallback:s=>{this.gameStateManager.setWinner(s)},showWinnerModalCallback:()=>{}};return Le.checkGameStateForWinner(n,r)}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t,i=this.gameStateManager.getState();K("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=Le.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&this.gameStateManager.setTurnPhase(n),r){const u=this.gameStateManager.getState();let f=r;u.passInfo&&u.passInfo[`${r}Passed`]&&(f=u.currentPlayer),this.gameStateManager.setCurrentPlayer(f)}const l=this.gameStateManager.getState();return K("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return{success:!0,message:"Already in phase"};K("PHASE_TRANSITIONS",`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(["deployment","action"].includes(n)&&(s.currentPlayer=i.firstPlayerOfRound,K("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Sequential phase: Setting currentPlayer to firstPlayerOfRound: ${i.firstPlayerOfRound}`)),n==="allocateShields"){const d=this.gameStateManager.getLocalPlayerId(),m=i[d],y=this.gameDataService.getEffectiveShipStats(m,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=y}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(n),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1});const u={determineFirstPlayer:"DETERMINING FIRST PLAYER",energyReset:"ENERGY RESET",mandatoryDiscard:"MANDATORY DISCARD PHASE",optionalDiscard:"OPTIONAL DISCARD PHASE",draw:"DRAW PHASE",allocateShields:"ALLOCATE SHIELDS",mandatoryDroneRemoval:"REMOVE EXCESS DRONES",deployment:"DEPLOYMENT PHASE",deploymentComplete:"DEPLOYMENT COMPLETE",action:"ACTION PHASE"};if(u[n]&&this.animationManager){const d={phaseText:u[n],phaseName:n,timestamp:Date.now()};(n==="deployment"||n==="action")&&(d.firstPlayerId=i.firstPlayerOfRound);const m={animationName:"PHASE_ANNOUNCEMENT",payload:d};await this.executeAndCaptureAnimations([m],!0)}K("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase}  ${n}`);const f=this.gameStateManager.getState();return K("PHASE_TRANSITIONS",`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:f.turnPhase,placedSections:f.placedSections,opponentPlacedSections:f.opponentPlacedSections}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t,s=this.gameStateManager.getState(),l=i||Le.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),f=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),d=Le.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),m=Le.calculateNewRoundPlayerState(s.player2,n,f,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,firstPasserOfPreviousRound:s.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(d,m),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:d,player2:m}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);const u=l[s];if(n==="remove"){const f=u.shipSections[r];if(!f||f.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const d={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},m={...u,shipSections:d};return this.gameStateManager.updatePlayerState(s,m),{success:!0,action:"remove",sectionName:r,newPlayerState:m}}else if(n==="add"){const f=s==="player1"?l.placedSections:l.opponentPlacedSections,d=Le.getEffectiveSectionMaxShields(r,u,f),m=u.shipSections[r];if(!m||m.allocatedShields>=d)return{success:!1,error:"Cannot add shield to this section"};const g={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},y={...u,shipSections:g};return this.gameStateManager.updatePlayerState(s,y),{success:!0,action:"add",sectionName:r,newPlayerState:y}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const f={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,f),{success:!0,action:"restore",newPlayerState:f}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return K("COMBAT"," [AI ANIMATION DEBUG] processAiAction attack case:",{attackerId:s.attacker?.id,targetId:s.target?.id,lane:s.attacker?.lane,targetType:s.targetType,hasAttackerObject:!!s.attacker,hasTargetObject:!!s.target}),await this.processAttack({attackDetails:{attacker:s.attacker,target:s.target,targetType:s.targetType||"drone",lane:s.attacker.lane,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":return await this.processMove({droneId:s.drone.id,fromLane:s.fromLane,toLane:s.toLane,playerId:"player2"});case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiDecision(t,n){switch(K("DEPLOYMENT",`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;K("DEPLOYMENT","[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return s.success&&await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attacker:l.attacker,target:l.target,targetType:l.targetType||"drone",lane:l.lane,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove({droneId:l.drone.id,fromLane:l.fromLane,toLane:l.toLane,playerId:n});break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u;case"pass":const f=this.gameStateManager.getState(),d=!f.passInfo[n==="player1"?"player2Passed":"player1Passed"];K("PASS_LOGIC","[AI DECISION DEBUG] Pass info before update:",f.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:f.passInfo.firstPasser||(d?n:null)});const m=this.gameStateManager.get("passInfo");return m.player1Passed&&m.player2Passed?f.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):f.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"}):await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t,r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processGuestAction(t){if(this.gameStateManager.get("gameMode")!=="host"){console.warn(" processGuestAction should only be called by host");return}const r=await this.queueAction({type:t.type,payload:t.payload,isNetworkAction:!0});return this.broadcastStateToGuest(),r}async executeAndCaptureAnimations(t,n=!1){if(!t||t.length===0)return;const r=this.gameStateManager.get("gameMode");if(r==="host"&&(n?this.pendingSystemAnimations.push(...t):this.pendingActionAnimations.push(...t)),this.animationManager){const i=r==="guest"?"GUEST_OPTIMISTIC":r==="host"?"HOST_LOCAL":"LOCAL";await this.animationManager.executeAnimations(t,i)}}getAndClearPendingActionAnimations(){const t=[...this.pendingActionAnimations];return this.pendingActionAnimations=[],t}getAndClearPendingSystemAnimations(){const t=[...this.pendingSystemAnimations];return this.pendingSystemAnimations=[],t}broadcastStateToGuest(){if(this.gameStateManager.get("gameMode")==="host"&&this.p2pManager&&this.p2pManager.isConnected){const n=this.gameStateManager.getState(),r=this.getAndClearPendingActionAnimations(),i=this.getAndClearPendingSystemAnimations();K("STATE_SYNC"," [ANIMATION BROADCAST] Sending state with animations:",{actionAnimationCount:r.length,systemAnimationCount:i.length,actionAnimations:r.map(s=>s.animationName),systemAnimations:i.map(s=>s.animationName)}),this.p2pManager.broadcastState(n,r,i)}}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=[{animationName:"PASS_NOTIFICATION",payload:{passingPlayerId:n}}];await this.executeAndCaptureAnimations(u);const f=`${l}Passed`,d=`${n}Passed`,m=!s[f],g={...s,[d]:!0,firstPasser:s.firstPasser||(m?n:null)};if(this.gameStateManager.setPassInfo(g,"ActionProcessor"),!(g.player1Passed&&g.player2Passed)){let b=null;n==="player1"&&!g.player2Passed?b="player2":n==="player2"&&!g.player1Passed&&(b="player1"),b&&this.gameStateManager.setState({currentPlayer:b},"TURN_SWITCH","playerPass")}return{success:!0,newPassInfo:g}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.error(" CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error(" CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r,isMandatory:i=!1,abilityMetadata:s=null}=t,l=this.gameStateManager.getState();if(!Array.isArray(r))throw new Error("Cards to discard must be an array");const u=l[n];if(!u)throw new Error(`Player ${n} not found`);r.forEach(m=>{this.gameStateManager.addLogEntry({player:u.name,actionType:i?"DISCARD_MANDATORY":"DISCARD_OPTIONAL",source:m.name,target:"N/A",outcome:`Discarded ${m.name}.`})});const f=u.hand.filter(m=>!r.some(g=>m.instanceId===g.instanceId)),d=[...u.discardPile,...r];if(this.gameStateManager.updatePlayerState(n,{hand:f,discardPile:d}),K("CARDS",`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),s){const m=[{animationName:"SHIP_ABILITY_REVEAL",payload:{abilityName:s.abilityName,sectionName:s.sectionName,actingPlayerId:s.actingPlayerId}}];await this.executeAndCaptureAnimations(m)}return{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await Sr(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-DlJvqHRO.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeDeploymentComplete(t){return await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}):n.commitments={},this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;if(this.gameStateManager.get("gameMode")==="guest")return console.warn(" Guest attempted processCommitment - should send to host instead"),{success:!1,error:"Guest cannot process commitments locally"};const l=this.gameStateManager.getState();l.commitments[r]||(l.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),l.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:l.commitments},"COMMITMENT_UPDATE");let u=l.commitments[r].player1.completed&&l.commitments[r].player2.completed;if(n==="player1"&&l.gameMode==="local"&&!u&&Cr)try{K("SHIELD_CLICKS"," Calling handleAICommitment..."),await this.handleAICommitment(r,l),K("COMMITMENTS"," AI commitment completed successfully"),K("SHIELD_CLICKS"," handleAICommitment returned successfully");const f=this.gameStateManager.getState();u=f.commitments[r].player1.completed&&f.commitments[r].player2.completed,K("COMMITMENTS",` Recalculated bothComplete after AI commit: ${u}`),K("SHIELD_CLICKS",` Both players complete: ${u}`)}catch(f){throw console.error(" AI commitment error:",f),f}return{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:u}}}async handleAICommitment(t,n){try{K("COMMITMENTS",` Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await Cr.processDroneSelection(),await this.processCommitment({playerId:"player2",phase:"droneSelection",actionData:{drones:r}});break;case"deckSelection":r=await Cr.processDeckSelection(),await this.processCommitment({playerId:"player2",phase:"deckSelection",actionData:{deck:r.deck,drones:r.drones,shipComponents:r.shipComponents}});break;case"placement":r=await Cr.processPlacement(),await this.processCommitment({playerId:"player2",phase:"placement",actionData:{placedSections:r}});break;case"mandatoryDiscard":if(r=await Cr.executeMandatoryDiscardTurn(n),r.cardsToDiscard.length>0){const i=n.player2,s=i.hand.filter(u=>!r.cardsToDiscard.some(f=>u.instanceId===f.instanceId)),l=[...i.discardPile,...r.cardsToDiscard];this.gameStateManager.updatePlayerState("player2",{hand:s,discardPile:l}),K("COMMITMENTS",` AI discarded ${r.cardsToDiscard.length} cards for mandatory discard`)}await this.processCommitment({playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}});break;case"optionalDiscard":r=await Cr.executeOptionalDiscardTurn(n),await this.processCommitment({playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}});break;case"allocateShields":K("SHIELD_CLICKS"," [HANDLE AI] About to call executeShieldAllocationTurn"),await Cr.executeShieldAllocationTurn(n),K("SHIELD_CLICKS"," [HANDLE AI] executeShieldAllocationTurn completed, now committing"),await this.processCommitment({playerId:"player2",phase:"allocateShields",actionData:{committed:!0}}),K("SHIELD_CLICKS"," [HANDLE AI] AI commitment complete");break;case"mandatoryDroneRemoval":if(r=await Cr.executeMandatoryDroneRemovalTurn(n),r.dronesToRemove.length>0){for(const i of r.dronesToRemove)await this.processDestroyDrone({droneId:i.id,playerId:"player2"});K("COMMITMENTS",` AI removed ${r.dronesToRemove.length} drones for mandatory drone removal`)}await this.processCommitment({playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}});break;case"determineFirstPlayer":await new Promise(i=>{setTimeout(async()=>{await this.processCommitment({playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}),i()},1e3)});break;case"deploymentComplete":K("COMMITMENTS"," AI will acknowledge deployment complete after 3 second delay (for testing)"),await new Promise(i=>{setTimeout(async()=>{await this.processCommitment({playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}),K("COMMITMENTS"," AI acknowledged deployment complete"),i()},3e3)});break;default:console.warn(` No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(` No commitments found for phase: ${t}`),{};const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((s,l)=>(s[l.name]=0,s),{})});break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,deckDronePool:r.player1.drones||[],selectedShipComponents:r.player1.shipComponents||{},discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,deckDronePool:r.player2.drones||[],selectedShipComponents:r.player2.shipComponents||{},discard:[]});break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),K("COMMITMENTS"," Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":break;case"mandatoryDiscard":case"optionalDiscard":break;case"allocateShields":break;case"deploymentComplete":break;case"determineFirstPlayer":break;default:console.warn(` No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}=t;return this.gameStateManager.setPlayerStates(n,r),i!==void 0&&this.gameStateManager.setState({shieldsToAllocate:i}),s!==void 0&&this.gameStateManager.setState({opponentShieldsToAllocate:s}),{success:!0,message:"Energy reset completed",player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}}async processDestroyDrone(t){const{droneId:n,playerId:r}=t;if(this.gameStateManager.get("gameMode")==="guest")return console.warn(" Guest attempted processDestroyDrone - should send to host instead"),{success:!1,error:"Guest cannot destroy drones locally"};const s=this.gameStateManager.getState(),l=s[r];if(!l)return{success:!1,error:`Player ${r} not found`};const u=Le.getLaneOfDrone(n,l);if(!u)return{success:!1,error:`Drone ${n} not found on board`};const f=l.dronesOnBoard[u].find(S=>S.id===n);if(!f)return{success:!1,error:`Drone ${n} not found in lane ${u}`};let d={...l,dronesOnBoard:{...l.dronesOnBoard}};d.dronesOnBoard[u]=d.dronesOnBoard[u].filter(S=>S.id!==n);const m=Le.onDroneDestroyed(d,f);Object.assign(d,m);const y=s[r==="player1"?"player2":"player1"],b={player1:s.placedSections,player2:s.opponentPlacedSections};return d.dronesOnBoard=Le.updateAuras(d,y,b),this.gameStateManager.updatePlayerState(r,d),{success:!0,message:`Drone destroyed from ${u}`,droneId:n,lane:u,droneName:f.name}}async processAddShield(t){const{sectionName:n,playerId:r}=t;if(this.gameStateManager.get("gameMode")==="guest")return console.warn(" Guest attempted processAddShield - should send to host instead"),{success:!1,error:"Guest cannot add shields locally"};const s=this.gameStateManager.getState(),l=r==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate",u=Le.processShieldAllocation({...s,shieldsToAllocate:s[l]},r,n);return u.success?(this.gameStateManager.updatePlayerState(r,u.newPlayerState),this.gameStateManager.setState({[l]:u.newShieldsToAllocate}),K("ENERGY",` Shield added to ${n}, ${u.newShieldsToAllocate} shields remaining`),{success:!0,message:`Shield added to ${n}`,sectionName:n,shieldsRemaining:u.newShieldsToAllocate}):(console.warn(` Shield allocation failed: ${u.error}`),u)}async processResetShields(t){const{playerId:n}=t;if(this.gameStateManager.get("gameMode")==="guest")return console.warn(" Guest attempted processResetShields - should send to host instead"),{success:!1,error:"Guest cannot reset shields locally"};const i=this.gameStateManager.getState(),s=Le.processResetShieldAllocation(i,n);if(!s.success)return console.warn(` Shield reset failed: ${s.error}`),s;this.gameStateManager.updatePlayerState(n,s.newPlayerState);const l=n==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate";return this.gameStateManager.setState({[l]:s.newShieldsToAllocate}),K("ENERGY",` Shield allocation reset, ${s.newShieldsToAllocate} shields available`),{success:!0,message:"Shield allocation reset",shieldsToAllocate:s.newShieldsToAllocate}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}class BI{constructor(t){this.gameStateManager=t,this.messageQueue=[],this.isProcessing=!1,this.renderCompletePromise=null,this.renderCompleteResolve=null}initialize(t){t.subscribe(n=>{n.type==="state_update_received"&&this.enqueueMessage(n)}),this.gameStateManager.subscribe(n=>{n.type==="render_complete"&&this.renderCompleteResolve&&(this.renderCompleteResolve(),this.renderCompleteResolve=null,this.renderCompletePromise=null)})}enqueueMessage(t){K("MULTIPLAYER"," [GUEST QUEUE] Enqueuing message:",{type:t.type,queueLength:this.messageQueue.length+1}),this.messageQueue.push(t),this.processQueue()}async processQueue(){if(this.isProcessing){K("MULTIPLAYER"," [GUEST QUEUE] Already processing, queue length:",this.messageQueue.length);return}for(this.isProcessing=!0;this.messageQueue.length>0;){const t=this.messageQueue.shift();K("MULTIPLAYER"," [GUEST QUEUE] Processing message:",{type:t.type,remaining:this.messageQueue.length}),await this.processMessage(t)}this.isProcessing=!1}async processMessage(t){switch(t.type){case"state_update_received":await this.processStateUpdate(t.data);break;default:console.warn(" [GUEST QUEUE] Unknown message type:",t.type)}}async processStateUpdate({state:t,actionAnimations:n,systemAnimations:r}){K("STATE_SYNC"," [GUEST QUEUE] Processing state update:",{turnPhase:t?.turnPhase,hasActionAnimations:n?.length>0,hasSystemAnimations:r?.length>0,actionAnimationCount:n?.length||0,systemAnimationCount:r?.length||0});const i=this.gameStateManager.hasRecentOptimisticActions();this.gameStateManager.optimisticActions?.length;let s=n||[];i&&n&&n.length>0&&(s=[]);const l=r||[],u=[...s,...l];K("ANIMATIONS"," [GUEST QUEUE] Animation filtering decision:",{incomingActionCount:n?.length||0,incomingSystemCount:r?.length||0,skippedActionCount:(n?.length||0)-s.length,systemAnimationsKept:l.length,totalToPlay:u.length});const f=u.length>0;let d=null;f&&(d=this.waitForRender()),this.gameStateManager.applyHostState(t),f&&d&&(await d,this.gameStateManager.actionProcessor?.animationManager&&await this.gameStateManager.actionProcessor.animationManager.executeAnimations(u,"HOST_RESPONSE"))}async waitForRender(){return this.renderCompletePromise?this.renderCompletePromise:(this.renderCompletePromise=new Promise(t=>{this.renderCompleteResolve=t}),this.renderCompletePromise)}getStatus(){return{queueLength:this.messageQueue.length,isProcessing:this.isProcessing,waitingForRender:!!this.renderCompletePromise}}}const HC=(e,t=3)=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const r=[...e.filter(l=>l.selectable!==!1)].sort(()=>.5-Math.random()),i=r.slice(0,t),s=r.slice(t);return K("DRONE_SELECTION",` Initialized drone selection: ${i.length} in initial selection, ${s.length} in pool`),K("DRONE_SELECTION",` Initial selection: ${i.map(l=>l.name).join(", ")}`),{droneSelectionTrio:i,droneSelectionPool:s}},zI=(e,t=3)=>{if(!e||e.length===0)return console.warn(" No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return K("DRONE_SELECTION",` Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),K("DRONE_SELECTION",` Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class UI{constructor(){this.listeners=new Set,this.optimisticActions=[],this.optimisticActionTimeout=5e3,this.state={appState:"menu",isConnected:!1,opponentId:null,gameMode:"local",testMode:!1,gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=di.getInstance(this),this.gameFlowManager=null,this.guestQueueService=null,this.p2pIntegrationSetup=!1,K("STATE_SYNC"," App State:",this.state.appState),K("STATE_SYNC"," Game Active:",this.state.gameActive)}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost),n.data.mode==="guest"&&!this.guestQueueService&&(this.guestQueueService=new BI(this),this.guestQueueService.initialize(t));break;case"state_update_received":this.state.gameMode==="guest"&&(this.guestQueueService||(console.warn(" [GUEST QUEUE] Service not initialized, applying state directly (fallback)"),this.applyHostState(n.data.state)));break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}applyHostState(t){if(this.state.gameMode!=="guest"){console.warn(" applyHostState should only be called in guest mode");return}K("STATE_SYNC","[GUEST STATE UPDATE] Applying state from host:",{turnPhase:t.turnPhase,currentPlayer:t.currentPlayer,roundNumber:t.roundNumber}),K("STATE_SYNC","[GUEST] Received player2 hand from host:",{handSize:t.player2?.hand?.length||0,sampleCard:t.player2?.hand?.[0]||null,sampleInstanceId:t.player2?.hand?.[0]?.instanceId,hasInstanceId:t.player2?.hand?.[0]?.instanceId!==void 0});const n=this.state.gameMode;this.state={...t},this.state.gameMode=n,K("STATE_SYNC","[GUEST] After applying state - player2 hand check:",{handSize:this.state.player2?.hand?.length||0,sampleCard:this.state.player2?.hand?.[0]||null,sampleInstanceId:this.state.player2?.hand?.[0]?.instanceId,hasInstanceId:this.state.player2?.hand?.[0]?.instanceId!==void 0}),this.emit("HOST_STATE_UPDATE",{hostState:t})}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),f=l.some(C=>C.includes("App.jsx")),d=l.some(C=>C.includes("ActionProcessor")),m=l.some(C=>C.includes("PhaseManager"));f&&!(d||m)&&(console.error(" ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error(" App.jsx should only call ActionProcessor or PhaseManager methods"),console.error(" Stack trace:",s));const y=Object.keys(t),b=`${u.primaryCaller} in ${u.primaryFile}`,S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,b,n),y.forEach(C=>{if(!["player1","player2"].includes(C)){const E=i[C],w=t[C];JSON.stringify(E),JSON.stringify(w)}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(g=>g in t),f=i&&i.includes("GameFlowManager"),d=r==="phaseTransition"||t.turnPhase&&f;u&&!(d&&f)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:f,isPhaseTransition:d,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(f=>{i.has(f.id)&&console.error(`Duplicate drone ID detected: ${f.id} in player${l+1}`),i.add(f.id)})})})}validateTurnPhaseTransition(t,n){if(this.state.testMode)return;({null:["deckSelection","preGame"],preGame:["deckSelection","droneSelection"],deckSelection:["droneSelection"],droneSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","deploymentComplete","roundEnd"],deploymentComplete:["action"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase)||(K("STATE_SYNC"," Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase)||["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],f=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],d=Object.keys(t).filter(w=>u.includes(w)),m=Object.keys(t).filter(w=>f.includes(w)),g=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const y=d.every(w=>["player1","player2"].includes(w)),b=d.every(w=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(w));if(g&&(y||b))return;const S=i&&i.includes("SequentialPhaseManager"),C=["deployment","action"].includes(n.turnPhase),E=d.length===1&&d[0]==="passInfo";if(!(S&&C&&E)){if(d.length>0&&!r){const w=i?.split(`
`)||[],T=w.find(D=>D.includes(".jsx")&&!D.includes("GameStateManager"))||w[2]||"Unknown";console.warn(" ActionProcessor bypass detected: Critical game state updated directly",{updates:d,turnPhase:n.turnPhase,caller:T.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug(" ActionProcessor bypass debug info:",{stackTrace:w.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}m.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(d=>{const m=l?l[d]:void 0,g=u?u[d]:void 0;if(JSON.stringify(m)!==JSON.stringify(g))if(d==="energy"||d==="deploymentBudget"||d==="initialDeploymentBudget")(g==null||isNaN(g))&&console.error(`   WARNING: ${d} became ${g}!`);else if(d==="activeDronePool"){const y=Array.isArray(m)?m.length:"undefined",b=Array.isArray(g)?g.length:"undefined";let S,C;if(Array.isArray(m))try{S=m.map(E=>E?.name||"UNNAMED").join(",")}catch(E){S=`ERROR_MAPPING_OLD: ${E.message}`}else S="undefined";if(Array.isArray(g))try{C=g.map(E=>E?.name||"UNNAMED").join(",")}catch(E){C=`ERROR_MAPPING_NEW: ${E.message}`}else C="undefined";(C.includes("ERROR")||C==="undefined")&&Array.isArray(g)&&g.length>0&&K("STATE_SYNC","     First drone object:",g[0]),(y!==b||S!==C)&&new Error().stack?.split(`
`).slice(1,4).join(`
`)}else d==="hand"||d==="deck"?(Array.isArray(m)&&m.length,Array.isArray(g)&&g.length):d==="dronesOnBoard"&&(m&&`${m.lane1?.length||0}${m.lane2?.length||0}${m.lane3?.length||0}`,g&&`${g.lane1?.length||0}${g.lane2?.length||0}${g.lane3?.length||0}`)})}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],f=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],d=l.functions.filter(g=>u.some(y=>g.toLowerCase().includes(y.toLowerCase()))),m=l.functions.filter(g=>f.some(y=>g.toLowerCase().includes(y.toLowerCase())));d.length>0&&m.length===0&&(console.warn(" Inappropriate function updating game state:",{inappropriateFunctions:d,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI  ActionProcessor  gameLogic.js  GameStateManager"}),console.debug(" Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:d,appropriateFound:m,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const f of r){const d=u[f];if(!d)continue;const m=Array.isArray(d)?d:[d];let g=!1;for(const y of m)(y==="GameFlowManager"&&i||y==="SequentialPhaseManager"&&s||y==="ActionProcessor"&&l)&&(g=!0);if(!g){const y=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(` OWNERSHIP VIOLATION: ${y} cannot update '${f}'`,{updateKey:f,currentManager:y,allowedOwners:m,updates:r,recommendation:`Only ${m.join(" or ")} should update '${f}'`})}}}reset(){const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:Le.initialPlayerState("Player 1",ml),player2:Le.initialPlayerState("Player 2",ml),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET"),on.reset(),this.actionProcessor.clearQueue()}startGame(t="local",n={},r={}){const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"deckSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...Le.initialPlayerState(n.name||"Player 1",n.decklist||ml),...n},player2:{...Le.initialPlayerState(r.name||"Player 2",r.decklist||ml),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{},droneSelectionPool:[],droneSelectionTrio:[]};this.setState(i,"GAME_STARTED"),K("STATE_SYNC"," Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),K("STATE_SYNC"," Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0})}endGame(){this.setState({appState:"menu",gameActive:!1,testMode:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),on.reset(),this.actionProcessor.clearQueue(),this.gameFlowManager&&this.gameFlowManager.reset()}initializeTestMode(t){return Sr(()=>Promise.resolve().then(()=>DF),void 0).then(n=>{n.initializeTestGame(t,this)}).catch(n=>{console.error(" TEST MODE: Error importing testGameInitializer:",n)}),!0}setMultiplayerMode(t,n=!1){this.setState({gameMode:t},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&K("STATE_SYNC"," [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}trackOptimisticAction(t,n){const r={type:t,payload:n,timestamp:Date.now(),id:`${t}-${Date.now()}-${Math.random()}`};this.optimisticActions.push(r),K("STATE_SYNC"," [OPTIMISTIC] Tracked action:",t,"Total tracked:",this.optimisticActions.length),setTimeout(()=>{this.optimisticActions=this.optimisticActions.filter(i=>i.id!==r.id),K("STATE_SYNC"," [OPTIMISTIC] Cleared old action:",t,"Remaining:",this.optimisticActions.length)},this.optimisticActionTimeout)}hasRecentOptimisticActions(){return this.optimisticActions.length>0}clearOptimisticActions(){this.optimisticActions=[]}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Ge=new UI;class HI{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return GI(t).buffer}}function GI(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function IP(e){return new qI(e).unpack()}function RP(e){const t=new YI,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class qI{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class YI{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,f=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(f)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new HI,this._textEncoder=new TextEncoder}}let LP=!0,$P=!0;function su(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function mo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const f=d=>{const m=n(d);m&&(u.handleEvent?u.handleEvent(m):u(m))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,f),i.apply(this,[l,f])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const f=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,f])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function FI(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(LP=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function VI(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):($P=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function BP(){if(typeof window=="object"){if(LP)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function bv(e,t){$P&&console.warn(e+" is deprecated, please use "+t+" instead.")}function KI(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(su(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(su(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(su(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=su(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function GC(e){return Object.prototype.toString.call(e)==="[object Object]"}function zP(e){return GC(e)?Object.keys(e).reduce(function(t,n){const r=GC(e[n]),i=r?zP(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function d0(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?d0(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{d0(e,e.get(i),n)})}))}function qC(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&d0(e,u,i)})}),i}const YC=BP;function UP(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const f={};return Object.keys(u).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const m=typeof u[d]=="object"?u[d]:{ideal:u[d]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const g=function(y,b){return y?y+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(m.ideal!==void 0){f.optional=f.optional||[];let y={};typeof m.ideal=="number"?(y[g("min",d)]=m.ideal,f.optional.push(y),y={},y[g("max",d)]=m.ideal,f.optional.push(y)):(y[g("",d)]=m.ideal,f.optional.push(y))}m.exact!==void 0&&typeof m.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[g("",d)]=m.exact):["min","max"].forEach(y=>{m[y]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[g(y,d)]=m[y])})}),u.advanced&&(f.optional=(f.optional||[]).concat(u.advanced)),f},i=function(u,f){if(t.version>=61)return f(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const d=function(m,g,y){g in m&&!(y in m)&&(m[y]=m[g],delete m[g])};u=JSON.parse(JSON.stringify(u)),d(u.audio,"autoGainControl","googAutoGainControl"),d(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let d=u.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const m=t.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete u.video.facingMode;let g;if(d.exact==="environment"||d.ideal==="environment"?g=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(g=["front"]),g)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(S=>S.kind==="videoinput");let b=y.find(S=>g.some(C=>S.label.toLowerCase().includes(C)));return!b&&y.length&&g.includes("back")&&(b=y[y.length-1]),b&&(u.video.deviceId=d.exact?{exact:b.deviceId}:{ideal:b.deviceId}),u.video=r(u.video),YC("chrome: "+JSON.stringify(u)),f(u)})}u.video=r(u.video)}return YC("chrome: "+JSON.stringify(u)),f(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,f,d){i(u,m=>{n.webkitGetUserMedia(m,f,g=>{d&&d(s(g))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(f){return i(f,d=>u(d).then(m=>{if(d.audio&&!m.getAudioTracks().length||d.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(s(m))))}}}function HP(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function GP(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else mo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function qP(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,f){let d=i.apply(this,arguments);return d||(d=t(this,u),this._senders.push(d)),d};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const f=this._senders.indexOf(u);f!==-1&&this._senders.splice(f,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(f=>f.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function YP(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>qC(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),mo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>qC(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function FP(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(f)===-1&&this._shimmedLocalStreams[u.id].push(f):this._shimmedLocalStreams[u.id]=[u,f],f};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(d=>{if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const f=this.getSenders().filter(d=>u.indexOf(d)===-1);this._shimmedLocalStreams[l.id]=[l].concat(f)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const f=this._shimmedLocalStreams[u].indexOf(l);f!==-1&&this._shimmedLocalStreams[u].splice(f,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function VP(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return FP(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const m=n.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(g=>this._reverseStreams[g.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(g=>{if(this.getSenders().find(b=>b.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const g=new e.MediaStream(m.getTracks());this._streams[m.id]=g,this._reverseStreams[g.id]=m,m=g}r.apply(this,[m])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},e.RTCPeerConnection.prototype.addTrack=function(m,g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(C=>C===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[g.id];if(S)S.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new e.MediaStream([m]);this._streams[g.id]=C,this._reverseStreams[C.id]=g,this.addStream(C)}return this.getSenders().find(C=>C.track===m)};function s(d,m){let g=m.sdp;return Object.keys(d._reverseStreams||[]).forEach(y=>{const b=d._reverseStreams[y],S=d._streams[b.id];g=g.replace(new RegExp(S.id,"g"),b.id)}),new RTCSessionDescription({type:m.type,sdp:g})}function l(d,m){let g=m.sdp;return Object.keys(d._reverseStreams||[]).forEach(y=>{const b=d._reverseStreams[y],S=d._streams[b.id];g=g.replace(new RegExp(b.id,"g"),S.id)}),new RTCSessionDescription({type:m.type,sdp:g})}["createOffer","createAnswer"].forEach(function(d){const m=e.RTCPeerConnection.prototype[d],g={[d](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[S=>{const C=s(this,S);y[0].apply(null,[C])},S=>{y[1]&&y[1].apply(null,S)},arguments[2]]):m.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[d]=g[d]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const f=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const d=f.get.apply(this);return d.type===""?d:s(this,d)}}),e.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(C=>m.track===C)&&(y=this._streams[b])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function f0(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function KP(e,t){mo(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const FC=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:KP,shimAddTrackRemoveTrack:VP,shimAddTrackRemoveTrackWithNative:FP,shimGetSendersWithDtmf:qP,shimGetUserMedia:UP,shimMediaStream:HP,shimOnTrack:GP,shimPeerConnection:f0,shimSenderReceiverGetStats:YP},Symbol.toStringTag,{value:"Module"}));function WP(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){bv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,f){u in l&&!(f in l)&&(l[f]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function WI(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function XP(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function p0(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(f=>{if(t.version<53&&!l)try{f.forEach(d=>{d.type=n[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;f.forEach((m,g)=>{f.set(g,Object.assign({},m,{type:n[m.type]||m.type}))})}return f}).then(l,u)}}function QP(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function JP(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),mo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ZP(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){bv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function eT(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function tT(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function nT(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function rT(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function aT(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const VC=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:tT,shimCreateAnswer:aT,shimCreateOffer:rT,shimGetDisplayMedia:WI,shimGetParameters:nT,shimGetUserMedia:WP,shimOnTrack:XP,shimPeerConnection:p0,shimRTCDataChannel:eT,shimReceiverGetStats:JP,shimRemoveStream:ZP,shimSenderGetStats:QP},Symbol.toStringTag,{value:"Module"}));function iT(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function sT(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function oT(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(d,m){const g=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[g]);return m?(y.then(d,m),Promise.resolve()):y},t.createAnswer=function(d,m){const g=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[g]);return m?(y.then(d,m),Promise.resolve()):y};let u=function(f,d,m){const g=i.apply(this,[f]);return m?(g.then(d,m),Promise.resolve()):g};t.setLocalDescription=u,u=function(f,d,m){const g=s.apply(this,[f]);return m?(g.then(d,m),Promise.resolve()):g},t.setRemoteDescription=u,u=function(f,d,m){const g=l.apply(this,[f]);return m?(g.then(d,m),Promise.resolve()):g},t.addIceCandidate=u}function lT(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(cT(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function cT(e){return e&&e.video!==void 0?Object.assign({},e,{video:zP(e.video)}):e}function uT(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(bv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function dT(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function fT(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function pT(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const KC=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:pT,shimCallbacksAPI:oT,shimConstraints:cT,shimCreateOfferLegacy:fT,shimGetUserMedia:lT,shimLocalStreamsAPI:iT,shimRTCIceServerUrls:uT,shimRemoteStreamsAPI:sT,shimTrackEventTransceiver:dT},Symbol.toStringTag,{value:"Module"}));var wg={exports:{}},WC;function XI(){return WC||(WC=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const f=s[u],d=t.matchPrefix(n,"a=rtpmap:"+f+" ")[0];if(d){const m=t.parseRtpMap(d),g=t.matchPrefix(n,"a=fmtp:"+f+" ");switch(m.parameters=g.length?t.parseFmtp(g[0]):{},m.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+f+" ").map(t.parseRtcpFb),r.codecs.push(m),m.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(m.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(f=>{u.rtcpFeedback.find(m=>m.type===f.type&&m.parameter===f.parameter)||u.rtcpFeedback.push(f)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),f=u.length>0&&u[0].ssrc;let d;const m=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(S=>parseInt(S,10)));m.length>0&&m[0].length>1&&m[0][0]===f&&(d=m[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let b={ssrc:f,codecPayloadType:parseInt(y.parameters.apt,10)};f&&d&&(b.rtx={ssrc:d}),r.push(b),s&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:f,mechanism:l?"red+ulpfec":"red"},r.push(b))}}),r.length===0&&f&&r.push({ssrc:f});let g=t.matchPrefix(n,"b=");return g.length&&(g[0].indexOf("b=TIAS:")===0?g=parseInt(g[0].substring(7),10):g[0].indexOf("b=AS:")===0?g=parseInt(g[0].substring(5),10)*1e3*.95-2e3*8:g=void 0,r.forEach(y=>{y.maxBitrate=g})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const f=u[0].substring(10).split(" ");return{port:parseInt(f[0],10),protocol:f[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(wg)),wg.exports}var hT=XI();const bl=xa(hT),QI=lP({__proto__:null,default:bl},[hT]);function Of(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=bl.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,mo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function h0(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||mo(e,"icecandidate",t=>{if(t.candidate){const n=bl.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function _f(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const f=bl.splitSections(u.sdp);return f.shift(),f.some(d=>{const m=bl.parseMLine(d);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},r=function(u){const f=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(f===null||f.length<2)return-1;const d=parseInt(f[1],10);return d!==d?-1:d},i=function(u){let f=65536;return t.browser==="firefox"&&(t.version<57?u===-1?f=16384:f=2147483637:t.version<60?f=t.version===57?65535:65536:f=2147483637),f},s=function(u,f){let d=65536;t.browser==="firefox"&&t.version===57&&(d=65535);const m=bl.matchPrefix(u.sdp,"a=max-message-size:");return m.length>0?d=parseInt(m[0].substring(19),10):t.browser==="firefox"&&f!==-1&&(d=2147483637),d},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const f=r(arguments[0]),d=i(f),m=s(arguments[0],f);let g;d===0&&m===0?g=Number.POSITIVE_INFINITY:d===0||m===0?g=Math.max(d,m):g=Math.min(d,m);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return g}}),this._sctp=y}return l.apply(this,arguments)}}function Nf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],f=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&f>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},mo(e,"datachannel",r=>(t(r.channel,r.target),r))}function m0(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function g0(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function jf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function kf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const JI=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:g0,shimAddIceCandidateNullOrEmpty:jf,shimConnectionState:m0,shimMaxMessageSize:_f,shimParameterlessSetLocalDescription:kf,shimRTCIceCandidate:Of,shimRTCIceCandidateRelayProtocol:h0,shimSendThrowTypeError:Nf},Symbol.toStringTag,{value:"Module"}));function ZI({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=BP,r=KI(e),i={browserDetails:r,commonShim:JI,extractVersion:su,disableLog:FI,disableWarnings:VI,sdp:QI};switch(r.browser){case"chrome":if(!FC||!f0||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=FC,jf(e,r),kf(e),UP(e,r),HP(e),f0(e,r),GP(e),VP(e,r),qP(e),YP(e),KP(e,r),Of(e),h0(e),m0(e),_f(e,r),Nf(e),g0(e,r);break;case"firefox":if(!VC||!p0||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=VC,jf(e,r),kf(e),WP(e,r),p0(e,r),XP(e),ZP(e),QP(e),JP(e),eT(e),tT(e),nT(e),rT(e),aT(e),Of(e),m0(e),_f(e,r),Nf(e);break;case"safari":if(!KC||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=KC,jf(e,r),kf(e),uT(e),fT(e),oT(e),iT(e),sT(e),dT(e),lT(e),pT(e),Of(e),h0(e),_f(e,r),Nf(e),g0(e,r);break;default:n("Unsupported browser!");break}return i}const XC=ZI({window:typeof window>"u"?void 0:window});function go(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class mT{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),f=t.slice(l,u),d={__peerData:this._dataCount,n:s,data:f,total:i};n.push(d),l=u,s++}return this._dataCount++,n}}}function eR(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const Pg=XC.default||XC,Xc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Pg.browserDetails.browser}getVersion(){return Pg.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=Pg.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},tR=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),gT=()=>Math.random().toString(36).slice(2),QC={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class nR extends mT{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=QC,this.browser=Xc.getBrowser(),this.browserVersion=Xc.getVersion(),this.pack=RP,this.unpack=IP,this.supports=(function(){const n={browser:Xc.isBrowserSupported(),webRTC:Xc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(QC),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Xc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=tR,this.randomToken=gT}}const tr=new nR,rR="PeerJS: ";class aR{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[rR,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Te=new aR,xv={},iR=Object.prototype.hasOwnProperty,Vn="~";function gu(){}Object.create&&(gu.prototype=Object.create(null),new gu().__proto__||(Vn=!1));function sR(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function yT(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new sR(n,r||e,i),l=Vn?Vn+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function Mf(e,t){--e._eventsCount===0?e._events=new gu:delete e._events[t]}function Bn(){this._events=new gu,this._eventsCount=0}Bn.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)iR.call(n,r)&&t.push(Vn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Bn.prototype.listeners=function(t){var n=Vn?Vn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};Bn.prototype.listenerCount=function(t){var n=Vn?Vn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Bn.prototype.emit=function(t,n,r,i,s,l){var u=Vn?Vn+t:t;if(!this._events[u])return!1;var f=this._events[u],d=arguments.length,m,g;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),d){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,n),!0;case 3:return f.fn.call(f.context,n,r),!0;case 4:return f.fn.call(f.context,n,r,i),!0;case 5:return f.fn.call(f.context,n,r,i,s),!0;case 6:return f.fn.call(f.context,n,r,i,s,l),!0}for(g=1,m=new Array(d-1);g<d;g++)m[g-1]=arguments[g];f.fn.apply(f.context,m)}else{var y=f.length,b;for(g=0;g<y;g++)switch(f[g].once&&this.removeListener(t,f[g].fn,void 0,!0),d){case 1:f[g].fn.call(f[g].context);break;case 2:f[g].fn.call(f[g].context,n);break;case 3:f[g].fn.call(f[g].context,n,r);break;case 4:f[g].fn.call(f[g].context,n,r,i);break;default:if(!m)for(b=1,m=new Array(d-1);b<d;b++)m[b-1]=arguments[b];f[g].fn.apply(f[g].context,m)}}return!0};Bn.prototype.on=function(t,n,r){return yT(this,t,n,r,!1)};Bn.prototype.once=function(t,n,r){return yT(this,t,n,r,!0)};Bn.prototype.removeListener=function(t,n,r,i){var s=Vn?Vn+t:t;if(!this._events[s])return this;if(!n)return Mf(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&Mf(this,s);else{for(var u=0,f=[],d=l.length;u<d;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&f.push(l[u]);f.length?this._events[s]=f.length===1?f[0]:f:Mf(this,s)}return this};Bn.prototype.removeAllListeners=function(t){var n;return t?(n=Vn?Vn+t:t,this._events[n]&&Mf(this,n)):(this._events=new gu,this._eventsCount=0),this};Bn.prototype.off=Bn.prototype.removeListener;Bn.prototype.addListener=Bn.prototype.on;Bn.prefixed=Vn;Bn.EventEmitter=Bn;xv=Bn;var yo={};go(yo,"ConnectionType",()=>is);go(yo,"PeerErrorType",()=>Qt);go(yo,"BaseConnectionErrorType",()=>y0);go(yo,"DataConnectionErrorType",()=>Sv);go(yo,"SerializationType",()=>Dp);go(yo,"SocketEventType",()=>as);go(yo,"ServerMessageType",()=>Rn);var is=(function(e){return e.Data="data",e.Media="media",e})({}),Qt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),y0=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),Sv=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Dp=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),as=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),Rn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const vT="1.5.5";class oR extends xv.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+vT),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),Te.log("Server message received:",s)}catch{Te.log("Invalid server message",i.data);return}this.emit(as.Message,s)},this._socket.onclose=i=>{this._disconnected||(Te.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(as.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Te.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Te.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Rn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(as.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class bT{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===is.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Te.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;Te.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(Te.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:Rn.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Te.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(y0.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Te.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(y0.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Te.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Te.log("Listening for data channel"),t.ondatachannel=l=>{Te.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},Te.log("Listening for remote stream"),t.ontrack=l=>{Te.log("Received remote stream");const u=l.streams[0],f=s.getConnection(n,r);if(f.type===is.Media){const d=f;this._addStreamToMediaConnection(u,d)}}}cleanup(){Te.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Te.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Te.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===is.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:Rn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Qt.WebRTC,i),Te.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Qt.WebRTC,r),Te.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Te.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Te.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Rn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Qt.WebRTC,i),Te.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Qt.WebRTC,r),Te.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Te.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),Te.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(Qt.WebRTC,l),Te.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){Te.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Te.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Qt.WebRTC,n),Te.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Te.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Te.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Te.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class xT extends xv.EventEmitter{emitError(t,n){Te.error("Error:",n),this.emit("error",new lR(`${t}`,n))}}class lR extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class ST extends xT{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class zf extends ST{static#e=this.ID_PREFIX="mc_";get type(){return is.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||zf.ID_PREFIX+tr.randomToken(),this._negotiator=new bT(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Te.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Te.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Te.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case Rn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Rn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Te.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Te.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class cR{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",vT),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Te.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==tr.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===tr.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Te.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Uf extends ST{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return is.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||Uf.ID_PREFIX+gT(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new bT(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Te.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Te.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Te.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Sv.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Rn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Rn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Te.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Cv extends Uf{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Uf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Te.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Tg extends Cv{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new mT,this.serialization=Dp.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=IP(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=eR(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=RP(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Te.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class uR extends Cv{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Dp.None}}class dR extends Cv{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=tr.chunkedMTU){this.emitError(Sv.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Dp.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Av extends xT{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:uR,json:dR,binary:Tg,"binary-utf8":Tg,default:Tg},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:tr.CLOUD_HOST,port:tr.CLOUD_PORT,path:"/",key:Av.DEFAULT_KEY,token:tr.randomToken(),config:tr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==tr.CLOUD_HOST?this._options.secure=tr.isSecure():this._options.host==tr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Te.setLogFunction(this._options.logFunction),Te.logLevel=this._options.debug||0,this._api=new cR(n),this._socket=this._createServerConnection(),!tr.supports.audioVideo&&!tr.supports.data){this._delayedAbort(Qt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!tr.validateId(r)){this._delayedAbort(Qt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Qt.ServerError,i))}_createServerConnection(){const t=new oR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(as.Message,n=>{this._handleMessage(n)}),t.on(as.Error,n=>{this._abort(Qt.SocketError,n)}),t.on(as.Disconnected,()=>{this.disconnected||(this.emitError(Qt.Network,"Lost connection to server."),this.disconnect())}),t.on(as.Close,()=>{this.disconnected||this._abort(Qt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case Rn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Rn.Error:this._abort(Qt.ServerError,r.msg);break;case Rn.IdTaken:this._abort(Qt.UnavailableID,`ID "${this.id}" is taken`);break;case Rn.InvalidKey:this._abort(Qt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Rn.Leave:Te.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Rn.Expire:this.emitError(Qt.PeerUnavailable,`Could not connect to peer ${i}`);break;case Rn.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),Te.warn(`Offer received for existing Connection ID:${s}`)),r.type===is.Media){const f=new zf(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=f,this._addConnection(i,l),this.emit("call",f)}else if(r.type===is.Data){const f=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=f,this._addConnection(i,l),this.emit("connection",f)}else{Te.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const f of u)l.handleMessage(f);break}default:{if(!r){Te.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):Te.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Te.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Qt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Te.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Qt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Te.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new zf(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Te.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Te.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Te.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Te.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Te.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Te.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Qt.ServerError,n))}}var JC=Av;class fR{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new JC(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{K("MULTIPLAYER","Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{K("MULTIPLAYER","Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new JC({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{K("MULTIPLAYER","Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{K("MULTIPLAYER","Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode})}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{})}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(K("MULTIPLAYER","Received P2P data:",t),t.type){case"STATE_UPDATE":K("MULTIPLAYER","[P2P GUEST] Received state update with animations:",{hasActionAnimations:t.actionAnimations&&t.actionAnimations.length>0,hasSystemAnimations:t.systemAnimations&&t.systemAnimations.length>0,actionAnimationCount:t.actionAnimations?.length||0,systemAnimationCount:t.systemAnimations?.length||0}),this.emit("state_update_received",{state:t.state,actionAnimations:t.actionAnimations||[],systemAnimations:t.systemAnimations||[]});break;case"GUEST_ACTION":this.actionProcessor?await this.actionProcessor.processGuestAction(t.action):console.error("ActionProcessor not set - cannot process guest action");break;case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}broadcastState(t,n=[],r=[]){if(!this.isHost){console.warn("Only host can broadcast state");return}if(this.connection&&this.isConnected)try{K("MULTIPLAYER","[P2P HOST] Broadcasting state - checking player2 hand:",{player2HandSize:t.player2?.hand?.length||0,sampleCard:t.player2?.hand?.[0]||null,sampleInstanceId:t.player2?.hand?.[0]?.instanceId}),this.connection.send({type:"STATE_UPDATE",state:t,actionAnimations:n,systemAnimations:r,timestamp:Date.now()}),K("MULTIPLAYER","[P2P HOST] Broadcasted state update to guest",{hasAnimations:n.length+r.length>0,actionAnimationCount:n.length,systemAnimationCount:r.length})}catch(i){console.error("Failed to broadcast state:",i),this.emit("send_error",{error:i.message})}else console.warn("Cannot broadcast state - no connection available")}sendActionToHost(t,n){if(this.isHost){console.warn("Host should not send actions to itself");return}if(this.connection&&this.isConnected)try{this.connection.send({type:"GUEST_ACTION",action:{type:t,payload:n},timestamp:Date.now()}),K("MULTIPLAYER","[P2P GUEST] Sent action to host:",t)}catch(r){console.error("Failed to send action to host:",r),this.emit("send_error",{error:r.message})}else console.warn("Cannot send action - no connection to host")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?this.emit("state_sync_received",{state:t}):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const Yn=new fR,v0=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},pR=e=>({preGame:"Pre-Game Setup",gameInitializing:"Initialising Game",deckSelection:"Deck Selection",droneSelection:"Drone Selection",placement:"Placement Phase",determineFirstPlayer:"Determining First Player",energyReset:"Energy Reset",mandatoryDiscard:"Mandatory Discard",optionalDiscard:"Optional Discard",initialDraw:"Drawing Cards",draw:"Drawing Cards",allocateShields:"Shield Allocation",mandatoryDroneRemoval:"Mandatory Drone Removal",deployment:"Deployment Phase",deploymentComplete:"Deployment Complete",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,hR=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],mR=["deployment","action"],gR=e=>hR.includes(e),ZC=e=>mR.includes(e),Ai=()=>{const[e,t]=A.useState(Ge.getState()),[n,r]=A.useState(Yn.getStatus());A.useEffect(()=>{Ge.setupP2PIntegration(Yn)},[]),A.useEffect(()=>Ge.subscribe(G=>{G.type!=="render_complete"&&t(Ge.getState())}),[]),A.useEffect(()=>Yn.subscribe(G=>{r(Yn.getStatus())}),[]);const i=A.useCallback(()=>Ge.isMyTurn(),[e.currentPlayer,e.gameMode]),s=A.useCallback(()=>Ge.getLocalPlayerId(),[e.gameMode]),l=A.useCallback(()=>Ge.getOpponentPlayerId(),[e.gameMode]),u=A.useCallback(()=>e.gameMode!=="local",[e.gameMode]),f=A.useCallback(()=>u()&&!i(),[u,i]),d=A.useCallback(()=>Ge.getLocalPlayerState(),[e.gameMode]),m=A.useCallback(()=>Ge.getOpponentPlayerState(),[e.gameMode]),g=A.useCallback(I=>Ge.isLocalPlayer(I),[e.gameMode]),y=A.useCallback(()=>Ge.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),b=A.useCallback(()=>{const I=Ge.getOpponentPlacedSections();return e.turnPhase==="placement"&&I.some(G=>G!==null)&&console.error(" CRITICAL - getOpponentPlacedSections returning:",I,"from gameState:",e.opponentPlacedSections),I},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=A.useCallback((I,G)=>{Ge.updatePlayers(I,G)},[]),C=A.useCallback((I,G)=>{Ge.updatePlayerState(I,G)},[]),E=A.useCallback((I,G)=>{Ge.setPlayerStates(I,G)},[]),w=A.useCallback(I=>{Ge.setFirstPasserOfPreviousRound(I)},[]),T=A.useCallback(I=>{Ge.setFirstPlayerOverride(I)},[]),D=A.useCallback(I=>{Ge.setPassInfo(I)},[]),O=A.useCallback(I=>{Ge.updatePassInfo(I)},[]),j=A.useCallback((I,G,ie)=>{Ge.addLogEntry(I,G,ie)},[]),N=A.useCallback(()=>{Ge.reset()},[]),k=A.useCallback(()=>{Ge.endGame()},[]),B=A.useCallback(I=>{Ge.setWinner(I)},[]),F=A.useCallback(async(I,G)=>await Ge.processAction(I,G),[]),M=A.useCallback(()=>Ge.isActionInProgress(),[]),R=A.useCallback(()=>Ge.getActionQueueLength(),[]),z=A.useCallback(()=>{Ge.clearActionQueue()},[]),W=A.useCallback(()=>gR(e.turnPhase),[e.turnPhase]),Z=A.useCallback(()=>ZC(e.turnPhase),[e.turnPhase]),Q=A.useCallback(async(I,G)=>{const ie=e.turnPhase;return ZC(ie)?await F(I,G):(console.warn(` Simultaneous phase action ${I} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${I} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:ie,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,F]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:f,getLocalPlayerState:d,getOpponentPlayerState:m,isLocalPlayer:g,getLocalPlacedSections:y,getOpponentPlacedSections:b,updatePlayers:S,updatePlayerState:C,setPlayerStates:E,setFirstPasserOfPreviousRound:w,setFirstPlayerOverride:T,setPassInfo:D,updatePassInfo:O,addLogEntry:j,resetGame:N,endGame:k,setWinner:B,processAction:F,isActionInProgress:M,getActionQueueLength:R,clearActionQueue:z,isSimultaneousPhase:W,isSequentialPhase:Z,routeAction:Q,gameStateManager:Ge,p2pManager:Yn}},eA=()=>({unplacedSections:[...["bridge","powerCell","droneControlHub"]],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)});class fu{constructor(){if(fu.instance)return fu.instance;fu.instance=this,this.PRE_GAME_PHASES=["deckSelection","droneSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw","determineFirstPlayer"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1}initialize(t,n,r,i){if(!this.isInitialized){if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=on.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;s&&l&&u&&i.initialize(u,l,s,n,t)}this.setupEventListeners(),this.isInitialized=!0}}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="deckSelection"){if(this.gameStateManager.get("gameMode")==="guest")return;this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let r={};t==="deckSelection"&&(r={...eA()}),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(r).length>0&&this.gameStateManager.setState(r,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(this.gameStateManager.get("gameMode")==="guest")return;if(this.actionProcessor){const s=this.actionProcessor.applyPhaseCommitments(t);if(t==="deckSelection"){const u=this.gameStateManager.get("commitments")?.deckSelection;if(K("DRONE_SELECTION","Deck commitments:",{player1HasDrones:!!u?.player1?.drones,player2HasDrones:!!u?.player2?.drones,player1DroneCount:u?.player1?.drones?.length,player2DroneCount:u?.player2?.drones?.length,player1Drones:u?.player1?.drones,player2Drones:u?.player2?.drones}),u){if(u.player1?.drones){const f=this.extractDronesFromDeck(u.player1.drones),d=HC(f,2);s.player1DroneSelectionTrio=d.droneSelectionTrio,s.player1DroneSelectionPool=d.droneSelectionPool,K("PHASE_TRANSITIONS",` Player1 deck has ${f.length} drones for selection`),K("DRONE_SELECTION","Created player1DroneSelectionTrio:",d.droneSelectionTrio.map(m=>m.name))}else console.warn(" No drones found in player1 deck commitment");if(u.player2?.drones){const f=this.extractDronesFromDeck(u.player2.drones),d=HC(f,2);s.player2DroneSelectionTrio=d.droneSelectionTrio,s.player2DroneSelectionPool=d.droneSelectionPool,K("PHASE_TRANSITIONS",` Player2 deck has ${f.length} drones for selection`),K("DRONE_SELECTION","Created player2DroneSelectionTrio:",d.droneSelectionTrio.map(m=>m.name))}else console.warn(" No drones found in player2 deck commitment")}else console.error(" No deck commitments found - cannot initialize drone selection")}Object.keys(s).length>0&&this.gameStateManager.setState(s,"COMMITMENT_APPLICATION",`${t}_completion`)}const i=this.getNextPhase(t);i&&(this.isSequentialPhase(i)?this.initiateSequentialPhase(i):await this.transitionToPhase(i))}checkSequentialPhaseCompletion(t,n){t.gameMode==="guest"||n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(K("PHASE_TRANSITIONS",` GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(t.gameMode==="guest"||n!=="COMMITMENT_UPDATE"||!t.commitments)return;K("PHASE_TRANSITIONS"," checkSimultaneousPhaseCompletion called:",{currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){K("PHASE_TRANSITIONS"," Early return: Not a simultaneous phase",{simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){K("PHASE_TRANSITIONS"," Early return: No commitments for current phase",{allCommitments:Object.keys(t.commitments)});return}const s=i.player1?.completed&&i.player2?.completed;K("PHASE_TRANSITIONS"," Checking completion status:",{player1Complete:i.player1?.completed,player2Complete:i.player2?.completed}),s&&(this.emit("bothPlayersComplete",{phase:r,commitments:i}),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t,n){this.isProcessingAutomaticPhase=!0;let r=null;try{t==="gameInitializing"?r=await this.processGameInitializingPhase(n):t==="energyReset"?r=await this.processAutomaticEnergyResetPhase(n):t==="draw"?r=await this.processAutomaticDrawPhase(n):t==="determineFirstPlayer"?r=await this.processAutomaticFirstPlayerPhase(n):console.warn(` No handler for automatic phase: ${t}`),r?(K("PHASE_TRANSITIONS",` GameFlowManager: Transitioning from automatic phase '${t}' to '${r}'`),await this.transitionToPhase(r)):console.warn(` No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(t){try{const{performAutomaticDraw:n}=await Sr(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-JC3OhWVA.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error(" GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),K("PHASE_TRANSITIONS"," Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return K("PHASE_TRANSITIONS"," Automatic draw completed, returning next phase:",s),s}catch(n){console.error(" Error during automatic draw phase:",n)}}async processAutomaticFirstPlayerPhase(t){try{const n=await this.actionProcessor.processFirstPlayerDetermination();if(K("PHASE_TRANSITIONS"," First player determination completed:",n),this.animationManager&&n.stateUpdates){const i=this.gameStateManager.getLocalPlayerId(),f={animationName:"PHASE_ANNOUNCEMENT",payload:{phaseText:n.stateUpdates.firstPlayerOfRound===i?"YOU ARE FIRST PLAYER":"OPPONENT IS FIRST PLAYER",phaseName:"firstPlayerResult",timestamp:Date.now()}};await this.actionProcessor.executeAndCaptureAnimations([f],!0),K("PHASE_TRANSITIONS"," [FIRST PLAYER] Second announcement complete")}this.emit("phaseTransition",{newPhase:"determineFirstPlayer",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const r=this.getNextPhase("determineFirstPlayer");return K("PHASE_TRANSITIONS"," Automatic first player determination completed, returning next phase:",r),r}catch(n){console.error(" Error during automatic first player determination:",n)}}async processAutomaticEnergyResetPhase(t){try{if(!this.gameStateManager){console.error(" GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await Sr(async()=>{const{default:C}=await Promise.resolve().then(()=>LI);return{default:C}},void 0)).default.getInstance(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={player1:n.placedSections,player2:n.opponentPlacedSections},f=Le.readyDronesAndRestoreShields(n.player1,n.player2,u),d=Le.readyDronesAndRestoreShields(n.player2,n.player1,u),m={...f,energy:s.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?s.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:s.totals.deploymentBudget},g={...d,energy:l.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?l.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:l.totals.deploymentBudget},y=this.roundNumber>=2?s.totals.shieldsPerTurn:0,b=this.roundNumber>=2?l.totals.shieldsPerTurn:0;await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:m,player2:g,shieldsToAllocate:y,opponentShieldsToAllocate:b}}),K("PHASE_TRANSITIONS",` Energy reset complete - Player 1: ${m.energy} energy, Player 2: ${g.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const S=this.getNextPhase("energyReset");return K("PHASE_TRANSITIONS"," Automatic energy reset completed, returning next phase:",S),S}catch(n){console.error(" Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(t){try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(r=>setTimeout(r,100));const n=this.getNextPhase("gameInitializing");return K("PHASE_TRANSITIONS"," Game initialization completed, returning next phase:",n),n}catch(n){throw console.error(" Error during game initialization:",n),n}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn(" GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"energyReset":return!0;case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;case"deploymentComplete":return!1;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return t.roundNumber<2?!1:t.shieldsToAllocate>0||t.opponentShieldsToAllocate>0}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber}):console.warn(" ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1,this.gameStateManager.setState({roundNumber:1,turn:1}))),K("PHASE_TRANSITIONS",` GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"&&(r=eA()),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.queueAction({type:"phaseTransition",payload:{newPhase:t,resetPassInfo:!0}}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){await this.processAutomaticPhase(t,n);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,K("PHASE_TRANSITIONS",` GameFlowManager: Starting round ${this.roundNumber}`),this.gameStateManager.setState({roundNumber:this.roundNumber,turn:this.roundNumber},"ROUND_START","gameFlowManagerMetadata");const t=this.ROUND_PHASES.find(n=>this.isPhaseRequired(n));t?await this.transitionToPhase(t):(console.warn(" No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}extractDronesFromDeck(t){if(!t||!Array.isArray(t))return console.warn(" Invalid drone names provided to extractDronesFromDeck"),[];const n=t.map(r=>{const i=yt.find(s=>s.name===r);return i||console.warn(` Drone "${r}" not found in collection`),i}).filter(Boolean);return K("PHASE_TRANSITIONS",` Extracted ${n.length} drones from deck: ${n.map(r=>r.name).join(", ")}`),n}}const Hf=new fu,yR=!0,vR={features:{aiHandDebug:yR}};function tA(){const{gameStateManager:e}=Ai(),[t,n]=A.useState(0);A.useEffect(()=>{const s=()=>{const u=2e4+Math.random()*2e4;return setTimeout(()=>{n(d=>d+1),s()},u)},l=s();return()=>{clearTimeout(l)}},[]),A.useEffect(()=>{on.reset(),e?.actionProcessor&&e.actionProcessor.clearQueue(),e?.gameFlowManager&&e.gameFlowManager.reset()},[e]);const r=()=>{e.setState({appState:"lobby",gameMode:"local"})},i=()=>{e.setState({appState:"lobby",gameMode:"multiplayer"})};return p.jsx("div",{className:"body-font",style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",minHeight:"100vh",color:"#ffffff",padding:"60px 20px 20px 20px",boxSizing:"border-box",position:"relative"},children:p.jsxs("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[p.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"2rem"},children:[p.jsx("h1",{className:"menu-rgb-split-red heading-font","aria-hidden":"true",style:{position:"absolute",fontSize:"4rem",margin:0,textAlign:"center",color:"#ff0000",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0},children:"EREMOS"},`rgb-red-${t}`),p.jsx("h1",{className:"menu-rgb-split-blue heading-font","aria-hidden":"true",style:{position:"absolute",fontSize:"4rem",margin:0,textAlign:"center",color:"#00ffff",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0},children:"EREMOS"},`rgb-blue-${t}`),p.jsx("h1",{className:"menu-gradient-cycle menu-title-glitch-distort menu-title-opacity-glitch animate-pulse heading-font",style:{fontSize:"4rem",margin:0,textAlign:"center",background:"linear-gradient(90deg, #00ff88, #00d4aa, #00a0cc, #0088ff, #00aaff, #00ffff, #00d4aa, #00ff88)",backgroundSize:"300% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))",textShadow:"0 0 20px rgba(0, 255, 136, 0.4), 0 0 40px rgba(0, 136, 255, 0.3)",position:"relative",zIndex:1},children:"EREMOS"},`title-${t}`)]}),p.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"the wilderness left when civilization departs"}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",alignItems:"center"},children:[p.jsxs("button",{onClick:r,className:"btn-continue",style:{minWidth:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:["SINGLE PLAYER",p.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),p.jsxs("button",{onClick:i,className:"btn-continue",style:{minWidth:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:["MULTIPLAYER",p.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]}),p.jsxs("button",{onClick:()=>e.setState({appState:"deckBuilder"}),className:"btn-continue",style:{minWidth:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:["DECK BUILDER",p.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"Build Your Deck"})]}),p.jsxs("button",{onClick:()=>e.setState({appState:"modalShowcase"}),className:"btn-continue",style:{minWidth:"250px",fontSize:"1.1rem",padding:"16px 30px",backgroundColor:"#6a0dad",borderColor:"#9932cc"},children:["MODAL SHOWCASE",p.jsx("div",{className:"body-font",style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"Dev Preview Tool"})]}),p.jsxs("button",{onClick:()=>e.setState({appState:"testingSetup"}),className:"btn-utility",style:{minWidth:"250px",fontSize:"1.1rem",padding:"16px 30px"},children:["TESTING MODE",p.jsx("div",{className:"body-font",style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"Dev Scenario Setup"})]})]})]})})}const Gf=[{name:"TEST AI",description:"Used for test scenarios.",difficulty:"Easy",imagePath:"/AI/TEST.png",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",difficulty:"Normal",imagePath:"/AI/Manticore.png",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}],bR=({onGameStart:e,onBack:t})=>{const[n,r]=A.useState("menu"),[i,s]=A.useState(""),[l,u]=A.useState(""),[f,d]=A.useState("disconnected"),[m,g]=A.useState(""),[y,b]=A.useState(!1),[S,C]=A.useState(!1);A.useEffect(()=>Yn.subscribe(B=>{switch(B.type){case"room_created":s(B.data.roomCode),r("waiting"),d("waiting"),b(!1);break;case"joined_room":s(B.data.roomCode),r("connected"),d("connected"),b(!1);break;case"connected":r("connected"),d("connected"),b(!1),g("");break;case"disconnected":d("disconnected"),r("menu"),s(""),g("");break;case"connection_error":g(B.data.error),b(!1),r("menu");break}}),[]);const E=async()=>{b(!0),g(""),r("host");try{const k=await Yn.hostGame();K("MULTIPLAYER","Room created with code:",k)}catch(k){console.error("Failed to host game:",k),g(k.message),b(!1),r("menu")}},w=async()=>{if(l.length!==6){g("Please enter a 6-digit room code");return}b(!0),g(""),r("join");try{await Yn.joinGame(l)}catch(k){console.error("Failed to join game:",k),g(k.message),b(!1),r("menu")}},T=async()=>{try{await navigator.clipboard.writeText(i),C(!0),setTimeout(()=>C(!1),2e3)}catch(k){console.error("Failed to copy room code:",k)}},D=()=>{f==="connected"&&e()},O=()=>{Yn.disconnect(),r("menu"),s(""),u(""),g("")},j=()=>{f!=="disconnected"&&O(),t()},N=()=>{switch(f){case"waiting":return p.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[p.jsx(hl,{className:"w-4 h-4 animate-spin"}),p.jsx("span",{children:"Waiting for opponent..."})]});case"connected":return p.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[p.jsx(MC,{className:"w-4 h-4"}),p.jsx("span",{children:"Connected to opponent"})]});case"disconnected":default:return p.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[p.jsx(MM,{className:"w-4 h-4"}),p.jsx("span",{children:"Not connected"})]})}};return p.jsx("div",{style:{maxWidth:"500px",width:"100%",margin:"0 auto"},children:p.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20",style:{backgroundColor:"rgba(15, 23, 42, 0.95)",borderColor:"#a855f7",boxShadow:"0 20px 50px rgba(168, 85, 247, 0.2)"},children:[p.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[p.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffffff",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[p.jsx(jM,{className:"w-8 h-8 text-purple-400"}),"Multiplayer Lobby"]}),p.jsx("div",{style:{marginBottom:"1rem"},children:N()})]}),m&&p.jsx("div",{style:{backgroundColor:"rgba(127, 29, 29, 0.5)",border:"1px solid #ef4444",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"1rem"},children:p.jsx("p",{style:{color:"#fca5a5",fontSize:"0.875rem"},children:m})}),n==="menu"&&p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[p.jsxs("button",{onClick:E,disabled:y,className:"btn-continue",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y?p.jsx(hl,{className:"w-5 h-5 animate-spin"}):p.jsx(uM,{className:"w-5 h-5"}),"Host Game"]}),p.jsx("div",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.875rem"},children:"or"}),p.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[p.jsx("input",{type:"text",placeholder:"Enter 6-digit room code",value:l,onChange:k=>u(k.target.value.replace(/[^0-9]/g,"").slice(0,6)),style:{width:"100%",backgroundColor:"#1e293b",border:"1px solid #4b5563",borderRadius:"0.5rem",padding:"0.75rem 1rem",color:"#ffffff",textAlign:"center",fontSize:"1.125rem",letterSpacing:"0.1em"},maxLength:6}),p.jsxs("button",{onClick:w,disabled:y||l.length!==6,className:"btn-confirm",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y?p.jsx(hl,{className:"w-5 h-5 animate-spin"}):p.jsx(MC,{className:"w-5 h-5"}),"Join Game"]})]})]}),n==="waiting"&&p.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[p.jsxs("div",{style:{backgroundColor:"#1e293b",borderRadius:"0.5rem",padding:"1rem"},children:[p.jsx("p",{style:{color:"#d1d5db",marginBottom:"0.5rem"},children:"Share this room code:"}),p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[p.jsx("code",{style:{fontSize:"1.5rem",fontFamily:"monospace",color:"#ffffff",backgroundColor:"#334155",padding:"0.5rem 1rem",borderRadius:"0.25rem"},children:i}),p.jsx("button",{onClick:T,style:{backgroundColor:"#9333ea",color:"#ffffff",padding:"0.5rem",borderRadius:"0.25rem",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:k=>k.target.style.backgroundColor="#7c3aed",onMouseOut:k=>k.target.style.backgroundColor="#9333ea",children:S?p.jsx(eM,{className:"w-5 h-5"}):p.jsx(pv,{className:"w-5 h-5"})})]})]}),p.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"#facc15"},children:[p.jsx(hl,{className:"w-5 h-5 animate-spin"}),p.jsx("span",{children:"Waiting for opponent to join..."})]})]}),n==="connected"&&p.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[p.jsxs("div",{style:{backgroundColor:"rgba(20, 83, 45, 0.5)",border:"1px solid #22c55e",borderRadius:"0.5rem",padding:"1rem"},children:[p.jsx("p",{style:{color:"#86efac"},children:" Connected to opponent!"}),i&&p.jsxs("p",{style:{color:"#9ca3af",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Room: ",i]})]}),p.jsx("button",{onClick:D,className:"btn-continue",style:{width:"100%"},children:"Start Game"})]}),(n==="host"||n==="join")&&y&&p.jsxs("div",{style:{textAlign:"center"},children:[p.jsx(hl,{className:"w-8 h-8 animate-spin text-purple-400",style:{margin:"0 auto 1rem auto",color:"#c084fc"}}),p.jsx("p",{style:{color:"#d1d5db"},children:n==="host"?"Creating room...":"Joining room..."})]}),p.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid #374151"},children:p.jsx("button",{onClick:j,className:"btn-cancel",style:{width:"100%"},children:f!=="disconnected"?"Disconnect & Back":"Back"})})]})})},nA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>p.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:p.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:p.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&p.jsx(n,{size:14,className:r}),p.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),CT=({text:e,className:t})=>{const n=A.useRef(null),r=A.useRef(null);return A.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,f;t.includes("font-orbitron")?(u=8,f=16):(u=8,f=12);let d=f;for(s.style.fontSize=d+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&d>u;)d-=.5,s.style.fontSize=d+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),p.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:p.jsx("span",{ref:r,className:t,children:e})})},vi=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:f,scale:d=1,isViewOnly:m=!1})=>{let g=e.limit;l.forEach(G=>{G.mod.stat==="limit"&&(g+=G.mod.value)});const y=i>=g,b=n&&(!y||s),S=A.useMemo(()=>{const G={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(ie=>{ie.mod.stat==="cost"?G.cost=Math.max(0,G.cost+ie.mod.value):G.hasOwnProperty(ie.mod.stat)&&(G[ie.mod.stat]+=ie.mod.value)}),G},[e,l]),C=S.cost,E=S.attack>e.attack,w=S.attack<e.attack,T=E?"text-green-400":w?"text-red-400":"text-white",D=S.speed>e.speed,O=S.speed<e.speed,j=D?"text-green-400":O?"text-red-400":"text-white",N=S.cost<e.class,k=S.cost>e.class,B=N?"text-green-400":k?"text-red-400":"text-white",M=g>e.limit?"text-green-400":"text-white",{name:R,image:z,hull:W,shields:Z,abilities:Q}=e,I=d!==1?{transform:`scale(${d})`,transformOrigin:"center center"}:{};return p.jsx("div",{onClick:b?()=>t(e):void 0,className:`
        rounded-lg p-[4px] relative group
        transition-all duration-200
        ${b?"cursor-pointer":m?"cursor-default":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${!b&&!m?"opacity-60":""}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{width:"225px",height:"275px",clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...I},children:p.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[p.jsx("img",{src:z,alt:R,className:"absolute inset-0 w-full h-full object-cover"}),p.jsx("div",{className:"absolute inset-0 bg-black/40"}),p.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[p.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:p.jsx(CT,{text:R,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),p.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[p.jsx("div",{className:"w-10 h-12",children:p.jsx(nA,{value:S.attack,isFlat:!1,icon:DM,iconColor:"text-red-400",textColor:T})}),p.jsxs("div",{className:"flex flex-col items-center gap-1",children:[p.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:Z>0&&Array.from({length:Z}).map((G,ie)=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:p.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${ie}`))}),p.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:W}).map((G,ie)=>p.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${ie}`))})]}),p.jsx("div",{className:"w-12 h-12",children:p.jsx(nA,{value:S.speed,isFlat:!0,icon:o0,iconColor:"text-blue-400",textColor:j})})]}),p.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-48 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:Q&&Q.length>0?Q.map((G,ie)=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-xs text-purple-400 tracking-wider font-bold",children:G.name}),p.jsx("p",{className:"text-white text-xs leading-tight font-exo",children:G.description})]},ie)):p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-xs text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),p.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(Bf,{size:14,className:"text-yellow-300"}),p.jsx("span",{className:`font-bold text-base ml-1 ${B}`,children:C})]})]}),e.upgradeSlots>0&&p.jsxs("button",{onClick:G=>{G.stopPropagation(),f&&f(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[p.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),p.jsx("div",{className:"flex items-center",children:p.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),p.jsx("div",{className:"flex items-center",children:p.jsxs("span",{className:`font-bold text-base ${y?"text-pink-500":M}`,children:[i,"/",g]})})]})]})]})]})})},$a=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i,scale:s=1})=>{const{name:l,cost:u,image:f,description:d,type:m,effect:g}=e,y=g?.goAgain,b=e.id?.includes("_ENHANCED"),S=s!==1?{transform:`scale(${s})`,transformOrigin:"center center"}:{};return p.jsx("div",{onClick:C=>{C.stopPropagation(),K("CARD_PLAY",` ActionCard clicked: ${e.name}`,{cardId:e.id,cardName:e.name}),n||i?t(e):K("CARD_PLAY",` Card click blocked - not playable: ${e.name}`,{})},className:`
        rounded-lg p-[4px] relative group
        transition-all duration-200
        ${n||i?"cursor-pointer":"cursor-not-allowed"}
        ${b?"card-border-shimmer-silver":"card-border-rotate-purple"}
        ${!n&&!i?"opacity-60":""}
        ${i?"ring-4 ring-red-500 animate-pulse":""}
      `,style:{width:"225px",height:"275px",clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...S},children:p.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-purple-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[p.jsx("div",{className:"absolute inset-0 bg-slate-900"}),p.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[p.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-center py-1 px-3 bg-black/40 flex-shrink-0 h-8",children:[p.jsx("div",{className:"text-center min-w-0",children:p.jsx(CT,{text:l,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),p.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full flex-shrink-0",children:[p.jsx(Bf,{size:14,className:"text-yellow-300"}),p.jsx("span",{className:"text-white font-bold text-sm ml-1",children:u})]})]}),p.jsx("div",{className:"p-1 flex-shrink-0",children:p.jsx("div",{className:`relative h-[80px] rounded border overflow-hidden ${b?"border-slate-400/50":"border-purple-400/50"}`,children:p.jsx("img",{src:f,alt:l,className:"w-full h-full object-cover object-center",style:{objectFit:"cover"}})})}),p.jsx("div",{className:`mx-1 mb-1 flex-grow bg-black/60 backdrop-blur-sm border p-2 overflow-y-auto rounded-md ${b?"border-slate-600/70":"border-purple-800/70"}`,children:p.jsx("p",{className:"text-sm text-white leading-tight text-center font-exo font-normal",children:d})}),p.jsxs("div",{className:`grid grid-cols-[auto_1fr_auto] gap-2 items-center px-2 border-t flex-shrink-0 h-6 mt-auto ${b?"border-slate-600/70":"border-purple-800/70"}`,children:[p.jsx("div",{className:"w-4"}),p.jsx("div",{className:"flex items-center justify-center",children:p.jsxs("span",{className:`text-[10px] uppercase tracking-widest font-semibold ${b?"text-slate-400":"text-purple-400"}`,children:[m," Card"]})}),p.jsx("div",{className:"w-4 flex items-center justify-center",children:y&&p.jsx(bM,{size:14,className:"text-cyan-400",style:{marginLeft:"-20px"}})})]})]})]})})},xR=({onClick:e,ability:t,isUsable:n,isSelected:r})=>p.jsx("button",{onClick:e,disabled:!n,className:`w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 flex-shrink-0 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("circle",{cx:"12",cy:"12",r:"6"}),p.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),lo=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:f,isHovered:d,onMouseEnter:m,onMouseLeave:g,isCardTarget:y,isInMiddleLane:b,reallocationState:S,gameEngine:C,turnPhase:E,isMyTurn:w,passInfo:T,getLocalPlayerId:D,localPlayerState:O,shipAbilityMode:j,sectionRef:N})=>{if(i)return p.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:p.jsx("span",{className:"text-center",children:"Click to place section"})});const k=C.getShipStatus(t),B=k==="critical"?"bg-red-900/60":k==="damaged"?"bg-yellow-900/50":"bg-black/60";let F=k==="critical"?"border-red-500":k==="damaged"?"border-yellow-500":f?"border-pink-500":"border-cyan-500";const M=f?"shadow-pink-500/20":"shadow-cyan-500/20",R=d?"scale-105 shadow-xl":"";let z="";if(S)switch(S){case"can-remove":F="border-orange-400",z="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":F="border-orange-600",z="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":F="border-gray-600",z="opacity-50";break;case"can-add":F="border-green-400",z="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":F="border-green-600",z="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":F="border-gray-600",z="opacity-50";break}const W=y?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",Z=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,I=>I.toUpperCase()),Q={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return p.jsxs("div",{ref:N,className:`
        relative rounded-xl shadow-lg ${M} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${F}
        ${u?`cursor-pointer ${R}`:""}
        ${W}
        ${z}
      `,style:Q,onClick:s,onMouseEnter:m,onMouseLeave:g,children:[p.jsx("div",{className:`absolute inset-0 ${B}`}),p.jsxs("div",{className:"relative z-10 flex flex-col items-center p-2 h-full",children:[p.jsxs("div",{className:"flex items-center justify-between w-full mb-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("p",{className:"font-bold text-lg text-white",children:t.name||Z}),p.jsx("div",{className:`flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${k==="healthy"?"bg-green-500/20 text-green-300":k==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:k.charAt(0).toUpperCase()+k.slice(1)})]}),r&&t.ability&&p.jsx(xR,{ability:t.ability,isUsable:E==="action"&&w()&&!T[`${D()}Passed`]&&O.energy>=t.ability.cost.energy,isSelected:j?.ability.id===t.ability.id,onClick:I=>l(I,{...t,name:e},t.ability)})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[p.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([I,G])=>{const ie=b&&t.middleLaneBonus&&t.middleLaneBonus[I];return p.jsxs("span",{className:"flex items-center text-xs",children:[p.jsxs("span",{className:"font-semibold mr-1",children:[I,":"]}),p.jsx("span",{className:ie?"text-green-400 font-bold":"",children:G})]},I)})}),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((I,G)=>p.jsx("div",{children:G<t.allocatedShields?p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:p.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:p.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},G))}),p.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((I,G)=>{const ie=G+1,{critical:le,damaged:$}=t.thresholds;let q;ie<=le?q="bg-red-500":ie<=$?q="bg-orange-500":q="bg-green-500";const V=G<t.hull;return p.jsx("div",{className:`h-4 w-4 rounded-sm ${V?q:"bg-gray-400"} border border-black/50`},G)})})]}),p.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:t.ability&&p.jsxs(p.Fragment,{children:[p.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight mb-1",children:t.ability.name}),p.jsx("p",{className:"text-xs text-white leading-tight",children:t.ability.description})]})})]})]})]})},Ev=({isOpen:e,onClose:t,title:n,drones:r=[],cards:i=[],shipComponents:s={}})=>{if(!e)return null;const l=[...r].sort((d,m)=>d.class-m.class),u=[...i].sort((d,m)=>d.card.cost-m.card.cost),f=(d,m)=>{const g=d.stats.healthy,y=d.middleLaneBonus||{},b={};return Object.keys(g).forEach(S=>{b[S]=g[S]+(m&&y[S]||0)}),b};return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 max-w-[1500px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:d=>d.stopPropagation(),children:[p.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[p.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:n}),p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:p.jsx(ln,{size:32})})]}),p.jsxs("div",{className:"overflow-y-auto flex-grow pr-4",children:[Object.keys(s).length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-xl font-orbitron text-yellow-400 mb-3",children:"Ship Layout"}),p.jsx("div",{className:"grid grid-cols-3 gap-4 mb-4",children:["l","m","r"].map((d,m)=>{const g=Object.entries(s).find(([b,S])=>S===d),y=g?rr.find(b=>b.id===g[0]):null;return p.jsxs("div",{children:[p.jsx("div",{className:"text-center mb-2",children:p.jsx("span",{className:`font-bold text-sm ${m===1?"text-yellow-400":"text-cyan-400"}`,children:m===1?"MIDDLE (Bonus)":m===0?"LEFT":"RIGHT"})}),y?p.jsx("div",{className:"h-[200px]",children:p.jsx(lo,{section:y.key,stats:y,effectiveStatsForDisplay:f(y,m===1),isPlayer:!0,isInMiddleLane:m===1,gameEngine:Le,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})}):p.jsx("div",{className:"h-[200px] bg-gray-800/30 rounded-lg border-2 border-dashed border-gray-600 flex items-center justify-center",children:p.jsx("span",{className:"text-center text-gray-500 italic text-xs",children:"Empty Lane"})})]},d)})}),p.jsx("div",{className:"border-t border-purple-500/30 mb-6"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("h3",{className:"text-xl font-orbitron text-cyan-400 mb-3",children:["Drones (",l.length,")"]}),l.length>0?p.jsx("div",{className:"max-w-[1165px] mx-auto",children:p.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:l.map((d,m)=>p.jsx("div",{children:p.jsx(vi,{drone:d,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,appliedUpgrades:[],isViewOnly:!0})},`${d.name}-${m}`))})}):p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsx("p",{className:"text-gray-500 text-xl italic",children:"No drones selected"})})]}),p.jsx("div",{className:"border-t border-purple-500/30 mb-6"}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("h3",{className:"text-xl font-orbitron text-purple-400 mb-3",children:["Cards (",u.reduce((d,m)=>d+m.quantity,0),")"]}),u.length>0?p.jsx("div",{className:"max-w-[1165px] mx-auto",children:p.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:u.map((d,m)=>p.jsxs("div",{className:"relative",children:[p.jsx($a,{card:d.card,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1}),d.quantity>1&&p.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white font-bold text-sm px-2 py-1 rounded z-10",children:["x",d.quantity]})]},`${d.card.id}-${m}`))})}):p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsx("p",{className:"text-gray-500 text-xl italic",children:"No cards in deck"})})]})]})]})})};function SR(){const{gameState:e,gameStateManager:t}=Ai(),[n,r]=A.useState(null),[i,s]=A.useState(!1),[l,u]=A.useState(null),f=e.gameMode==="local",d=e.gameMode!=="local";A.useEffect(()=>{d&&t.setupP2PIntegration(Yn)},[d]);const m=()=>{t.setState({appState:"menu",gameMode:"local"})},g=E=>{K("PHASE_TRANSITIONS"," Selected AI:",E.name),r(E)},y=()=>{if(f&&n){if(K("PHASE_TRANSITIONS"," Starting single player game with AI:",n.name),!n.dronePool||!Array.isArray(n.dronePool)){const T=`Cannot start game: AI '${n.name}' has invalid dronePool configuration.`;console.error("",T),alert(T);return}if(n.dronePool.length<5){const T=`Cannot start game: AI '${n.name}' has only ${n.dronePool.length} drones. Minimum 5 drones required.`;console.error("",T),alert(T);return}if(n.dronePool.length>10){const T=`Cannot start game: AI '${n.name}' has ${n.dronePool.length} drones. Maximum 10 drones allowed.`;console.error("",T),alert(T);return}K("PHASE_TRANSITIONS",` AI drone pool validated: ${n.dronePool.length} drones`);const E=yt.filter(T=>n.dronePool.includes(T.name)),w={};E.forEach(T=>{w[T.name]=0}),Cr.initialize(Gf,yt,n,t.actionProcessor,t),K("PHASE_TRANSITIONS"," AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:E,deployedDroneCounts:w,aiPersonality:n})}},b=()=>{const E=Yn.isHost,w=E?"host":"guest";t.startGame(w,{name:E?"Host Player":"Guest Player"},{name:E?"Guest Player":"Host Player"})},S=E=>{K("LOBBY"," Opening deck view for AI:",E.name),u(E),s(!0)},C=E=>{if(!E)return{drones:[],cards:[],shipComponents:{}};const w=yt.filter(j=>E.dronePool.includes(j.name)),T=E.decklist.filter(j=>j.quantity>0).map(j=>({card:Nn.find(N=>N.id===j.id),quantity:j.quantity})).filter(j=>j.card),D={},O=["l","m","r"];return E.shipDeployment.placement.forEach((j,N)=>{const k=rr.find(B=>B.key===j);k&&(D[k.id]=O[N])}),{drones:w,cards:T,shipComponents:D}};return p.jsxs("div",{className:"body-font",style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",minHeight:"100vh",color:"#ffffff",padding:"60px 20px 20px 20px",boxSizing:"border-box",position:"relative"},children:[p.jsxs("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[f?p.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"2rem"},children:[p.jsx("h2",{"aria-hidden":"true",className:"heading-font",style:{position:"absolute",fontSize:"3.5rem",margin:0,textAlign:"center",color:"#ef4444",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0,fontWeight:"bold"},children:"SELECT OPPONENT"}),p.jsx("h2",{"aria-hidden":"true",className:"heading-font",style:{position:"absolute",fontSize:"3.5rem",margin:0,textAlign:"center",color:"#ff9944",mixBlendMode:"screen",pointerEvents:"none",left:0,top:0,zIndex:0,fontWeight:"bold"},children:"SELECT OPPONENT"}),p.jsx("h2",{className:"defeat-glow heading-font",style:{fontSize:"3.5rem",margin:0,textAlign:"center",background:"linear-gradient(90deg, #dc2626, #ef4444, #fca5a5, #ffffff, #fca5a5, #ef4444, #dc2626)",backgroundSize:"300% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",filter:"drop-shadow(0 0 10px rgba(239, 68, 68, 0.3))",position:"relative",zIndex:1,fontWeight:"bold"},children:"SELECT OPPONENT"})]}):p.jsx("h2",{className:"body-font",style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:"MULTIPLAYER SETUP"}),f&&p.jsx("div",{style:{maxWidth:"600px",width:"100%",marginBottom:"2rem"},children:p.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginBottom:"2rem"},children:Gf.map(E=>p.jsxs("div",{className:`ai-opponent-card ${n?.name===E.name?"selected":""}`,onClick:()=>g(E),children:[p.jsx("div",{className:"ai-opponent-card-bg",style:{backgroundImage:`url(${E.imagePath})`}}),p.jsx("div",{className:"ai-opponent-card-overlay"}),p.jsxs("div",{className:"ai-opponent-card-content",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"body-font",style:{margin:"0 0 8px 0",fontSize:"1.8rem",fontWeight:"bold",color:"#ffffff",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px"},children:E.name}),p.jsx("p",{className:"body-font",style:{margin:"0",fontSize:"1rem",color:"#dddddd",lineHeight:"1.4",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:E.description})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("div",{className:"body-font",style:{fontSize:"0.9rem",fontWeight:"bold",color:"#ffcc00",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",textTransform:"uppercase",letterSpacing:"1px"},children:["Difficulty: ",E.difficulty]}),p.jsx("button",{onClick:w=>{w.stopPropagation(),S(E)},className:"btn-info",children:"View Deck"})]})]})]},E.name))})}),d&&p.jsx(bR,{onGameStart:b,onBack:m}),f&&p.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[p.jsx("button",{onClick:m,className:"btn-cancel",children:"BACK TO MENU"}),p.jsx("button",{onClick:y,disabled:!n,className:"btn-continue",children:"START GAME"})]})]}),i&&l&&p.jsx(Ev,{isOpen:i,onClose:()=>{s(!1),u(null)},title:`${l.name} - Complete Loadout`,...C(l)})]})}const wv=({phase:e,localPlayerStatus:t})=>p.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:p.jsxs("div",{className:"text-center p-8",children:[p.jsx(hl,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),p.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),p.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&p.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[p.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:" Your Selection Complete"}),p.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function CR(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i}=Ai(),{turnPhase:s}=e;i();const l=t(),u=`${l}DroneSelectionTrio`,f=`${l}DroneSelectionPool`,d=e[u],m=e[f];K("DRONE_SELECTION","DroneSelectionScreen render:",{trioLength:d?.length,poolLength:m?.length,trioData:d?.map(k=>k.name),player1Trio:e.player1DroneSelectionTrio?.map(k=>k.name),player2Trio:e.player2DroneSelectionTrio?.map(k=>k.name),gameMode:e.gameMode});const[g,y]=A.useState([]),[b,S]=A.useState(d||[]),[C,E]=A.useState(m||[]),w=k=>{if(s!=="droneSelection")return;K("DRONE_SELECTION"," handleChooseDroneForSelection called with:",k.name);const B=[...g,k];if(y(B),B.length<5){const F=zI(C,2);S(F.droneSelectionTrio),E(F.droneSelectionPool),K("DRONE_SELECTION"," Advanced to next pair locally, selected:",B.length)}},T=()=>{if(s!=="droneSelection")return;K("DRONE_SELECTION"," handleContinueDroneSelection called with:",g.length);const B={playerId:t(),phase:"droneSelection",actionData:{drones:g}};if(K("DRONE_SELECTION","Submitting commitment:",{gameMode:e.gameMode,droneCount:g.length,commitmentsBefore:e.commitments?.droneSelection}),e.gameMode==="guest"){Yn.sendActionToHost("commitment",B);return}Ge.actionProcessor.queueAction({type:"commitment",payload:B}).then(F=>{if(!F.success){console.error(" Drone selection submission failed:",F.error);return}}).catch(F=>{console.error(" Drone selection submission error:",F)})};A.useEffect(()=>{d&&d.length>0&&b.length===0&&S(d),m&&m.length>0&&C.length===0&&E(m)},[d,m]),A.useEffect(()=>{e.gameMode==="guest"&&Ge.emit("render_complete")},[e,Ge]);const D=n(),O=e.commitments?.droneSelection?.[l]?.completed||!1,j=e.commitments?.droneSelection?.[D]?.completed||!1;if(K("DRONE_SELECTION","Render check:",{gameMode:e.gameMode,isMultiplayer:r(),fullCommitmentsObject:e.commitments?.droneSelection,willShowWaiting:r()&&O&&!j}),r()&&O&&!j){const k=e.commitments?.droneSelection?.[l]?.drones||g,B=k.length>0?k.map(F=>F.name).join(", "):"Selection complete";return p.jsx(wv,{phase:"droneSelection",localPlayerStatus:`You selected: ${B}`})}const N=g.length===5;return p.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[p.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),p.jsxs("div",{className:"flex flex-col items-center w-full p-4 relative z-10",children:[p.jsx("h2",{className:"text-3xl font-bold mb-8 text-white text-center",children:"Select Your Active Drone Pool"}),N?null:p.jsxs(p.Fragment,{children:[p.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",g.length+1," of 5: Select one drone from the two options below for your Active Drone Pool."]}),b&&b.length>0&&p.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:b.map((k,B)=>p.jsx(vi,{drone:k,onClick:()=>w(k),isSelectable:!0,deployedCount:0},k.name||B))})]}),N&&p.jsx("button",{onClick:T,className:"btn-continue mb-8",children:"Continue to Ship Placement"}),p.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[p.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",g.length,"/5)",N&&p.jsx("span",{className:"text-green-400 ml-2",children:""})]}),g.length>0?p.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:g.map((k,B)=>p.jsx(vi,{drone:k,isSelectable:!1,deployedCount:0,isViewOnly:!0},B))}):p.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function AT(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=AT(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ft(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=AT(e))&&(r&&(r+=" "),r+=t);return r}var Dg={},Og={},rA;function AR(){return rA||(rA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Og)),Og}var _g={},aA;function ET(){return aA||(aA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(_g)),_g}var Ng={},iA;function wT(){return iA||(iA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Ng)),Ng}var jg={},sA;function Pv(){return sA||(sA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",f=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const d=n[s];u?d==="\\"&&s+1<i?(s++,l+=n[s]):d===u?u="":l+=d:f?d==='"'||d==="'"?u=d:d==="]"?(f=!1,r.push(l),l=""):l+=d:d==="["?(f=!0,l&&(r.push(l),l="")):d==="."?l&&(r.push(l),l=""):l+=d,s++}return l&&r.push(l),r}e.toPath=t})(jg)),jg}var oA;function Tv(){return oA||(oA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AR(),n=ET(),r=wT(),i=Pv();function s(u,f,d){if(u==null)return d;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return d;const m=u[f];return m===void 0?n.isDeepKey(f)?s(u,i.toPath(f),d):d:m}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const m=u[f];return m===void 0?d:m}default:{if(Array.isArray(f))return l(u,f,d);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return d;const m=u[f];return m===void 0?d:m}}}function l(u,f,d){if(f.length===0)return d;let m=u;for(let g=0;g<f.length;g++){if(m==null||t.isUnsafeProperty(f[g]))return d;m=m[f[g]]}return m===void 0?d:m}e.get=s})(Dg)),Dg}var kg,lA;function ER(){return lA||(lA=1,kg=Tv().get),kg}var wR=ER();const co=xa(wR);var Mg={exports:{}},gt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA;function PR(){if(cA)return gt;cA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function S(C){if(typeof C=="object"&&C!==null){var E=C.$$typeof;switch(E){case e:switch(C=C.type,C){case n:case i:case r:case f:case d:case y:return C;default:switch(C=C&&C.$$typeof,C){case l:case u:case g:case m:return C;case s:return C;default:return E}}case t:return E}}}return gt.ContextConsumer=s,gt.ContextProvider=l,gt.Element=e,gt.ForwardRef=u,gt.Fragment=n,gt.Lazy=g,gt.Memo=m,gt.Portal=t,gt.Profiler=i,gt.StrictMode=r,gt.Suspense=f,gt.SuspenseList=d,gt.isContextConsumer=function(C){return S(C)===s},gt.isContextProvider=function(C){return S(C)===l},gt.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===e},gt.isForwardRef=function(C){return S(C)===u},gt.isFragment=function(C){return S(C)===n},gt.isLazy=function(C){return S(C)===g},gt.isMemo=function(C){return S(C)===m},gt.isPortal=function(C){return S(C)===t},gt.isProfiler=function(C){return S(C)===i},gt.isStrictMode=function(C){return S(C)===r},gt.isSuspense=function(C){return S(C)===f},gt.isSuspenseList=function(C){return S(C)===d},gt.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===n||C===i||C===r||C===f||C===d||typeof C=="object"&&C!==null&&(C.$$typeof===g||C.$$typeof===m||C.$$typeof===l||C.$$typeof===s||C.$$typeof===u||C.$$typeof===b||C.getModuleId!==void 0)},gt.typeOf=S,gt}var uA;function TR(){return uA||(uA=1,Mg.exports=PR()),Mg.exports}var DR=TR(),bn=e=>e===0?0:e>0?1:-1,Pr=e=>typeof e=="number"&&e!=+e,Zs=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ie=e=>(typeof e=="number"||e instanceof Number)&&!Pr(e),Ia=e=>Ie(e)||typeof e=="string",OR=0,yu=e=>{var t=++OR;return"".concat(e||"").concat(t)},$n=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ie(t)&&typeof t!="string")return r;var s;if(Zs(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return Pr(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},PT=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function _n(e,t,n){return Ie(e)&&Ie(t)?e+n*(t-e):t}function _R(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):co(r,t))===n)}var xn=e=>e===null||typeof e>"u",Tu=e=>xn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),NR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Dv(e){if(typeof e!="string")return!1;var t=NR;return t.includes(e)}var jR=["viewBox","children"],dA=["points","pathLength"],Ig={svg:jR,polygon:dA,polyline:dA},kR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(A.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Dv(i)&&(r[i]=(s=>n[i](n,s)))}),r},MR=(e,t,n)=>r=>(e(t,n,r),null),Du=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];Dv(i)&&typeof s=="function"&&(r||(r={}),r[i]=MR(s,t,n))}),r},IR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function TT(e){if(typeof e!="string")return!1;var t=IR;return t.includes(e)}function vo(e){var t=Object.entries(e).filter(n=>{var[r]=n;return TT(r)});return Object.fromEntries(t)}var fA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",pA=null,Rg=null,DT=e=>{if(e===pA&&Array.isArray(Rg))return Rg;var t=[];return A.Children.forEach(e,n=>{xn(n)||(DR.isFragment(n)?t=t.concat(DT(n.props.children)):t.push(n))}),Rg=t,pA=e,t};function Ov(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>fA(i)):r=[fA(t)],DT(e).forEach(i=>{var s=co(i,"type.displayName")||co(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var RR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&Ig?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||TT(t)),f=!!n&&Dv(t);return l||u||f},Jt=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(A.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;RR((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},LR=["children","width","height","viewBox","className","style","title","desc"];function b0(){return b0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b0.apply(null,arguments)}function $R(e,t){if(e==null)return{};var n,r,i=BR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var _v=A.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:f,desc:d}=e,m=$R(e,LR),g=s||{width:r,height:i,x:0,y:0},y=ft("recharts-surface",l);return A.createElement("svg",b0({},Jt(m,!0,"svg"),{className:y,width:r,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),A.createElement("title",null,f),A.createElement("desc",null,d),n)}),zR=["children","className"];function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x0.apply(null,arguments)}function UR(e,t){if(e==null)return{};var n,r,i=HR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var lr=A.forwardRef((e,t)=>{var{children:n,className:r}=e,i=UR(e,zR),s=ft("recharts-layer",r);return A.createElement("g",x0({className:s},Jt(i,!0),{ref:t}),n)}),OT=uP(),_T=A.createContext(null),GR=()=>A.useContext(_T);function wt(e){return function(){return e}}const NT=Math.cos,qf=Math.sin,Sa=Math.sqrt,Yf=Math.PI,Op=2*Yf,S0=Math.PI,C0=2*S0,Xs=1e-6,qR=C0-Xs;function jT(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function YR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return jT;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class FR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?jT:YR(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,f=r-t,d=i-n,m=l-t,g=u-n,y=m*m+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>Xs)if(!(Math.abs(g*f-d*m)>Xs)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let b=r-l,S=i-u,C=f*f+d*d,E=b*b+S*S,w=Math.sqrt(C),T=Math.sqrt(y),D=s*Math.tan((S0-Math.acos((C+y-E)/(2*w*T)))/2),O=D/T,j=D/w;Math.abs(O-1)>Xs&&this._append`L${t+O*m},${n+O*g}`,this._append`A${s},${s},0,0,${+(g*b>m*S)},${this._x1=t+j*f},${this._y1=n+j*d}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),f=r*Math.sin(i),d=t+u,m=n+f,g=1^l,y=l?i-s:s-i;this._x1===null?this._append`M${d},${m}`:(Math.abs(this._x1-d)>Xs||Math.abs(this._y1-m)>Xs)&&this._append`L${d},${m}`,r&&(y<0&&(y=y%C0+C0),y>qR?this._append`A${r},${r},0,1,${g},${t-u},${n-f}A${r},${r},0,1,${g},${this._x1=d},${this._y1=m}`:y>Xs&&this._append`A${r},${r},0,${+(y>=S0)},${g},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Nv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new FR(t)}function jv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kT(e){this._context=e}kT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function _p(e){return new kT(e)}function MT(e){return e[0]}function IT(e){return e[1]}function RT(e,t){var n=wt(!0),r=null,i=_p,s=null,l=Nv(u);e=typeof e=="function"?e:e===void 0?MT:wt(e),t=typeof t=="function"?t:t===void 0?IT:wt(t);function u(f){var d,m=(f=jv(f)).length,g,y=!1,b;for(r==null&&(s=i(b=l())),d=0;d<=m;++d)!(d<m&&n(g=f[d],d,f))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(g,d,f),+t(g,d,f));if(b)return s=null,b+""||null}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:wt(+f),u):e},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:wt(+f),u):t},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:wt(!!f),u):n},u.curve=function(f){return arguments.length?(i=f,r!=null&&(s=i(r)),u):i},u.context=function(f){return arguments.length?(f==null?r=s=null:s=i(r=f),u):r},u}function ff(e,t,n){var r=null,i=wt(!0),s=null,l=_p,u=null,f=Nv(d);e=typeof e=="function"?e:e===void 0?MT:wt(+e),t=typeof t=="function"?t:wt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?IT:wt(+n);function d(g){var y,b,S,C=(g=jv(g)).length,E,w=!1,T,D=new Array(C),O=new Array(C);for(s==null&&(u=l(T=f())),y=0;y<=C;++y){if(!(y<C&&i(E=g[y],y,g))===w)if(w=!w)b=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=y-1;S>=b;--S)u.point(D[S],O[S]);u.lineEnd(),u.areaEnd()}w&&(D[y]=+e(E,y,g),O[y]=+t(E,y,g),u.point(r?+r(E,y,g):D[y],n?+n(E,y,g):O[y]))}if(T)return u=null,T+""||null}function m(){return RT().defined(i).curve(l).context(s)}return d.x=function(g){return arguments.length?(e=typeof g=="function"?g:wt(+g),r=null,d):e},d.x0=function(g){return arguments.length?(e=typeof g=="function"?g:wt(+g),d):e},d.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:wt(+g),d):r},d.y=function(g){return arguments.length?(t=typeof g=="function"?g:wt(+g),n=null,d):t},d.y0=function(g){return arguments.length?(t=typeof g=="function"?g:wt(+g),d):t},d.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:wt(+g),d):n},d.lineX0=d.lineY0=function(){return m().x(e).y(t)},d.lineY1=function(){return m().x(e).y(n)},d.lineX1=function(){return m().x(r).y(t)},d.defined=function(g){return arguments.length?(i=typeof g=="function"?g:wt(!!g),d):i},d.curve=function(g){return arguments.length?(l=g,s!=null&&(u=l(s)),d):l},d.context=function(g){return arguments.length?(g==null?s=u=null:u=l(s=g),d):s},d}class LT{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function VR(e){return new LT(e,!0)}function KR(e){return new LT(e,!1)}const kv={draw(e,t){const n=Sa(t/Yf);e.moveTo(n,0),e.arc(0,0,n,0,Op)}},WR={draw(e,t){const n=Sa(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},$T=Sa(1/3),XR=$T*2,QR={draw(e,t){const n=Sa(t/XR),r=n*$T;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},JR={draw(e,t){const n=Sa(t),r=-n/2;e.rect(r,r,n,n)}},ZR=.8908130915292852,BT=qf(Yf/10)/qf(7*Yf/10),e5=qf(Op/10)*BT,t5=-NT(Op/10)*BT,n5={draw(e,t){const n=Sa(t*ZR),r=e5*n,i=t5*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=Op*s/5,u=NT(l),f=qf(l);e.lineTo(f*n,-u*n),e.lineTo(u*r-f*i,f*r+u*i)}e.closePath()}},Lg=Sa(3),r5={draw(e,t){const n=-Sa(t/(Lg*3));e.moveTo(0,n*2),e.lineTo(-Lg*n,-n),e.lineTo(Lg*n,-n),e.closePath()}},Yr=-.5,Fr=Sa(3)/2,A0=1/Sa(12),a5=(A0/2+1)*3,i5={draw(e,t){const n=Sa(t/a5),r=n/2,i=n*A0,s=r,l=n*A0+n,u=-s,f=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,f),e.lineTo(Yr*r-Fr*i,Fr*r+Yr*i),e.lineTo(Yr*s-Fr*l,Fr*s+Yr*l),e.lineTo(Yr*u-Fr*f,Fr*u+Yr*f),e.lineTo(Yr*r+Fr*i,Yr*i-Fr*r),e.lineTo(Yr*s+Fr*l,Yr*l-Fr*s),e.lineTo(Yr*u+Fr*f,Yr*f-Fr*u),e.closePath()}};function s5(e,t){let n=null,r=Nv(i);e=typeof e=="function"?e:wt(e||kv),t=typeof t=="function"?t:wt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:wt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:wt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Ff(){}function Vf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function zT(e){this._context=e}zT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function o5(e){return new zT(e)}function UT(e){this._context=e}UT.prototype={areaStart:Ff,areaEnd:Ff,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function l5(e){return new UT(e)}function HT(e){this._context=e}HT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c5(e){return new HT(e)}function GT(e){this._context=e}GT.prototype={areaStart:Ff,areaEnd:Ff,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function u5(e){return new GT(e)}function hA(e){return e<0?-1:1}function mA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(hA(s)+hA(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function gA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function $g(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function Kf(e){this._context=e}Kf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$g(this,this._t0,gA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,$g(this,gA(this,n=mA(this,e,t)),n);break;default:$g(this,this._t0,n=mA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function qT(e){this._context=new YT(e)}(qT.prototype=Object.create(Kf.prototype)).point=function(e,t){Kf.prototype.point.call(this,t,e)};function YT(e){this._context=e}YT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function d5(e){return new Kf(e)}function f5(e){return new qT(e)}function FT(e){this._context=e}FT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=yA(e),i=yA(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yA(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function p5(e){return new FT(e)}function Np(e,t){this._context=e,this._t=t}Np.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function h5(e){return new Np(e,.5)}function m5(e){return new Np(e,0)}function g5(e){return new Np(e,1)}function Cl(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function E0(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function y5(e,t){return e[t]}function v5(e){const t=[];return t.key=e,t}function b5(){var e=wt([]),t=E0,n=Cl,r=y5;function i(s){var l=Array.from(e.apply(this,arguments),v5),u,f=l.length,d=-1,m;for(const g of s)for(u=0,++d;u<f;++u)(l[u][d]=[0,+r(g,l[u].key,d,s)]).data=g;for(u=0,m=jv(t(l));u<f;++u)l[m[u]].index=u;return n(l,m),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:wt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:wt(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?E0:typeof s=="function"?s:wt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Cl,i):n},i}function x5(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}Cl(e,t)}}function S5(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}Cl(e,t)}}function C5(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,f=0,d=0;u<l;++u){for(var m=e[t[u]],g=m[r][1]||0,y=m[r-1][1]||0,b=(g-y)/2,S=0;S<u;++S){var C=e[t[S]],E=C[r][1]||0,w=C[r-1][1]||0;b+=E-w}f+=g,d+=b*g}i[r-1][1]+=i[r-1][0]=n,f&&(n-=d/f)}i[r-1][1]+=i[r-1][0]=n,Cl(e,t)}}var A5=["type","size","sizeType"];function w0(){return w0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w0.apply(null,arguments)}function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(n),!0).forEach(function(r){E5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E5(e,t,n){return(t=w5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w5(e){var t=P5(e,"string");return typeof t=="symbol"?t:t+""}function P5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T5(e,t){if(e==null)return{};var n,r,i=D5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function D5(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var VT={symbolCircle:kv,symbolCross:WR,symbolDiamond:QR,symbolSquare:JR,symbolStar:n5,symbolTriangle:r5,symbolWye:i5},O5=Math.PI/180,_5=e=>{var t="symbol".concat(Tu(e));return VT[t]||kv},N5=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*O5;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},j5=(e,t)=>{VT["symbol".concat(Tu(e))]=t},Mv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=T5(e,A5),s=bA(bA({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=_5(l),b=s5().type(y).size(N5(n,r,l));return b()},{className:f,cx:d,cy:m}=s,g=Jt(s,!0);return d===+d&&m===+m&&n===+n?A.createElement("path",w0({},g,{className:ft("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(m,")"),d:u()})):null};Mv.registerSymbol=j5;function P0(){return P0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P0.apply(null,arguments)}function xA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function k5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(n),!0).forEach(function(r){Iv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Iv(e,t,n){return(t=M5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M5(e){var t=I5(e,"string");return typeof t=="symbol"?t:t+""}function I5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vr=32;class Rv extends A.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Vr/2,s=Vr/6,l=Vr/3,u=t.inactive?r:t.color,f=n??t.type;if(f==="none")return null;if(f==="plainline")return A.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Vr,y2:i,className:"recharts-legend-icon"});if(f==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Vr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return A.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Vr/8,"h").concat(Vr,"v").concat(Vr*3/4,"h").concat(-Vr,"z"),className:"recharts-legend-icon"});if(A.isValidElement(t.legendIcon)){var d=k5({},t);return delete d.legendIcon,A.cloneElement(t.legendIcon,d)}return A.createElement(Mv,{fill:u,cx:i,cy:i,size:Vr,sizeType:"diameter",type:f})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:Vr,height:Vr},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,g)=>{var y=m.formatter||i,b=ft({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:m.inactive});if(m.type==="none")return null;var S=m.inactive?s:m.color,C=y?y(m.value,m,g):m.value;return A.createElement("li",P0({className:b,style:f,key:"legend-item-".concat(g)},Du(this.props,m,g)),A.createElement(_v,{width:n,height:n,viewBox:u,style:d,"aria-label":"".concat(C," legend icon")},this.renderIcon(m,l)),A.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},C))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Iv(Rv,"displayName","Legend");Iv(Rv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Bg={},zg={},SA;function R5(){return SA||(SA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(zg)),zg}var Ug={},CA;function KT(){return CA||(CA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Ug)),Ug}var Hg={},Gg={},qg={},AA;function L5(){return AA||(AA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(qg)),qg}var EA;function Lv(){return EA||(EA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(Gg)),Gg}var Yg={},wA;function $5(){return wA||(wA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Yg)),Yg}var PA;function B5(){return PA||(PA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lv(),n=$5();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(Hg)),Hg}var Fg={},Vg={},TA;function z5(){return TA||(TA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tv();function n(r){return function(i){return t.get(i,r)}}e.property=n})(Vg)),Vg}var Kg={},Wg={},Xg={},Qg={},DA;function WT(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Qg)),Qg}var Jg={},OA;function XT(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Jg)),Jg}var Zg={},_A;function QT(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Zg)),Zg}var NA;function U5(){return NA||(NA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$v(),n=WT(),r=XT(),i=QT();function s(g,y,b){return typeof b!="function"?t.isMatch(g,y):l(g,y,function S(C,E,w,T,D,O){const j=b(C,E,w,T,D,O);return j!==void 0?!!j:l(C,E,S,O)},new Map)}function l(g,y,b,S){if(y===g)return!0;switch(typeof y){case"object":return u(g,y,b,S);case"function":return Object.keys(y).length>0?l(g,{...y},b,S):i.eq(g,y);default:return n.isObject(g)?typeof y=="string"?y==="":!0:i.eq(g,y)}}function u(g,y,b,S){if(y==null)return!0;if(Array.isArray(y))return d(g,y,b,S);if(y instanceof Map)return f(g,y,b,S);if(y instanceof Set)return m(g,y,b,S);const C=Object.keys(y);if(g==null)return C.length===0;if(C.length===0)return!0;if(S&&S.has(y))return S.get(y)===g;S&&S.set(y,g);try{for(let E=0;E<C.length;E++){const w=C[E];if(!r.isPrimitive(g)&&!(w in g)||y[w]===void 0&&g[w]!==void 0||y[w]===null&&g[w]!==null||!b(g[w],y[w],w,g,y,S))return!1}return!0}finally{S&&S.delete(y)}}function f(g,y,b,S){if(y.size===0)return!0;if(!(g instanceof Map))return!1;for(const[C,E]of y.entries()){const w=g.get(C);if(b(w,E,C,g,y,S)===!1)return!1}return!0}function d(g,y,b,S){if(y.length===0)return!0;if(!Array.isArray(g))return!1;const C=new Set;for(let E=0;E<y.length;E++){const w=y[E];let T=!1;for(let D=0;D<g.length;D++){if(C.has(D))continue;const O=g[D];let j=!1;if(b(O,w,E,g,y,S)&&(j=!0),j){C.add(D),T=!0;break}}if(!T)return!1}return!0}function m(g,y,b,S){return y.size===0?!0:g instanceof Set?d([...g],[...y],b,S):!1}e.isMatchWith=s,e.isSetMatch=m})(Xg)),Xg}var jA;function $v(){return jA||(jA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U5();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Wg)),Wg}var ey={},ty={},ny={},kA;function H5(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(ny)),ny}var ry={},MA;function JT(){return MA||(MA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(ry)),ry}var ay={},IA;function ZT(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",f="[object Map]",d="[object Set]",m="[object Array]",g="[object Function]",y="[object ArrayBuffer]",b="[object Object]",S="[object Error]",C="[object DataView]",E="[object Uint8Array]",w="[object Uint8ClampedArray]",T="[object Uint16Array]",D="[object Uint32Array]",O="[object BigUint64Array]",j="[object Int8Array]",N="[object Int16Array]",k="[object Int32Array]",B="[object BigInt64Array]",F="[object Float32Array]",M="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=m,e.bigInt64ArrayTag=B,e.bigUint64ArrayTag=O,e.booleanTag=i,e.dataViewTag=C,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=F,e.float64ArrayTag=M,e.functionTag=g,e.int16ArrayTag=N,e.int32ArrayTag=k,e.int8ArrayTag=j,e.mapTag=f,e.numberTag=r,e.objectTag=b,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=T,e.uint32ArrayTag=D,e.uint8ArrayTag=E,e.uint8ClampedArrayTag=w})(ay)),ay}var iy={},RA;function G5(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(iy)),iy}var LA;function eD(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H5(),n=JT(),r=ZT(),i=XT(),s=G5();function l(m,g){return u(m,void 0,m,new Map,g)}function u(m,g,y,b=new Map,S=void 0){const C=S?.(m,g,y,b);if(C!==void 0)return C;if(i.isPrimitive(m))return m;if(b.has(m))return b.get(m);if(Array.isArray(m)){const E=new Array(m.length);b.set(m,E);for(let w=0;w<m.length;w++)E[w]=u(m[w],w,y,b,S);return Object.hasOwn(m,"index")&&(E.index=m.index),Object.hasOwn(m,"input")&&(E.input=m.input),E}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const E=new RegExp(m.source,m.flags);return E.lastIndex=m.lastIndex,E}if(m instanceof Map){const E=new Map;b.set(m,E);for(const[w,T]of m)E.set(w,u(T,w,y,b,S));return E}if(m instanceof Set){const E=new Set;b.set(m,E);for(const w of m)E.add(u(w,void 0,y,b,S));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(s.isTypedArray(m)){const E=new(Object.getPrototypeOf(m)).constructor(m.length);b.set(m,E);for(let w=0;w<m.length;w++)E[w]=u(m[w],w,y,b,S);return E}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const E=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return b.set(m,E),f(E,m,y,b,S),E}if(typeof File<"u"&&m instanceof File){const E=new File([m],m.name,{type:m.type});return b.set(m,E),f(E,m,y,b,S),E}if(m instanceof Blob){const E=new Blob([m],{type:m.type});return b.set(m,E),f(E,m,y,b,S),E}if(m instanceof Error){const E=new m.constructor;return b.set(m,E),E.message=m.message,E.name=m.name,E.stack=m.stack,E.cause=m.cause,f(E,m,y,b,S),E}if(typeof m=="object"&&d(m)){const E=Object.create(Object.getPrototypeOf(m));return b.set(m,E),f(E,m,y,b,S),E}return m}function f(m,g,y=m,b,S){const C=[...Object.keys(g),...t.getSymbols(g)];for(let E=0;E<C.length;E++){const w=C[E],T=Object.getOwnPropertyDescriptor(m,w);(T==null||T.writable)&&(m[w]=u(g[w],w,y,b,S))}}function d(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=f})(ty)),ty}var $A;function q5(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eD();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(ey)),ey}var BA;function Y5(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$v(),n=q5();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Kg)),Kg}var sy={},oy={},ly={},zA;function F5(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eD(),n=ZT();function r(i,s){return t.cloneDeepWith(i,(l,u,f,d)=>{const m=s?.(l,u,f,d);if(m!==void 0)return m;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i?.valueOf());return t.copyProperties(g,i),g}case n.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=r})(ly)),ly}var UA;function V5(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F5();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(oy)),oy}var cy={},uy={},HA;function tD(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(uy)),uy}var dy={},GA;function K5(){return GA||(GA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JT();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(dy)),dy}var qA;function W5(){return qA||(qA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ET(),n=tD(),r=K5(),i=Pv();function s(l,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?f=i.toPath(u):f=[u],f.length===0)return!1;let d=l;for(let m=0;m<f.length;m++){const g=f[m];if((d==null||!Object.hasOwn(d,g))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(g)&&g<d.length))return!1;d=d[g]}return!0}e.has=s})(cy)),cy}var YA;function X5(){return YA||(YA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$v(),n=wT(),r=V5(),i=Tv(),s=W5();function l(u,f){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return f=r.cloneDeep(f),function(d){const m=i.get(d,u);return m===void 0?s.has(d,u):f===void 0?m===void 0:t.isMatch(m,f)}}e.matchesProperty=l})(sy)),sy}var FA;function Q5(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KT(),n=z5(),r=Y5(),i=X5();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Fg)),Fg}var VA;function J5(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R5(),n=KT(),r=B5(),i=Q5();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(Bg)),Bg}var fy,KA;function Z5(){return KA||(KA=1,fy=J5().uniqBy),fy}var e3=Z5();const WA=xa(e3);function nD(e,t,n){return t===!0?WA(e,n):typeof t=="function"?WA(e,t):e}var py={exports:{}},hy={},my={exports:{}},gy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA;function t3(){if(XA)return gy;XA=1;var e=jl();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(g,y){var b=y(),S=r({inst:{value:b,getSnapshot:y}}),C=S[0].inst,E=S[1];return s(function(){C.value=b,C.getSnapshot=y,f(C)&&E({inst:C})},[g,b,y]),i(function(){return f(C)&&E({inst:C}),g(function(){f(C)&&E({inst:C})})},[g]),l(b),b}function f(g){var y=g.getSnapshot;g=g.value;try{var b=y();return!n(g,b)}catch{return!0}}function d(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return gy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,gy}var QA;function n3(){return QA||(QA=1,my.exports=t3()),my.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JA;function r3(){if(JA)return hy;JA=1;var e=jl(),t=n3();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,f=e.useDebugValue;return hy.useSyncExternalStoreWithSelector=function(d,m,g,y,b){var S=s(null);if(S.current===null){var C={hasValue:!1,value:null};S.current=C}else C=S.current;S=u(function(){function w(N){if(!T){if(T=!0,D=N,N=y(N),b!==void 0&&C.hasValue){var k=C.value;if(b(k,N))return O=k}return O=N}if(k=O,r(D,N))return k;var B=y(N);return b!==void 0&&b(k,B)?(D=N,k):(D=N,O=B)}var T=!1,D,O,j=g===void 0?null:g;return[function(){return w(m())},j===null?void 0:function(){return w(j())}]},[m,g,y,b]);var E=i(d,S[0],S[1]);return l(function(){C.hasValue=!0,C.value=E},[E]),f(E),E},hy}var ZA;function a3(){return ZA||(ZA=1,py.exports=r3()),py.exports}var i3=a3(),Bv=A.createContext(null),s3=e=>e,$t=()=>{var e=A.useContext(Bv);return e?e.store.dispatch:s3},If=()=>{},o3=()=>If,l3=(e,t)=>e===t;function De(e){var t=A.useContext(Bv);return i3.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:o3,t?t.store.getState:If,t?t.store.getState:If,t?e:If,l3)}function c3(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function u3(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function d3(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var eE=e=>Array.isArray(e)?e:[e];function f3(e){const t=Array.isArray(e[0])?e[0]:e;return d3(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function p3(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var h3=class{constructor(e){this.value=e}deref(){return this.value}},m3=typeof WeakRef<"u"?WeakRef:h3,g3=0,tE=1;function pf(){return{s:g3,v:void 0,o:null,p:null}}function rD(e,t={}){let n=pf();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:f}=arguments;for(let g=0,y=f;g<y;g++){const b=arguments[g];if(typeof b=="function"||typeof b=="object"&&b!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const C=S.get(b);C===void 0?(u=pf(),S.set(b,u)):u=C}else{let S=u.p;S===null&&(u.p=S=new Map);const C=S.get(b);C===void 0?(u=pf(),S.set(b,u)):u=C}}const d=u;let m;if(u.s===tE)m=u.v;else if(m=e.apply(null,arguments),s++,r){const g=i?.deref?.()??i;g!=null&&r(g,m)&&(m=g,s!==0&&s--),i=typeof m=="object"&&m!==null||typeof m=="function"?new m3(m):m}return d.s=tE,d.v=m,m}return l.clearCache=()=>{n=pf(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function y3(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,f={},d=i.pop();typeof d=="object"&&(f=d,d=i.pop()),c3(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const m={...n,...f},{memoize:g,memoizeOptions:y=[],argsMemoize:b=rD,argsMemoizeOptions:S=[]}=m,C=eE(y),E=eE(S),w=f3(i),T=g(function(){return s++,d.apply(null,arguments)},...C),D=b(function(){l++;const j=p3(w,arguments);return u=T.apply(null,j),u},...E);return Object.assign(D,{resultFunc:d,memoizedResultFunc:T,dependencies:w,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var se=y3(rD),v3=Object.assign((e,t=se)=>{u3(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,f)=>(l[n[f]]=u,l),{}))},{withTypes:()=>v3}),yy={},vy={},by={},nE;function b3(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(by)),by}var xy={},Sy={},rE;function aD(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Sy)),Sy}var aE;function x3(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aD(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(xy)),xy}var iE;function S3(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b3(),n=x3(),r=Pv();function i(s,l,u,f){if(s==null)return[];u=f?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(b=>String(b));const d=(b,S)=>{let C=b;for(let E=0;E<S.length&&C!=null;++E)C=C[S[E]];return C},m=(b,S)=>S==null||b==null?S:typeof b=="object"&&"key"in b?Object.hasOwn(S,b.key)?S[b.key]:d(S,b.path):typeof b=="function"?b(S):Array.isArray(b)?d(S,b):typeof S=="object"?S[b]:S,g=l.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:r.toPath(b)}));return s.map(b=>({original:b,criteria:g.map(S=>m(S,b))})).slice().sort((b,S)=>{for(let C=0;C<g.length;C++){const E=t.compareValues(b.criteria[C],S.criteria[C],u[C]);if(E!==0)return E}return 0}).map(b=>b.original)}e.orderBy=i})(vy)),vy}var Cy={},sE;function C3(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,f)=>{for(let d=0;d<u.length;d++){const m=u[d];Array.isArray(m)&&f<s?l(m,f+1):i.push(m)}};return l(n,0),i}e.flatten=t})(Cy)),Cy}var Ay={},oE;function iD(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tD(),n=Lv(),r=WT(),i=QT();function s(l,u,f){return r.isObject(f)&&(typeof u=="number"&&n.isArrayLike(f)&&t.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?i.eq(f[u],l):!1}e.isIterateeCall=s})(Ay)),Ay}var lE;function A3(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S3(),n=C3(),r=iD();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(yy)),yy}var Ey,cE;function E3(){return cE||(cE=1,Ey=A3().sortBy),Ey}var w3=E3();const jp=xa(w3);var sD=e=>e.legend.settings,P3=e=>e.legend.size,T3=e=>e.legend.payload,D3=se([T3,sD],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?jp(r,n):r});function O3(){return De(D3)}var hf=1;function oD(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>hf||Math.abs(l.left-t.left)>hf||Math.abs(l.top-t.top)>hf||Math.abs(l.width-t.width)>hf)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Dn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _3=typeof Symbol=="function"&&Symbol.observable||"@@observable",uE=_3,wy=()=>Math.random().toString(36).substring(7).split("").join("."),N3={INIT:`@@redux/INIT${wy()}`,REPLACE:`@@redux/REPLACE${wy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${wy()}`},Wf=N3;function zv(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function lD(e,t,n){if(typeof e!="function")throw new Error(Dn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Dn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Dn(1));return n(lD)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,f=!1;function d(){l===s&&(l=new Map,s.forEach((E,w)=>{l.set(w,E)}))}function m(){if(f)throw new Error(Dn(3));return i}function g(E){if(typeof E!="function")throw new Error(Dn(4));if(f)throw new Error(Dn(5));let w=!0;d();const T=u++;return l.set(T,E),function(){if(w){if(f)throw new Error(Dn(6));w=!1,d(),l.delete(T),s=null}}}function y(E){if(!zv(E))throw new Error(Dn(7));if(typeof E.type>"u")throw new Error(Dn(8));if(typeof E.type!="string")throw new Error(Dn(17));if(f)throw new Error(Dn(9));try{f=!0,i=r(i,E)}finally{f=!1}return(s=l).forEach(T=>{T()}),E}function b(E){if(typeof E!="function")throw new Error(Dn(10));r=E,y({type:Wf.REPLACE})}function S(){const E=g;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Dn(11));function T(){const O=w;O.next&&O.next(m())}return T(),{unsubscribe:E(T)}},[uE](){return this}}}return y({type:Wf.INIT}),{dispatch:y,subscribe:g,getState:m,replaceReducer:b,[uE]:S}}function j3(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Wf.INIT})>"u")throw new Error(Dn(12));if(typeof n(void 0,{type:Wf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Dn(13))})}function cD(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{j3(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let f=!1;const d={};for(let m=0;m<r.length;m++){const g=r[m],y=n[g],b=l[g],S=y(b,u);if(typeof S>"u")throw u&&u.type,new Error(Dn(14));d[g]=S,f=f||S!==b}return f=f||r.length!==Object.keys(l).length,f?d:l}}function Xf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function k3(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Dn(15))};const l={getState:i.getState,dispatch:(f,...d)=>s(f,...d)},u=e.map(f=>f(l));return s=Xf(...u)(i.dispatch),{...i,dispatch:s}}}function uD(e){return zv(e)&&"type"in e&&typeof e.type=="string"}var dD=Symbol.for("immer-nothing"),dE=Symbol.for("immer-draftable"),Tr=Symbol.for("immer-state");function va(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Al=Object.getPrototypeOf;function uo(e){return!!e&&!!e[Tr]}function bi(e){return e?fD(e)||Array.isArray(e)||!!e[dE]||!!e.constructor?.[dE]||Ou(e)||Mp(e):!1}var M3=Object.prototype.constructor.toString();function fD(e){if(!e||typeof e!="object")return!1;const t=Al(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===M3}function Qf(e,t){kp(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function kp(e){const t=e[Tr];return t?t.type_:Array.isArray(e)?1:Ou(e)?2:Mp(e)?3:0}function T0(e,t){return kp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pD(e,t,n){const r=kp(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function I3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ou(e){return e instanceof Map}function Mp(e){return e instanceof Set}function Qs(e){return e.copy_||e.base_}function D0(e,t){if(Ou(e))return new Map(e);if(Mp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=fD(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Tr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Al(e),r)}else{const r=Al(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Uv(e,t=!1){return Ip(e)||uo(e)||!bi(e)||(kp(e)>1&&Object.defineProperties(e,{set:{value:mf},add:{value:mf},clear:{value:mf},delete:{value:mf}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Uv(n,!0))),e}function mf(){va(2)}function Ip(e){return Object.isFrozen(e)}var R3={};function fo(e){const t=R3[e];return t||va(0,e),t}var vu;function hD(){return vu}function L3(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fE(e,t){t&&(fo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function O0(e){_0(e),e.drafts_.forEach($3),e.drafts_=null}function _0(e){e===vu&&(vu=e.parent_)}function pE(e){return vu=L3(vu,e)}function $3(e){const t=e[Tr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Tr].modified_&&(O0(t),va(4)),bi(e)&&(e=Jf(t,e),t.parent_||Zf(t,e)),t.patches_&&fo("Patches").generateReplacementPatches_(n[Tr].base_,e,t.patches_,t.inversePatches_)):e=Jf(t,n,[]),O0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dD?e:void 0}function Jf(e,t,n){if(Ip(t))return t;const r=t[Tr];if(!r)return Qf(t,(i,s)=>mE(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Zf(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),Qf(s,(u,f)=>mE(e,r,i,u,f,n,l)),Zf(e,i,!1),n&&e.patches_&&fo("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function mE(e,t,n,r,i,s,l){if(uo(i)){const u=s&&t&&t.type_!==3&&!T0(t.assigned_,r)?s.concat(r):void 0,f=Jf(e,i,u);if(pD(n,r,f),uo(f))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(bi(i)&&!Ip(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Jf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Ou(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Zf(e,i)}}function Zf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Uv(t,n)}function B3(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:hD(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Hv;n&&(i=[r],s=bu);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var Hv={get(e,t){if(t===Tr)return e;const n=Qs(e);if(!T0(n,t))return z3(e,n,t);const r=n[t];return e.finalized_||!bi(r)?r:r===Py(e.base_,t)?(Ty(e),e.copy_[t]=j0(r,e)):r},has(e,t){return t in Qs(e)},ownKeys(e){return Reflect.ownKeys(Qs(e))},set(e,t,n){const r=mD(Qs(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Py(Qs(e),t),s=i?.[Tr];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(I3(n,i)&&(n!==void 0||T0(e.base_,t)))return!0;Ty(e),N0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Py(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ty(e),N0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Qs(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){va(11)},getPrototypeOf(e){return Al(e.base_)},setPrototypeOf(){va(12)}},bu={};Qf(Hv,(e,t)=>{bu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});bu.deleteProperty=function(e,t){return bu.set.call(this,e,t,void 0)};bu.set=function(e,t,n){return Hv.set.call(this,e[0],t,n,e[0])};function Py(e,t){const n=e[Tr];return(n?Qs(n):e)[t]}function z3(e,t,n){const r=mD(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function mD(e,t){if(!(t in e))return;let n=Al(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Al(n)}}function N0(e){e.modified_||(e.modified_=!0,e.parent_&&N0(e.parent_))}function Ty(e){e.copy_||(e.copy_=D0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var U3=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(f=s,...d){return l.produce(f,m=>n.call(this,m,...d))}}typeof n!="function"&&va(6),r!==void 0&&typeof r!="function"&&va(7);let i;if(bi(t)){const s=pE(this),l=j0(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?O0(s):_0(s)}return fE(s,r),hE(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===dD&&(i=void 0),this.autoFreeze_&&Uv(i,!0),r){const s=[],l=[];fo("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else va(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,f=>t(f,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){bi(e)||va(8),uo(e)&&(e=gi(e));const t=pE(this),n=j0(e,void 0);return n[Tr].isManual_=!0,_0(t),n}finishDraft(e,t){const n=e&&e[Tr];(!n||!n.isManual_)&&va(9);const{scope_:r}=n;return fE(r,t),hE(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=fo("Patches").applyPatches_;return uo(e)?r(e,t):this.produce(e,i=>r(i,t))}};function j0(e,t){const n=Ou(e)?fo("MapSet").proxyMap_(e,t):Mp(e)?fo("MapSet").proxySet_(e,t):B3(e,t);return(t?t.scope_:hD()).drafts_.push(n),n}function gi(e){return uo(e)||va(10,e),gD(e)}function gD(e){if(!bi(e)||Ip(e))return e;const t=e[Tr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=D0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=D0(e,!0);return Qf(n,(r,i)=>{pD(n,r,gD(i))}),t&&(t.finalized_=!1),n}var H3=new U3,yD=H3.produce;function vD(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var G3=vD(),q3=vD,Y3=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Xf:Xf.apply(null,arguments)};function Jr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(wr(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>uD(r)&&r.type===e,n}var bD=class ou extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ou.prototype)}static get[Symbol.species](){return ou}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ou(...t[0].concat(this)):new ou(...t.concat(this))}};function gE(e){return bi(e)?yD(e,()=>{}):e}function gf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function F3(e){return typeof e=="boolean"}var V3=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new bD;return n&&(F3(n)?l.push(G3):l.push(q3(n.extraArgument))),l},K3="RTK_autoBatch",yE=e=>t=>{setTimeout(t,e)},W3=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:yE(10):e.type==="callback"?e.queueNotification:yE(e.timeout),d=()=>{l=!1,s&&(s=!1,u.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const g=()=>i&&m(),y=r.subscribe(g);return u.add(m),()=>{y(),u.delete(m)}},dispatch(m){try{return i=!m?.meta?.[K3],s=!i,s&&(l||(l=!0,f(d))),r.dispatch(m)}finally{i=!0}}})},X3=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new bD(e);return r&&i.push(W3(typeof r=="object"?r:void 0)),i};function Q3(e){const t=V3(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(zv(n))u=cD(n);else throw new Error(wr(1));let f;typeof r=="function"?f=r(t):f=t();let d=Xf;i&&(d=Y3({trace:!1,...typeof i=="object"&&i}));const m=k3(...f),g=X3(m);let y=typeof l=="function"?l(g):g();const b=d(...y);return lD(u,s,b)}function xD(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(wr(28));if(u in t)throw new Error(wr(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function J3(e){return typeof e=="function"}function Z3(e,t){let[n,r,i]=xD(t),s;if(J3(e))s=()=>gE(e());else{const u=gE(e);s=()=>u}function l(u=s(),f){let d=[n[f.type],...r.filter(({matcher:m})=>m(f)).map(({reducer:m})=>m)];return d.filter(m=>!!m).length===0&&(d=[i]),d.reduce((m,g)=>{if(g)if(uo(m)){const b=g(m,f);return b===void 0?m:b}else{if(bi(m))return yD(m,y=>g(y,f));{const y=g(m,f);if(y===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return m},u)}return l.getInitialState=s,l}var eL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tL=(e=21)=>{let t="",n=e;for(;n--;)t+=eL[Math.random()*64|0];return t},nL=Symbol.for("rtk-slice-createasyncthunk");function rL(e,t){return`${e}/${t}`}function aL({creators:e}={}){const t=e?.asyncThunk?.[nL];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(wr(11));const l=(typeof r.reducers=="function"?r.reducers(sL()):r.reducers)||{},u=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(D,O){const j=typeof D=="string"?D:D.type;if(!j)throw new Error(wr(12));if(j in f.sliceCaseReducersByType)throw new Error(wr(13));return f.sliceCaseReducersByType[j]=O,d},addMatcher(D,O){return f.sliceMatchers.push({matcher:D,reducer:O}),d},exposeAction(D,O){return f.actionCreators[D]=O,d},exposeCaseReducer(D,O){return f.sliceCaseReducersByName[D]=O,d}};u.forEach(D=>{const O=l[D],j={reducerName:D,type:rL(i,D),createNotation:typeof r.reducers=="function"};lL(O)?uL(j,O,d,t):oL(j,O,d)});function m(){const[D={},O=[],j=void 0]=typeof r.extraReducers=="function"?xD(r.extraReducers):[r.extraReducers],N={...D,...f.sliceCaseReducersByType};return Z3(r.initialState,k=>{for(let B in N)k.addCase(B,N[B]);for(let B of f.sliceMatchers)k.addMatcher(B.matcher,B.reducer);for(let B of O)k.addMatcher(B.matcher,B.reducer);j&&k.addDefaultCase(j)})}const g=D=>D,y=new Map,b=new WeakMap;let S;function C(D,O){return S||(S=m()),S(D,O)}function E(){return S||(S=m()),S.getInitialState()}function w(D,O=!1){function j(k){let B=k[D];return typeof B>"u"&&O&&(B=gf(b,j,E)),B}function N(k=g){const B=gf(y,O,()=>new WeakMap);return gf(B,k,()=>{const F={};for(const[M,R]of Object.entries(r.selectors??{}))F[M]=iL(R,k,()=>gf(b,k,E),O);return F})}return{reducerPath:D,getSelectors:N,get selectors(){return N(j)},selectSlice:j}}const T={name:i,reducer:C,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:E,...w(s),injectInto(D,{reducerPath:O,...j}={}){const N=O??s;return D.inject({reducerPath:N,reducer:C},j),{...T,...w(N,!0)}}};return T}}function iL(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var Or=aL();function sL(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function oL({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!cL(r))throw new Error(wr(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?Jr(e,l):Jr(e))}function lL(e){return e._reducerDefinitionType==="asyncThunk"}function cL(e){return e._reducerDefinitionType==="reducerWithPrepare"}function uL({type:e,reducerName:t},n,r,i){if(!i)throw new Error(wr(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:f,settled:d,options:m}=n,g=i(e,s,m);r.exposeAction(t,g),l&&r.addCase(g.fulfilled,l),u&&r.addCase(g.pending,u),f&&r.addCase(g.rejected,f),d&&r.addMatcher(g.settled,d),r.exposeCaseReducer(t,{fulfilled:l||yf,pending:u||yf,rejected:f||yf,settled:d||yf})}function yf(){}var dL="task",SD="listener",CD="completed",Gv="cancelled",fL=`task-${Gv}`,pL=`task-${CD}`,k0=`${SD}-${Gv}`,hL=`${SD}-${CD}`,Rp=class{constructor(e){this.code=e,this.message=`${dL} ${Gv} (reason: ${e})`}name="TaskAbortError";message},qv=(e,t)=>{if(typeof e!="function")throw new TypeError(wr(32))},ep=()=>{},AD=(e,t=ep)=>(e.catch(t),e),ED=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ro=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ao=e=>{if(e.aborted){const{reason:t}=e;throw new Rp(t)}};function wD(e,t){let n=ep;return new Promise((r,i)=>{const s=()=>i(new Rp(e.reason));if(e.aborted){s();return}n=ED(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=ep})}var mL=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Rp?"cancelled":"rejected",error:n}}finally{t?.()}},tp=e=>t=>AD(wD(e,t).then(n=>(ao(e),n))),PD=e=>{const t=tp(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:xl}=Object,vE={},Lp="listenerMiddleware",gL=(e,t)=>{const n=r=>ED(e,()=>ro(r,e.reason));return(r,i)=>{qv(r);const s=new AbortController;n(s);const l=mL(async()=>{ao(e),ao(s.signal);const u=await r({pause:tp(s.signal),delay:PD(s.signal),signal:s.signal});return ao(s.signal),u},()=>ro(s,pL));return i?.autoJoin&&t.push(l.catch(ep)),{result:tp(e)(l),cancel(){ro(s,fL)}}}},yL=(e,t)=>{const n=async(r,i)=>{ao(t);let s=()=>{};const u=[new Promise((f,d)=>{let m=e({predicate:r,effect:(g,y)=>{y.unsubscribe(),f([g,y.getState(),y.getOriginalState()])}});s=()=>{m(),d()}})];i!=null&&u.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await wD(t,Promise.race(u));return ao(t),f}finally{s()}};return(r,i)=>AD(n(r,i))},TD=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Jr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(wr(21));return qv(s),{predicate:i,type:t,effect:s}},DD=xl(e=>{const{type:t,predicate:n,effect:r}=TD(e);return{id:tL(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(wr(22))}}},{withTypes:()=>DD}),bE=(e,t)=>{const{type:n,effect:r,predicate:i}=TD(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},M0=e=>{e.pending.forEach(t=>{ro(t,k0)})},vL=e=>()=>{e.forEach(M0),e.clear()},xE=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},OD=xl(Jr(`${Lp}/add`),{withTypes:()=>OD}),bL=Jr(`${Lp}/removeAll`),_D=xl(Jr(`${Lp}/remove`),{withTypes:()=>_D}),xL=(...e)=>{console.error(`${Lp}/error`,...e)},_u=(e={})=>{const t=new Map,{extra:n,onError:r=xL}=e;qv(r);const i=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),g=>{m.unsubscribe(),g?.cancelActive&&M0(m)}),s=m=>{const g=bE(t,m)??DD(m);return i(g)};xl(s,{withTypes:()=>s});const l=m=>{const g=bE(t,m);return g&&(g.unsubscribe(),m.cancelActive&&M0(g)),!!g};xl(l,{withTypes:()=>l});const u=async(m,g,y,b)=>{const S=new AbortController,C=yL(s,S.signal),E=[];try{m.pending.add(S),await Promise.resolve(m.effect(g,xl({},y,{getOriginalState:b,condition:(w,T)=>C(w,T).then(Boolean),take:C,delay:PD(S.signal),pause:tp(S.signal),extra:n,signal:S.signal,fork:gL(S.signal,E),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((w,T,D)=>{w!==S&&(ro(w,k0),D.delete(w))})},cancel:()=>{ro(S,k0),m.pending.delete(S)},throwIfCancelled:()=>{ao(S.signal)}})))}catch(w){w instanceof Rp||xE(r,w,{raisedBy:"effect"})}finally{await Promise.all(E),ro(S,hL),m.pending.delete(S)}},f=vL(t);return{middleware:m=>g=>y=>{if(!uD(y))return g(y);if(OD.match(y))return s(y.payload);if(bL.match(y)){f();return}if(_D.match(y))return l(y.payload);let b=m.getState();const S=()=>{if(b===vE)throw new Error(wr(23));return b};let C;try{if(C=g(y),t.size>0){const E=m.getState(),w=Array.from(t.values());for(const T of w){let D=!1;try{D=T.predicate(y,E,b)}catch(O){D=!1,xE(r,O,{raisedBy:"predicate"})}D&&u(T,y,m,S)}}}finally{b=vE}return C},startListening:s,stopListening:l,clearListeners:f}};function wr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var SL={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},ND=Or({name:"chartLayout",initialState:SL,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:CL,setLayout:AL,setChartSize:EL,setScale:wL}=ND.actions,PL=ND.reducer;function SE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(n),!0).forEach(function(r){TL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TL(e,t,n){return(t=DL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DL(e){var t=OL(e,"string");return typeof t=="symbol"?t:t+""}function OL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var np=Math.PI/180,_L=e=>e*180/Math.PI,Zt=(e,t,n,r)=>({x:e+Math.cos(-np*r)*n,y:t+Math.sin(-np*r)*n}),jD=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},NL=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},jL=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=NL({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,f=Math.acos(u);return r>s&&(f=2*Math.PI-f),{radius:l,angle:_L(f),angleInRadian:f}},kL=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},ML=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},IL=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=jL({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:f,endAngle:d}=kL(t),m=s,g;if(f<=d){for(;m>d;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=d}else{for(;m>f;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=f}return g?CE(CE({},t),{},{radius:i,angle:ML(m,t)}):null};function kD(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function AE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AE(Object(n),!0).forEach(function(r){RL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RL(e,t,n){return(t=LL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LL(e){var t=$L(e,"string");return typeof t=="symbol"?t:t+""}function $L(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mt(e,t,n){return xn(e)||xn(t)?n:Ia(t)?co(e,t,n):typeof t=="function"?t(e):n}var BL=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<u;f++){var d=f>0?n[f-1].coordinate:n[u-1].coordinate,m=n[f].coordinate,g=f>=u-1?n[0].coordinate:n[f+1].coordinate,y=void 0;if(bn(m-d)!==bn(g-m)){var b=[];if(bn(g-m)===bn(i[1]-i[0])){y=g;var S=m+i[1]-i[0];b[0]=Math.min(S,(S+d)/2),b[1]=Math.max(S,(S+d)/2)}else{y=d;var C=g+i[1]-i[0];b[0]=Math.min(m,(C+m)/2),b[1]=Math.max(m,(C+m)/2)}var E=[Math.min(m,(y+m)/2),Math.max(m,(y+m)/2)];if(e>E[0]&&e<=E[1]||e>=b[0]&&e<=b[1]){({index:l}=n[f]);break}}else{var w=Math.min(d,g),T=Math.max(d,g);if(e>(w+m)/2&&e<=(T+m)/2){({index:l}=n[f]);break}}}else if(t){for(var D=0;D<u;D++)if(D===0&&e<=(t[D].coordinate+t[D+1].coordinate)/2||D>0&&D<u-1&&e>(t[D].coordinate+t[D-1].coordinate)/2&&e<=(t[D].coordinate+t[D+1].coordinate)/2||D===u-1&&e>(t[D].coordinate+t[D-1].coordinate)/2){({index:l}=t[D]);break}}return l},zL=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&Ie(e[s]))return Xr(Xr({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&Ie(e[l]))return Xr(Xr({},e),{},{[l]:e[l]+(i||0)})}return e},bo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",MD=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},ID=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:f,categoricalDomain:d,tickCount:m,ticks:g,niceTicks:y,axisType:b}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,C=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(C=b==="angleAxis"&&s&&s.length>=2?bn(s[0]-s[1])*2*C:C,g||y){var E=(g||y||[]).map((w,T)=>{var D=r?r.indexOf(w):w;return{coordinate:l(D)+C,value:w,offset:C,index:T}});return E.filter(w=>!Pr(w.coordinate))}return f&&d?d.map((w,T)=>({coordinate:l(w)+C,value:w,index:T,offset:C})):l.ticks&&m!=null?l.ticks(m).map((w,T)=>({coordinate:l(w)+C,value:w,offset:C,index:T})):l.domain().map((w,T)=>({coordinate:l(w)+C,value:r?r[w]:w,index:T,offset:C}))},EE=1e-4,UL=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-EE,s=Math.max(r[0],r[1])+EE,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},HL=(e,t)=>{if(!t||t.length!==2||!Ie(t[0])||!Ie(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Ie(e[0])||e[0]<n)&&(i[0]=n),(!Ie(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},GL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=Pr(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},qL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=Pr(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},YL={sign:GL,expand:x5,none:Cl,silhouette:S5,wiggle:C5,positive:qL},FL=(e,t,n)=>{var r=YL[n],i=b5().keys(t).value((s,l)=>+Mt(s,l,0)).order(E0).offset(r);return i(e)};function VL(e){return e==null?void 0:String(e)}var wE=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=Mt(s,t.dataKey,t.scale.domain()[l]);return xn(u)?null:t.scale(u)-i/2+r},KL=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},WL=e=>{var t=e.flat(2).filter(Ie);return[Math.min(...t),Math.max(...t)]},XL=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],QL=(e,t,n)=>{if(e!=null)return XL(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((f,d)=>{var m=kD(d,t,n),g=WL(m);return[Math.min(f[0],g[0]),Math.max(f[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},PE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,TE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Yv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=jp(t,m=>m.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var f=i[l],d=i[l-1];s=Math.min((f.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function DE(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Xr(Xr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function $p(e,t){if(e)return String(e);if(typeof t=="string")return t}function JL(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?IL({x:e,y:t},r):null}var ZL=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return Xr(Xr(Xr({},r),Zt(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:f}=r;return Xr(Xr(Xr({},r),Zt(r.cx,r.cy,u,f)),{},{angle:f,radius:u})}return{x:0,y:0}},e4=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Ei=e=>e.layout.width,wi=e=>e.layout.height,t4=e=>e.layout.scale,RD=e=>e.layout.margin,Bp=se(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),zp=se(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),LD="data-recharts-item-index",$D="data-recharts-item-data-key",Nu=60;function OE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(n),!0).forEach(function(r){n4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n4(e,t,n){return(t=r4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r4(e){var t=a4(e,"string");return typeof t=="symbol"?t:t+""}function a4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i4=e=>e.brush.height;function s4(e){var t=zp(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Nu;return n+i}return n},0)}function o4(e){var t=zp(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Nu;return n+i}return n},0)}function l4(e){var t=Bp(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function c4(e){var t=Bp(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var cn=se([Ei,wi,RD,i4,s4,o4,l4,c4,sD,P3],(e,t,n,r,i,s,l,u,f,d)=>{var m={left:(n.left||0)+i,right:(n.right||0)+s},g={top:(n.top||0)+l,bottom:(n.bottom||0)+u},y=vf(vf({},g),m),b=y.bottom;y.bottom+=r,y=zL(y,f,d);var S=e-y.left-y.right,C=t-y.top-y.bottom;return vf(vf({brushBottom:b},y),{},{width:Math.max(S,0),height:Math.max(C,0)})}),u4=se(cn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Fv=se(Ei,wi,(e,t)=>({x:0,y:0,width:e,height:t})),d4=A.createContext(null),ea=()=>A.useContext(d4)!=null,Up=e=>e.brush,Hp=se([Up,cn,RD],(e,t,n)=>({height:e.height,x:Ie(e.x)?e.x:t.left,y:Ie(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Ie(e.width)?e.width:t.width})),Vv=()=>{var e,t=ea(),n=De(u4),r=De(Hp),i=(e=De(Up))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},f4={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},BD=()=>{var e;return(e=De(cn))!==null&&e!==void 0?e:f4},Kv=()=>De(Ei),Wv=()=>De(wi),p4=()=>De(e=>e.layout.margin),st=e=>e.layout.layoutType,Xv=()=>De(st),h4={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},zD=Or({name:"legend",initialState:h4,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=gi(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:_E,setLegendSettings:m4,addLegendPayload:UD,removeLegendPayload:HD}=zD.actions,g4=zD.reducer,y4=["contextPayload"];function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I0.apply(null,arguments)}function NE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function El(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(n),!0).forEach(function(r){Qv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qv(e,t,n){return(t=v4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v4(e){var t=b4(e,"string");return typeof t=="symbol"?t:t+""}function b4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x4(e,t){if(e==null)return{};var n,r,i=S4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function C4(e){return e.value}function A4(e){var{contextPayload:t}=e,n=x4(e,y4),r=nD(t,e.payloadUniqBy,C4),i=El(El({},n),{},{payload:r});return A.isValidElement(e.content)?A.cloneElement(e.content,i):typeof e.content=="function"?A.createElement(e.content,i):A.createElement(Rv,i)}function E4(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:f}=t,d,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?d={left:((r||0)-s.width)/2}:d=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?m={top:((i||0)-s.height)/2}:m=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),El(El({},d),m)}function w4(e){var t=$t();return A.useEffect(()=>{t(m4(e))},[t,e]),null}function P4(e){var t=$t();return A.useEffect(()=>(t(_E(e)),()=>{t(_E({width:0,height:0}))}),[t,e]),null}function T4(e){var t=O3(),n=GR(),r=p4(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[f,d]=oD([t]),m=Kv(),g=Wv();if(m==null||g==null)return null;var y=m-(r.left||0)-(r.right||0),b=Gp.getWidthOrHeight(e.layout,s,i,y),S=u?l:El(El({position:"absolute",width:b?.width||i||"auto",height:b?.height||s||"auto"},E4(l,e,r,m,g,f)),l),C=u??n;if(C==null)return null;var E=A.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:d},A.createElement(w4,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),A.createElement(P4,{width:f.width,height:f.height}),A.createElement(A4,I0({},e,b,{margin:r,chartWidth:m,chartHeight:g,contextPayload:t})));return OT.createPortal(E,C)}class Gp extends A.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&Ie(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return A.createElement(T4,this.props)}}Qv(Gp,"displayName","Legend");Qv(Gp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R0.apply(null,arguments)}function jE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(n),!0).forEach(function(r){D4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D4(e,t,n){return(t=O4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O4(e){var t=_4(e,"string");return typeof t=="symbol"?t:t+""}function _4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N4(e){return Array.isArray(e)&&Ia(e[0])&&Ia(e[1])?e.join(" ~ "):e}var j4=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:f,labelClassName:d,label:m,labelFormatter:g,accessibilityLayer:y=!1}=e,b=()=>{if(s&&s.length){var j={padding:0,margin:0},N=(u?jp(s,u):s).map((k,B)=>{if(k.type==="none")return null;var F=k.formatter||l||N4,{value:M,name:R}=k,z=M,W=R;if(F){var Z=F(M,R,k,B,s);if(Array.isArray(Z))[z,W]=Z;else if(Z!=null)z=Z;else return null}var Q=Dy({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:Q},Ia(W)?A.createElement("span",{className:"recharts-tooltip-item-name"},W):null,Ia(W)?A.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,A.createElement("span",{className:"recharts-tooltip-item-value"},z),A.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:j},N)}return null},S=Dy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),C=Dy({margin:0},i),E=!xn(m),w=E?m:"",T=ft("recharts-default-tooltip",f),D=ft("recharts-tooltip-label",d);E&&g&&s!==void 0&&s!==null&&(w=g(m,s));var O=y?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",R0({className:T,style:S},O),A.createElement("p",{className:D,style:C},A.isValidElement(w)?w:"".concat(w)),b())},Qc="recharts-tooltip-wrapper",k4={visibility:"hidden"};function M4(e){var{coordinate:t,translateX:n,translateY:r}=e;return ft(Qc,{["".concat(Qc,"-right")]:Ie(n)&&t&&Ie(t.x)&&n>=t.x,["".concat(Qc,"-left")]:Ie(n)&&t&&Ie(t.x)&&n<t.x,["".concat(Qc,"-bottom")]:Ie(r)&&t&&Ie(t.y)&&r>=t.y,["".concat(Qc,"-top")]:Ie(r)&&t&&Ie(t.y)&&r<t.y})}function kE(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:f,viewBoxDimension:d}=e;if(s&&Ie(s[r]))return s[r];var m=n[r]-u-(i>0?i:0),g=n[r]+i;if(t[r])return l[r]?m:g;var y=f[r];if(y==null)return 0;if(l[r]){var b=m,S=y;return b<S?Math.max(g,y):Math.max(m,y)}if(d==null)return 0;var C=g+u,E=y+d;return C>E?Math.max(m,y):Math.max(g,y)}function I4(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function R4(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:f}=e,d,m,g;return l.height>0&&l.width>0&&n?(m=kE({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),g=kE({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),d=I4({translateX:m,translateY:g,useTranslate3d:u})):d=k4,{cssProperties:d,cssClasses:M4({translateX:m,translateY:g,coordinate:n})}}function ME(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(n),!0).forEach(function(r){L0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L0(e,t,n){return(t=L4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L4(e){var t=$4(e,"string");return typeof t=="symbol"?t:t+""}function $4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class B4 extends A.PureComponent{constructor(){super(...arguments),L0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),L0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:f,offset:d,position:m,reverseDirection:g,useTranslate3d:y,viewBox:b,wrapperStyle:S,lastBoundingBox:C,innerRef:E,hasPortalFromProps:w}=this.props,{cssClasses:T,cssProperties:D}=R4({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:d,position:m,reverseDirection:g,tooltipBox:{height:C.height,width:C.width},useTranslate3d:y,viewBox:b}),O=w?{}:bf(bf({transition:f&&t?"transform ".concat(r,"ms ").concat(i):void 0},D),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),j=bf(bf({},O),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:j,ref:E},s)}}var z4=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ml={isSsr:z4()},GD=()=>De(e=>e.rootProps.accessibilityLayer);function Dr(e){return Number.isFinite(e)}function wl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function $0(){return $0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$0.apply(null,arguments)}function IE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function RE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IE(Object(n),!0).forEach(function(r){U4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U4(e,t,n){return(t=H4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H4(e){var t=G4(e,"string");return typeof t=="symbol"?t:t+""}function G4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LE={curveBasisClosed:l5,curveBasisOpen:c5,curveBasis:o5,curveBumpX:VR,curveBumpY:KR,curveLinearClosed:u5,curveLinear:_p,curveMonotoneX:d5,curveMonotoneY:f5,curveNatural:p5,curveStep:h5,curveStepAfter:g5,curveStepBefore:m5},xf=e=>Dr(e.x)&&Dr(e.y),Jc=e=>e.x,Zc=e=>e.y,q4=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Tu(e));return(n==="curveMonotone"||n==="curveBump")&&t?LE["".concat(n).concat(t==="vertical"?"Y":"X")]:LE[n]||_p},Y4=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=q4(t,i),u=s?n.filter(xf):n,f;if(Array.isArray(r)){var d=s?r.filter(g=>xf(g)):r,m=u.map((g,y)=>RE(RE({},g),{},{base:d[y]}));return i==="vertical"?f=ff().y(Zc).x1(Jc).x0(g=>g.base.x):f=ff().x(Jc).y1(Zc).y0(g=>g.base.y),f.defined(xf).curve(l),f(m)}return i==="vertical"&&Ie(r)?f=ff().y(Zc).x1(Jc).x0(r):Ie(r)?f=ff().x(Jc).y1(Zc).y0(r):f=RT().x(Jc).y(Zc),f.defined(xf).curve(l),f(u)},qD=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?Y4(e):r;return A.createElement("path",$0({},vo(e),kR(e),{className:ft("recharts-curve",t),d:s===null?void 0:s,ref:i}))},F4=["x","y","top","left","width","height","className"];function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B0.apply(null,arguments)}function $E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function V4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(n),!0).forEach(function(r){K4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K4(e,t,n){return(t=W4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W4(e){var t=X4(e,"string");return typeof t=="symbol"?t:t+""}function X4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q4(e,t){if(e==null)return{};var n,r,i=J4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function J4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Z4=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),e8=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,f=Q4(e,F4),d=V4({x:t,y:n,top:r,left:i,width:s,height:l},f);return!Ie(t)||!Ie(n)||!Ie(s)||!Ie(l)||!Ie(r)||!Ie(i)?null:A.createElement("path",B0({},Jt(d,!0),{className:ft("recharts-cross",u),d:Z4(t,n,s,l,r,i)}))};function t8(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function BE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(n),!0).forEach(function(r){r8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r8(e,t,n){return(t=a8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a8(e){var t=i8(e,"string");return typeof t=="symbol"?t:t+""}function i8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ta(e,t){var n=n8({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function s8(){}function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function UE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(n),!0).forEach(function(r){o8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o8(e,t,n){return(t=l8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l8(e){var t=c8(e,"string");return typeof t=="symbol"?t:t+""}function c8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u8=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),YD=(e,t,n)=>e.map(r=>"".concat(u8(r)," ").concat(t,"ms ").concat(n)).join(","),d8=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),xu=(e,t)=>Object.keys(t).reduce((n,r)=>UE(UE({},n),{},{[r]:e(r,t[r])}),{});function HE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(n),!0).forEach(function(r){f8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f8(e,t,n){return(t=p8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p8(e){var t=h8(e,"string");return typeof t=="symbol"?t:t+""}function h8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rp=(e,t,n)=>e+(t-e)*n,z0=e=>{var{from:t,to:n}=e;return t!==n},FD=(e,t,n)=>{var r=xu((i,s)=>{if(z0(s)){var[l,u]=e(s.from,s.to,s.velocity);return On(On({},s),{},{from:l,velocity:u})}return s},t);return n<1?xu((i,s)=>z0(s)?On(On({},s),{},{velocity:rp(s.velocity,r[i].velocity,n),from:rp(s.from,r[i].from,n)}):s,t):FD(e,r,n-1)};function m8(e,t,n,r,i,s){var l,u=r.reduce((y,b)=>On(On({},y),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),f=()=>xu((y,b)=>b.from,u),d=()=>!Object.values(u).filter(z0).length,m=null,g=y=>{l||(l=y);var b=y-l,S=b/n.dt;u=FD(n,u,S),i(On(On(On({},e),t),f())),l=y,d()||(m=s.setTimeout(g))};return()=>(m=s.setTimeout(g),()=>{m()})}function g8(e,t,n,r,i,s,l){var u=null,f=i.reduce((g,y)=>On(On({},g),{},{[y]:[e[y],t[y]]}),{}),d,m=g=>{d||(d=g);var y=(g-d)/r,b=xu((C,E)=>rp(...E,n(y)),f);if(s(On(On(On({},e),t),b)),y<1)u=l.setTimeout(m);else{var S=xu((C,E)=>rp(...E,n(1)),f);s(On(On(On({},e),t),S))}};return()=>(u=l.setTimeout(m),()=>{u()})}const y8=(e,t,n,r,i,s)=>{var l=d8(e,t);return n.isStepper===!0?m8(e,t,n,l,i,s):g8(e,t,n,r,l,i,s)};var ap=1e-4,VD=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],KD=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),GE=(e,t)=>n=>{var r=VD(e,t);return KD(r,n)},v8=(e,t)=>n=>{var r=VD(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return KD(i,n)},qE=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var f=l[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([t,r,n,i]=f[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var d=GE(t,n),m=GE(r,i),g=v8(t,n),y=S=>S>1?1:S<0?0:S,b=S=>{for(var C=S>1?1:S,E=C,w=0;w<8;++w){var T=d(E)-C,D=g(E);if(Math.abs(T-C)<ap||D<ap)return m(E);E=y(E-T/D)}return m(E)};return b.isStepper=!1,b},b8=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,f)=>{var d=-(l-u)*n,m=f*r,g=f+(d-m)*i/1e3,y=f*i/1e3+l;return Math.abs(y-u)<ap&&Math.abs(g)<ap?[u,0]:[y,g]};return s.isStepper=!0,s.dt=i,s},x8=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qE(e);case"spring":return b8();default:if(e.split("(")[0]==="cubic-bezier")return qE(e)}return typeof e=="function"?e:null};function S8(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[f,...d]=u;if(typeof f=="number"){i=e.setTimeout(s.bind(null,d),f);return}s(f),i=e.setTimeout(s.bind(null,d));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class C8{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function A8(){return S8(new C8)}var E8=A.createContext(A8);function w8(e,t){var n=A.useContext(E8);return A.useMemo(()=>t??n(e),[e,t,n])}var P8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},YE={t:0},Oy={t:1};function qp(e){var t=ta(e,P8),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:f,children:d}=t,m=w8(t.animationId,t.animationManager),[g,y]=A.useState(n?YE:Oy),b=A.useRef(null);return A.useEffect(()=>{n||y(Oy)},[n]),A.useEffect(()=>{if(!n||!r)return s8;var S=y8(YE,Oy,x8(s),i,y,m.getTimeoutController()),C=()=>{b.current=S()};return m.start([f,l,C,i,u]),()=>{m.stop(),b.current&&b.current(),u()}},[n,r,i,s,l,f,u,m]),d(g.t)}function Yp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(yu(t)),r=A.useRef(e);return r.current!==e&&(n.current=yu(t),r.current=e),n.current}function FE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(n),!0).forEach(function(r){T8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T8(e,t,n){return(t=D8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D8(e){var t=O8(e,"string");return typeof t=="symbol"?t:t+""}function O8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ip(){return ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ip.apply(null,arguments)}var KE=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,f=r>=0&&n>=0||r<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,y=4;g<y;g++)m[g]=i[g]>s?s:i[g];d="M".concat(e,",").concat(t+l*m[0]),m[0]>0&&(d+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(f,",").concat(e+u*m[0],",").concat(t)),d+="L ".concat(e+n-u*m[1],",").concat(t),m[1]>0&&(d+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(f,`,
        `).concat(e+n,",").concat(t+l*m[1])),d+="L ".concat(e+n,",").concat(t+r-l*m[2]),m[2]>0&&(d+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(f,`,
        `).concat(e+n-u*m[2],",").concat(t+r)),d+="L ".concat(e+u*m[3],",").concat(t+r),m[3]>0&&(d+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(t+r-l*m[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var b=Math.min(s,i);d="M ".concat(e,",").concat(t+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e+u*b,",").concat(t,`
            L `).concat(e+n-u*b,",").concat(t,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e+n,",").concat(t+l*b,`
            L `).concat(e+n,",").concat(t+r-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e+n-u*b,",").concat(t+r,`
            L `).concat(e+u*b,",").concat(t+r,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e,",").concat(t+r-l*b," Z")}else d="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},_8={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WD=e=>{var t=ta(e,_8),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Z=n.current.getTotalLength();Z&&i(Z)}catch{}},[]);var{x:s,y:l,width:u,height:f,radius:d,className:m}=t,{animationEasing:g,animationDuration:y,animationBegin:b,isAnimationActive:S,isUpdateAnimationActive:C}=t,E=A.useRef(u),w=A.useRef(f),T=A.useRef(s),D=A.useRef(l),O=A.useMemo(()=>({x:s,y:l,width:u,height:f,radius:d}),[s,l,u,f,d]),j=Yp(O,"rectangle-");if(s!==+s||l!==+l||u!==+u||f!==+f||u===0||f===0)return null;var N=ft("recharts-rectangle",m);if(!C)return A.createElement("path",ip({},Jt(t,!0),{className:N,d:KE(s,l,u,f,d)}));var k=E.current,B=w.current,F=T.current,M=D.current,R="0px ".concat(r===-1?1:r,"px"),z="".concat(r,"px 0px"),W=YD(["strokeDasharray"],y,typeof g=="string"?g:void 0);return A.createElement(qp,{animationId:j,key:j,canBegin:r>0,duration:y,easing:g,isActive:C,begin:b},Z=>{var Q=_n(k,u,Z),I=_n(B,f,Z),G=_n(F,s,Z),ie=_n(M,l,Z);n.current&&(E.current=Q,w.current=I,T.current=G,D.current=ie);var le;return S?Z>0?le={transition:W,strokeDasharray:z}:le={strokeDasharray:R}:le={strokeDasharray:z},A.createElement("path",ip({},Jt(t,!0),{className:N,d:KE(G,ie,Q,I,d),ref:n,style:VE(VE({},le),t.style)}))})};function XD(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=Zt(t,n,r,i),u=Zt(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U0.apply(null,arguments)}var N8=(e,t)=>{var n=bn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Sf=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:f}=e,d=u*(l?1:-1)+r,m=Math.asin(u/d)/np,g=f?i:i+s*m,y=Zt(t,n,d,g),b=Zt(t,n,r,g),S=f?i-s*m:i,C=Zt(t,n,d*Math.cos(m*np),S);return{center:y,circleTangency:b,lineTangency:C,theta:m}},QD=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=N8(s,l),f=s+u,d=Zt(t,n,i,s),m=Zt(t,n,i,f),g="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>f),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(r>0){var y=Zt(t,n,r,s),b=Zt(t,n,r,f);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=f),`,
            `).concat(y.x,",").concat(y.y," Z")}else g+="L ".concat(t,",").concat(n," Z");return g},j8=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:d}=e,m=bn(d-f),{circleTangency:g,lineTangency:y,theta:b}=Sf({cx:t,cy:n,radius:i,angle:f,sign:m,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:C,theta:E}=Sf({cx:t,cy:n,radius:i,angle:d,sign:-m,cornerRadius:s,cornerIsExternal:u}),w=u?Math.abs(f-d):Math.abs(f-d)-b-E;if(w<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):QD({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:d});var T="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(m<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(C.x,",").concat(C.y,`
  `);if(r>0){var{circleTangency:D,lineTangency:O,theta:j}=Sf({cx:t,cy:n,radius:r,angle:f,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:N,lineTangency:k,theta:B}=Sf({cx:t,cy:n,radius:r,angle:d,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),F=u?Math.abs(f-d):Math.abs(f-d)-j-B;if(F<0&&s===0)return"".concat(T,"L").concat(t,",").concat(n,"Z");T+="L".concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(F>180),",").concat(+(m>0),",").concat(D.x,",").concat(D.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,"Z")}else T+="L".concat(t,",").concat(n,"Z");return T},k8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},JD=e=>{var t=ta(e,k8),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:f,startAngle:d,endAngle:m,className:g}=t;if(s<i||d===m)return null;var y=ft("recharts-sector",g),b=s-i,S=$n(l,b,0,!0),C;return S>0&&Math.abs(d-m)<360?C=j8({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,b/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:d,endAngle:m}):C=QD({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:d,endAngle:m}),A.createElement("path",U0({},Jt(t,!0),{className:y,d:C}))};function M8(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:f,innerRadius:d,outerRadius:m,angle:g}=t,y=Zt(u,f,d,g),b=Zt(u,f,m,g);r=y.x,i=y.y,s=b.x,l=b.y}else return XD(t);return[{x:r,y:i},{x:s,y:l}]}var _y={},Ny={},jy={},WE;function I8(){return WE||(WE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aD();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(jy)),jy}var XE;function R8(){return XE||(XE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I8();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(Ny)),Ny}var QE;function L8(){return QE||(QE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iD(),n=R8();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),f=new Array(u);for(let d=0;d<u;d++)f[d]=i,i+=l;return f}e.range=r})(_y)),_y}var ky,JE;function $8(){return JE||(JE=1,ky=L8().range),ky}var B8=$8();const ZD=xa(B8);function ss(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function z8(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jv(e){let t,n,r;e.length!==2?(t=ss,n=(u,f)=>ss(e(u),f),r=(u,f)=>e(u)-f):(t=e===ss||e===z8?e:U8,n=e,r=e);function i(u,f,d=0,m=u.length){if(d<m){if(t(f,f)!==0)return m;do{const g=d+m>>>1;n(u[g],f)<0?d=g+1:m=g}while(d<m)}return d}function s(u,f,d=0,m=u.length){if(d<m){if(t(f,f)!==0)return m;do{const g=d+m>>>1;n(u[g],f)<=0?d=g+1:m=g}while(d<m)}return d}function l(u,f,d=0,m=u.length){const g=i(u,f,d,m-1);return g>d&&r(u[g-1],f)>-r(u[g],f)?g-1:g}return{left:i,center:l,right:s}}function U8(){return 0}function eO(e){return e===null?NaN:+e}function*H8(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const G8=Jv(ss),ju=G8.right;Jv(eO).center;class ZE extends Map{constructor(t,n=F8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ew(this,t))}has(t){return super.has(ew(this,t))}set(t,n){return super.set(q8(this,t),n)}delete(t){return super.delete(Y8(this,t))}}function ew({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function q8({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Y8({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function F8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function V8(e=ss){if(e===ss)return tO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function tO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const K8=Math.sqrt(50),W8=Math.sqrt(10),X8=Math.sqrt(2);function sp(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=K8?10:s>=W8?5:s>=X8?2:1;let u,f,d;return i<0?(d=Math.pow(10,-i)/l,u=Math.round(e*d),f=Math.round(t*d),u/d<e&&++u,f/d>t&&--f,d=-d):(d=Math.pow(10,i)*l,u=Math.round(e/d),f=Math.round(t/d),u*d<e&&++u,f*d>t&&--f),f<u&&.5<=n&&n<2?sp(e,t,n*2):[u,f,d]}function H0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?sp(t,e,n):sp(e,t,n);if(!(s>=i))return[];const u=s-i+1,f=new Array(u);if(r)if(l<0)for(let d=0;d<u;++d)f[d]=(s-d)/-l;else for(let d=0;d<u;++d)f[d]=(s-d)*l;else if(l<0)for(let d=0;d<u;++d)f[d]=(i+d)/-l;else for(let d=0;d<u;++d)f[d]=(i+d)*l;return f}function G0(e,t,n){return t=+t,e=+e,n=+n,sp(e,t,n)[2]}function q0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?G0(t,e,n):G0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function tw(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function nw(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function nO(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?tO:V8(i);r>n;){if(r-n>600){const f=r-n+1,d=t-n+1,m=Math.log(f),g=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*g*(f-g)/f)*(d-f/2<0?-1:1),b=Math.max(n,Math.floor(t-d*g/f+y)),S=Math.min(r,Math.floor(t+(f-d)*g/f+y));nO(e,t,b,S,i)}const s=e[t];let l=n,u=r;for(eu(e,n,t),i(e[r],s)>0&&eu(e,n,r);l<u;){for(eu(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?eu(e,n,u):(++u,eu(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function eu(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Q8(e,t,n){if(e=Float64Array.from(H8(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return nw(e);if(t>=1)return tw(e);var r,i=(r-1)*t,s=Math.floor(i),l=tw(nO(e,s).subarray(0,s+1)),u=nw(e.subarray(s+1));return l+(u-l)*(i-s)}}function J8(e,t,n=eO){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function Z8(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function na(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Pi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Y0=Symbol("implicit");function Zv(){var e=new ZE,t=[],n=[],r=Y0;function i(s){let l=e.get(s);if(l===void 0){if(r!==Y0)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ZE;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Zv(t,n).unknown(r)},na.apply(i,arguments),i}function eb(){var e=Zv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,f=0,d=0,m=.5;delete e.unknown;function g(){var y=t().length,b=i<r,S=b?i:r,C=b?r:i;s=(C-S)/Math.max(1,y-f+d*2),u&&(s=Math.floor(s)),S+=(C-S-s*(y-f))*m,l=s*(1-f),u&&(S=Math.round(S),l=Math.round(l));var E=Z8(y).map(function(w){return S+s*w});return n(b?E.reverse():E)}return e.domain=function(y){return arguments.length?(t(y),g()):t()},e.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,g()):[r,i]},e.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,g()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(y){return arguments.length?(u=!!y,g()):u},e.padding=function(y){return arguments.length?(f=Math.min(1,d=+y),g()):f},e.paddingInner=function(y){return arguments.length?(f=Math.min(1,y),g()):f},e.paddingOuter=function(y){return arguments.length?(d=+y,g()):d},e.align=function(y){return arguments.length?(m=Math.max(0,Math.min(1,y)),g()):m},e.copy=function(){return eb(t(),[r,i]).round(u).paddingInner(f).paddingOuter(d).align(m)},na.apply(g(),arguments)}function rO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return rO(t())},e}function e$(){return rO(eb.apply(null,arguments).paddingInner(1))}function tb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function aO(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ku(){}var Su=.7,op=1/Su,Sl="\\s*([+-]?\\d+)\\s*",Cu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ma="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t$=/^#([0-9a-f]{3,8})$/,n$=new RegExp(`^rgb\\(${Sl},${Sl},${Sl}\\)$`),r$=new RegExp(`^rgb\\(${Ma},${Ma},${Ma}\\)$`),a$=new RegExp(`^rgba\\(${Sl},${Sl},${Sl},${Cu}\\)$`),i$=new RegExp(`^rgba\\(${Ma},${Ma},${Ma},${Cu}\\)$`),s$=new RegExp(`^hsl\\(${Cu},${Ma},${Ma}\\)$`),o$=new RegExp(`^hsla\\(${Cu},${Ma},${Ma},${Cu}\\)$`),rw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tb(ku,Au,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:aw,formatHex:aw,formatHex8:l$,formatHsl:c$,formatRgb:iw,toString:iw});function aw(){return this.rgb().formatHex()}function l$(){return this.rgb().formatHex8()}function c$(){return iO(this).formatHsl()}function iw(){return this.rgb().formatRgb()}function Au(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=t$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?sw(t):n===3?new sr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Cf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Cf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=n$.exec(e))?new sr(t[1],t[2],t[3],1):(t=r$.exec(e))?new sr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=a$.exec(e))?Cf(t[1],t[2],t[3],t[4]):(t=i$.exec(e))?Cf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=s$.exec(e))?cw(t[1],t[2]/100,t[3]/100,1):(t=o$.exec(e))?cw(t[1],t[2]/100,t[3]/100,t[4]):rw.hasOwnProperty(e)?sw(rw[e]):e==="transparent"?new sr(NaN,NaN,NaN,0):null}function sw(e){return new sr(e>>16&255,e>>8&255,e&255,1)}function Cf(e,t,n,r){return r<=0&&(e=t=n=NaN),new sr(e,t,n,r)}function u$(e){return e instanceof ku||(e=Au(e)),e?(e=e.rgb(),new sr(e.r,e.g,e.b,e.opacity)):new sr}function F0(e,t,n,r){return arguments.length===1?u$(e):new sr(e,t,n,r??1)}function sr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}tb(sr,F0,aO(ku,{brighter(e){return e=e==null?op:Math.pow(op,e),new sr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Su:Math.pow(Su,e),new sr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sr(io(this.r),io(this.g),io(this.b),lp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ow,formatHex:ow,formatHex8:d$,formatRgb:lw,toString:lw}));function ow(){return`#${eo(this.r)}${eo(this.g)}${eo(this.b)}`}function d$(){return`#${eo(this.r)}${eo(this.g)}${eo(this.b)}${eo((isNaN(this.opacity)?1:this.opacity)*255)}`}function lw(){const e=lp(this.opacity);return`${e===1?"rgb(":"rgba("}${io(this.r)}, ${io(this.g)}, ${io(this.b)}${e===1?")":`, ${e})`}`}function lp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function io(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function eo(e){return e=io(e),(e<16?"0":"")+e.toString(16)}function cw(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ba(e,t,n,r)}function iO(e){if(e instanceof ba)return new ba(e.h,e.s,e.l,e.opacity);if(e instanceof ku||(e=Au(e)),!e)return new ba;if(e instanceof ba)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,f=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=f<.5?s+i:2-s-i,l*=60):u=f>0&&f<1?0:l,new ba(l,u,f,e.opacity)}function f$(e,t,n,r){return arguments.length===1?iO(e):new ba(e,t,n,r??1)}function ba(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}tb(ba,f$,aO(ku,{brighter(e){return e=e==null?op:Math.pow(op,e),new ba(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Su:Math.pow(Su,e),new ba(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new sr(My(e>=240?e-240:e+120,i,r),My(e,i,r),My(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ba(uw(this.h),Af(this.s),Af(this.l),lp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lp(this.opacity);return`${e===1?"hsl(":"hsla("}${uw(this.h)}, ${Af(this.s)*100}%, ${Af(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uw(e){return e=(e||0)%360,e<0?e+360:e}function Af(e){return Math.max(0,Math.min(1,e||0))}function My(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const nb=e=>()=>e;function p$(e,t){return function(n){return e+n*t}}function h$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function m$(e){return(e=+e)==1?sO:function(t,n){return n-t?h$(t,n,e):nb(isNaN(t)?n:t)}}function sO(e,t){var n=t-e;return n?p$(e,n):nb(isNaN(e)?t:e)}const dw=(function e(t){var n=m$(t);function r(i,s){var l=n((i=F0(i)).r,(s=F0(s)).r),u=n(i.g,s.g),f=n(i.b,s.b),d=sO(i.opacity,s.opacity);return function(m){return i.r=l(m),i.g=u(m),i.b=f(m),i.opacity=d(m),i+""}}return r.gamma=e,r})(1);function g$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function y$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function v$(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=Il(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function b$(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function cp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function x$(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Il(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var V0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Iy=new RegExp(V0.source,"g");function S$(e){return function(){return e}}function C$(e){return function(t){return e(t)+""}}function A$(e,t){var n=V0.lastIndex=Iy.lastIndex=0,r,i,s,l=-1,u=[],f=[];for(e=e+"",t=t+"";(r=V0.exec(e))&&(i=Iy.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,f.push({i:l,x:cp(r,i)})),n=Iy.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?f[0]?C$(f[0].x):S$(t):(t=f.length,function(d){for(var m=0,g;m<t;++m)u[(g=f[m]).i]=g.x(d);return u.join("")})}function Il(e,t){var n=typeof t,r;return t==null||n==="boolean"?nb(t):(n==="number"?cp:n==="string"?(r=Au(t))?(t=r,dw):A$:t instanceof Au?dw:t instanceof Date?b$:y$(t)?g$:Array.isArray(t)?v$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?x$:cp)(e,t)}function rb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function E$(e,t){t===void 0&&(t=e,e=Il);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function w$(e){return function(){return e}}function up(e){return+e}var fw=[0,1];function Fn(e){return e}function K0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:w$(isNaN(t)?NaN:.5)}function P$(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function T$(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=K0(i,r),s=n(l,s)):(r=K0(r,i),s=n(s,l)),function(u){return s(r(u))}}function D$(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=K0(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var f=ju(e,u,1,r)-1;return s[f](i[f](u))}}function Mu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Fp(){var e=fw,t=fw,n=Il,r,i,s,l=Fn,u,f,d;function m(){var y=Math.min(e.length,t.length);return l!==Fn&&(l=P$(e[0],e[y-1])),u=y>2?D$:T$,f=d=null,g}function g(y){return y==null||isNaN(y=+y)?s:(f||(f=u(e.map(r),t,n)))(r(l(y)))}return g.invert=function(y){return l(i((d||(d=u(t,e.map(r),cp)))(y)))},g.domain=function(y){return arguments.length?(e=Array.from(y,up),m()):e.slice()},g.range=function(y){return arguments.length?(t=Array.from(y),m()):t.slice()},g.rangeRound=function(y){return t=Array.from(y),n=rb,m()},g.clamp=function(y){return arguments.length?(l=y?!0:Fn,m()):l!==Fn},g.interpolate=function(y){return arguments.length?(n=y,m()):n},g.unknown=function(y){return arguments.length?(s=y,g):s},function(y,b){return r=y,i=b,m()}}function ab(){return Fp()(Fn,Fn)}function O$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function dp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Pl(e){return e=dp(Math.abs(e)),e?e[1]:NaN}function _$(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),s.push(n.substring(i-=u,i+u)),!((f+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function N$(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var j$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Eu(e){if(!(t=j$.exec(e)))throw new Error("invalid format: "+e);var t;return new ib({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Eu.prototype=ib.prototype;function ib(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ib.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k$(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var oO;function M$(e,t){var n=dp(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(oO=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+dp(e,Math.max(0,t+s-1))[0]}function pw(e,t){var n=dp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const hw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:O$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pw(e*100,t),r:pw,s:M$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function mw(e){return e}var gw=Array.prototype.map,yw=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function I$(e){var t=e.grouping===void 0||e.thousands===void 0?mw:_$(gw.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?mw:N$(gw.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function d(g){g=Eu(g);var y=g.fill,b=g.align,S=g.sign,C=g.symbol,E=g.zero,w=g.width,T=g.comma,D=g.precision,O=g.trim,j=g.type;j==="n"?(T=!0,j="g"):hw[j]||(D===void 0&&(D=12),O=!0,j="g"),(E||y==="0"&&b==="=")&&(E=!0,y="0",b="=");var N=C==="$"?n:C==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",k=C==="$"?r:/[%p]/.test(j)?l:"",B=hw[j],F=/[defgprs%]/.test(j);D=D===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function M(R){var z=N,W=k,Z,Q,I;if(j==="c")W=B(R)+W,R="";else{R=+R;var G=R<0||1/R<0;if(R=isNaN(R)?f:B(Math.abs(R),D),O&&(R=k$(R)),G&&+R==0&&S!=="+"&&(G=!1),z=(G?S==="("?S:u:S==="-"||S==="("?"":S)+z,W=(j==="s"?yw[8+oO/3]:"")+W+(G&&S==="("?")":""),F){for(Z=-1,Q=R.length;++Z<Q;)if(I=R.charCodeAt(Z),48>I||I>57){W=(I===46?i+R.slice(Z+1):R.slice(Z))+W,R=R.slice(0,Z);break}}}T&&!E&&(R=t(R,1/0));var ie=z.length+R.length+W.length,le=ie<w?new Array(w-ie+1).join(y):"";switch(T&&E&&(R=t(le+R,le.length?w-W.length:1/0),le=""),b){case"<":R=z+R+W+le;break;case"=":R=z+le+R+W;break;case"^":R=le.slice(0,ie=le.length>>1)+z+R+W+le.slice(ie);break;default:R=le+z+R+W;break}return s(R)}return M.toString=function(){return g+""},M}function m(g,y){var b=d((g=Eu(g),g.type="f",g)),S=Math.max(-8,Math.min(8,Math.floor(Pl(y)/3)))*3,C=Math.pow(10,-S),E=yw[8+S/3];return function(w){return b(C*w)+E}}return{format:d,formatPrefix:m}}var Ef,sb,lO;R$({thousands:",",grouping:[3],currency:["$",""]});function R$(e){return Ef=I$(e),sb=Ef.format,lO=Ef.formatPrefix,Ef}function L$(e){return Math.max(0,-Pl(Math.abs(e)))}function $$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pl(t)/3)))*3-Pl(Math.abs(e)))}function B$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Pl(t)-Pl(e))+1}function cO(e,t,n,r){var i=q0(e,t,n),s;switch(r=Eu(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=$$(i,l))&&(r.precision=s),lO(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=B$(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=L$(i))&&(r.precision=s-(r.type==="%")*2);break}}return sb(r)}function us(e){var t=e.domain;return e.ticks=function(n){var r=t();return H0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return cO(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],f,d,m=10;for(u<l&&(d=l,l=u,u=d,d=i,i=s,s=d);m-- >0;){if(d=G0(l,u,n),d===f)return r[i]=l,r[s]=u,t(r);if(d>0)l=Math.floor(l/d)*d,u=Math.ceil(u/d)*d;else if(d<0)l=Math.ceil(l*d)/d,u=Math.floor(u*d)/d;else break;f=d}return e},e}function uO(){var e=ab();return e.copy=function(){return Mu(e,uO())},na.apply(e,arguments),us(e)}function dO(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,up),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return dO(e).unknown(t)},e=arguments.length?Array.from(e,up):[0,1],us(n)}function fO(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function vw(e){return Math.log(e)}function bw(e){return Math.exp(e)}function z$(e){return-Math.log(-e)}function U$(e){return-Math.exp(-e)}function H$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function G$(e){return e===10?H$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function q$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function xw(e){return(t,n)=>-e(-t,n)}function ob(e){const t=e(vw,bw),n=t.domain;let r=10,i,s;function l(){return i=q$(r),s=G$(r),n()[0]<0?(i=xw(i),s=xw(s),e(z$,U$)):e(vw,bw),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const f=n();let d=f[0],m=f[f.length-1];const g=m<d;g&&([d,m]=[m,d]);let y=i(d),b=i(m),S,C;const E=u==null?10:+u;let w=[];if(!(r%1)&&b-y<E){if(y=Math.floor(y),b=Math.ceil(b),d>0){for(;y<=b;++y)for(S=1;S<r;++S)if(C=y<0?S/s(-y):S*s(y),!(C<d)){if(C>m)break;w.push(C)}}else for(;y<=b;++y)for(S=r-1;S>=1;--S)if(C=y>0?S/s(-y):S*s(y),!(C<d)){if(C>m)break;w.push(C)}w.length*2<E&&(w=H0(d,m,E))}else w=H0(y,b,Math.min(b-y,E)).map(s);return g?w.reverse():w},t.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Eu(f)).precision==null&&(f.trim=!0),f=sb(f)),u===1/0)return f;const d=Math.max(1,r*u/t.ticks().length);return m=>{let g=m/s(Math.round(i(m)));return g*r<r-.5&&(g*=r),g<=d?f(m):""}},t.nice=()=>n(fO(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function pO(){const e=ob(Fp()).domain([1,10]);return e.copy=()=>Mu(e,pO()).base(e.base()),na.apply(e,arguments),e}function Sw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Cw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function lb(e){var t=1,n=e(Sw(t),Cw(t));return n.constant=function(r){return arguments.length?e(Sw(t=+r),Cw(t)):t},us(n)}function hO(){var e=lb(Fp());return e.copy=function(){return Mu(e,hO()).constant(e.constant())},na.apply(e,arguments)}function Aw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Y$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function F$(e){return e<0?-e*e:e*e}function cb(e){var t=e(Fn,Fn),n=1;function r(){return n===1?e(Fn,Fn):n===.5?e(Y$,F$):e(Aw(n),Aw(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},us(t)}function ub(){var e=cb(Fp());return e.copy=function(){return Mu(e,ub()).exponent(e.exponent())},na.apply(e,arguments),e}function V$(){return ub.apply(null,arguments).exponent(.5)}function Ew(e){return Math.sign(e)*e*e}function K$(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function mO(){var e=ab(),t=[0,1],n=!1,r;function i(s){var l=K$(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(Ew(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,up)).map(Ew)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return mO(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},na.apply(i,arguments),us(i)}function gO(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=J8(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[ju(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(ss),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return gO().domain(e).range(t).unknown(r)},na.apply(s,arguments)}function yO(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(f){return f!=null&&f<=f?i[ju(r,f,0,n)]:s}function u(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*t-(f-n)*e)/(n+1);return l}return l.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,u()):[e,t]},l.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,u()):i.slice()},l.invertExtent=function(f){var d=i.indexOf(f);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},l.unknown=function(f){return arguments.length&&(s=f),l},l.thresholds=function(){return r.slice()},l.copy=function(){return yO().domain([e,t]).range(i).unknown(s)},na.apply(us(l),arguments)}function vO(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[ju(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return vO().domain(e).range(t).unknown(n)},na.apply(i,arguments)}const Ry=new Date,Ly=new Date;function un(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const f=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return f;let d;do f.push(d=new Date(+s)),t(s,u),e(s);while(d<s&&s<l);return f},i.filter=s=>un(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(Ry.setTime(+s),Ly.setTime(+l),e(Ry),e(Ly),Math.floor(n(Ry,Ly))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const fp=un(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);fp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?un(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):fp);fp.range;const hi=1e3,Qr=hi*60,mi=Qr*60,xi=mi*24,db=xi*7,ww=xi*30,$y=xi*365,to=un(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getUTCSeconds());to.range;const fb=un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*hi)},(e,t)=>{e.setTime(+e+t*Qr)},(e,t)=>(t-e)/Qr,e=>e.getMinutes());fb.range;const pb=un(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Qr)},(e,t)=>(t-e)/Qr,e=>e.getUTCMinutes());pb.range;const hb=un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*hi-e.getMinutes()*Qr)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getHours());hb.range;const mb=un(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getUTCHours());mb.range;const Iu=un(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qr)/xi,e=>e.getDate()-1);Iu.range;const Vp=un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xi,e=>e.getUTCDate()-1);Vp.range;const bO=un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xi,e=>Math.floor(e/xi));bO.range;function xo(e){return un(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qr)/db)}const Kp=xo(0),pp=xo(1),W$=xo(2),X$=xo(3),Tl=xo(4),Q$=xo(5),J$=xo(6);Kp.range;pp.range;W$.range;X$.range;Tl.range;Q$.range;J$.range;function So(e){return un(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/db)}const Wp=So(0),hp=So(1),Z$=So(2),e6=So(3),Dl=So(4),t6=So(5),n6=So(6);Wp.range;hp.range;Z$.range;e6.range;Dl.range;t6.range;n6.range;const gb=un(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());gb.range;const yb=un(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());yb.range;const Si=un(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Si.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:un(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Si.range;const Ci=un(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ci.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:un(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ci.range;function xO(e,t,n,r,i,s){const l=[[to,1,hi],[to,5,5*hi],[to,15,15*hi],[to,30,30*hi],[s,1,Qr],[s,5,5*Qr],[s,15,15*Qr],[s,30,30*Qr],[i,1,mi],[i,3,3*mi],[i,6,6*mi],[i,12,12*mi],[r,1,xi],[r,2,2*xi],[n,1,db],[t,1,ww],[t,3,3*ww],[e,1,$y]];function u(d,m,g){const y=m<d;y&&([d,m]=[m,d]);const b=g&&typeof g.range=="function"?g:f(d,m,g),S=b?b.range(d,+m+1):[];return y?S.reverse():S}function f(d,m,g){const y=Math.abs(m-d)/g,b=Jv(([,,E])=>E).right(l,y);if(b===l.length)return e.every(q0(d/$y,m/$y,g));if(b===0)return fp.every(Math.max(q0(d,m,g),1));const[S,C]=l[y/l[b-1][2]<l[b][2]/y?b-1:b];return S.every(C)}return[u,f]}const[r6,a6]=xO(Ci,yb,Wp,bO,mb,pb),[i6,s6]=xO(Si,gb,Kp,Iu,hb,fb);function By(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function tu(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function o6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,f=e.shortMonths,d=nu(i),m=ru(i),g=nu(s),y=ru(s),b=nu(l),S=ru(l),C=nu(u),E=ru(u),w=nu(f),T=ru(f),D={a:G,A:ie,b:le,B:$,c:null,d:Nw,e:Nw,f:_6,g:z6,G:H6,H:T6,I:D6,j:O6,L:SO,m:N6,M:j6,p:q,q:V,Q:Mw,s:Iw,S:k6,u:M6,U:I6,V:R6,w:L6,W:$6,x:null,X:null,y:B6,Y:U6,Z:G6,"%":kw},O={a:te,A:ve,b:Se,B:Ee,c:null,d:jw,e:jw,f:V6,g:rB,G:iB,H:q6,I:Y6,j:F6,L:AO,m:K6,M:W6,p:Oe,q:ke,Q:Mw,s:Iw,S:X6,u:Q6,U:J6,V:Z6,w:eB,W:tB,x:null,X:null,y:nB,Y:aB,Z:sB,"%":kw},j={a:M,A:R,b:z,B:W,c:Z,d:Ow,e:Ow,f:A6,g:Dw,G:Tw,H:_w,I:_w,j:b6,L:C6,m:v6,M:x6,p:F,q:y6,Q:w6,s:P6,S:S6,u:f6,U:p6,V:h6,w:d6,W:m6,x:Q,X:I,y:Dw,Y:Tw,Z:g6,"%":E6};D.x=N(n,D),D.X=N(r,D),D.c=N(t,D),O.x=N(n,O),O.X=N(r,O),O.c=N(t,O);function N(xe,Me){return function(Ne){var ye=[],Pt=-1,qe=0,Gt=xe.length,qt,Tt,_r;for(Ne instanceof Date||(Ne=new Date(+Ne));++Pt<Gt;)xe.charCodeAt(Pt)===37&&(ye.push(xe.slice(qe,Pt)),(Tt=Pw[qt=xe.charAt(++Pt)])!=null?qt=xe.charAt(++Pt):Tt=qt==="e"?" ":"0",(_r=Me[qt])&&(qt=_r(Ne,Tt)),ye.push(qt),qe=Pt+1);return ye.push(xe.slice(qe,Pt)),ye.join("")}}function k(xe,Me){return function(Ne){var ye=tu(1900,void 0,1),Pt=B(ye,xe,Ne+="",0),qe,Gt;if(Pt!=Ne.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(Me&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(qe=zy(tu(ye.y,0,1)),Gt=qe.getUTCDay(),qe=Gt>4||Gt===0?hp.ceil(qe):hp(qe),qe=Vp.offset(qe,(ye.V-1)*7),ye.y=qe.getUTCFullYear(),ye.m=qe.getUTCMonth(),ye.d=qe.getUTCDate()+(ye.w+6)%7):(qe=By(tu(ye.y,0,1)),Gt=qe.getDay(),qe=Gt>4||Gt===0?pp.ceil(qe):pp(qe),qe=Iu.offset(qe,(ye.V-1)*7),ye.y=qe.getFullYear(),ye.m=qe.getMonth(),ye.d=qe.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),Gt="Z"in ye?zy(tu(ye.y,0,1)).getUTCDay():By(tu(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(Gt+5)%7:ye.w+ye.U*7-(Gt+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,zy(ye)):By(ye)}}function B(xe,Me,Ne,ye){for(var Pt=0,qe=Me.length,Gt=Ne.length,qt,Tt;Pt<qe;){if(ye>=Gt)return-1;if(qt=Me.charCodeAt(Pt++),qt===37){if(qt=Me.charAt(Pt++),Tt=j[qt in Pw?Me.charAt(Pt++):qt],!Tt||(ye=Tt(xe,Ne,ye))<0)return-1}else if(qt!=Ne.charCodeAt(ye++))return-1}return ye}function F(xe,Me,Ne){var ye=d.exec(Me.slice(Ne));return ye?(xe.p=m.get(ye[0].toLowerCase()),Ne+ye[0].length):-1}function M(xe,Me,Ne){var ye=b.exec(Me.slice(Ne));return ye?(xe.w=S.get(ye[0].toLowerCase()),Ne+ye[0].length):-1}function R(xe,Me,Ne){var ye=g.exec(Me.slice(Ne));return ye?(xe.w=y.get(ye[0].toLowerCase()),Ne+ye[0].length):-1}function z(xe,Me,Ne){var ye=w.exec(Me.slice(Ne));return ye?(xe.m=T.get(ye[0].toLowerCase()),Ne+ye[0].length):-1}function W(xe,Me,Ne){var ye=C.exec(Me.slice(Ne));return ye?(xe.m=E.get(ye[0].toLowerCase()),Ne+ye[0].length):-1}function Z(xe,Me,Ne){return B(xe,t,Me,Ne)}function Q(xe,Me,Ne){return B(xe,n,Me,Ne)}function I(xe,Me,Ne){return B(xe,r,Me,Ne)}function G(xe){return l[xe.getDay()]}function ie(xe){return s[xe.getDay()]}function le(xe){return f[xe.getMonth()]}function $(xe){return u[xe.getMonth()]}function q(xe){return i[+(xe.getHours()>=12)]}function V(xe){return 1+~~(xe.getMonth()/3)}function te(xe){return l[xe.getUTCDay()]}function ve(xe){return s[xe.getUTCDay()]}function Se(xe){return f[xe.getUTCMonth()]}function Ee(xe){return u[xe.getUTCMonth()]}function Oe(xe){return i[+(xe.getUTCHours()>=12)]}function ke(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Me=N(xe+="",D);return Me.toString=function(){return xe},Me},parse:function(xe){var Me=k(xe+="",!1);return Me.toString=function(){return xe},Me},utcFormat:function(xe){var Me=N(xe+="",O);return Me.toString=function(){return xe},Me},utcParse:function(xe){var Me=k(xe+="",!0);return Me.toString=function(){return xe},Me}}}var Pw={"-":"",_:" ",0:"0"},Sn=/^\s*\d+/,l6=/^%/,c6=/[\\^$*+?|[\]().{}]/g;function it(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function u6(e){return e.replace(c6,"\\$&")}function nu(e){return new RegExp("^(?:"+e.map(u6).join("|")+")","i")}function ru(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function d6(e,t,n){var r=Sn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function f6(e,t,n){var r=Sn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function p6(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function h6(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function m6(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Tw(e,t,n){var r=Sn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Dw(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function g6(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function y6(e,t,n){var r=Sn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function v6(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ow(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function b6(e,t,n){var r=Sn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function _w(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function x6(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function S6(e,t,n){var r=Sn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function C6(e,t,n){var r=Sn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function A6(e,t,n){var r=Sn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function E6(e,t,n){var r=l6.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function w6(e,t,n){var r=Sn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function P6(e,t,n){var r=Sn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Nw(e,t){return it(e.getDate(),t,2)}function T6(e,t){return it(e.getHours(),t,2)}function D6(e,t){return it(e.getHours()%12||12,t,2)}function O6(e,t){return it(1+Iu.count(Si(e),e),t,3)}function SO(e,t){return it(e.getMilliseconds(),t,3)}function _6(e,t){return SO(e,t)+"000"}function N6(e,t){return it(e.getMonth()+1,t,2)}function j6(e,t){return it(e.getMinutes(),t,2)}function k6(e,t){return it(e.getSeconds(),t,2)}function M6(e){var t=e.getDay();return t===0?7:t}function I6(e,t){return it(Kp.count(Si(e)-1,e),t,2)}function CO(e){var t=e.getDay();return t>=4||t===0?Tl(e):Tl.ceil(e)}function R6(e,t){return e=CO(e),it(Tl.count(Si(e),e)+(Si(e).getDay()===4),t,2)}function L6(e){return e.getDay()}function $6(e,t){return it(pp.count(Si(e)-1,e),t,2)}function B6(e,t){return it(e.getFullYear()%100,t,2)}function z6(e,t){return e=CO(e),it(e.getFullYear()%100,t,2)}function U6(e,t){return it(e.getFullYear()%1e4,t,4)}function H6(e,t){var n=e.getDay();return e=n>=4||n===0?Tl(e):Tl.ceil(e),it(e.getFullYear()%1e4,t,4)}function G6(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+it(t/60|0,"0",2)+it(t%60,"0",2)}function jw(e,t){return it(e.getUTCDate(),t,2)}function q6(e,t){return it(e.getUTCHours(),t,2)}function Y6(e,t){return it(e.getUTCHours()%12||12,t,2)}function F6(e,t){return it(1+Vp.count(Ci(e),e),t,3)}function AO(e,t){return it(e.getUTCMilliseconds(),t,3)}function V6(e,t){return AO(e,t)+"000"}function K6(e,t){return it(e.getUTCMonth()+1,t,2)}function W6(e,t){return it(e.getUTCMinutes(),t,2)}function X6(e,t){return it(e.getUTCSeconds(),t,2)}function Q6(e){var t=e.getUTCDay();return t===0?7:t}function J6(e,t){return it(Wp.count(Ci(e)-1,e),t,2)}function EO(e){var t=e.getUTCDay();return t>=4||t===0?Dl(e):Dl.ceil(e)}function Z6(e,t){return e=EO(e),it(Dl.count(Ci(e),e)+(Ci(e).getUTCDay()===4),t,2)}function eB(e){return e.getUTCDay()}function tB(e,t){return it(hp.count(Ci(e)-1,e),t,2)}function nB(e,t){return it(e.getUTCFullYear()%100,t,2)}function rB(e,t){return e=EO(e),it(e.getUTCFullYear()%100,t,2)}function aB(e,t){return it(e.getUTCFullYear()%1e4,t,4)}function iB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Dl(e):Dl.ceil(e),it(e.getUTCFullYear()%1e4,t,4)}function sB(){return"+0000"}function kw(){return"%"}function Mw(e){return+e}function Iw(e){return Math.floor(+e/1e3)}var pl,wO,PO;oB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oB(e){return pl=o6(e),wO=pl.format,pl.parse,PO=pl.utcFormat,pl.utcParse,pl}function lB(e){return new Date(e)}function cB(e){return e instanceof Date?+e:+new Date(+e)}function vb(e,t,n,r,i,s,l,u,f,d){var m=ab(),g=m.invert,y=m.domain,b=d(".%L"),S=d(":%S"),C=d("%I:%M"),E=d("%I %p"),w=d("%a %d"),T=d("%b %d"),D=d("%B"),O=d("%Y");function j(N){return(f(N)<N?b:u(N)<N?S:l(N)<N?C:s(N)<N?E:r(N)<N?i(N)<N?w:T:n(N)<N?D:O)(N)}return m.invert=function(N){return new Date(g(N))},m.domain=function(N){return arguments.length?y(Array.from(N,cB)):y().map(lB)},m.ticks=function(N){var k=y();return e(k[0],k[k.length-1],N??10)},m.tickFormat=function(N,k){return k==null?j:d(k)},m.nice=function(N){var k=y();return(!N||typeof N.range!="function")&&(N=t(k[0],k[k.length-1],N??10)),N?y(fO(k,N)):m},m.copy=function(){return Mu(m,vb(e,t,n,r,i,s,l,u,f,d))},m}function uB(){return na.apply(vb(i6,s6,Si,gb,Kp,Iu,hb,fb,to,wO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dB(){return na.apply(vb(r6,a6,Ci,yb,Wp,Vp,mb,pb,to,PO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xp(){var e=0,t=1,n,r,i,s,l=Fn,u=!1,f;function d(g){return g==null||isNaN(g=+g)?f:l(i===0?.5:(g=(s(g)-n)*i,u?Math.max(0,Math.min(1,g)):g))}d.domain=function(g){return arguments.length?([e,t]=g,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(g){return arguments.length?(u=!!g,d):u},d.interpolator=function(g){return arguments.length?(l=g,d):l};function m(g){return function(y){var b,S;return arguments.length?([b,S]=y,l=g(b,S),d):[l(0),l(1)]}}return d.range=m(Il),d.rangeRound=m(rb),d.unknown=function(g){return arguments.length?(f=g,d):f},function(g){return s=g,n=g(e),r=g(t),i=n===r?0:1/(r-n),d}}function ds(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function TO(){var e=us(Xp()(Fn));return e.copy=function(){return ds(e,TO())},Pi.apply(e,arguments)}function DO(){var e=ob(Xp()).domain([1,10]);return e.copy=function(){return ds(e,DO()).base(e.base())},Pi.apply(e,arguments)}function OO(){var e=lb(Xp());return e.copy=function(){return ds(e,OO()).constant(e.constant())},Pi.apply(e,arguments)}function bb(){var e=cb(Xp());return e.copy=function(){return ds(e,bb()).exponent(e.exponent())},Pi.apply(e,arguments)}function fB(){return bb.apply(null,arguments).exponent(.5)}function _O(){var e=[],t=Fn;function n(r){if(r!=null&&!isNaN(r=+r))return t((ju(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ss),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Q8(e,s/r))},n.copy=function(){return _O(t).domain(e)},Pi.apply(n,arguments)}function Qp(){var e=0,t=.5,n=1,r=1,i,s,l,u,f,d=Fn,m,g=!1,y;function b(C){return isNaN(C=+C)?y:(C=.5+((C=+m(C))-s)*(r*C<r*s?u:f),d(g?Math.max(0,Math.min(1,C)):C))}b.domain=function(C){return arguments.length?([e,t,n]=C,i=m(e=+e),s=m(t=+t),l=m(n=+n),u=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,b):[e,t,n]},b.clamp=function(C){return arguments.length?(g=!!C,b):g},b.interpolator=function(C){return arguments.length?(d=C,b):d};function S(C){return function(E){var w,T,D;return arguments.length?([w,T,D]=E,d=E$(C,[w,T,D]),b):[d(0),d(.5),d(1)]}}return b.range=S(Il),b.rangeRound=S(rb),b.unknown=function(C){return arguments.length?(y=C,b):y},function(C){return m=C,i=C(e),s=C(t),l=C(n),u=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,b}}function NO(){var e=us(Qp()(Fn));return e.copy=function(){return ds(e,NO())},Pi.apply(e,arguments)}function jO(){var e=ob(Qp()).domain([.1,1,10]);return e.copy=function(){return ds(e,jO()).base(e.base())},Pi.apply(e,arguments)}function kO(){var e=lb(Qp());return e.copy=function(){return ds(e,kO()).constant(e.constant())},Pi.apply(e,arguments)}function xb(){var e=cb(Qp());return e.copy=function(){return ds(e,xb()).exponent(e.exponent())},Pi.apply(e,arguments)}function pB(){return xb.apply(null,arguments).exponent(.5)}const lu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:eb,scaleDiverging:NO,scaleDivergingLog:jO,scaleDivergingPow:xb,scaleDivergingSqrt:pB,scaleDivergingSymlog:kO,scaleIdentity:dO,scaleImplicit:Y0,scaleLinear:uO,scaleLog:pO,scaleOrdinal:Zv,scalePoint:e$,scalePow:ub,scaleQuantile:gO,scaleQuantize:yO,scaleRadial:mO,scaleSequential:TO,scaleSequentialLog:DO,scaleSequentialPow:bb,scaleSequentialQuantile:_O,scaleSequentialSqrt:fB,scaleSequentialSymlog:OO,scaleSqrt:V$,scaleSymlog:hO,scaleThreshold:vO,scaleTime:uB,scaleUtc:dB,tickFormat:cO},Symbol.toStringTag,{value:"Module"}));var fs=e=>e.chartData,Sb=se([fs],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Cb=(e,t,n,r)=>r?Sb(e):fs(e);function Ol(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Dr(t)&&Dr(n))return!0}return!1}function Rw(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function hB(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(Dr(n))i=n;else if(typeof n=="function")return;if(Dr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(Ol(l))return l}}function mB(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Ol(r))return Rw(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(Ie(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&PE.test(i)){var f=PE.exec(i);if(f==null||t==null)l=void 0;else{var d=+f[1];l=t[0]-d}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(Ie(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&TE.test(s)){var m=TE.exec(s);if(m==null||t==null)u=void 0;else{var g=+m[1];u=t[1]+g}}else u=t?.[1];var y=[l,u];if(Ol(y))return t==null?y:Rw(y,t,n)}}}var Rl=1e9,gB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Eb,It=!0,Zr="[DecimalError] ",so=Zr+"Invalid argument: ",Ab=Zr+"Exponent out of range: ",Ll=Math.floor,Js=Math.pow,yB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Er,vn=1e7,_t=7,MO=9007199254740991,mp=Ll(MO/_t),we={};we.absoluteValue=we.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};we.comparedTo=we.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};we.decimalPlaces=we.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*_t;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};we.dividedBy=we.div=function(e){return yi(this,new this.constructor(e))};we.dividedToIntegerBy=we.idiv=function(e){var t=this,n=t.constructor;return St(yi(t,new n(e),0,1),n.precision)};we.equals=we.eq=function(e){return!this.cmp(e)};we.exponent=function(){return en(this)};we.greaterThan=we.gt=function(e){return this.cmp(e)>0};we.greaterThanOrEqualTo=we.gte=function(e){return this.cmp(e)>=0};we.isInteger=we.isint=function(){return this.e>this.d.length-2};we.isNegative=we.isneg=function(){return this.s<0};we.isPositive=we.ispos=function(){return this.s>0};we.isZero=function(){return this.s===0};we.lessThan=we.lt=function(e){return this.cmp(e)<0};we.lessThanOrEqualTo=we.lte=function(e){return this.cmp(e)<1};we.logarithm=we.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Er))throw Error(Zr+"NaN");if(n.s<1)throw Error(Zr+(n.s?"NaN":"-Infinity"));return n.eq(Er)?new r(0):(It=!1,t=yi(wu(n,s),wu(e,s),s),It=!0,St(t,i))};we.minus=we.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LO(t,e):IO(t,(e.s=-e.s,e))};we.modulo=we.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Zr+"NaN");return n.s?(It=!1,t=yi(n,e,0,1).times(e),It=!0,n.minus(t)):St(new r(n),i)};we.naturalExponential=we.exp=function(){return RO(this)};we.naturalLogarithm=we.ln=function(){return wu(this)};we.negated=we.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};we.plus=we.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?IO(t,e):LO(t,(e.s=-e.s,e))};we.precision=we.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(so+e);if(t=en(i)+1,r=i.d.length-1,n=r*_t+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};we.squareRoot=we.sqrt=function(){var e,t,n,r,i,s,l,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(Zr+"NaN")}for(e=en(u),It=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ka(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Ll((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new f(t)):r=new f(i.toString()),n=f.precision,i=l=n+3;;)if(s=r,r=s.plus(yi(u,s,l+2)).times(.5),ka(s.d).slice(0,l)===(t=ka(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(St(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return It=!0,St(r,n)};we.times=we.mul=function(e){var t,n,r,i,s,l,u,f,d,m=this,g=m.constructor,y=m.d,b=(e=new g(e)).d;if(!m.s||!e.s)return new g(0);for(e.s*=m.s,n=m.e+e.e,f=y.length,d=b.length,f<d&&(s=y,y=b,b=s,l=f,f=d,d=l),s=[],l=f+d,r=l;r--;)s.push(0);for(r=d;--r>=0;){for(t=0,i=f+r;i>r;)u=s[i]+b[r]*y[i-r-1]+t,s[i--]=u%vn|0,t=u/vn|0;s[i]=(s[i]+t)%vn|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,It?St(e,g.precision):e};we.toDecimalPlaces=we.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ra(e,0,Rl),t===void 0?t=r.rounding:Ra(t,0,8),St(n,e+en(n)+1,t))};we.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=po(r,!0):(Ra(e,0,Rl),t===void 0?t=i.rounding:Ra(t,0,8),r=St(new i(r),e+1,t),n=po(r,!0,e+1)),n};we.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?po(i):(Ra(e,0,Rl),t===void 0?t=s.rounding:Ra(t,0,8),r=St(new s(i),e+en(i)+1,t),n=po(r.abs(),!1,e+en(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};we.toInteger=we.toint=function(){var e=this,t=e.constructor;return St(new t(e),en(e)+1,t.rounding)};we.toNumber=function(){return+this};we.toPower=we.pow=function(e){var t,n,r,i,s,l,u=this,f=u.constructor,d=12,m=+(e=new f(e));if(!e.s)return new f(Er);if(u=new f(u),!u.s){if(e.s<1)throw Error(Zr+"Infinity");return u}if(u.eq(Er))return u;if(r=f.precision,e.eq(Er))return St(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=m<0?-m:m)<=MO){for(i=new f(Er),t=Math.ceil(r/_t+4),It=!1;n%2&&(i=i.times(u),$w(i.d,t)),n=Ll(n/2),n!==0;)u=u.times(u),$w(u.d,t);return It=!0,e.s<0?new f(Er).div(i):St(i,r)}}else if(s<0)throw Error(Zr+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,It=!1,i=e.times(wu(u,r+d)),It=!0,i=RO(i),i.s=s,i};we.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=en(i),r=po(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ra(e,1,Rl),t===void 0?t=s.rounding:Ra(t,0,8),i=St(new s(i),e,t),n=en(i),r=po(i,e<=n||n<=s.toExpNeg,e)),r};we.toSignificantDigits=we.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ra(e,1,Rl),t===void 0?t=r.rounding:Ra(t,0,8)),St(new r(n),e,t)};we.toString=we.valueOf=we.val=we.toJSON=we[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=en(e),n=e.constructor;return po(e,t<=n.toExpNeg||t>=n.toExpPos)};function IO(e,t){var n,r,i,s,l,u,f,d,m=e.constructor,g=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),It?St(t,g):t;if(f=e.d,d=t.d,l=e.e,i=t.e,f=f.slice(),s=l-i,s){for(s<0?(r=f,s=-s,u=d.length):(r=d,i=l,u=f.length),l=Math.ceil(g/_t),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=f.length,s=d.length,u-s<0&&(s=u,r=d,d=f,f=r),n=0;s;)n=(f[--s]=f[s]+d[s]+n)/vn|0,f[s]%=vn;for(n&&(f.unshift(n),++i),u=f.length;f[--u]==0;)f.pop();return t.d=f,t.e=i,It?St(t,g):t}function Ra(e,t,n){if(e!==~~e||e<t||e>n)throw Error(so+e)}function ka(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=_t-r.length,n&&(s+=ts(n)),s+=r;l=e[t],r=l+"",n=_t-r.length,n&&(s+=ts(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var yi=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%vn|0,l=s/vn|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,f;if(s!=l)f=s>l?1:-1;else for(u=f=0;u<s;u++)if(r[u]!=i[u]){f=r[u]>i[u]?1:-1;break}return f}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*vn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,f,d,m,g,y,b,S,C,E,w,T,D,O,j,N,k,B,F=r.constructor,M=r.s==i.s?1:-1,R=r.d,z=i.d;if(!r.s)return new F(r);if(!i.s)throw Error(Zr+"Division by zero");for(f=r.e-i.e,k=z.length,j=R.length,b=new F(M),S=b.d=[],d=0;z[d]==(R[d]||0);)++d;if(z[d]>(R[d]||0)&&--f,s==null?T=s=F.precision:l?T=s+(en(r)-en(i))+1:T=s,T<0)return new F(0);if(T=T/_t+2|0,d=0,k==1)for(m=0,z=z[0],T++;(d<j||m)&&T--;d++)D=m*vn+(R[d]||0),S[d]=D/z|0,m=D%z|0;else{for(m=vn/(z[0]+1)|0,m>1&&(z=e(z,m),R=e(R,m),k=z.length,j=R.length),O=k,C=R.slice(0,k),E=C.length;E<k;)C[E++]=0;B=z.slice(),B.unshift(0),N=z[0],z[1]>=vn/2&&++N;do m=0,u=t(z,C,k,E),u<0?(w=C[0],k!=E&&(w=w*vn+(C[1]||0)),m=w/N|0,m>1?(m>=vn&&(m=vn-1),g=e(z,m),y=g.length,E=C.length,u=t(g,C,y,E),u==1&&(m--,n(g,k<y?B:z,y))):(m==0&&(u=m=1),g=z.slice()),y=g.length,y<E&&g.unshift(0),n(C,g,E),u==-1&&(E=C.length,u=t(z,C,k,E),u<1&&(m++,n(C,k<E?B:z,E))),E=C.length):u===0&&(m++,C=[0]),S[d++]=m,u&&C[0]?C[E++]=R[O]||0:(C=[R[O]],E=1);while((O++<j||C[0]!==void 0)&&T--)}return S[0]||S.shift(),b.e=f,St(b,l?s+en(b)+1:s)}})();function RO(e,t){var n,r,i,s,l,u,f=0,d=0,m=e.constructor,g=m.precision;if(en(e)>16)throw Error(Ab+en(e));if(!e.s)return new m(Er);for(It=!1,u=g,l=new m(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(r=Math.log(Js(2,d))/Math.LN10*2+5|0,u+=r,n=i=s=new m(Er),m.precision=u;;){if(i=St(i.times(e),u),n=n.times(++f),l=s.plus(yi(i,n,u)),ka(l.d).slice(0,u)===ka(s.d).slice(0,u)){for(;d--;)s=St(s.times(s),u);return m.precision=g,t==null?(It=!0,St(s,g)):s}s=l}}function en(e){for(var t=e.e*_t,n=e.d[0];n>=10;n/=10)t++;return t}function Uy(e,t,n){if(t>e.LN10.sd())throw It=!0,n&&(e.precision=n),Error(Zr+"LN10 precision limit exceeded");return St(new e(e.LN10),t)}function ts(e){for(var t="";e--;)t+="0";return t}function wu(e,t){var n,r,i,s,l,u,f,d,m,g=1,y=10,b=e,S=b.d,C=b.constructor,E=C.precision;if(b.s<1)throw Error(Zr+(b.s?"NaN":"-Infinity"));if(b.eq(Er))return new C(0);if(t==null?(It=!1,d=E):d=t,b.eq(10))return t==null&&(It=!0),Uy(C,d);if(d+=y,C.precision=d,n=ka(S),r=n.charAt(0),s=en(b),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)b=b.times(e),n=ka(b.d),r=n.charAt(0),g++;s=en(b),r>1?(b=new C("0."+n),s++):b=new C(r+"."+n.slice(1))}else return f=Uy(C,d+2,E).times(s+""),b=wu(new C(r+"."+n.slice(1)),d-y).plus(f),C.precision=E,t==null?(It=!0,St(b,E)):b;for(u=l=b=yi(b.minus(Er),b.plus(Er),d),m=St(b.times(b),d),i=3;;){if(l=St(l.times(m),d),f=u.plus(yi(l,new C(i),d)),ka(f.d).slice(0,d)===ka(u.d).slice(0,d))return u=u.times(2),s!==0&&(u=u.plus(Uy(C,d+2,E).times(s+""))),u=yi(u,new C(g),d),C.precision=E,t==null?(It=!0,St(u,E)):u;u=f,i+=2}}function Lw(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Ll(n/_t),e.d=[],r=(n+1)%_t,n<0&&(r+=_t),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=_t;r<i;)e.d.push(+t.slice(r,r+=_t));t=t.slice(r),r=_t-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),It&&(e.e>mp||e.e<-mp))throw Error(Ab+n)}else e.s=0,e.e=0,e.d=[0];return e}function St(e,t,n){var r,i,s,l,u,f,d,m,g=e.d;for(l=1,s=g[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=_t,i=t,d=g[m=0];else{if(m=Math.ceil((r+1)/_t),s=g.length,m>=s)return e;for(d=s=g[m],l=1;s>=10;s/=10)l++;r%=_t,i=r-_t+l}if(n!==void 0&&(s=Js(10,l-i-1),u=d/s%10|0,f=t<0||g[m+1]!==void 0||d%s,f=n<4?(u||f)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||f||n==6&&(r>0?i>0?d/Js(10,l-i):0:g[m-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return f?(s=en(e),g.length=1,t=t-s-1,g[0]=Js(10,(_t-t%_t)%_t),e.e=Ll(-t/_t)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(r==0?(g.length=m,s=1,m--):(g.length=m+1,s=Js(10,_t-r),g[m]=i>0?(d/Js(10,l-i)%Js(10,i)|0)*s:0),f)for(;;)if(m==0){(g[0]+=s)==vn&&(g[0]=1,++e.e);break}else{if(g[m]+=s,g[m]!=vn)break;g[m--]=0,s=1}for(r=g.length;g[--r]===0;)g.pop();if(It&&(e.e>mp||e.e<-mp))throw Error(Ab+en(e));return e}function LO(e,t){var n,r,i,s,l,u,f,d,m,g,y=e.constructor,b=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),It?St(t,b):t;if(f=e.d,g=t.d,r=t.e,d=e.e,f=f.slice(),l=d-r,l){for(m=l<0,m?(n=f,l=-l,u=g.length):(n=g,r=d,u=f.length),i=Math.max(Math.ceil(b/_t),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=f.length,u=g.length,m=i<u,m&&(u=i),i=0;i<u;i++)if(f[i]!=g[i]){m=f[i]<g[i];break}l=0}for(m&&(n=f,f=g,g=n,t.s=-t.s),u=f.length,i=g.length-u;i>0;--i)f[u++]=0;for(i=g.length;i>l;){if(f[--i]<g[i]){for(s=i;s&&f[--s]===0;)f[s]=vn-1;--f[s],f[i]+=vn}f[i]-=g[i]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(t.d=f,t.e=r,It?St(t,b):t):new y(0)}function po(e,t,n){var r,i=en(e),s=ka(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+ts(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+ts(-i-1)+s,n&&(r=n-l)>0&&(s+=ts(r))):i>=l?(s+=ts(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+ts(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=ts(r))),e.s<0?"-"+s:s}function $w(e,t){if(e.length>t)return e.length=t,!0}function $O(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(so+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return Lw(l,s.toString())}else if(typeof s!="string")throw Error(so+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,yB.test(s))Lw(l,s);else throw Error(so+s)}if(i.prototype=we,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=$O,i.config=i.set=vB,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function vB(e){if(!e||typeof e!="object")throw Error(Zr+"Object expected");var t,n,r,i=["precision",1,Rl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Ll(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(so+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(so+n+": "+r);return this}var Eb=$O(gB);Er=new Eb(1);const dt=Eb;var bB=e=>e,BO={},zO=e=>e===BO,Bw=e=>function t(){return arguments.length===0||arguments.length===1&&zO(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},UO=(e,t)=>e===1?t:Bw(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==BO).length;return s>=e?t(...r):UO(e-s,Bw(function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];var d=r.map(m=>zO(m)?u.shift():m);return t(...d,...u)}))}),Jp=e=>UO(e.length,e),W0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},xB=Jp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),SB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return bB;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,f)=>f(u),s(...arguments))}},X0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),HO=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var f;return l===((f=t)===null||f===void 0?void 0:f[u])})||(t=i,n=e(...i)),n}};function GO(e){var t;return e===0?t=1:t=Math.floor(new dt(e).abs().log(10).toNumber())+1,t}function qO(e,t,n){for(var r=new dt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}Jp((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Jp((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Jp((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var YO=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},FO=(e,t,n)=>{if(e.lte(0))return new dt(0);var r=GO(e.toNumber()),i=new dt(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new dt(Math.ceil(s.div(l).toNumber())).add(n).mul(l),f=u.mul(i);return t?new dt(f.toNumber()):new dt(Math.ceil(f.toNumber()))},CB=(e,t,n)=>{var r=new dt(1),i=new dt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new dt(10).pow(GO(e)-1),i=new dt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new dt(Math.floor(e)))}else e===0?i=new dt(Math.floor((t-1)/2)):n||(i=new dt(Math.floor(e)));var l=Math.floor((t-1)/2),u=SB(xB(f=>i.add(new dt(f-l).mul(r)).toNumber()),W0);return u(0,t)},VO=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new dt(0),tickMin:new dt(0),tickMax:new dt(0)};var l=FO(new dt(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new dt(0):(u=new dt(t).add(n).div(2),u=u.sub(new dt(u).mod(l)));var f=Math.ceil(u.sub(t).div(l).toNumber()),d=Math.ceil(new dt(n).sub(u).div(l).toNumber()),m=f+d+1;return m>r?VO(t,n,r,i,s+1):(m<r&&(d=n>0?d+(r-m):d,f=n>0?f:f+(r-m)),{step:l,tickMin:u.sub(new dt(f).mul(l)),tickMax:u.add(new dt(d).mul(l))})};function AB(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=YO([t,n]);if(l===-1/0||u===1/0){var f=u===1/0?[l,...W0(0,r-1).map(()=>1/0)]:[...W0(0,r-1).map(()=>-1/0),u];return t>n?X0(f):f}if(l===u)return CB(l,r,i);var{step:d,tickMin:m,tickMax:g}=VO(l,u,s,i,0),y=qO(m,g.add(new dt(.1).mul(d)),d);return t>n?X0(y):y}function EB(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=YO([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),f=FO(new dt(l).sub(s).div(u-1),i,0),d=[...qO(new dt(s),new dt(l),f),l];return i===!1&&(d=d.map(m=>Math.round(m))),n>r?X0(d):d}var wB=HO(AB),PB=HO(EB),KO=e=>e.rootProps.maxBarSize,TB=e=>e.rootProps.barGap,WO=e=>e.rootProps.barCategoryGap,DB=e=>e.rootProps.barSize,Ru=e=>e.rootProps.stackOffset,wb=e=>e.options.chartName,Pb=e=>e.rootProps.syncId,XO=e=>e.rootProps.syncMethod,Tb=e=>e.options.eventEmitter,fi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ar={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Zp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},OB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:fi.angleAxisId,includeHidden:!1,name:void 0,reversed:fi.reversed,scale:fi.scale,tick:fi.tick,tickCount:void 0,ticks:void 0,type:fi.type,unit:void 0},_B={allowDataOverflow:Ar.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ar.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ar.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ar.scale,tick:Ar.tick,tickCount:Ar.tickCount,ticks:void 0,type:Ar.type,unit:void 0},NB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:fi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fi.scale,tick:fi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},jB={allowDataOverflow:Ar.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ar.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ar.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ar.scale,tick:Ar.tick,tickCount:Ar.tickCount,ticks:void 0,type:"category",unit:void 0},Db=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?NB:OB,Ob=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?jB:_B,eh=e=>e.polarOptions,_b=se([Ei,wi,cn],jD),QO=se([eh,_b],(e,t)=>{if(e!=null)return $n(e.innerRadius,t,0)}),JO=se([eh,_b],(e,t)=>{if(e!=null)return $n(e.outerRadius,t,t*.8)}),kB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},ZO=se([eh],kB);se([Db,ZO],Zp);var e_=se([_b,QO,JO],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});se([Ob,e_],Zp);var t_=se([st,eh,QO,JO,Ei,wi],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:f,endAngle:d}=t;return{cx:$n(l,i,i/2),cy:$n(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:d,clockWise:!1}}}),Rt=(e,t)=>t,Lu=(e,t,n)=>n;function Nb(e){return e?.id}var dn=e=>{var t=st(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},$l=e=>e.tooltip.settings.axisId,Cn=e=>{var t=dn(e),n=$l(e);return $u(e,t,n)},n_=se([Cn],e=>e?.dataKey);function r_(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var f,d=(f=u.data)!==null&&f!==void 0?f:r;if(!(d==null||d.length===0)){var m=Nb(u);d.forEach((g,y)=>{var b=s==null||i?y:String(Mt(g,s,null)),S=Mt(g,u.dataKey,0),C;l.has(b)?C=l.get(b):C={},Object.assign(C,{[m]:S}),l.set(b,C)})}}),Array.from(l.values())}function th(e){return e.stackId!=null&&e.dataKey!=null}function zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zw(Object(n),!0).forEach(function(r){MB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MB(e,t,n){return(t=IB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IB(e){var t=RB(e,"string");return typeof t=="symbol"?t:t+""}function RB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q0=[0,"auto"],br={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},a_=(e,t)=>e.cartesianAxis.xAxis[t],ps=(e,t)=>{var n=a_(e,t);return n??br},xr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Q0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Nu},i_=(e,t)=>e.cartesianAxis.yAxis[t],hs=(e,t)=>{var n=i_(e,t);return n??xr},LB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},jb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??LB},Kt=(e,t,n)=>{switch(t){case"xAxis":return ps(e,n);case"yAxis":return hs(e,n);case"zAxis":return jb(e,n);case"angleAxis":return Db(e,n);case"radiusAxis":return Ob(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},$B=(e,t,n)=>{switch(t){case"xAxis":return ps(e,n);case"yAxis":return hs(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},$u=(e,t,n)=>{switch(t){case"xAxis":return ps(e,n);case"yAxis":return hs(e,n);case"angleAxis":return Db(e,n);case"radiusAxis":return Ob(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},s_=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function kb(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Mb=e=>e.graphicalItems.cartesianItems,BB=se([Rt,Lu],kb),Ib=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Bu=se([Mb,Kt,BB],Ib),o_=se([Bu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(th)),l_=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),c_=se([Bu],l_),Rb=e=>e.map(t=>t.data).filter(Boolean).flat(1),zB=se([Bu],Rb),Lb=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},$b=se([zB,Cb],Lb),Bb=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Mt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Mt(i,r)}))):e.map(r=>({value:r})),nh=se([$b,Kt,Bu],Bb);function u_(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Co(e){return e.filter(t=>Ia(t)||t instanceof Date).map(Number).filter(t=>Pr(t)===!1)}function UB(e,t,n){return!n||typeof t!="number"||Pr(t)?[]:n.length?Co(n.flatMap(r=>{var i=Mt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!Dr(s)||!Dr(l)))return[t-s,t+l]})):[]}var HB=se([o_,Cb,Cn],r_),d_=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,f=u.map(Nb);return[l,{stackedData:FL(e,f,n),graphicalItems:u}]}))},J0=se([HB,o_,Ru],d_),f_=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=QL(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},GB=se([J0,fs,Rt],f_),p_=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,f,d=(u=r[l.id])===null||u===void 0?void 0:u.filter(g=>u_(i,g)),m=Mt(s,(f=t.dataKey)!==null&&f!==void 0?f:l.dataKey);return{value:m,errorDomain:UB(s,m,d)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Mt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),rh=e=>e.errorBars,h_=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>u_(n,r));se([c_,rh,Rt],h_);var qB=se([$b,Kt,c_,rh,Rt],p_);function YB(e){var{value:t}=e;if(Ia(t)||t instanceof Date)return t}var Uw=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Co(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},FB=(e,t,n)=>{var r=e.map(YB).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&PT(r))?ZD(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},zb=e=>{var t;if(e==null||!("domain"in e))return Q0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Co(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Q0},yp=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},m_=e=>e.referenceElements.dots,Bl=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),VB=se([m_,Rt,Lu],Bl),g_=e=>e.referenceElements.areas,KB=se([g_,Rt,Lu],Bl),y_=e=>e.referenceElements.lines,WB=se([y_,Rt,Lu],Bl),v_=(e,t)=>{var n=Co(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},XB=se(VB,Rt,v_),b_=(e,t)=>{var n=Co(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},QB=se([KB,Rt],b_),x_=(e,t)=>{var n=Co(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},JB=se(WB,Rt,x_),ZB=se(XB,JB,QB,(e,t,n)=>yp(e,n,t)),S_=se([Kt],zb),Ub=(e,t,n,r,i,s,l)=>{var u=hB(t,e.allowDataOverflow);if(u!=null)return u;var f=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",d=f?yp(n,i,Uw(r)):yp(i,Uw(r));return mB(t,d,e.allowDataOverflow)},ez=se([Kt,S_,GB,qB,ZB,st,Rt],Ub),tz=[0,1],Hb=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:f}=e,d=bo(t,s);return d&&u==null?ZD(0,n.length):f==="category"?FB(r,e,d):i==="expand"?tz:l}},Gb=se([Kt,st,$b,nh,Ru,Rt,ez],Hb),C_=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Tu(s));return u in lu?u:"point"}}},zl=se([Kt,st,s_,wb,Rt],C_);function nz(e){if(e!=null){if(e in lu)return lu[e]();var t="scale".concat(Tu(e));if(t in lu)return lu[t]()}}function qb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=nz(t);if(i!=null){var s=i.domain(n).range(r);return UL(s),s}}}var Yb=(e,t,n)=>{var r=zb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ol(e))return wB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ol(e))return PB(e,t.tickCount,t.allowDecimals)}},Fb=se([Gb,$u,zl],Yb),Vb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Ol(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},rz=se([Kt,Gb,Fb,Rt],Vb),az=se(nh,Kt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Co(e.map(u=>u.value))).sort((u,f)=>u-f);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),A_=se(az,st,WO,cn,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Dr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=$n(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),iz=(e,t)=>{var n=ps(e,t);return n==null||typeof n.padding!="string"?0:A_(e,"xAxis",t,n.padding)},sz=(e,t)=>{var n=hs(e,t);return n==null||typeof n.padding!="string"?0:A_(e,"yAxis",t,n.padding)},oz=se(ps,iz,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),lz=se(hs,sz,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),cz=se([cn,oz,Hp,Up,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),uz=se([cn,st,lz,Hp,Up,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),zu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return cz(e,n,r);case"yAxis":return uz(e,n,r);case"zAxis":return(i=jb(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return ZO(e);case"radiusAxis":return e_(e,n);default:return}},E_=se([Kt,zu],Zp),Ul=se([Kt,zl,rz,E_],qb);se([Bu,rh,Rt],h_);function w_(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ah=(e,t)=>t,ih=(e,t,n)=>n,dz=se(Bp,ah,ih,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(w_)),fz=se(zp,ah,ih,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(w_)),P_=(e,t)=>({width:e.width,height:t.height}),pz=(e,t)=>{var n=typeof t.width=="number"?t.width:Nu;return{width:n,height:e.height}},T_=se(cn,ps,P_),hz=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},mz=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},gz=se(wi,cn,dz,ah,ih,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var f=P_(t,u);l==null&&(l=hz(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(d)*f.height,l+=(d?-1:1)*f.height}),s}),yz=se(Ei,cn,fz,ah,ih,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var f=pz(t,u);l==null&&(l=mz(t,r,e));var d=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(d)*f.width,l+=(d?-1:1)*f.width}),s}),vz=(e,t)=>{var n=cn(e),r=ps(e,t);if(r!=null){var i=gz(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},bz=(e,t)=>{var n=cn(e),r=hs(e,t);if(r!=null){var i=yz(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},D_=se(cn,hs,(e,t)=>{var n=typeof t.width=="number"?t.width:Nu;return{width:n,height:e.height}}),Hw=(e,t,n)=>{switch(t){case"xAxis":return T_(e,n).width;case"yAxis":return D_(e,n).height;default:return}},O_=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=bo(e,r),f=t.map(d=>d.value);if(l&&u&&s==="category"&&i&&PT(f))return f}},Kb=se([st,nh,Kt,Rt],O_),__=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=bo(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},Wb=se([st,nh,$u,Rt],__),Gw=se([st,$B,zl,Ul,Kb,Wb,zu,Fb,Rt],(e,t,n,r,i,s,l,u,f)=>{if(t==null)return null;var d=bo(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:s,duplicateDomain:i,isCategorical:d,niceTicks:u,range:l,realScaleType:n,scale:r}}),xz=(e,t,n,r,i,s,l,u,f)=>{if(!(t==null||r==null)){var d=bo(e,f),{type:m,ticks:g,tickCount:y}=t,b=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=m==="category"&&r.bandwidth?r.bandwidth()/b:0;S=f==="angleAxis"&&s!=null&&s.length>=2?bn(s[0]-s[1])*2*S:S;var C=g||i;if(C){var E=C.map((w,T)=>{var D=l?l.indexOf(w):w;return{index:T,coordinate:r(D)+S,value:w,offset:S}});return E.filter(w=>!Pr(w.coordinate))}return d&&u?u.map((w,T)=>({coordinate:r(w)+S,value:w,index:T,offset:S})):r.ticks?r.ticks(y).map(w=>({coordinate:r(w)+S,value:w,offset:S})):r.domain().map((w,T)=>({coordinate:r(w)+S,value:l?l[w]:w,index:T,offset:S}))}},N_=se([st,$u,zl,Ul,Fb,zu,Kb,Wb,Rt],xz),Sz=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=bo(e,l),{tickCount:f}=t,d=0;return d=l==="angleAxis"&&r?.length>=2?bn(r[0]-r[1])*2*d:d,u&&s?s.map((m,g)=>({coordinate:n(m)+d,value:m,index:g,offset:d})):n.ticks?n.ticks(f).map(m=>({coordinate:n(m)+d,value:m,offset:d})):n.domain().map((m,g)=>({coordinate:n(m)+d,value:i?i[m]:m,index:g,offset:d}))}},_l=se([st,$u,Ul,zu,Kb,Wb,Rt],Sz),Nl=se(Kt,Ul,(e,t)=>{if(!(e==null||t==null))return gp(gp({},e),{},{scale:t})}),Cz=se([Kt,zl,Gb,E_],qb);se((e,t,n)=>jb(e,n),Cz,(e,t)=>{if(!(e==null||t==null))return gp(gp({},e),{},{scale:t})});var Az=se([st,Bp,zp],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),j_=e=>e.options.defaultTooltipEventType,k_=e=>e.options.validateTooltipEventTypes;function M_(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Xb(e,t){var n=j_(e),r=k_(e);return M_(t,n,r)}function Ez(e){return De(t=>Xb(t,e))}var I_=(e,t)=>{var n,r=Number(t);if(!(Pr(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},wz=e=>e.tooltip.settings,rs={active:!1,index:null,dataKey:void 0,coordinate:void 0},Pz={itemInteraction:{click:rs,hover:rs},axisInteraction:{click:rs,hover:rs},keyboardInteraction:rs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},R_=Or({name:"tooltip",initialState:Pz,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=gi(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Tz,removeTooltipEntrySettings:Dz,setTooltipSettingsState:Oz,setActiveMouseOverItemIndex:L_,mouseLeaveItem:_z,mouseLeaveChart:$_,setActiveClickItemIndex:Nz,setMouseOverAxisIndex:B_,setMouseClickAxisIndex:jz,setSyncInteraction:Z0,setKeyboardInteraction:ev}=R_.actions,kz=R_.reducer;function qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qw(Object(n),!0).forEach(function(r){Mz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mz(e,t,n){return(t=Iz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Iz(e){var t=Rz(e,"string");return typeof t=="symbol"?t:t+""}function Rz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lz(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $z(e){return e.index!=null}var z_=(e,t,n,r)=>{if(t==null)return rs;var i=Lz(e,t,n);if(i==null)return rs;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if($z(i)){if(s)return wf(wf({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return wf(wf({},rs),{},{coordinate:i.coordinate})},Qb=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!Dr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},U_=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var f=l[0],d=f==null?void 0:u(f.positions,s);if(d!=null)return d;var m=i?.[Number(s)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:m.coordinate}}}},H_=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},Uu=e=>e.options.tooltipPayloadSearcher,Hl=e=>e.tooltip;function Yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yw(Object(n),!0).forEach(function(r){Bz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bz(e,t,n){return(t=zz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zz(e){var t=Uz(e,"string");return typeof t=="symbol"?t:t+""}function Uz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hz(e,t){return e??t}var G_=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:f,dataStartIndex:d,dataEndIndex:m}=n,g=[];return e.reduce((y,b)=>{var S,{dataDefinedOnItem:C,settings:E}=b,w=Hz(C,u),T=Array.isArray(w)?kD(w,d,m):w,D=(S=E?.dataKey)!==null&&S!==void 0?S:r,O=E?.nameKey,j;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&l==="axis"?j=_R(T,r,i):j=s(T,t,f,O),Array.isArray(j))j.forEach(k=>{var B=Fw(Fw({},E),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});y.push(DE({tooltipEntrySettings:B,dataKey:k.dataKey,payload:k.payload,value:Mt(k.payload,k.dataKey),name:k.name}))});else{var N;y.push(DE({tooltipEntrySettings:E,dataKey:D,payload:j,value:Mt(j,D),name:(N=Mt(j,O))!==null&&N!==void 0?N:E?.name}))}return y},g)}},Jb=se([Cn,st,s_,wb,dn],C_),Gz=se([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),qz=se([dn,$l],kb),Hu=se([Gz,Cn,qz],Ib),Yz=se([Hu],e=>e.filter(th)),Fz=se([Hu],Rb),Gl=se([Fz,fs],Lb),Vz=se([Yz,fs,Cn],r_),Zb=se([Gl,Cn,Hu],Bb),Kz=se([Cn],zb),Wz=se([Hu],e=>e.filter(th)),Xz=se([Vz,Wz,Ru],d_),Qz=se([Xz,fs,dn],f_),Jz=se([Hu],l_),Zz=se([Gl,Cn,Jz,rh,dn],p_),eU=se([m_,dn,$l],Bl),tU=se([eU,dn],v_),nU=se([g_,dn,$l],Bl),rU=se([nU,dn],b_),aU=se([y_,dn,$l],Bl),iU=se([aU,dn],x_),sU=se([tU,iU,rU],yp),oU=se([Cn,Kz,Qz,Zz,sU,st,dn],Ub),q_=se([Cn,st,Gl,Zb,Ru,dn,oU],Hb),lU=se([q_,Cn,Jb],Yb),cU=se([Cn,q_,lU,dn],Vb),Y_=e=>{var t=dn(e),n=$l(e),r=!1;return zu(e,t,n,r)},F_=se([Cn,Y_],Zp),V_=se([Cn,Jb,cU,F_],qb),uU=se([st,Zb,Cn,dn],O_),dU=se([st,Zb,Cn,dn],__),fU=(e,t,n,r,i,s,l,u)=>{if(t){var{type:f}=t,d=bo(e,u);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=f==="category"&&r.bandwidth?r.bandwidth()/m:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?bn(i[0]-i[1])*2*g:g,d&&l?l.map((y,b)=>({coordinate:r(y)+g,value:y,index:b,offset:g})):r.domain().map((y,b)=>({coordinate:r(y)+g,value:s?s[y]:y,index:b,offset:g}))}}},Ti=se([st,Cn,Jb,V_,Y_,uU,dU,dn],fU),ex=se([j_,k_,wz],(e,t,n)=>M_(n.shared,e,t)),K_=e=>e.tooltip.settings.trigger,tx=e=>e.tooltip.settings.defaultIndex,sh=se([Hl,ex,K_,tx],z_),ho=se([sh,Gl],Qb),W_=se([Ti,ho],I_),X_=se([sh],e=>{if(e)return e.dataKey}),Q_=se([Hl,ex,K_,tx],H_),pU=se([Ei,wi,st,cn,Ti,tx,Q_,Uu],U_),hU=se([sh,pU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),mU=se([sh],e=>e.active),gU=se([Q_,ho,fs,n_,W_,Uu,ex],G_);se([gU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function Vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vw(Object(n),!0).forEach(function(r){yU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yU(e,t,n){return(t=vU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vU(e){var t=bU(e,"string");return typeof t=="symbol"?t:t+""}function bU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xU=()=>De(Cn),SU=()=>{var e=xU(),t=De(Ti),n=De(V_);return Yv(Kw(Kw({},e),{},{scale:n}),t)},CU=()=>De(wb),nx=(e,t)=>t,J_=(e,t,n)=>n,rx=(e,t,n,r)=>r,AU=se(Ti,e=>jp(e,t=>t.coordinate)),ax=se([Hl,nx,J_,rx],z_),Z_=se([ax,Gl],Qb),EU=(e,t,n)=>{if(t!=null){var r=Hl(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},eN=se([Hl,nx,J_,rx],H_),vp=se([Ei,wi,st,cn,Ti,rx,eN,Uu],U_),wU=se([ax,vp],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),tN=se(Ti,Z_,I_),PU=se([eN,Z_,fs,n_,tN,Uu,nx],G_),TU=se([ax],e=>({isActive:e.active,activeIndex:e.index})),DU=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var f=JL(e.chartX,e.chartY,t,n,u);if(f){var d=e4(f,t),m=BL(d,l,s,r,i),g=ZL(t,s,m,f);return{activeIndex:String(m),activeCoordinate:g}}}};function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(null,arguments)}function Ww(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ww(Object(n),!0).forEach(function(r){OU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ww(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function OU(e,t,n){return(t=_U(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _U(e){var t=NU(e,"string");return typeof t=="symbol"?t:t+""}function NU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:f,chartName:d}=e,m=t,g=n,y=r;if(!u||!m||d!=="ScatterChart"&&f!=="axis")return null;var b,S;if(d==="ScatterChart")b=m,S=e8;else if(d==="BarChart")b=t8(l,m,i,s),S=WD;else if(l==="radial"){var{cx:C,cy:E,radius:w,startAngle:T,endAngle:D}=XD(m);b={cx:C,cy:E,startAngle:T,endAngle:D,innerRadius:w,outerRadius:w},S=JD}else b={points:M8(l,m,i)},S=qD;var O=typeof u=="object"&&"className"in u?u.className:void 0,j=Pf(Pf(Pf(Pf({stroke:"#ccc",pointerEvents:"none"},i),b),Jt(u,!1)),{},{payload:g,payloadIndex:y,className:ft("recharts-tooltip-cursor",O)});return A.isValidElement(u)?A.cloneElement(u,j):A.createElement(S,j)}function kU(e){var t=SU(),n=BD(),r=Xv(),i=CU();return A.createElement(jU,tv({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var nN=A.createContext(null),MU=()=>A.useContext(nN),Hy={exports:{}},Xw;function IU(){return Xw||(Xw=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,m){this.fn=f,this.context=d,this.once=m||!1}function s(f,d,m,g,y){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new i(m,g||f,y),S=n?n+d:d;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],b]:f._events[S].push(b):(f._events[S]=b,f._eventsCount++),f}function l(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],m,g;if(this._eventsCount===0)return d;for(g in m=this._events)t.call(m,g)&&d.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},u.prototype.listeners=function(d){var m=n?n+d:d,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,b=g.length,S=new Array(b);y<b;y++)S[y]=g[y].fn;return S},u.prototype.listenerCount=function(d){var m=n?n+d:d,g=this._events[m];return g?g.fn?1:g.length:0},u.prototype.emit=function(d,m,g,y,b,S){var C=n?n+d:d;if(!this._events[C])return!1;var E=this._events[C],w=arguments.length,T,D;if(E.fn){switch(E.once&&this.removeListener(d,E.fn,void 0,!0),w){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,m),!0;case 3:return E.fn.call(E.context,m,g),!0;case 4:return E.fn.call(E.context,m,g,y),!0;case 5:return E.fn.call(E.context,m,g,y,b),!0;case 6:return E.fn.call(E.context,m,g,y,b,S),!0}for(D=1,T=new Array(w-1);D<w;D++)T[D-1]=arguments[D];E.fn.apply(E.context,T)}else{var O=E.length,j;for(D=0;D<O;D++)switch(E[D].once&&this.removeListener(d,E[D].fn,void 0,!0),w){case 1:E[D].fn.call(E[D].context);break;case 2:E[D].fn.call(E[D].context,m);break;case 3:E[D].fn.call(E[D].context,m,g);break;case 4:E[D].fn.call(E[D].context,m,g,y);break;default:if(!T)for(j=1,T=new Array(w-1);j<w;j++)T[j-1]=arguments[j];E[D].fn.apply(E[D].context,T)}}return!0},u.prototype.on=function(d,m,g){return s(this,d,m,g,!1)},u.prototype.once=function(d,m,g){return s(this,d,m,g,!0)},u.prototype.removeListener=function(d,m,g,y){var b=n?n+d:d;if(!this._events[b])return this;if(!m)return l(this,b),this;var S=this._events[b];if(S.fn)S.fn===m&&(!y||S.once)&&(!g||S.context===g)&&l(this,b);else{for(var C=0,E=[],w=S.length;C<w;C++)(S[C].fn!==m||y&&!S[C].once||g&&S[C].context!==g)&&E.push(S[C]);E.length?this._events[b]=E.length===1?E[0]:E:l(this,b)}return this},u.prototype.removeAllListeners=function(d){var m;return d?(m=n?n+d:d,this._events[m]&&l(this,m)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(Hy)),Hy.exports}var RU=IU();const LU=xa(RU);var Pu=new LU,nv="recharts.syncEvent.tooltip",Qw="recharts.syncEvent.brush";function rN(e,t){if(t){var n=Number.parseInt(t,10);if(!Pr(n))return e?.[n]}}var $U={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},aN=Or({name:"options",initialState:$U,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),BU=aN.reducer,{createEventEmitter:zU}=aN.actions;function UU(e){return e.tooltip.syncInteraction}var HU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},iN=Or({name:"chartData",initialState:HU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:Jw,setDataStartEndIndexes:GU,setComputedData:oK}=iN.actions,qU=iN.reducer,YU=["x","y"];function Zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ws(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zw(Object(n),!0).forEach(function(r){FU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FU(e,t,n){return(t=VU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VU(e){var t=KU(e,"string");return typeof t=="symbol"?t:t+""}function KU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WU(e,t){if(e==null)return{};var n,r,i=XU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function XU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var sN=()=>{};function QU(){var e=De(Pb),t=De(Tb),n=$t(),r=De(XO),i=De(Ti),s=Xv(),l=Vv(),u=De(f=>f.rootProps.className);A.useEffect(()=>{if(e==null)return sN;var f=(d,m,g)=>{if(t!==g&&e===d){if(r==="index"){var y;if(l&&m!==null&&m!==void 0&&(y=m.payload)!==null&&y!==void 0&&y.coordinate){var b=m.payload.coordinate,{x:S,y:C}=b,E=WU(b,YU),w=Ws(Ws(Ws({},E),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof C=="number"&&{y:Math.max(l.y,Math.min(C,l.y+l.height))}),T=Ws(Ws({},m),{},{payload:Ws(Ws({},m.payload),{},{coordinate:w})});n(T)}else n(m);return}if(i!=null){var D;if(typeof r=="function"){var O={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},j=r(i,O);D=i[j]}else r==="value"&&(D=i.find(W=>String(W.value)===m.payload.label));var{coordinate:N}=m.payload;if(D==null||m.payload.active===!1||N==null||l==null){n(Z0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:k,y:B}=N,F=Math.min(k,l.x+l.width),M=Math.min(B,l.y+l.height),R={x:s==="horizontal"?D.coordinate:F,y:s==="horizontal"?M:D.coordinate},z=Z0({active:m.payload.active,coordinate:R,dataKey:m.payload.dataKey,index:String(D.index),label:m.payload.label});n(z)}}};return Pu.on(nv,f),()=>{Pu.off(nv,f)}},[u,n,t,e,r,i,s,l])}function JU(){var e=De(Pb),t=De(Tb),n=$t();A.useEffect(()=>{if(e==null)return sN;var r=(i,s,l)=>{t!==l&&e===i&&n(GU(s))};return Pu.on(Qw,r),()=>{Pu.off(Qw,r)}},[n,t,e])}function ZU(){var e=$t();A.useEffect(()=>{e(zU())},[e]),QU(),JU()}function e9(e,t,n,r,i,s){var l=De(y=>EU(y,e,t)),u=De(Tb),f=De(Pb),d=De(XO),m=De(UU),g=m?.active;A.useEffect(()=>{if(!g&&f!=null&&u!=null){var y=Z0({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});Pu.emit(nv,f,y,u)}},[g,n,l,i,r,u,f,d,s])}function e2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function t2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e2(Object(n),!0).forEach(function(r){t9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t9(e,t,n){return(t=n9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n9(e){var t=r9(e,"string");return typeof t=="symbol"?t:t+""}function r9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a9(e){return e.dataKey}function i9(e,t){return A.isValidElement(e)?A.cloneElement(e,t):typeof e=="function"?A.createElement(e,t):A.createElement(j4,t)}var n2=[],s9={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ml.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ma(e){var t=ta(e,s9),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:f,offset:d,payloadUniqBy:m,position:g,reverseDirection:y,useTranslate3d:b,wrapperStyle:S,cursor:C,shared:E,trigger:w,defaultIndex:T,portal:D,axisId:O}=t,j=$t(),N=typeof T=="number"?String(T):T;A.useEffect(()=>{j(Oz({shared:E,trigger:w,axisId:O,active:n,defaultIndex:N}))},[j,E,w,O,n,N]);var k=Vv(),B=GD(),F=Ez(E),{activeIndex:M,isActive:R}=De(Se=>TU(Se,F,w,N)),z=De(Se=>PU(Se,F,w,N)),W=De(Se=>tN(Se,F,w,N)),Z=De(Se=>wU(Se,F,w,N)),Q=z,I=MU(),G=n??R,[ie,le]=oD([Q,G]),$=F==="axis"?W:void 0;e9(F,w,Z,$,M,G);var q=D??I;if(q==null)return null;var V=Q??n2;G||(V=n2),u&&V.length&&(V=nD(Q.filter(Se=>Se.value!=null&&(Se.hide!==!0||t.includeHidden)),m,a9));var te=V.length>0,ve=A.createElement(B4,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:f,active:G,coordinate:Z,hasPayload:te,offset:d,position:g,reverseDirection:y,useTranslate3d:b,viewBox:k,wrapperStyle:S,lastBoundingBox:ie,innerRef:le,hasPortalFromProps:!!D},i9(l,t2(t2({},t),{},{payload:V,label:$,active:G,coordinate:Z,accessibilityLayer:B})));return A.createElement(A.Fragment,null,OT.createPortal(ve,q),G&&A.createElement(kU,{cursor:C,tooltipEventType:F,coordinate:Z,payload:Q,index:M}))}var Gy={},qy={},Yy={},r2;function o9(){return r2||(r2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const f=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),m=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},g=()=>{d&&m(),C()};let y=null;const b=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},r)},S=()=>{y!==null&&(clearTimeout(y),y=null)},C=()=>{S(),l=void 0,u=null},E=()=>{m()},w=function(...T){if(i?.aborted)return;l=this,u=T;const D=y==null;b(),f&&D&&m()};return w.schedule=b,w.cancel=C,w.flush=E,i?.addEventListener("abort",C,{once:!0}),w}e.debounce=t})(Yy)),Yy}var a2;function l9(){return a2||(a2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o9();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:f}=s,d=Array(2);l&&(d[0]="leading"),u&&(d[1]="trailing");let m,g=null;const y=t.debounce(function(...C){m=r.apply(this,C),g=null},i,{edges:d}),b=function(...C){return f!=null&&(g===null&&(g=Date.now()),Date.now()-g>=f)?(m=r.apply(this,C),g=Date.now(),y.cancel(),y.schedule(),m):(y.apply(this,C),m)},S=()=>(y.flush(),m);return b.cancel=y.cancel,b.flush=S,b}e.debounce=n})(qy)),qy}var i2;function c9(){return i2||(i2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l9();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(Gy)),Gy}var Fy,s2;function u9(){return s2||(s2=1,Fy=c9().throttle),Fy}var d9=u9();const f9=xa(d9);var pu=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function o2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(n),!0).forEach(function(r){p9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function p9(e,t,n){return(t=h9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h9(e){var t=m9(e,"string");return typeof t=="symbol"?t:t+""}function m9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ga=A.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:f,children:d,debounce:m=0,id:g,className:y,onResize:b,style:S={}}=e,C=A.useRef(null),E=A.useRef();E.current=b,A.useImperativeHandle(t,()=>C.current);var[w,T]=A.useState({containerWidth:r.width,containerHeight:r.height}),D=A.useCallback((j,N)=>{T(k=>{var B=Math.round(j),F=Math.round(N);return k.containerWidth===B&&k.containerHeight===F?k:{containerWidth:B,containerHeight:F}})},[]);A.useEffect(()=>{var j=F=>{var M,{width:R,height:z}=F[0].contentRect;D(R,z),(M=E.current)===null||M===void 0||M.call(E,R,z)};m>0&&(j=f9(j,m,{trailing:!0,leading:!1}));var N=new ResizeObserver(j),{width:k,height:B}=C.current.getBoundingClientRect();return D(k,B),N.observe(C.current),()=>{N.disconnect()}},[D,m]);var O=A.useMemo(()=>{var{containerWidth:j,containerHeight:N}=w;if(j<0||N<0)return null;pu(Zs(i)||Zs(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),pu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var k=Zs(i)?j:i,B=Zs(s)?N:s;return n&&n>0&&(k?B=k/n:B&&(k=B*n),f&&B>f&&(B=f)),pu(k>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,B,i,s,l,u,n),A.Children.map(d,F=>A.cloneElement(F,{width:k,height:B,style:Vy({width:k,height:B},F.props.style)}))},[n,d,s,f,u,l,w,i]);return A.createElement("div",{id:g?"".concat(g):void 0,className:ft("recharts-responsive-container",y),style:Vy(Vy({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:f}),ref:C},A.createElement("div",{style:{width:0,height:0,overflow:"visible"}},O))}),oo=e=>null;oo.displayName="Cell";function g9(e,t,n){return(t=y9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y9(e){var t=v9(e,"string");return typeof t=="symbol"?t:t+""}function v9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class b9{constructor(t){g9(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function l2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function x9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l2(Object(n),!0).forEach(function(r){S9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function S9(e,t,n){return(t=C9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C9(e){var t=A9(e,"string");return typeof t=="symbol"?t:t+""}function A9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E9={cacheSize:2e3,enableCache:!0},oN=x9({},E9),c2=new b9(oN.cacheSize),w9={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},u2="recharts_measurement_span";function P9(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var d2=(e,t)=>{try{var n=document.getElementById(u2);n||(n=document.createElement("span"),n.setAttribute("id",u2),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,w9,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},hu=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ml.isSsr)return{width:0,height:0};if(!oN.enableCache)return d2(t,n);var r=P9(t,n),i=c2.get(r);if(i)return i;var s=d2(t,n);return c2.set(r,s),s},f2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,p2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,T9=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,D9=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lN={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},O9=Object.keys(lN),gl="NaN";function _9(e,t){return e*lN[t]}class nr{static parse(t){var n,[,r,i]=(n=D9.exec(t))!==null&&n!==void 0?n:[];return new nr(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Pr(t)&&(this.unit=""),n!==""&&!T9.test(n)&&(this.num=NaN,this.unit=""),O9.includes(n)&&(this.num=_9(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new nr(NaN,""):new nr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new nr(NaN,""):new nr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new nr(NaN,""):new nr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new nr(NaN,""):new nr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Pr(this.num)}}function cN(e){if(e.includes(gl))return gl;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=f2.exec(t))!==null&&n!==void 0?n:[],l=nr.parse(r??""),u=nr.parse(s??""),f=i==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return gl;t=t.replace(f2,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,m,g,y]=(d=p2.exec(t))!==null&&d!==void 0?d:[],b=nr.parse(m??""),S=nr.parse(y??""),C=g==="+"?b.add(S):b.subtract(S);if(C.isNaN())return gl;t=t.replace(p2,C.toString())}return t}var h2=/\(([^()]*)\)/;function N9(e){for(var t=e,n;(n=h2.exec(t))!=null;){var[,r]=n;t=t.replace(h2,cN(r))}return t}function j9(e){var t=e.replace(/\s+/g,"");return t=N9(t),t=cN(t),t}function k9(e){try{return j9(e)}catch{return gl}}function Ky(e){var t=k9(e.slice(5,-1));return t===gl?"":t}var M9=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],I9=["dx","dy","angle","className","breakAll"];function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rv.apply(null,arguments)}function m2(e,t){if(e==null)return{};var n,r,i=R9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function R9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var uN=/[ \f\n\r\t\v\u2028\u2029]+/,dN=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];xn(t)||(n?i=t.toString().split(""):i=t.toString().split(uN));var s=i.map(u=>({word:u,width:hu(u,r).width})),l=n?0:hu("",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},L9=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:f}=e,d=Ie(s),m=l,g=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce((z,W)=>{var{word:Z,width:Q}=W,I=z[z.length-1];if(I&&(r==null||i||I.width+Q+n<Number(r)))I.words.push(Z),I.width+=Q+n;else{var G={words:[Z],width:Q};z.push(G)}return z},[])},y=g(t),b=M=>M.reduce((R,z)=>R.width>z.width?R:z);if(!d||i)return y;var S=y.length>s||b(y).width>Number(r);if(!S)return y;for(var C="",E=M=>{var R=m.slice(0,M),z=dN({breakAll:f,style:u,children:R+C}).wordsWithComputedWidth,W=g(z),Z=W.length>s||b(W).width>Number(r);return[Z,W]},w=0,T=m.length-1,D=0,O;w<=T&&D<=m.length-1;){var j=Math.floor((w+T)/2),N=j-1,[k,B]=E(N),[F]=E(j);if(!k&&!F&&(w=j+1),k&&F&&(T=j-1),!k&&F){O=B;break}D++}return O||y},g2=e=>{var t=xn(e)?[]:e.toString().split(uN);return[{words:t}]},$9=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!Ml.isSsr){var u,f,d=dN({breakAll:s,children:r,style:i});if(d){var{wordsWithComputedWidth:m,spaceWidth:g}=d;u=m,f=g}else return g2(r);return L9({breakAll:s,children:r,maxLines:l,style:i},u,f,t,n)}return g2(r)},y2="#808080",oh=A.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:f="end",fill:d=y2}=e,m=m2(e,M9),g=A.useMemo(()=>$9({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:l,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,l,m.style,m.width]),{dx:y,dy:b,angle:S,className:C,breakAll:E}=m,w=m2(m,I9);if(!Ia(n)||!Ia(r)||g.length===0)return null;var T=n+(Ie(y)?y:0),D=r+(Ie(b)?b:0),O;switch(f){case"start":O=Ky("calc(".concat(s,")"));break;case"middle":O=Ky("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:O=Ky("calc(".concat(g.length-1," * -").concat(i,")"));break}var j=[];if(l){var N=g[0].width,{width:k}=m;j.push("scale(".concat(Ie(k)?k/N:1,")"))}return S&&j.push("rotate(".concat(S,", ").concat(T,", ").concat(D,")")),j.length&&(w.transform=j.join(" ")),A.createElement("text",rv({},Jt(w,!0),{ref:t,x:T,y:D,className:ft("recharts-text",C),textAnchor:u,fill:d.includes("url")?y2:d}),g.map((B,F)=>{var M=B.words.join(E?"":" ");return A.createElement("tspan",{x:T,dy:F===0?O:i,key:"".concat(M,"-").concat(F)},M)}))});oh.displayName="Text";var B9=["labelRef"];function z9(e,t){if(e==null)return{};var n,r,i=U9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function U9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function v2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v2(Object(n),!0).forEach(function(r){H9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H9(e,t,n){return(t=G9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G9(e){var t=q9(e,"string");return typeof t=="symbol"?t:t+""}function q9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pi(){return pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pi.apply(null,arguments)}var fN=A.createContext(null),Y9=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=A.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return A.createElement(fN.Provider,{value:l},s)},pN=()=>{var e=A.useContext(fN),t=Vv();return e||t},F9=A.createContext(null),V9=()=>{var e=A.useContext(F9),t=De(t_);return e||t},K9=e=>{var{value:t,formatter:n}=e,r=xn(e.children)?t:e.children;return typeof n=="function"?n(r):r},ix=e=>e!=null&&typeof e=="function",W9=(e,t)=>{var n=bn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},X9=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:f,innerRadius:d,outerRadius:m,startAngle:g,endAngle:y,clockWise:b}=i,S=(d+m)/2,C=W9(g,y),E=C>=0?1:-1,w,T;switch(t){case"insideStart":w=g+E*s,T=b;break;case"insideEnd":w=y-E*s,T=!b;break;case"end":w=y+E*s,T=b;break;default:throw new Error("Unsupported position ".concat(t))}T=C<=0?T:!T;var D=Zt(u,f,S,w),O=Zt(u,f,S,w+(T?1:-1)*359),j="M".concat(D.x,",").concat(D.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(T?0:1,`,
    `).concat(O.x,",").concat(O.y),N=xn(e.id)?yu("recharts-radial-line-"):e.id;return A.createElement("text",pi({},r,{dominantBaseline:"central",className:ft("recharts-radial-bar-label",l)}),A.createElement("defs",null,A.createElement("path",{id:N,d:j})),A.createElement("textPath",{xlinkHref:"#".concat(N)},n))},Q9=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:f}=e,d=(u+f)/2;if(n==="outside"){var{x:m,y:g}=Zt(r,i,l+t,d);return{x:m,y:g,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(s+l)/2,{x:b,y:S}=Zt(r,i,y,d);return{x:b,y:S,textAnchor:"middle",verticalAnchor:"middle"}},hN=e=>"cx"in e&&Ie(e.cx),J9=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!hN(n)&&(s=n);var{x:l,y:u,width:f,height:d}=t,m=d>=0?1:-1,g=m*r,y=m>0?"end":"start",b=m>0?"start":"end",S=f>=0?1:-1,C=S*r,E=S>0?"end":"start",w=S>0?"start":"end";if(i==="top"){var T={x:l+f/2,y:u-m*r,textAnchor:"middle",verticalAnchor:y};return Vt(Vt({},T),s?{height:Math.max(u-s.y,0),width:f}:{})}if(i==="bottom"){var D={x:l+f/2,y:u+d+g,textAnchor:"middle",verticalAnchor:b};return Vt(Vt({},D),s?{height:Math.max(s.y+s.height-(u+d),0),width:f}:{})}if(i==="left"){var O={x:l-C,y:u+d/2,textAnchor:E,verticalAnchor:"middle"};return Vt(Vt({},O),s?{width:Math.max(O.x-s.x,0),height:d}:{})}if(i==="right"){var j={x:l+f+C,y:u+d/2,textAnchor:w,verticalAnchor:"middle"};return Vt(Vt({},j),s?{width:Math.max(s.x+s.width-j.x,0),height:d}:{})}var N=s?{width:f,height:d}:{};return i==="insideLeft"?Vt({x:l+C,y:u+d/2,textAnchor:w,verticalAnchor:"middle"},N):i==="insideRight"?Vt({x:l+f-C,y:u+d/2,textAnchor:E,verticalAnchor:"middle"},N):i==="insideTop"?Vt({x:l+f/2,y:u+g,textAnchor:"middle",verticalAnchor:b},N):i==="insideBottom"?Vt({x:l+f/2,y:u+d-g,textAnchor:"middle",verticalAnchor:y},N):i==="insideTopLeft"?Vt({x:l+C,y:u+g,textAnchor:w,verticalAnchor:b},N):i==="insideTopRight"?Vt({x:l+f-C,y:u+g,textAnchor:E,verticalAnchor:b},N):i==="insideBottomLeft"?Vt({x:l+C,y:u+d-g,textAnchor:w,verticalAnchor:y},N):i==="insideBottomRight"?Vt({x:l+f-C,y:u+d-g,textAnchor:E,verticalAnchor:y},N):i&&typeof i=="object"&&(Ie(i.x)||Zs(i.x))&&(Ie(i.y)||Zs(i.y))?Vt({x:l+$n(i.x,f),y:u+$n(i.y,d),textAnchor:"end",verticalAnchor:"end"},N):Vt({x:l+f/2,y:u+d/2,textAnchor:"middle",verticalAnchor:"middle"},N)},Z9={offset:5};function ns(e){var t=ta(e,Z9),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:f,labelRef:d}=t,m=V9(),g=pN(),y=r==="center"?g:m??g,b=n||y;if(!b||xn(i)&&xn(s)&&!A.isValidElement(l)&&typeof l!="function")return null;var S=Vt(Vt({},t),{},{viewBox:b});if(A.isValidElement(l)){var{labelRef:C}=S,E=z9(S,B9);return A.cloneElement(l,E)}var w;if(typeof l=="function"){if(w=A.createElement(l,S),A.isValidElement(w))return w}else w=K9(t);var T=hN(b),D=Jt(t,!0);if(T&&(r==="insideStart"||r==="insideEnd"||r==="end"))return X9(t,r,w,D,b);var O=T?Q9(b,t.offset,t.position):J9(t,b);return A.createElement(oh,pi({ref:d,className:ft("recharts-label",u)},D,O,{breakAll:f}),w)}ns.displayName="Label";var eH=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?A.createElement(ns,pi({key:"label-implicit"},r)):Ia(e)?A.createElement(ns,pi({key:"label-implicit",value:e},r)):A.isValidElement(e)?e.type===ns?A.cloneElement(e,Vt({key:"label-implicit"},r)):A.createElement(ns,pi({key:"label-implicit",content:e},r)):ix(e)?A.createElement(ns,pi({key:"label-implicit",content:e},r)):e&&typeof e=="object"?A.createElement(ns,pi({},e,{key:"label-implicit"},r)):null};function tH(e){var{label:t}=e,n=pN();return eH(t,n)||null}var Wy={},Xy={},b2;function nH(){return b2||(b2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Xy)),Xy}var Qy={},x2;function rH(){return x2||(x2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Qy)),Qy}var S2;function aH(){return S2||(S2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nH(),n=rH(),r=Lv();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(Wy)),Wy}var Jy,C2;function iH(){return C2||(C2=1,Jy=aH().last),Jy}var sH=iH();const oH=xa(sH);var lH=["valueAccessor"],cH=["dataKey","clockWise","id","textBreakAll"];function bp(){return bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bp.apply(null,arguments)}function A2(e,t){if(e==null)return{};var n,r,i=uH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var dH=e=>Array.isArray(e.value)?oH(e.value):e.value,mN=A.createContext(void 0),fH=mN.Provider,gN=A.createContext(void 0),pH=gN.Provider;function hH(){return A.useContext(mN)}function mH(){return A.useContext(gN)}function Rf(e){var{valueAccessor:t=dH}=e,n=A2(e,lH),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=A2(n,cH),f=hH(),d=mH(),m=f||d;return!m||!m.length?null:A.createElement(lr,{className:"recharts-label-list"},m.map((g,y)=>{var b,S=xn(r)?t(g,y):Mt(g&&g.payload,r),C=xn(s)?{}:{id:"".concat(s,"-").concat(y)};return A.createElement(ns,bp({},Jt(g,!0),u,C,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:S,textBreakAll:l,viewBox:g.viewBox,key:"label-".concat(y),index:y}))}))}Rf.displayName="LabelList";function yN(e){var{label:t}=e;return t?t===!0?A.createElement(Rf,{key:"labelList-implicit"}):A.isValidElement(t)||ix(t)?A.createElement(Rf,{key:"labelList-implicit",content:t}):typeof t=="object"?A.createElement(Rf,bp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var vN=e=>e.graphicalItems.polarItems,gH=se([Rt,Lu],kb),sx=se([vN,Kt,gH],Ib),yH=se([sx],Rb),ox=se([yH,Sb],Lb),vH=se([ox,Kt,sx],Bb),bH=se([ox,Kt,sx],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=Mt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:Mt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),E2=()=>{},xH=se([Kt,S_,E2,bH,E2,st,Rt],Ub),bN=se([Kt,st,ox,vH,Ru,Rt,xH],Hb),SH=se([bN,Kt,zl],Yb);se([Kt,bN,SH,Rt],Vb);var CH={radiusAxis:{},angleAxis:{}},xN=Or({name:"polarAxis",initialState:CH,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:lK,removeRadiusAxis:cK,addAngleAxis:uK,removeAngleAxis:dK}=xN.actions,AH=xN.reducer;function w2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function P2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(n),!0).forEach(function(r){EH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EH(e,t,n){return(t=wH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wH(e){var t=PH(e,"string");return typeof t=="symbol"?t:t+""}function PH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TH=(e,t)=>t,lx=se([vN,TH],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),DH=[],cx=(e,t,n)=>n?.length===0?DH:n,SN=se([Sb,lx,cx],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>P2(P2({},t.presentationProps),s.props))),i!=null)return i}}),OH=se([SN,lx,cx],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=Mt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:$p(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),_H=se([SN,lx,cx,cn],(e,t,n,r)=>{if(!(t==null||e==null))return O7({offset:r,pieSettings:t,displayedData:e,cells:n})}),Zy={},T2;function NH(){return T2||(T2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(Zy)),Zy}var e0,D2;function jH(){return D2||(D2=1,e0=NH().isPlainObject),e0}var kH=jH();const MH=xa(kH);function O2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O2(Object(n),!0).forEach(function(r){IH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function IH(e,t,n){return(t=RH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RH(e){var t=LH(e,"string");return typeof t=="symbol"?t:t+""}function LH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xp.apply(null,arguments)}var N2=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},$H={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BH=e=>{var t=ta(e,$H),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:f,animationDuration:d,animationBegin:m,isUpdateAnimationActive:g}=t,y=A.useRef(),[b,S]=A.useState(-1),C=A.useRef(i),E=A.useRef(s),w=A.useRef(l),T=A.useRef(n),D=A.useRef(r),O=Yp(e,"trapezoid-");if(A.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var Z=y.current.getTotalLength();Z&&S(Z)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var j=ft("recharts-trapezoid",u);if(!g)return A.createElement("g",null,A.createElement("path",xp({},Jt(t,!0),{className:j,d:N2(n,r,i,s,l)})));var N=C.current,k=E.current,B=w.current,F=T.current,M=D.current,R="0px ".concat(b===-1?1:b,"px"),z="".concat(b,"px 0px"),W=YD(["strokeDasharray"],d,f);return A.createElement(qp,{animationId:O,key:O,canBegin:b>0,duration:d,easing:f,isActive:g,begin:m},Z=>{var Q=_n(N,i,Z),I=_n(k,s,Z),G=_n(B,l,Z),ie=_n(F,n,Z),le=_n(M,r,Z);y.current&&(C.current=Q,E.current=I,w.current=G,T.current=ie,D.current=le);var $=Z>0?{transition:W,strokeDasharray:z}:{strokeDasharray:R};return A.createElement("path",xp({},Jt(t,!0),{className:j,d:N2(ie,le,Q,I,G),ref:y,style:_2(_2({},$),t.style)}))})},zH=["option","shapeType","propTransformer","activeClassName","isActive"];function UH(e,t){if(e==null)return{};var n,r,i=HH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function j2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j2(Object(n),!0).forEach(function(r){GH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GH(e,t,n){return(t=qH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qH(e){var t=YH(e,"string");return typeof t=="symbol"?t:t+""}function YH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FH(e,t){return Sp(Sp({},t),e)}function VH(e,t){return e==="symbols"}function k2(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return A.createElement(WD,n);case"trapezoid":return A.createElement(BH,n);case"sector":return A.createElement(JD,n);case"symbols":if(VH(t))return A.createElement(Mv,n);break;default:return null}}function KH(e){return A.isValidElement(e)?e.props:e}function CN(e){var{option:t,shapeType:n,propTransformer:r=FH,activeClassName:i="recharts-active-shape",isActive:s}=e,l=UH(e,zH),u;if(A.isValidElement(t))u=A.cloneElement(t,Sp(Sp({},l),KH(t)));else if(typeof t=="function")u=t(l);else if(MH(t)&&typeof t!="boolean"){var f=r(t,l);u=A.createElement(k2,{shapeType:n,elementProps:f})}else{var d=l;u=A.createElement(k2,{shapeType:n,elementProps:d})}return s?A.createElement(lr,{className:i},u):u}var ux=(e,t)=>{var n=$t();return(r,i)=>s=>{e?.(r,i,s),n(L_({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},dx=e=>{var t=$t();return(n,r)=>i=>{e?.(n,r,i),t(_z())}},fx=(e,t)=>{var n=$t();return(r,i)=>s=>{e?.(r,i,s),n(Nz({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function AN(e){var{fn:t,args:n}=e,r=$t(),i=ea();return A.useEffect(()=>{if(!i){var s=t(n);return r(Tz(s)),()=>{r(Dz(s))}}},[t,n,r,i]),null}var EN=()=>{};function WH(e){var{legendPayload:t}=e,n=$t(),r=ea();return A.useEffect(()=>r?EN:(n(UD(t)),()=>{n(HD(t))}),[n,r,t]),null}function XH(e){var{legendPayload:t}=e,n=$t(),r=De(st);return A.useEffect(()=>r!=="centric"&&r!=="radial"?EN:(n(UD(t)),()=>{n(HD(t))}),[n,r,t]),null}var t0,QH=()=>{var[e]=A.useState(()=>yu("uid-"));return e},JH=(t0=qk.useId)!==null&&t0!==void 0?t0:QH;function ZH(e,t){var n=JH();return t||(e?"".concat(e,"-").concat(n):n)}var e7=A.createContext(void 0),wN=e=>{var{id:t,type:n,children:r}=e,i=ZH("recharts-".concat(n),t);return A.createElement(e7.Provider,{value:i},r(i))},t7={cartesianItems:[],polarItems:[]},PN=Or({name:"graphicalItems",initialState:t7,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=gi(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=gi(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=gi(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:n7,replaceCartesianGraphicalItem:r7,removeCartesianGraphicalItem:a7,addPolarGraphicalItem:i7,removePolarGraphicalItem:s7}=PN.actions,o7=PN.reducer;function l7(e){var t=$t(),n=A.useRef(null);return A.useEffect(()=>{n.current===null?t(n7(e)):n.current!==e&&t(r7({prev:n.current,next:e})),n.current=e},[t,e]),A.useEffect(()=>()=>{n.current&&(t(a7(n.current)),n.current=null)},[t]),null}function c7(e){var t=$t();return A.useEffect(()=>(t(i7(e)),()=>{t(s7(e))}),[t,e]),null}var u7=["onMouseEnter","onClick","onMouseLeave"],d7=["id"],f7=["id"];function px(e,t){if(e==null)return{};var n,r,i=p7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function M2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M2(Object(n),!0).forEach(function(r){h7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h7(e,t,n){return(t=m7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m7(e){var t=g7(e,"string");return typeof t=="symbol"?t:t+""}function g7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ls(){return ls=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ls.apply(null,arguments)}function y7(e){var t=A.useMemo(()=>Ov(e.children,oo),[e.children]),n=De(r=>OH(r,e.id,t));return n==null?null:A.createElement(XH,{legendPayload:n})}function v7(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:f,tooltipType:d}=e;return{dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:$p(u,t),hide:f,type:d,color:l,unit:""}}}var b7=(e,t)=>e>t?"start":e<t?"end":"middle",x7=(e,t,n)=>$n(typeof t=="function"?t(e):t,n,n*.8),S7=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=jD(s,l),f=i+$n(e.cx,s,s/2),d=r+$n(e.cy,l,l/2),m=$n(e.innerRadius,u,0),g=x7(n,e.outerRadius,u),y=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:f,cy:d,innerRadius:m,outerRadius:g,maxRadius:y}},C7=(e,t)=>{var n=bn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function A7(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var E7=(e,t)=>{if(A.isValidElement(e))return A.cloneElement(e,t);if(typeof e=="function")return e(t);var n=ft("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return A.createElement(qD,ls({},t,{type:"linear",className:n}))},w7=(e,t,n)=>{if(A.isValidElement(e))return A.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),A.isValidElement(r)))return r;var i=ft("recharts-pie-label-text",A7(e));return A.createElement(oh,ls({},t,{alignmentBaseline:"middle",className:i}),r)};function P7(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=vo(n),f=Jt(i,!1),d=Jt(s,!1),m=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((y,b)=>{var S=(y.startAngle+y.endAngle)/2,C=Zt(y.cx,y.cy,y.outerRadius+m,S),E=kt(kt(kt(kt({},u),y),{},{stroke:"none"},f),{},{index:b,textAnchor:b7(C.x,y.cx)},C),w=kt(kt(kt(kt({},u),y),{},{fill:"none",stroke:y.fill},d),{},{index:b,points:[Zt(y.cx,y.cy,y.outerRadius,S),C],key:"line"});return A.createElement(lr,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(b)},s&&E7(s,w),w7(i,E,Mt(y,l)))});return A.createElement(lr,{className:"recharts-pie-labels"},g)}function T7(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(yN,{label:n.label}):A.createElement(P7,{sectors:t,props:n,showLabels:r})}function D7(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=De(ho),{onMouseEnter:l,onClick:u,onMouseLeave:f}=i,d=px(i,u7),m=ux(l,i.dataKey),g=dx(f),y=fx(u,i.dataKey);return t==null||t.length===0?null:A.createElement(A.Fragment,null,t.map((b,S)=>{if(b?.startAngle===0&&b?.endAngle===0&&t.length!==1)return null;var C=n&&String(S)===s,E=s?r:null,w=C?n:E,T=kt(kt({},b),{},{stroke:b.stroke,tabIndex:-1,[LD]:S,[$D]:i.dataKey});return A.createElement(lr,ls({tabIndex:-1,className:"recharts-pie-sector"},Du(d,b,S),{onMouseEnter:m(b,S),onMouseLeave:g(b,S),onClick:y(b,S),key:"sector-".concat(b?.startAngle,"-").concat(b?.endAngle,"-").concat(b.midAngle,"-").concat(S)}),A.createElement(CN,ls({option:w,isActive:C,shapeType:"sector"},T)))}))}function O7(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:f,dataKey:d,nameKey:m,tooltipType:g}=n,y=Math.abs(n.minAngle),b=C7(u,f),S=Math.abs(b),C=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,E=r.filter(N=>Mt(N,d,0)!==0).length,w=(S>=360?E:E-1)*C,T=S-E*y-w,D=r.reduce((N,k)=>{var B=Mt(k,d,0);return N+(Ie(B)?B:0)},0),O;if(D>0){var j;O=r.map((N,k)=>{var B=Mt(N,d,0),F=Mt(N,m,k),M=S7(n,s,N),R=(Ie(B)?B:0)/D,z,W=kt(kt({},N),i&&i[k]&&i[k].props);k?z=j.endAngle+bn(b)*C*(B!==0?1:0):z=u;var Z=z+bn(b)*((B!==0?y:0)+R*T),Q=(z+Z)/2,I=(M.innerRadius+M.outerRadius)/2,G=[{name:F,value:B,payload:W,dataKey:d,type:g}],ie=Zt(M.cx,M.cy,I,Q);return j=kt(kt(kt(kt({},n.presentationProps),{},{percent:R,cornerRadius:l,name:F,tooltipPayload:G,midAngle:Q,middleRadius:I,tooltipPosition:ie},W),M),{},{value:Mt(N,d),startAngle:z,endAngle:Z,payload:W,paddingAngle:bn(b)*C}),j})}return O}function _7(e){var{showLabels:t,sectors:n,children:r}=e,i=A.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return A.createElement(pH,{value:t?i:void 0},r)}function N7(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:f,inactiveShape:d,onAnimationStart:m,onAnimationEnd:g}=t,y=Yp(t,"recharts-pie-"),b=n.current,[S,C]=A.useState(!1),E=A.useCallback(()=>{typeof g=="function"&&g(),C(!1)},[g]),w=A.useCallback(()=>{typeof m=="function"&&m(),C(!0)},[m]);return A.createElement(_7,{showLabels:!S,sectors:r},A.createElement(qp,{animationId:y,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:w,onAnimationEnd:E,key:y},T=>{var D=[],O=r&&r[0],j=O?.startAngle;return r?.forEach((N,k)=>{var B=b&&b[k],F=k>0?co(N,"paddingAngle",0):0;if(B){var M=_n(B.endAngle-B.startAngle,N.endAngle-N.startAngle,T),R=kt(kt({},N),{},{startAngle:j+F,endAngle:j+M+F});D.push(R),j=R.endAngle}else{var{endAngle:z,startAngle:W}=N,Z=_n(0,z-W,T),Q=kt(kt({},N),{},{startAngle:j+F,endAngle:j+Z+F});D.push(Q),j=Q.endAngle}}),n.current=D,A.createElement(lr,null,A.createElement(D7,{sectors:D,activeShape:f,inactiveShape:d,allOtherPieProps:t}))}),A.createElement(T7,{showLabels:!S,sectors:r,props:t}),t.children)}var j7={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ml.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function k7(e){var{id:t}=e,n=px(e,d7),{hide:r,className:i,rootTabIndex:s}=e,l=A.useMemo(()=>Ov(e.children,oo),[e.children]),u=De(m=>_H(m,t,l)),f=A.useRef(null),d=ft("recharts-pie",i);return r||u==null?(f.current=null,A.createElement(lr,{tabIndex:s,className:d})):A.createElement(A.Fragment,null,A.createElement(AN,{fn:v7,args:kt(kt({},e),{},{sectors:u})}),A.createElement(lr,{tabIndex:s,className:d},A.createElement(N7,{props:kt(kt({},n),{},{sectors:u}),previousSectorsRef:f})))}function Lf(e){var t=ta(e,j7),{id:n}=t,r=px(t,f7),i=vo(r);return A.createElement(wN,{id:n,type:"pie"},s=>A.createElement(A.Fragment,null,A.createElement(c7,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),A.createElement(y7,ls({},r,{id:s})),A.createElement(k7,ls({},r,{id:s}))))}Lf.displayName="Pie";function I2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function R2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(n),!0).forEach(function(r){M7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M7(e,t,n){return(t=I7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I7(e){var t=R7(e,"string");return typeof t=="symbol"?t:t+""}function R7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L7={xAxis:{},yAxis:{},zAxis:{}},TN=Or({name:"cartesianAxis",initialState:L7,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=R2(R2({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:$7,removeXAxis:B7,addYAxis:z7,removeYAxis:U7,addZAxis:fK,removeZAxis:pK,updateYAxisWidth:H7}=TN.actions,G7=TN.reducer,q7=se([cn],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Y7=se([q7,Ei,wi],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),DN=()=>De(Y7),F7="Invariant failed";function V7(e,t){throw new Error(F7)}var K7=["x","y"];function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},av.apply(null,arguments)}function L2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(n),!0).forEach(function(r){W7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W7(e,t,n){return(t=X7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X7(e){var t=Q7(e,"string");return typeof t=="symbol"?t:t+""}function Q7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J7(e,t){if(e==null)return{};var n,r,i=Z7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function eG(e,t){var{x:n,y:r}=e,i=J7(e,K7),s="".concat(n),l=parseInt(s,10),u="".concat(r),f=parseInt(u,10),d="".concat(t.height||i.height),m=parseInt(d,10),g="".concat(t.width||i.width),y=parseInt(g,10);return au(au(au(au(au({},t),i),l?{x:l}:{}),f?{y:f}:{}),{},{height:m,width:y,name:t.name,radius:t.radius})}function hx(e){return A.createElement(CN,av({shapeType:"rectangle",propTransformer:eG,activeClassName:"recharts-active-bar"},e))}var tG=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Ie(t))return t;var s=Ie(r)||xn(r);return s?t(r,i):(s||V7(),n)}},nG={},ON=Or({name:"errorBars",initialState:nG,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:hK,replaceErrorBar:mK,removeErrorBar:gK}=ON.actions,rG=ON.reducer,aG=["children"];function iG(e,t){if(e==null)return{};var n,r,i=sG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var oG={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},lG=A.createContext(oG);function cG(e){var{children:t}=e,n=iG(e,aG);return A.createElement(lG.Provider,{value:n},t)}function _N(e,t){var n,r,i=De(d=>ps(d,e)),s=De(d=>hs(d,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:br.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:xr.allowDataOverflow,f=l||u;return{needClip:f,needClipX:l,needClipY:u}}function uG(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=DN(),{needClipX:s,needClipY:l,needClip:u}=_N(t,n);if(!u)return null;var{x:f,y:d,width:m,height:g}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:s?f:f-m/2,y:l?d:d-g/2,width:s?m:m*2,height:l?g:g*2}))}var dG=["onMouseEnter","onMouseLeave","onClick"],fG=["value","background","tooltipPosition"],pG=["id"],hG=["onMouseEnter","onClick","onMouseLeave"];function cs(){return cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cs.apply(null,arguments)}function $2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$2(Object(n),!0).forEach(function(r){mG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mG(e,t,n){return(t=gG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gG(e){var t=yG(e,"string");return typeof t=="symbol"?t:t+""}function yG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cp(e,t){if(e==null)return{};var n,r,i=vG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var bG=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:$p(n,t),payload:e}]};function xG(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:$p(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function SG(e){var t=De(ho),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:f}=s,d=Cp(s,dG),m=ux(l,r),g=dx(u),y=fx(f,r);if(!i||n==null)return null;var b=Jt(i,!1);return A.createElement(A.Fragment,null,n.map((S,C)=>{var{value:E,background:w,tooltipPosition:T}=S,D=Cp(S,fG);if(!w)return null;var O=m(S,C),j=g(S,C),N=y(S,C),k=qn(qn(qn(qn(qn({option:i,isActive:String(C)===t},D),{},{fill:"#eee"},w),b),Du(d,S,C)),{},{onMouseEnter:O,onMouseLeave:j,onClick:N,dataKey:r,index:C,className:"recharts-bar-background-rectangle"});return A.createElement(hx,cs({key:"background-bar-".concat(C)},k))}))}function CG(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return qn(qn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return A.createElement(fH,{value:t?i:void 0},n)}function AG(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=De(ho),f=De(X_),d=n&&String(s)===u&&(f==null||l===f),m=d?n:t;return A.createElement(hx,cs({},r,i,{isActive:d,option:m,index:s,dataKey:l}))}function EG(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return A.createElement(hx,cs({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function wG(e){var{data:t,props:n}=e,r=vo(n),{id:i}=r,s=Cp(r,pG),{shape:l,dataKey:u,activeBar:f}=n,{onMouseEnter:d,onClick:m,onMouseLeave:g}=n,y=Cp(n,hG),b=ux(d,u),S=dx(g),C=fx(m,u);return t?A.createElement(A.Fragment,null,t.map((E,w)=>A.createElement(lr,cs({className:"recharts-bar-rectangle"},Du(y,E,w),{onMouseEnter:b(E,w),onMouseLeave:S(E,w),onClick:C(E,w),key:"rectangle-".concat(E?.x,"-").concat(E?.y,"-").concat(E?.value,"-").concat(w)}),f?A.createElement(AG,{shape:l,activeBar:f,baseProps:s,entry:E,index:w,dataKey:u}):A.createElement(EG,{shape:l,baseProps:s,entry:E,index:w,dataKey:u})))):null}function PG(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:f,onAnimationEnd:d,onAnimationStart:m}=t,g=n.current,y=Yp(t,"recharts-bar-"),[b,S]=A.useState(!1),C=!b,E=A.useCallback(()=>{typeof d=="function"&&d(),S(!1)},[d]),w=A.useCallback(()=>{typeof m=="function"&&m(),S(!0)},[m]);return A.createElement(CG,{showLabels:C,rects:r},A.createElement(qp,{animationId:y,begin:l,duration:u,isActive:s,easing:f,onAnimationEnd:E,onAnimationStart:w,key:y},T=>{var D=T===1?r:r?.map((O,j)=>{var N=g&&g[j];if(N)return qn(qn({},O),{},{x:_n(N.x,O.x,T),y:_n(N.y,O.y,T),width:_n(N.width,O.width,T),height:_n(N.height,O.height,T)});if(i==="horizontal"){var k=_n(0,O.height,T);return qn(qn({},O),{},{y:O.y+O.height-k,height:k})}var B=_n(0,O.width,T);return qn(qn({},O),{},{width:B})});return T>0&&(n.current=D??null),D==null?null:A.createElement(lr,null,A.createElement(wG,{props:t,data:D}))}),A.createElement(yN,{label:t.label}),t.children)}function TG(e){var t=A.useRef(null);return A.createElement(PG,{previousRectanglesRef:t,props:e})}var NN=0,DG=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Mt(e,t)}};class OG extends A.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:f,id:d}=this.props;if(t||n==null)return null;var m=ft("recharts-bar",i),g=d;return A.createElement(lr,{className:m,id:d},u&&A.createElement("defs",null,A.createElement(uG,{clipPathId:g,xAxisId:s,yAxisId:l})),A.createElement(lr,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},A.createElement(SG,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),A.createElement(TG,this.props)))}}var _G={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ml.isSsr,legendType:"rect",minPointSize:NN,xAxisId:0,yAxisId:0};function NG(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:f,animationEasing:d,isAnimationActive:m}=e,{needClip:g}=_N(t,n),y=Xv(),b=ea(),S=Ov(e.children,oo),C=De(T=>aq(T,t,n,b,e.id,S));if(y!=="vertical"&&y!=="horizontal")return null;var E,w=C?.[0];return w==null||w.height==null||w.width==null?E=0:E=y==="vertical"?w.height/2:w.width/2,A.createElement(cG,{xAxisId:t,yAxisId:n,data:C,dataPointFormatter:DG,errorBarOffset:E},A.createElement(OG,cs({},e,{layout:y,needClip:g,data:C,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:f,animationEasing:d,isAnimationActive:m})))}function jG(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:f,yAxisTicks:d,stackedData:m,displayedData:g,offset:y,cells:b,parentViewBox:S}=e,C=t==="horizontal"?u:l,E=m?C.scale.domain():null,w=KL({numericAxis:C});return g.map((T,D)=>{var O,j,N,k,B,F;m?O=HL(m[D],E):(O=Mt(T,n),Array.isArray(O)||(O=[w,O]));var M=tG(r,NN)(O[1],D);if(t==="horizontal"){var R,[z,W]=[u.scale(O[0]),u.scale(O[1])];j=wE({axis:l,ticks:f,bandSize:s,offset:i.offset,entry:T,index:D}),N=(R=W??z)!==null&&R!==void 0?R:void 0,k=i.size;var Z=z-W;if(B=Pr(Z)?0:Z,F={x:j,y:y.top,width:k,height:y.height},Math.abs(M)>0&&Math.abs(B)<Math.abs(M)){var Q=bn(B||M)*(Math.abs(M)-Math.abs(B));N-=Q,B+=Q}}else{var[I,G]=[l.scale(O[0]),l.scale(O[1])];if(j=I,N=wE({axis:u,ticks:d,bandSize:s,offset:i.offset,entry:T,index:D}),k=G-I,B=i.size,F={x:y.left,y:N,width:y.width,height:B},Math.abs(M)>0&&Math.abs(k)<Math.abs(M)){var ie=bn(k||M)*(Math.abs(M)-Math.abs(k));k+=ie}}if(j==null||N==null||k==null||B==null)return null;var le=qn(qn({},T),{},{x:j,y:N,width:k,height:B,value:m?O:O[1],payload:T,background:F,tooltipPosition:{x:j+k/2,y:N+B/2},parentViewBox:S},b&&b[D]&&b[D].props);return le}).filter(Boolean)}function ci(e){var t=ta(e,_G),n=ea();return A.createElement(wN,{id:t.id,type:"bar"},r=>A.createElement(A.Fragment,null,A.createElement(WH,{legendPayload:bG(t)}),A.createElement(AN,{fn:xG,args:t}),A.createElement(l7,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:VL(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),A.createElement(NG,cs({},t,{id:r}))))}ci.displayName="Bar";function B2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(n),!0).forEach(function(r){kG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kG(e,t,n){return(t=MG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MG(e){var t=IG(e,"string");return typeof t=="symbol"?t:t+""}function IG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RG=(e,t)=>t,LG=(e,t,n)=>n,$G=(e,t,n,r)=>r,BG=(e,t,n,r,i)=>i,Gu=se([Mb,BG],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),zG=se([Gu],e=>e?.maxBarSize),UG=(e,t,n,r,i,s)=>s,z2=(e,t,n)=>{var r=n??e;if(!xn(r))return $n(r,t,0)},HG=se([st,Mb,RG,LG,$G],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),GG=(e,t,n,r)=>{var i=st(e);return i==="horizontal"?J0(e,"yAxis",n,r):J0(e,"xAxis",t,r)},qG=(e,t,n)=>{var r=st(e);return r==="horizontal"?Hw(e,"xAxis",t):Hw(e,"yAxis",n)},YG=(e,t,n)=>{var r={},i=e.filter(th),s=e.filter(d=>d.stackId==null),l=i.reduce((d,m)=>(d[m.stackId]||(d[m.stackId]=[]),d[m.stackId].push(m),d),r),u=Object.entries(l).map(d=>{var[m,g]=d,y=g.map(S=>S.dataKey),b=z2(t,n,g[0].barSize);return{stackId:m,dataKeys:y,barSize:b}}),f=s.map(d=>{var m=[d.dataKey].filter(y=>y!=null),g=z2(t,n,d.barSize);return{stackId:void 0,dataKeys:m,barSize:g}});return[...u,...f]},FG=se([HG,DB,qG],YG),VG=(e,t,n,r,i)=>{var s,l,u=Gu(e,t,n,r,i);if(u!=null){var f=st(e),d=KO(e),{maxBarSize:m}=u,g=xn(m)?d:m,y,b;return f==="horizontal"?(y=Nl(e,"xAxis",t,r),b=_l(e,"xAxis",t,r)):(y=Nl(e,"yAxis",n,r),b=_l(e,"yAxis",n,r)),(s=(l=Yv(y,b,!0))!==null&&l!==void 0?l:g)!==null&&s!==void 0?s:0}},jN=(e,t,n,r)=>{var i=st(e),s,l;return i==="horizontal"?(s=Nl(e,"xAxis",t,r),l=_l(e,"xAxis",t,r)):(s=Nl(e,"yAxis",n,r),l=_l(e,"yAxis",n,r)),Yv(s,l)};function KG(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=$n(e,n,0,!0),u,f=[];if(Dr(r[0].barSize)){var d=!1,m=n/s,g=r.reduce((w,T)=>w+(T.barSize||0),0);g+=(s-1)*l,g>=n&&(g-=(s-1)*l,l=0),g>=n&&m>0&&(d=!0,m*=.9,g=s*m);var y=(n-g)/2>>0,b={offset:y-l,size:0};u=r.reduce((w,T)=>{var D,O={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:b.offset+b.size+l,size:d?m:(D=T.barSize)!==null&&D!==void 0?D:0}},j=[...w,O];return b=j[j.length-1].position,j},f)}else{var S=$n(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var C=(n-2*S-(s-1)*l)/s;C>1&&(C>>=0);var E=Dr(i)?Math.min(C,i):C;u=r.reduce((w,T,D)=>[...w,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:S+(C+l)*D+(C-E)/2,size:E}}],f)}return u}}var WG=(e,t,n,r,i,s,l)=>{var u=xn(l)?t:l,f=KG(n,r,i!==s?i:s,e,u);return i!==s&&f!=null&&(f=f.map(d=>Tf(Tf({},d),{},{position:Tf(Tf({},d.position),{},{offset:d.position.offset-i/2})}))),f},XG=se([FG,KO,TB,WO,VG,jN,zG],WG),QG=(e,t,n,r)=>Nl(e,"xAxis",t,r),JG=(e,t,n,r)=>Nl(e,"yAxis",n,r),ZG=(e,t,n,r)=>_l(e,"xAxis",t,r),eq=(e,t,n,r)=>_l(e,"yAxis",n,r),tq=se([XG,Gu],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),nq=(e,t)=>{var n=Nb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},rq=se([GG,Gu],nq),aq=se([cn,Fv,QG,JG,ZG,eq,tq,st,Cb,jN,rq,Gu,UG],(e,t,n,r,i,s,l,u,f,d,m,g,y)=>{var{chartData:b,dataStartIndex:S,dataEndIndex:C}=f;if(!(g==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||d==null)){var{data:E}=g,w;if(E!=null&&E.length>0?w=E:w=b?.slice(S,C+1),w!=null)return jG({layout:u,barSettings:g,pos:l,parentViewBox:t,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:m,displayedData:w,offset:e,cells:y})}}),kN=e=>{var{chartData:t}=e,n=$t(),r=ea();return A.useEffect(()=>r?()=>{}:(n(Jw(t)),()=>{n(Jw(void 0))}),[t,n,r]),null},U2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},MN=Or({name:"brush",initialState:U2,reducers:{setBrushSettings(e,t){return t.payload==null?U2:t.payload}}}),{setBrushSettings:yK}=MN.actions,iq=MN.reducer;function sq(e,t,n){return(t=oq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oq(e){var t=lq(e,"string");return typeof t=="symbol"?t:t+""}function lq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class mx{static create(t){return new mx(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}sq(mx,"EPS",1e-4);function cq(e){return(e%180+180)%180}var uq=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=cq(i),l=s*Math.PI/180,u=Math.atan(r/n),f=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(f)},dq={dots:[],areas:[],lines:[]},IN=Or({name:"referenceElements",initialState:dq,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=gi(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=gi(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=gi(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:vK,removeDot:bK,addArea:xK,removeArea:SK,addLine:CK,removeLine:AK}=IN.actions,fq=IN.reducer,pq=A.createContext(void 0),hq=e=>{var{children:t}=e,[n]=A.useState("".concat(yu("recharts"),"-clip")),r=DN();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return A.createElement(pq.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function n0(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function RN(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function mq(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return uq(r,n)}function gq(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Ap(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function yq(e,t){return RN(e,t+1)}function vq(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,f=0,d=1,m=l,g=function(){var S=r?.[f];if(S===void 0)return{v:RN(r,d)};var C=f,E,w=()=>(E===void 0&&(E=n(S,C)),E),T=S.coordinate,D=f===0||Ap(e,T,w,m,u);D||(f=0,m=l,d+=1),D&&(m=T+e*(w()/2+i),f+=d)},y;d<=s.length;)if(y=g(),y)return y.v;return[]}function H2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H2(Object(n),!0).forEach(function(r){bq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bq(e,t,n){return(t=xq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xq(e){var t=Sq(e,"string");return typeof t=="symbol"?t:t+""}function Sq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cq(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:f}=t,d=function(y){var b=s[y],S,C=()=>(S===void 0&&(S=n(b,y)),S);if(y===l-1){var E=e*(b.coordinate+e*C()/2-f);s[y]=b=In(In({},b),{},{tickCoord:E>0?b.coordinate-E*e:b.coordinate})}else s[y]=b=In(In({},b),{},{tickCoord:b.coordinate});var w=Ap(e,b.tickCoord,C,u,f);w&&(f=b.tickCoord-e*(C()/2+i),s[y]=In(In({},b),{},{isShow:!0}))},m=l-1;m>=0;m--)d(m);return s}function Aq(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:f,end:d}=t;if(s){var m=r[u-1],g=n(m,u-1),y=e*(m.coordinate+e*g/2-d);l[u-1]=m=In(In({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate});var b=Ap(e,m.tickCoord,()=>g,f,d);b&&(d=m.tickCoord-e*(g/2+i),l[u-1]=In(In({},m),{},{isShow:!0}))}for(var S=s?u-1:u,C=function(T){var D=l[T],O,j=()=>(O===void 0&&(O=n(D,T)),O);if(T===0){var N=e*(D.coordinate-e*j()/2-f);l[T]=D=In(In({},D),{},{tickCoord:N<0?D.coordinate-N*e:D.coordinate})}else l[T]=D=In(In({},D),{},{tickCoord:D.coordinate});var k=Ap(e,D.tickCoord,j,f,d);k&&(f=D.tickCoord+e*(j()/2+i),l[T]=In(In({},D),{},{isShow:!0}))},E=0;E<S;E++)C(E);return l}function gx(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:f,tickFormatter:d,unit:m,angle:g}=e;if(!i||!i.length||!r)return[];if(Ie(f)||Ml.isSsr){var y;return(y=yq(i,Ie(f)?f:0))!==null&&y!==void 0?y:[]}var b=[],S=u==="top"||u==="bottom"?"width":"height",C=m&&S==="width"?hu(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},E=(D,O)=>{var j=typeof d=="function"?d(D.value,O):D.value;return S==="width"?mq(hu(j,{fontSize:t,letterSpacing:n}),C,g):hu(j,{fontSize:t,letterSpacing:n})[S]},w=i.length>=2?bn(i[1].coordinate-i[0].coordinate):1,T=gq(s,w,S);return f==="equidistantPreserveStart"?vq(w,T,E,i,l):(f==="preserveStart"||f==="preserveStartEnd"?b=Aq(w,T,E,i,l,f==="preserveStartEnd"):b=Cq(w,T,E,i,l),b.filter(D=>D.isShow))}var Eq=["viewBox"],wq=["viewBox"];function yl(){return yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yl.apply(null,arguments)}function G2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(n),!0).forEach(function(r){yx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q2(e,t){if(e==null)return{};var n,r,i=Pq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Pq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yx(e,t,n){return(t=Tq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tq(e){var t=Dq(e,"string");return typeof t=="symbol"?t:t+""}function Dq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ms extends A.Component{constructor(t){super(t),this.tickRefs=A.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=q2(t,Eq),s=this.props,{viewBox:l}=s,u=q2(s,wq);return!n0(r,l)||!n0(i,u)||!n0(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:f,tickMargin:d}=this.props,m,g,y,b,S,C,E=f?-1:1,w=t.tickSize||u,T=Ie(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":m=g=t.coordinate,b=r+ +!f*s,y=b-E*w,C=y-E*d,S=T;break;case"left":y=b=t.coordinate,g=n+ +!f*i,m=g-E*w,S=m-E*d,C=T;break;case"right":y=b=t.coordinate,g=n+ +f*i,m=g+E*w,S=m+E*d,C=T;break;default:m=g=t.coordinate,b=r+ +f*s,y=b+E*w,C=y+E*d,S=T;break}return{line:{x1:m,y1:y,x2:g,y2:b},tick:{x:S,y:C}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,f=sn(sn(sn({},Jt(this.props,!1)),Jt(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!l||s==="bottom"&&l);f=sn(sn({},f),{},{x1:t,y1:n+d*i,x2:t+r,y2:n+d*i})}else{var m=+(s==="left"&&!l||s==="right"&&l);f=sn(sn({},f),{},{x1:t+m*r,y1:n,x2:t+m*r,y2:n+i})}return A.createElement("line",yl({},f,{className:ft("recharts-cartesian-axis-line",co(u,"className"))}))}static renderTickItem(t,n,r){var i,s=ft(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(t))i=A.cloneElement(t,sn(sn({},n),{},{className:s}));else if(typeof t=="function")i=t(sn(sn({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=ft(l,t.className)),i=A.createElement(oh,yl({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:f,padding:d,tickTextProps:m}=this.props,g=gx(sn(sn({},this.props),{},{ticks:r}),t,n),y=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),S=vo(this.props),C=Jt(l,!1),E=sn(sn({},S),{},{fill:"none"},Jt(i,!1)),w=g.map((T,D)=>{var{line:O,tick:j}=this.getTickLineCoord(T),N=sn(sn(sn(sn({textAnchor:y,verticalAnchor:b},S),{},{stroke:"none",fill:s},C),j),{},{index:D,payload:T,visibleTicksCount:g.length,tickFormatter:u,padding:d},m);return A.createElement(lr,yl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},Du(this.props,T,D)),i&&A.createElement("line",yl({},E,O,{className:ft("recharts-cartesian-axis-tick-line",co(i,"className"))})),l&&ms.renderTickItem(l,N,"".concat(typeof u=="function"?u(T.value,D):T.value).concat(f||"")))});return w.length>0?A.createElement("g",{className:"recharts-cartesian-axis-ticks"},w):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:A.createElement(lr,{className:ft("recharts-cartesian-axis",i),ref:u=>{if(u){var f=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(f);var d=f[0];if(d){var m=window.getComputedStyle(d).fontSize,g=window.getComputedStyle(d).letterSpacing;(m!==this.state.fontSize||g!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),A.createElement(Y9,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},A.createElement(tH,{label:this.props.label}),this.props.children))}}yx(ms,"displayName","CartesianAxis");yx(ms,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Oq=["x1","y1","x2","y2","key"],_q=["offset"],Nq=["xAxisId","yAxisId"],jq=["xAxisId","yAxisId"];function Y2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y2(Object(n),!0).forEach(function(r){kq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kq(e,t,n){return(t=Mq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mq(e){var t=Iq(e,"string");return typeof t=="symbol"?t:t+""}function Iq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function no(){return no=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},no.apply(null,arguments)}function Ep(e,t){if(e==null)return{};var n,r,i=Rq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Rq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Lq=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return A.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function LN(e,t){var n;if(A.isValidElement(e))n=A.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,f=Ep(t,Oq),d=vo(f),{offset:m}=d,g=Ep(d,_q);n=A.createElement("line",no({},g,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function $q(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Ep(e,Nq),f=i.map((d,m)=>{var g=Ln(Ln({},u),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(m),index:m});return LN(r,g)});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function Bq(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Ep(e,jq),f=i.map((d,m)=>{var g=Ln(Ln({},u),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(m),index:m});return LN(r,g)});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function zq(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:f=!0}=e;if(!f||!t||!t.length)return null;var d=u.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==d[0]&&d.unshift(0);var m=d.map((g,y)=>{var b=!d[y+1],S=b?i+l-g:d[y+1]-g;if(S<=0)return null;var C=y%t.length;return A.createElement("rect",{key:"react-".concat(y),y:g,x:r,height:S,width:s,stroke:"none",fill:t[C],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Uq(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var d=f.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==d[0]&&d.unshift(0);var m=d.map((g,y)=>{var b=!d[y+1],S=b?i+l-g:d[y+1]-g;if(S<=0)return null;var C=y%n.length;return A.createElement("rect",{key:"react-".concat(y),x:g,y:s,width:S,height:u,stroke:"none",fill:n[C],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Hq=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return MD(gx(Ln(Ln(Ln({},ms.defaultProps),n),{},{ticks:ID(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},Gq=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return MD(gx(Ln(Ln(Ln({},ms.defaultProps),n),{},{ticks:ID(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},qq={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function ui(e){var t=Kv(),n=Wv(),r=BD(),i=Ln(Ln({},ta(e,qq)),{},{x:Ie(e.x)?e.x:r.left,y:Ie(e.y)?e.y:r.top,width:Ie(e.width)?e.width:r.width,height:Ie(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:f,width:d,height:m,syncWithTicks:g,horizontalValues:y,verticalValues:b}=i,S=ea(),C=De(F=>Gw(F,"xAxis",s,S)),E=De(F=>Gw(F,"yAxis",l,S));if(!Ie(d)||d<=0||!Ie(m)||m<=0||!Ie(u)||u!==+u||!Ie(f)||f!==+f)return null;var w=i.verticalCoordinatesGenerator||Hq,T=i.horizontalCoordinatesGenerator||Gq,{horizontalPoints:D,verticalPoints:O}=i;if((!D||!D.length)&&typeof T=="function"){var j=y&&y.length,N=T({yAxis:E?Ln(Ln({},E),{},{ticks:j?y:E.ticks}):void 0,width:t,height:n,offset:r},j?!0:g);pu(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(D=N)}if((!O||!O.length)&&typeof w=="function"){var k=b&&b.length,B=w({xAxis:C?Ln(Ln({},C),{},{ticks:k?b:C.ticks}):void 0,width:t,height:n,offset:r},k?!0:g);pu(Array.isArray(B),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(O=B)}return A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(Lq,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(zq,no({},i,{horizontalPoints:D})),A.createElement(Uq,no({},i,{verticalPoints:O})),A.createElement($q,no({},i,{offset:r,horizontalPoints:D,xAxis:C,yAxis:E})),A.createElement(Bq,no({},i,{offset:r,verticalPoints:O,xAxis:C,yAxis:E})))}ui.displayName="CartesianGrid";var Yq=["children"],Fq=["dangerouslySetInnerHTML","ticks"],Vq=["id"];function $N(e,t,n){return(t=Kq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kq(e){var t=Wq(e,"string");return typeof t=="symbol"?t:t+""}function Wq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iv.apply(null,arguments)}function sv(e,t){if(e==null)return{};var n,r,i=Xq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Xq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Qq(e){var t=$t(),n=A.useMemo(()=>{var{children:r}=e,i=sv(e,Yq);return i},[e]);return A.useEffect(()=>(t($7(n)),()=>{t(B7(n))}),[n,t]),e.children}var Jq=e=>{var{xAxisId:t,className:n}=e,r=De(Fv),i=ea(),s="xAxis",l=De(E=>Ul(E,s,t,i)),u=De(E=>N_(E,s,t,i)),f=De(E=>T_(E,t)),d=De(E=>vz(E,t)),m=De(E=>a_(E,t));if(f==null||d==null||m==null)return null;var{dangerouslySetInnerHTML:g,ticks:y}=e,b=sv(e,Fq),{id:S}=m,C=sv(m,Vq);return A.createElement(ms,iv({},b,C,{scale:l,x:d.x,y:d.y,width:f.width,height:f.height,className:ft("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},Zq=e=>{var t,n,r,i,s;return A.createElement(Qq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},A.createElement(Jq,e))};class Na extends A.Component{render(){return A.createElement(Zq,this.props)}}$N(Na,"displayName","XAxis");$N(Na,"defaultProps",{allowDataOverflow:br.allowDataOverflow,allowDecimals:br.allowDecimals,allowDuplicatedCategory:br.allowDuplicatedCategory,height:br.height,hide:!1,mirror:br.mirror,orientation:br.orientation,padding:br.padding,reversed:br.reversed,scale:br.scale,tickCount:br.tickCount,type:br.type,xAxisId:0});var eY=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(m=>{if(m){var g=m.getBoundingClientRect();g.width>l&&(l=g.width)}});var u=n?n.getBoundingClientRect().width:0,f=i+s,d=l+f+u+(n?r:0);return Math.round(d)}return 0},tY=["dangerouslySetInnerHTML","ticks"],nY=["id"];function BN(e,t,n){return(t=rY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rY(e){var t=aY(e,"string");return typeof t=="symbol"?t:t+""}function aY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ov.apply(null,arguments)}function F2(e,t){if(e==null)return{};var n,r,i=iY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function sY(e){var t=$t();return A.useEffect(()=>(t(z7(e)),()=>{t(U7(e))}),[e,t]),null}var oY=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=A.useRef(null),u=A.useRef(null),f=De(Fv),d=ea(),m=$t(),g="yAxis",y=De(N=>Ul(N,g,n,d)),b=De(N=>D_(N,n)),S=De(N=>bz(N,n)),C=De(N=>N_(N,g,n,d)),E=De(N=>i_(N,n));if(A.useLayoutEffect(()=>{var N;if(!(i!=="auto"||!b||ix(s)||A.isValidElement(s)||E==null)){var k=l.current,B=k==null||(N=k.tickRefs)===null||N===void 0?void 0:N.current,{tickSize:F,tickMargin:M}=k.props,R=eY({ticks:B,label:u.current,labelGapWithTick:5,tickSize:F,tickMargin:M});Math.round(b.width)!==Math.round(R)&&m(H7({id:n,width:R}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,b?.width,b,m,s,n,i]),b==null||S==null||E==null)return null;var{dangerouslySetInnerHTML:w,ticks:T}=e,D=F2(e,tY),{id:O}=E,j=F2(E,nY);return A.createElement(ms,ov({},D,j,{ref:l,labelRef:u,scale:y,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:b.width,height:b.height,className:ft("recharts-".concat(g," ").concat(g),r),viewBox:f,ticks:C}))},lY=e=>{var t,n,r,i,s;return A.createElement(A.Fragment,null,A.createElement(sY,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),A.createElement(oY,e))},cY={allowDataOverflow:xr.allowDataOverflow,allowDecimals:xr.allowDecimals,allowDuplicatedCategory:xr.allowDuplicatedCategory,hide:!1,mirror:xr.mirror,orientation:xr.orientation,padding:xr.padding,reversed:xr.reversed,scale:xr.scale,tickCount:xr.tickCount,type:xr.type,width:xr.width,yAxisId:0};class ja extends A.Component{render(){return A.createElement(lY,this.props)}}BN(ja,"displayName","YAxis");BN(ja,"defaultProps",cY);var r0={exports:{}},a0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2;function uY(){if(V2)return a0;V2=1;var e=jl();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return a0.useSyncExternalStoreWithSelector=function(f,d,m,g,y){var b=i(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function E(j){if(!w){if(w=!0,T=j,j=g(j),y!==void 0&&S.hasValue){var N=S.value;if(y(N,j))return D=N}return D=j}if(N=D,n(T,j))return N;var k=g(j);return y!==void 0&&y(N,k)?(T=j,N):(T=j,D=k)}var w=!1,T,D,O=m===void 0?null:m;return[function(){return E(d())},O===null?void 0:function(){return E(O())}]},[d,m,g,y]);var C=r(f,b[0],b[1]);return s(function(){S.hasValue=!0,S.value=C},[C]),u(C),C},a0}var K2;function dY(){return K2||(K2=1,r0.exports=uY()),r0.exports}dY();function fY(e){e()}function pY(){let e=null,t=null;return{clear(){e=null,t=null},notify(){fY(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var W2={notify(){},get:()=>[]};function hY(e,t){let n,r=W2,i=0,s=!1;function l(C){m();const E=r.subscribe(C);let w=!1;return()=>{w||(w=!0,E(),g())}}function u(){r.notify()}function f(){S.onStateChange&&S.onStateChange()}function d(){return s}function m(){i++,n||(n=e.subscribe(f),r=pY())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=W2)}function y(){s||(s=!0,m())}function b(){s&&(s=!1,g())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:d,trySubscribe:y,tryUnsubscribe:b,getListeners:()=>r};return S}var mY=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gY=mY(),yY=()=>typeof navigator<"u"&&navigator.product==="ReactNative",vY=yY(),bY=()=>gY||vY?A.useLayoutEffect:A.useEffect,xY=bY(),SY=Symbol.for("react-redux-context"),CY=typeof globalThis<"u"?globalThis:{};function AY(){if(!A.createContext)return{};const e=CY[SY]??=new Map;let t=e.get(A.createContext);return t||(t=A.createContext(null),e.set(A.createContext,t)),t}var EY=AY();function wY(e){const{children:t,context:n,serverState:r,store:i}=e,s=A.useMemo(()=>{const f=hY(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),l=A.useMemo(()=>i.getState(),[i]);xY(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,l]);const u=n||EY;return A.createElement(u.Provider,{value:s},t)}var PY=wY,TY=(e,t)=>t,vx=se([TY,st,t_,dn,F_,Ti,AU,cn],DU),bx=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},zN=Jr("mouseClick"),UN=_u();UN.startListening({actionCreator:zN,effect:(e,t)=>{var n=e.payload,r=vx(t.getState(),bx(n));r?.activeIndex!=null&&t.dispatch(jz({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var lv=Jr("mouseMove"),HN=_u();HN.startListening({actionCreator:lv,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Xb(r,r.tooltip.settings.shared),s=vx(r,bx(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(B_({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch($_()))}});function DY(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var X2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},GN=Or({name:"rootProps",initialState:X2,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:X2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),OY=GN.reducer,{updateOptions:_Y}=GN.actions,qN=Or({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:NY}=qN.actions,jY=qN.reducer,YN=Jr("keyDown"),FN=Jr("focus"),xx=_u();xx.startListening({actionCreator:YN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(Qb(i,Gl(n))),u=Ti(n);if(s==="Enter"){var f=vp(n,"axis","hover",String(i.index));t.dispatch(ev({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:f}));return}var d=Az(n),m=d==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,y=l+g*m;if(!(u==null||y>=u.length||y<0)){var b=vp(n,"axis","hover",String(y));t.dispatch(ev({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}});xx.startListening({actionCreator:FN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=vp(n,"axis","hover",String(s));t.dispatch(ev({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Wr=Jr("externalEvent"),VN=_u();VN.startListening({actionCreator:Wr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:hU(n),activeDataKey:X_(n),activeIndex:ho(n),activeLabel:W_(n),activeTooltipIndex:ho(n),isTooltipActive:mU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var kY=se([Hl],e=>e.tooltipItemPayloads),MY=se([kY,Uu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),KN=Jr("touchMove"),WN=_u();WN.startListening({actionCreator:KN,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Xb(r,r.tooltip.settings.shared);if(i==="axis"){var s=vx(r,bx({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(B_({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],f=document.elementFromPoint(u.clientX,u.clientY);if(!f||!f.getAttribute)return;var d=f.getAttribute(LD),m=(l=f.getAttribute($D))!==null&&l!==void 0?l:void 0,g=MY(t.getState(),d,m);t.dispatch(L_({activeDataKey:m,activeIndex:d,activeCoordinate:g}))}}});var IY=cD({brush:iq,cartesianAxis:G7,chartData:qU,errorBars:rG,graphicalItems:o7,layout:PL,legend:g4,options:BU,polarAxis:AH,polarOptions:jY,referenceElements:fq,rootProps:OY,tooltip:kz}),RY=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Q3({reducer:IY,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([UN.middleware,HN.middleware,xx.middleware,VN.middleware,WN.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:DY},name:"recharts-".concat(n)}})};function XN(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=ea(),s=A.useRef(null);if(i)return n;s.current==null&&(s.current=RY(t,r));var l=Bv;return A.createElement(PY,{context:l,store:s.current},n)}function QN(e){var{layout:t,width:n,height:r,margin:i}=e,s=$t(),l=ea();return A.useEffect(()=>{l||(s(AL(t)),s(EL({width:n,height:r})),s(CL(i)))},[s,l,t,n,r,i]),null}function JN(e){var t=$t();return A.useEffect(()=>{t(_Y(e))},[t,e]),null}var LY=["children"];function $Y(e,t){if(e==null)return{};var n,r,i=BY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function BY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wp.apply(null,arguments)}var zY={width:"100%",height:"100%"},UY=A.forwardRef((e,t)=>{var n=Kv(),r=Wv(),i=GD();if(!wl(n)||!wl(r))return null;var{children:s,otherAttributes:l,title:u,desc:f}=e,d,m;return typeof l.tabIndex=="number"?d=l.tabIndex:d=i?0:void 0,typeof l.role=="string"?m=l.role:m=i?"application":void 0,A.createElement(_v,wp({},l,{title:u,desc:f,role:m,tabIndex:d,width:n,height:r,style:zY,ref:t}),s)}),HY=e=>{var{children:t}=e,n=De(Hp);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return A.createElement(_v,{width:r,height:i,x:l,y:s},t)},Q2=A.forwardRef((e,t)=>{var{children:n}=e,r=$Y(e,LY),i=ea();return i?A.createElement(HY,null,n):A.createElement(UY,wp({ref:t},r),n)});function GY(){var e=$t(),[t,n]=A.useState(null),r=De(t4);return A.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;Dr(s)&&s!==r&&e(wL(s))}},[t,e,r]),n}function J2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J2(Object(n),!0).forEach(function(r){YY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YY(e,t,n){return(t=FY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FY(e){var t=VY(e,"string");return typeof t=="symbol"?t:t+""}function VY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KY=A.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:f,onMouseEnter:d,onMouseLeave:m,onMouseMove:g,onMouseUp:y,onTouchEnd:b,onTouchMove:S,onTouchStart:C,style:E,width:w}=e,T=$t(),[D,O]=A.useState(null),[j,N]=A.useState(null);ZU();var k=GY(),B=A.useCallback(V=>{k(V),typeof t=="function"&&t(V),O(V),N(V)},[k,t,O,N]),F=A.useCallback(V=>{T(zN(V)),T(Wr({handler:s,reactEvent:V}))},[T,s]),M=A.useCallback(V=>{T(lv(V)),T(Wr({handler:d,reactEvent:V}))},[T,d]),R=A.useCallback(V=>{T($_()),T(Wr({handler:m,reactEvent:V}))},[T,m]),z=A.useCallback(V=>{T(lv(V)),T(Wr({handler:g,reactEvent:V}))},[T,g]),W=A.useCallback(()=>{T(FN())},[T]),Z=A.useCallback(V=>{T(YN(V.key))},[T]),Q=A.useCallback(V=>{T(Wr({handler:l,reactEvent:V}))},[T,l]),I=A.useCallback(V=>{T(Wr({handler:u,reactEvent:V}))},[T,u]),G=A.useCallback(V=>{T(Wr({handler:f,reactEvent:V}))},[T,f]),ie=A.useCallback(V=>{T(Wr({handler:y,reactEvent:V}))},[T,y]),le=A.useCallback(V=>{T(Wr({handler:C,reactEvent:V}))},[T,C]),$=A.useCallback(V=>{T(KN(V)),T(Wr({handler:S,reactEvent:V}))},[T,S]),q=A.useCallback(V=>{T(Wr({handler:b,reactEvent:V}))},[T,b]);return A.createElement(nN.Provider,{value:D},A.createElement(_T.Provider,{value:j},A.createElement("div",{className:ft("recharts-wrapper",r),style:qY({position:"relative",cursor:"default",width:w,height:i},E),onClick:F,onContextMenu:Q,onDoubleClick:I,onFocus:W,onKeyDown:Z,onMouseDown:G,onMouseEnter:M,onMouseLeave:R,onMouseMove:z,onMouseUp:ie,onTouchEnd:q,onTouchMove:$,onTouchStart:le,ref:B},n)))}),WY=["children","className","width","height","style","compact","title","desc"];function XY(e,t){if(e==null)return{};var n,r,i=QY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function QY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var ZN=A.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:f,desc:d}=e,m=XY(e,WY),g=vo(m);return u?A.createElement(Q2,{otherAttributes:g,title:f,desc:d},n):A.createElement(KY,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},A.createElement(Q2,{otherAttributes:g,title:f,desc:d,ref:t},A.createElement(hq,null,n)))}),JY=["width","height"];function cv(){return cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cv.apply(null,arguments)}function ZY(e,t){if(e==null)return{};var n,r,i=eF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function eF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var tF={top:5,right:5,bottom:5,left:5},nF={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:tF,reverseStackOrder:!1,syncMethod:"index"},rF=A.forwardRef(function(t,n){var r,i=ta(t.categoricalChartProps,nF),{width:s,height:l}=i,u=ZY(i,JY);if(!wl(s)||!wl(l))return null;var{chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,categoricalChartProps:y}=t,b={chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return A.createElement(XN,{preloadedState:{options:b},reduxStoreName:(r=y.id)!==null&&r!==void 0?r:f},A.createElement(kN,{chartData:y.data}),A.createElement(QN,{width:s,height:l,layout:i.layout,margin:i.margin}),A.createElement(JN,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),A.createElement(ZN,cv({},u,{width:s,height:l,ref:n})))}),aF=["axis","item"],es=A.forwardRef((e,t)=>A.createElement(rF,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aF,tooltipPayloadSearcher:rN,categoricalChartProps:e,ref:t}));function iF(e){var t=$t();return A.useEffect(()=>{t(NY(e))},[t,e]),null}var sF=["width","height","layout"];function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uv.apply(null,arguments)}function oF(e,t){if(e==null)return{};var n,r,i=lF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lF(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var cF={top:5,right:5,bottom:5,left:5},uF={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:cF,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},dF=A.forwardRef(function(t,n){var r,i=ta(t.categoricalChartProps,uF),{width:s,height:l,layout:u}=i,f=oF(i,sF);if(!wl(s)||!wl(l))return null;var{chartName:d,defaultTooltipEventType:m,validateTooltipEventTypes:g,tooltipPayloadSearcher:y}=t,b={chartName:d,defaultTooltipEventType:m,validateTooltipEventTypes:g,tooltipPayloadSearcher:y,eventEmitter:void 0};return A.createElement(XN,{preloadedState:{options:b},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:d},A.createElement(kN,{chartData:i.data}),A.createElement(QN,{width:s,height:l,layout:u,margin:i.margin}),A.createElement(JN,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),A.createElement(iF,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(ZN,uv({width:s,height:l},f,{ref:n})))}),fF=["item"],pF={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},i0=A.forwardRef((e,t)=>{var n=ta(e,pF);return A.createElement(dF,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:fF,tooltipPayloadSearcher:rN,categoricalChartProps:n,ref:t})});const hF=({card:e,onClose:t})=>e?p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:p.jsx("div",{onClick:n=>n.stopPropagation(),children:p.jsx($a,{card:e,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1,scale:1.5})})}):null,mF=({drone:e,onClose:t})=>e?p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:p.jsx("div",{onClick:n=>n.stopPropagation(),children:p.jsx(vi,{drone:e,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,ignoreDeployLimit:!0,appliedUpgrades:[],scale:1.5,isViewOnly:!0})})}):null,gF=({component:e,onClose:t})=>{if(!e)return null;const n=(r,i)=>{const s=r.stats.healthy,l=r.middleLaneBonus||{},u={};return Object.keys(s).forEach(f=>{u[f]=s[f]+(i&&l[f]||0)}),u};return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-cyan-500 p-8 shadow-2xl shadow-cyan-500/20 max-w-6xl w-[95vw]",onClick:r=>r.stopPropagation(),children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-orbitron font-bold text-cyan-400 mb-2",children:e.name}),p.jsx("p",{className:"text-gray-400 text-sm",children:e.description})]}),p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:p.jsx(ln,{size:32})})]}),p.jsx("div",{className:"mb-4 text-center",children:p.jsx("p",{className:"text-yellow-400 font-semibold text-sm",children:"Compare standard lane stats with middle lane bonus stats. The middle lane provides enhanced performance!"})}),p.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-center font-orbitron text-lg text-gray-300 mb-3",children:"LEFT / RIGHT LANE"}),p.jsx("div",{className:"h-[250px]",children:p.jsx(lo,{section:e.key,stats:e,effectiveStatsForDisplay:n(e,!1),isPlayer:!0,isInMiddleLane:!1,gameEngine:Le,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-xl animate-pulse"}),p.jsxs("div",{className:"relative",children:[p.jsx("h3",{className:"text-center font-orbitron text-lg text-yellow-400 mb-3 font-bold",children:"MIDDLE LANE (BONUS)"}),p.jsx("div",{className:"h-[250px]",children:p.jsx(lo,{section:e.key,stats:e,effectiveStatsForDisplay:n(e,!0),isPlayer:!0,isInMiddleLane:!0,gameEngine:Le,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})})]})]})]}),e.ability&&p.jsxs("div",{className:"mt-6 p-4 bg-purple-900/30 rounded-lg border border-purple-500/50",children:[p.jsxs("h4",{className:"font-orbitron text-purple-400 font-bold mb-2",children:["Ship Ability: ",e.ability.name]}),p.jsx("p",{className:"text-gray-300 text-sm mb-2",children:e.ability.description}),p.jsxs("p",{className:"text-gray-400 text-xs",children:["Cost: ",e.ability.cost.energy," Energy"]})]})]})})},ej=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onDronesChange:i,selectedShipComponents:s,onShipComponentsChange:l,onConfirmDeck:u,onImportDeck:f,onBack:d})=>{const[m,g]=A.useState(null),[y,b]=A.useState(null),[S,C]=A.useState(null),[E,w]=A.useState(!1),[T,D]=A.useState(!1),[O,j]=A.useState(!1),[N,k]=A.useState("cards"),[B,F]=A.useState("deck"),[M,R]=A.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[z,W]=A.useState(!1),Z=A.useRef(null),[Q,I]=A.useState({key:"name",direction:"ascending"}),[G,ie]=A.useState({abilities:[]}),[le,$]=A.useState({key:"name",direction:"ascending"}),[q,V]=A.useState("cost"),[te,ve]=A.useState(!0),[Se,Ee]=A.useState("table"),[Oe,ke]=A.useState("table"),xe=A.useMemo(()=>{const L=oe=>oe?oe.replace(/_/g," ").toLowerCase().split(" ").map(ce=>ce.charAt(0).toUpperCase()+ce.slice(1)).join(" "):"";return t.map(oe=>{const de=[],ce=oe.effect;if(ce.type==="REPEATING_EFFECT")de.push(L(ce.type)),ce.effects&&Array.isArray(ce.effects)&&ce.effects.forEach(be=>{be.type&&de.push(L(be.type))});else if(ce.type==="MODIFY_DRONE_BASE"&&ce.mod){const be=ce.mod.stat,$e=ce.mod.value;be==="attack"?de.push($e>0?"Attack Buff":"Attack Debuff"):be==="speed"?de.push($e>0?"Speed Buff":"Speed Debuff"):be==="shields"?de.push($e>0?"Shield Buff":"Shield Debuff"):be==="cost"?de.push($e<0?"Cost Reduction":"Cost Increase"):be==="limit"?de.push($e>0?"Limit Buff":"Limit Debuff"):be==="ability"?(de.push("Ability Grant"),ce.mod.abilityToAdd&&ce.mod.abilityToAdd.name&&de.push(ce.mod.abilityToAdd.name)):de.push(L(`${be} Modification`))}else if(ce.type==="MODIFY_STAT"&&ce.mod){const be=ce.mod.stat,$e=ce.mod.value;ce.mod.type,be==="attack"?de.push($e>0?"Attack Buff":"Attack Debuff"):be==="speed"?de.push($e>0?"Speed Buff":"Speed Debuff"):be==="shields"?de.push($e>0?"Shield Buff":"Shield Debuff"):de.push($e>0?`${be} Buff`:`${be} Debuff`)}else ce.type==="SEARCH_AND_DRAW"?(de.push(L(ce.type)),de.push("Draw")):ce.type&&de.push(L(ce.type));ce.goAgain&&de.push("Go Again"),ce.damageType==="PIERCING"&&de.push("Piercing"),ce.mod?.type&&de.push(L(ce.mod.type));const pe=(()=>{if(oe.targeting){const be=L(oe.targeting.type);if(oe.targeting.affinity){const $e=oe.targeting.affinity.charAt(0)+oe.targeting.affinity.slice(1).toLowerCase();return`${be} (${$e})`}return be}else if(ce.type==="MULTI_MOVE"&&ce.source){const be=ce.source.location||"Any",$e=ce.source.affinity||"Any",pn=$e.charAt(0).toUpperCase()+$e.slice(1).toLowerCase();return`${L(be)} (${pn})`}else if(ce.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...oe,keywords:de,targetingText:pe}})},[t]),Me=A.useMemo(()=>yt.filter(L=>L.selectable!==!1).map(L=>{const oe=[];L.abilities&&L.abilities.length>0&&L.abilities.forEach(ce=>{ce.name&&oe.push(ce.name),ce.type&&oe.push(ce.type==="ACTIVE"?"Active":ce.type==="PASSIVE"?"Passive":"Triggered"),ce.effect?.keyword&&oe.push(ce.effect.keyword)});const de=L.abilities&&L.abilities.length>0?L.abilities.map(ce=>ce.description).join(" | "):"No abilities";return{...L,keywords:oe,description:de}}),[]),Ne=A.useMemo(()=>{const L=new Set,oe=new Set,de=new Set;xe.forEach(pe=>{L.add(pe.cost),oe.add(pe.targetingText),pe.keywords.forEach(be=>de.add(be))});const ce=Array.from(L);return{minCost:Math.min(...ce),maxCost:Math.max(...ce),targets:["all",...Array.from(oe).sort()],abilities:Array.from(de).sort()}},[xe]),ye=A.useMemo(()=>{const L=new Set;return Me.forEach(oe=>{oe.keywords.forEach(de=>L.add(de))}),{abilities:Array.from(L).sort()}},[Me]);A.useEffect(()=>{Ne.minCost!==1/0&&Ne.maxCost!==-1/0&&R(L=>({...L,cost:{min:Ne.minCost,max:Ne.maxCost}}))},[Ne.minCost,Ne.maxCost]);const{cardCount:Pt,deckListForDisplay:qe,baseCardCounts:Gt}=A.useMemo(()=>{const L={};let oe=0;Object.entries(n).forEach(([ce,pe])=>{if(pe>0){oe+=pe;const be=xe.find($e=>$e.id===ce);if(be){const $e=be.baseCardId;L[$e]=(L[$e]||0)+pe}}});const de=Object.entries(n).filter(([,ce])=>ce>0).map(([ce,pe])=>({...xe.find($e=>$e.id===ce),quantity:pe})).sort((ce,pe)=>ce.name.localeCompare(pe.name));return{cardCount:oe,deckListForDisplay:de,baseCardCounts:L}},[n,xe]),qt=Pt>=40,{droneCount:Tt,droneListForDisplay:_r}=A.useMemo(()=>{let L=0;const oe=[];return Object.entries(e||{}).forEach(([de,ce])=>{if(ce>0){L+=ce;const pe=Me.find(be=>be.name===de);pe&&oe.push({...pe,quantity:ce})}}),oe.sort((de,ce)=>de.name.localeCompare(ce.name)),{droneCount:L,droneListForDisplay:oe}},[e,Me]),Nr=Tt===10,{shipComponentCount:zn,shipComponentsValid:ra}=A.useMemo(()=>{const L=s||{},oe=Object.keys(L).filter(Ye=>L[Ye]).length,de=Object.keys(L).some(Ye=>{const Ve=rr.find(Nt=>Nt.id===Ye);return Ve&&Ve.type==="Bridge"&&L[Ye]}),ce=Object.keys(L).some(Ye=>{const Ve=rr.find(Nt=>Nt.id===Ye);return Ve&&Ve.type==="Power Cell"&&L[Ye]}),pe=Object.keys(L).some(Ye=>{const Ve=rr.find(Nt=>Nt.id===Ye);return Ve&&Ve.type==="Drone Control Hub"&&L[Ye]}),be=Object.values(L).filter(Ye=>Ye),$e=new Set(be),pn=be.length===3,Dt=$e.size===3;return{shipComponentCount:oe,shipComponentsValid:de&&ce&&pe&&pn&&Dt}},[s]),Ca=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],Di=A.useMemo(()=>{const L={};qe.forEach(pe=>{const be=pe.cost||0;L[be]=(L[be]||0)+pe.quantity});const oe=Object.entries(L).map(([pe,be])=>({name:`${pe}`,count:be})).sort((pe,be)=>parseInt(pe.name)-parseInt(be.name)),de={};qe.forEach(pe=>{pe.keywords&&pe.keywords.forEach(be=>{de[be]=(de[be]||0)+pe.quantity})});const ce=Object.entries(de).map(([pe,be])=>({name:pe,value:be})).sort((pe,be)=>be.value-pe.value);return{barChartData:oe,pieChartData:ce}},[qe]),Kn=A.useMemo(()=>{const L=Ye=>{const Ve={};return _r.forEach(Nt=>{const Un=Nt[Ye]||0;Ve[Un]=(Ve[Un]||0)+Nt.quantity}),Object.entries(Ve).map(([Nt,Un])=>({name:`${Nt}`,count:Un})).sort((Nt,Un)=>parseInt(Nt.name)-parseInt(Un.name))},oe=L("class"),de=L("attack"),ce=L("speed"),pe=L("shields"),be=L("hull"),$e=L("limit"),pn=L("upgradeSlots"),Dt={};_r.forEach(Ye=>{Ye.keywords&&Ye.keywords.forEach(Ve=>{Dt[Ve]=(Dt[Ve]||0)+Ye.quantity})});const vt=Object.entries(Dt).map(([Ye,Ve])=>({name:Ye,value:Ve})).sort((Ye,Ve)=>Ve.value-Ye.value);return{costData:oe,attackData:de,speedData:ce,shieldsData:pe,hullData:be,limitData:$e,upgradesData:pn,abilityData:vt}},[_r]),Ao=A.useMemo(()=>{const L=[];Object.entries(e||{}).forEach(([de,ce])=>{if(ce>0){const pe=Me.find(be=>be.name===de);pe&&L.push(pe)}});const oe=[];return Object.entries(n).forEach(([de,ce])=>{if(ce>0){const pe=xe.find(be=>be.id===de);pe&&oe.push({card:pe,quantity:ce})}}),{drones:L,cards:oe}},[e,n,Me,xe]),aa=A.useMemo(()=>{let L=[...xe].filter(oe=>oe.cost<M.cost.min||oe.cost>M.cost.max||M.target!=="all"&&oe.targetingText!==M.target||M.type!=="all"&&oe.type!==M.type?!1:M.abilities.length>0?M.abilities.every(de=>oe.keywords.includes(de)):!(M.hideEnhanced&&oe.id.endsWith("_ENHANCED")));return Q.key!==null&&L.sort((oe,de)=>{const ce=oe[Q.key],pe=de[Q.key];if(ce==null&&pe==null)return 0;if(ce==null)return 1;if(pe==null)return-1;const be=String(ce).toLowerCase(),$e=String(pe).toLowerCase();return be<$e?Q.direction==="ascending"?-1:1:be>$e?Q.direction==="ascending"?1:-1:oe.id.localeCompare(de.id)}),L},[xe,M,Q]),fn=A.useMemo(()=>{let L=[...Me].filter(oe=>G.abilities.length>0?G.abilities.every(de=>oe.keywords.includes(de)):!0);return le.key!==null&&L.sort((oe,de)=>{const ce=oe[le.key],pe=de[le.key];if(ce==null&&pe==null)return 0;if(ce==null)return 1;if(pe==null)return-1;const be=String(ce).toLowerCase(),$e=String(pe).toLowerCase();return be<$e?le.direction==="ascending"?-1:1:be>$e?le.direction==="ascending"?1:-1:oe.name.localeCompare(de.name)}),L},[Me,G,le]),jn=L=>{let oe="ascending";Q.key===L&&Q.direction==="ascending"&&(oe="descending"),I({key:L,direction:oe})},_e=L=>{let oe="ascending";le.key===L&&le.direction==="ascending"&&(oe="descending"),$({key:L,direction:oe})},tn=(L,oe)=>{R(de=>({...de,[L]:oe}))},ql=L=>{R(oe=>{const de=oe.abilities.includes(L)?oe.abilities.filter(ce=>ce!==L):[...oe.abilities,L];return{...oe,abilities:de}})},Eo=L=>{ie(oe=>{const de=oe.abilities.includes(L)?oe.abilities.filter(ce=>ce!==L):[...oe.abilities,L];return{...oe,abilities:de}})},Oi=()=>{R({cost:{min:Ne.minCost,max:Ne.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),W(!1)},_i=()=>{ie({abilities:[]})},Wn=()=>{Object.keys(n).forEach(L=>{n[L]>0&&r(L,0)})},jr=()=>{Object.keys(e||{}).forEach(L=>{e[L]>0&&i(L,0)})};A.useEffect(()=>{const L=oe=>{Z.current&&!Z.current.contains(oe.target)&&W(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const Aa=Math.PI/180,wo=({cx:L,cy:oe,midAngle:de,outerRadius:ce,fill:pe,name:be,value:$e})=>{const pn=Math.sin(-Aa*de),Dt=Math.cos(-Aa*de),vt=L+(ce+5)*Dt,Ye=oe+(ce+5)*pn,Ve=L+(ce+15)*Dt,Nt=oe+(ce+15)*pn,Un=Ve+(Dt>=0?1:-1)*12,ia=Nt,To=Dt>=0?"start":"end";return p.jsxs("g",{children:[p.jsx("path",{d:`M${vt},${Ye}L${Ve},${Nt}L${Un},${ia}`,stroke:pe,fill:"none"}),p.jsx("circle",{cx:Un,cy:ia,r:2,fill:pe,stroke:"none"}),p.jsx("text",{x:Un+(Dt>=0?1:-1)*8,y:ia,dy:4,textAnchor:To,fill:"#9CA3AF",fontSize:"11px",children:`${be} (${$e})`})]})},Po=()=>{const[L,oe]=A.useState(""),de=A.useRef(null),ce=A.useMemo(()=>{const be=Object.entries(n).map(([Dt,vt])=>`${Dt}:${vt}`).join(","),$e=Object.entries(e||{}).map(([Dt,vt])=>`${Dt}:${vt}`).join(","),pn=Object.entries(s||{}).filter(([Dt,vt])=>vt).map(([Dt,vt])=>`${Dt}:${vt}`).join(",");return`cards:${be}|drones:${$e}|ship:${pn}`},[n,e,s]),pe=()=>{de.current.select(),document.execCommand("copy"),oe("Copied!"),setTimeout(()=>oe(""),2e3)};return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>w(!1),children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:be=>be.stopPropagation(),children:[p.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"}),p.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck and drones."}),p.jsx("textarea",{ref:de,readOnly:!0,value:ce,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),p.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[p.jsx("span",{className:"text-green-400 self-center",children:L}),p.jsxs("button",{onClick:pe,className:"btn-confirm flex items-center gap-2",children:[p.jsx(pv,{size:16})," Copy to Clipboard"]}),p.jsxs("button",{onClick:()=>w(!1),className:"btn-cancel flex items-center gap-2",children:[p.jsx(ln,{size:16})," Close"]})]})]})})},Ni=()=>{const[L,oe]=A.useState(""),[de,ce]=A.useState(""),pe=()=>{ce("");const be=f(L);be.success?D(!1):ce(be.message||"Invalid deck code format.")};return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>D(!1),children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:be=>be.stopPropagation(),children:[p.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),p.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load both cards and drones into the builder."}),p.jsx("textarea",{value:L,onChange:be=>oe(be.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"cards:CARD001:4,CARD002:2|drones:Scout Drone:1,Heavy Fighter:1"}),de&&p.jsx("p",{className:"text-red-500 mt-2",children:de}),p.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[p.jsx("button",{onClick:()=>D(!1),className:"btn-cancel",children:"Cancel"}),p.jsx("button",{onClick:pe,className:"btn-confirm",children:"Load Deck"})]})]})})};return p.jsxs("div",{className:"w-full flex flex-col text-white font-exo mt-8 text-sm",children:[m&&p.jsx(hF,{card:m,onClose:()=>g(null)}),y&&p.jsx(mF,{drone:y,onClose:()=>b(null)}),S&&p.jsx(gF,{component:S,onClose:()=>C(null)}),E&&p.jsx(Po,{}),T&&p.jsx(Ni,{}),p.jsx(Ev,{isOpen:O,onClose:()=>j(!1),title:"Your Deck & Drones",drones:Ao.drones,cards:Ao.cards,shipComponents:s||{}}),p.jsx("div",{className:"flex justify-center items-center mb-4",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("h1",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),d&&p.jsxs("button",{onClick:d,className:"btn-cancel flex items-center gap-2",children:[p.jsx(Qk,{size:16})," Back"]})]})}),p.jsxs("div",{className:"flex-grow flex gap-6 min-h-0 mb-[10px]",children:[p.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700 h-[calc(100vh-99px)] ml-[10px]",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>{k("cards"),F("deck")},className:`btn-utility ${N==="cards"?"opacity-100":"opacity-60"}`,children:"Cards"}),p.jsx("button",{onClick:()=>{k("drones"),F("drones")},className:`btn-utility ${N==="drones"?"opacity-100":"opacity-60"}`,children:"Drones"}),p.jsx("button",{onClick:()=>{k("ship"),F("ship")},className:`btn-utility ${N==="ship"?"opacity-100":"opacity-60"}`,children:"Ship Components"}),p.jsxs("button",{onClick:()=>j(!0),className:"btn-utility flex items-center gap-2",children:[p.jsx(fM,{size:16}),"View Deck"]}),p.jsxs("button",{onClick:()=>D(!0),className:"btn-utility flex items-center gap-2",children:[p.jsx(_M,{size:16}),"Import"]}),p.jsxs("button",{onClick:()=>w(!0),className:"btn-utility flex items-center gap-2",children:[p.jsx(oM,{size:16}),"Export"]})]}),p.jsxs("div",{className:"flex gap-2 items-center",children:[N==="cards"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>Ee("table"),className:`btn-utility p-2 ${Se==="table"?"opacity-100":"opacity-60"}`,title:"Table View",children:p.jsx(jC,{size:18})}),p.jsx("button",{onClick:()=>Ee("grid"),className:`btn-utility p-2 ${Se==="grid"?"opacity-100":"opacity-60"}`,title:"Grid View",children:p.jsx(NC,{size:18})})]}),N==="drones"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>ke("table"),className:`btn-utility p-2 ${Oe==="table"?"opacity-100":"opacity-60"}`,title:"Table View",children:p.jsx(jC,{size:18})}),p.jsx("button",{onClick:()=>ke("grid"),className:`btn-utility p-2 ${Oe==="grid"?"opacity-100":"opacity-60"}`,title:"Grid View",children:p.jsx(NC,{size:18})})]}),p.jsx("button",{onClick:N==="cards"?Oi:_i,className:"btn-reset",children:"Reset Filters"})]})]}),N==="cards"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[p.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[p.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",M.cost.min," - ",M.cost.max]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"range",min:Ne.minCost,max:Ne.maxCost,value:M.cost.min,onChange:L=>tn("cost",{...M.cost,min:Math.min(parseInt(L.target.value),M.cost.max)}),className:"w-1/2"}),p.jsx("input",{type:"range",min:Ne.minCost,max:Ne.maxCost,value:M.cost.max,onChange:L=>tn("cost",{...M.cost,max:Math.max(parseInt(L.target.value),M.cost.min)}),className:"w-1/2"})]})]}),p.jsxs("div",{className:"relative",ref:Z,children:[p.jsx("button",{onClick:()=>W(!z),className:"filter-select w-full text-left h-full",children:M.abilities.length===0?"Select Abilities":`${M.abilities.length} Abilities Selected`}),z&&p.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:Ne.abilities.map(L=>p.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:M.abilities.includes(L),onChange:()=>ql(L),className:"mr-2"}),L]},L))})]}),p.jsxs("select",{onChange:L=>tn("type",L.target.value),value:M.type,className:"filter-select h-full",children:[p.jsx("option",{value:"all",children:"All Types"}),p.jsx("option",{value:"Action",children:"Action Cards"}),p.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),p.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:p.jsxs("label",{className:"flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:M.hideEnhanced,onChange:L=>tn("hideEnhanced",L.target.checked),className:"mr-2"}),p.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),Se==="table"&&p.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:p.jsxs("table",{className:"w-full text-left deck-builder-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Info"}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>jn("name"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",Q.key==="name"&&(Q.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>jn("type"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",Q.key==="type"&&(Q.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>jn("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",Q.key==="cost"&&(Q.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>jn("description"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",Q.key==="description"&&(Q.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:"Abilities"}),p.jsx("th",{children:"Targeting"}),p.jsx("th",{children:"Quantity"})]})}),p.jsx("tbody",{children:aa.map((L,oe)=>{const de=n[L.id]||0,ce=Gt[L.baseCardId]||0,pe=L.maxInDeck;return p.jsxs("tr",{className:L.type==="Upgrade"?"bg-purple-900/10":"",children:[p.jsx("td",{children:p.jsx("button",{onClick:()=>g(L),className:"p-1 text-gray-400 hover:text-white",children:p.jsx(Ks,{size:18})})}),p.jsx("td",{className:"font-bold",children:L.name}),p.jsx("td",{className:`font-semibold ${L.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:L.type}),p.jsx("td",{children:L.cost}),p.jsx("td",{className:"text-xs text-gray-400",children:L.description}),p.jsx("td",{children:p.jsx("div",{className:"flex flex-wrap gap-2",children:L.keywords.map(be=>p.jsx("span",{className:"ability-chip",children:be},be))})}),p.jsx("td",{className:"text-xs",children:L.targetingText==="N/A"?p.jsx("span",{className:"text-gray-500",children:"N/A"}):L.targetingText}),p.jsx("td",{children:p.jsx("div",{className:"quantity-buttons",children:Array.from({length:pe+1}).map((be,$e)=>{const pn=$e===de,Dt=pe-(ce-de),vt=$e>Dt;return p.jsx("button",{onClick:()=>r(L.id,$e),className:`quantity-btn ${pn?"selected":""}`,disabled:vt,children:$e},$e)})})})]},`${L.id}-${oe}`)})})]})}),Se==="grid"&&p.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:aa.map((L,oe)=>{const de=n[L.id]||0,ce=Gt[L.baseCardId]||0,pe=L.maxInDeck,$e=pe-(ce-de)<=de;return p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx($a,{card:L,onClick:()=>g(L),isPlayable:!0,isSelected:!1,isMandatoryTarget:!1,scale:1}),p.jsxs("div",{className:"flex items-center gap-2 bg-slate-800/70 px-3 py-1 rounded-lg border border-gray-600",children:[p.jsx("button",{onClick:()=>de>0&&r(L.id,de-1),className:`text-lg font-bold px-2 rounded transition-all ${de===0?"opacity-50 cursor-not-allowed text-gray-500":"text-cyan-400 hover:text-cyan-300 hover:bg-slate-700"}`,children:"-"}),p.jsxs("span",{className:"font-bold text-base min-w-[50px] text-center",children:[de,"/",pe]}),p.jsx("button",{onClick:()=>!$e&&r(L.id,de+1),className:`text-lg font-bold px-2 rounded transition-all ${$e?"opacity-50 cursor-not-allowed text-gray-500":"text-cyan-400 hover:text-cyan-300 hover:bg-slate-700"}`,children:"+"})]})]},`${L.id}-${oe}`)})})})]}),N==="drones"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:p.jsxs("div",{className:"relative",ref:Z,children:[p.jsx("button",{onClick:()=>W(!z),className:"filter-select w-full text-left h-full",children:G.abilities.length===0?"Select Abilities":`${G.abilities.length} Abilities Selected`}),z&&p.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:ye.abilities.map(L=>p.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:G.abilities.includes(L),onChange:()=>Eo(L),className:"mr-2"}),L]},L))})]})}),Oe==="table"&&p.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:p.jsxs("table",{className:"w-full text-left deck-builder-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Info"}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>_e("name"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",le.key==="name"&&(le.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>_e("class"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="class"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",le.key==="class"&&(le.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>_e("attack"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="attack"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Attack",le.key==="attack"&&(le.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>_e("speed"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="speed"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Speed",le.key==="speed"&&(le.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>_e("shields"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="shields"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Shields",le.key==="shields"&&(le.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>_e("hull"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="hull"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Hull",le.key==="hull"&&(le.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:"Abilities"}),p.jsx("th",{children:"Description"}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>_e("limit"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="limit"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Limit",le.key==="limit"&&(le.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:p.jsxs("button",{onClick:()=>_e("upgradeSlots"),className:`w-full text-left transition-colors underline cursor-pointer ${le.key==="upgradeSlots"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Upgrades",le.key==="upgradeSlots"&&(le.direction==="ascending"?" ":" ")]})}),p.jsx("th",{children:"Quantity"})]})}),p.jsx("tbody",{children:fn.map((L,oe)=>{const de=e&&e[L.name]||0;return p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("button",{onClick:()=>b(L),className:"p-1 text-gray-400 hover:text-white",children:p.jsx(Ks,{size:18})})}),p.jsx("td",{className:"font-bold",children:L.name}),p.jsx("td",{children:L.class}),p.jsx("td",{children:L.attack}),p.jsx("td",{children:L.speed}),p.jsx("td",{children:L.shields}),p.jsx("td",{children:L.hull}),p.jsx("td",{children:p.jsx("div",{className:"flex flex-wrap gap-2",children:L.keywords.map(ce=>p.jsx("span",{className:"ability-chip",children:ce},ce))})}),p.jsx("td",{className:"text-xs text-gray-400",children:L.description}),p.jsx("td",{children:L.limit}),p.jsx("td",{children:L.upgradeSlots}),p.jsx("td",{children:p.jsxs("div",{className:"quantity-buttons",children:[p.jsx("button",{onClick:()=>i(L.name,0),className:`quantity-btn ${de===0?"selected":""}`,children:"0"}),p.jsx("button",{onClick:()=>i(L.name,1),className:`quantity-btn ${de===1?"selected":""}`,children:"1"})]})})]},`${L.name}-${oe}`)})})]})}),Oe==="grid"&&p.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:fn.map((L,oe)=>{const de=e&&e[L.name]||0,ce=1,pe=de>=ce;return p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx(vi,{drone:L,onClick:()=>b(L),isSelectable:!1,isSelected:!1,deployedCount:0,ignoreDeployLimit:!0,appliedUpgrades:[],scale:1,isViewOnly:!0}),p.jsxs("div",{className:"flex items-center gap-2 bg-slate-800/70 px-3 py-1 rounded-lg border border-gray-600",children:[p.jsx("button",{onClick:()=>de>0&&i(L.name,de-1),className:`text-lg font-bold px-2 rounded transition-all ${de===0?"opacity-50 cursor-not-allowed text-gray-500":"text-cyan-400 hover:text-cyan-300 hover:bg-slate-700"}`,children:"-"}),p.jsxs("span",{className:"font-bold text-base min-w-[50px] text-center",children:[de,"/",ce]}),p.jsx("button",{onClick:()=>!pe&&i(L.name,de+1),className:`text-lg font-bold px-2 rounded transition-all ${pe?"opacity-50 cursor-not-allowed text-gray-500":"text-cyan-400 hover:text-cyan-300 hover:bg-slate-700"}`,children:"+"})]})]},`${L.name}-${oe}`)})})})]}),N==="ship"&&p.jsx(p.Fragment,{children:p.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:p.jsxs("table",{className:"w-full text-left deck-builder-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{children:"Info"}),p.jsx("th",{children:"Type"}),p.jsx("th",{children:"Name"}),p.jsx("th",{children:"Description"}),p.jsx("th",{children:"Lane"})]})}),p.jsxs("tbody",{children:[p.jsx("tr",{className:"bg-cyan-900/20",children:p.jsx("td",{colSpan:"5",className:"font-bold text-cyan-400 text-sm py-2",children:"BRIDGE"})}),rr.filter(L=>L.type==="Bridge").map((L,oe)=>{const de=s?.[L.id]||null,ce=Object.entries(s||{}).filter(([pe,be])=>pe!==L.id&&be).map(([pe,be])=>be);return p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("button",{onClick:()=>C(L),className:"p-1 text-gray-400 hover:text-white",children:p.jsx(Ks,{size:18})})}),p.jsx("td",{className:"font-semibold text-cyan-400",children:L.type}),p.jsx("td",{className:"font-bold",children:L.name}),p.jsx("td",{className:"text-xs text-gray-400",children:L.description}),p.jsx("td",{children:p.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(pe=>p.jsx("button",{onClick:()=>l(L.id,de===pe?null:pe),disabled:ce.includes(pe)&&de!==pe,className:`px-3 py-1 rounded text-xs font-bold transition-all ${de===pe?"bg-cyan-500 text-white":ce.includes(pe)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-cyan-600 hover:text-white"}`,children:pe.toUpperCase()},pe))})})]},`${L.id}-${oe}`)}),p.jsx("tr",{className:"bg-purple-900/20",children:p.jsx("td",{colSpan:"5",className:"font-bold text-purple-400 text-sm py-2",children:"POWER CELL"})}),rr.filter(L=>L.type==="Power Cell").map((L,oe)=>{const de=s?.[L.id]||null,ce=Object.entries(s||{}).filter(([pe,be])=>pe!==L.id&&be).map(([pe,be])=>be);return p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("button",{onClick:()=>C(L),className:"p-1 text-gray-400 hover:text-white",children:p.jsx(Ks,{size:18})})}),p.jsx("td",{className:"font-semibold text-purple-400",children:L.type}),p.jsx("td",{className:"font-bold",children:L.name}),p.jsx("td",{className:"text-xs text-gray-400",children:L.description}),p.jsx("td",{children:p.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(pe=>p.jsx("button",{onClick:()=>l(L.id,de===pe?null:pe),disabled:ce.includes(pe)&&de!==pe,className:`px-3 py-1 rounded text-xs font-bold transition-all ${de===pe?"bg-purple-500 text-white":ce.includes(pe)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-purple-600 hover:text-white"}`,children:pe.toUpperCase()},pe))})})]},`${L.id}-${oe}`)}),p.jsx("tr",{className:"bg-pink-900/20",children:p.jsx("td",{colSpan:"5",className:"font-bold text-pink-400 text-sm py-2",children:"DRONE CONTROL HUB"})}),rr.filter(L=>L.type==="Drone Control Hub").map((L,oe)=>{const de=s?.[L.id]||null,ce=Object.entries(s||{}).filter(([pe,be])=>pe!==L.id&&be).map(([pe,be])=>be);return p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("button",{onClick:()=>C(L),className:"p-1 text-gray-400 hover:text-white",children:p.jsx(Ks,{size:18})})}),p.jsx("td",{className:"font-semibold text-pink-400",children:L.type}),p.jsx("td",{className:"font-bold",children:L.name}),p.jsx("td",{className:"text-xs text-gray-400",children:L.description}),p.jsx("td",{children:p.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(pe=>p.jsx("button",{onClick:()=>l(L.id,de===pe?null:pe),disabled:ce.includes(pe)&&de!==pe,className:`px-3 py-1 rounded text-xs font-bold transition-all ${de===pe?"bg-pink-500 text-white":ce.includes(pe)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-pink-600 hover:text-white"}`,children:pe.toUpperCase()},pe))})})]},`${L.id}-${oe}`)})]})]})})})]}),p.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700 h-[calc(100vh-99px)] mr-[10px]",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("div",{className:"flex gap-2 flex-wrap",children:[p.jsxs("button",{onClick:()=>F("deck"),className:`btn-utility ${B==="deck"?"opacity-100":"opacity-60"}`,children:["Deck (",Pt,"/40)"]}),p.jsxs("button",{onClick:()=>F("drones"),className:`btn-utility ${B==="drones"?"opacity-100":"opacity-60"}`,children:["Drones (",Tt,"/10)"]}),p.jsxs("button",{onClick:()=>F("ship"),className:`btn-utility ${B==="ship"?"opacity-100":"opacity-60"}`,children:["Ship (",zn,"/3)"]})]}),p.jsx("button",{onClick:B==="deck"?Wn:B==="drones"?jr:()=>l(null,null),className:"btn-reset",children:"Reset"})]}),B==="deck"&&p.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:qe.length>0?qe.map(L=>{const oe=Gt[L.baseCardId]>=L.maxInDeck;return p.jsxs("div",{className:"deck-list-item",children:[p.jsx("button",{onClick:()=>g(L),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:p.jsx(Ks,{size:18})}),p.jsx("span",{className:"flex-grow truncate",title:L.name,children:L.name}),p.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[p.jsx("button",{onClick:()=>r(L.id,L.quantity-1),className:"deck-edit-btn",children:"-"}),p.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",L.quantity]}),p.jsx("button",{onClick:()=>r(L.id,L.quantity+1),disabled:oe,className:"deck-edit-btn",children:"+"})]})]},L.id)}):p.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),B==="drones"&&p.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:_r.length>0?_r.map(L=>p.jsxs("div",{className:"deck-list-item",children:[p.jsx("button",{onClick:()=>b(L),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Drone Details",children:p.jsx(Ks,{size:18})}),p.jsx("span",{className:"flex-grow truncate",title:L.name,children:L.name}),p.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[p.jsx("button",{onClick:()=>i(L.name,0),className:"deck-edit-btn",children:"-"}),p.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",L.quantity]}),p.jsx("button",{onClick:()=>i(L.name,1),disabled:Tt>=10,className:"deck-edit-btn",children:"+"})]})]},L.name)):p.jsx("p",{className:"text-gray-500 italic",children:"Your drone pool is empty. Add drones from the left."})}),B==="ship"&&p.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("div",{className:"grid grid-cols-3 gap-4",children:["l","m","r"].map((L,oe)=>{const de=Object.entries(s||{}).find(([pe,be])=>be===L),ce=de?rr.find(pe=>pe.id===de[0]):null;return p.jsxs("div",{className:`p-4 rounded-lg border-2 ${ce?"border-cyan-500 bg-cyan-900/10":"border-dashed border-gray-600 bg-gray-800/30"}`,children:[p.jsx("div",{className:"text-center mb-2",children:p.jsx("span",{className:"font-bold text-sm text-cyan-400",children:oe===1?"MIDDLE (Bonus)":oe===0?"LEFT":"RIGHT"})}),ce?p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-xs text-gray-400 mb-1",children:ce.type}),p.jsx("div",{className:"font-bold text-white mb-2",children:ce.name}),p.jsx("div",{className:"text-xs text-gray-500 mb-2",children:ce.description}),oe===1&&p.jsx("div",{className:"text-xs text-cyan-300 font-semibold",children:"+ Bonus Stats"})]}):p.jsx("div",{className:"text-center text-gray-500 italic text-xs py-4",children:"No component"})]},L)})}),zn>0&&p.jsxs("div",{className:"mt-4",children:[p.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Selected Components"}),p.jsx("div",{className:"deck-list",children:Object.entries(s||{}).filter(([L,oe])=>oe).map(([L,oe])=>{const de=rr.find(ce=>ce.id===L);return de?p.jsxs("div",{className:"deck-list-item",children:[p.jsxs("span",{className:"flex-grow truncate",title:de.name,children:[de.name," (",de.type,")"]}),p.jsxs("span",{className:"font-bold text-cyan-400",children:["Lane: ",oe.toUpperCase()]})]},L):null})})]}),zn===0&&p.jsx("p",{className:"text-gray-500 italic text-center py-8",children:"No ship components selected. Select components from the left."})]})}),B==="deck"&&Pt>0&&p.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[p.jsxs("button",{onClick:()=>ve(!te),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",p.jsx(cu,{size:20,className:`transition-transform duration-300 ${te?"rotate-0":"rotate-180"}`})]}),p.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${te?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[p.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[p.jsx("button",{onClick:()=>V("cost"),className:`btn-info text-xs ${q==="cost"?"opacity-100":"opacity-60"}`,children:"Cost"}),p.jsx("button",{onClick:()=>V("type"),className:`btn-info text-xs ${q==="type"?"opacity-100":"opacity-60"}`,children:"Type"}),p.jsx("button",{onClick:()=>V("ability"),className:`btn-info text-xs ${q==="ability"?"opacity-100":"opacity-60"}`,children:"Abilities"})]}),p.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[q==="cost"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(es,{data:Di.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[p.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),p.jsx(Na,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),p.jsx(ja,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),p.jsx(ma,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),p.jsx(ci,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),q==="type"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(i0,{margin:{top:20,right:30,bottom:20,left:30},children:[p.jsx(Lf,{data:[{name:"Action Cards",value:qe.filter(L=>L.type==="Action").reduce((L,oe)=>L+oe.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:qe.filter(L=>L.type==="Upgrade").reduce((L,oe)=>L+oe.quantity,0),color:"#c084fc"}].filter(L=>L.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:L,value:oe,percent:de})=>`${L}: ${oe} (${(de*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:qe.filter(L=>L.type==="Action").reduce((L,oe)=>L+oe.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:qe.filter(L=>L.type==="Upgrade").reduce((L,oe)=>L+oe.quantity,0),color:"#c084fc"}].filter(L=>L.value>0).map((L,oe)=>p.jsx(oo,{fill:L.color},`cell-${oe}`))}),p.jsx(ma,{}),p.jsx(Gp,{})]})})]}),q==="ability"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(i0,{margin:{top:20,right:30,bottom:20,left:30},children:[p.jsx(Lf,{data:Di.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:wo,outerRadius:60,dataKey:"value",children:Di.pieChartData.map((L,oe)=>p.jsx(oo,{fill:Ca[oe%Ca.length]},`cell-${oe}`))}),p.jsx(ma,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),B==="drones"&&Tt>0&&p.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[p.jsxs("button",{onClick:()=>ve(!te),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Drone Statistics",p.jsx(cu,{size:20,className:`transition-transform duration-300 ${te?"rotate-0":"rotate-180"}`})]}),p.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${te?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[p.jsxs("div",{className:"flex justify-center gap-2 mb-2 flex-wrap",children:[p.jsx("button",{onClick:()=>V("cost"),className:`btn-info text-xs ${q==="cost"?"opacity-100":"opacity-60"}`,children:"Cost"}),p.jsx("button",{onClick:()=>V("attack"),className:`btn-info text-xs ${q==="attack"?"opacity-100":"opacity-60"}`,children:"Attack"}),p.jsx("button",{onClick:()=>V("speed"),className:`btn-info text-xs ${q==="speed"?"opacity-100":"opacity-60"}`,children:"Speed"}),p.jsx("button",{onClick:()=>V("shields"),className:`btn-info text-xs ${q==="shields"?"opacity-100":"opacity-60"}`,children:"Shields"}),p.jsx("button",{onClick:()=>V("hull"),className:`btn-info text-xs ${q==="hull"?"opacity-100":"opacity-60"}`,children:"Hull"}),p.jsx("button",{onClick:()=>V("limit"),className:`btn-info text-xs ${q==="limit"?"opacity-100":"opacity-60"}`,children:"Limit"}),p.jsx("button",{onClick:()=>V("upgrades"),className:`btn-info text-xs ${q==="upgrades"?"opacity-100":"opacity-60"}`,children:"Upgrades"}),p.jsx("button",{onClick:()=>V("ability"),className:`btn-info text-xs ${q==="ability"?"opacity-100":"opacity-60"}`,children:"Abilities"})]}),p.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[q==="cost"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Drone Cost Distribution"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(es,{data:Kn.costData,margin:{top:5,right:20,left:-15,bottom:0},children:[p.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),p.jsx(Na,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),p.jsx(ja,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),p.jsx(ma,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),p.jsx(ci,{dataKey:"count",fill:"#8884d8",name:"Drone Count"})]})})]}),q==="attack"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Attack Distribution"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(es,{data:Kn.attackData,margin:{top:5,right:20,left:-15,bottom:0},children:[p.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),p.jsx(Na,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),p.jsx(ja,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),p.jsx(ma,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),p.jsx(ci,{dataKey:"count",fill:"#ef4444",name:"Drone Count"})]})})]}),q==="speed"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Speed Distribution"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(es,{data:Kn.speedData,margin:{top:5,right:20,left:-15,bottom:0},children:[p.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),p.jsx(Na,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),p.jsx(ja,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),p.jsx(ma,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),p.jsx(ci,{dataKey:"count",fill:"#3b82f6",name:"Drone Count"})]})})]}),q==="shields"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Shield Distribution"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(es,{data:Kn.shieldsData,margin:{top:5,right:20,left:-15,bottom:0},children:[p.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),p.jsx(Na,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),p.jsx(ja,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),p.jsx(ma,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),p.jsx(ci,{dataKey:"count",fill:"#06b6d4",name:"Drone Count"})]})})]}),q==="hull"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Hull Distribution"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(es,{data:Kn.hullData,margin:{top:5,right:20,left:-15,bottom:0},children:[p.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),p.jsx(Na,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),p.jsx(ja,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),p.jsx(ma,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),p.jsx(ci,{dataKey:"count",fill:"#22c55e",name:"Drone Count"})]})})]}),q==="limit"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Deployment Limit Distribution"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(es,{data:Kn.limitData,margin:{top:5,right:20,left:-15,bottom:0},children:[p.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),p.jsx(Na,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),p.jsx(ja,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),p.jsx(ma,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),p.jsx(ci,{dataKey:"count",fill:"#f59e0b",name:"Drone Count"})]})})]}),q==="upgrades"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Upgrade Slots Distribution"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(es,{data:Kn.upgradesData,margin:{top:5,right:20,left:-15,bottom:0},children:[p.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),p.jsx(Na,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),p.jsx(ja,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),p.jsx(ma,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),p.jsx(ci,{dataKey:"count",fill:"#a855f7",name:"Drone Count"})]})})]}),q==="ability"&&p.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[p.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),p.jsx(ga,{width:"100%",height:"100%",children:p.jsxs(i0,{margin:{top:20,right:30,bottom:20,left:30},children:[p.jsx(Lf,{data:Kn.abilityData,cx:"50%",cy:"50%",labelLine:!1,label:({name:L,value:oe,percent:de})=>`${L}: ${oe} (${(de*100).toFixed(0)}%)`,outerRadius:60,dataKey:"value",children:Kn.abilityData.map((L,oe)=>p.jsx(oo,{fill:Ca[oe%Ca.length]},`cell-${oe}`))}),p.jsx(ma,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),p.jsx("button",{onClick:u,disabled:!qt||!Nr||!ra,className:"btn-confirm w-full p-4 mt-4 text-lg font-bold font-orbitron",title:ra?"":"You must select all 3 ship components with lanes assigned",children:"Confirm Deck, Drones & Ship"})]})]})]})};function yF(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getOpponentPlayerState:s,addLogEntry:l}=Ai(),{turnPhase:u}=e,f=i();s();const[d,m]=A.useState(!1),[g,y]=A.useState({}),[b,S]=A.useState({}),[C,E]=A.useState({}),w=async R=>{if(u==="deckSelection")if(R==="standard"){const z=t(),W=Le.buildDeckFromList(ml),Z=[...fP];if(Z.length!==10){console.error(` Standard drone list has ${Z.length} drones, expected 10`),l({player:"SYSTEM",actionType:"ERROR",source:"Deck Validation",target:"N/A",outcome:`Invalid standard drone list: ${Z.length} drones instead of 10.`},"handleDeckChoice");return}const I={phase:"deckSelection",playerId:z,actionData:{deck:W,drones:Z,shipComponents:{BRIDGE_001:"l",POWERCELL_001:"m",DRONECONTROL_001:"r"}}};if(e.gameMode==="guest"){Yn.sendActionToHost("commitment",I);return}const G=await Ge.actionProcessor.processCommitment(I);if(!G.success){console.error(" Deck selection submission failed:",G.error);return}l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else R==="custom"&&m(!0)},T=(R,z)=>{y(W=>({...W,[R]:z}))},D=(R,z)=>{S(W=>({...W,[R]:z}))},O=(R,z)=>{if(R===null&&z===null){E({});return}E(W=>({...W,[R]:z}))},j=async()=>{const R=[];let z=0;Object.entries(g).forEach(([ie,le])=>{for(let $=0;$<le;$++){const q=Nn.find(V=>V.id===ie);q&&R.push(Le.createCard(q,`card-${Date.now()}-${z++}`))}});const W=R.sort(()=>.5-Math.random());K("DECK_SELECTION",` Custom deck shuffled: ${W.length} cards`,{sampleCard:W[0],sampleInstanceId:W[0]?.instanceId,hasInstanceId:W[0]?.instanceId!==void 0});const Z=[];Object.entries(b).forEach(([ie,le])=>{le>0&&Z.push(ie)}),K("DECK_SELECTION",` Custom deck includes ${Z.length} drones:`,Z.join(", "));const I={phase:"deckSelection",playerId:t(),actionData:{deck:W,drones:Z,shipComponents:C}};if(e.gameMode==="guest"){Yn.sendActionToHost("commitment",I),m(!1);return}const G=await Ge.actionProcessor.processCommitment(I);if(!G.success){console.error(" Custom deck submission failed:",G.error);return}l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected a Custom Deck."},"handleConfirmDeck"),m(!1)},N=R=>{try{const z={},W={},Z={},Q=R.split("|");for(const I of Q){const[G,...ie]=I.split(":"),le=ie.join(":");if(G==="cards"){const $=le.split(",");for(const q of $){const[V,te]=q.split(":"),ve=parseInt(te,10);if(!V||isNaN(ve))return{success:!1,message:"Invalid card format in deck code."};if(!Nn.find(Ee=>Ee.id===V))return{success:!1,message:`Card ${V} not found.`};z[V]=ve}}else if(G==="drones"){const $=le.split(",");for(const q of $){const V=q.split(":"),te=V.pop(),ve=V.join(":"),Se=parseInt(te,10);if(!ve||isNaN(Se))return{success:!1,message:"Invalid drone format in deck code."};W[ve]=Se}}else if(G==="ship"){const $=le.split(",");for(const q of $){const[V,te]=q.split(":");if(!V||!te||!["l","m","r"].includes(te))return{success:!1,message:"Invalid ship component format in deck code."};Z[V]=te}}}return y(z),S(W),E(Z),{success:!0}}catch(z){return console.error("Error importing deck:",z),{success:!1,message:"Failed to parse deck code."}}};A.useEffect(()=>{e.gameMode==="guest"&&Ge.emit("render_complete")},[e,Ge]);const k=t(),B=n(),F=e.commitments?.deckSelection?.[k]?.completed||!1,M=e.commitments?.deckSelection?.[B]?.completed||!1;return K("DECK_SELECTION"," [DECK SELECTION] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),fullCommitmentsObject:e.commitments?.deckSelection,localPlayerDeckLength:f.deck?.length,willShowWaiting:r()&&F&&!M}),r()&&F&&!M?p.jsx(wv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):d?p.jsx(ej,{selectedDrones:b,fullCardCollection:Nn,deck:g,onDeckChange:T,onDronesChange:D,selectedShipComponents:C,onShipComponentsChange:O,onConfirmDeck:j,onImportDeck:N}):p.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[p.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),p.jsxs("div",{className:"flex flex-col items-center justify-center h-full relative z-10",children:[p.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),p.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),p.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[p.jsxs("div",{onClick:()=>w("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[p.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),p.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),p.jsx("button",{className:"btn-confirm mt-6",children:"Select"})]}),p.jsxs("div",{onClick:()=>w("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[p.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),p.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),p.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}function vF(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getLocalPlacedSections:s}=Ai(),{turnPhase:l,unplacedSections:u}=e,f=i(),d=s(),[m,g]=A.useState(null),b=(()=>{const M=f.selectedShipComponents;if(!M||Object.keys(M).length===0)return{placed:d||[null,null,null],unplaced:u||["bridge","powerCell","droneControlHub"]};const R=[null,null,null],z=[],W={l:0,m:1,r:2};return Object.entries(M).forEach(([Q,I])=>{if(I){const G=rr.find(ie=>ie.id===Q);if(G&&G.key){const ie=W[I];R[ie]=G.key}}}),["bridge","powerCell","droneControlHub"].forEach(Q=>{R.includes(Q)||z.push(Q)}),{placed:R,unplaced:z}})(),[S,C]=A.useState(b.placed),[E,w]=A.useState(b.unplaced),T=M=>{if(l==="placement")if(K("PLACEMENT"," handleSelectSectionForPlacement called with:",M,"gameMode:",e.gameMode),E.includes(M))g(R=>R===M?null:M);else{const R=S.indexOf(M),z=[...S];z[R]=null,C(z),w(W=>[...W,M]),g(null)}},D=M=>{if(l==="placement")if(K("PLACEMENT"," handleLaneSelectForPlacement called with lane:",M,"gameMode:",e.gameMode),m){if(S[M]){const R=S[M],z=[...S];z[M]=m;const W=E.indexOf(m),Z=[...E];Z.splice(W,1,R),C(z),w(Z)}else{const R=[...S];R[M]=m,C(R),w(z=>z.filter(W=>W!==m))}g(null)}else S[M]&&T(S[M])},O=async()=>{if(l!=="placement")return;if(S.some(z=>z==null)){console.warn(" Cannot confirm placement: All ship sections must be placed");return}const R={phase:"placement",playerId:t(),actionData:{placedSections:S}};if(e.gameMode==="guest"){Yn.sendActionToHost("commitment",R);return}try{const z=await Ge.actionProcessor.processCommitment(R);if(!z.success){console.error(" Placement submission failed:",z.error);return}K("PLACEMENT"," Placement submitted to PhaseManager")}catch(z){console.error(" Error submitting placement:",z)}};A.useEffect(()=>{e.gameMode==="guest"&&Ge.emit("render_complete")},[e,Ge]);const j=t(),N=n(),k=e.commitments?.placement?.[j]?.completed||!1,B=e.commitments?.placement?.[N]?.completed||!1;if(K("PLACEMENT"," [SHIP PLACEMENT] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),fullCommitmentsObject:e.commitments?.placement,willShowWaiting:r()&&k&&!B}),r()&&k&&!B){const M=S.map((R,z)=>R?R.name:"Empty").join(", ");return p.jsx(wv,{phase:"placement",localPlayerStatus:`Your ship layout: ${M}`})}const F=S.every(M=>M!==null);return p.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[p.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),p.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[p.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),p.jsxs("p",{className:"text-center text-gray-400 mb-8",children:[E.length>0?"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again.":"Your ship components are pre-configured. You can rearrange them by clicking a section to pick it up."," ","The ship section placed in the centre lane will gain a bonus to its stats."]}),F&&p.jsx("button",{onClick:()=>{O()},className:"btn-confirm text-lg mb-6",children:"Confirm Layout"}),p.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[p.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(M=>{const R=S[M],z=m&&!S[M];return p.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>D(M),children:R?p.jsx(lo,{section:R,stats:f.shipSections[R],effectiveStatsForDisplay:f.shipSections[R].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:M===1,gameEngine:Le,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:f,shipAbilityMode:null}):p.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${z?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:p.jsx("span",{className:"text-center font-bold",children:M===1?"Lane 2 (Center Bonus)":`Lane ${M+1}`})})},M)})}),E.length>0&&p.jsx("div",{className:"w-full text-center mt-6 mb-2",children:p.jsx("h3",{className:"text-lg font-orbitron text-gray-400",children:"Available Sections"})}),p.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(M=>p.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:E.includes(M)&&p.jsx("div",{onClick:()=>T(M),className:`h-full transition-all duration-300 rounded-xl ${m===M?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:p.jsx(lo,{section:M,stats:f.shipSections[M],effectiveStatsForDisplay:f.shipSections[M].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:Le,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:f,shipAbilityMode:null})})},M))})]})]})]})}const ar=(e=null)=>({...e?yt.find(n=>n.name===e):yt[0],id:`mock-${Date.now()}-${Math.random()}`,isExhausted:!1,temporaryMods:[],permanentMods:[]}),mu=(e=3)=>yt.slice(0,e).map((t,n)=>({...t,id:`mock-drone-${n}`,isExhausted:n%2===0,temporaryMods:[],permanentMods:[]})),iu=(e=null)=>({...e?Nn.find(n=>n.name===e):Nn[0],instanceId:`mock-card-${Date.now()}-${Math.random()}`}),ya=(e=5)=>Nn.slice(0,e).map((t,n)=>({...t,instanceId:`mock-card-${n}`})),Kr=(e="bridge")=>{const t={bridge:{name:"bridge",health:15,maxHealth:20,shields:2},powerCell:{name:"powerCell",health:12,maxHealth:15,shields:1},droneControlHub:{name:"droneControlHub",health:18,maxHealth:20,shields:3}};return t[e]||t.bridge},bF=()=>({gameMode:"local",turnPhase:"action",currentPlayer:"player1",turn:3,roundNumber:3,player1:{name:"Player 1",energy:10,hand:ya(5),deck:ya(20),discardPile:ya(5),dronesOnBoard:{lane1:[ar("Scout Drone")],lane2:[ar("Standard Fighter"),ar("Heavy Fighter")],lane3:[]},shipSections:{bridge:Kr("bridge"),powerCell:Kr("powerCell"),droneControlHub:Kr("droneControlHub")},activeDronePool:mu(5),deployedDroneCounts:{},droneUpgrades:{}},player2:{name:"AI Opponent",energy:8,hand:ya(4),deck:ya(15),discardPile:ya(3),dronesOnBoard:{lane1:[ar("Interceptor")],lane2:[ar("Guardian Drone")],lane3:[ar("Bomber")]},shipSections:{bridge:Kr("bridge"),powerCell:Kr("powerCell"),droneControlHub:Kr("droneControlHub")},activeDronePool:mu(5),deployedDroneCounts:{},droneUpgrades:{}},placedSections:[Kr("bridge"),Kr("powerCell"),Kr("droneControlHub")],opponentPlacedSections:[Kr("bridge"),Kr("powerCell"),Kr("droneControlHub")],passInfo:{player1Passed:!1,player2Passed:!1,firstPasser:null},gameLog:[]}),xF={all:{name:"All",count:23},confirmation:{name:"Confirmation",count:5},interception:{name:"Interception",count:2},gamePhase:{name:"Game Phase",count:3},aiDebug:{name:"AI Debug",count:3},playerActions:{name:"Player Actions",count:3},upgrades:{name:"Upgrades",count:3},utility:{name:"Utility",count:3},debug:{name:"Debug",count:2}},Z2=e=>{const t=bF(),n=ar();return iu(),{DeploymentConfirmationModal:{category:"confirmation",props:{show:!0,deploymentConfirmation:{budgetCost:3,energyCost:2},onConfirm:()=>console.log("Deployment confirmed"),onCancel:()=>console.log("Deployment cancelled")}},CardConfirmationModal:{category:"confirmation",props:{show:!0,cardConfirmation:{card:iu("Laser Blast"),target:n},onConfirm:()=>console.log("Card play confirmed"),onCancel:()=>console.log("Card play cancelled")}},DroneAbilityConfirmationModal:{category:"confirmation",props:{show:!0,abilityConfirmation:{drone:ar("Repair Drone"),ability:{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",cost:{energy:1}},target:{id:"lane2"}},onConfirm:()=>console.log("Ability confirmed"),onCancel:()=>console.log("Ability cancelled")}},ShipAbilityConfirmationModal:{category:"confirmation",props:{show:!0,shipAbilityConfirmation:{sectionName:"bridge",ability:{name:"Emergency Protocols",description:"Draw 2 cards",type:"ACTIVE",cost:{energy:2}},target:null},onConfirm:()=>console.log("Ship ability confirmed"),onCancel:()=>console.log("Ship ability cancelled")}},MoveConfirmationModal:{category:"confirmation",props:{show:!0,moveConfirmation:{drone:n,from:"lane1",to:"lane2"},onConfirm:()=>console.log("Move confirmed"),onCancel:()=>console.log("Move cancelled")}},InterceptionOpportunityModal:{category:"interception",props:{show:!0,choiceData:{attackDetails:{attacker:ar("Standard Fighter"),target:ar("Scout Drone"),targetType:"drone",lane:"lane2"},interceptors:mu(3)},onIntercept:i=>console.log("Intercept with:",i.name),onDecline:()=>console.log("Declined interception"),gameEngine:Le,turnPhase:"action",isMyTurn:!0,passInfo:{player1Passed:!1,player2Passed:!1},getLocalPlayerId:()=>"player1",localPlayerState:t.player1,shipAbilityMode:null,droneRefs:{current:{}},mandatoryAction:null}},OpponentDecidingInterceptionModal:{category:"interception",props:{show:!0,attacker:n,target:ar("Heavy Fighter")}},WinnerModal:{category:"gamePhase",props:{show:!0,winner:"player1",localPlayerId:"player1",onClose:()=>console.log("View board")}},WaitingForPlayerModal:{category:"gamePhase",props:{show:!0,message:"Waiting for opponent to complete placement...",phase:"placement"}},GamePhaseModal:{category:"gamePhase",props:{title:"Deployment Phase",text:"Deploy drones to lanes using your deployment budget",onClose:()=>console.log("Modal closed"),children:null}},AICardPlayReportModal:{category:"aiDebug",props:{show:!0,card:iu("Energy Surge"),result:{success:!0,energyGained:2},onClose:()=>console.log("Modal closed")}},AIDecisionLogModal:{category:"aiDebug",props:{show:!0,aiDecisionContext:{phase:"action",decision:"attack",reasoning:"Target has low health and no shields",alternatives:["pass","ability","card"],scores:{attack:85,ability:60,card:45,pass:20}},onClose:()=>console.log("Modal closed")}},AIHandDebugModal:{category:"aiDebug",props:{show:!0,aiHand:ya(5),onClose:()=>console.log("Modal closed")}},MandatoryActionModal:{category:"playerActions",props:{show:!0,mandatoryAction:{type:"discard",count:2},effectiveStats:{handLimit:5,cpuLimit:8},onClose:()=>console.log("Modal closed")}},ConfirmationModal:{category:"playerActions",props:{show:!0,title:"Confirm Action",message:"Are you sure you want to pass this phase?",onConfirm:()=>console.log("Confirmed"),onCancel:()=>console.log("Cancelled")}},OpponentDronesModal:{category:"playerActions",props:{show:!0,drones:mu(5),lane:"lane2",onClose:()=>console.log("Modal closed")}},ViewUpgradesModal:{category:"upgrades",props:{modalData:{droneName:"Scout Drone",upgrades:[{instanceId:"CARD020",name:"Slimline Bodywork",description:"+1 to Deployment Limit",stat:"limit",value:1},{instanceId:"CARD021",name:"Overclocked Thrusters",description:"+1 Speed",stat:"speed",value:1}]},onClose:()=>console.log("Modal closed")}},UpgradeSelectionModal:{category:"upgrades",props:{selectionData:{card:iu("Combat Enhancement"),targets:mu(5)},onConfirm:(i,s)=>console.log("Selected drone:",s.name),onCancel:()=>console.log("Cancelled")}},DestroyUpgradeModal:{category:"upgrades",props:{selectionData:{card:iu("System Sabotage"),targets:[ar("Scout Drone"),ar("Heavy Fighter")],opponentState:{appliedUpgrades:{"Scout Drone":[{instanceId:"upgrade-1",name:"Slimline Bodywork",stat:"limit",value:1}],"Heavy Fighter":[{instanceId:"upgrade-2",name:"Combat Enhancement",stat:"attack",value:1},{instanceId:"upgrade-3",name:"Shield Amplifier",stat:"shields",value:1}]}}},onConfirm:(i,s)=>console.log("Destroying upgrade:",s),onCancel:()=>console.log("Cancelled")}},CardSelectionModal:{category:"utility",props:{isOpen:!0,selectionData:{searchedCards:ya(8),drawCount:2,type:"search_and_draw",filter:{type:"upgrade"}},onConfirm:i=>console.log("Selected:",i),onClose:()=>console.log("Cancelled")}},CardViewerModal:{category:"utility",props:{isOpen:!0,cards:ya(5),title:"Your Deck",shouldSort:!0,onClose:()=>console.log("Modal closed")}},ViewDeckModal:{category:"utility",props:{show:!0,deck:ya(20),discardPile:ya(5),onClose:()=>console.log("Modal closed")}},GameDebugModal:{category:"debug",props:{show:!0,gameState:t,onClose:()=>console.log("Modal closed")}},DetailedDroneModal:{category:"debug",props:{show:!0,drone:ar("Heavy Fighter"),lane:"lane2",effectiveStats:{attack:4,hull:4,shields:1,speed:3,power:11},onClose:()=>console.log("Modal closed")}}}[e]||null},SF=()=>({all:["DeploymentConfirmationModal","CardConfirmationModal","DroneAbilityConfirmationModal","ShipAbilityConfirmationModal","MoveConfirmationModal","InterceptionOpportunityModal","OpponentDecidingInterceptionModal","WinnerModal","WaitingForPlayerModal","GamePhaseModal","AICardPlayReportModal","AIDecisionLogModal","AIHandDebugModal","MandatoryActionModal","ConfirmationModal","OpponentDronesModal","ViewUpgradesModal","UpgradeSelectionModal","DestroyUpgradeModal","CardSelectionModal","CardViewerModal","ViewDeckModal","GameDebugModal","DetailedDroneModal"],confirmation:["DeploymentConfirmationModal","CardConfirmationModal","DroneAbilityConfirmationModal","ShipAbilityConfirmationModal","MoveConfirmationModal"],interception:["InterceptionOpportunityModal","OpponentDecidingInterceptionModal"],gamePhase:["WinnerModal","WaitingForPlayerModal","GamePhaseModal"],aiDebug:["AICardPlayReportModal","AIDecisionLogModal","AIHandDebugModal"],playerActions:["MandatoryActionModal","ConfirmationModal","OpponentDronesModal"],upgrades:["ViewUpgradesModal","UpgradeSelectionModal","DestroyUpgradeModal"],utility:["CardSelectionModal","CardViewerModal","ViewDeckModal"],debug:["GameDebugModal","DetailedDroneModal"]}),tj=({winner:e,localPlayerId:t,show:n,onClose:r})=>{const i=e===t;if(!n)return null;const s=()=>{r()},l=()=>{Ge.setState({appState:"menu"})};return p.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-sm flex items-center justify-center",children:p.jsxs("div",{className:"flex flex-col items-center gap-12",children:[i?p.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"VICTORY"}):p.jsxs("div",{className:"relative w-full h-full flex items-center justify-center screen-flicker",children:[p.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center defeat-glow screen-distort z-10",style:{color:"#ff3232",textShadow:"0 0 30px rgba(255, 50, 50, 1), 0 0 60px rgba(255, 50, 50, 0.8), 0 0 90px rgba(255, 50, 50, 0.6)",filter:"drop-shadow(0 0 30px rgba(255, 50, 50, 0.6))"},children:"DEFEAT"}),p.jsx("div",{className:"absolute w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent scanline-shutdown",style:{boxShadow:"0 0 10px rgba(255, 50, 50, 0.8)"}}),p.jsx("div",{className:"absolute inset-0 bg-red-900/20 defeat-glow",style:{mixBlendMode:"multiply"}})]}),p.jsxs("div",{className:"flex gap-6 z-20",children:[p.jsx("button",{onClick:s,className:"btn-continue text-xl px-8 py-4",children:"View Board"}),p.jsx("button",{onClick:l,className:"btn-cancel text-xl px-8 py-4",children:"Exit to Menu"})]})]})})},lh=()=>{const{gameStateManager:e}=Ai(),t=A.useMemo(()=>e?on.getInstance(e):null,[e]),[n,r]=A.useState(null);A.useEffect(()=>{if(!t)return;const m=()=>{r(t.getCacheStats())};m();const g=setInterval(m,5e3);return()=>clearInterval(g)},[t]);const i=A.useCallback((m,g)=>t?t.getEffectiveStats(m,g):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},[t]),s=A.useCallback(m=>t?t.getLaneData(m):{lane:m,localDrones:[],opponentDrones:[],hasGuardian:!1},[t]),l=A.useCallback((m,g=null)=>t?t.hasGuardianInLane(m,g):!1,[t]),u=A.useCallback(()=>t?t.getPlacedSectionsForEngine():{},[t]),f=A.useCallback((m,g=[])=>t?t.getEffectiveShipStats(m,g):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},[t]),d=A.useCallback(()=>{t&&t.clearCache()},[t]);return{gameDataService:t,getEffectiveStats:i,getEffectiveShipStats:f,getLaneData:s,hasGuardianInLane:l,getPlacedSections:u,clearCache:d,cacheStats:n,isReady:!!t}},CF=({droneId:e,timestamp:t,duration:n=2e3})=>{const[r,i]=A.useState(!0);return A.useEffect(()=>{const s=setTimeout(()=>{i(!1)},n);return()=>clearTimeout(s)},[t,n]),r?p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:p.jsx("div",{className:"bg-red-600/90 rounded-lg px-4 py-2 shadow-2xl border-2 border-red-400 animate-pulse",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(PM,{className:"w-5 h-5 text-white"}),p.jsx("span",{className:"text-white font-bold text-lg tracking-wide drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]",children:"Intercepted!"})]})})}):null},eP=({value:e,isFlat:t,bgColor:n,textColor:r})=>p.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:p.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),AF=({onClick:e})=>p.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("circle",{cx:"12",cy:"12",r:"6"}),p.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),$f=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,isPotentialGuardian:u,onMouseEnter:f,onMouseLeave:d,lane:m,onAbilityClick:g,isActionTarget:y,droneRefs:b,mandatoryAction:S,localPlayerState:C,interceptedBadge:E,enableFloatAnimation:w=!1})=>{const{getEffectiveStats:T}=lh(),D=A.useMemo(()=>yt.find(Oe=>Oe.name===e.name),[e.name]),O=T(e,m),{maxShields:j}=O,N=e.currentShields??j,k=D.abilities.filter(Oe=>Oe.type==="ACTIVE"),B=n?"border-cyan-400":"border-pink-500",F=n?"bg-cyan-900":"bg-pink-950",M=n?"text-cyan-100":"text-pink-100",R=n?"bg-cyan-900":"bg-pink-950",z=n?"text-cyan-400":"text-pink-500",W=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",Z=O.attack>O.baseAttack,Q=O.attack<O.baseAttack,I=Z?"text-green-400":Q?"text-red-400":"text-white",G=O.speed>O.baseSpeed,ie=O.speed<O.baseSpeed,le=G?"text-green-400":ie?"text-red-400":"text-white",$=e.isExhausted?"grayscale opacity-60":"",q=s?"animate-shake":"",V=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",te=y?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",ve=S?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",Se=Oe=>!(e.isExhausted&&Oe.cost.exhausts!==!1||Oe.cost.energy&&C.energy<Oe.cost.energy),Ee=e.isTeleporting?"opacity-0 pointer-events-none":"";return p.jsxs("div",{ref:Oe=>b.current[e.id]=Oe,onClick:Oe=>t&&t(Oe,e,n),onMouseEnter:f,onMouseLeave:d,className:`relative transition-all duration-200 ${$} ${q} ${V} ${te} ${ve} ${Ee} ${w?"drone-float":""}`,style:{width:"clamp(85px, 4.427vw, 115px)",height:"clamp(115px, 5.99vw, 156px)"},children:[p.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${B} cursor-pointer shadow-black overflow-hidden ${u?"guardian-glow":""}`,children:[p.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),p.jsx("div",{className:"absolute inset-0 bg-black/10"}),p.jsxs("div",{className:"relative z-10 h-full",children:[p.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[p.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:j}).map((Oe,ke)=>ke<N?p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:z,children:p.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ke):p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:W,children:p.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},ke))}),p.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:D.hull}).map((Oe,ke)=>{const xe=ke<e.hull,Me=e.isExhausted?"bg-green-800":"bg-green-500";return p.jsx("div",{className:`h-2 w-2 rounded-sm ${xe?Me:"bg-gray-400"} border border-black/50`},ke)})})]}),p.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${F} flex items-center justify-center border-t ${B}`,children:p.jsx("span",{className:`font-orbitron text-[8px] uppercase ${M} tracking-wider w-full text-center`,children:e.name})})]})]}),p.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:p.jsx(eP,{value:O.attack,isFlat:!1,bgColor:R,textColor:I})}),p.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:p.jsx(eP,{value:O.speed,isFlat:!0,bgColor:R,textColor:le})}),n&&k.length>0&&Se(k[0])&&p.jsx(AF,{onClick:Oe=>g&&g(Oe,e,k[0])}),E&&E.droneId===e.id&&p.jsx(CF,{droneId:e.id,timestamp:E.timestamp})]})},nj=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:f,localPlayerState:d,shipAbilityMode:m,droneRefs:g,mandatoryAction:y})=>{if(!t||!e)return null;const{attackDetails:b,interceptors:S}=e,{attacker:C,target:E,targetType:w,lane:T}=b;return p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),p.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500 max-w-4xl w-full",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:p.jsxs("div",{className:"bg-gray-900/95 p-8",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:[p.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center mb-2",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Interception!"}),p.jsxs("p",{className:"text-center text-cyan-300/60 uppercase text-sm tracking-widest mb-8",children:["Combat in ",T?.replace("lane","Lane ")||"Unknown Lane"]}),p.jsx("div",{className:"mb-6 py-8",children:p.jsxs("div",{className:"flex items-start justify-center gap-6",children:[p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("div",{className:"text-xs uppercase tracking-widest text-pink-400/60",children:"Attacker"}),p.jsx("div",{className:"transform scale-150 origin-top",children:p.jsx($f,{drone:C,isPlayer:!1,lane:T,droneRefs:g,mandatoryAction:y,localPlayerState:d})})]}),p.jsx("div",{className:"text-5xl font-light text-cyan-500/30 px-4 pt-16",children:"VS"}),p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("div",{className:"text-xs uppercase tracking-widest text-cyan-400/60",children:"Target"}),w==="drone"?p.jsx("div",{className:"transform scale-150 origin-top",children:p.jsx($f,{drone:E,isPlayer:!0,lane:T,droneRefs:g,mandatoryAction:y,localPlayerState:d})}):p.jsx("div",{className:"transform scale-[0.95] origin-top",style:{width:"400px"},children:p.jsx(lo,{section:E.name,stats:d.shipSections[E.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:f,localPlayerState:d,shipAbilityMode:m})})]})]})}),p.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent mb-4"}),p.jsx("h3",{className:"text-center text-2xl font-bold uppercase tracking-wider mb-1",style:{background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Choose Interceptor"}),p.jsx("p",{className:"text-center text-cyan-300/50 text-sm mb-4",children:"Select a drone to intercept the attack"}),p.jsx("div",{className:"flex flex-wrap justify-center gap-12 mb-6",children:S.map(D=>p.jsx("div",{className:"cursor-pointer transition-all hover:scale-110 hover:drop-shadow-[0_0_20px_rgba(0,255,136,0.4)]",children:p.jsx($f,{drone:D,isPlayer:!0,onClick:()=>n(D),lane:T,droneRefs:g,mandatoryAction:y,localPlayerState:d})},D.id))}),p.jsx("div",{className:"flex justify-center gap-6 pt-4",children:p.jsx("button",{onClick:r,className:"btn-cancel",children:"Decline"})}),p.jsx("div",{className:"h-px w-80 mx-auto mt-8 bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})]})},rj=({show:e,opponentName:t="Opponent"})=>e?p.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:p.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Opponent Deciding Interception"})}):null,aj=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[p.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),p.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:p.jsx("div",{className:"bg-gray-900/95 p-8 text-center",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:p.jsxs("div",{className:"space-y-8",children:[p.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Deploy Drone?"}),p.jsxs("div",{className:"flex items-center justify-center gap-8",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-5xl font-bold text-cyan-400 mb-2",children:i}),p.jsx("div",{className:"text-cyan-300/50 uppercase text-xs tracking-widest",children:"Deployment"})]}),p.jsx("div",{className:"text-4xl text-cyan-500/30 font-light",children:"|"}),p.jsxs("div",{children:[p.jsx("div",{className:"text-5xl font-bold text-blue-400 mb-2",children:s}),p.jsx("div",{className:"text-blue-300/50 uppercase text-xs tracking-widest",children:"Energy"})]})]}),p.jsxs("div",{className:"flex justify-center gap-6 pt-4",children:[p.jsx("button",{onClick:n,className:"w-32 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Cancel"}),p.jsx("button",{onClick:r,className:"w-32 py-3 border-2 rounded uppercase text-sm tracking-wider font-semibold transition-all hover:scale-110 hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",style:{borderColor:"#00ff88",background:"linear-gradient(45deg, rgba(0, 255, 136, 0.2), rgba(0, 136, 255, 0.2))",color:"#00ff88",boxShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"Confirm"})]}),p.jsx("div",{className:"h-px w-80 mx-auto bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})})]})},ij=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-container modal-container-md",children:[n&&p.jsx("button",{onClick:n,className:"modal-close",children:p.jsx(ln,{size:24})}),p.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),p.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),p.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[p.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),p.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},sj=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-container modal-container-md",children:[n&&p.jsx("button",{onClick:n,className:"modal-close",children:p.jsx(ln,{size:24})}),p.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),p.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),p.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[p.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),p.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},oj=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase());let f="";return l&&(f=l.name),p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-container modal-container-md",children:[n&&p.jsx("button",{onClick:n,className:"modal-close",children:p.jsx(ln,{size:24})}),p.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),p.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${f}`:"","? This will cost ",i.cost.energy," energy."]}),p.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[p.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),p.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},lj=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-container modal-container-md",children:[n&&p.jsx("button",{onClick:n,className:"modal-close",children:p.jsx(ln,{size:24})}),p.jsx("h2",{className:"modal-title",children:"Confirm Move"}),p.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),p.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[p.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),p.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},cj=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-container modal-container-md",children:[r&&p.jsx("button",{onClick:r,className:"modal-close",children:p.jsx(ln,{size:24})}),p.jsx("h2",{className:"modal-title",children:s}),p.jsx("p",{className:"modal-text",children:l})]})})},uj=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&p.jsx("button",{onClick:e.onCancel,className:"modal-close",children:p.jsx(ln,{size:24})}),p.jsx("h2",{className:"modal-title",children:n}),p.jsx("p",{className:"modal-text",children:e.text}),p.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[p.jsx("button",{onClick:e.onCancel,className:"btn-cancel",children:"Cancel"}),p.jsx("button",{onClick:e.onConfirm,className:"btn-confirm",children:"Confirm"})]})]})})},gs=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&p.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:p.jsx(ln,{size:24})}),p.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),p.jsx("p",{className:"text-center text-gray-400",children:t}),r]})}),dj=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return p.jsxs(gs,{title:"AI Action: Card Played",text:"",onClose:t,children:[p.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[p.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",p.jsx("strong",{className:"text-purple-400",children:n.name}),r&&p.jsxs(p.Fragment,{children:[" on ",p.jsx("strong",{className:"text-cyan-400",children:r}),i&&p.jsxs(p.Fragment,{children:[" in ",p.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),p.jsx("div",{className:"transform scale-75",children:p.jsx($a,{card:n,isPlayable:!1})})]}),p.jsx("div",{className:"flex justify-center mt-6",children:p.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},fj=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,f=>f.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&p.jsx("button",{onClick:n,className:"modal-close",children:p.jsx(ln,{size:24})}),p.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),p.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),p.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:p.jsxs("table",{className:"w-full text-left text-sm",children:[p.jsx("thead",{className:"sticky top-0 bg-slate-800",children:p.jsxs("tr",{children:[p.jsx("th",{className:"p-2",children:"Type"}),p.jsx("th",{className:"p-2",children:"Instigator"}),p.jsx("th",{className:"p-2",children:"Target"}),p.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),p.jsx("th",{className:"p-2",children:"Score"}),p.jsx("th",{className:"p-2",children:"Chosen"})]})}),p.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>p.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[p.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),p.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),p.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),p.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),p.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),p.jsx("td",{className:"p-2 text-center",children:s.isChosen&&p.jsx("span",{className:"text-yellow-400",children:""})})]},l))})]})}),p.jsx("div",{className:"flex justify-center mt-6",children:p.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},pj=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&p.jsx("button",{onClick:r,className:"modal-close",children:p.jsx(ln,{size:24})}),p.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),p.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),p.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>p.jsx($a,{card:i,isPlayable:!1},i.instanceId)):p.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),p.jsx("div",{className:"flex justify-center mt-6",children:p.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),hj=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=A.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(y,b)=>{navigator.clipboard.writeText(JSON.stringify(y,null,2)).then(()=>K()).catch(S=>console.error("Failed to copy:",S))},f=y=>y===null?"null":y===void 0?"undefined":typeof y=="boolean"?y.toString():typeof y=="string"?`"${y}"`:typeof y=="number"?y.toString():Array.isArray(y)?y.length===0?"[]":`[${y.length} items]`:typeof y=="object"?Object.keys(y).length===0?"{}":`{${Object.keys(y).length} properties}`:String(y),d=(y,b,S="")=>p.jsxs("div",{className:`mb-6 ${S}`,children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("h3",{className:"text-lg font-bold text-white",children:b}),p.jsxs("button",{onClick:()=>u(y),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[p.jsx(pv,{size:12}),"Copy"]})]}),p.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:p.jsxs("table",{className:"w-full text-sm",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-gray-800",children:[p.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),p.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),p.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),p.jsx("tbody",{children:Object.entries(y).map(([C,E],w)=>p.jsxs("tr",{className:w%2===0?"bg-gray-900":"bg-gray-800",children:[p.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:C}),p.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:f(E)}),p.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof E=="object"&&E!==null?Array.isArray(E)?"array":"object":typeof E})]},C))})]})})]}),m=()=>{const y={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return p.jsxs("div",{className:"p-4 space-y-6",children:[d(y,"Core Game Info"),d(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),d(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),d({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),d({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&d(l.passInfo,"Pass Information")]})},g=()=>{if(!r)return p.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const y=r.getEffectiveShipStats(l.player1,l.placedSections),b=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},C={};["lane1","lane2","lane3"].forEach(w=>{S[w]=l.player1.dronesOnBoard[w].map(T=>({drone:T.name,effectiveStats:r.getEffectiveStats(T,w)})),C[w]=l.player2.dronesOnBoard[w].map(T=>({drone:T.name,effectiveStats:r.getEffectiveStats(T,w)}))});const E=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return p.jsxs("div",{className:"p-4 space-y-6",children:[d(y,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),d(b,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),d(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),d(C,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),d(E,"GameDataService Cache Statistics")]})}catch(y){return p.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",y.message]})}};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[p.jsx("button",{onClick:t,className:"modal-close",children:p.jsx(ln,{size:24})}),p.jsx("h2",{className:"modal-title",children:"Game Debug View"}),p.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[p.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),p.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),p.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?m():g()}),p.jsx("div",{className:"flex justify-center mt-6",children:p.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},mj=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=s=>{switch(s){case"determineFirstPlayer":return"Waiting for Opponent";case"mandatoryDiscard":return"Opponent Discarding";case"optionalDiscard":return"Opponent Discarding Cards";case"allocateShields":return"Opponent Allocating Shields";case"mandatoryDroneRemoval":return"Opponent Removing Drones";case"deploymentComplete":return"Waiting for Opponent";default:return"Waiting for Opponent"}};return p.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-auto",children:p.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:i(t)})})},gj=({isOpen:e,onClose:t,drones:n=[]})=>{if(!e)return null;const r=[...n].sort((i,s)=>i.class-s.class);return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-pink-500 p-8 shadow-2xl shadow-pink-500/20 max-w-[1400px] max-h-[600px] w-[95vw] flex flex-col",onClick:i=>i.stopPropagation(),children:[p.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[p.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-pink-400",children:"Opponent's Selected Drones"}),p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:p.jsx(ln,{size:32})})]}),p.jsx("div",{className:"overflow-y-auto flex-grow pr-4",children:p.jsxs("div",{className:"mb-6",children:[p.jsxs("h3",{className:"text-xl font-orbitron text-cyan-400 mb-3",children:["Drones (",r.length,")"]}),r.length>0?p.jsx("div",{className:"w-full mx-auto",children:p.jsx("div",{className:"flex flex-nowrap gap-[10px] justify-center",children:r.map((i,s)=>p.jsx("div",{children:p.jsx(vi,{drone:i,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,appliedUpgrades:[],isViewOnly:!0})},`${i.name}-${s}`))})}):p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsx("p",{className:"text-gray-500 text-xl italic",children:"No drones selected yet"})})]})})]})})},yj=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return p.jsxs(gs,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[p.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>p.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[p.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),p.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):p.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),p.jsx("div",{className:"flex justify-center mt-6",children:p.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},vj=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=A.useState(null);return p.jsxs(gs,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[p.jsx("div",{className:"flex justify-center my-4",children:p.jsx($a,{card:r,isPlayable:!1})}),p.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>p.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[p.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),p.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),p.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[p.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),p.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"btn-confirm disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Upgrade"})]})]})},bj=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=A.useState(null);return p.jsxs(gs,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[p.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(f=>{const d=s.appliedUpgrades[f.name]||[];return p.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[p.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",f.name]}),p.jsx("div",{className:"space-y-2",children:d.map(m=>p.jsx("div",{onClick:()=>u({droneName:f.name,instanceId:m.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===m.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:p.jsx("p",{className:"font-semibold text-white",children:m.name})},m.instanceId))})]},f.id)}):p.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),p.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[p.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),p.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"btn-confirm disabled:opacity-50 disabled:cursor-not-allowed",children:"Destroy Upgrade"})]})]})},EF=({card:e,isSelected:t,onClick:n})=>p.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:p.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[p.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[p.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),p.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:p.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),p.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),p.jsx("div",{className:"p-1",children:p.jsxs("div",{className:"relative h-24",children:[p.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),p.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&p.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:p.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:""})})]})}),p.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:p.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:p.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),p.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),xj=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=A.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:f,filter:d}=r,m=S=>{s(C=>{const E=S.instanceId||`${S.id}-${S.name}`;return C.some(T=>(T.instanceId||`${T.id}-${T.name}`)===E)?C.filter(T=>(T.instanceId||`${T.id}-${T.name}`)!==E):C.length<u?[...C,S]:[...C.slice(0,-1),S]})},g=()=>{i.length===u&&(n(i),s([]))},y=()=>{s([]),t()},b=i.length===u;return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:y,children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[p.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:p.jsx(ln,{size:24})}),p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:f==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),p.jsx("p",{className:"text-gray-300 text-lg",children:d?`Select ${u} ${d.type} card${u>1?"s":""} from ${l.length} found ${d.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),p.jsx("div",{className:"mt-2",children:p.jsxs("span",{className:`text-lg font-bold ${b?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto",children:p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,C)=>p.jsx(EF,{card:S,isSelected:i.some(E=>{const w=S.instanceId||`${S.id}-${S.name}`;return(E.instanceId||`${E.id}-${E.name}`)===w}),onClick:m},S.instanceId||`${S.id}-${C}`))})}),p.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[p.jsx("button",{onClick:y,className:"btn-cancel",children:"Cancel"}),p.jsx("button",{onClick:g,disabled:!b,className:"btn-confirm",children:"Confirm Selection"})]})]})})},dv=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[p.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:p.jsx(ln,{size:24})}),p.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?p.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:p.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>p.jsx("div",{className:"flex justify-center",children:p.jsx($a,{card:l,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1})},`${l.instanceId}-${u}`))})}):p.jsx("div",{className:"flex-grow flex items-center justify-center",children:p.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},Sj=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[p.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:p.jsx(ln,{size:24})}),p.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),p.jsx("div",{className:"flex justify-center",children:p.jsx(vi,{drone:t,isSelectable:!1,deployedCount:0,isViewOnly:!0})})]})});function wF(){const[e,t]=A.useState(""),[n,r]=A.useState("all"),[i,s]=A.useState(null),[l,u]=A.useState(null),d=SF()[n].filter(S=>S.toLowerCase().includes(e.toLowerCase())),m=S=>{const C=Z2(S);C&&(s(S),u(C.props))};A.useEffect(()=>{const S=C=>{C.key==="Escape"&&i&&(s(null),u(null))};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[i]);const g=()=>{s(null),u(null)},y=()=>{Ge.setState({appState:"menu"})},b=()=>{if(!i||!l)return null;const S={...l,onClose:g,onCancel:g,onConfirm:()=>{console.log(`${i}: Confirmed`),g()},onIntercept:w=>{console.log(`${i}: Intercept with`,w),g()},onDecline:()=>{console.log(`${i}: Declined`),g()},onComplete:()=>{console.log(`${i}: Completed`),g()},onSelect:w=>{console.log(`${i}: Selected`,w),g()}},E={WinnerModal:tj,InterceptionOpportunityModal:nj,OpponentDecidingInterceptionModal:rj,DeploymentConfirmationModal:aj,CardConfirmationModal:ij,DroneAbilityConfirmationModal:sj,ShipAbilityConfirmationModal:oj,MoveConfirmationModal:lj,MandatoryActionModal:cj,ConfirmationModal:uj,AICardPlayReportModal:dj,AIDecisionLogModal:fj,AIHandDebugModal:pj,GameDebugModal:hj,WaitingForPlayerModal:mj,OpponentDronesModal:gj,ViewUpgradesModal:yj,UpgradeSelectionModal:vj,DestroyUpgradeModal:bj,CardSelectionModal:xj,CardViewerModal:dv,ViewDeckModal:Ev,GamePhaseModal:gs,DetailedDroneModal:Sj}[i];return E?p.jsx(E,{...S}):(console.warn(`Modal component not found: ${i}`),null)};return p.jsxs("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(2, 6, 23, 1)",overflow:"auto",padding:"40px 20px"},children:[p.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",marginBottom:"30px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[p.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 20px rgba(0, 255, 136, 0.4)"},children:"MODAL SHOWCASE"}),p.jsx("button",{onClick:y,className:"btn-cancel",style:{fontSize:"1rem"},children:"Close Showcase"})]}),p.jsx("p",{style:{color:"#cccccc",fontSize:"1rem",marginBottom:"30px"},children:"Preview all modal components with realistic mock data. Press ESC to close modal preview, Ctrl+M to toggle showcase."}),p.jsx("input",{type:"text",placeholder:"Search modals...",value:e,onChange:S=>t(S.target.value),style:{width:"100%",padding:"12px 20px",fontSize:"1rem",backgroundColor:"#1a1a1a",border:"2px solid #333",borderRadius:"8px",color:"#ffffff",outline:"none",transition:"border-color 0.3s"},onFocus:S=>S.target.style.borderColor="#00ff88",onBlur:S=>S.target.style.borderColor="#333"})]}),p.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto",marginBottom:"30px"},children:p.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:Object.entries(xF).map(([S,{name:C,count:E}])=>p.jsxs("button",{onClick:()=>r(S),style:{padding:"10px 20px",fontSize:"0.9rem",fontWeight:n===S?"bold":"normal",backgroundColor:n===S?"#0088ff":"#2a2a2a",color:n===S?"#ffffff":"#cccccc",border:`2px solid ${n===S?"#00ff88":"#444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:w=>{n!==S&&(w.target.style.backgroundColor="#333",w.target.style.borderColor="#666")},onMouseOut:w=>{n!==S&&(w.target.style.backgroundColor="#2a2a2a",w.target.style.borderColor="#444")},children:[C," (",E,")"]},S))})}),p.jsx("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:d.length===0?p.jsx("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:p.jsxs("p",{style:{fontSize:"1.2rem"},children:['No modals found matching "',e,'"']})}):p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},children:d.map(S=>{const E=Z2(S)?.category||"unknown";return p.jsxs("button",{onClick:()=>m(S),style:{padding:"20px",backgroundColor:"#2a2a2a",border:"2px solid #444",borderRadius:"8px",cursor:"pointer",textAlign:"left",transition:"all 0.3s ease",position:"relative"},onMouseOver:w=>{w.currentTarget.style.backgroundColor="#333",w.currentTarget.style.borderColor="#00ff88",w.currentTarget.style.transform="translateY(-4px)",w.currentTarget.style.boxShadow="0 8px 16px rgba(0, 255, 136, 0.2)"},onMouseOut:w=>{w.currentTarget.style.backgroundColor="#2a2a2a",w.currentTarget.style.borderColor="#444",w.currentTarget.style.transform="translateY(0)",w.currentTarget.style.boxShadow="none"},children:[p.jsx("div",{style:{fontSize:"0.75rem",color:"#888",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"8px"},children:E}),p.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#00ff88",marginBottom:"4px"},children:S.replace(/Modal$/,"")}),p.jsx("div",{style:{fontSize:"0.85rem",color:"#999"},children:"Click to preview"})]},S)})})}),b(),p.jsxs("div",{style:{maxWidth:"1400px",margin:"40px auto 0",padding:"20px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px",fontSize:"0.9rem",color:"#888"},children:[p.jsx("div",{style:{marginBottom:"10px",fontWeight:"bold",color:"#00ff88"},children:"Keyboard Shortcuts:"}),p.jsxs("ul",{style:{margin:0,paddingLeft:"20px"},children:[p.jsxs("li",{style:{marginBottom:"5px"},children:[p.jsx("strong",{style:{color:"#ccc"},children:"ESC:"})," Close modal preview"]}),p.jsxs("li",{style:{marginBottom:"5px"},children:[p.jsx("strong",{style:{color:"#ccc"},children:"Ctrl+M:"})," Toggle Modal Showcase from anywhere"]})]}),p.jsx("div",{style:{marginTop:"15px",fontStyle:"italic"},children:"All modal interactions are logged to console. Buttons will close the preview instead of performing actual actions."})]})]})}function s0(e){return{...e,id:`test-drone-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1,statMods:[]}}function Sx(e,t){const n=Cx(e);if(!n.valid)return console.error(" TEST MODE: Invalid configuration:",n.errors),alert(`Test configuration invalid:
${n.errors.join(`
`)}`),!1;try{const r=tP(e.player1,"Player 1"),i=tP(e.player2,"Player 2"),s=e.player1.shipSections||["bridge","powerCell","droneControlHub"],l=e.player2.shipSections||["bridge","powerCell","droneControlHub"],u={appState:"inGame",gameActive:!0,gameMode:"local",testMode:!0,turnPhase:"action",gameStage:"roundLoop",roundNumber:e.roundNumber||1,turn:e.roundNumber||1,currentPlayer:e.firstPlayer||"player1",firstPlayerOfRound:e.firstPlayer||"player1",firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:r,player2:i,placedSections:s,opponentPlacedSections:l,unplacedSections:[],shieldsToAllocate:0,winner:null,gameLog:[{type:"system",message:" Test game initialized",timestamp:Date.now(),round:e.roundNumber||1}],droneSelectionPool:[],droneSelectionTrio:[],commitments:{droneSelection:{player1:{drones:r.activeDronePool,timestamp:Date.now()},player2:{drones:i.activeDronePool,timestamp:Date.now()}}}};t.setState(u,"TEST_GAME_INITIALIZED");const f=Gf[0];return Cr.initialize(Gf,yt,f,t.actionProcessor,t),K("TESTING"," TEST MODE: AIPhaseProcessor initialized with:",f.name),K("TESTING"," TEST MODE: Game state initialized successfully"),K("TESTING"," TEST MODE: Starting at action phase with first player:",e.firstPlayer),!0}catch(r){return console.error(" TEST MODE: Error initializing test game:",r),alert(`Failed to initialize test game: ${r.message}`),!1}}function tP(e,t){const n={bridge:JSON.parse(JSON.stringify(uu.bridge)),powerCell:JSON.parse(JSON.stringify(uu.powerCell)),droneControlHub:JSON.parse(JSON.stringify(uu.droneControlHub))};let r=e.deck||[];if(e.deckComposition&&Object.keys(e.deckComposition).length>0){const f=[];let d=0;Object.entries(e.deckComposition).forEach(([m,g])=>{for(let y=0;y<g;y++){const b=Nn.find(S=>S.id===m);b&&f.push(Le.createCard(b,`card-${Date.now()}-${d++}`))}}),r=f.sort(()=>.5-Math.random()),K("TESTING",` Built deck from composition for ${t}: ${r.length} cards`)}const i=e.laneAssignments||{lane1:[],lane2:[],lane3:[]},s={lane1:i.lane1.map(f=>s0(f)),lane2:i.lane2.map(f=>s0(f)),lane3:i.lane3.map(f=>s0(f))};let l=[];if(e.handCards&&Array.isArray(e.handCards)&&e.handCards.length>0){let f=0;e.handCards.forEach(d=>{if(typeof d=="string"){const m=Nn.find(g=>g.id===d);m?l.push(Le.createCard(m,`hand-${Date.now()}-${f++}`)):console.warn(` TEST MODE: Card ID "${d}" not found in card collection`)}else d&&d.id&&(d.instanceId?l.push(d):l.push({...d,instanceId:`hand-${Date.now()}-${f++}`}))}),K("TESTING",` Built hand from configuration for ${t}: ${l.length} cards`)}else if(r.length>0){const m=La({shipSections:n},e.shipSections||["bridge","powerCell","droneControlHub"]).totals.handLimit,g=Math.min(m,r.length);l=r.splice(0,g)}const u={name:t,shipSections:n,energy:e.energy||10,initialDeploymentBudget:e.initialDeploymentBudget||10,deploymentBudget:e.deploymentBudget||10,hand:l,deck:r,discardPile:[],activeDronePool:e.selectedDrones||[],dronesOnBoard:s,deployedDroneCounts:PF(i),appliedUpgrades:{}};return K("TESTING",` Created ${t} state:`,{energy:u.energy,handSize:u.hand.length,deckSize:u.deck.length,activeDronePoolSize:u.activeDronePool.length,dronesOnBoard:{lane1:u.dronesOnBoard.lane1.length,lane2:u.dronesOnBoard.lane2.length,lane3:u.dronesOnBoard.lane3.length}}),u}function PF(e){if(!e)return{};const t={};return Object.values(e).forEach(n=>{n.forEach(r=>{t[r.name]=(t[r.name]||0)+1})}),t}function Cx(e){const t=[];if(!e.player1)t.push("Player 1 configuration is required");else{const n=nP(e.player1,"Player 1");t.push(...n)}if(!e.player2)t.push("Player 2 configuration is required");else{const n=nP(e.player2,"Player 2");t.push(...n)}return e.firstPlayer&&!["player1","player2"].includes(e.firstPlayer)&&t.push('First player must be "player1" or "player2"'),e.roundNumber!==void 0&&(e.roundNumber<1||!Number.isInteger(e.roundNumber))&&t.push("Round number must be a positive integer"),{valid:t.length===0,errors:t}}function nP(e,t){const n=[];if(e.selectedDrones&&(Array.isArray(e.selectedDrones)?e.selectedDrones.length!==5&&n.push(`${t}: Must have exactly 5 selected drones (found ${e.selectedDrones.length})`):n.push(`${t}: selectedDrones must be an array`)),e.laneAssignments)if(!e.laneAssignments.lane1||!e.laneAssignments.lane2||!e.laneAssignments.lane3)n.push(`${t}: Lane assignments must include lane1, lane2, and lane3`);else{const r=e.laneAssignments.lane1.length+e.laneAssignments.lane2.length+e.laneAssignments.lane3.length;if(e.selectedDrones&&r>0){const i=new Set(e.selectedDrones.map(s=>s.name));Object.values(e.laneAssignments).forEach(s=>{s.forEach(l=>{i.has(l.name)||n.push(`${t}: Drone "${l.name}" in lane not in selected drone pool`)})})}}return e.energy!==void 0&&(e.energy<0||e.energy>100)&&n.push(`${t}: Energy must be between 0 and 100`),e.handCards&&!Array.isArray(e.handCards)&&n.push(`${t}: Hand cards must be an array`),e.deck&&!Array.isArray(e.deck)&&n.push(`${t}: Deck must be an array`),n}function Ax(){return{player1:{selectedDrones:[],laneAssignments:{lane1:[],lane2:[],lane3:[]},handCards:[],deck:[],deckComposition:{},energy:10,initialDeploymentBudget:10,deploymentBudget:10,shipSections:["bridge","powerCell","droneControlHub"]},player2:{selectedDrones:[],laneAssignments:{lane1:[],lane2:[],lane3:[]},handCards:[],deck:[],deckComposition:{},energy:10,initialDeploymentBudget:10,deploymentBudget:10,shipSections:["bridge","powerCell","droneControlHub"]},firstPlayer:"player1",roundNumber:1}}const TF={initializeTestGame:Sx,validateTestConfig:Cx,createDefaultTestConfig:Ax},DF=Object.freeze(Object.defineProperty({__proto__:null,createDefaultTestConfig:Ax,default:TF,initializeTestGame:Sx,validateTestConfig:Cx},Symbol.toStringTag,{value:"Module"})),rP=({isOpen:e,onClose:t,onConfirm:n,initialSelection:r=[],allDrones:i=[],title:s="Select Drones"})=>{const[l,u]=A.useState([]);if(A.useEffect(()=>{if(e){const E=r.map(w=>i.find(D=>D.name===w.name)||w);u(E)}},[e,r,i]),!e)return null;const f=5,d=l.length,m=d===f,g=m,y=E=>l.some(w=>w.name===E.name),b=E=>{y(E)?u(T=>T.filter(D=>D.name!==E.name)):d<f?u(T=>[...T,E]):console.log("Maximum 5 drones already selected")},S=()=>{g&&n(l)},C=[...i].sort((E,w)=>E.class-w.class);return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-cyan-500 p-8 shadow-2xl shadow-cyan-500/20 max-w-[1500px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:E=>E.stopPropagation(),children:[p.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[p.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:s}),p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:p.jsx(ln,{size:32})})]}),p.jsx("div",{className:"flex-shrink-0 mb-6",children:p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:`text-4xl font-orbitron font-bold ${m?"text-green-400":"text-yellow-400"}`,children:[d,"/",f," Drones Selected"]}),!m&&p.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Click on drones to select or deselect them"}),m&&p.jsx("p",{className:"text-green-400 text-sm mt-2",children:" Ready to confirm selection"})]})}),p.jsx("div",{className:"overflow-y-auto flex-grow pr-4 mb-6",children:p.jsx("div",{className:"max-w-[1300px] mx-auto",children:p.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:C.map((E,w)=>{const T=y(E),D=d<f||T;return p.jsxs("div",{className:`relative transition-all duration-200 ${T?"ring-4 ring-cyan-400 ring-offset-2 ring-offset-gray-900 scale-105":D?"hover:ring-2 hover:ring-cyan-600 hover:scale-102":"opacity-40"}`,style:{filter:T?"drop-shadow(0 0 20px rgba(34, 211, 238, 0.6))":"none"},children:[p.jsx(vi,{drone:E,onClick:()=>b(E),isSelectable:D,isSelected:T,deployedCount:0,appliedUpgrades:[],isViewOnly:!1}),T&&p.jsxs("div",{className:"absolute top-2 right-2 bg-cyan-400 text-gray-900 font-bold text-sm px-2 py-1 rounded-full shadow-lg z-20 flex items-center gap-1",children:[p.jsx("span",{children:""}),p.jsx("span",{children:"Selected"})]})]},`${E.name}-${w}`)})})})}),p.jsxs("div",{className:"flex justify-center gap-4 flex-shrink-0",children:[p.jsx("button",{onClick:t,className:"btn-cancel",style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:"Cancel"}),p.jsx("button",{onClick:S,disabled:!g,className:`btn-confirm ${g?"":"opacity-50 cursor-not-allowed"}`,style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:g?"Confirm Selection":`Select ${f-d} More`})]})]})})},Df=({isOpen:e,onClose:t,onConfirm:n,initialSelection:r={},allCards:i=[],title:s="Select Cards",minCards:l=40,mandatory:u=!1})=>{const[f,d]=A.useState({}),[m,g]=A.useState({cost:{min:0,max:20},type:"all",search:""});A.useEffect(()=>{e&&d({...r})},[e,r]);const y=Object.values(f).reduce((D,O)=>D+O,0),b=y>=l,S=l===0?!0:b,C=A.useMemo(()=>i.filter(D=>!(D.cost<m.cost.min||D.cost>m.cost.max||m.type!=="all"&&D.type!==m.type||m.search&&!D.name.toLowerCase().includes(m.search.toLowerCase()))).sort((D,O)=>D.cost!==O.cost?D.cost-O.cost:D.name.localeCompare(O.name)),[i,m]);if(!e)return null;const E=D=>f[D]||0,w=(D,O)=>{if(O<=0){const j={...f};delete j[D],d(j)}else d(j=>({...j,[D]:O}))},T=()=>{S&&n(f)};return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:u?void 0:t,children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-cyan-500 p-8 shadow-2xl shadow-cyan-500/20 max-w-[1600px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[p.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[p.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:s}),!u&&p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:p.jsx(ln,{size:32})})]}),p.jsxs("div",{className:"flex-shrink-0 mb-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("div",{className:`text-3xl font-orbitron font-bold ${b?"text-green-400":l===0?"text-cyan-400":"text-yellow-400"}`,children:l===0?`${y} Cards Selected`:`${y} / ${l}+ Cards Selected`}),!b&&l>0&&p.jsxs("p",{className:"text-gray-400 text-sm",children:["Minimum ",l," cards required"]}),l===0&&p.jsx("p",{className:"text-gray-400 text-sm",children:"Select any number of cards"}),b&&l>0&&p.jsx("p",{className:"text-green-400 text-sm",children:" Ready to confirm selection"})]}),p.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Search cards...",value:m.search,onChange:D=>g(O=>({...O,search:D.target.value})),className:"px-3 py-2 bg-gray-800 border border-gray-600 rounded text-white"}),p.jsxs("select",{value:m.type,onChange:D=>g(O=>({...O,type:D.target.value})),className:"px-3 py-2 bg-gray-800 border border-gray-600 rounded text-white",children:[p.jsx("option",{value:"all",children:"All Types"}),p.jsx("option",{value:"Action",children:"Action Cards"}),p.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),p.jsxs("div",{className:"col-span-2",children:[p.jsxs("label",{className:"text-gray-400 text-sm mb-1 block",children:["Cost Range: ",m.cost.min," - ",m.cost.max]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"range",min:0,max:20,value:m.cost.min,onChange:D=>g(O=>({...O,cost:{...O.cost,min:Math.min(parseInt(D.target.value),O.cost.max)}})),className:"flex-1"}),p.jsx("input",{type:"range",min:0,max:20,value:m.cost.max,onChange:D=>g(O=>({...O,cost:{...O.cost,max:Math.max(parseInt(D.target.value),O.cost.min)}})),className:"flex-1"})]})]})]})]}),p.jsx("div",{className:"overflow-y-auto flex-grow pr-4 mb-6",children:p.jsx("div",{className:"max-w-[1400px] mx-auto",children:p.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:C.map((D,O)=>{const j=E(D.id),N=D.maxInDeck||3;return p.jsxs("div",{className:"relative flex flex-col items-center",children:[p.jsx("div",{className:`transition-all duration-200 ${j>0?"ring-2 ring-cyan-400 ring-offset-2 ring-offset-gray-900":"hover:ring-2 hover:ring-cyan-600"}`,style:{filter:j>0?"drop-shadow(0 0 10px rgba(34, 211, 238, 0.4))":"none"},children:p.jsx($a,{card:D,onClick:()=>{},isPlayable:!0,isSelected:j>0,isMandatoryTarget:!1,scale:.7})}),p.jsx("div",{className:"mt-2 flex items-center gap-2 bg-gray-800 rounded px-3 py-1",children:Array.from({length:N+1}).map((k,B)=>p.jsx("button",{onClick:()=>w(D.id,B),className:`px-3 py-1 rounded text-sm font-bold transition-all ${j===B?"bg-cyan-500 text-white":"bg-gray-700 text-gray-300 hover:bg-cyan-600 hover:text-white"}`,children:B},B))})]},`${D.id}-${O}`)})})})}),p.jsxs("div",{className:"flex justify-center gap-4 flex-shrink-0",children:[!u&&p.jsx("button",{onClick:t,className:"btn-cancel",style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:"Cancel"}),p.jsx("button",{onClick:T,disabled:!S,className:`btn-confirm ${S?"":"opacity-50 cursor-not-allowed"}`,style:{padding:"12px 32px",fontSize:"1.1rem",minWidth:"150px"},children:S?"Confirm Selection":l>0?`Add ${l-y} More Cards`:"Confirm Selection"})]})]})})};function OF(){const{gameStateManager:e}=Ai(),[t,n]=A.useState(Ax()),[r,i]=A.useState(null),[s,l]=A.useState(null),[u,f]=A.useState(null),[d,m]=A.useState(null),g=()=>{e.setState({appState:"menu"})},y=()=>{Sx(t,e)||console.error("Failed to initialize test game")},b=(M,R,z)=>{n(W=>({...W,[M]:{...W[M],[R]:z}}))},S=(M,R,z)=>{const W=t[M].selectedDrones.find(G=>G.name===R);if(!W)return;const Z={...W,id:`${M}-${R}-${z}-${Date.now()}-${Math.random()}`,currentHealth:W.health,currentShields:0,currentMaxShields:W.maxShields||0},Q=t[M].laneAssignments,I={...Q,[z]:[...Q[z],Z]};b(M,"laneAssignments",I)},C=(M,R,z)=>{const W=t[M].laneAssignments,Z=W[z],Q=Z.map(ie=>ie.name).lastIndexOf(R);if(Q===-1)return;const I=[...Z.slice(0,Q),...Z.slice(Q+1)],G={...W,[z]:I};b(M,"laneAssignments",G)},E=M=>{i(M)},w=(M,R)=>{const z=R.map(W=>({...W,id:`${M}-${W.name}-${Date.now()}-${Math.random()}`,currentHealth:W.health,currentShields:0,currentMaxShields:W.maxShields||0}));b(M,"selectedDrones",z),i(null)},T=M=>{l(M)},D=(M,R)=>{b(M,"deckComposition",R),l(null)},O=M=>{f(M)},j=(M,R)=>{const z=[];Object.entries(R).forEach(([W,Z])=>{for(let Q=0;Q<Z;Q++)z.push(W)}),b(M,"handCards",z),f(null)},N=M=>{b(M,"handCards",[])},k=M=>{m(M)},B=(M,R)=>{try{const z=R.split("|"),W={},Z=[];for(const Q of z){const[I,...G]=Q.split(":"),ie=G.join(":");if(I==="cards"){const le=ie.split(",");for(const $ of le){const[q,V]=$.split(":"),te=parseInt(V,10);if(!q||isNaN(te)){alert("Invalid card format in deck code.");return}if(!Nn.find(Se=>Se.id===q)){alert(`Card ${q} not found.`);return}W[q]=te}}else if(I==="drones"){const le=ie.split(",");for(const $ of le){const q=$.split(":"),V=q.pop(),te=q.join(":"),ve=parseInt(V,10);if(!te||isNaN(ve)||ve<=0)continue;const Se=yt.find(Ee=>Ee.name===te);Se&&Z.push(Se)}}}if(b(M,"deckComposition",W),Z.length>0){const Q=Z.slice(0,5);w(M,Q)}K("TESTING",` Imported deck for ${M}: ${Object.values(W).reduce((Q,I)=>Q+I,0)} cards, ${Z.length} drones`),alert(`Deck imported successfully!
${Object.values(W).reduce((Q,I)=>Q+I,0)} cards${Z.length>0?` and ${Math.min(Z.length,5)} drones`:""}`)}catch(z){console.error("Error importing deck:",z),alert("Failed to parse deck code. Please check the format.")}},F=M=>{const z=t[M==="player1"?"player2":"player1"],W=z.selectedDrones.map(G=>({...G,id:`${M}-${G.name}-${Date.now()}-${Math.random()}`})),Z=G=>G.map(ie=>W.find($=>$.name===ie.name)||ie),Q={lane1:Z(z.laneAssignments.lane1),lane2:Z(z.laneAssignments.lane2),lane3:Z(z.laneAssignments.lane3)},I={...z.deckComposition};b(M,"selectedDrones",W),b(M,"laneAssignments",Q),b(M,"deckComposition",I)};return p.jsxs("div",{className:"body-font",style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",minHeight:"100vh",color:"#ffffff",padding:"20px",boxSizing:"border-box",overflow:"auto"},children:[p.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[p.jsx("h1",{className:"heading-font",style:{fontSize:"2.5rem",color:"#ffb74d",marginBottom:"0.5rem"},children:" TESTING MODE"}),p.jsx("p",{style:{color:"#aaaaaa",fontSize:"1rem"},children:"Configure game scenario - Start directly at action phase"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginBottom:"2rem"},children:[p.jsx(aP,{player:"player1",playerLabel:"Player 1",config:t.player1,updateConfig:(M,R)=>b("player1",M,R),addDroneInstanceToLane:(M,R)=>S("player1",M,R),removeDroneInstanceFromLane:(M,R)=>C("player1",M,R),onOpenDroneSelection:()=>E("player1"),onOpenCardSelection:()=>T("player1"),onOpenHandCardSelection:()=>O("player1"),onClearHandCards:()=>N("player1"),onOpenImportDeck:()=>k("player1"),onCopyFromOtherPlayer:()=>F("player1")}),p.jsx(aP,{player:"player2",playerLabel:"Player 2",config:t.player2,updateConfig:(M,R)=>b("player2",M,R),addDroneInstanceToLane:(M,R)=>S("player2",M,R),removeDroneInstanceFromLane:(M,R)=>C("player2",M,R),onOpenDroneSelection:()=>E("player2"),onOpenCardSelection:()=>T("player2"),onOpenHandCardSelection:()=>O("player2"),onClearHandCards:()=>N("player2"),onOpenImportDeck:()=>k("player2"),onCopyFromOtherPlayer:()=>F("player2")})]}),p.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"1.5rem",borderRadius:"8px",marginBottom:"2rem"},children:[p.jsx("h3",{className:"heading-font",style:{fontSize:"1.2rem",marginBottom:"1rem"},children:"Global Settings"}),p.jsxs("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:[p.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[p.jsx("span",{children:"First Player:"}),p.jsxs("select",{value:t.firstPlayer,onChange:M=>n(R=>({...R,firstPlayer:M.target.value})),style:{padding:"8px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"},children:[p.jsx("option",{value:"player1",children:"Player 1"}),p.jsx("option",{value:"player2",children:"Player 2"})]})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[p.jsx("span",{children:"Round Number:"}),p.jsx("input",{type:"number",min:"1",max:"99",value:t.roundNumber,onChange:M=>n(R=>({...R,roundNumber:parseInt(M.target.value)||1})),style:{padding:"8px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",width:"100px"}})]})]})]}),p.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[p.jsx("button",{onClick:g,className:"btn-cancel",children:"BACK TO MENU"}),p.jsx("button",{onClick:y,className:"btn-confirm",children:"START TEST GAME"})]}),p.jsx(rP,{isOpen:r==="player1",onClose:()=>i(null),onConfirm:M=>w("player1",M),initialSelection:t.player1.selectedDrones,allDrones:yt,title:"Select Drones for Player 1"}),p.jsx(rP,{isOpen:r==="player2",onClose:()=>i(null),onConfirm:M=>w("player2",M),initialSelection:t.player2.selectedDrones,allDrones:yt,title:"Select Drones for Player 2"}),p.jsx(Df,{isOpen:s==="player1",onClose:()=>l(null),onConfirm:M=>D("player1",M),initialSelection:t.player1.deckComposition,allCards:Nn,title:"Select Cards for Player 1"}),p.jsx(Df,{isOpen:s==="player2",onClose:()=>l(null),onConfirm:M=>D("player2",M),initialSelection:t.player2.deckComposition,allCards:Nn,title:"Select Cards for Player 2"}),p.jsx(Df,{isOpen:u==="player1",onClose:()=>f(null),onConfirm:M=>j("player1",M),initialSelection:{},allCards:Nn,title:"Select Starting Hand for Player 1",minCards:0}),p.jsx(Df,{isOpen:u==="player2",onClose:()=>f(null),onConfirm:M=>j("player2",M),initialSelection:{},allCards:Nn,title:"Select Starting Hand for Player 2",minCards:0}),d&&p.jsx(NF,{isOpen:!0,onClose:()=>m(null),onImport:M=>{B(d,M),m(null)},playerLabel:d==="player1"?"Player 1":"Player 2"})]})}function aP({player:e,playerLabel:t,config:n,updateConfig:r,addDroneInstanceToLane:i,removeDroneInstanceFromLane:s,onOpenDroneSelection:l,onOpenCardSelection:u,onOpenHandCardSelection:f,onClearHandCards:d,onOpenImportDeck:m,onCopyFromOtherPlayer:g}){const y=e==="player1"?"Player 2":"Player 1",b=Object.values(n.deckComposition||{}).reduce((C,E)=>C+E,0),S=(n.handCards||[]).length;return p.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.05)",padding:"1.5rem",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("h2",{className:"heading-font",style:{fontSize:"1.5rem",color:"#6dd5fa",margin:0},children:t}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsx("button",{onClick:m,className:"btn-utility",style:{padding:"6px 12px",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"4px"},children:" Import Deck"}),p.jsxs("button",{onClick:g,className:"btn-utility",style:{padding:"6px 12px",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"4px"},children:[" Copy from ",y]})]})]}),p.jsxs("div",{children:[p.jsxs("h3",{style:{fontSize:"1rem",margin:0,marginBottom:"0.5rem",color:"#aaa"},children:["Deck (",b," cards)"]}),p.jsxs("button",{onClick:u,className:"btn-confirm",style:{width:"100%",padding:"12px",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[p.jsx("span",{children:""}),p.jsxs("span",{children:["SELECT CARDS (",b," total, ",Object.keys(n.deckComposition||{}).length," unique)"]})]})]}),p.jsxs("div",{children:[p.jsxs("h3",{style:{fontSize:"1rem",margin:0,marginBottom:"0.5rem",color:"#aaa"},children:["Starting Hand (",S," cards)"]}),p.jsxs("div",{style:{display:"flex",gap:"8px"},children:[p.jsxs("button",{onClick:f,className:"btn-confirm",style:{flex:1,padding:"12px",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[p.jsx("span",{children:""}),p.jsxs("span",{children:["SELECT HAND (",S," cards)"]})]}),S>0&&p.jsx("button",{onClick:d,className:"btn-cancel",style:{padding:"12px",fontSize:"0.9rem"},children:"Clear"})]})]}),p.jsxs("div",{children:[p.jsxs("h3",{style:{fontSize:"1rem",margin:0,marginBottom:"0.5rem",color:"#aaa"},children:["Drone Pool (",n.selectedDrones.length,"/5)"]}),p.jsxs("button",{onClick:l,className:"btn-confirm",style:{width:"100%",padding:"12px",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[p.jsx("span",{children:""}),p.jsxs("span",{children:["SELECT DRONES (",n.selectedDrones.length,"/5)"]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.5rem",color:"#aaa"},children:"Lane Assignments"}),p.jsx(_F,{selectedDrones:n.selectedDrones,laneAssignments:n.laneAssignments,addDroneInstanceToLane:i,removeDroneInstanceFromLane:s})]}),p.jsxs("div",{children:[p.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.5rem",color:"#aaa"},children:"Resources"}),p.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[p.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.3rem",flex:1},children:[p.jsx("span",{style:{fontSize:"0.9rem"},children:"Energy:"}),p.jsx("input",{type:"number",min:"0",max:"50",value:n.energy,onChange:C=>r("energy",parseInt(C.target.value)||0),style:{padding:"6px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",gap:"0.3rem",flex:1},children:[p.jsx("span",{style:{fontSize:"0.9rem"},children:"Deployment Budget:"}),p.jsx("input",{type:"number",min:"0",max:"50",value:n.deploymentBudget,onChange:C=>r("deploymentBudget",parseInt(C.target.value)||0),style:{padding:"6px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}})]})]})]})]})}function _F({selectedDrones:e,laneAssignments:t,addDroneInstanceToLane:n,removeDroneInstanceFromLane:r}){const i=(l,u)=>t[u].filter(f=>f.name===l).length,s={lane1:t.lane1.length,lane2:t.lane2.length,lane3:t.lane3.length};return e.length===0?p.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:"0.8rem",padding:"1rem",fontStyle:"italic",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"4px"},children:"Select drones first to assign them to lanes"}):p.jsx("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"4px",padding:"0.5rem",overflow:"auto"},children:p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(140px, 1fr) repeat(3, minmax(100px, 1fr))",gap:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[p.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"left"},children:"Drone Name"}),p.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"center"},children:"Lane 1"}),p.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"center"},children:"Lane 2 (Center)"}),p.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.15)",fontWeight:"bold",fontSize:"0.75rem",color:"#6dd5fa",textAlign:"center"},children:"Lane 3"}),e.map((l,u)=>{const d=u%2===0?"rgba(0, 0, 0, 0.3)":"rgba(255, 255, 255, 0.03)";return p.jsxs(fv.Fragment,{children:[p.jsx("div",{style:{padding:"6px 8px",backgroundColor:d,fontSize:"0.8rem",display:"flex",alignItems:"center"},children:l.name}),p.jsxs("div",{style:{padding:"6px 8px",backgroundColor:d,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[p.jsx("button",{onClick:()=>r(l.name,"lane1"),disabled:i(l.name,"lane1")===0,className:"btn-cancel",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px",opacity:i(l.name,"lane1")===0?.3:1,cursor:i(l.name,"lane1")===0?"not-allowed":"pointer"},children:""}),p.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",color:i(l.name,"lane1")>0?"#6dd5fa":"#666"},children:i(l.name,"lane1")}),p.jsx("button",{onClick:()=>n(l.name,"lane1"),className:"btn-confirm",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px"},children:"+"})]},`${l.id}-lane1`),p.jsxs("div",{style:{padding:"6px 8px",backgroundColor:d,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[p.jsx("button",{onClick:()=>r(l.name,"lane2"),disabled:i(l.name,"lane2")===0,className:"btn-cancel",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px",opacity:i(l.name,"lane2")===0?.3:1,cursor:i(l.name,"lane2")===0?"not-allowed":"pointer"},children:""}),p.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",color:i(l.name,"lane2")>0?"#6dd5fa":"#666"},children:i(l.name,"lane2")}),p.jsx("button",{onClick:()=>n(l.name,"lane2"),className:"btn-confirm",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px"},children:"+"})]},`${l.id}-lane2`),p.jsxs("div",{style:{padding:"6px 8px",backgroundColor:d,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[p.jsx("button",{onClick:()=>r(l.name,"lane3"),disabled:i(l.name,"lane3")===0,className:"btn-cancel",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px",opacity:i(l.name,"lane3")===0?.3:1,cursor:i(l.name,"lane3")===0?"not-allowed":"pointer"},children:""}),p.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"0.8rem",fontWeight:"bold",color:i(l.name,"lane3")>0?"#6dd5fa":"#666"},children:i(l.name,"lane3")}),p.jsx("button",{onClick:()=>n(l.name,"lane3"),className:"btn-confirm",style:{padding:"2px 6px",fontSize:"0.75rem",minWidth:"24px"},children:"+"})]},`${l.id}-lane3`)]},l.id)}),p.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.75rem",color:"#aaa",textAlign:"left",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:"Total:"}),p.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.85rem",color:s.lane1>0?"#6dd5fa":"#666",textAlign:"center",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:s.lane1}),p.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.85rem",color:s.lane2>0?"#6dd5fa":"#666",textAlign:"center",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:s.lane2}),p.jsx("div",{style:{padding:"8px",backgroundColor:"rgba(109, 213, 250, 0.1)",fontWeight:"bold",fontSize:"0.85rem",color:s.lane3>0?"#6dd5fa":"#666",textAlign:"center",borderTop:"2px solid rgba(109, 213, 250, 0.3)"},children:s.lane3})]})})}function NF({isOpen:e,onClose:t,onImport:n,playerLabel:r}){const[i,s]=A.useState("");if(!e)return null;const l=()=>{i.trim()?(n(i),s("")):alert("Please enter a deck code")};return p.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:p.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:u=>u.stopPropagation(),children:[p.jsxs("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-4",children:["Import Deck for ",r]}),p.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below. The deck will be imported with both cards and drones (if included)."}),p.jsx("textarea",{value:i,onChange:u=>s(u.target.value),className:"w-full h-32 p-3 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono text-sm",placeholder:"cards:CARD001:4,CARD002:2|drones:Scout Drone:1,Heavy Fighter:1"}),p.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[p.jsx("button",{onClick:t,className:"btn-cancel",children:"Cancel"}),p.jsx("button",{onClick:l,className:"btn-confirm",children:"Import Deck"})]})]})})}function jF(){const[e,t]=A.useState({}),[n,r]=A.useState({}),[i,s]=A.useState({}),[l,u]=A.useState(!1);A.useEffect(()=>{try{const S=localStorage.getItem("customDeck"),C=localStorage.getItem("customDrones"),E=localStorage.getItem("customShipComponents");S&&t(JSON.parse(S)),C&&r(JSON.parse(C)),E&&s(JSON.parse(E))}catch(S){console.error("Error loading saved deck:",S)}},[]);const f=(S,C)=>{t(E=>({...E,[S]:C}))},d=(S,C)=>{r(E=>({...E,[S]:C}))},m=(S,C)=>{if(S===null&&C===null){s({});return}s(E=>({...E,[S]:C}))},g=()=>{try{localStorage.setItem("customDeck",JSON.stringify(e)),localStorage.setItem("customDrones",JSON.stringify(n)),localStorage.setItem("customShipComponents",JSON.stringify(i)),u(!0),setTimeout(()=>{u(!1)},3e3),console.log(" Deck saved successfully to localStorage")}catch(S){console.error(" Error saving deck:",S)}},y=S=>{try{const C={},E={},w={},T=S.split("|");for(const D of T){const[O,...j]=D.split(":"),N=j.join(":");if(O==="cards"){const k=N.split(",");for(const B of k){const[F,M]=B.split(":"),R=parseInt(M,10);if(!F||isNaN(R))return{success:!1,message:"Invalid card format in deck code."};if(!Nn.find(W=>W.id===F))return{success:!1,message:`Card ${F} not found.`};C[F]=R}}else if(O==="drones"){const k=N.split(",");for(const B of k){const F=B.split(":"),M=F.pop(),R=F.join(":"),z=parseInt(M,10);if(!R||isNaN(z))return{success:!1,message:"Invalid drone format in deck code."};const W=yt.find(Z=>Z.name===R);if(!W)return{success:!1,message:`Drone ${R} not found.`};if(W.selectable===!1)return{success:!1,message:`Drone ${R} cannot be imported (non-selectable token).`};E[R]=z}}else if(O==="ship"){const k=N.split(",");for(const B of k){const[F,M]=B.split(":");if(!F||!M||!["l","m","r"].includes(M))return{success:!1,message:"Invalid ship component format in deck code."};w[F]=M}}}return t(C),r(E),s(w),{success:!0}}catch(C){return console.error("Error importing deck:",C),{success:!1,message:"Failed to parse deck code."}}},b=()=>{Ge.setState({appState:"menu"})};return p.jsxs(p.Fragment,{children:[l&&p.jsx("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#10b981",color:"white",padding:"16px 32px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",zIndex:9999,fontFamily:"Orbitron, sans-serif",fontSize:"16px",fontWeight:"bold"},children:" Deck Saved Successfully!"}),p.jsx(ej,{selectedDrones:n,fullCardCollection:Nn,deck:e,onDeckChange:f,onDronesChange:d,selectedShipComponents:i,onShipComponentsChange:m,onConfirmDeck:g,onImportDeck:y,onBack:b})]})}const kF=()=>{const e=A.useRef(null);return A.useEffect(()=>{const t=e.current,n=t.getContext("2d");let r;const i=Array.from({length:500},()=>{const d=Math.random();let m;return d<.9?m="rgba(255, 255, 255, ":d<.94?m="rgba(100, 150, 255, ":d<.98?m="rgba(255, 200, 100, ":m="rgba(255, 100, 100, ",{x:0,y:0,radius:Math.random()*1.5+.5,opacity:Math.random()*.5+.3,twinkleSpeed:.005+Math.random()*.01,twinklePhase:Math.random()*Math.PI*2,color:m}}),s=["rgba(147, 51, 234, ","rgba(59, 130, 246, ","rgba(236, 72, 153, ","rgba(16, 185, 129, ","rgba(6, 182, 212, ","rgba(139, 92, 246, ","rgba(34, 211, 238, "],l=Array.from({length:4},()=>({x:0,y:0,radius:180+Math.random()*150,color:s[Math.floor(Math.random()*s.length)],pulsePhase:Math.random()*Math.PI*2,pulseSpeed:.004+Math.random()*.003})),u=()=>{t.width=window.innerWidth,t.height=window.innerHeight,i.forEach(d=>{d.x=Math.random()*t.width,d.y=Math.random()*(t.height*.75)}),l.forEach(d=>{d.x=Math.random()*t.width,d.y=Math.random()*(t.height*.75)})};u(),window.addEventListener("resize",u);const f=()=>{n.fillStyle="#0a0a1a",n.fillRect(0,0,t.width,t.height),l.forEach(d=>{d.pulsePhase+=d.pulseSpeed;const m=.08+Math.sin(d.pulsePhase)*.04;for(let g=0;g<3;g++){const y=Math.sin(d.pulsePhase*.5+g)*30,b=Math.cos(d.pulsePhase*.3+g)*30,S=m*(.4+g*.3),C=n.createRadialGradient(d.x+y,d.y+b,0,d.x+y,d.y+b,d.radius*(.7+g*.15));C.addColorStop(0,d.color+S+")"),C.addColorStop(.3,d.color+S*.6+")"),C.addColorStop(.7,d.color+S*.2+")"),C.addColorStop(1,d.color+"0)"),n.fillStyle=C,n.fillRect(0,0,t.width,t.height)}}),i.forEach(d=>{d.twinklePhase+=d.twinkleSpeed;const m=.3+Math.sin(d.twinklePhase)*.7;n.beginPath(),n.arc(d.x,d.y,d.radius,0,Math.PI*2),n.fillStyle=d.color+d.opacity*m+")",n.fill(),d.radius>1&&(n.beginPath(),n.arc(d.x,d.y,d.radius*2,0,Math.PI*2),n.fillStyle=d.color+d.opacity*m*.1+")",n.fill())}),r=requestAnimationFrame(f)};return f(),()=>{window.removeEventListener("resize",u),cancelAnimationFrame(r)}},[]),p.jsx("canvas",{ref:e,className:"fixed inset-0 -z-10",style:{background:"#0a0a1a"}})},_a=({icon:e,value:t,max:n,iconColor:r,isPlayer:i})=>{const s=i?"from-cyan-400/30 via-blue-400/30 to-blue-500/30":"from-pink-400/30 via-pink-500/30 to-pink-600/30";return p.jsx("div",{className:`relative p-[1px] bg-gradient-to-br ${s}`,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:p.jsxs("div",{className:"bg-gradient-to-br from-gray-900/95 to-gray-800/95 px-3 py-1 flex items-center gap-2",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[p.jsx(e,{size:18,className:r}),p.jsxs("span",{className:"font-bold text-base text-white whitespace-nowrap",children:[t,n!==void 0&&p.jsxs("span",{className:"hidden xl:inline",children:[" / ",n]})]})]})})};function MF({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:f,opponentShieldsToAllocate:d,shieldsToRemove:m,shieldsToAdd:g,reallocationPhase:y,totalLocalPlayerDrones:b,totalOpponentPlayerDrones:S,getLocalPlayerId:C,getOpponentPlayerId:E,isMyTurn:w,currentPlayer:T,isMultiplayer:D,handlePlayerPass:O,handleExitGame:j,handleResetShields:N,handleConfirmShields:k,handleCancelReallocation:B,handleResetReallocation:F,handleContinueToAddPhase:M,handleConfirmReallocation:R,handleRoundStartDraw:z,optionalDiscardCount:W,mandatoryAction:Z,multiSelectState:Q,AI_HAND_DEBUG_MODE:I,setShowAiHandModal:G,onShowDebugModal:ie,onShowOpponentDrones:le,testMode:$}){const[q,V]=A.useState(!1),te=A.useRef(null);return A.useEffect(()=>{const ve=Se=>{te.current&&!te.current.contains(Se.target)&&V(!1)};return document.addEventListener("mousedown",ve),()=>{document.removeEventListener("mousedown",ve)}},[]),p.jsxs("header",{className:"w-full flex justify-between items-start mb-2 flex-shrink-0 px-5 pt-2",children:[$&&p.jsx("div",{className:"body-font",style:{position:"absolute",top:"10px",right:"10px",padding:"8px 16px",backgroundColor:"rgba(255, 165, 0, 0.2)",border:"2px solid #ff9800",borderRadius:"8px",color:"#ffb74d",fontWeight:"bold",fontSize:"0.9rem",zIndex:1e3,boxShadow:"0 0 20px rgba(255, 152, 0, 0.4)",backdropFilter:"blur(4px)"},children:" TESTING MODE"}),p.jsxs("div",{className:"flex flex-col gap-1.5",children:[p.jsxs("h2",{className:"text-base font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Opponent",(i==="deployment"||i==="action")&&u===E()&&p.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${E()}Passed`]&&p.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(_a,{icon:Bf,value:t.energy,max:r.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!1}),p.jsx("div",{onClick:()=>I&&setTimeout(()=>G(!0),100),className:I?"cursor-pointer":"",children:p.jsx(_a,{icon:hM,value:t.hand.length,max:r.totals.handLimit,iconColor:"text-gray-400",isPlayer:!1})}),i==="deployment"&&p.jsx(_a,{icon:o0,value:s===1?t.initialDeploymentBudget:t.deploymentBudget,iconColor:"text-purple-400",isPlayer:!1}),p.jsx("div",{onClick:()=>setTimeout(()=>le(),100),className:"cursor-pointer hover:scale-105 transition-transform",children:p.jsx(_a,{icon:_C,value:S,max:r.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!1})})]})]}),p.jsxs("div",{className:"text-center flex flex-col items-center gap-2",children:[p.jsxs("h2",{className:"text-base font-bold uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #6b7280, #9ca3af)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[pR(i),i==="allocateShields"&&p.jsxs("span",{className:"text-base font-semibold text-cyan-300 ml-2",children:["(",f," shields to assign)"]}),y==="removing"&&p.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",m," shields to remove)"]}),y==="adding"&&p.jsxs("span",{className:"text-base font-semibold text-green-300 ml-2",children:["(",g," shields to add)"]}),i==="mandatoryDiscard"&&Z?.type==="discard"&&p.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",Z.count," ",Z.count===1?"card":"cards"," to discard)"]}),i==="optionalDiscard"&&p.jsxs("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:["(",n.totals.discardLimit-W," ",n.totals.discardLimit-W===1?"card":"cards"," to discard)"]})]}),p.jsx("div",{className:"flex items-center gap-3",children:i==="deployment"||i==="action"||y?p.jsxs(p.Fragment,{children:[w()?p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Your Turn"})}):p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest phase-announcement-shine animate-pulse",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6, #ec4899)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(236, 72, 153, 0.5), 0 0 60px rgba(244, 114, 182, 0.3)",filter:"drop-shadow(0 0 20px rgba(236, 72, 153, 0.4))",animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:D()?"Opponent's Turn":"AI Thinking"})}),w()&&!Z&&!Q&&!y&&p.jsx("button",{onClick:O,disabled:l[`${C()}Passed`],className:"relative p-[1px] transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:l[`${C()}Passed`]?"linear-gradient(45deg, rgba(75, 85, 99, 0.6), rgba(107, 114, 128, 0.6))":"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:p.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:l[`${C()}Passed`]?"#9ca3af":"#fca5a5"},children:"Pass"})}),y==="removing"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:B,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:p.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),p.jsx("button",{onClick:F,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:p.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),p.jsx("button",{onClick:M,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:p.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Continue"})})]}),y==="adding"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:B,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:p.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),p.jsx("button",{onClick:F,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:p.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),p.jsx("button",{onClick:R,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:p.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Initialising"})}),i==="allocateShields"&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:N,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:p.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),p.jsx("button",{onClick:k,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:p.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]}),i==="optionalDiscard"&&p.jsx("button",{onClick:z,className:"btn-confirm",children:"Confirm"})]})})]}),p.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[p.jsxs("h2",{className:"text-base font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Your Resources",(i==="deployment"||i==="action")&&u===C()&&p.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${C()}Passed`]&&p.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(_a,{icon:Bf,value:e.energy,max:n.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!0}),i==="deployment"&&p.jsx(_a,{icon:o0,value:s===1?e.initialDeploymentBudget:e.deploymentBudget,iconColor:"text-purple-400",isPlayer:!0}),p.jsx(_a,{icon:_C,value:b,max:n.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!0}),i==="allocateShields"&&p.jsx(_a,{icon:xg,value:f,iconColor:"text-cyan-300",isPlayer:!0}),y==="removing"&&p.jsx(_a,{icon:xg,value:m,iconColor:"text-orange-300",isPlayer:!0}),y==="adding"&&p.jsx(_a,{icon:xg,value:g,iconColor:"text-green-300",isPlayer:!0}),p.jsxs("div",{className:"relative",ref:te,children:[p.jsx("button",{onClick:()=>V(!q),className:"relative p-[2px] bg-gradient-to-br from-gray-500 to-gray-700",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Settings",children:p.jsxs("div",{className:"bg-slate-700 hover:bg-slate-600 p-1.5 transition-colors flex items-center gap-1",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[p.jsx(kC,{size:20,className:"text-white"}),p.jsx(nM,{size:16,className:"text-white"})]})}),q&&p.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:[p.jsxs("button",{onClick:()=>{ie&&ie(),V(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors flex items-center gap-2 border-b border-gray-700",children:[p.jsx(kC,{size:16}),"Debug View"]}),p.jsxs("button",{onClick:()=>{j(),V(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-b-lg flex items-center gap-2",children:[p.jsx(CM,{size:16}),"Exit"]})]})]})]})]})]})}const iP=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:f,gameEngine:d,turnPhase:m,isMyTurn:g,passInfo:y,getLocalPlayerId:b,localPlayerState:S,shipAbilityMode:C,hoveredTarget:E,setHoveredTarget:w,sectionRefs:T})=>{const{getEffectiveShipStats:D}=lh(),O=D(e,n);return p.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(j=>{const N=n[j];if(!N)return K("STATE_SYNC",`Lane ${j} rendering EMPTY div - no hover possible:`,{sectionNameValue:JSON.stringify(N),playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),p.jsx("div",{className:"bg-black/20 rounded-lg border-2 border-dashed border-gray-700",style:{width:"clamp(600px, 31.25vw, 810px)",height:"clamp(120px, 6.25vw, 162px)"}},j);const k=e.shipSections[N],B=u.some(M=>M.id===N);let F=null;if(f&&t){if(f==="removing")k.allocatedShields>0?F="can-remove":F="cannot-remove";else if(f==="adding"){const M=d.getEffectiveSectionMaxShields(N,e,n);k.allocatedShields<M?F="can-add":F="cannot-add"}}return p.jsx("div",{style:{width:"clamp(600px, 31.25vw, 810px)",height:"clamp(120px, 6.25vw, 162px)"},children:p.jsx(lo,{section:N,stats:k,effectiveStatsForDisplay:O.bySection[N],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(N):s&&s({...k,id:N,name:N},"section",t)},onAbilityClick:i,isInteractive:l||m==="action"&&t&&k.ability&&S.energy>=k.ability.cost.energy,isCardTarget:B,isInMiddleLane:j===1,isHovered:E?.type==="section"&&E?.target.name===N&&E?.isOpponent===!t,onMouseEnter:()=>!t&&w({target:{...k,name:N},type:"section",isOpponent:!0}),onMouseLeave:()=>!t&&w(null),reallocationState:F,gameEngine:d,turnPhase:m,isMyTurn:g,passInfo:y,getLocalPlayerId:b,localPlayerState:S,shipAbilityMode:C,sectionRef:M=>{if(T&&M){const R=`${t?"local":"opponent"}-${N}`;T.current[R]=M}}})},j)})})},IF=(e,t,n,r,i,s,l,u,f,d,m,g,y,b,S,C,E,w,T,D,O,j)=>p.jsx("div",{className:"flex flex-wrap gap-8 justify-center items-center",style:{minHeight:"clamp(130px, 6.77vw, 175px)",paddingTop:"2px"},children:e.map(N=>p.jsx($f,{drone:N,lane:n,isPlayer:t,onClick:d,onAbilityClick:m,isSelected:g&&g.id===N.id,isSelectedForMove:y?.phase==="select_drones"&&y.selectedDrones.some(k=>k.id===N.id),isHit:b.includes(N.id),isPotentialInterceptor:S.includes(N.id),isPotentialGuardian:C.includes(N.id),droneRefs:E,mandatoryAction:w,localPlayerState:r,isActionTarget:T.some(k=>k.id===N.id)||D.some(k=>k.id===N.id),onMouseEnter:()=>!t&&O({target:N,type:"drone",lane:n}),onMouseLeave:()=>!t&&O(null),interceptedBadge:j,enableFloatAnimation:!0},N.id))}),sP=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:f,multiSelectState:d,turnPhase:m,localPlayerState:g,opponentPlayerState:y,localPlacedSections:b,opponentPlacedSections:S,gameEngine:C,getPlacedSectionsForEngine:E,handleTokenClick:w,handleAbilityIconClick:T,selectedDrone:D,recentlyHitDrones:O,potentialInterceptors:j,potentialGuardians:N,droneRefs:k,mandatoryAction:B,setHoveredTarget:F,interceptedBadge:M})=>(lh(),p.jsx("div",{className:"flex w-full justify-between gap-8",style:{minHeight:"clamp(140px, 7.292vw, 190px)"},children:["lane1","lane2","lane3"].map(R=>{const z=t?r():i(),W=s&&l.some(I=>I.id===R&&I.owner===z)||u&&f.some(I=>I.id===R&&I.owner===z)||d&&f.some(I=>I.id===R&&I.owner===z),Z=t&&(m==="deployment"||m==="action"),Q=t?"bg-cyan-400/10":"bg-pink-500/10";return p.jsx("div",{onClick:I=>n(I,R,t),className:`flex-1 rounded-lg transition-all duration-200 p-2
              ${W?"bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":Q}
              ${Z?"cursor-pointer hover:bg-cyan-900/20":""}
            `,children:IF(e.dronesOnBoard[R],t,R,g,y,b,S,C,E,w,T,D,d,O,j,N,k,B,l,f,F,M)},R)})}));function RF({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:f,turnPhase:d,reallocationPhase:m,shipAbilityMode:g,hoveredTarget:y,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:C,potentialGuardians:E,droneRefs:w,sectionRefs:T,mandatoryAction:D,gameEngine:O,getLocalPlayerId:j,getOpponentPlayerId:N,isMyTurn:k,getPlacedSectionsForEngine:B,passInfo:F,handleTargetClick:M,handleLaneClick:R,handleShipSectionClick:z,handleShipAbilityClick:W,handleTokenClick:Z,handleAbilityIconClick:Q,setHoveredTarget:I,interceptedBadge:G}){const ie=d==="allocateShields"||m;return p.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:p.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[p.jsx(iP,{player:t,isPlayer:!1,placedSections:r,onTargetClick:M,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:O,turnPhase:d,isMyTurn:k,passInfo:F,getLocalPlayerId:j,localPlayerState:e,shipAbilityMode:g,hoveredTarget:y,setHoveredTarget:I,sectionRefs:T}),p.jsx(sP,{player:t,isPlayer:!1,onLaneClick:R,getLocalPlayerId:j,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:f,turnPhase:d,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:B,handleTokenClick:Z,handleAbilityIconClick:Q,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:C,potentialGuardians:E,droneRefs:w,mandatoryAction:D,setHoveredTarget:I,interceptedBadge:G}),p.jsx(sP,{player:e,isPlayer:!0,onLaneClick:R,getLocalPlayerId:j,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:f,turnPhase:d,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:O,getPlacedSectionsForEngine:B,handleTokenClick:Z,handleAbilityIconClick:Q,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:C,potentialGuardians:E,droneRefs:w,mandatoryAction:D,setHoveredTarget:I,interceptedBadge:G}),p.jsx(iP,{player:e,isPlayer:!0,placedSections:n,onSectionClick:z,onAbilityClick:W,onTargetClick:M,isInteractive:ie,selectedCard:i,validCardTargets:s,reallocationPhase:m,gameEngine:O,turnPhase:d,isMyTurn:k,passInfo:F,getLocalPlayerId:j,localPlayerState:e,shipAbilityMode:g,hoveredTarget:y,setHoveredTarget:I,sectionRefs:T})]})})}const LF="_footer_15bg8_15",$F="_tabContainer_15bg8_21",BF="_contentContainer_15bg8_25",zF="_contentOpen_15bg8_29",UF="_contentClosed_15bg8_34",HF="_contentWrapper_15bg8_38",GF="_tabButton_15bg8_44",qF="_tabButtonActive_15bg8_48",YF="_tabButtonInactive_15bg8_52",FF="_tabIcon_15bg8_56",VF="_multiSelectOverlay_15bg8_62",KF="_multiSelectText_15bg8_66",WF="_handContainer_15bg8_72",XF="_cardPile_15bg8_76",QF="_deckCard_15bg8_80",JF="_deckCardText_15bg8_88",ZF="_discardCard_15bg8_93",eV="_discardCardText_15bg8_101",tV="_pileLabel_15bg8_106",nV="_handSection_15bg8_110",rV="_handCardsContainer_15bg8_134",aV="_handCardsWrapper_15bg8_139",iV="_handCardsWrapperGap_15bg8_143",sV="_cardWrapper_15bg8_148",oV="_droneContainer_15bg8_155",lV="_droneGrid_15bg8_159",cV="_logContainer_15bg8_170",uV="_logHeader_15bg8_174",dV="_logTitle_15bg8_178",fV="_downloadButton_15bg8_182",pV="_logTableWrapper_15bg8_187",hV="_logTable_15bg8_187",mV="_logTableHeader_15bg8_195",gV="_logTableHeaderCell_15bg8_199",yV="_logTableDebugHeader_15bg8_203",vV="_logTableRow_15bg8_207",bV="_logTableCell_15bg8_211",xV="_logTableCellBold_15bg8_215",SV="_logTableCellGray_15bg8_219",CV="_logTableCellCyan_15bg8_223",AV="_logTableCellYellow_15bg8_227",EV="_logTableCellGrayText_15bg8_231",wV="_logTableCellDebug_15bg8_235",PV="_logTableCellCenter_15bg8_239",TV="_aiDecisionButton_15bg8_243",DV="_buttonDanger_15bg8_254",OV="_buttonSuccess_15bg8_259",_V="_buttonDisabled_15bg8_264",Ae={footer:LF,tabContainer:$F,contentContainer:BF,contentOpen:zF,contentClosed:UF,contentWrapper:HF,tabButton:GF,tabButtonActive:qF,tabButtonInactive:YF,tabIcon:FF,multiSelectOverlay:VF,multiSelectText:KF,handContainer:WF,cardPile:XF,deckCard:QF,deckCardText:JF,discardCard:ZF,discardCardText:eV,pileLabel:tV,handSection:nV,handCardsContainer:rV,handCardsWrapper:aV,handCardsWrapperGap:iV,cardWrapper:sV,droneContainer:oV,droneGrid:lV,logContainer:cV,logHeader:uV,logTitle:dV,downloadButton:fV,logTableWrapper:pV,logTable:hV,logTableHeader:mV,logTableHeaderCell:gV,logTableDebugHeader:yV,logTableRow:vV,logTableCell:bV,logTableCellBold:xV,logTableCellGray:SV,logTableCellCyan:CV,logTableCellYellow:AV,logTableCellGrayText:EV,logTableCellDebug:wV,logTableCellCenter:PV,aiDecisionButton:TV,buttonDanger:DV,buttonSuccess:OV,buttonDisabled:_V};function NV({gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,selectedCard:r,turnPhase:i,mandatoryAction:s,handleCardClick:l,getLocalPlayerId:u,isMyTurn:f,hoveredCardId:d,setHoveredCardId:m,setIsViewDiscardModalOpen:g,setIsViewDeckModalOpen:y,optionalDiscardCount:b,handleRoundStartDraw:S,checkBothPlayersHandLimitComplete:C,handleConfirmMandatoryDiscard:E,handleRoundStartDiscard:w,setConfirmationModal:T,passInfo:D,validCardTargets:O,gameEngine:j,opponentPlayerState:N}){const k=u(),B=f(),F=D[`${k}Passed`];K("HAND_VIEW","HandView render:",{handSize:t.hand.length,energy:t.energy});const M=225,R=12,z=6,W=t.hand.length>z,Z=z*M+(z-1)*R,Q=t.hand.length;let I=0;return Q>1&&W&&(I=(Z-M)/(Q-1)-M),p.jsxs("div",{className:Ae.handContainer,children:[p.jsxs("div",{className:Ae.cardPile,children:[p.jsx("div",{onClick:()=>g(!0),className:Ae.discardCard,children:p.jsx("p",{className:Ae.discardCardText,children:t.discardPile.length})}),p.jsx("p",{className:Ae.pileLabel,children:"Discard Pile"})]}),p.jsx("div",{className:Ae.handSection,children:p.jsx("div",{className:Ae.handCardsContainer,style:W?{width:`${Z}px`}:{},children:p.jsx("div",{className:`${Ae.handCardsWrapper} ${W?"":Ae.handCardsWrapperGap}`,children:t.hand.map((G,ie)=>{const le=d?t.hand.findIndex(Oe=>Oe.instanceId===d):-1,$=t.energy>=G.cost,q=!G.targeting||j.getValidTargets(k,null,G,t,N).length>0,V=i==="action"&&B&&!F&&$&&q,te=i==="optionalDiscard"&&b<n.totals.discardLimit,ve=V||te;K("CARD_PLAY",`Card ${ie}: ${G.name}`,{instanceId:G.instanceId,hasInstanceId:G.instanceId!==void 0,instanceIdType:typeof G.instanceId,id:G.id,cost:G.cost,targeting:G.targeting,conditions:{energy:t.energy,cardCost:G.cost}});let Se="",Ee={zIndex:ie};return W&&le!==-1&&(ie<le?Se="transform -translate-x-12":ie>le?Se="transform translate-x-12":(Se="",Ee.zIndex=50)),W&&ie>0&&(Ee.marginLeft=`${I}px`),p.jsx("div",{className:`${Ae.cardWrapper} ${Se}`,style:Ee,onMouseEnter:()=>m(G.instanceId),onMouseLeave:()=>m(null),children:p.jsx($a,{card:G,isSelected:r?.instanceId===G.instanceId,isPlayable:ve,isMandatoryTarget:s?.type==="discard",onClick:s?.type==="discard"?Oe=>T({type:"discard",target:Oe,onConfirm:()=>E(Oe),onCancel:()=>T(null),text:`Are you sure you want to discard ${Oe.name}?`}):i==="optionalDiscard"?Oe=>T({type:"discard",target:Oe,onConfirm:()=>w(Oe),onCancel:()=>T(null),text:`Are you sure you want to discard ${Oe.name}?`}):l})},G.instanceId||`${G.id}-${ie}`)})})})}),p.jsxs("div",{className:Ae.cardPile,children:[p.jsx("div",{onClick:()=>y(!0),className:Ae.deckCard,children:p.jsx("p",{className:Ae.deckCardText,children:t.deck.length})}),p.jsx("p",{className:Ae.pileLabel,children:"Deck"})]})]})}function jV({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:f,isMyTurn:d,turn:m,passInfo:g,validCardTargets:y}){return p.jsx("div",{className:Ae.droneContainer,children:p.jsx("div",{className:Ae.droneGrid,children:t.map((b,S)=>{const E=(m===1?e.initialDeploymentBudget+e.energy:e.energy)>=b.class,w=n?.type==="Upgrade"&&y.some(T=>T.id===b.name);return p.jsx(vi,{drone:b,onClick:s,isSelected:l&&l.name===b.name,isSelectable:r==="deployment"&&d()&&!g[`${f()}Passed`]&&E&&!i||w,deployedCount:e.deployedDroneCounts[b.name]||0,appliedUpgrades:e.appliedUpgrades[b.name]||[],isUpgradeTarget:w,onViewUpgrades:(T,D)=>u({droneName:T.name,upgrades:D})},S)})})})}function kV({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return p.jsxs("div",{className:Ae.logContainer,children:[p.jsxs("div",{className:Ae.logHeader,children:[p.jsx("h3",{className:Ae.logTitle,children:"Game Log"}),p.jsx("button",{onClick:t,className:Ae.downloadButton,children:"Download CSV"})]}),p.jsx("div",{className:Ae.logTableWrapper,children:p.jsxs("table",{className:Ae.logTable,children:[p.jsx("thead",{className:Ae.logTableHeader,children:p.jsxs("tr",{children:[p.jsx("th",{className:Ae.logTableHeaderCell,children:"Rnd"}),p.jsx("th",{className:Ae.logTableHeaderCell,children:"Timestamp (UTC)"}),p.jsx("th",{className:Ae.logTableHeaderCell,children:"Player"}),p.jsx("th",{className:Ae.logTableHeaderCell,children:"Action"}),p.jsx("th",{className:Ae.logTableHeaderCell,children:"Source"}),p.jsx("th",{className:Ae.logTableHeaderCell,children:"Target"}),p.jsx("th",{className:Ae.logTableHeaderCell,children:"Outcome"}),p.jsx("th",{className:Ae.logTableDebugHeader,children:"Debug Source"}),p.jsx("th",{className:Ae.logTableHeaderCell})]})}),p.jsx("tbody",{children:e.map((r,i)=>p.jsxs("tr",{className:Ae.logTableRow,children:[p.jsx("td",{className:Ae.logTableCellBold,children:r.round}),p.jsx("td",{className:Ae.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),p.jsx("td",{className:Ae.logTableCellCyan,children:r.player}),p.jsx("td",{className:Ae.logTableCellYellow,children:r.actionType}),p.jsx("td",{className:Ae.logTableCell,children:r.source}),p.jsx("td",{className:Ae.logTableCell,children:r.target}),p.jsx("td",{className:Ae.logTableCellGrayText,children:r.outcome}),p.jsx("td",{className:Ae.logTableCellDebug,children:r.debugSource}),p.jsx("td",{className:Ae.logTableCellCenter,children:r.aiDecisionContext&&p.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:Ae.aiDecisionButton,title:"Show AI Decision Logic",children:""})})]},i)).reverse()})]})})]})}function MV({gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,sortedLocalActivePool:r,gameLog:i,footerView:s,isFooterOpen:l,multiSelectState:u,selectedCard:f,turnPhase:d,mandatoryAction:m,handleFooterButtonClick:g,handleCardClick:y,cancelCardSelection:b,downloadLogAsCSV:S,getLocalPlayerId:C,isMyTurn:E,hoveredCardId:w,setHoveredCardId:T,setIsViewDiscardModalOpen:D,setIsViewDeckModalOpen:O,optionalDiscardCount:j,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:k,handleToggleDroneSelection:B,selectedDrone:F,setViewUpgradesModal:M,handleConfirmMandatoryDiscard:R,handleRoundStartDiscard:z,setConfirmationModal:W,turn:Z,passInfo:Q,validCardTargets:I,gameEngine:G,opponentPlayerState:ie,setAiDecisionLogToShow:le}){return p.jsxs("footer",{className:Ae.footer,children:[p.jsxs("div",{className:Ae.tabContainer,children:[p.jsx("button",{onClick:()=>g("hand"),className:`${Ae.tabButton} ${l&&s==="hand"?Ae.tabButtonActive:Ae.tabButtonInactive}`,children:p.jsxs("span",{className:Ae.tabIcon,children:[l&&s==="hand"&&p.jsx(cu,{size:14}),"Hand (",t.hand.length,"/",n.totals.handLimit,")"]})}),p.jsx("button",{onClick:()=>g("drones"),className:`${Ae.tabButton} ${l&&s==="drones"?Ae.tabButtonActive:Ae.tabButtonInactive}`,children:p.jsxs("span",{className:Ae.tabIcon,children:[l&&s==="drones"&&p.jsx(cu,{size:14}),"Drones"]})}),p.jsx("button",{onClick:()=>g("log"),className:`${Ae.tabButton} ${l&&s==="log"?Ae.tabButtonActive:Ae.tabButtonInactive}`,children:p.jsxs("span",{className:Ae.tabIcon,children:[l&&s==="log"&&p.jsx(cu,{size:14}),"Log (",i.length,")"]})})]}),p.jsx("div",{className:`${Ae.contentContainer} ${l?Ae.contentOpen:Ae.contentClosed}`,children:p.jsxs("div",{className:Ae.contentWrapper,children:[u&&p.jsxs("div",{className:Ae.multiSelectOverlay,children:[p.jsxs("span",{className:Ae.multiSelectText,children:[u.phase==="select_source_lane"&&"Reposition: Select a source lane",u.phase==="select_drones"&&`Select Drones (${u.selectedDrones.length} / ${u.maxSelection})`,u.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),p.jsx("button",{onClick:$=>{$.stopPropagation(),b()},className:Ae.buttonDanger,children:"Cancel"}),u.phase==="select_drones"&&p.jsx("button",{onClick:$=>{$.stopPropagation(),u.selectedDrones.length>0},disabled:u.selectedDrones.length===0,className:`${Ae.buttonSuccess} ${u.selectedDrones.length===0?Ae.buttonDisabled:""}`,children:"Confirm Drones"})]}),s==="hand"&&p.jsx("div",{className:Ae.viewContent,children:p.jsx(NV,{gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,selectedCard:f,turnPhase:d,mandatoryAction:m,handleCardClick:y,getLocalPlayerId:C,isMyTurn:E,hoveredCardId:w,setHoveredCardId:T,setIsViewDiscardModalOpen:D,setIsViewDeckModalOpen:O,optionalDiscardCount:j,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:k,handleConfirmMandatoryDiscard:R,handleRoundStartDiscard:z,setConfirmationModal:W,passInfo:Q,validCardTargets:I,gameEngine:G,opponentPlayerState:ie})}),s==="drones"&&p.jsx("div",{className:Ae.viewContent,children:p.jsx(jV,{localPlayerState:t,sortedLocalActivePool:r,selectedCard:f,turnPhase:d,mandatoryAction:m,handleToggleDroneSelection:B,selectedDrone:F,setViewUpgradesModal:M,getLocalPlayerId:C,isMyTurn:E,turn:Z,passInfo:Q,validCardTargets:I})}),s==="log"&&p.jsx("div",{className:Ae.viewContent,children:p.jsx(kV,{gameLog:i,downloadLogAsCSV:S,setAiDecisionLogToShow:le})})]})})]})}const IV=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:f})=>p.jsxs(p.Fragment,{children:[e&&p.jsx(yj,{modalData:e,onClose:()=>t(null)}),n&&p.jsx(bj,{selectionData:n,onConfirm:async(d,m)=>{await l(d,m,u()),r(null)},onCancel:()=>{r(null),f()}}),i&&p.jsx(vj,{selectionData:i,onConfirm:async(d,m)=>{await l(d,m,u()),s(null)},onCancel:()=>{s(null),f()}})]}),RV=({visible:e,start:t,end:n,lineRef:r})=>e?p.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[p.jsx("defs",{children:p.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:p.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),p.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,LV=({top:e,left:t,size:n="large"})=>{const[r,i]=A.useState([]),s={small:{particleCount:8,radiusMin:30,radiusMax:50,particleSizeMin:4,particleSizeMax:8,duration:500},large:{particleCount:15,radiusMin:60,radiusMax:100,particleSizeMin:8,particleSizeMax:16,duration:800}},l=s[n]||s.large;return A.useEffect(()=>{const u=[];for(let f=0;f<l.particleCount;f++){const d=Math.PI*2*f/l.particleCount,m=l.radiusMin+Math.random()*(l.radiusMax-l.radiusMin),g=l.particleSizeMin+Math.random()*(l.particleSizeMax-l.particleSizeMin);u.push({id:f,x:Math.cos(d)*m,y:Math.sin(d)*m,size:g,opacity:1})}i(u)},[l.particleCount,l.radiusMin,l.radiusMax,l.particleSizeMin,l.particleSizeMax]),p.jsx("div",{style:{position:"fixed",top:`${e}px`,left:`${t}px`,pointerEvents:"none",zIndex:9999},children:r.map(u=>p.jsx("div",{style:{position:"absolute",width:`${u.size}px`,height:`${u.size}px`,borderRadius:"50%",backgroundColor:"#ff6b00",boxShadow:"0 0 10px #ff6b00","--tx":`${u.x}px`,"--ty":`${u.y}px`,animation:`explosionParticle ${l.duration}ms ease-out forwards`,animationDelay:"0ms"}},u.id))})},$V=()=>{const e=Math.random()>.5;return{width:`${180+Math.random()*40}%`,height:`${60+Math.random()*40}%`,gradientAngle:e?120+Math.random()*30:-60+Math.random()*30,colorIntensity:{r:4+Math.random()*10,g:8+Math.random()*16,b:24+Math.random()*20},opacity:.5+Math.random()*.4,scale:1+(Math.random()*.2-.1),position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},BV=()=>{const e=Math.random()>.5;return{position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},zV=({id:e,properties:t})=>{const n=`rgb(${t.colorIntensity.r} ${t.colorIntensity.g} ${t.colorIntensity.b})`,r=t.position.top!==void 0?{top:t.position.top,left:t.position.left}:{bottom:t.position.bottom,right:t.position.right};return p.jsx("div",{className:"absolute",style:{width:t.width,height:t.height,...r,transform:`rotate(${t.rotation}deg) scale(${t.scale})`,background:`linear-gradient(${t.gradientAngle}deg, ${n} 0%, transparent 100%)`,opacity:t.opacity,transition:"all 8s ease-in-out",willChange:"transform"}})},Cj=()=>{const[e,t]=A.useState([]);return A.useEffect(()=>{const n=3+Math.floor(Math.random()*3),r=Array.from({length:n},(i,s)=>({id:s,properties:$V()}));t(r)},[]),A.useEffect(()=>{if(e.length===0)return;const n=setInterval(()=>{t(r=>{const i=Math.floor(Math.random()*r.length);return r.map((s,l)=>{if(l===i){const u=BV();return{...s,properties:{...s.properties,position:u.position,rotation:u.rotation}}}return s})})},1e4);return()=>clearInterval(n)},[e.length]),p.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",style:{zIndex:-1},children:e.map(n=>p.jsx(zV,{id:n.id,properties:n.properties},n.id))})},UV=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const f=n!=="local";return p.jsxs("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:[p.jsx(Cj,{}),p.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine relative z-10",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:f?"Opponent Thinking":"AI Thinking"})]})},HV=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:s})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return p.jsx(gs,{title:"Deployment Complete",text:u,onClose:s,children:p.jsx("div",{className:"flex justify-center mt-6",children:p.jsx("button",{onClick:s,className:"btn-continue",children:"Continue to Action Phase"})})})},GV=({show:e,onContinue:t})=>e?p.jsx(gs,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:p.jsx("div",{className:"flex justify-center mt-6",children:p.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,qV=(e,t)=>{const[n,r]=A.useState([]),i=A.useCallback((s,l=null,u="large")=>{const f=Le.createExplosionEffect(s);let d=l;if(!d){const m=e.current[s];d=v0(m,t.current)}if(d){const m=`${f.timestamp}-${Math.random()}`;K("ANIMATIONS"," [EXPLOSION] Adding explosion to state:",{top:d.y,left:d.x}),r(g=>[...g,{id:m,top:d.y,left:d.x,size:u}]),setTimeout(()=>{r(g=>g.filter(y=>y.id!==m))},f.duration)}else console.warn(" [EXPLOSION] No position found, explosion not triggered")},[e,t]);return{explosions:n,triggerExplosion:i}};class YV{constructor(t){this.gameStateManager=t,this.isBlocking=!1,this.visualHandlers=new Map,this.animations={DRONE_ATTACK_START:{duration:500,type:"DRONE_FLY",config:{trail:!0,easing:"easeInOut",isReturn:!1}},DRONE_RETURN:{duration:0,type:"DRONE_FLY",config:{trail:!1,easing:"easeOut",isReturn:!0}},CARD_REVEAL:{duration:1e3,type:"CARD_REVEAL_EFFECT",config:{}},SHIP_ABILITY_REVEAL:{duration:1e3,type:"SHIP_ABILITY_REVEAL_EFFECT",config:{}},CARD_VISUAL:{duration:5e3,type:"CARD_VISUAL_EFFECT",config:{}},PASS_NOTIFICATION:{duration:1e3,type:"PASS_NOTIFICATION_EFFECT",config:{}},PHASE_ANNOUNCEMENT:{duration:1500,type:"PHASE_ANNOUNCEMENT_EFFECT",config:{}},TELEPORT_IN:{duration:600,type:"TELEPORT_EFFECT",config:{revealAt:.7}},TELEPORT_OUT:{duration:600,type:"TELEPORT_EFFECT",config:{}},SHIELD_DAMAGE:{duration:2e3,type:"FLASH_EFFECT",config:{color:"#00bcd4",intensity:.6}},HULL_DAMAGE:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"small"}},DRONE_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DAMAGED:{duration:2e3,type:"SHAKE_EFFECT",config:{intensity:10}},HEAL_EFFECT:{duration:1400,type:"HEAL_EFFECT",config:{}}}}registerVisualHandler(t,n){this.visualHandlers.set(t,n)}async executeAnimations(t,n="unknown"){const r=this.gameStateManager?.getState()?.gameMode;if(K("ANIMATIONS"," [EXECUTE] AnimationManager.executeAnimations() START:",{effectCount:t?.length||0,effects:t?.map(i=>i.animationName)}),t.forEach((i,s)=>{K("ANIMATIONS",`   [EXECUTE] Animation ${s+1}/${t.length}: ${i.animationName}`,{type:this.animations[i.animationName]?.type,duration:this.animations[i.animationName]?.duration})}),!(!t||t.length===0)){K("ANIMATIONS",` [EXECUTE] PLAYING ${t.length} ANIMATION(S) - Source: ${n} - Mode: ${r}`),this.setBlocking(!0);try{const i=["SHIELD_DAMAGE","HULL_DAMAGE","DRONE_DESTROYED","SECTION_DESTROYED","SECTION_DAMAGED","HEAL_EFFECT"];let s=0;for(;s<t.length;){const l=t[s];if(i.includes(l.animationName)){const u=[];for(;s<t.length&&i.includes(t[s].animationName);)u.push(t[s]),s++;K("ANIMATIONS"," [ANIMATION DEBUG] Playing damage effects in parallel:",u.map(f=>f.animationName)),await Promise.all(u.map(async f=>{const d=this.animations[f.animationName];if(!d){console.warn(` [ANIMATION DEBUG] Unknown animation: ${f.animationName}`);return}const m=this.visualHandlers.get(d.type);if(!m){console.warn(` [ANIMATION DEBUG] No visual handler for: ${d.type}`);return}return new Promise(g=>{m({...f.payload,config:d.config,onComplete:g}),setTimeout(g,d.duration)})})),K("ANIMATIONS"," [ANIMATION DEBUG] All damage effects completed")}else{K("ANIMATIONS"," [ANIMATION DEBUG] Processing sequential effect:",l.animationName);const u=this.animations[l.animationName];if(!u){console.warn(` [ANIMATION DEBUG] Unknown animation: ${l.animationName}`),s++;continue}const f=this.visualHandlers.get(u.type);if(!f){console.warn(` [ANIMATION DEBUG] No visual handler for: ${u.type}`),s++;continue}await new Promise(d=>{f({...l.payload,config:u.config,onComplete:d}),setTimeout(d,u.duration)}),K("ANIMATIONS"," [ANIMATION DEBUG] Animation completed:",l.animationName),s++}}}finally{await new Promise(i=>setTimeout(i,200)),this.setBlocking(!1)}}}setBlocking(t){this.isBlocking=t,this.gameStateManager.emit("animationStateChange",{blocking:t})}}const FV=({position:e,color:t="#00bcd4",intensity:n=.6,onComplete:r})=>{const[i,s]=A.useState(0);return A.useEffect(()=>{if(!e){r?.();return}const l=50,u=100,f=150;setTimeout(()=>s(n),10),setTimeout(()=>s(0),l+u),setTimeout(()=>{r?.()},l+u+f)},[n,r,e]),e?p.jsx("div",{style:{position:"fixed",left:e.left,top:e.top,width:e.width,height:e.height,backgroundColor:t,opacity:i,borderRadius:"8px",pointerEvents:"none",zIndex:9997,transition:`opacity ${i>0?"50ms":"150ms"} ease-${i>0?"in":"out"}`}}):null},VV=({visualType:e,startPos:t,endPos:n,duration:r=800,onComplete:i})=>{const[s,l]=A.useState(!1);if(A.useEffect(()=>{if(!t||!n){i?.();return}l(!0);const u=setTimeout(()=>{l(!1),i?.()},r);return()=>clearTimeout(u)},[e,t,n,r,i]),!s||!t||!n)return null;switch(e){case"LASER_BLAST":return p.jsx(KV,{startPos:t,endPos:n,duration:r});case"ENERGY_WAVE":return p.jsx(WV,{startPos:t,endPos:n,duration:r});case"NUKE_BLAST":return p.jsx(XV,{endPos:n,duration:r});default:return null}},KV=({startPos:e,endPos:t,duration:n})=>{const r=Math.atan2(t.y-e.y,t.x-e.x),i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return p.jsx("div",{style:{position:"fixed",left:e.x,top:e.y,width:i,height:"4px",backgroundColor:"#ff0000",boxShadow:"0 0 10px #ff0000, 0 0 20px #ff0000",transformOrigin:"0 50%",transform:`rotate(${r}rad)`,zIndex:9998,pointerEvents:"none",animation:`laserFade ${n}ms ease-out forwards`}})},WV=({startPos:e,duration:t})=>p.jsx("div",{style:{position:"fixed",left:e.x-20,top:e.y-20,width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#00ff00",opacity:.7,zIndex:9998,pointerEvents:"none",animation:`energyPulse ${t}ms ease-out forwards`}}),XV=({endPos:e,duration:t})=>p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{position:"fixed",left:e.x-150,top:e.y-150,width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,100,0,0.9) 0%, rgba(255,50,0,0.6) 40%, rgba(255,200,0,0.3) 70%, transparent 100%)",zIndex:9998,pointerEvents:"none",animation:`nukeExpand ${t}ms ease-out forwards`}}),p.jsx("div",{style:{position:"fixed",left:e.x-200,top:e.y-200,width:"400px",height:"400px",borderRadius:"50%",backgroundColor:"#ffffff",opacity:.8,zIndex:9997,pointerEvents:"none",animation:`nukeFlash ${t}ms ease-out forwards`}})]});function QV(e,t,n,r,i,s,l,u,f,d,m,g,y,b,S,C,E,w,T){A.useEffect(()=>{r(),i();const D=new YV(e),O=(N,k,B,F)=>{if(F==="drone")return t.current[B]||null;if(F==="section"){const M=e.getLocalPlayerId(),R=N===M?"local":"opponent";return n.current[`${R}-${B}`]||null}return null};D.registerVisualHandler("DRONE_FLY",N=>{const{droneId:k,sourcePlayer:B,sourceLane:F,targetId:M,targetPlayer:R,targetLane:z,targetType:W,config:Z,attackValue:Q,onComplete:I}=N;if(Z.isReturn){I?.();return}const G=O(B,F,k,"drone"),ie=O(R,z,M,W);if(!G||!ie){console.warn(" [LASER DEBUG] Missing DOM elements, skipping laser",{hasDrone:!!G,hasTarget:!!ie,sourcePlayer:B,sourceLane:F,targetPlayer:R,targetType:W,targetId:M}),I?.();return}const le=l(G,u.current),$=l(ie,u.current),q=`laser-${k}-${Date.now()}`;E(V=>[...V,{id:q,startPos:le,endPos:$,attackValue:Q||1,duration:500,onComplete:()=>{E(te=>te.filter(ve=>ve.id!==q)),I?.()}}])}),D.registerVisualHandler("EXPLOSION_EFFECT",N=>{const{targetId:k,targetPlayer:B,targetLane:F,targetType:M,config:R,onComplete:z}=N,W=O(B,F,k,M);if(W){const Z=l(W,u.current);s(k,Z,R?.size||"large")}else console.warn(" [EXPLOSION DEBUG] Target element not found:",{targetId:k,targetPlayer:B,targetLane:F,targetType:M});z?.()}),D.registerVisualHandler("FLASH_EFFECT",N=>{const{targetId:k,targetPlayer:B,targetLane:F,targetType:M,config:R,onComplete:z}=N,W=O(B,F,k,M);if(!W){console.warn(" [FLASH DEBUG] Target element not found:",{targetId:k,targetPlayer:B,targetLane:F,targetType:M}),z?.();return}const Z=W.getBoundingClientRect(),Q=`flash-${k}-${Date.now()}`;m(I=>[...I,{id:Q,position:{left:Z.left,top:Z.top,width:Z.width,height:Z.height},color:R.color,intensity:R.intensity,onComplete:()=>{m(G=>G.filter(ie=>ie.id!==Q)),z?.()}}])}),D.registerVisualHandler("HEAL_EFFECT",N=>{const{targetId:k,targetPlayer:B,targetLane:F,targetType:M,healAmount:R,onComplete:z}=N,W=O(B,F,k,M);if(!W){console.warn(" [HEAL DEBUG] Target element not found:",{targetId:k,targetPlayer:B,targetLane:F,targetType:M,droneRefsKeys:Object.keys(t.current),sectionRefsKeys:Object.keys(n.current)}),z?.();return}const Z=W.getBoundingClientRect(),Q=`heal-${k}-${Date.now()}`;g(I=>[...I,{id:Q,position:{left:Z.left,top:Z.top,width:Z.width,height:Z.height},healAmount:R,onComplete:()=>{g(G=>G.filter(ie=>ie.id!==Q)),z?.()}}])}),D.registerVisualHandler("CARD_VISUAL_EFFECT",N=>{const{visualType:k,sourcePlayer:B,targetId:F,targetPlayer:M,targetLane:R,targetType:z,duration:W,onComplete:Z}=N,Q=u.current?.getBoundingClientRect();if(!Q){Z?.();return}const I=e.getLocalPlayerId(),G=B===I?Q.bottom-100:Q.top+100,ie=Q.left+Q.width/2;let le;if(z==="lane")if(M==="center")le={x:Q.left+Q.width/2,y:Q.top+Q.height/2};else{const q=B===I?M:M===I?I:M,Se=(e.getState()[q]?.dronesOnBoard||{})[R]||[];if(Se.length>0){const Ee=Se[0],Oe=t.current[Ee.id];if(Oe){const ke=Oe.getBoundingClientRect();le={x:ke.left+ke.width/2,y:ke.top+ke.height/2}}else le={x:Q.left+Q.width/2,y:Q.top+Q.height/2}}else{const Ee=R==="lane1"?0:R==="lane2"?1:2,Oe=q===I?Q.bottom-200:Q.top+200;le={x:Q.left+Q.width/4*(Ee+1),y:Oe}}}else{const q=O(M,R,F,z);if(!q){console.warn(" [CARD VISUAL DEBUG] Target element not found:",{targetId:F,targetPlayer:M,targetLane:R,targetType:z}),Z?.();return}const V=q.getBoundingClientRect();le={x:V.left+V.width/2,y:V.top+V.height/2}}const $=`cardvisual-${Date.now()}`;y(q=>[...q,{id:$,visualType:k||"LASER_BLAST",startPos:{x:ie,y:G},endPos:le,duration:W||800,onComplete:()=>{y(V=>V.filter(te=>te.id!==$)),Z?.()}}])}),D.registerVisualHandler("CARD_REVEAL_EFFECT",N=>{const{cardData:k,actingPlayerId:B,onComplete:F}=N;K("ANIMATIONS"," [CARD REVEAL DEBUG] CARD_REVEAL_EFFECT handler called:",{cardName:k?.name});const M=e.getLocalPlayerId(),R=B===M,z=`cardreveal-${Date.now()}`;b(W=>[...W,{id:z,card:k,label:R?"You Played":"Opponent Played",onComplete:()=>{b(Z=>Z.filter(Q=>Q.id!==z)),F?.()}}])}),D.registerVisualHandler("SHIP_ABILITY_REVEAL_EFFECT",N=>{const{abilityName:k,actingPlayerId:B,onComplete:F}=N,M=e.getLocalPlayerId();if(B===M)F?.();else{const z=`shipability-${Date.now()}`;S(W=>[...W,{id:z,abilityName:k,label:"Opponent Used",onComplete:()=>{S(Z=>Z.filter(Q=>Q.id!==z)),F?.()}}])}}),D.registerVisualHandler("PHASE_ANNOUNCEMENT_EFFECT",async N=>{const{phaseText:k,phaseName:B,firstPlayerId:F,onComplete:M}=N;await new Promise(W=>setTimeout(W,300));let R=null;if(F){const W=e.getLocalPlayerId();R=F===W?"You Go First":"Opponent Goes First"}K("ANIMATIONS"," [PHASE ANNOUNCEMENT DEBUG] PHASE_ANNOUNCEMENT_EFFECT handler called:",{localPlayerId:e.getLocalPlayerId()});const z=`phaseannouncement-${Date.now()}`;C(W=>[...W,{id:z,phaseText:k,subtitle:R,onComplete:()=>{C(Z=>Z.filter(Q=>Q.id!==z)),M?.()}}])}),D.registerVisualHandler("PASS_NOTIFICATION_EFFECT",N=>{const{passingPlayerId:k,onComplete:B}=N,F=e.getLocalPlayerId(),M=k===F,R=`passnotif-${Date.now()}`;T(z=>[...z,{id:R,label:M?"You Passed":"Opponent Passed",onComplete:()=>{T(W=>W.filter(Z=>Z.id!==R)),B?.()}}])}),D.registerVisualHandler("SHAKE_EFFECT",N=>{const{targetId:k,config:B,onComplete:F}=N,M=t.current[k];M?(M.classList.add("animate-shake-damage"),setTimeout(()=>{M.classList.remove("animate-shake-damage"),F?.()},B?.duration||500)):F?.()}),D.registerVisualHandler("TELEPORT_EFFECT",N=>{const{targetId:k,laneId:B,playerId:F,onComplete:M}=N,R=t.current[k];if(!R){console.warn(" [TELEPORT DEBUG] Drone element not found - placeholder may not have rendered yet:",k),M?.();return}const z=l(R,u.current),W=e.getLocalPlayerId(),Q=F===W?"#00ffff":"#ec4899",I=`teleport-${k}-${Date.now()}`;w(G=>[...G,{id:I,top:z.y,left:z.x,color:Q,duration:600,onComplete:()=>{w(ie=>ie.filter(le=>le.id!==I)),M?.()}}])});const j=e.subscribe(N=>{N.type==="animationStateChange"&&d(N.payload.blocking)});return e.actionProcessor.setAnimationManager(D),j},[r,i,e,s,t,n,l,u,f,d,m,g,y,b,C,E,w,T])}const JV=({droneData:e,startPos:t,endPos:n,config:r,onComplete:i})=>{const[s,l]=A.useState(t),[u,f]=A.useState([]),d=A.useRef(),m=A.useRef(Date.now());return A.useEffect(()=>{const g=r.duration||800,y=()=>{const b=Date.now()-m.current,S=Math.min(b/g,1),C=S<.5?2*S*S:-1+(4-2*S)*S,E=t.x+(n.x-t.x)*C,w=t.y+(n.y-t.y)*C;l({x:E,y:w}),r.trail&&f(T=>[...T.slice(-8),{id:Date.now(),x:E,y:w}]),S<1?d.current=requestAnimationFrame(y):i?.()};return d.current=requestAnimationFrame(y),()=>{d.current&&cancelAnimationFrame(d.current)}},[t,n,r,i]),p.jsxs(p.Fragment,{children:[u.map((g,y)=>p.jsx("div",{style:{position:"fixed",left:g.x+35,top:g.y+60,width:"10px",height:"10px",borderRadius:"50%",background:e.owner==="player1"?"#00bcd4":"#e91e63",opacity:.3+y*.05,filter:"blur(2px)",pointerEvents:"none",zIndex:9998}},g.id)),p.jsx("div",{style:{position:"fixed",left:s.x,top:s.y,width:"90px",height:"135px",zIndex:9999,pointerEvents:"none",transform:`scale(${r.isReturn?1:1.1})`,transition:"transform 0.3s"},children:p.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"}})})]})},ZV=({position:e,healAmount:t,onComplete:n})=>{const[r,i]=A.useState([]);if(A.useEffect(()=>{if(!e||!t){n?.();return}const u=t===1?"small":t<=3?"medium":"large",f={small:{particleCount:12,spread:40,glowSize:30,duration:1e3},medium:{particleCount:18,spread:60,glowSize:50,duration:1200},large:{particleCount:24,spread:80,glowSize:70,duration:1400}}[u],d=[];for(let g=0;g<f.particleCount;g++){const y=Math.PI*2*g/f.particleCount+(Math.random()-.5)*.5,b=f.spread*(.5+Math.random()*.5);d.push({id:g,x:Math.cos(y)*b,y:Math.sin(y)*b,delay:g/f.particleCount*300,floatDistance:40+Math.random()*30,symbol:Math.random()>.3?"+":""})}i(d);const m=setTimeout(()=>{n?.()},f.duration);return()=>clearTimeout(m)},[t,n,e]),!e||!t)return null;const s=t===1?"small":t<=3?"medium":"large",l={small:{particleCount:12,spread:40,glowSize:30,duration:1e3},medium:{particleCount:18,spread:60,glowSize:50,duration:1200},large:{particleCount:24,spread:80,glowSize:70,duration:1400}}[s];return p.jsxs("div",{style:{position:"fixed",left:`${e.left+e.width/2}px`,top:`${e.top+e.height/2}px`,width:`${l.spread*2}px`,height:`${l.spread*2}px`,transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9998},children:[p.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:`${l.glowSize}px`,height:`${l.glowSize}px`,transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(34, 197, 94, 0.8) 0%, rgba(34, 197, 94, 0.4) 50%, rgba(34, 197, 94, 0) 70%)",animation:`healPulse ${l.duration}ms ease-out forwards`,borderRadius:"50%"}}),r.map(u=>p.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",color:"#22c55e",fontSize:s==="large"?"18px":s==="medium"?"16px":"14px",fontWeight:"bold",textShadow:"0 0 4px rgba(34, 197, 94, 0.8)",display:"flex",alignItems:"center",justifyContent:"center","--start-x":`${u.x}px`,"--start-y":`${u.y}px`,"--float-distance":`${u.floatDistance}px`,animation:`healFloat ${l.duration}ms ease-out ${u.delay}ms forwards`,opacity:0},children:u.symbol},u.id)),p.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:`${l.glowSize*1.5}px`,height:`${l.glowSize*1.5}px`,transform:"translate(-50%, -50%)",border:"2px solid rgba(34, 197, 94, 0.6)",borderRadius:"50%",animation:`healPulse ${l.duration}ms ease-out 100ms forwards`,boxShadow:"0 0 15px rgba(34, 197, 94, 0.4)"}}),s!=="small"&&r.slice(0,Math.floor(l.particleCount/3)).map((u,f)=>p.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"8px",height:"8px",backgroundColor:"#22c55e",borderRadius:"50%",boxShadow:"0 0 8px rgba(34, 197, 94, 0.8)","--start-x":`${u.x*.7}px`,"--start-y":`${u.y*.7}px`,"--float-distance":`${u.floatDistance*.8}px`,animation:`healFloat ${l.duration}ms ease-out ${u.delay+150}ms forwards, healSparkle ${l.duration}ms ease-in-out ${u.delay+150}ms infinite`,opacity:0}},`sparkle-${f}`))]})},eK=({card:e,label:t,onComplete:n})=>{const[r,i]=A.useState(!1);return A.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),p.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),p.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[p.jsx("h2",{className:`
            text-4xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
            card-reveal-label
            ${r?"card-reveal-label-show":""}
          `,children:t}),p.jsx("div",{className:`
            transform scale-110 card-reveal-card
            ${r?"":"card-reveal-dissolve"}
          `,children:p.jsx($a,{card:e,isPlayable:!1})}),p.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            card-reveal-scanline
            ${r?"card-reveal-scanline-active":""}
          `})]})]})},tK=({abilityName:e,label:t,onComplete:n})=>{const[r,i]=A.useState(!1);return A.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),p.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),p.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[p.jsx("h2",{className:`
            text-5xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
          `,children:t}),p.jsx("div",{className:`
            px-8 py-4 rounded-xl
            bg-gradient-to-r from-purple-900/80 via-pink-900/80 to-purple-900/80
            border-2 border-purple-400
            shadow-[0_0_30px_rgba(168,85,247,0.6)]
            transition-all duration-300
            ${r?"scale-100":"scale-90"}
          `,children:p.jsx("p",{className:"text-3xl font-bold text-white text-center",children:e})}),p.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            transition-all duration-1000
            ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-full"}
          `})]})]})},nK=({label:e,onComplete:t})=>{const[n,r]=A.useState(!1);return A.useEffect(()=>{requestAnimationFrame(()=>{r(!0)});const i=setTimeout(()=>{r(!1);const s=setTimeout(()=>{t?.()},300);return()=>clearTimeout(s)},1e3);return()=>clearTimeout(i)},[t]),p.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${n?"opacity-100":"opacity-0"}
      `,children:[p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),p.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${n?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[p.jsx("h2",{className:`
            text-5xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-red-300 via-red-400 to-red-300
            animate-pulse
            drop-shadow-[0_0_20px_rgba(239,68,68,0.8)]
          `,children:e}),p.jsx("div",{className:`
            absolute top-1/2 left-0 w-full h-1 pointer-events-none
            ${n?"animate-horizontalScan":""}
          `,style:{background:"linear-gradient(to right, rgba(239, 68, 68, 0) 0%, rgba(239, 68, 68, 0.8) 50%, rgba(239, 68, 68, 0) 100%)",boxShadow:"0 0 10px rgba(239, 68, 68, 0.8), 0 0 20px rgba(239, 68, 68, 0.4)",transform:"translateY(-50%)"}})]}),p.jsx("style",{children:`
        @keyframes horizontalScan {
          0% {
            transform: translateX(-100%) translateY(-50%);
            opacity: 0;
          }
          10% {
            opacity: 1;
          }
          90% {
            opacity: 1;
          }
          100% {
            transform: translateX(100%) translateY(-50%);
            opacity: 0;
          }
        }

        .animate-horizontalScan {
          animation: horizontalScan 800ms ease-in-out;
        }
      `})]})},rK=({phaseText:e,subtitle:t,onComplete:n})=>{const[r,i]=A.useState(!1);return A.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1500);return()=>clearTimeout(s)},[n]),p.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),p.jsxs("div",{className:`
          relative flex flex-col items-center
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[p.jsx("h1",{className:`
            text-6xl font-orbitron font-black uppercase tracking-widest text-center
            phase-announcement-text
            ${r?"phase-announcement-shine":""}
          `,style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:e}),t&&p.jsx("p",{className:`
              text-2xl font-orbitron font-medium uppercase tracking-wider text-center
              text-cyan-300/80 mt-4
              transition-all duration-300
              ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
            `,children:t}),p.jsx("div",{className:`
            mt-8 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent
            transition-all duration-500
            ${r?"w-96 opacity-100":"w-0 opacity-0"}
          `}),p.jsx("div",{className:`
            absolute inset-0 pointer-events-none overflow-hidden
          `,children:p.jsx("div",{className:`
              absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent
              phase-announcement-scanline
              ${r?"phase-announcement-scanline-active":""}
            `})})]})]})},aK=({startPos:e,endPos:t,attackValue:n=1,duration:r=500,onComplete:i})=>{const[s,l]=A.useState(0);A.useEffect(()=>{setTimeout(()=>l(1),50);const y=r*.7;setTimeout(()=>l(0),y);const b=setTimeout(()=>{i?.()},r);return()=>{clearTimeout(b)}},[r,i]);const u=t.x-e.x,f=t.y-e.y,d=Math.sqrt(u*u+f*f),m=Math.atan2(f,u)*(180/Math.PI),g=Math.max(3,2+n*1.5);return p.jsxs("div",{style:{position:"fixed",left:`${e.x}px`,top:`${e.y}px`,width:`${d}px`,height:`${g}px`,transformOrigin:"0 50%",transform:`rotate(${m}deg)`,pointerEvents:"none",zIndex:9998,opacity:s,transition:`opacity ${r*.15}ms ease-in-out`},children:[p.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1) 10%, rgba(255, 0, 0, 1) 90%, rgba(255, 0, 0, 0))",boxShadow:`0 0 ${g*2}px rgba(255, 0, 0, 0.8), 0 0 ${g*4}px rgba(255, 0, 0, 0.4)`,animation:`laserPulse ${r}ms ease-in-out`}}),p.jsx("div",{style:{position:"absolute",width:"100%",height:"40%",top:"30%",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 20%, rgba(255, 255, 255, 0.9) 80%, rgba(255, 255, 255, 0))",filter:"blur(1px)"}})]})},iK=({top:e,left:t,duration:n=800,color:r="#00ffff",onComplete:i})=>{const[s,l]=A.useState([]);return A.useEffect(()=>{const u=[];for(let m=0;m<16;m++){const g=Math.PI*2*m/16;u.push({id:m,angle:g,delay:m/16*200})}l(u);const d=setTimeout(()=>{i?.()},n);return()=>clearTimeout(d)},[n,i]),p.jsxs("div",{style:{position:"fixed",left:`${t}px`,top:`${e}px`,width:"120px",height:"180px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999},children:[p.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out forwards`},children:p.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out forwards`,boxShadow:`0 0 20px ${r}`}})}),p.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out ${n*.2}ms forwards`},children:p.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out ${n*.2}ms forwards`,boxShadow:`0 0 15px ${r}`}})}),s.map(u=>p.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"6px",height:"6px",backgroundColor:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`,"--angle":`${u.angle}rad`,animation:`teleportParticle ${n}ms ease-in ${u.delay}ms forwards`}},u.id)),p.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"40px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${r}cc 0%, ${r}00 70%)`,animation:`teleportGlow ${n}ms ease-in-out forwards`}})]})},oP=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:f,endGame:d,processAction:m,gameStateManager:g,p2pManager:y}=Ai(),{getEffectiveStats:b,getEffectiveShipStats:S,gameDataService:C}=lh(),E=vR.features.aiHandDebug,[w,T]=A.useState(!1),[D,O]=A.useState(!1),[j,N]=A.useState([]),[k,B]=A.useState([]),[F,M]=A.useState([]),[R,z]=A.useState([]),[W,Z]=A.useState([]),[Q,I]=A.useState([]),[G,ie]=A.useState([]),[le,$]=A.useState([]),[q,V]=A.useState([]),[te,ve]=A.useState([]),[Se,Ee]=A.useState(!1),[Oe,ke]=A.useState(null),[xe,Me]=A.useState(null),[Ne,ye]=A.useState(null),[Pt,qe]=A.useState(null),[Gt,qt]=A.useState(!1),[Tt,_r]=A.useState(!1),[Nr,zn]=A.useState(null),[ra,Ca]=A.useState(!1),[Di,Kn]=A.useState(!1),[Ao,aa]=A.useState(!1),[fn,jn]=A.useState(!1),[_e,tn]=A.useState(null),[ql,Eo]=A.useState(null),[Oi,_i]=A.useState(null),[Wn,jr]=A.useState(null),[Aa,wo]=A.useState([]),[Po,Ni]=A.useState([]),[L,oe]=A.useState(!1),[de,ce]=A.useState(null),[pe,be]=A.useState(null),[$e,pn]=A.useState(null),[Dt,vt]=A.useState("drones"),[Ye,Ve]=A.useState(!0),[Nt,Un]=A.useState([]),[ia,To]=A.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[ch,Do]=A.useState({}),[Ot,kr]=A.useState(null),[Mr,Ba]=A.useState([]),[hn,bt]=A.useState(null),[za,sa]=A.useState(null),[Bt,cr]=A.useState(null),[Ua,Oo]=A.useState([]),[ji,Ir]=A.useState(null),[oa,Ea]=A.useState(null),[Ze,Xn]=A.useState(null),[qu,Ha]=A.useState(null),[Yl,_o]=A.useState(null),[uh,Fl]=A.useState(null),[zt,Ga]=A.useState(null),[dh,ys]=A.useState(!1),[Vl,Rr]=A.useState(null),[No,An]=A.useState(null),[Lr,jo]=A.useState(null),[vs,ur]=A.useState(0),[ko,bs]=A.useState(0),[qa,Yu]=A.useState(null),[Fu,Kl]=A.useState(null),[Vu,Ex]=A.useState(null),[Wl,xs]=A.useState(null),[Ku,Wu]=A.useState(null),[Ya,Fa]=A.useState(0),Ss=A.useRef(null),Va=A.useRef({}),Xl=A.useRef({}),dr=A.useRef(null),En=A.useRef(!1),Cs=A.useRef(null),{explosions:As,triggerExplosion:la}=qV(Va,dr);QV(g,Va,Xl,s,l,la,v0,dr,N,Ee,B,M,z,Z,I,ie,$,V,ve),A.useEffect(()=>{Hf.initialize(g,g.actionProcessor,()=>e.gameMode!=="local",Cr)},[]),A.useEffect(()=>{if(e.gameMode==="guest")return;const H=ge=>{const{type:he,phase:Ce,playerId:Ue,data:Fe}=ge;if(he==="bothPlayersComplete"){const{phase:At}=ge;Nr===At&&zn(null)}if(he==="phaseTransition"){const{newPhase:At,previousPhase:fr,firstPlayerResult:$o}=ge;Nr===fr&&zn(null),At==="deploymentComplete"&&qt(!0)}},ne=Hf.subscribe(H);return()=>{ne()}},[i,n,ke,Nr,e.gameMode]);const{turnPhase:et,turn:ca,currentPlayer:Ka,firstPlayerOfRound:Es,firstPasserOfPreviousRound:Ql,firstPlayerOverride:fh,passInfo:lt,winner:nn,unplacedSections:Jl,shieldsToAllocate:ws,opponentShieldsToAllocate:ph,gameLog:Ps,placedSections:Xu,testMode:Ts}=e,[Zl,hh]=A.useState(Ka),mh=A.useRef(lt),gh=A.useRef(et),yh=A.useRef(nn);A.useEffect(()=>{mh.current=lt},[lt]),A.useEffect(()=>{gh.current=et},[et]),A.useEffect(()=>{yh.current=nn},[nn]);const Re=s(),tt=l(),Ds=u(),Mo=f();if(!Re||!tt)return p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:p.jsx("div",{children:"Initializing game board..."})});A.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]);const Qu=A.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);A.useEffect(()=>{if(!i())return;const H=ge=>{if(ge.type==="PHASE_COMPLETED"){const{phase:he}=ge.data||ge}};return y.subscribe(H)},[i,y]);const Io=Re?S(Re,Ds):null,ec=tt?S(tt,Mo):null,Ju=A.useMemo(()=>Re?Object.values(Re.dronesOnBoard).flat().length:0,[Re?.dronesOnBoard]),Zu=A.useMemo(()=>tt?Object.values(tt.dronesOnBoard).flat().length:0,[tt?.dronesOnBoard]),vh=A.useMemo(()=>e.commitments?.droneSelection?.[r()]?.drones||[],[e.commitments?.droneSelection,r]),bh=A.useMemo(()=>[...Re.activeDronePool].sort((H,ne)=>H.class!==ne.class?H.class-ne.class:H.name.localeCompare(ne.name)),[Re.activeDronePool]);A.useMemo(()=>Re?Object.keys(Re.shipSections).some(H=>Re.shipSections[H].allocatedShields<C.getEffectiveSectionMaxShields(H,Re,Ds)):!1,[Re.shipSections,Ds,C]);const tc=["commitment","destroyDrone","addShield","resetShields"],rt=A.useCallback(async(H,ne)=>{if(e.gameMode==="guest"){if(tc.includes(H))return y.sendActionToHost(H,ne),{success:!0,hostProcessing:!0};g.trackOptimisticAction(H,ne),K("ANIMATIONS"," [GUEST OPTIMISTIC] Tracked action for deduplication:",{totalTracked:g.optimisticActions?.length||0});const he=await m(H,ne);return y.sendActionToHost(H,ne),he}return await m(H,ne)},[e.gameMode,m,y,g]);A.useCallback(H=>{if(i()){const ne={type:"PHASE_COMPLETED",data:{phase:H}};y.sendData(ne)}},[i,y]),A.useCallback(async()=>{pe&&!pe.card.effect.goAgain?await rt("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):pe&&pe.card.effect.goAgain&&!nn&&await rt("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),be(null)},[m,n,r,pe,nn]);const xh=A.useCallback(async()=>{await rt("resetShields",{playerId:n()})},[rt,n]),Sh=A.useCallback(()=>{jn(!0)},[]),ed=A.useCallback(async()=>{const H=await rt("commitment",{playerId:n(),phase:"allocateShields",actionData:{committed:!0}});K("COMMITMENTS"," Shield allocation commitment result:",{hasData:!!H.data,bothPlayersComplete:H.data?.bothPlayersComplete}),((e.commitments||{}).allocateShields||{})[r()]?.completed||zn("allocateShields")},[rt,n,e.commitments,r]);A.useEffect(()=>{const{validAbilityTargets:H,validCardTargets:ne}=Le.calculateAllValidTargets(Ot,hn,Ze,Bt,Re,tt);Ba(H),Oo(ne),Ot&&(cr(null),bt(null))},[Ot,hn,Bt,Re,tt,Ze]);const Os=()=>{Ot&&(kr(null),tn(null))},Hn=()=>{cr(null),Xn(null)},Qn=()=>{_e&&tn(null),Ot&&kr(null),hn&&bt(null),(Bt||Ze)&&(cr(null),Xn(null)),Lr&&Wa(),oa&&Ea(null),za&&sa(null),ji&&Ir(null),xe&&Me(null)},Ro=A.useCallback(async H=>{if(En.current){console.warn("Attack already in progress. Aborting duplicate call.");return}En.current=!0;try{await new Promise(ge=>setTimeout(ge,250));const ne=await rt("attack",{attackDetails:H});if(ne?.needsInterceptionDecision){K("COMBAT"," [APP] Interception decision needed, showing modal..."),jr(ne.interceptionData),En.current=!1;return}}catch(ne){console.error("Error in resolveAttack:",ne)}finally{En.current=!1}},[la,m,n,r]),td=A.useCallback(async(H,ne,ge)=>{try{const he=await rt("ability",{droneId:ne.id,abilityIndex:ne.abilities.findIndex(Ce=>Ce.name===H.name),targetId:ge?.id||null});Os()}catch(he){console.error("Error in resolveAbility:",he),Os()}},[m,n]),Ch=A.useCallback(async(H,ne,ge)=>{const he=await rt("shipAbility",{ability:H,sectionName:ne,targetId:ge?.id||null,playerId:n()});if(he.mandatoryAction){Ga(he.mandatoryAction),vt("hand"),Ve(!0),bt(null),sa(null);return}if(he.requiresShieldReallocation){bt(null),sa(null);return}return bt(null),sa(null),he},[m,n]),nc=A.useCallback(async(H,ne,ge,he=null)=>{if(ge===r()){let Ue="",Fe="";if(ne)if(ne.name){if(Ue=ne.name,ne.id&&ne.owner){const At=ne.owner===n()?Re:tt;for(const[fr,$o]of Object.entries(At.dronesOnBoard))if($o.some(ua=>ua.id===ne.id)){Fe=fr.replace("lane","Lane ");break}}}else ne.id.startsWith("lane")?(Ue=`Lane ${ne.id.slice(-1)}`,Fe=`Lane ${ne.id.slice(-1)}`):Ue=ne.id.replace(/([A-Z])/g," $1").replace(/^./,At=>At.toUpperCase());be({card:H,targetName:Ue,targetLane:Fe})}const Ce=await rt("cardPlay",{card:H,targetId:ne?.id||null,playerId:ge});if(Ce.needsCardSelection){if(Ce.needsCardSelection.type==="single_move"||Ce.needsCardSelection.type==="multi_move"){Xn({card:Ce.needsCardSelection.card,phase:Ce.needsCardSelection.phase,selectedDrones:[],sourceLane:null});return}An({...Ce.needsCardSelection,onConfirm:async Ue=>{await Ah(Ue,Ce.needsCardSelection,H,ne,ge,he,null),An(null)},onCancel:()=>{An(null),ge===n()&&(Hn(),Ir(null))}});return}return ge===n()&&(Hn(),Ir(null)),Ce},[m,n,Re,tt]),Ah=A.useCallback(async(H,ne,ge,he,Ce,Ue,Fe=null)=>{await m("searchAndDrawCompletion",{card:ge,selectedCards:H,selectionData:ne,playerId:Ce,playerStatesWithEnergyCosts:Fe}),Ce===n()&&(Hn(),Ir(null))},[m,n,Hn]),Eh=A.useCallback(async(H,ne,ge,he)=>{await rt("movementCompletion",{card:H,movementType:"multi_move",drones:ne,fromLane:ge,toLane:he,playerId:n()}),Xn(null),Hn()},[m,n]),rc=A.useCallback(async(H,ne,ge,he)=>{await rt("movementCompletion",{card:H,movementType:"single_move",drones:[ne],fromLane:ge,toLane:he,playerId:n()}),Xn(null),Hn()},[m,n]),_s=H=>{Ye?Dt===H?Ve(!1):vt(H):(Ve(!0),vt(H))};A.useEffect(()=>{const{validAbilityTargets:H,validCardTargets:ne}=Le.calculateAllValidTargets(Ot,hn,Ze,Bt,Re,tt);Ba(H),Oo(ne),Ot&&(cr(null),bt(null))},[Ot,hn,Bt,Re,tt,Ze]),A.useEffect(()=>{nn&&!ra&&Ca(!0)},[nn,ra]),A.useEffect(()=>{if(et==="action"){const H=Le.calculatePotentialInterceptors(_e,Re,tt,Qu());wo(H)}else wo([])},[_e,et,Re,tt,Le,Ds,Mo]),A.useEffect(()=>{if(et==="action"&&_e&&!_e.isExhausted){const[H]=Object.entries(Re.dronesOnBoard).find(([ne,ge])=>ge.some(he=>he.id===_e.id))||[];if(H){const ge=(tt.dronesOnBoard[H]||[]).filter(he=>b(he,H).keywords.has("GUARDIAN")).map(he=>he.id);Ni(ge)}else Ni([])}else Ni([])},[_e,et,Re,tt,b]),A.useEffect(()=>{const H=n();if(e.interceptionPending){const{attackingPlayerId:ne,defendingPlayerId:ge,attackDetails:he,interceptors:Ce}=e.interceptionPending;ne===H?oe(!0):ge===H&&jr({attackDetails:he,interceptors:Ce})}else oe(!1),jr(null)},[e.interceptionPending,n]),A.useEffect(()=>{if(e.lastInterception){const{interceptor:H,timestamp:ne}=e.lastInterception;ce({droneId:H.id,timestamp:ne})}},[e.lastInterception]),A.useEffect(()=>{Eo(null)},[_e]),A.useEffect(()=>{if(_e&&!Ot&&et==="action"){const H=v0(Va.current[_e.id],dr.current);H&&To({visible:!0,start:H,end:{x:H.x,y:H.y}})}else To(H=>({...H,visible:!1}))},[_e,et,Ot]),A.useEffect(()=>{const H=ge=>{if(ia.visible&&Ss.current&&dr.current){const he=dr.current.getBoundingClientRect(),Ce=ge.clientX-he.left,Ue=ge.clientY-he.top;Ss.current.setAttribute("x2",Ce),Ss.current.setAttribute("y2",Ue)}},ne=dr.current;return ne?.addEventListener("mousemove",H),()=>{ne?.removeEventListener("mousemove",H)}},[ia.visible]),A.useEffect(()=>{nn&&En.current&&(En.current=!1)},[nn,et,Ka]),A.useEffect(()=>{e.gameMode==="guest"&&g.emit("render_complete")},[e,g]),A.useEffect(()=>{if(e.gameMode!=="guest")return;const H=Cs.current;if(H===null){Cs.current=et;return}if(H!==et){const ne={newPhase:et,previousPhase:H,gameStage:e.gameStage,roundNumber:e.roundNumber};(he=>{{const{newPhase:Ce,previousPhase:Ue}=he;Nr===Ue&&zn(null),Ce==="deploymentComplete"&&qt(!0)}})(ne),Cs.current=et}},[et,e.gameStage,e.roundNumber,e.gameMode,Nr]);const wh=()=>{e.gameMode==="local"&&Cr.cleanup(),d(),En.current=!1,tn(null),ke(null),kr(null),Ba([]),Ga(null),ys(!1),Rr(null),cr(null),Oo([]),Ir(null),Ca(!1)},nd=async H=>{const{turnPhase:ne}=e;K("SHIELD_CLICKS"," handleAllocateShield called",{localPlayerId:n()}),ne==="allocateShields"?await rt("addShield",{sectionName:H,playerId:n()}):await rt("reallocateShields",{action:"add",sectionName:H,playerId:n()})},rd=async H=>{if(ko<=0||Re.shipSections[H].allocatedShields<=0)return;(await rt("reallocateShields",{action:"remove",sectionName:H,playerId:n()})).success&&(bs(he=>he-1),ur(he=>he+1))},ad=async H=>{if(vs<=0)return;(await rt("reallocateShields",{action:"add",sectionName:H,playerId:n()})).success&&ur(ge=>ge-1)},id=()=>{Kl(JSON.parse(JSON.stringify(Re.shipSections))),jo("adding")},sd=async()=>{Lr==="removing"?(await rt("reallocateShields",{action:"restore",originalShipSections:qa,playerId:n()}),bs(Wl.ability.effect.value.maxShields),ur(0)):Lr==="adding"&&(await rt("reallocateShields",{action:"restore",originalShipSections:Fu,playerId:n()}),ur(ko+vs))},Wa=async()=>{await rt("reallocateShields",{action:"restore",originalShipSections:qa,playerId:n()}),jo(null),bs(0),ur(0),Yu(null),Kl(null),xs(null)},Ph=()=>{sa({ability:Wl.ability,sectionName:Wl.sectionName,target:null})},Th=async()=>{const H=n(),ne=await rt("acknowledgeDeploymentComplete",{playerId:H});ne.success&&(qt(!1),ne.data?.bothPlayersComplete||zn("deploymentComplete"))},Dh=H=>{if(Lr){Lr==="removing"?rd(H):Lr==="adding"&&ad(H);return}et==="allocateShields"&&nd(H)},od=H=>{lt[n()+"Passed"]||(_e&&_e.name===H.name?tn(null):(tn(H),kr(null),Hn()))},ac=async(H,ne=_e)=>{const ge=ne;try{K("DEPLOYMENT"," App.jsx: Deploying drone:",{droneName:ge?.name,droneObject:ge,lane:H,playerId:n(),turn:ca});const he=await rt("deployment",{droneData:ge,laneId:H,playerId:n(),turn:ca});he.success?tn(null):ke({title:he.error,text:he.message,isBlocking:!0})}catch(he){console.error("Error executing deployment:",he),ke({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},Ns=H=>{if(!(!_e||Ka!==n()||lt[n()+"Passed"])){if(Qn(),ca===1){const ne=Le.validateDeployment(Re,_e,ca,Ju,Io);if(!ne.isValid){ke({title:ne.reason,text:ne.message,isBlocking:!0});return}const{budgetCost:ge,energyCost:he}=ne;if(he>0){Me({lane:H,budgetCost:ge,energyCost:he,drone:_e});return}}ac(H)}},js=async()=>{lt[`${n()}Passed`]||(Qn(),await rt("playerPass",{playerId:n(),playerName:Re.name,turnPhase:et,passInfo:lt,opponentPlayerId:r()}))},Oh=(H,ne,ge)=>{if(H.stopPropagation(),et!=="action"||Ka!==n()||lt[n()+"Passed"])return;const he=ge.cost||{};if(ne.isExhausted&&he.exhausts!==!1){ke({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(he.energy&&Re.energy<he.energy){ke({title:"Not Enough Energy",text:`This ability costs ${he.energy} energy, but you only have ${Re.energy}.`,isBlocking:!0});return}if(ge.targeting?.type==="LANE"&&ge.targeting?.location==="SAME_LANE"){const Ce=Le.getLaneOfDrone(ne.id,Re);if(Ce){Ea({ability:ge,drone:ne,target:{id:Ce,owner:n()}});return}}Ot&&Ot.drone.id===ne.id?Os():(Qn(),kr({drone:ne,ability:ge}),tn(ne))},Lo=(H,ne,ge)=>{if(H.stopPropagation(),!(et!=="action"||!t()||lt[`${n()}Passed`])){if(Re.energy<ge.cost.energy){ke({title:"Not Enough Energy",text:`This ability costs ${ge.cost.energy} energy, but you only have ${Re.energy}.`,isBlocking:!0});return}hn?.ability.id===ge.id?bt(null):ge.targeting?(Qn(),bt({sectionName:ne.name,ability:ge})):ge.effect.type==="REALLOCATE_SHIELDS"?(Qn(),jo("removing"),bs(ge.effect.value.maxShields),ur(0),Yu(JSON.parse(JSON.stringify(Re.shipSections))),xs({ability:ge,sectionName:ne.name})):(Qn(),sa({ability:ge,sectionName:ne.name,target:null}))}},ld=(H,ne,ge)=>{if(H.stopPropagation(),K("COMBAT",`--- handleTokenClick triggered for ${ne.name} (isPlayer: ${ge}) ---`),Ze&&Ze.phase==="select_drones"&&ge){const{selectedDrones:he,maxSelection:Ce}=Ze;he.some(Fe=>Fe.id===ne.id)?Xn(Fe=>({...Fe,selectedDrones:Fe.selectedDrones.filter(At=>At.id!==ne.id)})):he.length<Ce&&Xn(Fe=>({...Fe,selectedDrones:[...Fe.selectedDrones,ne]}));return}if(Mr.some(he=>he.id===ne.id)||Ua.some(he=>he.id===ne.id)){ic(ne,"drone",ge);return}if(et==="action"&&t()&&_e&&!_e.isExhausted&&!ge){K("COMBAT","Attacker selected:",_e.name,`(ID: ${_e.id})`),K("COMBAT","Target clicked:",ne.name,`(ID: ${ne.id})`);const[he]=Object.entries(Re.dronesOnBoard).find(([Ue,Fe])=>Fe.some(At=>At.id===_e.id))||[],[Ce]=Object.entries(tt.dronesOnBoard).find(([Ue,Fe])=>Fe.some(At=>At.id===ne.id))||[];if(he&&Ce&&he===Ce){const Ue={attacker:_e,target:ne,targetType:"drone",lane:he,attackingPlayer:n()};Ro(Ue),tn(null)}else ke({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(Ze&&Ze.phase==="select_drones"&&ge){const{selectedDrones:he,maxSelection:Ce}=Ze;he.some(Fe=>Fe.id===ne.id)?Xn(Fe=>({...Fe,selectedDrones:Fe.selectedDrones.filter(At=>At.id!==ne.id)})):he.length<Ce&&Xn(Fe=>({...Fe,selectedDrones:[...Fe.selectedDrones,ne]}));return}if(zt?.type==="destroy"&&ge){Rr({type:"destroy",target:ne,onConfirm:()=>Nh(ne),onCancel:()=>Rr(null),text:`Are you sure you want to destroy your ${ne.name}?`});return}if(ge&&et==="action"&&t()&&!lt[`${n()}Passed`]){if(ne.isExhausted)return;_e?.id===ne.id?(K("COMBAT","Action: Deselecting drone",ne.name),tn(null)):(K("COMBAT","Action: Selecting drone",ne.name),Qn(),tn(ne));return}qe(ne)},ic=(H,ne,ge)=>{if(hn&&Mr.some(he=>he.id===H.id)){sa({ability:hn.ability,sectionName:hn.sectionName,target:H});return}if(Ot&&Mr.some(he=>he.id===H.id)){td(Ot.ability,Ot.drone,H);return}if(Bt&&Ua.some(he=>he.id===H.id)){const he=ge?n():r();Ir({card:Bt,target:{...H,owner:he}});return}if(et==="action"&&t()&&_e&&!_e.isExhausted&&!ge&&ne==="section"){K("COMBAT","Attacker selected:",_e.name,`(ID: ${_e.id})`),K("COMBAT","Target clicked:",H.name);const[he]=Object.entries(Re.dronesOnBoard).find(([Ce,Ue])=>Ue.some(Fe=>Fe.id===_e.id))||[];if(he){const Ce=tt.dronesOnBoard[he];if(Ce&&Ce.some(Fe=>b(Fe,he).keywords.has("GUARDIAN")&&!Fe.isExhausted))ke({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{const Fe={attacker:_e,target:H,targetType:"section",lane:he,attackingPlayer:n()};Ro(Fe),tn(null)}}else ke({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}ne==="drone"&&qe(H)},sc=(H,ne,ge)=>{if(H.stopPropagation(),Ot&&Ot.ability.targeting.type==="LANE"){const he=ge?n():r();if(Mr.some(Ce=>Ce.id===ne&&Ce.owner===he)){Ea({ability:Ot.ability,drone:Ot.drone,target:{id:ne,owner:he}});return}}if(Ze&&ge&&Ua.some(he=>he.id===ne)){const{phase:he,sourceLane:Ce,selectedDrones:Ue}=Ze;if(he==="select_source_lane"){Xn(Fe=>({...Fe,phase:"select_drones",sourceLane:ne}));return}if(he==="select_destination_lane"){Eh(Ze.card,Ue,Ce,ne);return}}if(Ze&&Ze.card.effect.type==="SINGLE_MOVE"&&Ze.phase==="select_destination"&&ge){Ua.some(he=>he.id===ne)&&rc(Ze.card,Ze.selectedDrone,Ze.sourceLane,ne);return}if(Bt&&Bt.targeting.type==="LANE"){const he=ge?n():r();if(Ua.some(Ce=>Ce.id===ne&&Ce.owner===he)){Ir({card:Bt,target:{id:ne,owner:he}});return}}if(Bt){Hn();return}if(Ot){Os();return}if(et==="deployment"&&ge)Ns(ne);else if(et==="action"&&ge&&_e){const[he]=Object.entries(Re.dronesOnBoard).find(([Fe,At])=>At.some(fr=>fr.id===_e.id))||[];if(!he)return;const Ce=parseInt(he.replace("lane",""),10),Ue=parseInt(ne.replace("lane",""),10);Math.abs(Ce-Ue)===1?ye({drone:_e,from:he,to:ne}):ke({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},oc=async H=>{const ne=n(),ge=t(),he=lt[`${ne}Passed`];if(K("CARD_PLAY",` handleCardClick called: ${H.name}`,{cardId:H.id,cardCost:H.cost,gameMode:e.gameMode,playerEnergy:Re.energy,hasEnoughEnergy:Re.energy>=H.cost}),et!=="action"){K("CARD_PLAY",` Card click rejected - wrong phase: ${et}`,{card:H.name});return}if(!ge){K("CARD_PLAY"," Card click rejected - not player's turn",{card:H.name,currentPlayer:e.currentPlayer});return}if(he){K("CARD_PLAY"," Card click rejected - player has passed",{card:H.name});return}if(Re.energy<H.cost){K("CARD_PLAY"," Card click rejected - not enough energy",{card:H.name,cardCost:H.cost,playerEnergy:Re.energy});return}if(H.effect.type==="MULTI_MOVE"||H.effect.type==="SINGLE_MOVE"){K("CARD_PLAY",` Movement card - processing: ${H.name}`,{effectType:H.effect.type}),Ze&&Ze.card.instanceId===H.instanceId?Hn():(Qn(),await nc(H,null,n()));return}if(Bt?.instanceId===H.instanceId)K("CARD_PLAY",` Card deselected: ${H.name}`),Hn();else if(H.name==="System Sabotage"){K("CARD_PLAY"," System Sabotage card - getting targets",{card:H.name});const Ce=Le.getValidTargets(n(),null,H,Re,tt);K("CARD_PLAY",` System Sabotage targets found: ${Ce.length}`,{}),Qn(),Ha({card:H,targets:Ce,opponentState:tt})}else if(H.type==="Upgrade"){K("CARD_PLAY",` Upgrade card - getting targets: ${H.name}`);const Ce=Le.getValidTargets(n(),null,H,Re,tt);K("CARD_PLAY",` Upgrade targets found: ${Ce.length}`,{}),Ce.length>0?(Qn(),_o({card:H,targets:Ce})):ke({title:"No Valid Targets",text:`There are no drone types that can accept the '${H.name}' upgrade right now.`,isBlocking:!0})}else H.targeting?(K("CARD_PLAY",` Targeted card - waiting for target selection: ${H.name}`,{targeting:H.targeting}),Qn(),cr(H)):(K("CARD_PLAY",` Non-targeted card - showing confirmation: ${H.name}`),Qn(),Ir({card:H,target:null}))},cd=async H=>{const ne=zt,ge=ne.count-1,he=ge<=0,Ce={playerId:n(),cardsToDiscard:[H],isMandatory:!0};if(he&&ne.fromAbility&&ne.abilityName&&(Ce.abilityMetadata={abilityName:ne.abilityName,sectionName:ne.sectionName,actingPlayerId:ne.actingPlayerId}),await rt("optionalDiscard",Ce),Rr(null),he)if(Ga(null),ne.fromAbility){const Ue=n();await rt("turnTransition",{newPlayer:Ue==="player1"?"player2":"player1"})}else{const Ue=await rt("commitment",{playerId:n(),phase:"mandatoryDiscard",actionData:{completed:!0}});Ue.data&&!Ue.data.bothPlayersComplete&&zn("mandatoryDiscard")}else Ga(Ue=>({...Ue,count:ge}))},ud=async H=>{await rt("optionalDiscard",{playerId:n(),cardsToDiscard:[H],isMandatory:!1}),Fa(ne=>ne+1),Rr(null)},lc=async()=>{Fa(0),await rt("commitment",{playerId:n(),phase:"optionalDiscard",actionData:{completed:!0}}),((e.commitments||{}).optionalDiscard||{})[r()]?.completed||zn("optionalDiscard")},_h=()=>g.actionProcessor?.getPhaseCommitmentStatus("optionalDiscard")?.bothComplete||!1,Nh=async H=>{const ne=zt,ge=await rt("destroyDrone",{droneId:H.id,playerId:n()});if(!ge.success){console.error("Failed to destroy drone:",ge.error);return}const he=ne.count-1;if(he<=0){if(Zu>ec.totals.cpuLimit&&e.gameMode==="local"){const Fe=Object.values(tt.dronesOnBoard).flat().length-S(tt,Mo).totals.cpuLimit;for(let At=0;At<Fe;At++){const fr=Object.entries(tt.dronesOnBoard).flatMap(([da,uc])=>uc.map(dd=>({...dd,lane:da})));if(fr.length===0)break;const $o=Math.min(...fr.map(da=>da.class)),ua=fr.filter(da=>da.class===$o),cc=ua[Math.floor(Math.random()*ua.length)];await rt("destroyDrone",{droneId:cc.id,playerId:r()})}}Ga(null);const Ue=await rt("commitment",{playerId:n(),phase:"mandatoryDroneRemoval",actionData:{completed:!0}});Ue.data&&!Ue.data.bothPlayersComplete&&zn("mandatoryDroneRemoval")}else Ga(Ce=>({...Ce,count:he}));Rr(null)},jh=()=>{if(Ps.length===0){alert("The game log is empty.");return}const H=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],ne=Ps.map(Ue=>[Ue.round,Ue.player,Ue.actionType,Ue.source,Ue.target,Ue.outcome,Ue.debugSource||"N/A"].map(At=>`"${String(At).replace(/"/g,'""')}"`).join(",")),ge=[H.join(","),...ne].join(`
`),he=new Blob([ge],{type:"text/csv;charset=utf-8;"}),Ce=document.createElement("a");if(Ce.download!==void 0){const Ue=URL.createObjectURL(he);Ce.setAttribute("href",Ue),Ce.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Ce.style.visibility="hidden",document.body.appendChild(Ce),Ce.click(),document.body.removeChild(Ce)}};return p.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col relative",ref:dr,onClick:()=>{Os(),Hn()},children:[p.jsx(kF,{}),p.jsx(RV,{visible:ia.visible,start:ia.start,end:ia.end,lineRef:Ss}),As.map(H=>p.jsx(LV,{top:H.top,left:H.left,size:H.size},H.id)),j.map(H=>p.jsx(JV,{droneData:H.droneData,startPos:H.startPos,endPos:H.endPos,config:H.config,onComplete:H.onComplete},H.id)),k.map(H=>p.jsx(FV,{position:H.position,color:H.color,intensity:H.intensity,onComplete:H.onComplete},H.id)),F.map(H=>p.jsx(ZV,{position:H.position,healAmount:H.healAmount,onComplete:H.onComplete},H.id)),R.map(H=>p.jsx(VV,{visualType:H.visualType,startPos:H.startPos,endPos:H.endPos,duration:H.duration,onComplete:H.onComplete},H.id)),W.map(H=>p.jsx(eK,{card:H.card,label:H.label,onComplete:H.onComplete},H.id)),Q.map(H=>p.jsx(tK,{abilityName:H.abilityName,label:H.label,onComplete:H.onComplete},H.id)),G.map(H=>p.jsx(rK,{phaseText:H.phaseText,subtitle:H.subtitle,onComplete:H.onComplete},H.id)),te.map(H=>p.jsx(nK,{label:H.label,onComplete:H.onComplete},H.id)),le.map(H=>p.jsx(aK,{startPos:H.startPos,endPos:H.endPos,attackValue:H.attackValue,duration:H.duration,onComplete:H.onComplete},H.id)),q.map(H=>p.jsx(iK,{top:H.top,left:H.left,color:H.color,duration:H.duration,onComplete:H.onComplete},H.id)),Se&&p.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,cursor:"not-allowed",pointerEvents:"all",backgroundColor:"transparent"}}),p.jsx(MF,{localPlayerState:Re,opponentPlayerState:tt,localPlayerEffectiveStats:Io,opponentPlayerEffectiveStats:ec,turnPhase:et,turn:ca,passInfo:lt,firstPlayerOfRound:Es,shieldsToAllocate:ws,opponentShieldsToAllocate:ph,shieldsToRemove:ko,shieldsToAdd:vs,reallocationPhase:Lr,totalLocalPlayerDrones:Ju,totalOpponentPlayerDrones:Zu,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,currentPlayer:Ka,isMultiplayer:i,handlePlayerPass:js,handleExitGame:wh,handleResetShields:xh,handleConfirmShields:ed,handleCancelReallocation:Wa,handleResetReallocation:sd,handleContinueToAddPhase:id,handleConfirmReallocation:Ph,handleRoundStartDraw:lc,optionalDiscardCount:Ya,mandatoryAction:zt,multiSelectState:Ze,AI_HAND_DEBUG_MODE:E,setShowAiHandModal:T,onShowDebugModal:()=>O(!0),onShowOpponentDrones:Sh,testMode:Ts}),p.jsx(RF,{localPlayerState:Re,opponentPlayerState:tt,localPlacedSections:Ds,opponentPlacedSections:Mo,selectedCard:Bt,validCardTargets:Ua,abilityMode:Ot,validAbilityTargets:Mr,multiSelectState:Ze,turnPhase:et,reallocationPhase:Lr,shipAbilityMode:hn,hoveredTarget:ql,selectedDrone:_e,recentlyHitDrones:Nt,potentialInterceptors:Aa,potentialGuardians:Po,droneRefs:Va,sectionRefs:Xl,mandatoryAction:zt,gameEngine:Le,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:Qu,passInfo:lt,handleTargetClick:ic,handleLaneClick:sc,handleShipSectionClick:Dh,handleShipAbilityClick:Lo,handleTokenClick:ld,handleAbilityIconClick:Oh,setHoveredTarget:Eo,interceptedBadge:de}),p.jsx(MV,{gameMode:e.gameMode,localPlayerState:Re,localPlayerEffectiveStats:Io,sortedLocalActivePool:bh,gameLog:Ps,footerView:Dt,isFooterOpen:Ye,multiSelectState:Ze,selectedCard:Bt,turnPhase:et,mandatoryAction:zt,handleFooterButtonClick:_s,handleCardClick:oc,cancelCardSelection:Hn,downloadLogAsCSV:jh,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Oi,setHoveredCardId:_i,setIsViewDiscardModalOpen:aa,setIsViewDeckModalOpen:Kn,handleToggleDroneSelection:od,selectedDrone:_e,setViewUpgradesModal:Fl,handleConfirmMandatoryDiscard:cd,setConfirmationModal:Rr,turn:ca,passInfo:lt,validCardTargets:Ua,gameEngine:Le,opponentPlayerState:tt,setAiDecisionLogToShow:pn,optionalDiscardCount:Ya,handleRoundStartDraw:lc,handleRoundStartDiscard:ud,checkBothPlayersHandLimitComplete:_h}),Oe&&p.jsx(gs,{title:Oe.title,text:Oe.text,onClose:Oe.onClose===null?null:Oe.onClose||(()=>ke(null)),children:Oe.children}),p.jsx(HV,{show:Gt,firstPlayerOfRound:Es,localPlayerId:n(),localPlayerName:Re.name,opponentPlayerName:tt.name,onContinue:Th}),p.jsx(GV,{show:Tt,onContinue:()=>_r(!1)}),p.jsx(mj,{show:!!Nr,phase:Nr,opponentName:tt.name,roomCode:y.roomCode}),p.jsx(aj,{deploymentConfirmation:xe,show:!!xe,onCancel:()=>Me(null),onConfirm:async()=>{if(!xe)return;const{lane:H,drone:ne}=xe;Me(null),await ac(H,ne)}}),p.jsx(lj,{moveConfirmation:Ne,show:!!Ne,onCancel:()=>ye(null),onConfirm:async()=>{if(!Ne)return;const{drone:H,from:ne,to:ge}=Ne;await rt("move",{droneId:H.id,fromLane:ne,toLane:ge,playerId:n()}),ye(null),tn(null)}}),p.jsx(nj,{choiceData:Wn,show:!!Wn,onIntercept:async H=>{const ne={...Wn.attackDetails,interceptor:H};jr(null),setTimeout(async()=>{await Ro(ne)},400)},onDecline:async()=>{const H={...Wn.attackDetails,interceptor:null};jr(null),setTimeout(async()=>{await Ro(H)},400)},gameEngine:Le,turnPhase:et,isMyTurn:t,passInfo:lt,getLocalPlayerId:n,localPlayerState:Re,shipAbilityMode:hn,droneRefs:Va,mandatoryAction:zt}),p.jsx(rj,{show:L,opponentName:tt?.name||"Opponent"}),p.jsx(Sj,{isOpen:!!Pt,drone:Pt,onClose:()=>qe(null)}),pe&&p.jsx(dj,{report:pe,onClose:()=>be(null)}),p.jsx(fj,{decisionLog:$e,show:!!$e,onClose:()=>pn(null),getLocalPlayerId:n}),p.jsx(tj,{winner:nn,localPlayerId:n(),show:nn&&ra,onClose:()=>Ca(!1)}),p.jsx(cj,{mandatoryAction:zt,effectiveStats:Io,show:zt&&dh,onClose:()=>ys(!1)}),p.jsx(uj,{confirmationModal:Vl,show:!!Vl}),p.jsx(IV,{viewUpgradesModal:uh,setViewUpgradesModal:Fl,destroyUpgradeModal:qu,setDestroyUpgradeModal:Ha,upgradeSelectionModal:Yl,setUpgradeSelectionModal:_o,resolveCardPlay:nc,getLocalPlayerId:n,cancelCardSelection:Hn}),p.jsx(ij,{cardConfirmation:ji,show:!!ji,onCancel:()=>Ir(null),onConfirm:async()=>{const H=ji.card,ne=ji.target;Ir(null),setTimeout(async()=>{await nc(H,ne,n())},400)}}),p.jsx(sj,{abilityConfirmation:oa,show:!!oa,onCancel:()=>Ea(null),onConfirm:()=>{td(oa.ability,oa.drone,oa.target),Ea(null)}}),p.jsx(pj,{opponentPlayerState:tt,show:w,debugMode:E,onClose:()=>T(!1)}),p.jsx(gj,{isOpen:fn,onClose:()=>jn(!1),drones:vh}),p.jsx(hj,{show:D,onClose:()=>O(!1),gameStateManager:g,gameDataService:C}),p.jsx(dv,{isOpen:Di,onClose:()=>Kn(!1),cards:Re.deck,title:"Remaining Cards in Deck",shouldSort:!0}),p.jsx(dv,{isOpen:Ao,onClose:()=>aa(!1),cards:Re.discardPile,title:"Discard Pile",shouldSort:!1}),p.jsx(xj,{isOpen:!!No,onClose:No?.onCancel||(()=>An(null)),onConfirm:No?.onConfirm||(()=>{}),selectionData:No,mandatory:!0}),p.jsx(oj,{shipAbilityConfirmation:za,show:!!za,onCancel:()=>sa(null),onConfirm:async()=>await Ch(za.ability,za.sectionName,za.target)}),p.jsx(UV,{isVisible:!1,currentPlayer:Ka,gameMode:e.gameMode,roomCode:y.roomCode,lastAction:null,localPlayerState:Re,opponentPlayerState:tt,getLocalPlayerId:n})]})};function sK(){const{gameState:e}=Ai(),[t,n]=A.useState(!0),r=A.useRef(!1);if(A.useEffect(()=>{const l=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(l)},[]),A.useEffect(()=>{e.gameMode!=="guest"&&(r.current||(Hf.initialize(Ge,Ge.actionProcessor,()=>e.gameMode!=="local",Cr),Ge.setGameFlowManager(Hf),r.current=!0))},[e.gameMode]),A.useEffect(()=>{const l=u=>{if(u.ctrlKey&&u.key==="m"){u.preventDefault();const d=e.appState==="modalShowcase"?"menu":"modalShowcase";Ge.setState({appState:d})}};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[e.appState]),t)return p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:p.jsx("div",{children:"Loading EREMOS..."})});const i=!(e.appState==="inGame"&&!["droneSelection","placement"].includes(e.turnPhase));let s;switch(e.appState){case"menu":s=p.jsx(tA,{});break;case"lobby":s=p.jsx(SR,{});break;case"deckBuilder":s=p.jsx(jF,{});break;case"modalShowcase":s=p.jsx(wF,{});break;case"testingSetup":s=p.jsx(OF,{});break;case"inGame":switch(e.turnPhase){case"droneSelection":s=p.jsx(CR,{});break;case"deckSelection":s=p.jsx(yF,{});break;case"placement":s=p.jsx(vF,{});break;case"gameInitializing":s=p.jsx(oP,{});break;default:s=p.jsx(oP,{})}break;default:console.warn("Unknown app state:",e.appState,"defaulting to menu"),s=p.jsx(tA,{})}return p.jsxs("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(2, 6, 23, 1)",overflow:"auto"},children:[i&&p.jsx(Cj,{}),s]})}GM.createRoot(document.getElementById("root")).render(p.jsx(fv.StrictMode,{children:p.jsx(sK,{})}));export{on as G,K as d,yt as f};
