function YP(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ua(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fg={exports:{}},qc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA;function tM(){if(dA)return qc;dA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return qc.Fragment=t,qc.jsx=n,qc.jsxs=n,qc}var fA;function nM(){return fA||(fA=1,fg.exports=tM()),fg.exports}var m=nM(),pg={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pA;function rM(){if(pA)return Ge;pA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=g&&I[g]||I["@@iterator"],typeof I=="function"?I:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(I,F,V){this.props=I,this.context=F,this.refs=E,this.updater=V||b}C.prototype.isReactComponent={},C.prototype.setState=function(I,F){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,F,"setState")},C.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function T(){}T.prototype=C.prototype;function O(I,F,V){this.props=I,this.context=F,this.refs=E,this.updater=V||b}var N=O.prototype=new T;N.constructor=O,S(N,C.prototype),N.isPureReactComponent=!0;var j=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function k(I,F,V,se,ge,Ae){return V=Ae.ref,{$$typeof:e,type:I,key:F,ref:V!==void 0?V:null,props:Ae}}function L(I,F){return k(I.type,F,void 0,void 0,void 0,I.props)}function G(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function K(I){var F={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(V){return F[V]})}var z=/\/+/g;function Y(I,F){return typeof I=="object"&&I!==null&&I.key!=null?K(""+I.key):F.toString(36)}function ie(){}function Z(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(ie,ie):(I.status="pending",I.then(function(F){I.status==="pending"&&(I.status="fulfilled",I.value=F)},function(F){I.status==="pending"&&(I.status="rejected",I.reason=F)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function te(I,F,V,se,ge){var Ae=typeof I;(Ae==="undefined"||Ae==="boolean")&&(I=null);var ye=!1;if(I===null)ye=!0;else switch(Ae){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(I.$$typeof){case e:case t:ye=!0;break;case h:return ye=I._init,te(ye(I._payload),F,V,se,ge)}}if(ye)return ge=ge(I),ye=se===""?"."+Y(I,0):se,j(ge)?(V="",ye!=null&&(V=ye.replace(z,"$&/")+"/"),te(ge,F,V,"",function(xe){return xe})):ge!=null&&(G(ge)&&(ge=L(ge,V+(ge.key==null||I&&I.key===ge.key?"":(""+ge.key).replace(z,"$&/")+"/")+ye)),F.push(ge)),1;ye=0;var De=se===""?".":se+":";if(j(I))for(var Ke=0;Ke<I.length;Ke++)se=I[Ke],Ae=De+Y(se,Ke),ye+=te(se,F,V,Ae,ge);else if(Ke=y(I),typeof Ke=="function")for(I=Ke.call(I),Ke=0;!(se=I.next()).done;)se=se.value,Ae=De+Y(se,Ke++),ye+=te(se,F,V,Ae,ge);else if(Ae==="object"){if(typeof I.then=="function")return te(Z(I),F,V,se,ge);throw F=String(I),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ye}function U(I,F,V){if(I==null)return I;var se=[],ge=0;return te(I,se,"","",function(Ae){return F.call(V,Ae,ge++)}),se}function q(I){if(I._status===-1){var F=I._result;F=F(),F.then(function(V){(I._status===0||I._status===-1)&&(I._status=1,I._result=V)},function(V){(I._status===0||I._status===-1)&&(I._status=2,I._result=V)}),I._status===-1&&(I._status=0,I._result=F)}if(I._status===1)return I._result.default;throw I._result}var Q=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function Se(){}return Ge.Children={map:U,forEach:function(I,F,V){U(I,function(){F.apply(this,arguments)},V)},count:function(I){var F=0;return U(I,function(){F++}),F},toArray:function(I){return U(I,function(F){return F})||[]},only:function(I){if(!G(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ge.Component=C,Ge.Fragment=n,Ge.Profiler=i,Ge.PureComponent=O,Ge.StrictMode=r,Ge.Suspense=p,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(I){return M.H.useMemoCache(I)}},Ge.cache=function(I){return function(){return I.apply(null,arguments)}},Ge.cloneElement=function(I,F,V){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var se=S({},I.props),ge=I.key,Ae=void 0;if(F!=null)for(ye in F.ref!==void 0&&(Ae=void 0),F.key!==void 0&&(ge=""+F.key),F)!D.call(F,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&F.ref===void 0||(se[ye]=F[ye]);var ye=arguments.length-2;if(ye===1)se.children=V;else if(1<ye){for(var De=Array(ye),Ke=0;Ke<ye;Ke++)De[Ke]=arguments[Ke+2];se.children=De}return k(I.type,ge,void 0,void 0,Ae,se)},Ge.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:s,_context:I},I},Ge.createElement=function(I,F,V){var se,ge={},Ae=null;if(F!=null)for(se in F.key!==void 0&&(Ae=""+F.key),F)D.call(F,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ge[se]=F[se]);var ye=arguments.length-2;if(ye===1)ge.children=V;else if(1<ye){for(var De=Array(ye),Ke=0;Ke<ye;Ke++)De[Ke]=arguments[Ke+2];ge.children=De}if(I&&I.defaultProps)for(se in ye=I.defaultProps,ye)ge[se]===void 0&&(ge[se]=ye[se]);return k(I,Ae,void 0,void 0,null,ge)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(I){return{$$typeof:u,render:I}},Ge.isValidElement=G,Ge.lazy=function(I){return{$$typeof:h,_payload:{_status:-1,_result:I},_init:q}},Ge.memo=function(I,F){return{$$typeof:d,type:I,compare:F===void 0?null:F}},Ge.startTransition=function(I){var F=M.T,V={};M.T=V;try{var se=I(),ge=M.S;ge!==null&&ge(V,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Se,Q)}catch(Ae){Q(Ae)}finally{M.T=F}},Ge.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ge.use=function(I){return M.H.use(I)},Ge.useActionState=function(I,F,V){return M.H.useActionState(I,F,V)},Ge.useCallback=function(I,F){return M.H.useCallback(I,F)},Ge.useContext=function(I){return M.H.useContext(I)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(I,F){return M.H.useDeferredValue(I,F)},Ge.useEffect=function(I,F,V){var se=M.H;if(typeof V=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(I,F)},Ge.useId=function(){return M.H.useId()},Ge.useImperativeHandle=function(I,F,V){return M.H.useImperativeHandle(I,F,V)},Ge.useInsertionEffect=function(I,F){return M.H.useInsertionEffect(I,F)},Ge.useLayoutEffect=function(I,F){return M.H.useLayoutEffect(I,F)},Ge.useMemo=function(I,F){return M.H.useMemo(I,F)},Ge.useOptimistic=function(I,F){return M.H.useOptimistic(I,F)},Ge.useReducer=function(I,F,V){return M.H.useReducer(I,F,V)},Ge.useRef=function(I){return M.H.useRef(I)},Ge.useState=function(I){return M.H.useState(I)},Ge.useSyncExternalStore=function(I,F,V){return M.H.useSyncExternalStore(I,F,V)},Ge.useTransition=function(){return M.H.useTransition()},Ge.version="19.1.1",Ge}var hA;function Nl(){return hA||(hA=1,pg.exports=rM()),pg.exports}var A=Nl();const qP=ua(A),aM=YP({__proto__:null,default:qP},[A]);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),mA=e=>{const t=sM(e);return t.charAt(0).toUpperCase()+t.slice(1)},FP=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),oM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},p)=>A.createElement("svg",{ref:p,...lM,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:FP("lucide",i),...!s&&!oM(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,h])=>A.createElement(d,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=(e,t)=>{const n=A.forwardRef(({className:r,...i},s)=>A.createElement(cM,{ref:s,iconNode:t,className:FP(`lucide-${iM(mA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=mA(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],zf=Mt("bolt",uM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fM=Mt("check",dM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],hM=Mt("chevron-down",pM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],iu=Mt("chevron-up",mM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],av=Mt("copy",gM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],gA=Mt("cpu",yM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],bM=Mt("download",vM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ys=Mt("eye",xM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],AM=Mt("gamepad",SM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],CM=Mt("grid-3x3",EM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],PM=Mt("hand",TM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],dl=Mt("loader-circle",wM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],NM=Mt("refresh-cw",OM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],e0=Mt("rocket",_M);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],kM=Mt("rotate-ccw",DM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yA=Mt("settings",MM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],hg=Mt("shield-check",jM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],RM=Mt("shield",IM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],$M=Mt("sword",LM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],UM=Mt("upload",BM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],GM=Mt("users",zM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],YM=Mt("wifi-off",HM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],vA=Mt("wifi",qM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],En=Mt("x",FM),VP={categories:{DRONE_SELECTION:!1,DECK_SELECTION:!1,PLACEMENT:!1,PHASE_TRANSITIONS:!0,AI_DECISIONS:!1,MULTIPLAYER:!0,ANIMATIONS:!0,COMMITMENTS:!0,COMBAT:!1,PASS_LOGIC:!0,STATE_SYNC:!0,ENERGY:!1,CARDS:!1,HAND_VIEW:!1,CARD_PLAY:!1}},w=(e,t,n=null)=>{if(!VP.categories[e])return;const r=`🔍 [${e} DEBUG]`;n!=null?console.log(r,t,n):console.log(r,t)};let pf=null;pf=console.log,console.log=(...e)=>{(e[0]?.toString()||"").startsWith("🔍")&&pf(...e)},pf("🔧 Debug logger active: Filtering console to show only debugLog messages"),pf("🔧 Active categories:",Object.entries(VP.categories).filter(([e,t])=>t).map(([e])=>e).join(", ")||"NONE");var mg={exports:{}},Fc={},gg={exports:{}},yg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bA;function VM(){return bA||(bA=1,(function(e){function t(U,q){var Q=U.length;U.push(q);e:for(;0<Q;){var Se=Q-1>>>1,I=U[Se];if(0<i(I,q))U[Se]=q,U[Q]=I,Q=Se;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var q=U[0],Q=U.pop();if(Q!==q){U[0]=Q;e:for(var Se=0,I=U.length,F=I>>>1;Se<F;){var V=2*(Se+1)-1,se=U[V],ge=V+1,Ae=U[ge];if(0>i(se,Q))ge<I&&0>i(Ae,se)?(U[Se]=Ae,U[ge]=Q,Se=ge):(U[Se]=se,U[V]=Q,Se=V);else if(ge<I&&0>i(Ae,Q))U[Se]=Ae,U[ge]=Q,Se=ge;else break e}}return q}function i(U,q){var Q=U.sortIndex-q.sortIndex;return Q!==0?Q:U.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var p=[],d=[],h=1,g=null,y=3,b=!1,S=!1,E=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function j(U){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=U)r(d),q.sortIndex=q.expirationTime,t(p,q);else break;q=n(d)}}function M(U){if(E=!1,j(U),!S)if(n(p)!==null)S=!0,D||(D=!0,Y());else{var q=n(d);q!==null&&te(M,q.startTime-U)}}var D=!1,k=-1,L=5,G=-1;function K(){return C?!0:!(e.unstable_now()-G<L)}function z(){if(C=!1,D){var U=e.unstable_now();G=U;var q=!0;try{e:{S=!1,E&&(E=!1,O(k),k=-1),b=!0;var Q=y;try{t:{for(j(U),g=n(p);g!==null&&!(g.expirationTime>U&&K());){var Se=g.callback;if(typeof Se=="function"){g.callback=null,y=g.priorityLevel;var I=Se(g.expirationTime<=U);if(U=e.unstable_now(),typeof I=="function"){g.callback=I,j(U),q=!0;break t}g===n(p)&&r(p),j(U)}else r(p);g=n(p)}if(g!==null)q=!0;else{var F=n(d);F!==null&&te(M,F.startTime-U),q=!1}}break e}finally{g=null,y=Q,b=!1}q=void 0}}finally{q?Y():D=!1}}}var Y;if(typeof N=="function")Y=function(){N(z)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Z=ie.port2;ie.port1.onmessage=z,Y=function(){Z.postMessage(null)}}else Y=function(){T(z,0)};function te(U,q){k=T(function(){U(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(U){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var Q=y;y=q;try{return U()}finally{y=Q}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=y;y=U;try{return q()}finally{y=Q}},e.unstable_scheduleCallback=function(U,q,Q){var Se=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Se+Q:Se):Q=Se,U){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=Q+I,U={id:h++,callback:q,priorityLevel:U,startTime:Q,expirationTime:I,sortIndex:-1},Q>Se?(U.sortIndex=Q,t(d,U),n(p)===null&&U===n(d)&&(E?(O(k),k=-1):E=!0,te(M,Q-Se))):(U.sortIndex=I,t(p,U),S||b||(S=!0,D||(D=!0,Y()))),U},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(U){var q=y;return function(){var Q=y;y=q;try{return U.apply(this,arguments)}finally{y=Q}}}})(yg)),yg}var xA;function KM(){return xA||(xA=1,gg.exports=VM()),gg.exports}var vg={exports:{}},Bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA;function WM(){if(SA)return Bn;SA=1;var e=Nl();function t(p){var d="https://react.dev/errors/"+p;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+p+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(p,d,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:p,containerInfo:d,implementation:h}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(p,d){if(p==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Bn.createPortal=function(p,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(p,d,null,h)},Bn.flushSync=function(p){var d=l.T,h=r.p;try{if(l.T=null,r.p=2,p)return p()}finally{l.T=d,r.p=h,r.d.f()}},Bn.preconnect=function(p,d){typeof p=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(p,d))},Bn.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Bn.preinit=function(p,d){if(typeof p=="string"&&d&&typeof d.as=="string"){var h=d.as,g=u(h,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(p,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):h==="script"&&r.d.X(p,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Bn.preinitModule=function(p,d){if(typeof p=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=u(d.as,d.crossOrigin);r.d.M(p,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(p)},Bn.preload=function(p,d){if(typeof p=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,g=u(h,d.crossOrigin);r.d.L(p,h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Bn.preloadModule=function(p,d){if(typeof p=="string")if(d){var h=u(d.as,d.crossOrigin);r.d.m(p,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(p)},Bn.requestFormReset=function(p){r.d.r(p)},Bn.unstable_batchedUpdates=function(p,d){return p(d)},Bn.useFormState=function(p,d,h){return l.H.useFormState(p,d,h)},Bn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Bn.version="19.1.1",Bn}var AA;function KP(){if(AA)return vg.exports;AA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),vg.exports=WM(),vg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EA;function XM(){if(EA)return Fc;EA=1;var e=KM(),t=Nl(),n=KP();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function p(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,f=o;;){var v=c.return;if(v===null)break;var x=v.alternate;if(x===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===c)return u(v),a;if(x===f)return u(v),o;x=x.sibling}throw Error(r(188))}if(c.return!==f.return)c=v,f=x;else{for(var P=!1,_=v.child;_;){if(_===c){P=!0,c=v,f=x;break}if(_===f){P=!0,f=v,c=x;break}_=_.sibling}if(!P){for(_=x.child;_;){if(_===c){P=!0,c=x,f=v;break}if(_===f){P=!0,f=x,c=v;break}_=_.sibling}if(!P)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function d(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=d(a),o!==null)return o;a=a.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),N=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function Y(a){return a===null||typeof a!="object"?null:(a=z&&a[z]||a["@@iterator"],typeof a=="function"?a:null)}var ie=Symbol.for("react.client.reference");function Z(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ie?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case D:return"SuspenseList";case G:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case N:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case j:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case k:return o=a.displayName||null,o!==null?o:Z(a.type)||"Memo";case L:o=a._payload,a=a._init;try{return Z(a(o))}catch{}}return null}var te=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Se=[],I=-1;function F(a){return{current:a}}function V(a){0>I||(a.current=Se[I],Se[I]=null,I--)}function se(a,o){I++,Se[I]=a.current,a.current=o}var ge=F(null),Ae=F(null),ye=F(null),De=F(null);function Ke(a,o){switch(se(ye,o),se(Ae,a),se(ge,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?B1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=B1(o),a=U1(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}V(ge),se(ge,a)}function xe(){V(ge),V(Ae),V(ye)}function Le(a){a.memoizedState!==null&&se(De,a);var o=ge.current,c=U1(o,a.type);o!==c&&(se(Ae,a),se(ge,c))}function ze(a){Ae.current===a&&(V(ge),V(Ae)),De.current===a&&(V(De),Uc._currentValue=Q)}var me=Object.prototype.hasOwnProperty,mt=e.unstable_scheduleCallback,Je=e.unstable_cancelCallback,It=e.unstable_shouldYield,Kt=e.unstable_requestPaint,Pt=e.unstable_now,Wt=e.unstable_getCurrentPriorityLevel,zt=e.unstable_ImmediatePriority,Ra=e.unstable_UserBlockingPriority,fa=e.unstable_NormalPriority,zl=e.unstable_LowPriority,pa=e.unstable_IdlePriority,wr=e.log,La=e.unstable_setDisableYieldValue,$a=null,hn=null;function Ye(a){if(typeof wr=="function"&&La(a),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode($a,a)}catch{}}var nt=Math.clz32?Math.clz32:Ao,Gl=Math.log,So=Math.LN2;function Ao(a){return a>>>=0,a===0?32:31-(Gl(a)/So|0)|0}var wi=256,ha=4194304;function ma(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function R(a,o,c){var f=a.pendingLanes;if(f===0)return 0;var v=0,x=a.suspendedLanes,P=a.pingedLanes;a=a.warmLanes;var _=f&134217727;return _!==0?(f=_&~x,f!==0?v=ma(f):(P&=_,P!==0?v=ma(P):c||(c=_&~a,c!==0&&(v=ma(c))))):(_=f&~x,_!==0?v=ma(_):P!==0?v=ma(P):c||(c=f&~a,c!==0&&(v=ma(c)))),v===0?0:o!==0&&o!==v&&(o&x)===0&&(x=v&-v,c=o&-o,x>=c||x===32&&(c&4194048)!==0)?o:v}function oe(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function fe(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ce(){var a=wi;return wi<<=1,(wi&4194048)===0&&(wi=256),a}function he(){var a=ha;return ha<<=1,(ha&62914560)===0&&(ha=4194304),a}function ve(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Ie(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function kn(a,o,c,f,v,x){var P=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var _=a.entanglements,$=a.expirationTimes,J=a.hiddenUpdates;for(c=P&~c;0<c;){var le=31-nt(c),de=1<<le;_[le]=0,$[le]=-1;var ee=J[le];if(ee!==null)for(J[le]=null,le=0;le<ee.length;le++){var re=ee[le];re!==null&&(re.lane&=-536870913)}c&=~de}f!==0&&st(a,f,0),x!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=x&~(P&~o))}function st(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var f=31-nt(o);a.entangledLanes|=o,a.entanglements[f]=a.entanglements[f]|1073741824|c&4194090}function Gt(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var f=31-nt(c),v=1<<f;v&o|a[f]&o&&(a[f]|=o),c&=~v}}function ot(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ct(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Ht(){var a=q.p;return a!==0?a:(a=window.event,a===void 0?32:iA(a.type))}function Mn(a,o){var c=q.p;try{return q.p=a,o()}finally{q.p=c}}var Fn=Math.random().toString(36).slice(2),$t="__reactFiber$"+Fn,jn="__reactProps$"+Fn,bs="__reactContainer$"+Fn,Ba="__reactEvents$"+Fn,$u="__reactListeners$"+Fn,dx="__reactHandles$"+Fn,uh="__reactResources$"+Fn,At="__reactMarker$"+Fn;function Or(a){delete a[$t],delete a[jn],delete a[Ba],delete a[$u],delete a[dx]}function Nr(a){var o=a[$t];if(o)return o;for(var c=a.parentNode;c;){if(o=c[bs]||c[$t]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=Y1(a);a!==null;){if(c=a[$t])return c;a=Y1(a)}return o}a=c,c=a.parentNode}return null}function ga(a){if(a=a[$t]||a[bs]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function In(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function Zn(a){var o=a[uh];return o||(o=a[uh]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ot(a){a[At]=!0}var ya=new Set,Rn={};function Ln(a,o){Jn(a,o),Jn(a+"Capture",o)}function Jn(a,o){for(Rn[a]=o,a=0;a<o.length;a++)ya.add(o[a])}var Hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xs={},_r={};function Ss(a){return me.call(_r,a)?!0:me.call(xs,a)?!1:Hl.test(a)?_r[a]=!0:(xs[a]=!0,!1)}function Ua(a,o,c){if(Ss(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function ut(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function an(a,o,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+f)}}var Yl,ql;function Oi(a){if(Yl===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Yl=o&&o[1]||"",ql=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yl+a+ql}var Eo=!1;function Fl(a,o){if(!a||Eo)return"";Eo=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(re){var ee=re}Reflect.construct(a,[],de)}else{try{de.call()}catch(re){ee=re}a.call(de.prototype)}}else{try{throw Error()}catch(re){ee=re}(de=a())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(re){if(re&&ee&&typeof re.stack=="string")return[re.stack,ee.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=f.DetermineComponentFrameRoot(),P=x[0],_=x[1];if(P&&_){var $=P.split(`
`),J=_.split(`
`);for(v=f=0;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;for(;v<J.length&&!J[v].includes("DetermineComponentFrameRoot");)v++;if(f===$.length||v===J.length)for(f=$.length-1,v=J.length-1;1<=f&&0<=v&&$[f]!==J[v];)v--;for(;1<=f&&0<=v;f--,v--)if($[f]!==J[v]){if(f!==1||v!==1)do if(f--,v--,0>v||$[f]!==J[v]){var le=`
`+$[f].replace(" at new "," at ");return a.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",a.displayName)),le}while(1<=f&&0<=v);break}}}finally{Eo=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?Oi(c):""}function Bu(a){switch(a.tag){case 26:case 27:case 5:return Oi(a.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return Fl(a.type,!1);case 11:return Fl(a.type.render,!1);case 1:return Fl(a.type,!0);case 31:return Oi("Activity");default:return""}}function Dr(a){try{var o="";do o+=Bu(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function sn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Uu(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function zu(a){var o=Uu(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),f=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,x=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return v.call(this)},set:function(P){f=""+P,x.call(this,P)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(P){f=""+P},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function As(a){a._valueTracker||(a._valueTracker=zu(a))}function va(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return a&&(f=Uu(a)?a.checked?"true":"false":a.value),a=f,a!==c?(o.setValue(a),!0):!1}function za(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Co=/[\n"\\]/g;function Xt(a){return a.replace(Co,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Es(a,o,c,f,v,x,P,_){a.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.type=P:a.removeAttribute("type"),o!=null?P==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+sn(o)):a.value!==""+sn(o)&&(a.value=""+sn(o)):P!=="submit"&&P!=="reset"||a.removeAttribute("value"),o!=null?ba(a,P,sn(o)):c!=null?ba(a,P,sn(c)):f!=null&&a.removeAttribute("value"),v==null&&x!=null&&(a.defaultChecked=!!x),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.name=""+sn(_):a.removeAttribute("name")}function To(a,o,c,f,v,x,P,_){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),o!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||o!=null))return;c=c!=null?""+sn(c):"",o=o!=null?""+sn(o):c,_||o===a.value||(a.value=o),a.defaultValue=o}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=_?a.checked:!!f,a.defaultChecked=!!f,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(a.name=P)}function ba(a,o,c){o==="number"&&za(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function xa(a,o,c,f){if(a=a.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<a.length;c++)v=o.hasOwnProperty("$"+a[c].value),a[c].selected!==v&&(a[c].selected=v),v&&f&&(a[c].defaultSelected=!0)}else{for(c=""+sn(c),o=null,v=0;v<a.length;v++){if(a[v].value===c){a[v].selected=!0,f&&(a[v].defaultSelected=!0);return}o!==null||a[v].disabled||(o=a[v])}o!==null&&(o.selected=!0)}}function Cs(a,o,c){if(o!=null&&(o=""+sn(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+sn(c):""}function Vl(a,o,c,f){if(o==null){if(f!=null){if(c!=null)throw Error(r(92));if(te(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),o=c}c=sn(o),a.defaultValue=c,f=a.textContent,f===c&&f!==""&&f!==null&&(a.value=f)}function Ga(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var dh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kl(a,o,c){var f=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":f?a.setProperty(o,c):typeof c!="number"||c===0||dh.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function fh(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var v in o)f=o[v],o.hasOwnProperty(v)&&c[v]!==f&&Kl(a,v,f)}else for(var x in o)o.hasOwnProperty(x)&&Kl(a,x,o[x])}function Gu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xl(a){return Hu.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Yu=null;function Po(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ha=null,ea=null;function Ni(a){var o=ga(a);if(o&&(a=o.stateNode)){var c=a[jn]||null;e:switch(a=o.stateNode,o.type){case"input":if(Es(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Xt(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==a&&f.form===a.form){var v=f[jn]||null;if(!v)throw Error(r(90));Es(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<c.length;o++)f=c[o],f.form===a.form&&va(f)}break e;case"textarea":Cs(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&xa(a,!!c.multiple,o,!1)}}}var wo=!1;function Sa(a,o,c){if(wo)return a(o,c);wo=!0;try{var f=a(o);return f}finally{if(wo=!1,(Ha!==null||ea!==null)&&(qd(),Ha&&(o=Ha,a=ea,ea=Ha=null,Ni(o),a)))for(o=0;o<a.length;o++)Ni(a[o])}}function cr(a,o){var c=a.stateNode;if(c===null)return null;var f=c[jn]||null;if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ql=!1;if(ur)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{Ql=!1}var qe=null,Ya=null,ta=null;function Zl(){if(ta)return ta;var a,o=Ya,c=o.length,f,v="value"in qe?qe.value:qe.textContent,x=v.length;for(a=0;a<c&&o[a]===v[a];a++);var P=c-a;for(f=1;f<=P&&o[c-f]===v[x-f];f++);return ta=v.slice(a,1<f?1-f:void 0)}function Jl(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function ec(){return!0}function mn(){return!1}function Et(a){function o(c,f,v,x,P){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=x,this.target=P,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(c=a[_],this[_]=c?c(x):x[_]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ec:mn,this.isPropagationStopped=mn,this}return h(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ec)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ec)},persist:function(){},isPersistent:ec}),o}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oo=Et(Di),Ts=h({},Di,{view:0,detail:0}),tc=Et(Ts),qu,Fu,No,_o=h({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rc,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==No&&(No&&a.type==="mousemove"?(qu=a.screenX-No.screenX,Fu=a.screenY-No.screenY):Fu=qu=0,No=a),qu)},movementY:function(a){return"movementY"in a?a.movementY:Fu}}),Vu=Et(_o),ph=h({},_o,{dataTransfer:0}),Me=Et(ph),Qe=h({},Ts,{relatedTarget:0}),qa=Et(Qe),Do=h({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),Ku=Et(Do),ko=h({},Di,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Wu=Et(ko),Xu=h({},Di,{data:0}),nc=Et(Xu),hh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tt(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=gh[a])?!!o[a]:!1}function rc(){return tt}var yh=h({},Ts,{key:function(a){if(a.key){var o=hh[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Jl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?mh[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rc,charCode:function(a){return a.type==="keypress"?Jl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Jl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),vh=Et(yh),Fa=h({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gn=Et(Fa),Mo=h({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rc}),Qu=Et(Mo),bh=h({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),ac=Et(bh),xh=h({},_o,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Sh=Et(xh),Ah=h({},Di,{newState:0,oldState:0}),Eh=Et(Ah),Ch=[9,13,27,32],ic=ur&&"CompositionEvent"in window,Ps=null;ur&&"documentMode"in document&&(Ps=document.documentMode);var Th=ur&&"TextEvent"in window&&!Ps,Zu=ur&&(!ic||Ps&&8<Ps&&11>=Ps),Ju=" ",ed=!1;function td(a,o){switch(a){case"keyup":return Ch.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ki=!1;function Ph(a,o){switch(a){case"compositionend":return nd(o);case"keypress":return o.which!==32?null:(ed=!0,Ju);case"textInput":return a=o.data,a===Ju&&ed?null:a;default:return null}}function rd(a,o){if(ki)return a==="compositionend"||!ic&&td(a,o)?(a=Zl(),ta=Ya=qe=null,ki=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Zu&&o.locale!=="ko"?null:o.data;default:return null}}var wh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ad(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!wh[a.type]:o==="textarea"}function id(a,o,c,f){Ha?ea?ea.push(f):ea=[f]:Ha=f,o=Qd(o,"onChange"),0<o.length&&(c=new Oo("onChange","change",null,c,f),a.push({event:c,listeners:o}))}var ws=null,Os=null;function sd(a){j1(a,0)}function jo(a){var o=In(a);if(va(o))return a}function od(a,o){if(a==="change")return o}var ld=!1;if(ur){var sc;if(ur){var Io="oninput"in document;if(!Io){var cd=document.createElement("div");cd.setAttribute("oninput","return;"),Io=typeof cd.oninput=="function"}sc=Io}else sc=!1;ld=sc&&(!document.documentMode||9<document.documentMode)}function ud(){ws&&(ws.detachEvent("onpropertychange",dd),Os=ws=null)}function dd(a){if(a.propertyName==="value"&&jo(Os)){var o=[];id(o,Os,a,Po(a)),Sa(sd,o)}}function B(a,o,c){a==="focusin"?(ud(),ws=o,Os=c,ws.attachEvent("onpropertychange",dd)):a==="focusout"&&ud()}function ne(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return jo(Os)}function be(a,o){if(a==="click")return jo(o)}function pe(a,o){if(a==="input"||a==="change")return jo(o)}function Ee(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var ke=typeof Object.is=="function"?Object.is:Ee;function Ue(a,o){if(ke(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!me.call(o,v)||!ke(a[v],o[v]))return!1}return!0}function Ze(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Qt(a,o){var c=Ze(a);a=0;for(var f;c;){if(c.nodeType===3){if(f=a+c.textContent.length,a<=o&&f>=o)return{node:c,offset:o-a};a=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ze(c)}}function Va(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Va(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Ka(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=za(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=za(a.document)}return o}function Ns(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var kr=ur&&"documentMode"in document&&11>=document.documentMode,er=null,_s=null,Wa=null,Aa=!1;function fd(a,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Aa||er==null||er!==za(f)||(f=er,"selectionStart"in f&&Ns(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Wa&&Ue(Wa,f)||(Wa=f,f=Qd(_s,"onSelect"),0<f.length&&(o=new Oo("onSelect","select",null,o,c),a.push({event:o,listeners:f}),o.target=er)))}function Ea(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var Mr={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},oc={},Ro={};ur&&(Ro=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function Mi(a){if(oc[a])return oc[a];if(!Mr[a])return a;var o=Mr[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in Ro)return oc[a]=o[c];return a}var fx=Mi("animationend"),px=Mi("animationiteration"),hx=Mi("animationstart"),LD=Mi("transitionrun"),$D=Mi("transitionstart"),BD=Mi("transitioncancel"),mx=Mi("transitionend"),gx=new Map,Oh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oh.push("scrollEnd");function na(a,o){gx.set(a,o),Ln(o,[a])}var yx=new WeakMap;function jr(a,o){if(typeof a=="object"&&a!==null){var c=yx.get(a);return c!==void 0?c:(o={value:a,source:o,stack:Dr(o)},yx.set(a,o),o)}return{value:a,source:o,stack:Dr(o)}}var Ir=[],Lo=0,Nh=0;function pd(){for(var a=Lo,o=Nh=Lo=0;o<a;){var c=Ir[o];Ir[o++]=null;var f=Ir[o];Ir[o++]=null;var v=Ir[o];Ir[o++]=null;var x=Ir[o];if(Ir[o++]=null,f!==null&&v!==null){var P=f.pending;P===null?v.next=v:(v.next=P.next,P.next=v),f.pending=v}x!==0&&vx(c,v,x)}}function hd(a,o,c,f){Ir[Lo++]=a,Ir[Lo++]=o,Ir[Lo++]=c,Ir[Lo++]=f,Nh|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function _h(a,o,c,f){return hd(a,o,c,f),md(a)}function $o(a,o){return hd(a,null,null,o),md(a)}function vx(a,o,c){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c);for(var v=!1,x=a.return;x!==null;)x.childLanes|=c,f=x.alternate,f!==null&&(f.childLanes|=c),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(v=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,v&&o!==null&&(v=31-nt(c),a=x.hiddenUpdates,f=a[v],f===null?a[v]=[o]:f.push(o),o.lane=c|536870912),x):null}function md(a){if(50<kc)throw kc=0,Rm=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Bo={};function UD(a,o,c,f){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(a,o,c,f){return new UD(a,o,c,f)}function Dh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Xa(a,o){var c=a.alternate;return c===null?(c=dr(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function bx(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function gd(a,o,c,f,v,x){var P=0;if(f=a,typeof a=="function")Dh(a)&&(P=1);else if(typeof a=="string")P=Gk(a,c,ge.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case G:return a=dr(31,c,o,v),a.elementType=G,a.lanes=x,a;case S:return Ds(c.children,v,x,o);case E:P=8,v|=24;break;case C:return a=dr(12,c,o,v|2),a.elementType=C,a.lanes=x,a;case M:return a=dr(13,c,o,v),a.elementType=M,a.lanes=x,a;case D:return a=dr(19,c,o,v),a.elementType=D,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case T:case N:P=10;break e;case O:P=9;break e;case j:P=11;break e;case k:P=14;break e;case L:P=16,f=null;break e}P=29,c=Error(r(130,a===null?"null":typeof a,"")),f=null}return o=dr(P,c,o,v),o.elementType=a,o.type=f,o.lanes=x,o}function Ds(a,o,c,f){return a=dr(7,a,f,o),a.lanes=c,a}function kh(a,o,c){return a=dr(6,a,null,o),a.lanes=c,a}function Mh(a,o,c){return o=dr(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Uo=[],zo=0,yd=null,vd=0,Rr=[],Lr=0,ks=null,Qa=1,Za="";function Ms(a,o){Uo[zo++]=vd,Uo[zo++]=yd,yd=a,vd=o}function xx(a,o,c){Rr[Lr++]=Qa,Rr[Lr++]=Za,Rr[Lr++]=ks,ks=a;var f=Qa;a=Za;var v=32-nt(f)-1;f&=~(1<<v),c+=1;var x=32-nt(o)+v;if(30<x){var P=v-v%5;x=(f&(1<<P)-1).toString(32),f>>=P,v-=P,Qa=1<<32-nt(o)+v|c<<v|f,Za=x+a}else Qa=1<<x|c<<v|f,Za=a}function jh(a){a.return!==null&&(Ms(a,1),xx(a,1,0))}function Ih(a){for(;a===yd;)yd=Uo[--zo],Uo[zo]=null,vd=Uo[--zo],Uo[zo]=null;for(;a===ks;)ks=Rr[--Lr],Rr[Lr]=null,Za=Rr[--Lr],Rr[Lr]=null,Qa=Rr[--Lr],Rr[Lr]=null}var Vn=null,Bt=null,lt=!1,js=null,Ca=!1,Rh=Error(r(519));function Is(a){var o=Error(r(418,""));throw uc(jr(o,a)),Rh}function Sx(a){var o=a.stateNode,c=a.type,f=a.memoizedProps;switch(o[$t]=a,o[jn]=f,c){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(c=0;c<jc.length;c++)Xe(jc[c],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),To(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),As(o);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Vl(o,f.value,f.defaultValue,f.children),As(o)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||f.suppressHydrationWarning===!0||$1(o.textContent,c)?(f.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),f.onScroll!=null&&Xe("scroll",o),f.onScrollEnd!=null&&Xe("scrollend",o),f.onClick!=null&&(o.onclick=Zd),o=!0):o=!1,o||Is(a)}function Ax(a){for(Vn=a.return;Vn;)switch(Vn.tag){case 5:case 13:Ca=!1;return;case 27:case 3:Ca=!0;return;default:Vn=Vn.return}}function lc(a){if(a!==Vn)return!1;if(!lt)return Ax(a),lt=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Zm(a.type,a.memoizedProps)),c=!c),c&&Bt&&Is(a),Ax(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){Bt=aa(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}Bt=null}}else o===27?(o=Bt,Wi(a.type)?(a=ng,ng=null,Bt=a):Bt=o):Bt=Vn?aa(a.stateNode.nextSibling):null;return!0}function cc(){Bt=Vn=null,lt=!1}function Ex(){var a=js;return a!==null&&(rr===null?rr=a:rr.push.apply(rr,a),js=null),a}function uc(a){js===null?js=[a]:js.push(a)}var Lh=F(null),Rs=null,Ja=null;function ji(a,o,c){se(Lh,o._currentValue),o._currentValue=c}function ei(a){a._currentValue=Lh.current,V(Lh)}function $h(a,o,c){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===c)break;a=a.return}}function Bh(a,o,c,f){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var x=v.dependencies;if(x!==null){var P=v.child;x=x.firstContext;e:for(;x!==null;){var _=x;x=v;for(var $=0;$<o.length;$++)if(_.context===o[$]){x.lanes|=c,_=x.alternate,_!==null&&(_.lanes|=c),$h(x.return,c,a),f||(P=null);break e}x=_.next}}else if(v.tag===18){if(P=v.return,P===null)throw Error(r(341));P.lanes|=c,x=P.alternate,x!==null&&(x.lanes|=c),$h(P,c,a),P=null}else P=v.child;if(P!==null)P.return=v;else for(P=v;P!==null;){if(P===a){P=null;break}if(v=P.sibling,v!==null){v.return=P.return,P=v;break}P=P.return}v=P}}function dc(a,o,c,f){a=null;for(var v=o,x=!1;v!==null;){if(!x){if((v.flags&524288)!==0)x=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var P=v.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var _=v.type;ke(v.pendingProps.value,P.value)||(a!==null?a.push(_):a=[_])}}else if(v===De.current){if(P=v.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Uc):a=[Uc])}v=v.return}a!==null&&Bh(o,a,c,f),o.flags|=262144}function bd(a){for(a=a.firstContext;a!==null;){if(!ke(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ls(a){Rs=a,Ja=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function $n(a){return Cx(Rs,a)}function xd(a,o){return Rs===null&&Ls(a),Cx(a,o)}function Cx(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ja===null){if(a===null)throw Error(r(308));Ja=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Ja=Ja.next=o;return c}var zD=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,f){a.push(f)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},GD=e.unstable_scheduleCallback,HD=e.unstable_NormalPriority,on={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uh(){return{controller:new zD,data:new Map,refCount:0}}function fc(a){a.refCount--,a.refCount===0&&GD(HD,function(){a.controller.abort()})}var pc=null,zh=0,Go=0,Ho=null;function YD(a,o){if(pc===null){var c=pc=[];zh=0,Go=Hm(),Ho={status:"pending",value:void 0,then:function(f){c.push(f)}}}return zh++,o.then(Tx,Tx),o}function Tx(){if(--zh===0&&pc!==null){Ho!==null&&(Ho.status="fulfilled");var a=pc;pc=null,Go=0,Ho=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function qD(a,o){var c=[],f={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return a.then(function(){f.status="fulfilled",f.value=o;for(var v=0;v<c.length;v++)(0,c[v])(o)},function(v){for(f.status="rejected",f.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),f}var Px=U.S;U.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&YD(a,o),Px!==null&&Px(a,o)};var $s=F(null);function Gh(){var a=$s.current;return a!==null?a:Ct.pooledCache}function Sd(a,o){o===null?se($s,$s.current):se($s,o.pool)}function wx(){var a=Gh();return a===null?null:{parent:on._currentValue,pool:a}}var hc=Error(r(460)),Ox=Error(r(474)),Ad=Error(r(542)),Hh={then:function(){}};function Nx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ed(){}function _x(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Ed,Ed),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,kx(a),a;default:if(typeof o.status=="string")o.then(Ed,Ed);else{if(a=Ct,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(f){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=f}},function(f){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,kx(a),a}throw mc=o,hc}}var mc=null;function Dx(){if(mc===null)throw Error(r(459));var a=mc;return mc=null,a}function kx(a){if(a===hc||a===Ad)throw Error(r(483))}var Ii=!1;function Yh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ri(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Li(a,o,c){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(dt&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,o=md(a),vx(a,null,c),o}return hd(a,f,o,c),md(a)}function gc(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var f=o.lanes;f&=a.pendingLanes,c|=f,o.lanes=c,Gt(a,c)}}function Fh(a,o){var c=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var P={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?v=x=P:x=x.next=P,c=c.next}while(c!==null);x===null?v=x=o:x=x.next=o}else v=x=o;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:f.shared,callbacks:f.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var Vh=!1;function yc(){if(Vh){var a=Ho;if(a!==null)throw a}}function vc(a,o,c,f){Vh=!1;var v=a.updateQueue;Ii=!1;var x=v.firstBaseUpdate,P=v.lastBaseUpdate,_=v.shared.pending;if(_!==null){v.shared.pending=null;var $=_,J=$.next;$.next=null,P===null?x=J:P.next=J,P=$;var le=a.alternate;le!==null&&(le=le.updateQueue,_=le.lastBaseUpdate,_!==P&&(_===null?le.firstBaseUpdate=J:_.next=J,le.lastBaseUpdate=$))}if(x!==null){var de=v.baseState;P=0,le=J=$=null,_=x;do{var ee=_.lane&-536870913,re=ee!==_.lane;if(re?(et&ee)===ee:(f&ee)===ee){ee!==0&&ee===Go&&(Vh=!0),le!==null&&(le=le.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var $e=a,je=_;ee=o;var vt=c;switch(je.tag){case 1:if($e=je.payload,typeof $e=="function"){de=$e.call(vt,de,ee);break e}de=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=je.payload,ee=typeof $e=="function"?$e.call(vt,de,ee):$e,ee==null)break e;de=h({},de,ee);break e;case 2:Ii=!0}}ee=_.callback,ee!==null&&(a.flags|=64,re&&(a.flags|=8192),re=v.callbacks,re===null?v.callbacks=[ee]:re.push(ee))}else re={lane:ee,tag:_.tag,payload:_.payload,callback:_.callback,next:null},le===null?(J=le=re,$=de):le=le.next=re,P|=ee;if(_=_.next,_===null){if(_=v.shared.pending,_===null)break;re=_,_=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);le===null&&($=de),v.baseState=$,v.firstBaseUpdate=J,v.lastBaseUpdate=le,x===null&&(v.shared.lanes=0),qi|=P,a.lanes=P,a.memoizedState=de}}function Mx(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function jx(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Mx(c[a],o)}var Yo=F(null),Cd=F(0);function Ix(a,o){a=oi,se(Cd,a),se(Yo,o),oi=a|o.baseLanes}function Kh(){se(Cd,oi),se(Yo,Yo.current)}function Wh(){oi=Cd.current,V(Yo),V(Cd)}var $i=0,Fe=null,gt=null,Zt=null,Td=!1,qo=!1,Bs=!1,Pd=0,bc=0,Fo=null,FD=0;function Yt(){throw Error(r(321))}function Xh(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!ke(a[c],o[c]))return!1;return!0}function Qh(a,o,c,f,v,x){return $i=x,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,U.H=a===null||a.memoizedState===null?vS:bS,Bs=!1,x=c(f,v),Bs=!1,qo&&(x=Lx(o,c,f,v)),Rx(a),x}function Rx(a){U.H=kd;var o=gt!==null&&gt.next!==null;if($i=0,Zt=gt=Fe=null,Td=!1,bc=0,Fo=null,o)throw Error(r(300));a===null||yn||(a=a.dependencies,a!==null&&bd(a)&&(yn=!0))}function Lx(a,o,c,f){Fe=a;var v=0;do{if(qo&&(Fo=null),bc=0,qo=!1,25<=v)throw Error(r(301));if(v+=1,Zt=gt=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}U.H=JD,x=o(c,f)}while(qo);return x}function VD(){var a=U.H,o=a.useState()[0];return o=typeof o.then=="function"?xc(o):o,a=a.useState()[0],(gt!==null?gt.memoizedState:null)!==a&&(Fe.flags|=1024),o}function Zh(){var a=Pd!==0;return Pd=0,a}function Jh(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function em(a){if(Td){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Td=!1}$i=0,Zt=gt=Fe=null,qo=!1,bc=Pd=0,Fo=null}function tr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Fe.memoizedState=Zt=a:Zt=Zt.next=a,Zt}function Jt(){if(gt===null){var a=Fe.alternate;a=a!==null?a.memoizedState:null}else a=gt.next;var o=Zt===null?Fe.memoizedState:Zt.next;if(o!==null)Zt=o,gt=a;else{if(a===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));gt=a,a={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Zt===null?Fe.memoizedState=Zt=a:Zt=Zt.next=a}return Zt}function tm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xc(a){var o=bc;return bc+=1,Fo===null&&(Fo=[]),a=_x(Fo,a,o),o=Fe,(Zt===null?o.memoizedState:Zt.next)===null&&(o=o.alternate,U.H=o===null||o.memoizedState===null?vS:bS),a}function wd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return xc(a);if(a.$$typeof===N)return $n(a)}throw Error(r(438,String(a)))}function nm(a){var o=null,c=Fe.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var f=Fe.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=tm(),Fe.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),f=0;f<a;f++)c[f]=K;return o.index++,c}function ti(a,o){return typeof o=="function"?o(a):o}function Od(a){var o=Jt();return rm(o,gt,a)}function rm(a,o,c){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var v=a.baseQueue,x=f.pending;if(x!==null){if(v!==null){var P=v.next;v.next=x.next,x.next=P}o.baseQueue=v=x,f.pending=null}if(x=a.baseState,v===null)a.memoizedState=x;else{o=v.next;var _=P=null,$=null,J=o,le=!1;do{var de=J.lane&-536870913;if(de!==J.lane?(et&de)===de:($i&de)===de){var ee=J.revertLane;if(ee===0)$!==null&&($=$.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),de===Go&&(le=!0);else if(($i&ee)===ee){J=J.next,ee===Go&&(le=!0);continue}else de={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(_=$=de,P=x):$=$.next=de,Fe.lanes|=ee,qi|=ee;de=J.action,Bs&&c(x,de),x=J.hasEagerState?J.eagerState:c(x,de)}else ee={lane:de,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(_=$=ee,P=x):$=$.next=ee,Fe.lanes|=de,qi|=de;J=J.next}while(J!==null&&J!==o);if($===null?P=x:$.next=_,!ke(x,a.memoizedState)&&(yn=!0,le&&(c=Ho,c!==null)))throw c;a.memoizedState=x,a.baseState=P,a.baseQueue=$,f.lastRenderedState=x}return v===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function am(a){var o=Jt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=c.dispatch,v=c.pending,x=o.memoizedState;if(v!==null){c.pending=null;var P=v=v.next;do x=a(x,P.action),P=P.next;while(P!==v);ke(x,o.memoizedState)||(yn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),c.lastRenderedState=x}return[x,f]}function $x(a,o,c){var f=Fe,v=Jt(),x=lt;if(x){if(c===void 0)throw Error(r(407));c=c()}else c=o();var P=!ke((gt||v).memoizedState,c);P&&(v.memoizedState=c,yn=!0),v=v.queue;var _=zx.bind(null,f,v,a);if(Sc(2048,8,_,[a]),v.getSnapshot!==o||P||Zt!==null&&Zt.memoizedState.tag&1){if(f.flags|=2048,Vo(9,Nd(),Ux.bind(null,f,v,c,o),null),Ct===null)throw Error(r(349));x||($i&124)!==0||Bx(f,o,c)}return c}function Bx(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=Fe.updateQueue,o===null?(o=tm(),Fe.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function Ux(a,o,c,f){o.value=c,o.getSnapshot=f,Gx(o)&&Hx(a)}function zx(a,o,c){return c(function(){Gx(o)&&Hx(a)})}function Gx(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!ke(a,c)}catch{return!0}}function Hx(a){var o=$o(a,2);o!==null&&gr(o,a,2)}function im(a){var o=tr();if(typeof a=="function"){var c=a;if(a=c(),Bs){Ye(!0);try{c()}finally{Ye(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:a},o}function Yx(a,o,c,f){return a.baseState=c,rm(a,gt,typeof f=="function"?f:ti)}function KD(a,o,c,f,v){if(Dd(a))throw Error(r(485));if(a=o.action,a!==null){var x={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){x.listeners.push(P)}};U.T!==null?c(!0):x.isTransition=!1,f(x),c=o.pending,c===null?(x.next=o.pending=x,qx(o,x)):(x.next=c.next,o.pending=c.next=x)}}function qx(a,o){var c=o.action,f=o.payload,v=a.state;if(o.isTransition){var x=U.T,P={};U.T=P;try{var _=c(v,f),$=U.S;$!==null&&$(P,_),Fx(a,o,_)}catch(J){sm(a,o,J)}finally{U.T=x}}else try{x=c(v,f),Fx(a,o,x)}catch(J){sm(a,o,J)}}function Fx(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Vx(a,o,f)},function(f){return sm(a,o,f)}):Vx(a,o,c)}function Vx(a,o,c){o.status="fulfilled",o.value=c,Kx(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,qx(a,c)))}function sm(a,o,c){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=c,Kx(o),o=o.next;while(o!==f)}a.action=null}function Kx(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Wx(a,o){return o}function Xx(a,o){if(lt){var c=Ct.formState;if(c!==null){e:{var f=Fe;if(lt){if(Bt){t:{for(var v=Bt,x=Ca;v.nodeType!==8;){if(!x){v=null;break t}if(v=aa(v.nextSibling),v===null){v=null;break t}}x=v.data,v=x==="F!"||x==="F"?v:null}if(v){Bt=aa(v.nextSibling),f=v.data==="F!";break e}}Is(f)}f=!1}f&&(o=c[0])}}return c=tr(),c.memoizedState=c.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wx,lastRenderedState:o},c.queue=f,c=mS.bind(null,Fe,f),f.dispatch=c,f=im(!1),x=dm.bind(null,Fe,!1,f.queue),f=tr(),v={state:o,dispatch:null,action:a,pending:null},f.queue=v,c=KD.bind(null,Fe,v,x,c),v.dispatch=c,f.memoizedState=a,[o,c,!1]}function Qx(a){var o=Jt();return Zx(o,gt,a)}function Zx(a,o,c){if(o=rm(a,o,Wx)[0],a=Od(ti)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=xc(o)}catch(P){throw P===hc?Ad:P}else f=o;o=Jt();var v=o.queue,x=v.dispatch;return c!==o.memoizedState&&(Fe.flags|=2048,Vo(9,Nd(),WD.bind(null,v,c),null)),[f,x,a]}function WD(a,o){a.action=o}function Jx(a){var o=Jt(),c=gt;if(c!==null)return Zx(o,c,a);Jt(),o=o.memoizedState,c=Jt();var f=c.queue.dispatch;return c.memoizedState=a,[o,f,!1]}function Vo(a,o,c,f){return a={tag:a,create:c,deps:f,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=tm(),Fe.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(f=c.next,c.next=a,a.next=f,o.lastEffect=a),a}function Nd(){return{destroy:void 0,resource:void 0}}function eS(){return Jt().memoizedState}function _d(a,o,c,f){var v=tr();f=f===void 0?null:f,Fe.flags|=a,v.memoizedState=Vo(1|o,Nd(),c,f)}function Sc(a,o,c,f){var v=Jt();f=f===void 0?null:f;var x=v.memoizedState.inst;gt!==null&&f!==null&&Xh(f,gt.memoizedState.deps)?v.memoizedState=Vo(o,x,c,f):(Fe.flags|=a,v.memoizedState=Vo(1|o,x,c,f))}function tS(a,o){_d(8390656,8,a,o)}function nS(a,o){Sc(2048,8,a,o)}function rS(a,o){return Sc(4,2,a,o)}function aS(a,o){return Sc(4,4,a,o)}function iS(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function sS(a,o,c){c=c!=null?c.concat([a]):null,Sc(4,4,iS.bind(null,o,a),c)}function om(){}function oS(a,o){var c=Jt();o=o===void 0?null:o;var f=c.memoizedState;return o!==null&&Xh(o,f[1])?f[0]:(c.memoizedState=[a,o],a)}function lS(a,o){var c=Jt();o=o===void 0?null:o;var f=c.memoizedState;if(o!==null&&Xh(o,f[1]))return f[0];if(f=a(),Bs){Ye(!0);try{a()}finally{Ye(!1)}}return c.memoizedState=[f,o],f}function lm(a,o,c){return c===void 0||($i&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=d1(),Fe.lanes|=a,qi|=a,c)}function cS(a,o,c,f){return ke(c,o)?c:Yo.current!==null?(a=lm(a,c,f),ke(a,o)||(yn=!0),a):($i&42)===0?(yn=!0,a.memoizedState=c):(a=d1(),Fe.lanes|=a,qi|=a,o)}function uS(a,o,c,f,v){var x=q.p;q.p=x!==0&&8>x?x:8;var P=U.T,_={};U.T=_,dm(a,!1,o,c);try{var $=v(),J=U.S;if(J!==null&&J(_,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var le=qD($,f);Ac(a,o,le,mr(a))}else Ac(a,o,f,mr(a))}catch(de){Ac(a,o,{then:function(){},status:"rejected",reason:de},mr())}finally{q.p=x,U.T=P}}function XD(){}function cm(a,o,c,f){if(a.tag!==5)throw Error(r(476));var v=dS(a).queue;uS(a,v,o,Q,c===null?XD:function(){return fS(a),c(f)})}function dS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:Q},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function fS(a){var o=dS(a).next.queue;Ac(a,o,{},mr())}function um(){return $n(Uc)}function pS(){return Jt().memoizedState}function hS(){return Jt().memoizedState}function QD(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=mr();a=Ri(c);var f=Li(o,a,c);f!==null&&(gr(f,o,c),gc(f,o,c)),o={cache:Uh()},a.payload=o;return}o=o.return}}function ZD(a,o,c){var f=mr();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Dd(a)?gS(o,c):(c=_h(a,o,c,f),c!==null&&(gr(c,a,f),yS(c,o,f)))}function mS(a,o,c){var f=mr();Ac(a,o,c,f)}function Ac(a,o,c,f){var v={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Dd(a))gS(o,v);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var P=o.lastRenderedState,_=x(P,c);if(v.hasEagerState=!0,v.eagerState=_,ke(_,P))return hd(a,o,v,0),Ct===null&&pd(),!1}catch{}finally{}if(c=_h(a,o,v,f),c!==null)return gr(c,a,f),yS(c,o,f),!0}return!1}function dm(a,o,c,f){if(f={lane:2,revertLane:Hm(),action:f,hasEagerState:!1,eagerState:null,next:null},Dd(a)){if(o)throw Error(r(479))}else o=_h(a,c,f,2),o!==null&&gr(o,a,2)}function Dd(a){var o=a.alternate;return a===Fe||o!==null&&o===Fe}function gS(a,o){qo=Td=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function yS(a,o,c){if((c&4194048)!==0){var f=o.lanes;f&=a.pendingLanes,c|=f,o.lanes=c,Gt(a,c)}}var kd={readContext:$n,use:wd,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},vS={readContext:$n,use:wd,useCallback:function(a,o){return tr().memoizedState=[a,o===void 0?null:o],a},useContext:$n,useEffect:tS,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,_d(4194308,4,iS.bind(null,o,a),c)},useLayoutEffect:function(a,o){return _d(4194308,4,a,o)},useInsertionEffect:function(a,o){_d(4,2,a,o)},useMemo:function(a,o){var c=tr();o=o===void 0?null:o;var f=a();if(Bs){Ye(!0);try{a()}finally{Ye(!1)}}return c.memoizedState=[f,o],f},useReducer:function(a,o,c){var f=tr();if(c!==void 0){var v=c(o);if(Bs){Ye(!0);try{c(o)}finally{Ye(!1)}}}else v=o;return f.memoizedState=f.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},f.queue=a,a=a.dispatch=ZD.bind(null,Fe,a),[f.memoizedState,a]},useRef:function(a){var o=tr();return a={current:a},o.memoizedState=a},useState:function(a){a=im(a);var o=a.queue,c=mS.bind(null,Fe,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:om,useDeferredValue:function(a,o){var c=tr();return lm(c,a,o)},useTransition:function(){var a=im(!1);return a=uS.bind(null,Fe,a.queue,!0,!1),tr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var f=Fe,v=tr();if(lt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),Ct===null)throw Error(r(349));(et&124)!==0||Bx(f,o,c)}v.memoizedState=c;var x={value:c,getSnapshot:o};return v.queue=x,tS(zx.bind(null,f,x,a),[a]),f.flags|=2048,Vo(9,Nd(),Ux.bind(null,f,x,c,o),null),c},useId:function(){var a=tr(),o=Ct.identifierPrefix;if(lt){var c=Za,f=Qa;c=(f&~(1<<32-nt(f)-1)).toString(32)+c,o="«"+o+"R"+c,c=Pd++,0<c&&(o+="H"+c.toString(32)),o+="»"}else c=FD++,o="«"+o+"r"+c.toString(32)+"»";return a.memoizedState=o},useHostTransitionStatus:um,useFormState:Xx,useActionState:Xx,useOptimistic:function(a){var o=tr();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=dm.bind(null,Fe,!0,c),c.dispatch=o,[a,o]},useMemoCache:nm,useCacheRefresh:function(){return tr().memoizedState=QD.bind(null,Fe)}},bS={readContext:$n,use:wd,useCallback:oS,useContext:$n,useEffect:nS,useImperativeHandle:sS,useInsertionEffect:rS,useLayoutEffect:aS,useMemo:lS,useReducer:Od,useRef:eS,useState:function(){return Od(ti)},useDebugValue:om,useDeferredValue:function(a,o){var c=Jt();return cS(c,gt.memoizedState,a,o)},useTransition:function(){var a=Od(ti)[0],o=Jt().memoizedState;return[typeof a=="boolean"?a:xc(a),o]},useSyncExternalStore:$x,useId:pS,useHostTransitionStatus:um,useFormState:Qx,useActionState:Qx,useOptimistic:function(a,o){var c=Jt();return Yx(c,gt,a,o)},useMemoCache:nm,useCacheRefresh:hS},JD={readContext:$n,use:wd,useCallback:oS,useContext:$n,useEffect:nS,useImperativeHandle:sS,useInsertionEffect:rS,useLayoutEffect:aS,useMemo:lS,useReducer:am,useRef:eS,useState:function(){return am(ti)},useDebugValue:om,useDeferredValue:function(a,o){var c=Jt();return gt===null?lm(c,a,o):cS(c,gt.memoizedState,a,o)},useTransition:function(){var a=am(ti)[0],o=Jt().memoizedState;return[typeof a=="boolean"?a:xc(a),o]},useSyncExternalStore:$x,useId:pS,useHostTransitionStatus:um,useFormState:Jx,useActionState:Jx,useOptimistic:function(a,o){var c=Jt();return gt!==null?Yx(c,gt,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:nm,useCacheRefresh:hS},Ko=null,Ec=0;function Md(a){var o=Ec;return Ec+=1,Ko===null&&(Ko=[]),_x(Ko,a,o)}function Cc(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function jd(a,o){throw o.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function xS(a){var o=a._init;return o(a._payload)}function SS(a){function o(W,H){if(a){var X=W.deletions;X===null?(W.deletions=[H],W.flags|=16):X.push(H)}}function c(W,H){if(!a)return null;for(;H!==null;)o(W,H),H=H.sibling;return null}function f(W){for(var H=new Map;W!==null;)W.key!==null?H.set(W.key,W):H.set(W.index,W),W=W.sibling;return H}function v(W,H){return W=Xa(W,H),W.index=0,W.sibling=null,W}function x(W,H,X){return W.index=X,a?(X=W.alternate,X!==null?(X=X.index,X<H?(W.flags|=67108866,H):X):(W.flags|=67108866,H)):(W.flags|=1048576,H)}function P(W){return a&&W.alternate===null&&(W.flags|=67108866),W}function _(W,H,X,ue){return H===null||H.tag!==6?(H=kh(X,W.mode,ue),H.return=W,H):(H=v(H,X),H.return=W,H)}function $(W,H,X,ue){var Pe=X.type;return Pe===S?le(W,H,X.props.children,ue,X.key):H!==null&&(H.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===L&&xS(Pe)===H.type)?(H=v(H,X.props),Cc(H,X),H.return=W,H):(H=gd(X.type,X.key,X.props,null,W.mode,ue),Cc(H,X),H.return=W,H)}function J(W,H,X,ue){return H===null||H.tag!==4||H.stateNode.containerInfo!==X.containerInfo||H.stateNode.implementation!==X.implementation?(H=Mh(X,W.mode,ue),H.return=W,H):(H=v(H,X.children||[]),H.return=W,H)}function le(W,H,X,ue,Pe){return H===null||H.tag!==7?(H=Ds(X,W.mode,ue,Pe),H.return=W,H):(H=v(H,X),H.return=W,H)}function de(W,H,X){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=kh(""+H,W.mode,X),H.return=W,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case y:return X=gd(H.type,H.key,H.props,null,W.mode,X),Cc(X,H),X.return=W,X;case b:return H=Mh(H,W.mode,X),H.return=W,H;case L:var ue=H._init;return H=ue(H._payload),de(W,H,X)}if(te(H)||Y(H))return H=Ds(H,W.mode,X,null),H.return=W,H;if(typeof H.then=="function")return de(W,Md(H),X);if(H.$$typeof===N)return de(W,xd(W,H),X);jd(W,H)}return null}function ee(W,H,X,ue){var Pe=H!==null?H.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Pe!==null?null:_(W,H,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case y:return X.key===Pe?$(W,H,X,ue):null;case b:return X.key===Pe?J(W,H,X,ue):null;case L:return Pe=X._init,X=Pe(X._payload),ee(W,H,X,ue)}if(te(X)||Y(X))return Pe!==null?null:le(W,H,X,ue,null);if(typeof X.then=="function")return ee(W,H,Md(X),ue);if(X.$$typeof===N)return ee(W,H,xd(W,X),ue);jd(W,X)}return null}function re(W,H,X,ue,Pe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return W=W.get(X)||null,_(H,W,""+ue,Pe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case y:return W=W.get(ue.key===null?X:ue.key)||null,$(H,W,ue,Pe);case b:return W=W.get(ue.key===null?X:ue.key)||null,J(H,W,ue,Pe);case L:var Ve=ue._init;return ue=Ve(ue._payload),re(W,H,X,ue,Pe)}if(te(ue)||Y(ue))return W=W.get(X)||null,le(H,W,ue,Pe,null);if(typeof ue.then=="function")return re(W,H,X,Md(ue),Pe);if(ue.$$typeof===N)return re(W,H,X,xd(H,ue),Pe);jd(H,ue)}return null}function $e(W,H,X,ue){for(var Pe=null,Ve=null,Ne=H,Re=H=0,bn=null;Ne!==null&&Re<X.length;Re++){Ne.index>Re?(bn=Ne,Ne=null):bn=Ne.sibling;var rt=ee(W,Ne,X[Re],ue);if(rt===null){Ne===null&&(Ne=bn);break}a&&Ne&&rt.alternate===null&&o(W,Ne),H=x(rt,H,Re),Ve===null?Pe=rt:Ve.sibling=rt,Ve=rt,Ne=bn}if(Re===X.length)return c(W,Ne),lt&&Ms(W,Re),Pe;if(Ne===null){for(;Re<X.length;Re++)Ne=de(W,X[Re],ue),Ne!==null&&(H=x(Ne,H,Re),Ve===null?Pe=Ne:Ve.sibling=Ne,Ve=Ne);return lt&&Ms(W,Re),Pe}for(Ne=f(Ne);Re<X.length;Re++)bn=re(Ne,W,Re,X[Re],ue),bn!==null&&(a&&bn.alternate!==null&&Ne.delete(bn.key===null?Re:bn.key),H=x(bn,H,Re),Ve===null?Pe=bn:Ve.sibling=bn,Ve=bn);return a&&Ne.forEach(function(es){return o(W,es)}),lt&&Ms(W,Re),Pe}function je(W,H,X,ue){if(X==null)throw Error(r(151));for(var Pe=null,Ve=null,Ne=H,Re=H=0,bn=null,rt=X.next();Ne!==null&&!rt.done;Re++,rt=X.next()){Ne.index>Re?(bn=Ne,Ne=null):bn=Ne.sibling;var es=ee(W,Ne,rt.value,ue);if(es===null){Ne===null&&(Ne=bn);break}a&&Ne&&es.alternate===null&&o(W,Ne),H=x(es,H,Re),Ve===null?Pe=es:Ve.sibling=es,Ve=es,Ne=bn}if(rt.done)return c(W,Ne),lt&&Ms(W,Re),Pe;if(Ne===null){for(;!rt.done;Re++,rt=X.next())rt=de(W,rt.value,ue),rt!==null&&(H=x(rt,H,Re),Ve===null?Pe=rt:Ve.sibling=rt,Ve=rt);return lt&&Ms(W,Re),Pe}for(Ne=f(Ne);!rt.done;Re++,rt=X.next())rt=re(Ne,W,Re,rt.value,ue),rt!==null&&(a&&rt.alternate!==null&&Ne.delete(rt.key===null?Re:rt.key),H=x(rt,H,Re),Ve===null?Pe=rt:Ve.sibling=rt,Ve=rt);return a&&Ne.forEach(function(eM){return o(W,eM)}),lt&&Ms(W,Re),Pe}function vt(W,H,X,ue){if(typeof X=="object"&&X!==null&&X.type===S&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case y:e:{for(var Pe=X.key;H!==null;){if(H.key===Pe){if(Pe=X.type,Pe===S){if(H.tag===7){c(W,H.sibling),ue=v(H,X.props.children),ue.return=W,W=ue;break e}}else if(H.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===L&&xS(Pe)===H.type){c(W,H.sibling),ue=v(H,X.props),Cc(ue,X),ue.return=W,W=ue;break e}c(W,H);break}else o(W,H);H=H.sibling}X.type===S?(ue=Ds(X.props.children,W.mode,ue,X.key),ue.return=W,W=ue):(ue=gd(X.type,X.key,X.props,null,W.mode,ue),Cc(ue,X),ue.return=W,W=ue)}return P(W);case b:e:{for(Pe=X.key;H!==null;){if(H.key===Pe)if(H.tag===4&&H.stateNode.containerInfo===X.containerInfo&&H.stateNode.implementation===X.implementation){c(W,H.sibling),ue=v(H,X.children||[]),ue.return=W,W=ue;break e}else{c(W,H);break}else o(W,H);H=H.sibling}ue=Mh(X,W.mode,ue),ue.return=W,W=ue}return P(W);case L:return Pe=X._init,X=Pe(X._payload),vt(W,H,X,ue)}if(te(X))return $e(W,H,X,ue);if(Y(X)){if(Pe=Y(X),typeof Pe!="function")throw Error(r(150));return X=Pe.call(X),je(W,H,X,ue)}if(typeof X.then=="function")return vt(W,H,Md(X),ue);if(X.$$typeof===N)return vt(W,H,xd(W,X),ue);jd(W,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,H!==null&&H.tag===6?(c(W,H.sibling),ue=v(H,X),ue.return=W,W=ue):(c(W,H),ue=kh(X,W.mode,ue),ue.return=W,W=ue),P(W)):c(W,H)}return function(W,H,X,ue){try{Ec=0;var Pe=vt(W,H,X,ue);return Ko=null,Pe}catch(Ne){if(Ne===hc||Ne===Ad)throw Ne;var Ve=dr(29,Ne,null,W.mode);return Ve.lanes=ue,Ve.return=W,Ve}finally{}}}var Wo=SS(!0),AS=SS(!1),$r=F(null),Ta=null;function Bi(a){var o=a.alternate;se(ln,ln.current&1),se($r,a),Ta===null&&(o===null||Yo.current!==null||o.memoizedState!==null)&&(Ta=a)}function ES(a){if(a.tag===22){if(se(ln,ln.current),se($r,a),Ta===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(Ta=a)}}else Ui()}function Ui(){se(ln,ln.current),se($r,$r.current)}function ni(a){V($r),Ta===a&&(Ta=null),V(ln)}var ln=F(0);function Id(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||tg(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function fm(a,o,c,f){o=a.memoizedState,c=c(f,o),c=c==null?o:h({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var pm={enqueueSetState:function(a,o,c){a=a._reactInternals;var f=mr(),v=Ri(f);v.payload=o,c!=null&&(v.callback=c),o=Li(a,v,f),o!==null&&(gr(o,a,f),gc(o,a,f))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var f=mr(),v=Ri(f);v.tag=1,v.payload=o,c!=null&&(v.callback=c),o=Li(a,v,f),o!==null&&(gr(o,a,f),gc(o,a,f))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=mr(),f=Ri(c);f.tag=2,o!=null&&(f.callback=o),o=Li(a,f,c),o!==null&&(gr(o,a,c),gc(o,a,c))}};function CS(a,o,c,f,v,x,P){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,x,P):o.prototype&&o.prototype.isPureReactComponent?!Ue(c,f)||!Ue(v,x):!0}function TS(a,o,c,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==a&&pm.enqueueReplaceState(o,o.state,null)}function Us(a,o){var c=o;if("ref"in o){c={};for(var f in o)f!=="ref"&&(c[f]=o[f])}if(a=a.defaultProps){c===o&&(c=h({},c));for(var v in a)c[v]===void 0&&(c[v]=a[v])}return c}var Rd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function PS(a){Rd(a)}function wS(a){console.error(a)}function OS(a){Rd(a)}function Ld(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function NS(a,o,c){try{var f=a.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function hm(a,o,c){return c=Ri(c),c.tag=3,c.payload={element:null},c.callback=function(){Ld(a,o)},c}function _S(a){return a=Ri(a),a.tag=3,a}function DS(a,o,c,f){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var x=f.value;a.payload=function(){return v(x)},a.callback=function(){NS(o,c,f)}}var P=c.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(a.callback=function(){NS(o,c,f),typeof v!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var _=f.stack;this.componentDidCatch(f.value,{componentStack:_!==null?_:""})})}function ek(a,o,c,f,v){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=c.alternate,o!==null&&dc(o,c,v,!0),c=$r.current,c!==null){switch(c.tag){case 13:return Ta===null?$m():c.alternate===null&&Ut===0&&(Ut=3),c.flags&=-257,c.flags|=65536,c.lanes=v,f===Hh?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([f]):o.add(f),Um(a,f,v)),!1;case 22:return c.flags|=65536,f===Hh?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([f]):c.add(f)),Um(a,f,v)),!1}throw Error(r(435,c.tag))}return Um(a,f,v),$m(),!1}if(lt)return o=$r.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,f!==Rh&&(a=Error(r(422),{cause:f}),uc(jr(a,c)))):(f!==Rh&&(o=Error(r(423),{cause:f}),uc(jr(o,c))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,f=jr(f,c),v=hm(a.stateNode,f,v),Fh(a,v),Ut!==4&&(Ut=2)),!1;var x=Error(r(520),{cause:f});if(x=jr(x,c),Dc===null?Dc=[x]:Dc.push(x),Ut!==4&&(Ut=2),o===null)return!0;f=jr(f,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=v&-v,c.lanes|=a,a=hm(c.stateNode,f,a),Fh(c,a),!1;case 1:if(o=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Fi===null||!Fi.has(x))))return c.flags|=65536,v&=-v,c.lanes|=v,v=_S(v),DS(v,a,c,f),Fh(c,v),!1}c=c.return}while(c!==null);return!1}var kS=Error(r(461)),yn=!1;function Pn(a,o,c,f){o.child=a===null?AS(o,null,c,f):Wo(o,a.child,c,f)}function MS(a,o,c,f,v){c=c.render;var x=o.ref;if("ref"in f){var P={};for(var _ in f)_!=="ref"&&(P[_]=f[_])}else P=f;return Ls(o),f=Qh(a,o,c,P,x,v),_=Zh(),a!==null&&!yn?(Jh(a,o,v),ri(a,o,v)):(lt&&_&&jh(o),o.flags|=1,Pn(a,o,f,v),o.child)}function jS(a,o,c,f,v){if(a===null){var x=c.type;return typeof x=="function"&&!Dh(x)&&x.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=x,IS(a,o,x,f,v)):(a=gd(c.type,null,f,o,o.mode,v),a.ref=o.ref,a.return=o,o.child=a)}if(x=a.child,!Am(a,v)){var P=x.memoizedProps;if(c=c.compare,c=c!==null?c:Ue,c(P,f)&&a.ref===o.ref)return ri(a,o,v)}return o.flags|=1,a=Xa(x,f),a.ref=o.ref,a.return=o,o.child=a}function IS(a,o,c,f,v){if(a!==null){var x=a.memoizedProps;if(Ue(x,f)&&a.ref===o.ref)if(yn=!1,o.pendingProps=f=x,Am(a,v))(a.flags&131072)!==0&&(yn=!0);else return o.lanes=a.lanes,ri(a,o,v)}return mm(a,o,c,f,v)}function RS(a,o,c){var f=o.pendingProps,v=f.children,x=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=x!==null?x.baseLanes|c:c,a!==null){for(v=o.child=a.child,x=0;v!==null;)x=x|v.lanes|v.childLanes,v=v.sibling;o.childLanes=x&~f}else o.childLanes=0,o.child=null;return LS(a,o,f,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Sd(o,x!==null?x.cachePool:null),x!==null?Ix(o,x):Kh(),ES(o);else return o.lanes=o.childLanes=536870912,LS(a,o,x!==null?x.baseLanes|c:c,c)}else x!==null?(Sd(o,x.cachePool),Ix(o,x),Ui(),o.memoizedState=null):(a!==null&&Sd(o,null),Kh(),Ui());return Pn(a,o,v,c),o.child}function LS(a,o,c,f){var v=Gh();return v=v===null?null:{parent:on._currentValue,pool:v},o.memoizedState={baseLanes:c,cachePool:v},a!==null&&Sd(o,null),Kh(),ES(o),a!==null&&dc(a,o,f,!0),null}function $d(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function mm(a,o,c,f,v){return Ls(o),c=Qh(a,o,c,f,void 0,v),f=Zh(),a!==null&&!yn?(Jh(a,o,v),ri(a,o,v)):(lt&&f&&jh(o),o.flags|=1,Pn(a,o,c,v),o.child)}function $S(a,o,c,f,v,x){return Ls(o),o.updateQueue=null,c=Lx(o,f,c,v),Rx(a),f=Zh(),a!==null&&!yn?(Jh(a,o,x),ri(a,o,x)):(lt&&f&&jh(o),o.flags|=1,Pn(a,o,c,x),o.child)}function BS(a,o,c,f,v){if(Ls(o),o.stateNode===null){var x=Bo,P=c.contextType;typeof P=="object"&&P!==null&&(x=$n(P)),x=new c(f,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=pm,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=f,x.state=o.memoizedState,x.refs={},Yh(o),P=c.contextType,x.context=typeof P=="object"&&P!==null?$n(P):Bo,x.state=o.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(fm(o,c,P,f),x.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(P=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),P!==x.state&&pm.enqueueReplaceState(x,x.state,null),vc(o,f,x,v),yc(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(a===null){x=o.stateNode;var _=o.memoizedProps,$=Us(c,_);x.props=$;var J=x.context,le=c.contextType;P=Bo,typeof le=="object"&&le!==null&&(P=$n(le));var de=c.getDerivedStateFromProps;le=typeof de=="function"||typeof x.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,le||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_||J!==P)&&TS(o,x,f,P),Ii=!1;var ee=o.memoizedState;x.state=ee,vc(o,f,x,v),yc(),J=o.memoizedState,_||ee!==J||Ii?(typeof de=="function"&&(fm(o,c,de,f),J=o.memoizedState),($=Ii||CS(o,c,$,f,ee,J,P))?(le||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=J),x.props=f,x.state=J,x.context=P,f=$):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{x=o.stateNode,qh(a,o),P=o.memoizedProps,le=Us(c,P),x.props=le,de=o.pendingProps,ee=x.context,J=c.contextType,$=Bo,typeof J=="object"&&J!==null&&($=$n(J)),_=c.getDerivedStateFromProps,(J=typeof _=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(P!==de||ee!==$)&&TS(o,x,f,$),Ii=!1,ee=o.memoizedState,x.state=ee,vc(o,f,x,v),yc();var re=o.memoizedState;P!==de||ee!==re||Ii||a!==null&&a.dependencies!==null&&bd(a.dependencies)?(typeof _=="function"&&(fm(o,c,_,f),re=o.memoizedState),(le=Ii||CS(o,c,le,f,ee,re,$)||a!==null&&a.dependencies!==null&&bd(a.dependencies))?(J||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,re,$),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,re,$)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||P===a.memoizedProps&&ee===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&ee===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=re),x.props=f,x.state=re,x.context=$,f=le):(typeof x.componentDidUpdate!="function"||P===a.memoizedProps&&ee===a.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||P===a.memoizedProps&&ee===a.memoizedState||(o.flags|=1024),f=!1)}return x=f,$d(a,o),f=(o.flags&128)!==0,x||f?(x=o.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,a!==null&&f?(o.child=Wo(o,a.child,null,v),o.child=Wo(o,null,c,v)):Pn(a,o,c,v),o.memoizedState=x.state,a=o.child):a=ri(a,o,v),a}function US(a,o,c,f){return cc(),o.flags|=256,Pn(a,o,c,f),o.child}var gm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ym(a){return{baseLanes:a,cachePool:wx()}}function vm(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=Br),a}function zS(a,o,c){var f=o.pendingProps,v=!1,x=(o.flags&128)!==0,P;if((P=x)||(P=a!==null&&a.memoizedState===null?!1:(ln.current&2)!==0),P&&(v=!0,o.flags&=-129),P=(o.flags&32)!==0,o.flags&=-33,a===null){if(lt){if(v?Bi(o):Ui(),lt){var _=Bt,$;if($=_){e:{for($=_,_=Ca;$.nodeType!==8;){if(!_){_=null;break e}if($=aa($.nextSibling),$===null){_=null;break e}}_=$}_!==null?(o.memoizedState={dehydrated:_,treeContext:ks!==null?{id:Qa,overflow:Za}:null,retryLane:536870912,hydrationErrors:null},$=dr(18,null,null,0),$.stateNode=_,$.return=o,o.child=$,Vn=o,Bt=null,$=!0):$=!1}$||Is(o)}if(_=o.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return tg(_)?o.lanes=32:o.lanes=536870912,null;ni(o)}return _=f.children,f=f.fallback,v?(Ui(),v=o.mode,_=Bd({mode:"hidden",children:_},v),f=Ds(f,v,c,null),_.return=o,f.return=o,_.sibling=f,o.child=_,v=o.child,v.memoizedState=ym(c),v.childLanes=vm(a,P,c),o.memoizedState=gm,f):(Bi(o),bm(o,_))}if($=a.memoizedState,$!==null&&(_=$.dehydrated,_!==null)){if(x)o.flags&256?(Bi(o),o.flags&=-257,o=xm(a,o,c)):o.memoizedState!==null?(Ui(),o.child=a.child,o.flags|=128,o=null):(Ui(),v=f.fallback,_=o.mode,f=Bd({mode:"visible",children:f.children},_),v=Ds(v,_,c,null),v.flags|=2,f.return=o,v.return=o,f.sibling=v,o.child=f,Wo(o,a.child,null,c),f=o.child,f.memoizedState=ym(c),f.childLanes=vm(a,P,c),o.memoizedState=gm,o=v);else if(Bi(o),tg(_)){if(P=_.nextSibling&&_.nextSibling.dataset,P)var J=P.dgst;P=J,f=Error(r(419)),f.stack="",f.digest=P,uc({value:f,source:null,stack:null}),o=xm(a,o,c)}else if(yn||dc(a,o,c,!1),P=(c&a.childLanes)!==0,yn||P){if(P=Ct,P!==null&&(f=c&-c,f=(f&42)!==0?1:ot(f),f=(f&(P.suspendedLanes|c))!==0?0:f,f!==0&&f!==$.retryLane))throw $.retryLane=f,$o(a,f),gr(P,a,f),kS;_.data==="$?"||$m(),o=xm(a,o,c)}else _.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=$.treeContext,Bt=aa(_.nextSibling),Vn=o,lt=!0,js=null,Ca=!1,a!==null&&(Rr[Lr++]=Qa,Rr[Lr++]=Za,Rr[Lr++]=ks,Qa=a.id,Za=a.overflow,ks=o),o=bm(o,f.children),o.flags|=4096);return o}return v?(Ui(),v=f.fallback,_=o.mode,$=a.child,J=$.sibling,f=Xa($,{mode:"hidden",children:f.children}),f.subtreeFlags=$.subtreeFlags&65011712,J!==null?v=Xa(J,v):(v=Ds(v,_,c,null),v.flags|=2),v.return=o,f.return=o,f.sibling=v,o.child=f,f=v,v=o.child,_=a.child.memoizedState,_===null?_=ym(c):($=_.cachePool,$!==null?(J=on._currentValue,$=$.parent!==J?{parent:J,pool:J}:$):$=wx(),_={baseLanes:_.baseLanes|c,cachePool:$}),v.memoizedState=_,v.childLanes=vm(a,P,c),o.memoizedState=gm,f):(Bi(o),c=a.child,a=c.sibling,c=Xa(c,{mode:"visible",children:f.children}),c.return=o,c.sibling=null,a!==null&&(P=o.deletions,P===null?(o.deletions=[a],o.flags|=16):P.push(a)),o.child=c,o.memoizedState=null,c)}function bm(a,o){return o=Bd({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Bd(a,o){return a=dr(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function xm(a,o,c){return Wo(o,a.child,null,c),a=bm(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function GS(a,o,c){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),$h(a.return,o,c)}function Sm(a,o,c,f,v){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=f,x.tail=c,x.tailMode=v)}function HS(a,o,c){var f=o.pendingProps,v=f.revealOrder,x=f.tail;if(Pn(a,o,f.children,c),f=ln.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&GS(a,c,o);else if(a.tag===19)GS(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(se(ln,f),v){case"forwards":for(c=o.child,v=null;c!==null;)a=c.alternate,a!==null&&Id(a)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),Sm(o,!1,v,c,x);break;case"backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(a=v.alternate,a!==null&&Id(a)===null){o.child=v;break}a=v.sibling,v.sibling=c,c=v,v=a}Sm(o,!0,c,null,x);break;case"together":Sm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ri(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),qi|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(dc(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=Xa(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=Xa(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function Am(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&bd(a)))}function tk(a,o,c){switch(o.tag){case 3:Ke(o,o.stateNode.containerInfo),ji(o,on,a.memoizedState.cache),cc();break;case 27:case 5:Le(o);break;case 4:Ke(o,o.stateNode.containerInfo);break;case 10:ji(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Bi(o),o.flags|=128,null):(c&o.child.childLanes)!==0?zS(a,o,c):(Bi(o),a=ri(a,o,c),a!==null?a.sibling:null);Bi(o);break;case 19:var v=(a.flags&128)!==0;if(f=(c&o.childLanes)!==0,f||(dc(a,o,c,!1),f=(c&o.childLanes)!==0),v){if(f)return HS(a,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),se(ln,ln.current),f)break;return null;case 22:case 23:return o.lanes=0,RS(a,o,c);case 24:ji(o,on,a.memoizedState.cache)}return ri(a,o,c)}function YS(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)yn=!0;else{if(!Am(a,c)&&(o.flags&128)===0)return yn=!1,tk(a,o,c);yn=(a.flags&131072)!==0}else yn=!1,lt&&(o.flags&1048576)!==0&&xx(o,vd,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var f=o.elementType,v=f._init;if(f=v(f._payload),o.type=f,typeof f=="function")Dh(f)?(a=Us(f,a),o.tag=1,o=BS(null,o,f,a,c)):(o.tag=0,o=mm(null,o,f,a,c));else{if(f!=null){if(v=f.$$typeof,v===j){o.tag=11,o=MS(null,o,f,a,c);break e}else if(v===k){o.tag=14,o=jS(null,o,f,a,c);break e}}throw o=Z(f)||f,Error(r(306,o,""))}}return o;case 0:return mm(a,o,o.type,o.pendingProps,c);case 1:return f=o.type,v=Us(f,o.pendingProps),BS(a,o,f,v,c);case 3:e:{if(Ke(o,o.stateNode.containerInfo),a===null)throw Error(r(387));f=o.pendingProps;var x=o.memoizedState;v=x.element,qh(a,o),vc(o,f,null,c);var P=o.memoizedState;if(f=P.cache,ji(o,on,f),f!==x.cache&&Bh(o,[on],c,!0),yc(),f=P.element,x.isDehydrated)if(x={element:f,isDehydrated:!1,cache:P.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=US(a,o,f,c);break e}else if(f!==v){v=jr(Error(r(424)),o),uc(v),o=US(a,o,f,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Bt=aa(a.firstChild),Vn=o,lt=!0,js=null,Ca=!0,c=AS(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(cc(),f===v){o=ri(a,o,c);break e}Pn(a,o,f,c)}o=o.child}return o;case 26:return $d(a,o),a===null?(c=K1(o.type,null,o.pendingProps,null))?o.memoizedState=c:lt||(c=o.type,a=o.pendingProps,f=Jd(ye.current).createElement(c),f[$t]=o,f[jn]=a,On(f,c,a),Ot(f),o.stateNode=f):o.memoizedState=K1(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Le(o),a===null&&lt&&(f=o.stateNode=q1(o.type,o.pendingProps,ye.current),Vn=o,Ca=!0,v=Bt,Wi(o.type)?(ng=v,Bt=aa(f.firstChild)):Bt=v),Pn(a,o,o.pendingProps.children,c),$d(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&lt&&((v=f=Bt)&&(f=Nk(f,o.type,o.pendingProps,Ca),f!==null?(o.stateNode=f,Vn=o,Bt=aa(f.firstChild),Ca=!1,v=!0):v=!1),v||Is(o)),Le(o),v=o.type,x=o.pendingProps,P=a!==null?a.memoizedProps:null,f=x.children,Zm(v,x)?f=null:P!==null&&Zm(v,P)&&(o.flags|=32),o.memoizedState!==null&&(v=Qh(a,o,VD,null,null,c),Uc._currentValue=v),$d(a,o),Pn(a,o,f,c),o.child;case 6:return a===null&&lt&&((a=c=Bt)&&(c=_k(c,o.pendingProps,Ca),c!==null?(o.stateNode=c,Vn=o,Bt=null,a=!0):a=!1),a||Is(o)),null;case 13:return zS(a,o,c);case 4:return Ke(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=Wo(o,null,f,c):Pn(a,o,f,c),o.child;case 11:return MS(a,o,o.type,o.pendingProps,c);case 7:return Pn(a,o,o.pendingProps,c),o.child;case 8:return Pn(a,o,o.pendingProps.children,c),o.child;case 12:return Pn(a,o,o.pendingProps.children,c),o.child;case 10:return f=o.pendingProps,ji(o,o.type,f.value),Pn(a,o,f.children,c),o.child;case 9:return v=o.type._context,f=o.pendingProps.children,Ls(o),v=$n(v),f=f(v),o.flags|=1,Pn(a,o,f,c),o.child;case 14:return jS(a,o,o.type,o.pendingProps,c);case 15:return IS(a,o,o.type,o.pendingProps,c);case 19:return HS(a,o,c);case 31:return f=o.pendingProps,c=o.mode,f={mode:f.mode,children:f.children},a===null?(c=Bd(f,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Xa(a.child,f),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return RS(a,o,c);case 24:return Ls(o),f=$n(on),a===null?(v=Gh(),v===null&&(v=Ct,x=Uh(),v.pooledCache=x,x.refCount++,x!==null&&(v.pooledCacheLanes|=c),v=x),o.memoizedState={parent:f,cache:v},Yh(o),ji(o,on,v)):((a.lanes&c)!==0&&(qh(a,o),vc(o,null,null,c),yc()),v=a.memoizedState,x=o.memoizedState,v.parent!==f?(v={parent:f,cache:f},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),ji(o,on,f)):(f=x.cache,ji(o,on,f),f!==v.cache&&Bh(o,[on],c,!0))),Pn(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ai(a){a.flags|=4}function qS(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!J1(o)){if(o=$r.current,o!==null&&((et&4194048)===et?Ta!==null:(et&62914560)!==et&&(et&536870912)===0||o!==Ta))throw mc=Hh,Ox;a.flags|=8192}}function Ud(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?he():536870912,a.lanes|=o,Jo|=o)}function Tc(a,o){if(!lt)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Rt(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,f=0;if(o)for(var v=a.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=f,a.childLanes=c,o}function nk(a,o,c){var f=o.pendingProps;switch(Ih(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(o),null;case 1:return Rt(o),null;case 3:return c=o.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),ei(on),xe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(lc(o)?ai(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ex())),Rt(o),null;case 26:return c=o.memoizedState,a===null?(ai(o),c!==null?(Rt(o),qS(o,c)):(Rt(o),o.flags&=-16777217)):c?c!==a.memoizedState?(ai(o),Rt(o),qS(o,c)):(Rt(o),o.flags&=-16777217):(a.memoizedProps!==f&&ai(o),Rt(o),o.flags&=-16777217),null;case 27:ze(o),c=ye.current;var v=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==f&&ai(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}a=ge.current,lc(o)?Sx(o):(a=q1(v,f,c),o.stateNode=a,ai(o))}return Rt(o),null;case 5:if(ze(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&ai(o);else{if(!f){if(o.stateNode===null)throw Error(r(166));return Rt(o),null}if(a=ge.current,lc(o))Sx(o);else{switch(v=Jd(ye.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?v.createElement("select",{is:f.is}):v.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?v.createElement(c,{is:f.is}):v.createElement(c)}}a[$t]=o,a[jn]=f;e:for(v=o.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===o)break e;for(;v.sibling===null;){if(v.return===null||v.return===o)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}o.stateNode=a;e:switch(On(a,c,f),c){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ai(o)}}return Rt(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==f&&ai(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(r(166));if(a=ye.current,lc(o)){if(a=o.stateNode,c=o.memoizedProps,f=null,v=Vn,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}a[$t]=o,a=!!(a.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||$1(a.nodeValue,c)),a||Is(o)}else a=Jd(a).createTextNode(f),a[$t]=o,o.stateNode=a}return Rt(o),null;case 13:if(f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=lc(o),f!==null&&f.dehydrated!==null){if(a===null){if(!v)throw Error(r(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[$t]=o}else cc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),v=!1}else v=Ex(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(ni(o),o):(ni(o),null)}if(ni(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=f!==null,a=a!==null&&a.memoizedState!==null,c){f=o.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool);var x=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),x!==v&&(f.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),Ud(o,o.updateQueue),Rt(o),null;case 4:return xe(),a===null&&Vm(o.stateNode.containerInfo),Rt(o),null;case 10:return ei(o.type),Rt(o),null;case 19:if(V(ln),v=o.memoizedState,v===null)return Rt(o),null;if(f=(o.flags&128)!==0,x=v.rendering,x===null)if(f)Tc(v,!1);else{if(Ut!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(x=Id(a),x!==null){for(o.flags|=128,Tc(v,!1),a=x.updateQueue,o.updateQueue=a,Ud(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)bx(c,a),c=c.sibling;return se(ln,ln.current&1|2),o.child}a=a.sibling}v.tail!==null&&Pt()>Hd&&(o.flags|=128,f=!0,Tc(v,!1),o.lanes=4194304)}else{if(!f)if(a=Id(x),a!==null){if(o.flags|=128,f=!0,a=a.updateQueue,o.updateQueue=a,Ud(o,a),Tc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!x.alternate&&!lt)return Rt(o),null}else 2*Pt()-v.renderingStartTime>Hd&&c!==536870912&&(o.flags|=128,f=!0,Tc(v,!1),o.lanes=4194304);v.isBackwards?(x.sibling=o.child,o.child=x):(a=v.last,a!==null?a.sibling=x:o.child=x,v.last=x)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=Pt(),o.sibling=null,a=ln.current,se(ln,f?a&1|2:a&1),o):(Rt(o),null);case 22:case 23:return ni(o),Wh(),f=o.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(c&536870912)!==0&&(o.flags&128)===0&&(Rt(o),o.subtreeFlags&6&&(o.flags|=8192)):Rt(o),c=o.updateQueue,c!==null&&Ud(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048),a!==null&&V($s),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),ei(on),Rt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function rk(a,o){switch(Ih(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return ei(on),xe(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return ze(o),null;case 13:if(ni(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));cc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return V(ln),null;case 4:return xe(),null;case 10:return ei(o.type),null;case 22:case 23:return ni(o),Wh(),a!==null&&V($s),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return ei(on),null;case 25:return null;default:return null}}function FS(a,o){switch(Ih(o),o.tag){case 3:ei(on),xe();break;case 26:case 27:case 5:ze(o);break;case 4:xe();break;case 13:ni(o);break;case 19:V(ln);break;case 10:ei(o.type);break;case 22:case 23:ni(o),Wh(),a!==null&&V($s);break;case 24:ei(on)}}function Pc(a,o){try{var c=o.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var v=f.next;c=v;do{if((c.tag&a)===a){f=void 0;var x=c.create,P=c.inst;f=x(),P.destroy=f}c=c.next}while(c!==v)}}catch(_){xt(o,o.return,_)}}function zi(a,o,c){try{var f=o.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var x=v.next;f=x;do{if((f.tag&a)===a){var P=f.inst,_=P.destroy;if(_!==void 0){P.destroy=void 0,v=o;var $=c,J=_;try{J()}catch(le){xt(v,$,le)}}}f=f.next}while(f!==x)}}catch(le){xt(o,o.return,le)}}function VS(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{jx(o,c)}catch(f){xt(a,a.return,f)}}}function KS(a,o,c){c.props=Us(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(f){xt(a,o,f)}}function wc(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof c=="function"?a.refCleanup=c(f):c.current=f}}catch(v){xt(a,o,v)}}function Pa(a,o){var c=a.ref,f=a.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(v){xt(a,o,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){xt(a,o,v)}else c.current=null}function WS(a){var o=a.type,c=a.memoizedProps,f=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(v){xt(a,a.return,v)}}function Em(a,o,c){try{var f=a.stateNode;Ck(f,a.type,c,o),f[jn]=o}catch(v){xt(a,a.return,v)}}function XS(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Wi(a.type)||a.tag===4}function Cm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||XS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Wi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Tm(a,o,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Zd));else if(f!==4&&(f===27&&Wi(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(Tm(a,o,c),a=a.sibling;a!==null;)Tm(a,o,c),a=a.sibling}function zd(a,o,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(f!==4&&(f===27&&Wi(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(zd(a,o,c),a=a.sibling;a!==null;)zd(a,o,c),a=a.sibling}function QS(a){var o=a.stateNode,c=a.memoizedProps;try{for(var f=a.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);On(o,f,c),o[$t]=a,o[jn]=c}catch(x){xt(a,a.return,x)}}var ii=!1,qt=!1,Pm=!1,ZS=typeof WeakSet=="function"?WeakSet:Set,vn=null;function ak(a,o){if(a=a.containerInfo,Xm=sf,a=Ka(a),Ns(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,x=f.focusNode;f=f.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var P=0,_=-1,$=-1,J=0,le=0,de=a,ee=null;t:for(;;){for(var re;de!==c||v!==0&&de.nodeType!==3||(_=P+v),de!==x||f!==0&&de.nodeType!==3||($=P+f),de.nodeType===3&&(P+=de.nodeValue.length),(re=de.firstChild)!==null;)ee=de,de=re;for(;;){if(de===a)break t;if(ee===c&&++J===v&&(_=P),ee===x&&++le===f&&($=P),(re=de.nextSibling)!==null)break;de=ee,ee=de.parentNode}de=re}c=_===-1||$===-1?null:{start:_,end:$}}else c=null}c=c||{start:0,end:0}}else c=null;for(Qm={focusedElem:a,selectionRange:c},sf=!1,vn=o;vn!==null;)if(o=vn,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,vn=a;else for(;vn!==null;){switch(o=vn,x=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,c=o,v=x.memoizedProps,x=x.memoizedState,f=c.stateNode;try{var $e=Us(c.type,v,c.elementType===c.type);a=f.getSnapshotBeforeUpdate($e,x),f.__reactInternalSnapshotBeforeUpdate=a}catch(je){xt(c,c.return,je)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)eg(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":eg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,vn=a;break}vn=o.return}}function JS(a,o,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Gi(a,c),f&4&&Pc(5,c);break;case 1:if(Gi(a,c),f&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(P){xt(c,c.return,P)}else{var v=Us(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(v,o,a.__reactInternalSnapshotBeforeUpdate)}catch(P){xt(c,c.return,P)}}f&64&&VS(c),f&512&&wc(c,c.return);break;case 3:if(Gi(a,c),f&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{jx(a,o)}catch(P){xt(c,c.return,P)}}break;case 27:o===null&&f&4&&QS(c);case 26:case 5:Gi(a,c),o===null&&f&4&&WS(c),f&512&&wc(c,c.return);break;case 12:Gi(a,c);break;case 13:Gi(a,c),f&4&&n1(a,c),f&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=pk.bind(null,c),Dk(a,c))));break;case 22:if(f=c.memoizedState!==null||ii,!f){o=o!==null&&o.memoizedState!==null||qt,v=ii;var x=qt;ii=f,(qt=o)&&!x?Hi(a,c,(c.subtreeFlags&8772)!==0):Gi(a,c),ii=v,qt=x}break;case 30:break;default:Gi(a,c)}}function e1(a){var o=a.alternate;o!==null&&(a.alternate=null,e1(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Or(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Nt=null,nr=!1;function si(a,o,c){for(c=c.child;c!==null;)t1(a,o,c),c=c.sibling}function t1(a,o,c){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount($a,c)}catch{}switch(c.tag){case 26:qt||Pa(c,o),si(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:qt||Pa(c,o);var f=Nt,v=nr;Wi(c.type)&&(Nt=c.stateNode,nr=!1),si(a,o,c),Rc(c.stateNode),Nt=f,nr=v;break;case 5:qt||Pa(c,o);case 6:if(f=Nt,v=nr,Nt=null,si(a,o,c),Nt=f,nr=v,Nt!==null)if(nr)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(c.stateNode)}catch(x){xt(c,o,x)}else try{Nt.removeChild(c.stateNode)}catch(x){xt(c,o,x)}break;case 18:Nt!==null&&(nr?(a=Nt,H1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),Yc(a)):H1(Nt,c.stateNode));break;case 4:f=Nt,v=nr,Nt=c.stateNode.containerInfo,nr=!0,si(a,o,c),Nt=f,nr=v;break;case 0:case 11:case 14:case 15:qt||zi(2,c,o),qt||zi(4,c,o),si(a,o,c);break;case 1:qt||(Pa(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"&&KS(c,o,f)),si(a,o,c);break;case 21:si(a,o,c);break;case 22:qt=(f=qt)||c.memoizedState!==null,si(a,o,c),qt=f;break;default:si(a,o,c)}}function n1(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Yc(a)}catch(c){xt(o,o.return,c)}}function ik(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new ZS),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new ZS),o;default:throw Error(r(435,a.tag))}}function wm(a,o){var c=ik(a);o.forEach(function(f){var v=hk.bind(null,a,f);c.has(f)||(c.add(f),f.then(v,v))})}function fr(a,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f],x=a,P=o,_=P;e:for(;_!==null;){switch(_.tag){case 27:if(Wi(_.type)){Nt=_.stateNode,nr=!1;break e}break;case 5:Nt=_.stateNode,nr=!1;break e;case 3:case 4:Nt=_.stateNode.containerInfo,nr=!0;break e}_=_.return}if(Nt===null)throw Error(r(160));t1(x,P,v),Nt=null,nr=!1,x=v.alternate,x!==null&&(x.return=null),v.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)r1(o,a),o=o.sibling}var ra=null;function r1(a,o){var c=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:fr(o,a),pr(a),f&4&&(zi(3,a,a.return),Pc(3,a),zi(5,a,a.return));break;case 1:fr(o,a),pr(a),f&512&&(qt||c===null||Pa(c,c.return)),f&64&&ii&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var v=ra;if(fr(o,a),pr(a),f&512&&(qt||c===null||Pa(c,c.return)),f&4){var x=c!==null?c.memoizedState:null;if(f=a.memoizedState,c===null)if(f===null)if(a.stateNode===null){e:{f=a.type,c=a.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":x=v.getElementsByTagName("title")[0],(!x||x[At]||x[$t]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=v.createElement(f),v.head.insertBefore(x,v.querySelector("head > title"))),On(x,f,c),x[$t]=a,Ot(x),f=x;break e;case"link":var P=Q1("link","href",v).get(f+(c.href||""));if(P){for(var _=0;_<P.length;_++)if(x=P[_],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){P.splice(_,1);break t}}x=v.createElement(f),On(x,f,c),v.head.appendChild(x);break;case"meta":if(P=Q1("meta","content",v).get(f+(c.content||""))){for(_=0;_<P.length;_++)if(x=P[_],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){P.splice(_,1);break t}}x=v.createElement(f),On(x,f,c),v.head.appendChild(x);break;default:throw Error(r(468,f))}x[$t]=a,Ot(x),f=x}a.stateNode=f}else Z1(v,a.type,a.stateNode);else a.stateNode=X1(v,f,a.memoizedProps);else x!==f?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,f===null?Z1(v,a.type,a.stateNode):X1(v,f,a.memoizedProps)):f===null&&a.stateNode!==null&&Em(a,a.memoizedProps,c.memoizedProps)}break;case 27:fr(o,a),pr(a),f&512&&(qt||c===null||Pa(c,c.return)),c!==null&&f&4&&Em(a,a.memoizedProps,c.memoizedProps);break;case 5:if(fr(o,a),pr(a),f&512&&(qt||c===null||Pa(c,c.return)),a.flags&32){v=a.stateNode;try{Ga(v,"")}catch(re){xt(a,a.return,re)}}f&4&&a.stateNode!=null&&(v=a.memoizedProps,Em(a,v,c!==null?c.memoizedProps:v)),f&1024&&(Pm=!0);break;case 6:if(fr(o,a),pr(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,c=a.stateNode;try{c.nodeValue=f}catch(re){xt(a,a.return,re)}}break;case 3:if(nf=null,v=ra,ra=ef(o.containerInfo),fr(o,a),ra=v,pr(a),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Yc(o.containerInfo)}catch(re){xt(a,a.return,re)}Pm&&(Pm=!1,a1(a));break;case 4:f=ra,ra=ef(a.stateNode.containerInfo),fr(o,a),pr(a),ra=f;break;case 12:fr(o,a),pr(a);break;case 13:fr(o,a),pr(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Mm=Pt()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,wm(a,f)));break;case 22:v=a.memoizedState!==null;var $=c!==null&&c.memoizedState!==null,J=ii,le=qt;if(ii=J||v,qt=le||$,fr(o,a),qt=le,ii=J,pr(a),f&8192)e:for(o=a.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(c===null||$||ii||qt||zs(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){$=c=o;try{if(x=$.stateNode,v)P=x.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{_=$.stateNode;var de=$.memoizedProps.style,ee=de!=null&&de.hasOwnProperty("display")?de.display:null;_.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(re){xt($,$.return,re)}}}else if(o.tag===6){if(c===null){$=o;try{$.stateNode.nodeValue=v?"":$.memoizedProps}catch(re){xt($,$.return,re)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=a.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,wm(a,c))));break;case 19:fr(o,a),pr(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,wm(a,f)));break;case 30:break;case 21:break;default:fr(o,a),pr(a)}}function pr(a){var o=a.flags;if(o&2){try{for(var c,f=a.return;f!==null;){if(XS(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var v=c.stateNode,x=Cm(a);zd(a,x,v);break;case 5:var P=c.stateNode;c.flags&32&&(Ga(P,""),c.flags&=-33);var _=Cm(a);zd(a,_,P);break;case 3:case 4:var $=c.stateNode.containerInfo,J=Cm(a);Tm(a,J,$);break;default:throw Error(r(161))}}catch(le){xt(a,a.return,le)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function a1(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;a1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Gi(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)JS(a,o.alternate,o),o=o.sibling}function zs(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:zi(4,o,o.return),zs(o);break;case 1:Pa(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&KS(o,o.return,c),zs(o);break;case 27:Rc(o.stateNode);case 26:case 5:Pa(o,o.return),zs(o);break;case 22:o.memoizedState===null&&zs(o);break;case 30:zs(o);break;default:zs(o)}a=a.sibling}}function Hi(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,v=a,x=o,P=x.flags;switch(x.tag){case 0:case 11:case 15:Hi(v,x,c),Pc(4,x);break;case 1:if(Hi(v,x,c),f=x,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(J){xt(f,f.return,J)}if(f=x,v=f.updateQueue,v!==null){var _=f.stateNode;try{var $=v.shared.hiddenCallbacks;if($!==null)for(v.shared.hiddenCallbacks=null,v=0;v<$.length;v++)Mx($[v],_)}catch(J){xt(f,f.return,J)}}c&&P&64&&VS(x),wc(x,x.return);break;case 27:QS(x);case 26:case 5:Hi(v,x,c),c&&f===null&&P&4&&WS(x),wc(x,x.return);break;case 12:Hi(v,x,c);break;case 13:Hi(v,x,c),c&&P&4&&n1(v,x);break;case 22:x.memoizedState===null&&Hi(v,x,c),wc(x,x.return);break;case 30:break;default:Hi(v,x,c)}o=o.sibling}}function Om(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&fc(c))}function Nm(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&fc(a))}function wa(a,o,c,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)i1(a,o,c,f),o=o.sibling}function i1(a,o,c,f){var v=o.flags;switch(o.tag){case 0:case 11:case 15:wa(a,o,c,f),v&2048&&Pc(9,o);break;case 1:wa(a,o,c,f);break;case 3:wa(a,o,c,f),v&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&fc(a)));break;case 12:if(v&2048){wa(a,o,c,f),a=o.stateNode;try{var x=o.memoizedProps,P=x.id,_=x.onPostCommit;typeof _=="function"&&_(P,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch($){xt(o,o.return,$)}}else wa(a,o,c,f);break;case 13:wa(a,o,c,f);break;case 23:break;case 22:x=o.stateNode,P=o.alternate,o.memoizedState!==null?x._visibility&2?wa(a,o,c,f):Oc(a,o):x._visibility&2?wa(a,o,c,f):(x._visibility|=2,Xo(a,o,c,f,(o.subtreeFlags&10256)!==0)),v&2048&&Om(P,o);break;case 24:wa(a,o,c,f),v&2048&&Nm(o.alternate,o);break;default:wa(a,o,c,f)}}function Xo(a,o,c,f,v){for(v=v&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var x=a,P=o,_=c,$=f,J=P.flags;switch(P.tag){case 0:case 11:case 15:Xo(x,P,_,$,v),Pc(8,P);break;case 23:break;case 22:var le=P.stateNode;P.memoizedState!==null?le._visibility&2?Xo(x,P,_,$,v):Oc(x,P):(le._visibility|=2,Xo(x,P,_,$,v)),v&&J&2048&&Om(P.alternate,P);break;case 24:Xo(x,P,_,$,v),v&&J&2048&&Nm(P.alternate,P);break;default:Xo(x,P,_,$,v)}o=o.sibling}}function Oc(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,f=o,v=f.flags;switch(f.tag){case 22:Oc(c,f),v&2048&&Om(f.alternate,f);break;case 24:Oc(c,f),v&2048&&Nm(f.alternate,f);break;default:Oc(c,f)}o=o.sibling}}var Nc=8192;function Qo(a){if(a.subtreeFlags&Nc)for(a=a.child;a!==null;)s1(a),a=a.sibling}function s1(a){switch(a.tag){case 26:Qo(a),a.flags&Nc&&a.memoizedState!==null&&Yk(ra,a.memoizedState,a.memoizedProps);break;case 5:Qo(a);break;case 3:case 4:var o=ra;ra=ef(a.stateNode.containerInfo),Qo(a),ra=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Nc,Nc=16777216,Qo(a),Nc=o):Qo(a));break;default:Qo(a)}}function o1(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function _c(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];vn=f,c1(f,a)}o1(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)l1(a),a=a.sibling}function l1(a){switch(a.tag){case 0:case 11:case 15:_c(a),a.flags&2048&&zi(9,a,a.return);break;case 3:_c(a);break;case 12:_c(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Gd(a)):_c(a);break;default:_c(a)}}function Gd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];vn=f,c1(f,a)}o1(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:zi(8,o,o.return),Gd(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Gd(o));break;default:Gd(o)}a=a.sibling}}function c1(a,o){for(;vn!==null;){var c=vn;switch(c.tag){case 0:case 11:case 15:zi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:fc(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,vn=f;else e:for(c=a;vn!==null;){f=vn;var v=f.sibling,x=f.return;if(e1(f),f===c){vn=null;break e}if(v!==null){v.return=x,vn=v;break e}vn=x}}}var sk={getCacheForType:function(a){var o=$n(on),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},ok=typeof WeakMap=="function"?WeakMap:Map,dt=0,Ct=null,We=null,et=0,ft=0,hr=null,Yi=!1,Zo=!1,_m=!1,oi=0,Ut=0,qi=0,Gs=0,Dm=0,Br=0,Jo=0,Dc=null,rr=null,km=!1,Mm=0,Hd=1/0,Yd=null,Fi=null,wn=0,Vi=null,el=null,tl=0,jm=0,Im=null,u1=null,kc=0,Rm=null;function mr(){if((dt&2)!==0&&et!==0)return et&-et;if(U.T!==null){var a=Go;return a!==0?a:Hm()}return Ht()}function d1(){Br===0&&(Br=(et&536870912)===0||lt?ce():536870912);var a=$r.current;return a!==null&&(a.flags|=32),Br}function gr(a,o,c){(a===Ct&&(ft===2||ft===9)||a.cancelPendingCommit!==null)&&(nl(a,0),Ki(a,et,Br,!1)),Ie(a,c),((dt&2)===0||a!==Ct)&&(a===Ct&&((dt&2)===0&&(Gs|=c),Ut===4&&Ki(a,et,Br,!1)),Oa(a))}function f1(a,o,c){if((dt&6)!==0)throw Error(r(327));var f=!c&&(o&124)===0&&(o&a.expiredLanes)===0||oe(a,o),v=f?uk(a,o):Bm(a,o,!0),x=f;do{if(v===0){Zo&&!f&&Ki(a,o,0,!1);break}else{if(c=a.current.alternate,x&&!lk(c)){v=Bm(a,o,!1),x=!1;continue}if(v===2){if(x=o,a.errorRecoveryDisabledLanes&x)var P=0;else P=a.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){o=P;e:{var _=a;v=Dc;var $=_.current.memoizedState.isDehydrated;if($&&(nl(_,P).flags|=256),P=Bm(_,P,!1),P!==2){if(_m&&!$){_.errorRecoveryDisabledLanes|=x,Gs|=x,v=4;break e}x=rr,rr=v,x!==null&&(rr===null?rr=x:rr.push.apply(rr,x))}v=P}if(x=!1,v!==2)continue}}if(v===1){nl(a,0),Ki(a,o,0,!0);break}e:{switch(f=a,x=v,x){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:Ki(f,o,Br,!Yi);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(v=Mm+300-Pt(),10<v)){if(Ki(f,o,Br,!Yi),R(f,0,!0)!==0)break e;f.timeoutHandle=z1(p1.bind(null,f,c,rr,Yd,km,o,Br,Gs,Jo,Yi,x,2,-0,0),v);break e}p1(f,c,rr,Yd,km,o,Br,Gs,Jo,Yi,x,0,-0,0)}}break}while(!0);Oa(a)}function p1(a,o,c,f,v,x,P,_,$,J,le,de,ee,re){if(a.timeoutHandle=-1,de=o.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(Bc={stylesheets:null,count:0,unsuspend:Hk},s1(o),de=qk(),de!==null)){a.cancelPendingCommit=de(x1.bind(null,a,o,x,c,f,v,P,_,$,le,1,ee,re)),Ki(a,x,P,!J);return}x1(a,o,x,c,f,v,P,_,$)}function lk(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var v=c[f],x=v.getSnapshot;v=v.value;try{if(!ke(x(),v))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ki(a,o,c,f){o&=~Dm,o&=~Gs,a.suspendedLanes|=o,a.pingedLanes&=~o,f&&(a.warmLanes|=o),f=a.expirationTimes;for(var v=o;0<v;){var x=31-nt(v),P=1<<x;f[x]=-1,v&=~P}c!==0&&st(a,c,o)}function qd(){return(dt&6)===0?(Mc(0),!1):!0}function Lm(){if(We!==null){if(ft===0)var a=We.return;else a=We,Ja=Rs=null,em(a),Ko=null,Ec=0,a=We;for(;a!==null;)FS(a.alternate,a),a=a.return;We=null}}function nl(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,Pk(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),Lm(),Ct=a,We=c=Xa(a.current,null),et=o,ft=0,hr=null,Yi=!1,Zo=oe(a,o),_m=!1,Jo=Br=Dm=Gs=qi=Ut=0,rr=Dc=null,km=!1,(o&8)!==0&&(o|=o&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=o;0<f;){var v=31-nt(f),x=1<<v;o|=a[v],f&=~x}return oi=o,pd(),c}function h1(a,o){Fe=null,U.H=kd,o===hc||o===Ad?(o=Dx(),ft=3):o===Ox?(o=Dx(),ft=4):ft=o===kS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,hr=o,We===null&&(Ut=1,Ld(a,jr(o,a.current)))}function m1(){var a=U.H;return U.H=kd,a===null?kd:a}function g1(){var a=U.A;return U.A=sk,a}function $m(){Ut=4,Yi||(et&4194048)!==et&&$r.current!==null||(Zo=!0),(qi&134217727)===0&&(Gs&134217727)===0||Ct===null||Ki(Ct,et,Br,!1)}function Bm(a,o,c){var f=dt;dt|=2;var v=m1(),x=g1();(Ct!==a||et!==o)&&(Yd=null,nl(a,o)),o=!1;var P=Ut;e:do try{if(ft!==0&&We!==null){var _=We,$=hr;switch(ft){case 8:Lm(),P=6;break e;case 3:case 2:case 9:case 6:$r.current===null&&(o=!0);var J=ft;if(ft=0,hr=null,rl(a,_,$,J),c&&Zo){P=0;break e}break;default:J=ft,ft=0,hr=null,rl(a,_,$,J)}}ck(),P=Ut;break}catch(le){h1(a,le)}while(!0);return o&&a.shellSuspendCounter++,Ja=Rs=null,dt=f,U.H=v,U.A=x,We===null&&(Ct=null,et=0,pd()),P}function ck(){for(;We!==null;)y1(We)}function uk(a,o){var c=dt;dt|=2;var f=m1(),v=g1();Ct!==a||et!==o?(Yd=null,Hd=Pt()+500,nl(a,o)):Zo=oe(a,o);e:do try{if(ft!==0&&We!==null){o=We;var x=hr;t:switch(ft){case 1:ft=0,hr=null,rl(a,o,x,1);break;case 2:case 9:if(Nx(x)){ft=0,hr=null,v1(o);break}o=function(){ft!==2&&ft!==9||Ct!==a||(ft=7),Oa(a)},x.then(o,o);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:Nx(x)?(ft=0,hr=null,v1(o)):(ft=0,hr=null,rl(a,o,x,7));break;case 5:var P=null;switch(We.tag){case 26:P=We.memoizedState;case 5:case 27:var _=We;if(!P||J1(P)){ft=0,hr=null;var $=_.sibling;if($!==null)We=$;else{var J=_.return;J!==null?(We=J,Fd(J)):We=null}break t}}ft=0,hr=null,rl(a,o,x,5);break;case 6:ft=0,hr=null,rl(a,o,x,6);break;case 8:Lm(),Ut=6;break e;default:throw Error(r(462))}}dk();break}catch(le){h1(a,le)}while(!0);return Ja=Rs=null,U.H=f,U.A=v,dt=c,We!==null?0:(Ct=null,et=0,pd(),Ut)}function dk(){for(;We!==null&&!It();)y1(We)}function y1(a){var o=YS(a.alternate,a,oi);a.memoizedProps=a.pendingProps,o===null?Fd(a):We=o}function v1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=$S(c,o,o.pendingProps,o.type,void 0,et);break;case 11:o=$S(c,o,o.pendingProps,o.type.render,o.ref,et);break;case 5:em(o);default:FS(c,o),o=We=bx(o,oi),o=YS(c,o,oi)}a.memoizedProps=a.pendingProps,o===null?Fd(a):We=o}function rl(a,o,c,f){Ja=Rs=null,em(o),Ko=null,Ec=0;var v=o.return;try{if(ek(a,v,o,c,et)){Ut=1,Ld(a,jr(c,a.current)),We=null;return}}catch(x){if(v!==null)throw We=v,x;Ut=1,Ld(a,jr(c,a.current)),We=null;return}o.flags&32768?(lt||f===1?a=!0:Zo||(et&536870912)!==0?a=!1:(Yi=a=!0,(f===2||f===9||f===3||f===6)&&(f=$r.current,f!==null&&f.tag===13&&(f.flags|=16384))),b1(o,a)):Fd(o)}function Fd(a){var o=a;do{if((o.flags&32768)!==0){b1(o,Yi);return}a=o.return;var c=nk(o.alternate,o,oi);if(c!==null){We=c;return}if(o=o.sibling,o!==null){We=o;return}We=o=a}while(o!==null);Ut===0&&(Ut=5)}function b1(a,o){do{var c=rk(a.alternate,a);if(c!==null){c.flags&=32767,We=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){We=a;return}We=a=c}while(a!==null);Ut=6,We=null}function x1(a,o,c,f,v,x,P,_,$){a.cancelPendingCommit=null;do Vd();while(wn!==0);if((dt&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(x=o.lanes|o.childLanes,x|=Nh,kn(a,c,x,P,_,$),a===Ct&&(We=Ct=null,et=0),el=o,Vi=a,tl=c,jm=x,Im=v,u1=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,mk(fa,function(){return T1(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=U.T,U.T=null,v=q.p,q.p=2,P=dt,dt|=4;try{ak(a,o,c)}finally{dt=P,q.p=v,U.T=f}}wn=1,S1(),A1(),E1()}}function S1(){if(wn===1){wn=0;var a=Vi,o=el,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=U.T,U.T=null;var f=q.p;q.p=2;var v=dt;dt|=4;try{r1(o,a);var x=Qm,P=Ka(a.containerInfo),_=x.focusedElem,$=x.selectionRange;if(P!==_&&_&&_.ownerDocument&&Va(_.ownerDocument.documentElement,_)){if($!==null&&Ns(_)){var J=$.start,le=$.end;if(le===void 0&&(le=J),"selectionStart"in _)_.selectionStart=J,_.selectionEnd=Math.min(le,_.value.length);else{var de=_.ownerDocument||document,ee=de&&de.defaultView||window;if(ee.getSelection){var re=ee.getSelection(),$e=_.textContent.length,je=Math.min($.start,$e),vt=$.end===void 0?je:Math.min($.end,$e);!re.extend&&je>vt&&(P=vt,vt=je,je=P);var W=Qt(_,je),H=Qt(_,vt);if(W&&H&&(re.rangeCount!==1||re.anchorNode!==W.node||re.anchorOffset!==W.offset||re.focusNode!==H.node||re.focusOffset!==H.offset)){var X=de.createRange();X.setStart(W.node,W.offset),re.removeAllRanges(),je>vt?(re.addRange(X),re.extend(H.node,H.offset)):(X.setEnd(H.node,H.offset),re.addRange(X))}}}}for(de=[],re=_;re=re.parentNode;)re.nodeType===1&&de.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<de.length;_++){var ue=de[_];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}sf=!!Xm,Qm=Xm=null}finally{dt=v,q.p=f,U.T=c}}a.current=o,wn=2}}function A1(){if(wn===2){wn=0;var a=Vi,o=el,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=U.T,U.T=null;var f=q.p;q.p=2;var v=dt;dt|=4;try{JS(a,o.alternate,o)}finally{dt=v,q.p=f,U.T=c}}wn=3}}function E1(){if(wn===4||wn===3){wn=0,Kt();var a=Vi,o=el,c=tl,f=u1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?wn=5:(wn=0,el=Vi=null,C1(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Fi=null),ct(c),o=o.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot($a,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=U.T,v=q.p,q.p=2,U.T=null;try{for(var x=a.onRecoverableError,P=0;P<f.length;P++){var _=f[P];x(_.value,{componentStack:_.stack})}}finally{U.T=o,q.p=v}}(tl&3)!==0&&Vd(),Oa(a),v=a.pendingLanes,(c&4194090)!==0&&(v&42)!==0?a===Rm?kc++:(kc=0,Rm=a):kc=0,Mc(0)}}function C1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,fc(o)))}function Vd(a){return S1(),A1(),E1(),T1()}function T1(){if(wn!==5)return!1;var a=Vi,o=jm;jm=0;var c=ct(tl),f=U.T,v=q.p;try{q.p=32>c?32:c,U.T=null,c=Im,Im=null;var x=Vi,P=tl;if(wn=0,el=Vi=null,tl=0,(dt&6)!==0)throw Error(r(331));var _=dt;if(dt|=4,l1(x.current),i1(x,x.current,P,c),dt=_,Mc(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot($a,x)}catch{}return!0}finally{q.p=v,U.T=f,C1(a,o)}}function P1(a,o,c){o=jr(c,o),o=hm(a.stateNode,o,2),a=Li(a,o,2),a!==null&&(Ie(a,2),Oa(a))}function xt(a,o,c){if(a.tag===3)P1(a,a,c);else for(;o!==null;){if(o.tag===3){P1(o,a,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Fi===null||!Fi.has(f))){a=jr(c,a),c=_S(2),f=Li(o,c,2),f!==null&&(DS(c,f,o,a),Ie(f,2),Oa(f));break}}o=o.return}}function Um(a,o,c){var f=a.pingCache;if(f===null){f=a.pingCache=new ok;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(c)||(_m=!0,v.add(c),a=fk.bind(null,a,o,c),o.then(a,a))}function fk(a,o,c){var f=a.pingCache;f!==null&&f.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,Ct===a&&(et&c)===c&&(Ut===4||Ut===3&&(et&62914560)===et&&300>Pt()-Mm?(dt&2)===0&&nl(a,0):Dm|=c,Jo===et&&(Jo=0)),Oa(a)}function w1(a,o){o===0&&(o=he()),a=$o(a,o),a!==null&&(Ie(a,o),Oa(a))}function pk(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),w1(a,c)}function hk(a,o){var c=0;switch(a.tag){case 13:var f=a.stateNode,v=a.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(o),w1(a,c)}function mk(a,o){return mt(a,o)}var Kd=null,al=null,zm=!1,Wd=!1,Gm=!1,Hs=0;function Oa(a){a!==al&&a.next===null&&(al===null?Kd=al=a:al=al.next=a),Wd=!0,zm||(zm=!0,yk())}function Mc(a,o){if(!Gm&&Wd){Gm=!0;do for(var c=!1,f=Kd;f!==null;){if(a!==0){var v=f.pendingLanes;if(v===0)var x=0;else{var P=f.suspendedLanes,_=f.pingedLanes;x=(1<<31-nt(42|a)+1)-1,x&=v&~(P&~_),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,D1(f,x))}else x=et,x=R(f,f===Ct?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(x&3)===0||oe(f,x)||(c=!0,D1(f,x));f=f.next}while(c);Gm=!1}}function gk(){O1()}function O1(){Wd=zm=!1;var a=0;Hs!==0&&(Tk()&&(a=Hs),Hs=0);for(var o=Pt(),c=null,f=Kd;f!==null;){var v=f.next,x=N1(f,o);x===0?(f.next=null,c===null?Kd=v:c.next=v,v===null&&(al=c)):(c=f,(a!==0||(x&3)!==0)&&(Wd=!0)),f=v}Mc(a)}function N1(a,o){for(var c=a.suspendedLanes,f=a.pingedLanes,v=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var P=31-nt(x),_=1<<P,$=v[P];$===-1?((_&c)===0||(_&f)!==0)&&(v[P]=fe(_,o)):$<=o&&(a.expiredLanes|=_),x&=~_}if(o=Ct,c=et,c=R(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,c===0||a===o&&(ft===2||ft===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&Je(f),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||oe(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(f!==null&&Je(f),ct(c)){case 2:case 8:c=Ra;break;case 32:c=fa;break;case 268435456:c=pa;break;default:c=fa}return f=_1.bind(null,a),c=mt(c,f),a.callbackPriority=o,a.callbackNode=c,o}return f!==null&&f!==null&&Je(f),a.callbackPriority=2,a.callbackNode=null,2}function _1(a,o){if(wn!==0&&wn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(Vd()&&a.callbackNode!==c)return null;var f=et;return f=R(a,a===Ct?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(f1(a,f,o),N1(a,Pt()),a.callbackNode!=null&&a.callbackNode===c?_1.bind(null,a):null)}function D1(a,o){if(Vd())return null;f1(a,o,!0)}function yk(){wk(function(){(dt&6)!==0?mt(zt,gk):O1()})}function Hm(){return Hs===0&&(Hs=ce()),Hs}function k1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Xl(""+a)}function M1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function vk(a,o,c,f,v){if(o==="submit"&&c&&c.stateNode===v){var x=k1((v[jn]||null).action),P=f.submitter;P&&(o=(o=P[jn]||null)?k1(o.formAction):P.getAttribute("formAction"),o!==null&&(x=o,P=null));var _=new Oo("action","action",null,f,v);a.push({event:_,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Hs!==0){var $=P?M1(v,P):new FormData(v);cm(c,{pending:!0,data:$,method:v.method,action:x},null,$)}}else typeof x=="function"&&(_.preventDefault(),$=P?M1(v,P):new FormData(v),cm(c,{pending:!0,data:$,method:v.method,action:x},x,$))},currentTarget:v}]})}}for(var Ym=0;Ym<Oh.length;Ym++){var qm=Oh[Ym],bk=qm.toLowerCase(),xk=qm[0].toUpperCase()+qm.slice(1);na(bk,"on"+xk)}na(fx,"onAnimationEnd"),na(px,"onAnimationIteration"),na(hx,"onAnimationStart"),na("dblclick","onDoubleClick"),na("focusin","onFocus"),na("focusout","onBlur"),na(LD,"onTransitionRun"),na($D,"onTransitionStart"),na(BD,"onTransitionCancel"),na(mx,"onTransitionEnd"),Jn("onMouseEnter",["mouseout","mouseover"]),Jn("onMouseLeave",["mouseout","mouseover"]),Jn("onPointerEnter",["pointerout","pointerover"]),Jn("onPointerLeave",["pointerout","pointerover"]),Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jc));function j1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var f=a[c],v=f.event;f=f.listeners;e:{var x=void 0;if(o)for(var P=f.length-1;0<=P;P--){var _=f[P],$=_.instance,J=_.currentTarget;if(_=_.listener,$!==x&&v.isPropagationStopped())break e;x=_,v.currentTarget=J;try{x(v)}catch(le){Rd(le)}v.currentTarget=null,x=$}else for(P=0;P<f.length;P++){if(_=f[P],$=_.instance,J=_.currentTarget,_=_.listener,$!==x&&v.isPropagationStopped())break e;x=_,v.currentTarget=J;try{x(v)}catch(le){Rd(le)}v.currentTarget=null,x=$}}}}function Xe(a,o){var c=o[Ba];c===void 0&&(c=o[Ba]=new Set);var f=a+"__bubble";c.has(f)||(I1(o,a,2,!1),c.add(f))}function Fm(a,o,c){var f=0;o&&(f|=4),I1(c,a,f,o)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Vm(a){if(!a[Xd]){a[Xd]=!0,ya.forEach(function(c){c!=="selectionchange"&&(Sk.has(c)||Fm(c,!1,a),Fm(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Xd]||(o[Xd]=!0,Fm("selectionchange",!1,o))}}function I1(a,o,c,f){switch(iA(o)){case 2:var v=Kk;break;case 8:v=Wk;break;default:v=og}c=v.bind(null,o,c,a),v=void 0,!Ql||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?a.addEventListener(o,c,{capture:!0,passive:v}):a.addEventListener(o,c,!0):v!==void 0?a.addEventListener(o,c,{passive:v}):a.addEventListener(o,c,!1)}function Km(a,o,c,f,v){var x=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var P=f.tag;if(P===3||P===4){var _=f.stateNode.containerInfo;if(_===v)break;if(P===4)for(P=f.return;P!==null;){var $=P.tag;if(($===3||$===4)&&P.stateNode.containerInfo===v)return;P=P.return}for(;_!==null;){if(P=Nr(_),P===null)return;if($=P.tag,$===5||$===6||$===26||$===27){f=x=P;continue e}_=_.parentNode}}f=f.return}Sa(function(){var J=x,le=Po(c),de=[];e:{var ee=gx.get(a);if(ee!==void 0){var re=Oo,$e=a;switch(a){case"keypress":if(Jl(c)===0)break e;case"keydown":case"keyup":re=vh;break;case"focusin":$e="focus",re=qa;break;case"focusout":$e="blur",re=qa;break;case"beforeblur":case"afterblur":re=qa;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Me;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Qu;break;case fx:case px:case hx:re=Ku;break;case mx:re=ac;break;case"scroll":case"scrollend":re=tc;break;case"wheel":re=Sh;break;case"copy":case"cut":case"paste":re=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=gn;break;case"toggle":case"beforetoggle":re=Eh}var je=(o&4)!==0,vt=!je&&(a==="scroll"||a==="scrollend"),W=je?ee!==null?ee+"Capture":null:ee;je=[];for(var H=J,X;H!==null;){var ue=H;if(X=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||X===null||W===null||(ue=cr(H,W),ue!=null&&je.push(Ic(H,ue,X))),vt)break;H=H.return}0<je.length&&(ee=new re(ee,$e,null,c,le),de.push({event:ee,listeners:je}))}}if((o&7)===0){e:{if(ee=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",ee&&c!==Yu&&($e=c.relatedTarget||c.fromElement)&&(Nr($e)||$e[bs]))break e;if((re||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,re?($e=c.relatedTarget||c.toElement,re=J,$e=$e?Nr($e):null,$e!==null&&(vt=s($e),je=$e.tag,$e!==vt||je!==5&&je!==27&&je!==6)&&($e=null)):(re=null,$e=J),re!==$e)){if(je=Vu,ue="onMouseLeave",W="onMouseEnter",H="mouse",(a==="pointerout"||a==="pointerover")&&(je=gn,ue="onPointerLeave",W="onPointerEnter",H="pointer"),vt=re==null?ee:In(re),X=$e==null?ee:In($e),ee=new je(ue,H+"leave",re,c,le),ee.target=vt,ee.relatedTarget=X,ue=null,Nr(le)===J&&(je=new je(W,H+"enter",$e,c,le),je.target=X,je.relatedTarget=vt,ue=je),vt=ue,re&&$e)t:{for(je=re,W=$e,H=0,X=je;X;X=il(X))H++;for(X=0,ue=W;ue;ue=il(ue))X++;for(;0<H-X;)je=il(je),H--;for(;0<X-H;)W=il(W),X--;for(;H--;){if(je===W||W!==null&&je===W.alternate)break t;je=il(je),W=il(W)}je=null}else je=null;re!==null&&R1(de,ee,re,je,!1),$e!==null&&vt!==null&&R1(de,vt,$e,je,!0)}}e:{if(ee=J?In(J):window,re=ee.nodeName&&ee.nodeName.toLowerCase(),re==="select"||re==="input"&&ee.type==="file")var Pe=od;else if(ad(ee))if(ld)Pe=pe;else{Pe=ne;var Ve=B}else re=ee.nodeName,!re||re.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&Gu(J.elementType)&&(Pe=od):Pe=be;if(Pe&&(Pe=Pe(a,J))){id(de,Pe,c,le);break e}Ve&&Ve(a,ee,J),a==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&ba(ee,"number",ee.value)}switch(Ve=J?In(J):window,a){case"focusin":(ad(Ve)||Ve.contentEditable==="true")&&(er=Ve,_s=J,Wa=null);break;case"focusout":Wa=_s=er=null;break;case"mousedown":Aa=!0;break;case"contextmenu":case"mouseup":case"dragend":Aa=!1,fd(de,c,le);break;case"selectionchange":if(kr)break;case"keydown":case"keyup":fd(de,c,le)}var Ne;if(ic)e:{switch(a){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ki?td(a,c)&&(Re="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Re="onCompositionStart");Re&&(Zu&&c.locale!=="ko"&&(ki||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ki&&(Ne=Zl()):(qe=le,Ya="value"in qe?qe.value:qe.textContent,ki=!0)),Ve=Qd(J,Re),0<Ve.length&&(Re=new nc(Re,a,null,c,le),de.push({event:Re,listeners:Ve}),Ne?Re.data=Ne:(Ne=nd(c),Ne!==null&&(Re.data=Ne)))),(Ne=Th?Ph(a,c):rd(a,c))&&(Re=Qd(J,"onBeforeInput"),0<Re.length&&(Ve=new nc("onBeforeInput","beforeinput",null,c,le),de.push({event:Ve,listeners:Re}),Ve.data=Ne)),vk(de,a,J,c,le)}j1(de,o)})}function Ic(a,o,c){return{instance:a,listener:o,currentTarget:c}}function Qd(a,o){for(var c=o+"Capture",f=[];a!==null;){var v=a,x=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||x===null||(v=cr(a,c),v!=null&&f.unshift(Ic(a,v,x)),v=cr(a,o),v!=null&&f.push(Ic(a,v,x))),a.tag===3)return f;a=a.return}return[]}function il(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function R1(a,o,c,f,v){for(var x=o._reactName,P=[];c!==null&&c!==f;){var _=c,$=_.alternate,J=_.stateNode;if(_=_.tag,$!==null&&$===f)break;_!==5&&_!==26&&_!==27||J===null||($=J,v?(J=cr(c,x),J!=null&&P.unshift(Ic(c,J,$))):v||(J=cr(c,x),J!=null&&P.push(Ic(c,J,$)))),c=c.return}P.length!==0&&a.push({event:o,listeners:P})}var Ak=/\r\n?/g,Ek=/\u0000|\uFFFD/g;function L1(a){return(typeof a=="string"?a:""+a).replace(Ak,`
`).replace(Ek,"")}function $1(a,o){return o=L1(o),L1(a)===o}function Zd(){}function yt(a,o,c,f,v,x){switch(c){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Ga(a,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Ga(a,""+f);break;case"className":ut(a,"class",f);break;case"tabIndex":ut(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ut(a,c,f);break;case"style":fh(a,f,x);break;case"data":if(o!=="object"){ut(a,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=Xl(""+f),a.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(o!=="input"&&yt(a,o,"name",v.name,v,null),yt(a,o,"formEncType",v.formEncType,v,null),yt(a,o,"formMethod",v.formMethod,v,null),yt(a,o,"formTarget",v.formTarget,v,null)):(yt(a,o,"encType",v.encType,v,null),yt(a,o,"method",v.method,v,null),yt(a,o,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=Xl(""+f),a.setAttribute(c,f);break;case"onClick":f!=null&&(a.onclick=Zd);break;case"onScroll":f!=null&&Xe("scroll",a);break;case"onScrollEnd":f!=null&&Xe("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}c=Xl(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""+f):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":f===!0?a.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,f):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(c,f):a.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(c):a.setAttribute(c,f);break;case"popover":Xe("beforetoggle",a),Xe("toggle",a),Ua(a,"popover",f);break;case"xlinkActuate":an(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":an(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":an(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":an(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":an(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":an(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":an(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":an(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":an(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Ua(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Wl.get(c)||c,Ua(a,c,f))}}function Wm(a,o,c,f,v,x){switch(c){case"style":fh(a,f,x);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof f=="string"?Ga(a,f):(typeof f=="number"||typeof f=="bigint")&&Ga(a,""+f);break;case"onScroll":f!=null&&Xe("scroll",a);break;case"onScrollEnd":f!=null&&Xe("scrollend",a);break;case"onClick":f!=null&&(a.onclick=Zd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rn.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),o=c.slice(2,v?c.length-7:void 0),x=a[jn]||null,x=x!=null?x[c]:null,typeof x=="function"&&a.removeEventListener(o,x,v),typeof f=="function")){typeof x!="function"&&x!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,f,v);break e}c in a?a[c]=f:f===!0?a.setAttribute(c,""):Ua(a,c,f)}}}function On(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",a),Xe("load",a);var f=!1,v=!1,x;for(x in c)if(c.hasOwnProperty(x)){var P=c[x];if(P!=null)switch(x){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:yt(a,o,x,P,c,null)}}v&&yt(a,o,"srcSet",c.srcSet,c,null),f&&yt(a,o,"src",c.src,c,null);return;case"input":Xe("invalid",a);var _=x=P=v=null,$=null,J=null;for(f in c)if(c.hasOwnProperty(f)){var le=c[f];if(le!=null)switch(f){case"name":v=le;break;case"type":P=le;break;case"checked":$=le;break;case"defaultChecked":J=le;break;case"value":x=le;break;case"defaultValue":_=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,o));break;default:yt(a,o,f,le,c,null)}}To(a,x,_,$,J,P,v,!1),As(a);return;case"select":Xe("invalid",a),f=P=x=null;for(v in c)if(c.hasOwnProperty(v)&&(_=c[v],_!=null))switch(v){case"value":x=_;break;case"defaultValue":P=_;break;case"multiple":f=_;default:yt(a,o,v,_,c,null)}o=x,c=P,a.multiple=!!f,o!=null?xa(a,!!f,o,!1):c!=null&&xa(a,!!f,c,!0);return;case"textarea":Xe("invalid",a),x=v=f=null;for(P in c)if(c.hasOwnProperty(P)&&(_=c[P],_!=null))switch(P){case"value":f=_;break;case"defaultValue":v=_;break;case"children":x=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:yt(a,o,P,_,c,null)}Vl(a,f,v,x),As(a);return;case"option":for($ in c)if(c.hasOwnProperty($)&&(f=c[$],f!=null))switch($){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:yt(a,o,$,f,c,null)}return;case"dialog":Xe("beforetoggle",a),Xe("toggle",a),Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":Xe("load",a);break;case"video":case"audio":for(f=0;f<jc.length;f++)Xe(jc[f],a);break;case"image":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"embed":case"source":case"link":Xe("error",a),Xe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(f=c[J],f!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:yt(a,o,J,f,c,null)}return;default:if(Gu(o)){for(le in c)c.hasOwnProperty(le)&&(f=c[le],f!==void 0&&Wm(a,o,le,f,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(f=c[_],f!=null&&yt(a,o,_,f,c,null))}function Ck(a,o,c,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,x=null,P=null,_=null,$=null,J=null,le=null;for(re in c){var de=c[re];if(c.hasOwnProperty(re)&&de!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":$=de;default:f.hasOwnProperty(re)||yt(a,o,re,null,f,de)}}for(var ee in f){var re=f[ee];if(de=c[ee],f.hasOwnProperty(ee)&&(re!=null||de!=null))switch(ee){case"type":x=re;break;case"name":v=re;break;case"checked":J=re;break;case"defaultChecked":le=re;break;case"value":P=re;break;case"defaultValue":_=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:re!==de&&yt(a,o,ee,re,f,de)}}Es(a,P,_,$,J,le,x,v);return;case"select":re=P=_=ee=null;for(x in c)if($=c[x],c.hasOwnProperty(x)&&$!=null)switch(x){case"value":break;case"multiple":re=$;default:f.hasOwnProperty(x)||yt(a,o,x,null,f,$)}for(v in f)if(x=f[v],$=c[v],f.hasOwnProperty(v)&&(x!=null||$!=null))switch(v){case"value":ee=x;break;case"defaultValue":_=x;break;case"multiple":P=x;default:x!==$&&yt(a,o,v,x,f,$)}o=_,c=P,f=re,ee!=null?xa(a,!!c,ee,!1):!!f!=!!c&&(o!=null?xa(a,!!c,o,!0):xa(a,!!c,c?[]:"",!1));return;case"textarea":re=ee=null;for(_ in c)if(v=c[_],c.hasOwnProperty(_)&&v!=null&&!f.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:yt(a,o,_,null,f,v)}for(P in f)if(v=f[P],x=c[P],f.hasOwnProperty(P)&&(v!=null||x!=null))switch(P){case"value":ee=v;break;case"defaultValue":re=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==x&&yt(a,o,P,v,f,x)}Cs(a,ee,re);return;case"option":for(var $e in c)if(ee=c[$e],c.hasOwnProperty($e)&&ee!=null&&!f.hasOwnProperty($e))switch($e){case"selected":a.selected=!1;break;default:yt(a,o,$e,null,f,ee)}for($ in f)if(ee=f[$],re=c[$],f.hasOwnProperty($)&&ee!==re&&(ee!=null||re!=null))switch($){case"selected":a.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:yt(a,o,$,ee,f,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in c)ee=c[je],c.hasOwnProperty(je)&&ee!=null&&!f.hasOwnProperty(je)&&yt(a,o,je,null,f,ee);for(J in f)if(ee=f[J],re=c[J],f.hasOwnProperty(J)&&ee!==re&&(ee!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,o));break;default:yt(a,o,J,ee,f,re)}return;default:if(Gu(o)){for(var vt in c)ee=c[vt],c.hasOwnProperty(vt)&&ee!==void 0&&!f.hasOwnProperty(vt)&&Wm(a,o,vt,void 0,f,ee);for(le in f)ee=f[le],re=c[le],!f.hasOwnProperty(le)||ee===re||ee===void 0&&re===void 0||Wm(a,o,le,ee,f,re);return}}for(var W in c)ee=c[W],c.hasOwnProperty(W)&&ee!=null&&!f.hasOwnProperty(W)&&yt(a,o,W,null,f,ee);for(de in f)ee=f[de],re=c[de],!f.hasOwnProperty(de)||ee===re||ee==null&&re==null||yt(a,o,de,ee,f,re)}var Xm=null,Qm=null;function Jd(a){return a.nodeType===9?a:a.ownerDocument}function B1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U1(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Zm(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Jm=null;function Tk(){var a=window.event;return a&&a.type==="popstate"?a===Jm?!1:(Jm=a,!0):(Jm=null,!1)}var z1=typeof setTimeout=="function"?setTimeout:void 0,Pk=typeof clearTimeout=="function"?clearTimeout:void 0,G1=typeof Promise=="function"?Promise:void 0,wk=typeof queueMicrotask=="function"?queueMicrotask:typeof G1<"u"?function(a){return G1.resolve(null).then(a).catch(Ok)}:z1;function Ok(a){setTimeout(function(){throw a})}function Wi(a){return a==="head"}function H1(a,o){var c=o,f=0,v=0;do{var x=c.nextSibling;if(a.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(0<f&&8>f){c=f;var P=a.ownerDocument;if(c&1&&Rc(P.documentElement),c&2&&Rc(P.body),c&4)for(c=P.head,Rc(c),P=c.firstChild;P;){var _=P.nextSibling,$=P.nodeName;P[At]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&P.rel.toLowerCase()==="stylesheet"||c.removeChild(P),P=_}}if(v===0){a.removeChild(x),Yc(o);return}v--}else c==="$"||c==="$?"||c==="$!"?v++:f=c.charCodeAt(0)-48;else f=0;c=x}while(c);Yc(o)}function eg(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":eg(c),Or(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function Nk(a,o,c,f){for(;a.nodeType===1;){var v=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[At])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var x=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=aa(a.nextSibling),a===null)break}return null}function _k(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=aa(a.nextSibling),a===null))return null;return a}function tg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Dk(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var f=function(){o(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function aa(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var ng=null;function Y1(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function q1(a,o,c){switch(o=Jd(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Rc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Or(a)}var Ur=new Map,F1=new Set;function ef(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var li=q.d;q.d={f:kk,r:Mk,D:jk,C:Ik,L:Rk,m:Lk,X:Bk,S:$k,M:Uk};function kk(){var a=li.f(),o=qd();return a||o}function Mk(a){var o=ga(a);o!==null&&o.tag===5&&o.type==="form"?fS(o):li.r(a)}var sl=typeof document>"u"?null:document;function V1(a,o,c){var f=sl;if(f&&typeof o=="string"&&o){var v=Xt(o);v='link[rel="'+a+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),F1.has(v)||(F1.add(v),a={rel:a,crossOrigin:c,href:o},f.querySelector(v)===null&&(o=f.createElement("link"),On(o,"link",a),Ot(o),f.head.appendChild(o)))}}function jk(a){li.D(a),V1("dns-prefetch",a,null)}function Ik(a,o){li.C(a,o),V1("preconnect",a,o)}function Rk(a,o,c){li.L(a,o,c);var f=sl;if(f&&a&&o){var v='link[rel="preload"][as="'+Xt(o)+'"]';o==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+Xt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+Xt(c.imageSizes)+'"]')):v+='[href="'+Xt(a)+'"]';var x=v;switch(o){case"style":x=ol(a);break;case"script":x=ll(a)}Ur.has(x)||(a=h({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),Ur.set(x,a),f.querySelector(v)!==null||o==="style"&&f.querySelector(Lc(x))||o==="script"&&f.querySelector($c(x))||(o=f.createElement("link"),On(o,"link",a),Ot(o),f.head.appendChild(o)))}}function Lk(a,o){li.m(a,o);var c=sl;if(c&&a){var f=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Xt(f)+'"][href="'+Xt(a)+'"]',x=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=ll(a)}if(!Ur.has(x)&&(a=h({rel:"modulepreload",href:a},o),Ur.set(x,a),c.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector($c(x)))return}f=c.createElement("link"),On(f,"link",a),Ot(f),c.head.appendChild(f)}}}function $k(a,o,c){li.S(a,o,c);var f=sl;if(f&&a){var v=Zn(f).hoistableStyles,x=ol(a);o=o||"default";var P=v.get(x);if(!P){var _={loading:0,preload:null};if(P=f.querySelector(Lc(x)))_.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":o},c),(c=Ur.get(x))&&rg(a,c);var $=P=f.createElement("link");Ot($),On($,"link",a),$._p=new Promise(function(J,le){$.onload=J,$.onerror=le}),$.addEventListener("load",function(){_.loading|=1}),$.addEventListener("error",function(){_.loading|=2}),_.loading|=4,tf(P,o,f)}P={type:"stylesheet",instance:P,count:1,state:_},v.set(x,P)}}}function Bk(a,o){li.X(a,o);var c=sl;if(c&&a){var f=Zn(c).hoistableScripts,v=ll(a),x=f.get(v);x||(x=c.querySelector($c(v)),x||(a=h({src:a,async:!0},o),(o=Ur.get(v))&&ag(a,o),x=c.createElement("script"),Ot(x),On(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},f.set(v,x))}}function Uk(a,o){li.M(a,o);var c=sl;if(c&&a){var f=Zn(c).hoistableScripts,v=ll(a),x=f.get(v);x||(x=c.querySelector($c(v)),x||(a=h({src:a,async:!0,type:"module"},o),(o=Ur.get(v))&&ag(a,o),x=c.createElement("script"),Ot(x),On(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},f.set(v,x))}}function K1(a,o,c,f){var v=(v=ye.current)?ef(v):null;if(!v)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=ol(c.href),c=Zn(v).hoistableStyles,f=c.get(o),f||(f={type:"style",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=ol(c.href);var x=Zn(v).hoistableStyles,P=x.get(a);if(P||(v=v.ownerDocument||v,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,P),(x=v.querySelector(Lc(a)))&&!x._p&&(P.instance=x,P.state.loading=5),Ur.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ur.set(a,c),x||zk(v,a,c,P.state))),o&&f===null)throw Error(r(528,""));return P}if(o&&f!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ll(c),c=Zn(v).hoistableScripts,f=c.get(o),f||(f={type:"script",instance:null,count:0,state:null},c.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function ol(a){return'href="'+Xt(a)+'"'}function Lc(a){return'link[rel="stylesheet"]['+a+"]"}function W1(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function zk(a,o,c,f){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=a.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),On(o,"link",c),Ot(o),a.head.appendChild(o))}function ll(a){return'[src="'+Xt(a)+'"]'}function $c(a){return"script[async]"+a}function X1(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var f=a.querySelector('style[data-href~="'+Xt(c.href)+'"]');if(f)return o.instance=f,Ot(f),f;var v=h({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),Ot(f),On(f,"style",v),tf(f,c.precedence,a),o.instance=f;case"stylesheet":v=ol(c.href);var x=a.querySelector(Lc(v));if(x)return o.state.loading|=4,o.instance=x,Ot(x),x;f=W1(c),(v=Ur.get(v))&&rg(f,v),x=(a.ownerDocument||a).createElement("link"),Ot(x);var P=x;return P._p=new Promise(function(_,$){P.onload=_,P.onerror=$}),On(x,"link",f),o.state.loading|=4,tf(x,c.precedence,a),o.instance=x;case"script":return x=ll(c.src),(v=a.querySelector($c(x)))?(o.instance=v,Ot(v),v):(f=c,(v=Ur.get(x))&&(f=h({},c),ag(f,v)),a=a.ownerDocument||a,v=a.createElement("script"),Ot(v),On(v,"link",f),a.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,tf(f,c.precedence,a));return o.instance}function tf(a,o,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,x=v,P=0;P<f.length;P++){var _=f[P];if(_.dataset.precedence===o)x=_;else if(x!==v)break}x?x.parentNode.insertBefore(a,x.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function rg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function ag(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var nf=null;function Q1(a,o,c){if(nf===null){var f=new Map,v=nf=new Map;v.set(c,f)}else v=nf,f=v.get(c),f||(f=new Map,v.set(c,f));if(f.has(a))return f;for(f.set(a,null),c=c.getElementsByTagName(a),v=0;v<c.length;v++){var x=c[v];if(!(x[At]||x[$t]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var P=x.getAttribute(o)||"";P=a+P;var _=f.get(P);_?_.push(x):f.set(P,[x])}}return f}function Z1(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function Gk(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function J1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Bc=null;function Hk(){}function Yk(a,o,c){if(Bc===null)throw Error(r(475));var f=Bc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var v=ol(c.href),x=a.querySelector(Lc(v));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=rf.bind(f),a.then(f,f)),o.state.loading|=4,o.instance=x,Ot(x);return}x=a.ownerDocument||a,c=W1(c),(v=Ur.get(v))&&rg(c,v),x=x.createElement("link"),Ot(x);var P=x;P._p=new Promise(function(_,$){P.onload=_,P.onerror=$}),On(x,"link",c),o.instance=x}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=rf.bind(f),a.addEventListener("load",o),a.addEventListener("error",o))}}function qk(){if(Bc===null)throw Error(r(475));var a=Bc;return a.stylesheets&&a.count===0&&ig(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&ig(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function rf(){if(this.count--,this.count===0){if(this.stylesheets)ig(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var af=null;function ig(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,af=new Map,o.forEach(Fk,a),af=null,rf.call(a))}function Fk(a,o){if(!(o.state.loading&4)){var c=af.get(a);if(c)var f=c.get(null);else{c=new Map,af.set(a,c);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<v.length;x++){var P=v[x];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(c.set(P.dataset.precedence,P),f=P)}f&&c.set(null,f)}v=o.instance,P=v.getAttribute("data-precedence"),x=c.get(P)||f,x===f&&c.set(null,v),c.set(P,v),this.count++,f=rf.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),x?x.parentNode.insertBefore(v,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),o.state.loading|=4}}var Uc={$$typeof:N,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Vk(a,o,c,f,v,x,P,_){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ve(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.hiddenUpdates=ve(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=x,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function eA(a,o,c,f,v,x,P,_,$,J,le,de){return a=new Vk(a,o,c,P,_,$,J,de),o=1,x===!0&&(o|=24),x=dr(3,null,null,o),a.current=x,x.stateNode=a,o=Uh(),o.refCount++,a.pooledCache=o,o.refCount++,x.memoizedState={element:f,isDehydrated:c,cache:o},Yh(x),a}function tA(a){return a?(a=Bo,a):Bo}function nA(a,o,c,f,v,x){v=tA(v),f.context===null?f.context=v:f.pendingContext=v,f=Ri(o),f.payload={element:c},x=x===void 0?null:x,x!==null&&(f.callback=x),c=Li(a,f,o),c!==null&&(gr(c,a,o),gc(c,a,o))}function rA(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function sg(a,o){rA(a,o),(a=a.alternate)&&rA(a,o)}function aA(a){if(a.tag===13){var o=$o(a,67108864);o!==null&&gr(o,a,67108864),sg(a,67108864)}}var sf=!0;function Kk(a,o,c,f){var v=U.T;U.T=null;var x=q.p;try{q.p=2,og(a,o,c,f)}finally{q.p=x,U.T=v}}function Wk(a,o,c,f){var v=U.T;U.T=null;var x=q.p;try{q.p=8,og(a,o,c,f)}finally{q.p=x,U.T=v}}function og(a,o,c,f){if(sf){var v=lg(f);if(v===null)Km(a,o,f,of,c),sA(a,f);else if(Qk(v,a,o,c,f))f.stopPropagation();else if(sA(a,f),o&4&&-1<Xk.indexOf(a)){for(;v!==null;){var x=ga(v);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var P=ma(x.pendingLanes);if(P!==0){var _=x;for(_.pendingLanes|=2,_.entangledLanes|=2;P;){var $=1<<31-nt(P);_.entanglements[1]|=$,P&=~$}Oa(x),(dt&6)===0&&(Hd=Pt()+500,Mc(0))}}break;case 13:_=$o(x,2),_!==null&&gr(_,x,2),qd(),sg(x,2)}if(x=lg(f),x===null&&Km(a,o,f,of,c),x===v)break;v=x}v!==null&&f.stopPropagation()}else Km(a,o,f,null,c)}}function lg(a){return a=Po(a),cg(a)}var of=null;function cg(a){if(of=null,a=Nr(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return of=a,null}function iA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wt()){case zt:return 2;case Ra:return 8;case fa:case zl:return 32;case pa:return 268435456;default:return 32}default:return 32}}var ug=!1,Xi=null,Qi=null,Zi=null,zc=new Map,Gc=new Map,Ji=[],Xk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sA(a,o){switch(a){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":zc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(o.pointerId)}}function Hc(a,o,c,f,v,x){return a===null||a.nativeEvent!==x?(a={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:x,targetContainers:[v]},o!==null&&(o=ga(o),o!==null&&aA(o)),a):(a.eventSystemFlags|=f,o=a.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),a)}function Qk(a,o,c,f,v){switch(o){case"focusin":return Xi=Hc(Xi,a,o,c,f,v),!0;case"dragenter":return Qi=Hc(Qi,a,o,c,f,v),!0;case"mouseover":return Zi=Hc(Zi,a,o,c,f,v),!0;case"pointerover":var x=v.pointerId;return zc.set(x,Hc(zc.get(x)||null,a,o,c,f,v)),!0;case"gotpointercapture":return x=v.pointerId,Gc.set(x,Hc(Gc.get(x)||null,a,o,c,f,v)),!0}return!1}function oA(a){var o=Nr(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,Mn(a.priority,function(){if(c.tag===13){var f=mr();f=ot(f);var v=$o(c,f);v!==null&&gr(v,c,f),sg(c,f)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function lf(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=lg(a.nativeEvent);if(c===null){c=a.nativeEvent;var f=new c.constructor(c.type,c);Yu=f,c.target.dispatchEvent(f),Yu=null}else return o=ga(c),o!==null&&aA(o),a.blockedOn=c,!1;o.shift()}return!0}function lA(a,o,c){lf(a)&&c.delete(o)}function Zk(){ug=!1,Xi!==null&&lf(Xi)&&(Xi=null),Qi!==null&&lf(Qi)&&(Qi=null),Zi!==null&&lf(Zi)&&(Zi=null),zc.forEach(lA),Gc.forEach(lA)}function cf(a,o){a.blockedOn===o&&(a.blockedOn=null,ug||(ug=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zk)))}var uf=null;function cA(a){uf!==a&&(uf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){uf===a&&(uf=null);for(var o=0;o<a.length;o+=3){var c=a[o],f=a[o+1],v=a[o+2];if(typeof f!="function"){if(cg(f||c)===null)continue;break}var x=ga(c);x!==null&&(a.splice(o,3),o-=3,cm(x,{pending:!0,data:v,method:c.method,action:f},f,v))}}))}function Yc(a){function o($){return cf($,a)}Xi!==null&&cf(Xi,a),Qi!==null&&cf(Qi,a),Zi!==null&&cf(Zi,a),zc.forEach(o),Gc.forEach(o);for(var c=0;c<Ji.length;c++){var f=Ji[c];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Ji.length&&(c=Ji[0],c.blockedOn===null);)oA(c),c.blockedOn===null&&Ji.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var v=c[f],x=c[f+1],P=v[jn]||null;if(typeof x=="function")P||cA(c);else if(P){var _=null;if(x&&x.hasAttribute("formAction")){if(v=x,P=x[jn]||null)_=P.formAction;else if(cg(v)!==null)continue}else _=P.action;typeof _=="function"?c[f+1]=_:(c.splice(f,3),f-=3),cA(c)}}}function dg(a){this._internalRoot=a}df.prototype.render=dg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,f=mr();nA(c,f,a,o,null,null)},df.prototype.unmount=dg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;nA(a.current,2,null,a,null,null),qd(),o[bs]=null}};function df(a){this._internalRoot=a}df.prototype.unstable_scheduleHydration=function(a){if(a){var o=Ht();a={blockedOn:null,target:a,priority:o};for(var c=0;c<Ji.length&&o!==0&&o<Ji[c].priority;c++);Ji.splice(c,0,a),c===0&&oA(a)}};var uA=t.version;if(uA!=="19.1.1")throw Error(r(527,uA,"19.1.1"));q.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=p(o),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var Jk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{$a=ff.inject(Jk),hn=ff}catch{}}return Fc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,f="",v=PS,x=wS,P=OS,_=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(_=o.unstable_transitionCallbacks)),o=eA(a,1,!1,null,null,c,f,v,x,P,_,null),a[bs]=o.current,Vm(a),new dg(o)},Fc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var f=!1,v="",x=PS,P=wS,_=OS,$=null,J=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(P=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&($=c.unstable_transitionCallbacks),c.formState!==void 0&&(J=c.formState)),o=eA(a,1,!0,o,c??null,f,v,x,P,_,$,J),o.context=tA(null),c=o.current,f=mr(),f=ot(f),v=Ri(f),v.callback=null,Li(c,v,f),c=f,o.current.lanes=c,Ie(o,c),Oa(o),a[bs]=o.current,Vm(a),new df(o)},Fc.version="19.1.1",Fc}var CA;function QM(){if(CA)return mg.exports;CA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mg.exports=XM(),mg.exports}var ZM=QM();const JM=ua(ZM),Yn=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:6,image:"/img/Interceptor.png",abilities:[{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],_f=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",visualEffect:{type:"NUKE_BLAST",duration:1200},targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",visualEffect:{type:"ENERGY_WAVE",duration:800},targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD028",baseCardId:"CARD028",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD029",baseCardId:"CARD029",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],br=[{id:"BRIDGE_001",type:"Bridge",name:"Standard Command Bridge",key:"bridge",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},{id:"POWERCELL_001",type:"Power Cell",name:"Standard Power Cell",key:"powerCell",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},{id:"DRONECONTROL_001",type:"Drone Control Hub",name:"Standard Drone Control Hub",key:"droneControlHub",hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}],TA={bridge:br.find(e=>e.key==="bridge"),powerCell:br.find(e=>e.key==="powerCell"),droneControlHub:br.find(e=>e.key==="droneControlHub")},ls=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Ai=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=ls(l),p={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const h in l.middleLaneBonus)p.hasOwnProperty(h)&&(p[h]+=l.middleLaneBonus[h]);r[s]=p}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},Kr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=Yn.find(y=>y.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,p=s.speed,d=s.shields,h=s.class;l.forEach(y=>{y.mod.stat==="attack"&&(u+=y.mod.value),y.mod.stat==="speed"&&(p+=y.mod.value),y.mod.stat==="shields"&&(d+=y.mod.value),y.mod.stat==="cost"&&(h+=y.mod.value)}),h=Math.max(0,h);let g={...e,attack:u,speed:p,maxShields:d,cost:h,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(y=>{y.stat==="attack"&&(g.attack+=y.value),y.stat==="speed"&&(g.speed+=y.value),y.stat==="cost"&&(g.cost=Math.max(0,g.cost+y.value))}),s.abilities?.forEach(y=>{if(y.type==="PASSIVE"){if(y.effect.type==="GRANT_KEYWORD"&&g.keywords.add(y.effect.keyword),y.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:b,mod:S}=y.effect;let E=!1;if(b.type==="SHIP_SECTION_HULL_DAMAGED"&&b.location==="SAME_LANE"){const C=parseInt(t.slice(-1))-1,O=(n.name==="Player 1"?i.player1:i.player2)[C];if(O){const N=n.shipSections[O],j=ls(N);(j==="damaged"||j==="critical")&&(E=!0)}}E&&S.stat==="attack"&&(g.attack+=S.value)}if(y.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:b,mod:S}=y.effect;let E=0;if(b.type==="OWN_DAMAGED_SECTIONS")for(const C in n.shipSections){const T=n.shipSections[C],O=ls(T);(O==="damaged"||O==="critical")&&E++}E>0&&(S.stat==="attack"&&(g.attack+=S.value*E),S.stat==="speed"&&(g.speed+=S.value*E))}y.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(g.potentialShipDamage=(g.potentialShipDamage||0)+y.effect.value),y.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&y.effect.mods.forEach(b=>{b.stat==="attack"&&(g.attack+=b.value),b.stat==="speed"&&(g.speed+=b.value)})}}),n.dronesOnBoard[t]?.forEach(y=>{if(y.id===e.id)return;Yn.find(S=>S.name===y.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:E,value:C}=S.effect;E==="shields"?g.maxShields+=C:E==="attack"?g.attack+=C:E==="speed"&&(g.speed+=C)}})}),l.forEach(y=>{y.grantedAbilities&&y.grantedAbilities.forEach(b=>{if(b.type==="PASSIVE"&&(b.effect.type==="GRANT_KEYWORD"&&g.keywords.add(b.effect.keyword),b.effect.type==="MODIFY_STAT")){const{stat:S,value:E}=b.effect;S==="attack"&&(g.attack+=E),S==="speed"&&(g.speed+=E),S==="shields"&&(g.maxShields+=E)}})}),g},WP=(e,t)=>({...e,instanceId:t}),fl=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],XP=["Scout Drone","Standard Fighter","Heavy Fighter","Guardian Drone","Bomber","Repair Drone","Interceptor","Aegis Drone","Kamikaze Drone","Swarm Drone"],QP=e=>{const t=[];let n=0;return e.forEach(r=>{const i=_f.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(WP(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},iv=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},ej=(e,t)=>{const n=Ai({shipSections:TA},[]).totals;return{name:e,shipSections:TA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:QP(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},ml=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},ZP=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},_l=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=Kr(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},sr=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},su=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],d=!(typeof n.cost=="number"),{type:h,affinity:g,location:y,custom:b}=n.targeting;let S=null;if(d&&Object.values(s.dronesOnBoard).flat().some(O=>O.id===t.id)&&(S=sr(t.id,s),!S))return[];const E=(T,O)=>{Object.entries(T.dronesOnBoard).forEach(([N,j])=>{let M=!1;y==="ANY_LANE"&&(M=!0),d&&y==="SAME_LANE"&&(M=N===S),M&&j.forEach(D=>{let k=!0;if(b?.includes("DAMAGED_HULL")){const L=Yn.find(G=>G.name===D.name);(!L||D.hull>=L.hull)&&(k=!1)}b?.includes("EXHAUSTED")&&(D.isExhausted||(k=!1)),k&&u.push({...D,lane:N,owner:O})})})},C=(T,O)=>{Object.keys(T.shipSections).forEach(N=>{u.push({...T.shipSections[N],id:N,name:N,owner:O})})};if(h==="DRONE")(g==="FRIENDLY"||g==="ANY")&&E(s,e),(g==="ENEMY"||g==="ANY")&&E(l,e==="player1"?"player2":"player1");else if(h==="SHIP_SECTION")(g==="FRIENDLY"||g==="ANY")&&C(s,e),(g==="ENEMY"||g==="ANY")&&C(l,e==="player1"?"player2":"player1");else if(h==="LANE")["lane1","lane2","lane3"].forEach(T=>{if((g==="FRIENDLY"||g==="ANY")&&u.push({id:T,owner:e}),g==="ENEMY"||g==="ANY"){const O=e==="player1"?"player2":"player1";u.push({id:T,owner:O})}});else if(h==="DRONE_CARD"){const T=e==="player1"?r:i;T.activeDronePool.forEach(O=>{const N=Yn.find(k=>k.name===O.name),j=T.appliedUpgrades[O.name]||[],M=j.filter(k=>k.id===n.id).length,D=n.maxApplications===void 0?1:n.maxApplications;N&&j.length<N.upgradeSlots&&M<D&&u.push({...O,id:O.name,owner:e})})}else if(h==="APPLIED_UPGRADE"){const T=g==="ENEMY"?l:s,O=g==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(T.dronesOnBoard).flat().forEach(N=>{(T.appliedUpgrades[N.name]||[]).length>0&&u.push({...N,owner:O})})}return u},JP=(e,t,n,r,i)=>{const s=Yn.find(d=>d.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const p=s.abilities.filter(d=>d.type==="TRIGGERED"&&d.trigger==="ON_MOVE");if(p.length>0){const d=l.dronesOnBoard[r].findIndex(h=>h.id===t.id);if(d!==-1){const h=l.dronesOnBoard[r][d];p.forEach(g=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${g.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),h.statMods||(h.statMods=[]),g.effects?.forEach(y=>{y.type==="PERMANENT_STAT_MOD"&&(u=!0,h.statMods.push(y.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${y.mod.value} ${y.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},ew=(e,t,n)=>{const r=Yn.find(d=>d.name===t.name);if(!r?.abilities)return{newState:e,effects:[],animationEvents:[]};let i=JSON.parse(JSON.stringify(e));const s=[],l=[];let u=!1;return r.abilities.filter(d=>d.effect?.type==="AFTER_ATTACK").forEach(d=>{const{subEffect:h}=d.effect;if(h.type==="DESTROY_SELF")for(const g in i.dronesOnBoard){const y=i.dronesOnBoard[g].findIndex(b=>b.id===t.id);if(y!==-1){u=!0;const b=i.dronesOnBoard[g][y];s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${d.name}', destroying itself.`}}),l.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:n,targetLane:g,targetType:"drone",timestamp:Date.now()}),i.dronesOnBoard[g]=i.dronesOnBoard[g].filter(S=>S.id!==t.id),Object.assign(i,ml(i,b));break}}else if(h.type==="PERMANENT_STAT_MOD")for(const g in i.dronesOnBoard){const y=i.dronesOnBoard[g].findIndex(b=>b.id===t.id);if(y!==-1){u=!0,i.dronesOnBoard[g][y].statMods||(i.dronesOnBoard[g][y].statMods=[]),s.push({type:"LOG",payload:{player:i.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${d.name}', gaining a permanent +${h.mod.value} ${h.mod.stat}.`}}),i.dronesOnBoard[g][y].statMods.push(h.mod);break}}}),{newState:u?i:e,effects:s,animationEvents:l}},t0=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>ls(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},tw=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const s=Yn.find(g=>g.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=s.limit;if(l.forEach(g=>{g.mod.stat==="limit"&&(u+=g.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const p=t.class;let d=0,h=0;return n===1?(h=Math.min(e.initialDeploymentBudget,p),d=p-h):(h=Math.min(e.deploymentBudget,p),d=p-h),e.energy<d?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${d} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:h,energyCost:d}},nw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},sv=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=iv(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},tj=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},nj=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")nw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=sv(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},rj=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=sv(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},aj=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Ai(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(p=>{l[p]={...n.shipSections[p],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},ij=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,p=Ai(s,l).totals.shieldsPerTurn,d=JSON.parse(JSON.stringify(s.shipSections)),h=Object.keys(d);let g=p,y=0,b=0;for(;g>0&&b<100;){const T=h[y%h.length],O=d[T],N=iv(T,s,l);O.allocatedShields<N&&(O.allocatedShields++,g--),y++,b++}const S={...s,shipSections:d},C={success:!0,newPhase:"deployment",firstPlayer:Op(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(C.player1State=i,C.player2State=S):(C.player1State=S,C.player2State=i),C},sj=(e,t,n,r,i,s,l)=>{const{effect:u,cost:p}=e,d=r.player1;let h="",g="Ability effect applied.";e.targeting?.type==="LANE"?h=`Lane ${n.id.slice(-1)}`:n&&(h=n.name),u.type==="HEAL"?(g=`Healed ${u.value} hull on targets in ${h}.`,u.scope!=="LANE"&&(g=`Healed ${u.value} hull on ${h}.`)):u.type==="DAMAGE"&&(g=`Dealt ${u.value} damage to ${h}.`),s&&s({player:d.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:h,outcome:g});const y={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.energy&&(y.player1.energy-=p.energy),p.exhausts)for(const E in y.player1.dronesOnBoard){const C=y.player1.dronesOnBoard[E].findIndex(T=>T.id===t.id);if(C!==-1){y.player1.dronesOnBoard[E][C].isExhausted=!0;break}}const b=dw(u,t,n,y,i,{resolveAttackCallback:l});y.player1=b.newPlayerStates.player1,y.player2=b.newPlayerStates.player2;const S=b.animationEvents||[];return{newPlayerStates:y,shouldEndTurn:!u.goAgain,animationEvents:S}},oj=(e,t,n,r,i,s,l)=>{const{logCallback:u,resolveAttackCallback:p}=s||{},{cost:d,effect:h}=e,g=r[l];u&&u({player:g.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const y=[{type:"SHIP_ABILITY_REVEAL",abilityName:e.name,sectionName:t,actingPlayerId:l}],b={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(b[l].energy-=d.energy,h.type==="REALLOCATE_SHIELDS")return{newPlayerStates:b,shouldEndTurn:!1,requiresShieldReallocation:!0,animationEvents:y};{const S=fw(h,t,n,b,i,{resolveAttackCallback:p},l);return b.player1=S.newPlayerStates.player1,b.player2=S.newPlayerStates.player2,y.push(...S.animationEvents||[]),S.needsDiscardSelection?{newPlayerStates:b,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:l,count:S.needsDiscardSelection,fromAbility:!0},animationEvents:y}:{newPlayerStates:b,shouldEndTurn:!0,animationEvents:y}}},rw=(e,t,n,r,i,s,l,u)=>{const p=tw(r,e,n,Object.values(r.dronesOnBoard).flat().length,Ai(r,s.player1||s));if(!p.isValid)return{success:!1,error:p.reason,message:p.message,newPlayerState:r};const{budgetCost:d,energyCost:h}=p;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const g=JSON.parse(JSON.stringify(r)),y={...g.dronesOnBoard,[t]:[...g.dronesOnBoard[t],{...e,id:0}]},b={...g,dronesOnBoard:y},S=Kr(e,t,b,i,s),E={...e,id:Date.now(),statMods:[],currentShields:S.maxShields,currentMaxShields:S.maxShields,hull:e.hull,isExhausted:!1};g.dronesOnBoard[t].push(E),g.deployedDroneCounts={...g.deployedDroneCounts,[e.name]:(g.deployedDroneCounts[e.name]||0)+1},n===1?g.initialDeploymentBudget-=d:g.deploymentBudget-=d,g.energy-=h,g.dronesOnBoard=_l(g,i,s);const C=[{type:"TELEPORT_IN",targetId:E.id,laneId:t,playerId:u,timestamp:Date.now()}];return{success:!0,newPlayerState:g,deployedDrone:E,animationEvents:C}},lj=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return t0(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):t0(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},cj=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=sr(e.id,t);if(!i)return[];const s=Kr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(p=>{const d=Kr(p,i,n,t,r);return!p.isExhausted&&(d.speed>s.speed||d.keywords.has("ALWAYS_INTERCEPTS"))}).map(p=>p.id)},uj=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,p=e.class;let d=0;n===1?d=Math.min(r.initialDeploymentBudget,p):d=Math.min(r.deploymentBudget,p);const h=p-d;if(r.energy<h)return{success:!1,error:"Insufficient energy for deployment"};const g={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let y={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],g]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-d:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-d:r.deploymentBudget,energy:r.energy-h};return y.dronesOnBoard=_l(y,i,s),{success:!0,newPlayerState:y,deployedDrone:g,costs:{energy:h,budget:d}}},dj=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l,attackingPlayer:u}=e,d=t[u==="player1"?"player2":"player1"],h=t[u],g=Kr(r,l,h,d,n),y=d.dronesOnBoard[l].filter(b=>{const S=Kr(b,l,d,h,n);return!b.isExhausted&&(S.speed>g.speed||S.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||b.id!==i.id)});return{hasInterceptors:y.length>0,interceptors:y,attackDetails:e}},ov=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},fj=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},pj=(e,t)=>{const n=ov(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},hj=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=Op(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},mj=(e,t,n,r)=>{const i=n0(e.player1,t,n,e.player2,e.placedSections),s=n0(e.player2,t,r,e.player1,e.opponentPlacedSections),l=r0(i,n.totals.handLimit),u=r0(s,r.totals.handLimit),p=Op(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),d={...e,turn:t,turnPhase:"deployment",currentPlayer:p,firstPlayerOfRound:p,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},h=[{type:"ROUND_START",turn:t,firstPlayer:p},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:d,uiEffects:h}},aw=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=Kr(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},n0=(e,t,n,r,i)=>({...aw(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),r0=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;const s=n.pop();r.push(s),w("CARDS",`📥 Card drawn to hand: ${s.name}`,{id:s.id,instanceId:s.instanceId,hasInstanceId:s.instanceId!==void 0,playerName:e.name})}return{...e,deck:n,hand:r,discardPile:i}},gj=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:p,opponentPlacedSections:d}=e,{addLogEntry:h,setPlayer2:g,setPendingAttack:y,endTurn:b,endDeploymentPhase:S,endActionPhase:E,setPassInfo:C}=n;let T;return l==="deployment"&&!u.player2Passed?T=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:d,placedSections:p,getShipStatus:ls,calculateEffectiveShipStats:Ai,calculateEffectiveStats:Kr,addLogEntry:h}):l==="action"&&!u.player2Passed&&(T=t.handleOpponentAction({player1:r,player2:i,placedSections:p,opponentPlacedSections:d,getShipStatus:ls,getLaneOfDrone:sr,getValidTargets:su,calculateEffectiveStats:Kr,addLogEntry:h})),T||null},yj=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:p}=t,{addLogEntry:d,setPlayer2:h,setPendingAttack:g,endTurn:y,endDeploymentPhase:b,endActionPhase:S,setPassInfo:E,resolveCardPlay:C}=n;if(e.type==="pass"){const T=!t.passInfo.player1Passed,O={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(T?"player2":null)};return E(O),O.player1Passed?l==="deployment"?b():l==="action"&&S():y("player2"),{newPassInfo:O}}else if(e.type==="deploy"){const{droneToDeploy:T,targetLane:O,logContext:N}=e.payload;d({player:i.name,actionType:"DEPLOY",source:T.name,target:O,outcome:`Deployed to ${O}.`},"aiDeploymentDeploy",N);const j=rw(T,O,i,r,s,{player1:u,player2:p});return j.success&&(h(j.newPlayerState),y("player2")),{deployedDrone:j.deployedDrone}}else if(e.type==="action"){const T=e.payload,{logContext:O}=e;switch(T.type){case"play_card":C(T.card,T.target,"player2",O);break;case"attack":g({attacker:T.attacker,target:T.target,targetType:T.targetType,lane:T.attacker.lane,attackingPlayer:"player2",aiContext:O});break;case"move":{const{drone:N,fromLane:j,toLane:M}=T;d({player:i.name,actionType:"MOVE",source:N.name,target:M,outcome:`Moved from ${j} to ${M}.`},"aiActionMove",O);let D=JSON.parse(JSON.stringify(i));D.dronesOnBoard[j]=D.dronesOnBoard[j].filter(G=>G.id!==N.id);const k={...N,isExhausted:!0};D.dronesOnBoard[M].push(k);const{newState:L}=JP(D,k,j,M,d);L.dronesOnBoard=_l(L,r,{player1:u,player2:p}),h(L),y("player2");break}default:y("player2");break}return{action:T}}return null},iw=(e,t,n,r,i,s,l,u)=>{const{cost:p,effect:d}=e,{logCallback:h,applyOnMoveEffectsCallback:g,updateAurasCallback:y}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=p,b.hand=b.hand.filter(T=>T.instanceId!==e.instanceId),b.discardPile.push(e);const S=new Set(t.map(T=>T.id));b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(T=>!S.has(T.id));const E=t.map(T=>({...T,isExhausted:T.isExhausted||!d.properties?.includes("DO_NOT_EXHAUST")}));b.dronesOnBoard[r].push(...E),h({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(T=>T.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let C=b;return E.forEach(T=>{const{newState:O}=g(C,T,n,r,h);C=O}),C.dronesOnBoard=y(C,s,l),{newPlayerState:C,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},sw=(e,t,n,r,i,s,l,u)=>{const{cost:p,effect:d}=e,{logCallback:h,applyOnMoveEffectsCallback:g,updateAurasCallback:y}=u;let b=JSON.parse(JSON.stringify(i));b.energy-=p,b.hand=b.hand.filter(C=>C.instanceId!==e.instanceId),b.discardPile.push(e),b.dronesOnBoard[n]=b.dronesOnBoard[n].filter(C=>C.id!==t.id);const S={...t,isExhausted:d.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};b.dronesOnBoard[r].push(S),h({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:E}=g(b,S,n,r,h);return E.dronesOnBoard=y(E,s,l),{newPlayerState:E,shouldEndTurn:!e.effect.goAgain,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},vj=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},ow=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=ls(i);(s==="damaged"||s==="critical")&&n++}return n},bj=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:p,resolveAttackCallback:d}=s,h=t?t.name||t.id:"N/A";let g="Card effect applied.";const y=e.effect;if(y.type==="DRAW"&&(g=`Drew ${y.value} card(s).`),y.type==="GAIN_ENERGY"&&(g=`Gained ${y.value} energy.`),y.type==="HEAL_HULL"&&(g=`Healed ${y.value} hull on ${h}.`),y.type==="HEAL_SHIELDS"&&(g=`Healed ${y.value} shields on ${h}.`),y.type==="READY_DRONE"&&(g=`Readied ${h}.`),y.type==="DAMAGE"&&(y.scope==="FILTERED"?g=`Dealt ${y.value} damage to filtered targets in ${h}.`:g=`Dealt ${y.value} damage to ${h}.`),y.type==="MODIFY_STAT"){const C=y.mod,T=C.type==="temporary"?" until the end of the turn":" permanently";g=`Gave ${h} a ${C.value>0?"+":""}${C.value} ${C.stat} bonus${T}.`}if(y.type==="REPEATING_EFFECT"){const C=r[n],T=ow(y.condition,C);g=`Drew ${T} card(s) and gained ${T} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:h,outcome:g});let b=vj(e,n,r);const S=xj(e.effect,t,n,b,i,s,e),E=[];if(E.push({type:"CARD_REVEAL",cardId:e.id,cardName:e.name,cardData:e,actingPlayerId:n,timestamp:Date.now()}),e.visualEffect&&t){let C=null,T=null,O=null;if(t.id&&(t.id==="lane1"||t.id==="lane2"||t.id==="lane3")){const N=e.targeting?.affinity||"ANY";N==="ENEMY"?(C=n==="player1"?"player2":"player1",T=t.id,O="lane"):N==="ANY"&&(C="center",T=t.id,O="lane"),C&&O&&E.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:T,targetType:O,duration:e.visualEffect.duration||800,timestamp:Date.now()})}else{for(const N of["player1","player2"]){for(const j in b[N].dronesOnBoard)if(b[N].dronesOnBoard[j].some(M=>M.id===t.id)){C=N,T=j,O="drone";break}if(C)break}if(!C){for(const N of["player1","player2"])if(b[N].shipSections[t.name]||b[N].shipSections[t.id]){C=N,O="section";break}}C&&O&&E.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:T,targetType:O,duration:e.visualEffect.duration||800,timestamp:Date.now()})}}if(S.animationEvents&&E.push(...S.animationEvents),w("CARDS","[ANIMATION EVENTS] resolveCardPlay emitted:",E),!S.needsCardSelection){const C=lw(e,n,S.newPlayerStates);return{newPlayerStates:C.newPlayerStates,shouldEndTurn:C.shouldEndTurn,additionalEffects:S.additionalEffects||[],animationEvents:E,needsCardSelection:!1}}return{newPlayerStates:b,shouldEndTurn:!1,additionalEffects:S.additionalEffects||[],animationEvents:E,needsCardSelection:S.needsCardSelection}},lw=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},xj=(e,t,n,r,i,s,l=null)=>e.effects?Sj(e,t,n,r,i,s,l):cw(e,t,n,r,i,s,l),Sj=(e,t,n,r,i,s,l=null)=>{let u=r,p=[];if(e.type==="REPEATING_EFFECT"){const d=ow(e.condition,u[n]);for(let h=0;h<d;h++)for(const g of e.effects){const y=cw(g,t,n,u,i,s,l);u=y.newPlayerStates,y.additionalEffects&&p.push(...y.additionalEffects)}}return{newPlayerStates:u,additionalEffects:p}},cw=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return cv(e,null,t,n,r);case"SEARCH_AND_DRAW":return uw(e,null,t,n,r);case"GAIN_ENERGY":return Aj(e,n,r,i);case"READY_DRONE":return Ej(e,t,n,r);case"HEAL_HULL":return lv(e,null,t,n,r,i);case"HEAL_SHIELDS":return Cj(e,t,n,r);case"DAMAGE":return wp(e,null,t,n,r,i,s,l);case"DESTROY":return Pj(e,t,n,r);case"MODIFY_STAT":return wj(e,t,n,r);case"MODIFY_DRONE_BASE":return Oj(e,t,n,r);case"DESTROY_UPGRADE":return Nj(e,t,n,r);case"SINGLE_MOVE":case"MULTI_MOVE":return Mj(e,t,n,r,i,s,l);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},Aj=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,p=Ai(l,u).totals,d=Math.min(p.maxEnergy,l.energy+e.value);return l.energy=d,{newPlayerStates:s,additionalEffects:[]}},Ej=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(d=>d.id===t.id);if(p!==-1){l.dronesOnBoard[u][p].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},Cj=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n];for(const u in l.dronesOnBoard){const p=l.dronesOnBoard[u].findIndex(d=>d.id===t.id);if(p!==-1){const d=l.dronesOnBoard[u][p];d.currentShields=Math.min(d.currentMaxShields||d.shields,d.currentShields+e.value);break}}return{newPlayerStates:s,additionalEffects:[]}},Tj=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,d=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,g=r[d].dronesOnBoard[u]||[];w("COMBAT",`[DEBUG] Filtered damage - ${n} targeting ${d} ${u}`),w("COMBAT",`[DEBUG] Drones in ${d} ${u}:`,g.map(N=>`${N.name}(${N.id}) [${N.hull}hp, ${N.speed}spd]`));const{stat:y,comparison:b,value:S}=e.filter,E={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},T=E[d].dronesOnBoard[u]||[];for(let N=T.length-1;N>=0;N--){const j=T[N];let M=!1;if(b==="GTE"&&j[y]>=S&&(M=!0),b==="LTE"&&j[y]<=S&&(M=!0),w("COMBAT",`[DEBUG] ${j.name} ${y}=${j[y]} ${b} ${S} = ${M}`),M){w("COMBAT",`[DEBUG] Applying ${e.value} damage to ${j.name}`);const D=j.currentShields||0;let k=e.value;const L=Math.min(k,D);j.currentShields=(j.currentShields||0)-L,k-=L,k>0&&(j.hull-=k),j.hull<=0&&(w("COMBAT",`[DEBUG] ${j.name} destroyed`),T.splice(N,1))}}const O=[];for(const N of g){const j=T.find(D=>D.id===N.id);let M=!1;if(b==="GTE"&&N[y]>=S&&(M=!0),b==="LTE"&&N[y]<=S&&(M=!0),M){const D=N.currentShields||0,k=Math.min(e.value,D),L=e.value-k;k>0&&O.push({type:"SHIELD_DAMAGE",targetId:N.id,targetPlayer:d,targetLane:u,targetType:"drone",amount:k,timestamp:Date.now()}),j?L>0&&O.push({type:"HULL_DAMAGE",targetId:N.id,targetPlayer:d,targetLane:u,targetType:"drone",amount:L,timestamp:Date.now()}):O.push({type:"DRONE_DESTROYED",targetId:N.id,targetPlayer:d,targetLane:u,targetType:"drone",timestamp:Date.now()})}}return{newPlayerStates:E,additionalEffects:[],animationEvents:O}}else{const u=r[t.owner],p=sr(t.id,u);if(p){w("COMBAT",`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const d={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},g=d[t.owner].dronesOnBoard[p]||[],y=g.find(b=>b.id===t.id);if(y){let b=e.value,S=0,E=b;if(e.damageType!=="PIERCING"&&(S=Math.min(b,y.currentShields),E-=S,y.currentShields-=S),y.hull-=E,w("COMBAT",`[DEBUG] Applied ${E} hull damage to ${y.name} (${y.hull} hull remaining)`),y.hull<=0){w("COMBAT",`[DEBUG] ${y.name} destroyed`);const T=g.findIndex(O=>O.id===t.id);T>=0&&g.splice(T,1)}const C=[];return S>0&&C.push({type:"SHIELD_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:S,timestamp:Date.now()}),y.hull<=0?C.push({type:"DRONE_DESTROYED",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",timestamp:Date.now()}):E>0&&C.push({type:"HULL_DAMAGE",targetId:t.id,targetPlayer:t.owner,targetLane:p,targetType:"drone",amount:E,timestamp:Date.now()}),{newPlayerStates:d,additionalEffects:[],animationEvents:C}}return{newPlayerStates:d,additionalEffects:[],animationEvents:[]}}}return{newPlayerStates:r,additionalEffects:[],animationEvents:[]}},Pj=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=n==="player1"?"player2":"player1",u=[];if(e.scope==="LANE"&&t.id){const p=t.id;(s[l].dronesOnBoard[p]||[]).forEach(g=>{u.push({type:"DRONE_DESTROYED",targetId:g.id,targetPlayer:l,targetLane:p,targetType:"drone",timestamp:Date.now()});const y=ml(s[l],g);s[l].deployedDroneCounts={...s[l].deployedDroneCounts||{},...y.deployedDroneCounts}}),s[l].dronesOnBoard[p]=[],(s[n].dronesOnBoard[p]||[]).forEach(g=>{u.push({type:"DRONE_DESTROYED",targetId:g.id,targetPlayer:n,targetLane:p,targetType:"drone",timestamp:Date.now()});const y=ml(s[n],g);s[n].deployedDroneCounts={...s[n].deployedDroneCounts||{},...y.deployedDroneCounts}}),s[n].dronesOnBoard[p]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const p=s[l],d=sr(t.id,p);if(d){const h=p.dronesOnBoard[d].find(g=>g.id===t.id);if(h){u.push({type:"DRONE_DESTROYED",targetId:h.id,targetPlayer:l,targetLane:d,targetType:"drone",timestamp:Date.now()});const g=ml(p,h);p.deployedDroneCounts={...p.deployedDroneCounts||{},...g.deployedDroneCounts},p.dronesOnBoard[d]=p.dronesOnBoard[d].filter(y=>y.id!==t.id)}}}return{newPlayerStates:s,additionalEffects:[],animationEvents:u}},wj=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&typeof t.id=="string"&&t.id.startsWith("lane")){const p=t.id;l.dronesOnBoard[p]&&l.dronesOnBoard[p].forEach(d=>{d.statMods||(d.statMods=[]),d.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const p in l.dronesOnBoard){const d=l.dronesOnBoard[p].findIndex(h=>h.id===t.id);if(d!==-1){const h=l.dronesOnBoard[p][d];h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},Oj=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,p=l.appliedUpgrades[u]||[],d={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(d.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...p,d]},{newPlayerStates:s,additionalEffects:[]}},Nj=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:p,instanceId:d}=t;if(u.appliedUpgrades[p]){const h=u.appliedUpgrades[p].filter(g=>g.instanceId!==d);h.length>0?u.appliedUpgrades[p]=h:delete u.appliedUpgrades[p]}return{newPlayerStates:s,additionalEffects:[]}},wp=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:p}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return Tj(e,n,r,i,l,u?.targeting);const d=n.owner==="player1"?i.player1:i.player2,h=sr(n.id,d);if(h&&p){const g={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:h,damageType:e.damageType},y=hw(g,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:y.newPlayerStates,additionalEffects:y.afterAttackEffects||[],animationEvents:y.animationEvents||[]}}return{newPlayerStates:i,additionalEffects:[],animationEvents:[]}},lv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1";if(e.scope==="LANE"){const d=n.id;u[p].dronesOnBoard[d]&&u[p].dronesOnBoard[d].forEach(h=>{const g=Yn.find(y=>y.name===h.name);g&&h.hull<g.hull&&(h.hull=Math.min(g.hull,h.hull+e.value))})}else{const d=Yn.find(h=>h.name===n.name);if(d){const h=sr(n.id,u[p]);if(h){const g=u[p].dronesOnBoard[h].findIndex(y=>y.id===n.id);g!==-1&&(u[p].dronesOnBoard[h][g].hull=Math.min(d.hull,u[p].dronesOnBoard[h][g].hull+e.value))}}else if(n.name&&u[p].shipSections[n.name]){const h=u[p].shipSections[n.name],y=(p==="player1"?s.player1:s.player2).find(b=>b.name===n.name);y&&(h.hull=Math.min(y.maxHull,h.hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},cv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",d=u[p];let h=[...d.deck],g=[...d.hand],y=[...d.discardPile];const b=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let E=0;E<b;E++){if(h.length===0)if(y.length>0)h=[...y].sort(()=>.5-Math.random()),y=[];else break;h.length>0&&g.push(h.pop())}u[p]={...d,deck:h,hand:g,discardPile:y};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},_j=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),uw=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},p=r||"player1",d=u[p];let h=[...d.deck],g=[...d.discardPile],y,b;if(e.filter)h.length===0&&g.length>0&&(h=[...g.sort(()=>.5-Math.random())],g=[]),y=h.filter(E=>_j(E,e.filter)).slice(0,e.searchCount),b=h.filter(E=>!y.includes(E));else{const S=e.searchCount;h.length<S&&g.length>0&&(h=[...h,...g.sort(()=>.5-Math.random())],g=[]),y=h.slice(-e.searchCount).reverse(),b=h.slice(0,-e.searchCount)}if(p==="player2"){const S=Dj(y,e.drawCount,u),E=y.filter(O=>!S.includes(O)),C=[...d.hand,...S];let T=[...b,...E];return e.shuffleAfter&&(T=T.sort(()=>.5-Math.random())),u[p]={...d,deck:T,hand:C,discardPile:g},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:y,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:b,discardPile:g,filter:e.filter}}},Dj=(e,t,n,r)=>e.map(s=>({card:s,score:kj(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),kj=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},Mj=(e,t,n,r,i,s,l)=>{if(n==="player1")return{newPlayerStates:r,additionalEffects:[],needsCardSelection:{type:e.type==="SINGLE_MOVE"?"single_move":"multi_move",card:l,effect:e,maxDrones:e.type==="MULTI_MOVE"?e.count:1,doNotExhaust:e.properties?.includes("DO_NOT_EXHAUST")||!1,phase:e.type==="SINGLE_MOVE"?"select_drone":"select_source_lane"}};const u=n==="player1"?"player2":"player1",p=r[n],d=r[u];let h=null,g=-1/0;for(const y of["lane1","lane2","lane3"]){const S=(p.dronesOnBoard[y]||[]).filter(E=>!E.isExhausted);if(S.length!==0)for(const E of["lane1","lane2","lane3"]){if(y===E)continue;if(e.type==="SINGLE_MOVE"){const N=parseInt(y.replace("lane","")),j=parseInt(E.replace("lane",""));if(Math.abs(N-j)!==1)continue}const C=d.dronesOnBoard[E]?.length||0,T=p.dronesOnBoard[E]?.length||0,O=C*10-T*5;O>g&&(g=O,h={fromLane:y,toLane:E,drones:e.type==="SINGLE_MOVE"?[S[0]]:S.slice(0,Math.min(e.count||3,S.length))})}}if(!h)return{newPlayerStates:r,additionalEffects:[]};if(e.type==="SINGLE_MOVE"){const y=sw(l,h.drones[0],h.fromLane,h.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:y.newPlayerState},additionalEffects:[]}}else{const y=iw(l,h.drones,h.fromLane,h.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:y.newPlayerState},additionalEffects:[]}}},dw=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return lv(e,t,n,"player1",r,i);case"DAMAGE":return wp(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},fw=(e,t,n,r,i,s,l)=>{const u={name:t};switch(e.type){case"DAMAGE":return wp(e,u,n,l,r,i,s);case"RECALL_DRONE":return pw(e,t,n,r,i,s,l);case"DRAW_THEN_DISCARD":return cv(e,u,n,l,r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},pw=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},p=l==="player1"?"player2":"player1",d=sr(n,u[l]);if(d){const h=u[l].dronesOnBoard[d].find(y=>y.id===n);if(!h)return console.warn("⚠️ [RECALL DEBUG] Drone not found in lane:",n,"lane:",d),{newPlayerStates:u,additionalEffects:[],animationEvents:[]};u[l].dronesOnBoard[d]=u[l].dronesOnBoard[d].filter(y=>y.id!==n),Object.assign(u[l],ZP(u[l],h)),u[l].dronesOnBoard=_l(u[l],u[p],i);const g=[{type:"TELEPORT_OUT",targetId:n,laneId:d,playerId:l,timestamp:Date.now()}];return{newPlayerStates:u,additionalEffects:[],animationEvents:g}}return{newPlayerStates:u,additionalEffects:[],animationEvents:[]}},hw=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:p,interceptor:d,attackingPlayer:h,abilityDamage:g,goAgain:y,damageType:b,lane:S,aiContext:E}=e,C=g!==void 0,T=d||u,O=d?"drone":p,N=h,j=T.owner||(N==="player1"?"player2":"player1"),M=t[N],D=t[j];let k=null,L=null;!C&&l&&l.id&&(k=sr(l.id,M),L=Kr(l,k,M,D,n));let G=g??(L?Math.max(0,L.attack):0),K=b||(l?l.damageType:void 0);L&&L.keywords&&L.keywords.has("PIERCING")&&(K="PIERCING"),O==="section"&&!g&&l&&l.name&&Yn.find(se=>se.name===l.name)?.abilities?.forEach(se=>{se.type==="PASSIVE"&&se.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(G+=se.effect.value)});let z=0,Y=0,ie=!1,Z=0,te=0;if(O==="drone"){let V=null;for(const se in D.dronesOnBoard)if(V=D.dronesOnBoard[se].find(ge=>ge.id===T.id),V)break;if(V){let se=G;K!=="PIERCING"&&(z=Math.min(G,V.currentShields),se-=z),Y=Math.min(se,V.hull),ie=V.hull-Y<=0,Z=V.currentShields-z,te=ie?0:V.hull-Y}}else{const V=D.shipSections[T.name];if(V){let se=G;K!=="PIERCING"&&(z=Math.min(G,V.allocatedShields),se-=z),Y=Math.min(se,V.hull),ie=V.hull-Y<=0,Z=V.allocatedShields-z,te=ie?0:V.hull-Y}}const U=`Dealt ${z} shield and ${Y} hull damage to ${T.name}.`+(O==="drone"?ie?` ${T.name} Destroyed.`:` ${T.name} has ${Z} shields and ${te} hull left.`:""),q=[];if(l&&l.id&&!C&&q.push({type:"DRONE_ATTACK_START",sourceId:l.id,sourcePlayer:N,sourceLane:k,targetId:T.id,targetPlayer:j,targetLane:O==="drone"?sr(T.id,D):null,targetType:O,attackValue:L?L.attack:1,timestamp:Date.now()}),z>0){const V={type:"SHIELD_DAMAGE",targetId:T.id,targetPlayer:j,targetLane:O==="drone"?sr(T.id,D):null,targetType:O,amount:z,timestamp:Date.now()};q.push(V)}if(ie){const V={type:O==="drone"?"DRONE_DESTROYED":"SECTION_DESTROYED",targetId:T.id,targetPlayer:j,targetLane:O==="drone"?sr(T.id,D):null,targetType:O,timestamp:Date.now()};q.push(V)}else{if(Y>0){const V={type:"HULL_DAMAGE",targetId:T.id,targetPlayer:j,targetLane:O==="drone"?sr(T.id,D):null,targetType:O,amount:Y,timestamp:Date.now()};q.push(V)}O==="section"&&(z>0||Y>0)&&q.push({type:"SECTION_DAMAGED",targetId:T.id,targetPlayer:j,targetType:"section",timestamp:Date.now()}),l&&l.id&&!C&&q.push({type:"DRONE_RETURN",sourceId:l.id,sourcePlayer:N,sourceLane:k,timestamp:Date.now()})}w("COMBAT","[ANIMATION EVENTS] resolveAttack emitted:",q);const Q=k||(S?S.replace("lane","Lane "):null),Se=O==="drone"?`${T.name} (${Q})`:T.name,I=l&&l.name?`${l.name} (${Q})`:"Card Effect";r&&r({player:t[N].name,actionType:"ATTACK",source:I,target:Se,outcome:U},"resolveAttack",E);const F={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};if(O==="drone"){let V=!1;for(const se in F[j].dronesOnBoard){const ge=F[j].dronesOnBoard[se].findIndex(Ae=>Ae.id===T.id);if(ge!==-1){if(F[j].dronesOnBoard[se][ge].hull-Y<=0){V=!0;const Ae=F[j].dronesOnBoard[se][ge];F[j].dronesOnBoard[se]=F[j].dronesOnBoard[se].filter(ye=>ye.id!==T.id),Object.assign(F[j],ml(F[j],Ae))}else F[j].dronesOnBoard[se][ge].hull-=Y,F[j].dronesOnBoard[se][ge].currentShields-=z;break}}if(V){const se=j==="player1"?F.player2:F.player1;F[j].dronesOnBoard=_l(F[j],se,n)}}else{F[j].shipSections[T.name].hull-=Y,F[j].shipSections[T.name].allocatedShields-=z;const V=j==="player1"?n.player1:n.player2,se=Ai(F[j],V).totals;F[j].energy>se.maxEnergy&&(F[j].energy=se.maxEnergy)}if(!C&&l&&l.id){let V=!1;for(const se in F[N].dronesOnBoard){const ge=F[N].dronesOnBoard[se].findIndex(Ae=>Ae.id===l.id);if(ge!==-1){F[N].dronesOnBoard[se][ge].isExhausted=!0,V=!0;break}}if(V){const se=ew(F[N],l,N);F[N]=se.newState,se.animationEvents&&se.animationEvents.length>0&&q.push(...se.animationEvents),se.effects.forEach(ge=>{ge.type==="LOG"&&r&&r(ge.payload,"afterAttack")})}}if(d){const V=N==="player1"?"player2":"player1";for(const se in F[V].dronesOnBoard){const ge=F[V].dronesOnBoard[se].findIndex(Ae=>Ae.id===d.id);if(ge!==-1){Kr(F[V].dronesOnBoard[se][ge],se,F[V],F[N],n).keywords.has("DEFENDER")||(F[V].dronesOnBoard[se][ge].isExhausted=!0);break}}}return{newPlayerStates:F,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:k||S,targetName:T.name,targetType:O,interceptorName:d?d.name:null,shieldDamage:z,hullDamage:Y,wasDestroyed:ie,remainingShields:Z,remainingHull:te,outcome:U,shouldEndTurn:!y},animationEvents:q}},jj=(e,t)=>{const n=Ai(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},Op=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),Ij=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},Rj=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},Lj=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},$j=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},Bj=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(p=>p.instanceId===l.instanceId||p.name===l.name&&p.id===l.id);if(u!==-1&&s<t){const p=r.splice(u,1)[0];i.push(p),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),p=r.splice(u,1)[0];i.push(p),s++}return{...e,hand:r,discardPile:i,discardCount:s}},mw=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const p=parseInt(u.replace("lane",""),10);Math.abs(l-p)===1&&s.push({id:u,owner:"player1"})})}return s},gw=(e,t)=>t.activeDronePool.map(n=>{const r=Yn.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),yw=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},Uj=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=su("player1",e.drone,e.ability,i,s):t?l=su("player1",{id:t.sectionName},t.ability,i,s):n?u=mw(n,i):r&&(r.type==="Upgrade"?u=gw(r,i):r.effect.type==="MULTI_MOVE"?u=yw(n,i):u=su("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},zj=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),Gj=(e,t,n,r)=>{const i=ov(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},Be={initialPlayerState:ej,buildDeckFromList:QP,createCard:WP,getEffectiveSectionMaxShields:iv,getShipStatus:ls,onDroneDestroyed:ml,onDroneRecalled:ZP,checkWinCondition:t0,calculateAfterAttackStateAndEffects:ew,applyOnMoveEffects:JP,updateAuras:_l,getLaneOfDrone:sr,getValidTargets:su,calculateAllValidTargets:Uj,calculateMultiSelectTargets:mw,calculateUpgradeTargets:gw,calculateMultiMoveTargets:yw,validateDeployment:tw,validateShieldRemoval:nw,validateShieldAddition:sv,executeShieldReallocation:tj,getValidShieldReallocationTargets:nj,processShieldAllocation:rj,processResetShieldAllocation:aj,processEndShieldAllocation:ij,resolveAttack:hw,resolveAbility:sj,resolveShipAbility:oj,executeDeployment:rw,resolveCardPlay:bj,finishCardPlay:lw,resolveMultiMove:iw,resolveSingleMove:sw,checkGameStateForWinner:lj,calculatePotentialInterceptors:cj,calculateAiInterception:dj,calculateTurnTransition:ov,calculatePassTransition:fj,readyDronesAndRestoreShields:aw,calculateNewRoundPlayerState:n0,drawToHandLimit:r0,drawPlayerCards:jj,determineFirstPlayer:Op,enforceHandLimit:Ij,checkHandLimitCompliance:Rj,checkHandLimitViolations:Lj,enforceHandLimits:$j,processDiscardPhase:Bj,processTurnTransition:pj,processPhaseChange:hj,processRoundStart:mj,createExplosionEffect:zj,createTurnEndEffects:Gj,resolveUnifiedDamageEffect:wp,resolveUnifiedHealEffect:lv,resolveUnifiedDrawEffect:cv,resolveSearchAndDrawEffect:uw,resolveDroneAbilityEffect:dw,resolveShipAbilityEffect:fw,resolveShipRecallEffect:pw,executeAiDeployment:uj,executeAiTurn:gj,executeAiAction:yj},cl=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:Be,startingDecklist:fl,startingDroneList:XP},Symbol.toStringTag,{value:"Module"})),Hj="modulepreload",Yj=function(e){return"/"+e},PA={},qr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let p=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=p(n.map(d=>{if(d=Yj(d),d in PA)return;PA[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":Hj,h||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),h)return new Promise((b,S)=>{y.addEventListener("load",b),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};class qj{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},w("STATE_SYNC","💾 GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&w("STATE_SYNC",`💾 Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&w("STATE_SYNC",`💾 Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const Fj=new qj;class un{static instance=null;static getInstance(t){return un.instance||(un.instance=new un(t)),un.instance}static reset(){un.instance&&un.instance.stateSubscriptionCleanup&&un.instance.stateSubscriptionCleanup(),un.instance=null,w("STATE_SYNC","🎯 GameDataService singleton reset")}constructor(t){if(un.instance)return console.warn("⚠️ GameDataService already exists. Use getInstance() instead of new GameDataService()"),un.instance;this.gameStateManager=t,this.cache=Fj,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),w("STATE_SYNC","🎯 GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),p=s[l],d=s[u],h=this.getPlacedSectionsForEngine(),g=this.isDroneOwnedByPlayer(t,p),S=Kr(t,n,g?p:d,g?d:p,h);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=Ai(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(d=>({...d,effectiveStats:this.getEffectiveStats(d,t),isPlayer:!0})),p=(l.dronesOnBoard[t]||[]).map(d=>({...d,effectiveStats:this.getEffectiveStats(d,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:p,hasGuardian:this.hasGuardianInLane(t,p)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const Vj=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"}));class Kj{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,s=null){if(this.isInitialized){w("AI_DECISIONS","🤖 AIPhaseProcessor already initialized, skipping...");return}this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&!this.gameDataService&&(this.gameDataService=un.getInstance(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&(this.stateSubscriptionCleanup=s.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,w("AI_DECISIONS","🤖 AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&w("AI_DECISIONS","🔗 AIPhaseProcessor connected to ActionProcessor for execution"),s&&w("AI_DECISIONS","🔗 AIPhaseProcessor subscribed to GameStateManager for self-triggering")}async processDroneSelection(t=null){w("AI_DECISIONS","🤖 AIPhaseProcessor.processDroneSelection starting (selecting 5 from deck)...");const i=this.gameStateManager.getState().commitments?.deckSelection;if(!i||!i.player2)throw new Error("AI deck commitment not found - deckSelection phase must complete first");const s=i.player2.drones||[];if(w("AI_DECISIONS",`🎲 AI deck contains ${s.length} drones:`,s.join(", ")),s.length<5||s.length>10)throw new Error(`AI deck must have 5-10 drones, found ${s.length}`);const l=this.extractDronesFromDeck(s);if(l.length<5)throw console.error("❌ Failed to extract minimum required drones from deck"),new Error(`Only extracted ${l.length} drones from AI deck (minimum 5 required)`);const u=this.randomlySelectDrones(l,5),p=u.map(d=>d.name).join(", ");return w("AI_DECISIONS",`🤖 AI randomly selected 5 drones from ${l.length} available: ${p}`),u}extractDronesFromDeck(t){return t.map(r=>{const i=this.dronePool?.find(s=>s.name===r);return i||console.warn(`⚠️ Drone "${r}" not found in drone collection`),i}).filter(Boolean)}randomlySelectDrones(t,n){return[...t].sort(()=>.5-Math.random()).slice(0,n)}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(p=>n.preferredDrones.includes(p.name)),u=Math.min(3,l.length);r=l.slice(0,u),w("AI_DECISIONS",`🎯 AI selected ${r.length} preferred drones:`,r.map(p=>p.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((p,d)=>{const h=(p.energyCost||1)+(p.health||0)+(p.attack||0);return(d.energyCost||1)+(d.health||0)+(d.attack||0)-h});const l=r?.aggression||.5,u=r?.economy||.5;for(let p=0;p<n&&s.length>0;p++){let d=0;if(l>.7)d=s.findIndex(h=>(h.attack||0)>2),d===-1&&(d=0);else if(u>.7)d=s.findIndex(h=>(h.energyCost||1)<=2),d===-1&&(d=0);else{const h=Math.min(3,s.length);d=Math.floor(Math.random()*h)}i.push(s.splice(d,1)[0])}return w("AI_DECISIONS",`🎯 AI balanced selection (${n}):`,i.map(p=>p.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;w("AI_DECISIONS","🤖 AIPhaseProcessor.processDeckSelection starting (selecting 40 cards + drones)...");let r=[];if(n&&n.decklist&&n.decklist.length>0){w("AI_DECISIONS",`🎯 Using ${n.name} personality decklist`);const{gameEngine:l}=await qr(async()=>{const{gameEngine:u}=await Promise.resolve().then(()=>cl);return{gameEngine:u}},void 0);r=l.buildDeckFromList(n.decklist)}else{w("AI_DECISIONS","🎯 Using standard deck as fallback");const{gameEngine:l,startingDecklist:u}=await qr(async()=>{const{gameEngine:p,startingDecklist:d}=await Promise.resolve().then(()=>cl);return{gameEngine:p,startingDecklist:d}},void 0);r=l.buildDeckFromList(u)}let i=[];if(n&&n.dronePool&&Array.isArray(n.dronePool)){if(i=[...n.dronePool],w("AI_DECISIONS",`🎯 Using ${n.name} personality dronePool: ${i.length} drones`),i.length<5)throw new Error(`AI personality '${n.name}' has only ${i.length} drones in dronePool. Minimum 5 required.`);if(i.length>10)throw new Error(`AI personality '${n.name}' has ${i.length} drones in dronePool. Maximum 10 allowed.`)}else{w("AI_DECISIONS","⚠️ Personality missing dronePool, using standard drone list as fallback");const{startingDroneList:l}=await qr(async()=>{const{startingDroneList:u}=await Promise.resolve().then(()=>cl);return{startingDroneList:u}},void 0);i=[...l]}return w("AI_DECISIONS",`✅ AI selected deck: ${r.length} cards + ${i.length} drones`),w("AI_DECISIONS",`🎲 AI drones: ${i.join(", ")}`),{deck:r,drones:i,shipComponents:{BRIDGE_001:"l",POWERCELL_001:"m",DRONECONTROL_001:"r"}}}async processPlacement(t=null){const n=t||this.currentAIPersonality;w("AI_DECISIONS","🤖 AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];w("AI_DECISIONS",`🎯 AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),s=i.join(", ");return w("AI_DECISIONS",`🤖 AI placement completed: ${s}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const s=this.arrangeAggressivePlacement(r);return w("AI_DECISIONS","🎯 AI using aggressive placement strategy"),s}else if(n.economy>.7){const s=this.arrangeEconomicPlacement(r);return w("AI_DECISIONS","🎯 AI using economic placement strategy"),s}}const i=this.arrangeBalancedPlacement(r);return w("AI_DECISIONS","🎯 AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(p=>p===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await qr(async()=>{const{aiBrain:s}=await import("./aiLogic-Di4nwXSp.js");return{aiBrain:s}},[]),{gameEngine:r}=await qr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>cl);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});w("AI_DECISIONS","🤖 AIPhaseProcessor executing deployment decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await qr(async()=>{const{aiBrain:s}=await import("./aiLogic-Di4nwXSp.js");return{aiBrain:s}},[]),{gameEngine:r}=await qr(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>cl);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});return w("AI_DECISIONS","🤖 AIPhaseProcessor executing action decision:",i),i.type==="pass"?(await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}),null):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await qr(async()=>{const{gameEngine:h}=await Promise.resolve().then(()=>cl);return{gameEngine:h}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return w("AI_DECISIONS","🤖 AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},p=[];if(u.hand.length>l){const h=u.hand.length-l;p=u.hand.slice(0,h),u={...u,hand:u.hand.slice(h),discardPile:[...u.discardPile,...p]},w("AI_DECISIONS",`🤖 AI discarding ${h} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const d=u.hand.length-(r.hand.length-p.length);return d>0&&w("AI_DECISIONS",`🤖 AI drew ${d} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:p,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return w("AI_DECISIONS","🤖 AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];return u=[...n.hand].sort((d,h)=>h.cost-d.cost).slice(0,l),w("AI_DECISIONS",`🤖 AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return w("AI_DECISIONS","🤖 AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let p=[];const d=[];return Object.entries(n.dronesOnBoard||{}).forEach(([h,g])=>{g.forEach(y=>{d.push({...y,lane:h})})}),d.sort((h,g)=>{const y=this.gameDataService.getEffectiveStats(h,h.lane),b=this.gameDataService.getEffectiveStats(g,g.lane);return y.power-b.power}),p=d.slice(0,u),w("AI_DECISIONS",`🤖 AI removing ${p.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:p,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(w("AI_DECISIONS","🤖 AI has already passed"),!0):!1}async executePass(t){return w("AI_DECISIONS",`🏳️ AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}async executeShieldAllocationTurn(t){if(w("AI_DECISIONS","🤖 AIPhaseProcessor.executeShieldAllocationTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");t.player2;const n=t.opponentPlacedSections,r=t.opponentShieldsToAllocate||0;if(r===0){w("AI_DECISIONS","🤖 AI has no shields to allocate");return}const i=n.map(u=>u.name);if(i.length===0){w("AI_DECISIONS","🤖 AI has no placed sections to allocate shields to");return}let s=r,l=0;for(w("AI_DECISIONS",`🤖 AI distributing ${r} shields evenly across ${i.length} sections`);s>0;){const u=i[l];await this.actionProcessor.queueAction({type:"addShield",payload:{sectionName:u,playerId:"player2"}}),s--,l=(l+1)%i.length,w("AI_DECISIONS",`🤖 AI allocated shield to ${u}, ${s} remaining`)}w("AI_DECISIONS","✅ AI shield allocation complete")}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||t.winner||t.gameStage==="gameOver"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(w("AI_DECISIONS",`⏰ AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn()},1500)))}async executeTurn(){if(this.isProcessing){w("AI_DECISIONS","⚠️ AIPhaseProcessor: Already processing a turn, skipping");return}const t=this.gameStateManager.getState();if(t.currentPlayer!=="player2"){w("AI_DECISIONS","⚠️ AIPhaseProcessor: Turn changed before execution, cancelling AI turn");return}if(t.passInfo&&t.passInfo.player2Passed){w("AI_DECISIONS","⚠️ AIPhaseProcessor: AI has already passed, cancelling turn");return}if(!["deployment","action"].includes(t.turnPhase)){w("AI_DECISIONS","⚠️ AIPhaseProcessor: Phase changed to non-sequential, cancelling turn");return}this.isProcessing=!0;try{w("AI_DECISIONS",`🤖 AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let r;if(t.turnPhase==="deployment")r=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")r=await this.executeActionTurn(t);else{console.warn(`⚠️ AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}if(r?.needsInterceptionDecision){w("AI_DECISIONS","🛡️ AIPhaseProcessor: AI attack needs human interception decision, pausing turn loop"),this.isProcessing=!1;return}const i=this.gameStateManager.getState();i.currentPlayer==="player2"&&i.passInfo&&!i.passInfo.player2Passed&&(w("AI_DECISIONS","🔄 AIPhaseProcessor: AI continues taking turns (either human passed or goAgain card played)"),setTimeout(()=>{this.checkForAITurn(i)},100))}catch(r){console.error("❌ AIPhaseProcessor: Error executing turn:",r)}finally{this.isProcessing=!1}}async makeInterceptionDecision(t,n){if(!this.isInitialized)throw new Error("AIPhaseProcessor not initialized");w("AI_DECISIONS","🤖 AIPhaseProcessor.makeInterceptionDecision called:",{interceptorCount:t?.length||0,target:n.target?.name});const{aiBrain:r}=await qr(async()=>{const{aiBrain:s}=await import("./aiLogic-Di4nwXSp.js");return{aiBrain:s}},[]),i=r.makeInterceptionDecision(t,n.target);return w("AI_DECISIONS","🤖 AI interception decision:",{willIntercept:!!i.interceptor,interceptorName:i.interceptor?.name}),i}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,interception:!0,version:"1.3.0"}}}const oa=new Kj;class di{static instance=null;static getInstance(t){return di.instance||(di.instance=new di(t)),di.instance}static reset(){di.instance=null,w("STATE_SYNC","⚙️ ActionProcessor singleton reset")}constructor(t){if(di.instance)return console.warn("⚠️ ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),di.instance;this.gameStateManager=t,this.gameDataService=un.getInstance(t),this.animationManager=null,this.pendingActionAnimations=[],this.pendingSystemAnimations=[],this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1},w("STATE_SYNC","⚙️ ActionProcessor initialized")}setP2PManager(t){this.p2pManager=t}setAnimationManager(t){this.animationManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1,this.actionQueue.length>0&&this.processQueue()}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const p=`${u}Passed`;if(s.passInfo[p])throw w("PASS_LOGIC",`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return w("STATE_SYNC","🛡️ Processing allocateShield action"),{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return w("STATE_SYNC","🔄 Processing resetShieldAllocation action"),{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return w("COMMITMENTS","🏁 Processing endShieldAllocation action"),await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"move":return await this.processMove(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"movementCompletion":return await this.processMovementCompletion(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeDeploymentComplete":return await this.acknowledgeDeploymentComplete(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);case"destroyDrone":return await this.processDestroyDrone(r);case"addShield":return await this.processAddShield(r);case"resetShields":return await this.processResetShields(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{i||this.broadcastStateToGuest(),this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections};let s={...n};if(n.interceptor===void 0){const g=Be.calculateAiInterception(n,{player1:r.player1,player2:r.player2},i);if(g.hasInterceptors){const y=n.attackingPlayer==="player1"?"player2":"player1";if(this.gameStateManager.setState({interceptionPending:{attackDetails:n,defendingPlayerId:y,attackingPlayerId:n.attackingPlayer,interceptors:g.interceptors,timestamp:Date.now()}}),y==="player2"&&r.gameMode==="local"){if(w("COMBAT","🛡️ [INTERCEPTION] AI defender has interceptors"),await new Promise(b=>setTimeout(b,1e3)),this.aiPhaseProcessor){const b=await this.aiPhaseProcessor.makeInterceptionDecision(g.interceptors,n);w("COMBAT","🛡️ [INTERCEPTION] AI decision:",b.interceptor?"INTERCEPT":"DECLINE"),b.interceptor&&(s.interceptor=b.interceptor,this.gameStateManager.setState({lastInterception:{interceptor:b.interceptor,originalTarget:n.target,timestamp:Date.now()}}))}this.gameStateManager.setState({interceptionPending:null})}else return w("COMBAT","🛡️ [INTERCEPTION] Human defender has interceptors"),{needsInterceptionDecision:!0,interceptionData:{interceptors:g.interceptors,attackDetails:g.attackDetails}}}}const l=g=>{this.gameStateManager.addLogEntry(g,"resolveAttack",s.attackingPlayer==="player2"?s.aiContext:null)},u=()=>{},p=()=>{},d=Be.resolveAttack(s,{player1:r.player1,player2:r.player2},i,l,u,p),h=(d.animationEvents||[]).map(g=>({animationName:g.type,payload:{...g,droneId:g.sourceId}}));return w("COMBAT","[ANIMATION EVENTS] ActionProcessor received:",d.animationEvents),w("COMBAT","[ANIMATION EVENTS] Mapped to animations:",h),w("COMBAT","🎬 [AI ANIMATION DEBUG] Built animations array:",{count:h.length,animations:h.map(g=>({name:g.animationName,sourceId:g.payload.sourceId,targetId:g.payload.targetId})),hasAnimationManager:!!this.animationManager}),w("COMBAT","🎬 [AI ANIMATION DEBUG] Calling executeAndCaptureAnimations()"),await this.executeAndCaptureAnimations(h),w("COMBAT","🎬 [AI ANIMATION DEBUG] executeAndCaptureAnimations() completed"),this.gameStateManager.setPlayerStates(d.newPlayerStates.player1,d.newPlayerStates.player2),r.interceptionPending&&(w("COMBAT","🛡️ [INTERCEPTION] Clearing interceptionPending after attack completed"),this.gameStateManager.setState({interceptionPending:null})),this.checkWinCondition(),d.attackResult&&d.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),d}async processMove(t){const{droneId:n,fromLane:r,toLane:i,playerId:s}=t,u=this.gameStateManager.getState()[s];if(!u)throw new Error(`Player ${s} not found`);const p=u.dronesOnBoard[r].findIndex(g=>g.id===n);if(p===-1)throw new Error(`Drone ${n} not found in ${r}`);const d=u.dronesOnBoard[r][p],h={...u.dronesOnBoard,[r]:u.dronesOnBoard[r].filter(g=>g.id!==n),[i]:[...u.dronesOnBoard[i],{...d,isExhausted:!0}]};return this.gameStateManager.updatePlayerState(s,{dronesOnBoard:h}),this.gameStateManager.addLogEntry({player:u.name,actionType:"MOVE",source:d.name,target:i.replace("lane","Lane "),outcome:`Moved from ${r.replace("lane","Lane ")} to ${i.replace("lane","Lane ")}.`}),w("COMBAT",`✅ Moved ${d.name} from ${r} to ${i}`),await this.processTurnTransition({newPlayer:s==="player1"?"player2":"player1"}),{success:!0,message:`${d.name} moved from ${r} to ${i}`,drone:d,fromLane:r,toLane:i}}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let p=null,d=null;if(Object.values(l).forEach(E=>{Object.values(E.dronesOnBoard).forEach(C=>{C.forEach(T=>{T.id===n&&(p=T),T.id===i&&(d=T)})})}),i&&typeof i=="string"&&i.startsWith("lane")&&!d&&(d={id:i}),!p||!p.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const h=p.abilities[r],g=E=>{this.gameStateManager.addLogEntry(E,"resolveAbility")},y=async E=>await this.processAttack({attackDetails:E}),b=Be.resolveAbility(h,p,d,l,u,g,y),S=(b.animationEvents||[]).map(E=>({animationName:E.type,payload:{...E,droneId:E.sourceId}}));if(await this.executeAndCaptureAnimations(S),this.gameStateManager.setPlayerStates(b.newPlayerStates.player1,b.newPlayerStates.player2),this.checkWinCondition(),b.shouldEndTurn){const E=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:E.currentPlayer==="player1"?"player2":"player1"})}return b}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t,l=this.gameStateManager.getState(),u=l[i],d=l[i==="player1"?"player2":"player1"],h={player1:l.placedSections,player2:l.opponentPlacedSections},g=b=>{this.gameStateManager.addLogEntry(b)},y=Be.executeDeployment(n,r,s||l.turn,u,d,h,g,i);if(y.success){const b=y.deployedDrone?.id||n.id,S=(y.animationEvents||[]).map(N=>({animationName:N.type,payload:{...N,droneId:N.targetId}})),E={...y.newPlayerState,dronesOnBoard:{...y.newPlayerState.dronesOnBoard,[r]:y.newPlayerState.dronesOnBoard[r].map(N=>N.id===b?{...N,isTeleporting:!0}:N)}};i==="player1"?this.gameStateManager.updatePlayers(E,{}):this.gameStateManager.updatePlayers({},E),await new Promise(N=>setTimeout(N,50));const C=this.executeAndCaptureAnimations(S),T=this.animationManager?.animations?.TELEPORT_IN||{duration:600,config:{revealAt:.7}},O=T.duration*(T.config?.revealAt||.7);setTimeout(()=>{i==="player1"?this.gameStateManager.updatePlayers(y.newPlayerState,{}):this.gameStateManager.updatePlayers({},y.newPlayerState)},O),await C,await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})}return y}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let p=null;if(r){for(const y of["player1","player2"]){for(const b of["lane1","lane2","lane3"]){const E=(l[y].dronesOnBoard[b]||[]).find(C=>C.id===r);if(E){p={...E,owner:y};break}}if(p)break}if(!p)for(const y of["player1","player2"]){const b=l[y].shipSections;for(const S in b)if(b[S].id===r){p={...b[S],name:S,owner:y};break}if(p)break}!p&&r&&r.startsWith("lane")&&(p={id:r})}const d={logCallback:y=>this.gameStateManager.addLogEntry(y),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async y=>await this.processAttack(y)},h=Be.resolveCardPlay(n,p,i,l,u,d);w("CARDS","[ANIMATION EVENTS] Card play events:",h.animationEvents);const g=(h.animationEvents||[]).map(y=>({animationName:y.type,payload:{...y,droneId:y.sourceId}}));if(await this.executeAndCaptureAnimations(g),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),this.checkWinCondition(),h.shouldEndTurn){const y=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:y.currentPlayer==="player1"?"player2":"player1"})}return h}async processMovementCompletion(t){const{card:n,movementType:r,drones:i,fromLane:s,toLane:l,playerId:u}=t,p=this.gameStateManager.getState(),d={player1:p.player1,player2:p.player2},h={player1:p.placedSections,player2:p.opponentPlacedSections},g={logCallback:b=>this.gameStateManager.addLogEntry(b),applyOnMoveEffectsCallback:Be.applyOnMoveEffects,updateAurasCallback:Be.updateAuras};let y;if(r==="single_move"){y=Be.resolveSingleMove(n,i[0],s,l,d[u],d[u==="player1"?"player2":"player1"],h,g);const b={...d,[u]:y.newPlayerState};this.gameStateManager.setPlayerStates(b.player1,b.player2)}else{y=Be.resolveMultiMove(n,i,s,l,d[u],d[u==="player1"?"player2":"player1"],h,g);const b={...d,[u]:y.newPlayerState};this.gameStateManager.setPlayerStates(b.player1,b.player2)}if(y.shouldEndTurn){const b=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:b.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:y.shouldEndTurn}}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},p={player1:l.placedSections,player2:l.opponentPlacedSections},d={logCallback:y=>this.gameStateManager.addLogEntry(y),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async y=>await this.processAttack(y)},h=Be.resolveShipAbility(n,r,i,u,p,d,s),g=(h.animationEvents||[]).map(y=>({animationName:y.type,payload:{...y,droneId:y.sourceId}}));if(await this.executeAndCaptureAnimations(g),this.gameStateManager.setPlayerStates(h.newPlayerStates.player1,h.newPlayerStates.player2),h.shouldEndTurn){const y=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:y.currentPlayer==="player1"?"player2":"player1"})}return h}checkWinCondition(){const t=this.gameStateManager.getState();if(t.winner)return null;const n={player1:t.player1,player2:t.player2},r={logCallback:s=>{this.gameStateManager.addLogEntry(s,"checkWinCondition")},setWinnerCallback:s=>{this.gameStateManager.setWinner(s)},showWinnerModalCallback:()=>{}};return Be.checkGameStateForWinner(n,r)}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;w("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();w("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=Be.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(w("PHASE_TRANSITIONS",`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let p=r;u.passInfo&&u.passInfo[`${r}Passed`]?(p=u.currentPlayer,w("PHASE_TRANSITIONS",`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${p}`)):w("PHASE_TRANSITIONS",`[TURN TRANSITION DEBUG] Setting new player: ${p}`),this.gameStateManager.setCurrentPlayer(p)}const l=this.gameStateManager.getState();return w("PHASE_TRANSITIONS","[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return w("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};w("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),w("PHASE_TRANSITIONS",`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(["deployment","action"].includes(n)&&(s.currentPlayer=i.firstPlayerOfRound,w("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Sequential phase: Setting currentPlayer to firstPlayerOfRound: ${i.firstPlayerOfRound}`)),n==="allocateShields"){const d=this.gameStateManager.getLocalPlayerId(),h=i[d],y=this.gameDataService.getEffectiveShipStats(h,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=y,w("PHASE_TRANSITIONS",`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${y}`)}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null),w("PHASE_TRANSITIONS","[PLACEMENT DEBUG] Initialized placement phase"));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(n),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1});const u={determineFirstPlayer:"DETERMINING FIRST PLAYER",energyReset:"ENERGY RESET",mandatoryDiscard:"MANDATORY DISCARD PHASE",optionalDiscard:"OPTIONAL DISCARD PHASE",draw:"DRAW PHASE",allocateShields:"ALLOCATE SHIELDS",mandatoryDroneRemoval:"REMOVE EXCESS DRONES",deployment:"DEPLOYMENT PHASE",deploymentComplete:"DEPLOYMENT COMPLETE",action:"ACTION PHASE"};if(u[n]&&this.animationManager){w("PHASE_TRANSITIONS",`🎬 [PHASE ANNOUNCEMENT] Showing announcement for: ${n}`);const d={phaseText:u[n],phaseName:n,timestamp:Date.now()};(n==="deployment"||n==="action")&&(d.firstPlayerId=i.firstPlayerOfRound);const h={animationName:"PHASE_ANNOUNCEMENT",payload:d};await this.executeAndCaptureAnimations([h],!0),w("PHASE_TRANSITIONS",`🎬 [PHASE ANNOUNCEMENT] Announcement complete for: ${n}`)}w("PHASE_TRANSITIONS",`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase} → ${n}`);const p=this.gameStateManager.getState();return w("PHASE_TRANSITIONS",`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:p.turnPhase,placedSections:p.placedSections,opponentPlacedSections:p.opponentPlacedSections,stateUpdatesApplied:s}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;w("PHASE_TRANSITIONS",`[ROUND START DEBUG] Processing round start for turn: ${n}`);const s=this.gameStateManager.getState(),l=i||Be.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),p=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),d=Be.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),h=Be.calculateNewRoundPlayerState(s.player2,n,p,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,firstPasserOfPreviousRound:s.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(d,h),w("PHASE_TRANSITIONS",`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:d,player2:h}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);w("ENERGY","[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:s});const u=l[s];if(n==="remove"){const p=u.shipSections[r];if(!p||p.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const d={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},h={...u,shipSections:d};return this.gameStateManager.updatePlayerState(s,h),w("ENERGY",`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:h}}else if(n==="add"){const p=s==="player1"?l.placedSections:l.opponentPlacedSections,d=Be.getEffectiveSectionMaxShields(r,u,p),h=u.shipSections[r];if(!h||h.allocatedShields>=d)return{success:!1,error:"Cannot add shield to this section"};const g={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},y={...u,shipSections:g};return this.gameStateManager.updatePlayerState(s,y),w("ENERGY",`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:y}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const p={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,p),w("ENERGY","[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:p}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return w("COMBAT","🎬 [AI ANIMATION DEBUG] processAiAction attack case:",{attackerId:s.attacker?.id,targetId:s.target?.id,lane:s.attacker?.lane,targetType:s.targetType,hasAttackerObject:!!s.attacker,hasTargetObject:!!s.target}),await this.processAttack({attackDetails:{attacker:s.attacker,target:s.target,targetType:s.targetType||"drone",lane:s.attacker.lane,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":return await this.processMove({droneId:s.drone.id,fromLane:s.fromLane,toLane:s.toLane,playerId:"player2"});case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiDecision(t,n){switch(w("DEPLOYMENT",`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;w("DEPLOYMENT","[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return w("DEPLOYMENT","[AI DECISION DEBUG] Deployment result:",s),s.success?(w("DEPLOYMENT","[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),w("DEPLOYMENT","[AI DECISION DEBUG] Turn transition complete")):w("DEPLOYMENT","[AI DECISION DEBUG] Deployment failed, not transitioning turn"),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attacker:l.attacker,target:l.target,targetType:l.targetType||"drone",lane:l.lane,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove({droneId:l.drone.id,fromLane:l.fromLane,toLane:l.toLane,playerId:n});break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u;case"pass":w("PASS_LOGIC","[AI DECISION DEBUG] AI passing");const p=this.gameStateManager.getState(),d=!p.passInfo[n==="player1"?"player2Passed":"player1Passed"];w("PASS_LOGIC","[AI DECISION DEBUG] Pass info before update:",p.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:p.passInfo.firstPasser||(d?n:null)});const h=this.gameStateManager.get("passInfo");return w("PASS_LOGIC","[AI DECISION DEBUG] Pass info after update:",h),h.player1Passed&&h.player2Passed?(w("PASS_LOGIC","[AI DECISION DEBUG] Both players passed, transitioning phase"),p.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):p.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(w("PASS_LOGIC","[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;w("STATE_SYNC","[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processGuestAction(t){if(this.gameStateManager.get("gameMode")!=="host"){console.warn("⚠️ processGuestAction should only be called by host");return}w("STATE_SYNC","[HOST] Processing guest action:",t);const r=await this.queueAction({type:t.type,payload:t.payload,isNetworkAction:!0});return this.broadcastStateToGuest(),r}async executeAndCaptureAnimations(t,n=!1){if(!t||t.length===0)return;const r=this.gameStateManager.get("gameMode");if(r==="host"&&(n?this.pendingSystemAnimations.push(...t):this.pendingActionAnimations.push(...t)),this.animationManager){const i=r==="guest"?"GUEST_OPTIMISTIC":r==="host"?"HOST_LOCAL":"LOCAL";await this.animationManager.executeAnimations(t,i)}}getAndClearPendingActionAnimations(){const t=[...this.pendingActionAnimations];return this.pendingActionAnimations=[],t}getAndClearPendingSystemAnimations(){const t=[...this.pendingSystemAnimations];return this.pendingSystemAnimations=[],t}broadcastStateToGuest(){if(this.gameStateManager.get("gameMode")==="host"&&this.p2pManager&&this.p2pManager.isConnected){const n=this.gameStateManager.getState(),r=this.getAndClearPendingActionAnimations(),i=this.getAndClearPendingSystemAnimations();w("STATE_SYNC","📡 [ANIMATION BROADCAST] Sending state with animations:",{actionAnimationCount:r.length,systemAnimationCount:i.length,actionAnimations:r.map(s=>s.animationName),systemAnimations:i.map(s=>s.animationName)}),this.p2pManager.broadcastState(n,r,i)}}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;w("PASS_LOGIC","[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:s}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=[{animationName:"PASS_NOTIFICATION",payload:{passingPlayerId:n}}];await this.executeAndCaptureAnimations(u);const p=`${l}Passed`,d=`${n}Passed`,h=!s[p],g={...s,[d]:!0,firstPasser:s.firstPasser||(h?n:null)};if(w("PASS_LOGIC","[PLAYER PASS DEBUG] Updating pass info:",g),this.gameStateManager.setPassInfo(g,"ActionProcessor"),g.player1Passed&&g.player2Passed)w("PASS_LOGIC","[PLAYER PASS DEBUG] Both players passed - GameFlowManager will handle phase transition");else{let b=null;n==="player1"&&!g.player2Passed?b="player2":n==="player2"&&!g.player1Passed&&(b="player1"),b&&(w("PASS_LOGIC",`[PLAYER PASS DEBUG] Switching turn to ${b} (opponent hasn't passed)`),this.gameStateManager.setState({currentPlayer:b},"TURN_SWITCH","playerPass"))}return{success:!0,newPassInfo:g}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;w("STATE_SYNC","[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error("🔥 CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error("🔥 CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r,isMandatory:i=!1}=t,s=this.gameStateManager.getState();if(w("CARDS",`[OPTIONAL DISCARD DEBUG] Processing ${i?"mandatory":"optional"} discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const l=s[n];if(!l)throw new Error(`Player ${n} not found`);r.forEach(d=>{this.gameStateManager.addLogEntry({player:l.name,actionType:i?"DISCARD_MANDATORY":"DISCARD_OPTIONAL",source:d.name,target:"N/A",outcome:`Discarded ${d.name}.`})});const u=l.hand.filter(d=>!r.some(h=>d.instanceId===h.instanceId)),p=[...l.discardPile,...r];return this.gameStateManager.updatePlayerState(n,{hand:u,discardPile:p}),w("CARDS",`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){w("PHASE_TRANSITIONS","🎯 ActionProcessor: Processing first player determination");const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await qr(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-BBFMbYGn.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),w("PHASE_TRANSITIONS",`✅ First player determination complete: ${i}`),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeDeploymentComplete(t){return w("COMMITMENTS",`🎯 ActionProcessor: Processing deployment complete acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?(n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}),w("COMMITMENTS",`🔄 Cleared commitments for phase: ${t}`)):(n.commitments={},w("COMMITMENTS","🔄 Cleared all phase commitments")),this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;if(w("COMMITMENTS",`🤝 ActionProcessor: Processing ${r} commitment for ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processCommitment - should send to host instead"),{success:!1,error:"Guest cannot process commitments locally"};const l=this.gameStateManager.getState();l.commitments[r]||(l.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),l.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:l.commitments},"COMMITMENT_UPDATE");let u=l.commitments[r].player1.completed&&l.commitments[r].player2.completed;if(w("COMMITMENTS",`✅ ${n} ${r} committed, both complete: ${u}`),n==="player1"&&l.gameMode==="local"&&!u&&(w("COMMITMENTS","🤖 Single-player mode: Auto-completing AI commitment immediately"),oa))try{await this.handleAICommitment(r,l),w("COMMITMENTS","✅ AI commitment completed successfully");const p=this.gameStateManager.getState();u=p.commitments[r].player1.completed&&p.commitments[r].player2.completed,w("COMMITMENTS",`🔄 Recalculated bothComplete after AI commit: ${u}`)}catch(p){throw console.error("❌ AI commitment error:",p),p}return{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:u}}}async handleAICommitment(t,n){try{w("COMMITMENTS",`🤖 Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await oa.processDroneSelection(),await this.processCommitment({playerId:"player2",phase:"droneSelection",actionData:{drones:r}});break;case"deckSelection":r=await oa.processDeckSelection(),await this.processCommitment({playerId:"player2",phase:"deckSelection",actionData:{deck:r.deck,drones:r.drones,shipComponents:r.shipComponents}});break;case"placement":r=await oa.processPlacement(),await this.processCommitment({playerId:"player2",phase:"placement",actionData:{placedSections:r}});break;case"mandatoryDiscard":r=await oa.executeMandatoryDiscardTurn(n),await this.processCommitment({playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}});break;case"optionalDiscard":r=await oa.executeOptionalDiscardTurn(n),await this.processCommitment({playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}});break;case"allocateShields":await oa.executeShieldAllocationTurn(n),await this.processCommitment({playerId:"player2",phase:"allocateShields",actionData:{committed:!0}});break;case"mandatoryDroneRemoval":r=await oa.executeMandatoryDroneRemovalTurn(n),await this.processCommitment({playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}});break;case"determineFirstPlayer":await new Promise(i=>{setTimeout(async()=>{await this.processCommitment({playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}),i()},1e3)});break;case"deploymentComplete":w("COMMITMENTS","🤖 AI will acknowledge deployment complete after 3 second delay (for testing)"),await new Promise(i=>{setTimeout(async()=>{await this.processCommitment({playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}),w("COMMITMENTS","🤖 AI acknowledged deployment complete"),i()},3e3)});break;default:console.warn(`⚠️ No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(`⚠️ No commitments found for phase: ${t}`),{};w("COMMITMENTS",`📋 ActionProcessor: Applying ${t} commitments to game state`,r);const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),w("COMMITMENTS","✅ Applied drone selections to player states");break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,deckDronePool:r.player1.drones||[],selectedShipComponents:r.player1.shipComponents||{},discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,deckDronePool:r.player2.drones||[],selectedShipComponents:r.player2.shipComponents||{},discard:[]}),w("COMMITMENTS","✅ Applied deck selections (cards + drones + ship components) to player states");break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),w("COMMITMENTS","✅ Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":w("COMMITMENTS","✅ First player determination (handled separately)");break;case"mandatoryDiscard":case"optionalDiscard":w("COMMITMENTS","✅ Discard commitments (handled via card actions)");break;case"allocateShields":w("COMMITMENTS","✅ Shield allocation (handled separately)");break;case"deploymentComplete":w("COMMITMENTS","✅ Deployment complete acknowledgments (no state changes)");break;case"determineFirstPlayer":w("COMMITMENTS","✅ First player determination (handled by GameFlowManager)");break;default:console.warn(`⚠️ No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return w("CARDS","🃏 ActionProcessor: Processing automatic draw"),this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}=t;return w("ENERGY","⚡ ActionProcessor: Processing energy reset"),this.gameStateManager.setPlayerStates(n,r),i!==void 0&&this.gameStateManager.setState({shieldsToAllocate:i}),s!==void 0&&this.gameStateManager.setState({opponentShieldsToAllocate:s}),w("ENERGY",`✅ Energy reset complete - Shields to allocate: ${i||0}, ${s||0}`),{success:!0,message:"Energy reset completed",player1:n,player2:r,shieldsToAllocate:i,opponentShieldsToAllocate:s}}async processDestroyDrone(t){const{droneId:n,playerId:r}=t;if(w("COMBAT",`💥 ActionProcessor: Processing drone destruction for ${r}, drone ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processDestroyDrone - should send to host instead"),{success:!1,error:"Guest cannot destroy drones locally"};const s=this.gameStateManager.getState(),l=s[r];if(!l)return{success:!1,error:`Player ${r} not found`};const u=Be.getLaneOfDrone(n,l);if(!u)return{success:!1,error:`Drone ${n} not found on board`};const p=l.dronesOnBoard[u].find(S=>S.id===n);if(!p)return{success:!1,error:`Drone ${n} not found in lane ${u}`};let d={...l,dronesOnBoard:{...l.dronesOnBoard}};d.dronesOnBoard[u]=d.dronesOnBoard[u].filter(S=>S.id!==n);const h=Be.onDroneDestroyed(d,p);Object.assign(d,h);const y=s[r==="player1"?"player2":"player1"],b={player1:s.placedSections,player2:s.opponentPlacedSections};return d.dronesOnBoard=Be.updateAuras(d,y,b),this.gameStateManager.updatePlayerState(r,d),w("COMBAT",`✅ Drone ${n} destroyed successfully from ${u}`),{success:!0,message:`Drone destroyed from ${u}`,droneId:n,lane:u,droneName:p.name}}async processAddShield(t){const{sectionName:n,playerId:r}=t;if(w("ENERGY",`🛡️ ActionProcessor: Processing shield addition for ${r}, section ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processAddShield - should send to host instead"),{success:!1,error:"Guest cannot add shields locally"};const s=this.gameStateManager.getState(),l=r==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate",u=Be.processShieldAllocation({...s,shieldsToAllocate:s[l]},r,n);return u.success?(this.gameStateManager.updatePlayerState(r,u.newPlayerState),this.gameStateManager.setState({[l]:u.newShieldsToAllocate}),w("ENERGY",`✅ Shield added to ${n}, ${u.newShieldsToAllocate} shields remaining`),{success:!0,message:`Shield added to ${n}`,sectionName:n,shieldsRemaining:u.newShieldsToAllocate}):(console.warn(`⚠️ Shield allocation failed: ${u.error}`),u)}async processResetShields(t){const{playerId:n}=t;if(w("ENERGY",`🔄 ActionProcessor: Processing shield allocation reset for ${n}`),this.gameStateManager.get("gameMode")==="guest")return console.warn("⚠️ Guest attempted processResetShields - should send to host instead"),{success:!1,error:"Guest cannot reset shields locally"};const i=this.gameStateManager.getState(),s=Be.processResetShieldAllocation(i,n);if(!s.success)return console.warn(`⚠️ Shield reset failed: ${s.error}`),s;this.gameStateManager.updatePlayerState(n,s.newPlayerState);const l=n==="player1"?"shieldsToAllocate":"opponentShieldsToAllocate";return this.gameStateManager.setState({[l]:s.newShieldsToAllocate}),w("ENERGY",`✅ Shield allocation reset, ${s.newShieldsToAllocate} shields available`),{success:!0,message:"Shield allocation reset",shieldsToAllocate:s.newShieldsToAllocate}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}class Wj{constructor(t){this.gameStateManager=t,this.messageQueue=[],this.isProcessing=!1,this.renderCompletePromise=null,this.renderCompleteResolve=null}initialize(t){w("MULTIPLAYER","🎯 [GUEST QUEUE] Initializing GuestMessageQueueService"),t.subscribe(n=>{n.type==="state_update_received"&&(w("MULTIPLAYER","📥 [GUEST QUEUE] Received state update, queuing for processing"),this.enqueueMessage(n))}),this.gameStateManager.subscribe(n=>{n.type==="render_complete"&&(w("STATE_SYNC","✅ [GUEST QUEUE] Render complete received"),this.renderCompleteResolve&&(this.renderCompleteResolve(),this.renderCompleteResolve=null,this.renderCompletePromise=null))})}enqueueMessage(t){w("MULTIPLAYER","📝 [GUEST QUEUE] Enqueuing message:",{type:t.type,queueLength:this.messageQueue.length+1}),this.messageQueue.push(t),this.processQueue()}async processQueue(){if(this.isProcessing){w("MULTIPLAYER","⏸️ [GUEST QUEUE] Already processing, queue length:",this.messageQueue.length);return}for(this.isProcessing=!0,w("MULTIPLAYER","▶️ [GUEST QUEUE] Starting queue processing");this.messageQueue.length>0;){const t=this.messageQueue.shift();w("MULTIPLAYER","🔄 [GUEST QUEUE] Processing message:",{type:t.type,remaining:this.messageQueue.length}),await this.processMessage(t)}this.isProcessing=!1,w("MULTIPLAYER","⏹️ [GUEST QUEUE] Queue processing complete")}async processMessage(t){switch(t.type){case"state_update_received":await this.processStateUpdate(t.data);break;default:console.warn("⚠️ [GUEST QUEUE] Unknown message type:",t.type)}}async processStateUpdate({state:t,actionAnimations:n,systemAnimations:r}){w("STATE_SYNC","📊 [GUEST QUEUE] Processing state update:",{turnPhase:t?.turnPhase,hasActionAnimations:n?.length>0,hasSystemAnimations:r?.length>0,actionAnimationCount:n?.length||0,systemAnimationCount:r?.length||0});const i=this.gameStateManager.hasRecentOptimisticActions(),s=this.gameStateManager.optimisticActions?.length||0;let l=n||[];i&&n&&n.length>0&&(w("ANIMATIONS","⏭️ [GUEST QUEUE] SKIPPING action animations - already played optimistically"),l=[]);const u=r||[],p=[...l,...u];w("ANIMATIONS","🔍 [GUEST QUEUE] Animation filtering decision:",{hasOptimisticActions:i,optimisticActionsCount:s,incomingActionCount:n?.length||0,incomingSystemCount:r?.length||0,skippedActionCount:(n?.length||0)-l.length,systemAnimationsKept:u.length,totalToPlay:p.length,reasoning:i?"Filtered action animations (optimistic), kept system animations":"Playing all animations (no optimistic actions)"});const d=p.length>0;let h=null;d&&(w("STATE_SYNC","🔧 [GUEST QUEUE] Setting up render listener for animations..."),h=this.waitForRender()),w("STATE_SYNC","📝 [GUEST QUEUE] Applying state..."),this.gameStateManager.applyHostState(t),d&&h?(w("STATE_SYNC","⏳ [GUEST QUEUE] Waiting for React render before animations..."),await h,w("STATE_SYNC","✅ [GUEST QUEUE] React render complete"),this.gameStateManager.actionProcessor?.animationManager&&(w("ANIMATIONS","🎬 [GUEST QUEUE] Executing animations from HOST response..."),await this.gameStateManager.actionProcessor.animationManager.executeAnimations(p,"HOST_RESPONSE"),w("ANIMATIONS","✅ [GUEST QUEUE] Host response animations complete"))):w("STATE_SYNC","⚡ [GUEST QUEUE] No animations - state applied immediately without render wait"),w("STATE_SYNC","✅ [GUEST QUEUE] State update processing complete")}async waitForRender(){return this.renderCompletePromise?this.renderCompletePromise:(this.renderCompletePromise=new Promise(t=>{this.renderCompleteResolve=t}),this.renderCompletePromise)}getStatus(){return{queueLength:this.messageQueue.length,isProcessing:this.isProcessing,waitingForRender:!!this.renderCompletePromise}}}const wA=(e,t=3)=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const n=[...e].sort(()=>.5-Math.random()),r=n.slice(0,t),i=n.slice(t);return w("DRONE_SELECTION",`🎲 Initialized drone selection: ${r.length} in initial selection, ${i.length} in pool`),w("DRONE_SELECTION",`🎯 Initial selection: ${r.map(s=>s.name).join(", ")}`),{droneSelectionTrio:r,droneSelectionPool:i}},Xj=(e,t=3)=>{if(!e||e.length===0)return console.warn("⚠️ No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return w("DRONE_SELECTION",`🔄 Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),w("DRONE_SELECTION",`📦 Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class Qj{constructor(){w("STATE_SYNC","🔄 GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.optimisticActions=[],this.optimisticActionTimeout=5e3,this.state={appState:"menu",isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=di.getInstance(this),this.gameFlowManager=null,this.guestQueueService=null,this.p2pIntegrationSetup=!1,w("STATE_SYNC","🔄 GAMESTATE INITIALIZATION: GameStateManager created"),w("STATE_SYNC","📱 App State:",this.state.appState),w("STATE_SYNC","🎮 Game Active:",this.state.gameActive),w("STATE_SYNC","✅ GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost),n.data.mode==="guest"&&!this.guestQueueService&&(w("STATE_SYNC","🎯 [GUEST QUEUE] Initializing service for guest mode"),this.guestQueueService=new Wj(this),this.guestQueueService.initialize(t));break;case"state_update_received":this.state.gameMode==="guest"&&(this.guestQueueService||(console.warn("⚠️ [GUEST QUEUE] Service not initialized, applying state directly (fallback)"),this.applyHostState(n.data.state)));break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}applyHostState(t){if(this.state.gameMode!=="guest"){console.warn("⚠️ applyHostState should only be called in guest mode");return}w("STATE_SYNC","[GUEST STATE UPDATE] Applying state from host:",{turnPhase:t.turnPhase,currentPlayer:t.currentPlayer,roundNumber:t.roundNumber}),w("STATE_SYNC","[GUEST] Received player2 hand from host:",{handSize:t.player2?.hand?.length||0,sampleCard:t.player2?.hand?.[0]||null,sampleInstanceId:t.player2?.hand?.[0]?.instanceId,hasInstanceId:t.player2?.hand?.[0]?.instanceId!==void 0});const n=this.state.gameMode;this.state={...t},this.state.gameMode=n,w("STATE_SYNC","[GUEST] After applying state - player2 hand check:",{handSize:this.state.player2?.hand?.length||0,sampleCard:this.state.player2?.hand?.[0]||null,sampleInstanceId:this.state.player2?.hand?.[0]?.instanceId,hasInstanceId:this.state.player2?.hand?.[0]?.instanceId!==void 0}),this.emit("HOST_STATE_UPDATE",{hostState:t})}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),p=l.some(E=>E.includes("App.jsx")),d=l.some(E=>E.includes("ActionProcessor")),h=l.some(E=>E.includes("PhaseManager")),g=d||h;p&&!g&&(console.error("🚨 ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error("📋 App.jsx should only call ActionProcessor or PhaseManager methods"),console.error("🔍 Stack trace:",s));const y=Object.keys(t),b=`${u.primaryCaller} in ${u.primaryFile}`;w("STATE_SYNC",`🔍 GAMESTATE CHANGE [${n}] from ${b}:`,{changedKeys:y,allUpdates:t,architectureViolation:p&&!g});const S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,b,n),y.forEach(E=>{if(!["player1","player2"].includes(E)){const C=i[E],T=t[E];JSON.stringify(C)!==JSON.stringify(T)&&w("STATE_SYNC",`🔍 STATE CHANGE: ${E}`,{before:C,after:T,caller:b,eventType:n})}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(g=>g in t),p=i&&i.includes("GameFlowManager"),d=r==="phaseTransition"||t.turnPhase&&p;u&&!(d&&p)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:p,isPhaseTransition:d,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(p=>{i.has(p.id)&&console.error(`Duplicate drone ID detected: ${p.id} in player${l+1}`),i.add(p.id)})})})}validateTurnPhaseTransition(t,n){({null:["deckSelection","preGame"],preGame:["deckSelection","droneSelection"],deckSelection:["droneSelection"],droneSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["action","deploymentComplete","roundEnd"],deploymentComplete:["action"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(w("STATE_SYNC","🔍 Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){w("STATE_SYNC","✅ Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],p=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],d=Object.keys(t).filter(T=>u.includes(T)),h=Object.keys(t).filter(T=>p.includes(T)),g=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const y=d.every(T=>["player1","player2"].includes(T)),b=d.every(T=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(T));if(g&&(y||b))return;const S=i&&i.includes("SequentialPhaseManager"),E=["deployment","action"].includes(n.turnPhase),C=d.length===1&&d[0]==="passInfo";if(!(S&&E&&C)){if(d.length>0&&!r){const T=i?.split(`
`)||[],O=T.find(N=>N.includes(".jsx")&&!N.includes("GameStateManager"))||T[2]||"Unknown";console.warn("⚠️ ActionProcessor bypass detected: Critical game state updated directly",{updates:d,turnPhase:n.turnPhase,caller:O.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug("🐛 ActionProcessor bypass debug info:",{stackTrace:T.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}h.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];w("STATE_SYNC",`🚨 PLAYER STATE CHANGE [${s}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(d=>{const h=l?l[d]:void 0,g=u?u[d]:void 0;if(JSON.stringify(h)!==JSON.stringify(g))if(d==="energy"||d==="deploymentBudget"||d==="initialDeploymentBudget")w("STATE_SYNC",`  💰 ${d}: ${h} → ${g}`),(g==null||isNaN(g))&&console.error(`  🚨 WARNING: ${d} became ${g}!`);else if(d==="activeDronePool"){const y=Array.isArray(h)?h.length:"undefined",b=Array.isArray(g)?g.length:"undefined";let S,E;if(Array.isArray(h))try{S=h.map(C=>C?.name||"UNNAMED").join(",")}catch(C){S=`ERROR_MAPPING_OLD: ${C.message}`}else S="undefined";if(Array.isArray(g))try{E=g.map(C=>C?.name||"UNNAMED").join(",")}catch(C){E=`ERROR_MAPPING_NEW: ${C.message}`}else E="undefined";if(w("STATE_SYNC",`  🤖 ${d}: [${y} drones] → [${b} drones]`),w("STATE_SYNC",`    Old drones: ${S}`),w("STATE_SYNC",`    New drones: ${E}`),(E.includes("ERROR")||E==="undefined")&&(w("STATE_SYNC","    🔍 Debug newValue:",g),Array.isArray(g)&&g.length>0&&w("STATE_SYNC","    🔍 First drone object:",g[0])),y!==b||S!==E){const C=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";w("STATE_SYNC",`    📍 Update source:
${C}`)}}else if(d==="hand"||d==="deck"){const y=Array.isArray(h)?h.length:"undefined",b=Array.isArray(g)?g.length:"undefined";w("STATE_SYNC",`  🃏 ${d}: [${y} cards] → [${b} cards]`)}else if(d==="dronesOnBoard"){const y=h?`L1:${h.lane1?.length||0} L2:${h.lane2?.length||0} L3:${h.lane3?.length||0}`:"undefined",b=g?`L1:${g.lane1?.length||0} L2:${g.lane2?.length||0} L3:${g.lane3?.length||0}`:"undefined";w("STATE_SYNC",`  🛸 ${d}: ${y} → ${b}`)}else w("STATE_SYNC",`  📝 ${d}:`,{before:h,after:g})}),w("STATE_SYNC",`🔍 Full ${s} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],p=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],d=l.functions.filter(g=>u.some(y=>g.toLowerCase().includes(y.toLowerCase()))),h=l.functions.filter(g=>p.some(y=>g.toLowerCase().includes(y.toLowerCase())));d.length>0&&h.length===0&&(console.warn("🚨 Inappropriate function updating game state:",{inappropriateFunctions:d,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI → ActionProcessor → gameLogic.js → GameStateManager"}),console.debug("🔍 Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:d,appropriateFound:h,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const p of r){const d=u[p];if(!d)continue;const h=Array.isArray(d)?d:[d];let g=!1;for(const y of h)(y==="GameFlowManager"&&i||y==="SequentialPhaseManager"&&s||y==="ActionProcessor"&&l)&&(g=!0);if(!g){const y=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(`🚨 OWNERSHIP VIOLATION: ${y} cannot update '${p}'`,{updateKey:p,currentManager:y,allowedOwners:h,updates:r,recommendation:`Only ${h.join(" or ")} should update '${p}'`})}}}reset(){w("STATE_SYNC","🔄 GAME RESET: Resetting game state and clearing caches");const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:Be.initialPlayerState("Player 1",fl),player2:Be.initialPlayerState("Player 2",fl),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET"),un.reset(),this.actionProcessor.clearQueue(),w("STATE_SYNC","✅ GAME RESET: State, cache, and queue cleared")}startGame(t="local",n={},r={}){w("STATE_SYNC","🎮 GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"deckSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...Be.initialPlayerState(n.name||"Player 1",n.decklist||fl),...n},player2:{...Be.initialPlayerState(r.name||"Player 2",r.decklist||fl),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{},droneSelectionPool:[],droneSelectionTrio:[]};this.setState(i,"GAME_STARTED"),w("STATE_SYNC","👤 Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),w("STATE_SYNC","👤 Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),w("STATE_SYNC","✅ GAME START: Game session initialized successfully")}endGame(){w("STATE_SYNC","🎮 GAME END: Ending current game session and clearing caches"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),un.reset(),this.actionProcessor.clearQueue(),w("STATE_SYNC","✅ GAME END: Returned to menu state, cache and queue cleared")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&w("STATE_SYNC","🔍 [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}trackOptimisticAction(t,n){const r={type:t,payload:n,timestamp:Date.now(),id:`${t}-${Date.now()}-${Math.random()}`};this.optimisticActions.push(r),w("STATE_SYNC","🔮 [OPTIMISTIC] Tracked action:",t,"Total tracked:",this.optimisticActions.length),setTimeout(()=>{this.optimisticActions=this.optimisticActions.filter(i=>i.id!==r.id),w("STATE_SYNC","🧹 [OPTIMISTIC] Cleared old action:",t,"Remaining:",this.optimisticActions.length)},this.optimisticActionTimeout)}hasRecentOptimisticActions(){return this.optimisticActions.length>0}clearOptimisticActions(){w("STATE_SYNC","🧹 [OPTIMISTIC] Clearing all actions"),this.optimisticActions=[]}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const He=new Qj;class Zj{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return Jj(t).buffer}}function Jj(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function vw(e){return new eI(e).unpack()}function bw(e){const t=new tI,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class eI{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class tI{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,p=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(p)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Zj,this._textEncoder=new TextEncoder}}let xw=!0,Sw=!0;function nu(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function fo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const p=d=>{const h=n(d);h&&(u.handleEvent?u.handleEvent(h):u(h))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,p),i.apply(this,[l,p])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const p=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,p])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function nI(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(xw=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function rI(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Sw=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Aw(){if(typeof window=="object"){if(xw)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function uv(e,t){Sw&&console.warn(e+" is deprecated, please use "+t+" instead.")}function aI(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(nu(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(nu(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(nu(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=nu(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function OA(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ew(e){return OA(e)?Object.keys(e).reduce(function(t,n){const r=OA(e[n]),i=r?Ew(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function a0(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?a0(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{a0(e,e.get(i),n)})}))}function NA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&a0(e,u,i)})}),i}const _A=Aw;function Cw(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const p={};return Object.keys(u).forEach(d=>{if(d==="require"||d==="advanced"||d==="mediaSource")return;const h=typeof u[d]=="object"?u[d]:{ideal:u[d]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const g=function(y,b){return y?y+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(h.ideal!==void 0){p.optional=p.optional||[];let y={};typeof h.ideal=="number"?(y[g("min",d)]=h.ideal,p.optional.push(y),y={},y[g("max",d)]=h.ideal,p.optional.push(y)):(y[g("",d)]=h.ideal,p.optional.push(y))}h.exact!==void 0&&typeof h.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[g("",d)]=h.exact):["min","max"].forEach(y=>{h[y]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[g(y,d)]=h[y])})}),u.advanced&&(p.optional=(p.optional||[]).concat(u.advanced)),p},i=function(u,p){if(t.version>=61)return p(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const d=function(h,g,y){g in h&&!(y in h)&&(h[y]=h[g],delete h[g])};u=JSON.parse(JSON.stringify(u)),d(u.audio,"autoGainControl","googAutoGainControl"),d(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let d=u.video.facingMode;d=d&&(typeof d=="object"?d:{ideal:d});const h=t.version<66;if(d&&(d.exact==="user"||d.exact==="environment"||d.ideal==="user"||d.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete u.video.facingMode;let g;if(d.exact==="environment"||d.ideal==="environment"?g=["back","rear"]:(d.exact==="user"||d.ideal==="user")&&(g=["front"]),g)return n.mediaDevices.enumerateDevices().then(y=>{y=y.filter(S=>S.kind==="videoinput");let b=y.find(S=>g.some(E=>S.label.toLowerCase().includes(E)));return!b&&y.length&&g.includes("back")&&(b=y[y.length-1]),b&&(u.video.deviceId=d.exact?{exact:b.deviceId}:{ideal:b.deviceId}),u.video=r(u.video),_A("chrome: "+JSON.stringify(u)),p(u)})}u.video=r(u.video)}return _A("chrome: "+JSON.stringify(u)),p(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,p,d){i(u,h=>{n.webkitGetUserMedia(h,p,g=>{d&&d(s(g))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(p){return i(p,d=>u(d).then(h=>{if(d.audio&&!h.getAudioTracks().length||d.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(s(h))))}}}function Tw(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Pw(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else fo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function ww(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,p){let d=i.apply(this,arguments);return d||(d=t(this,u),this._senders.push(d)),d};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const p=this._senders.indexOf(u);p!==-1&&this._senders.splice(p,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(p=>p.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Ow(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>NA(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),fo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>NA(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Nw(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(p)===-1&&this._shimmedLocalStreams[u.id].push(p):this._shimmedLocalStreams[u.id]=[u,p],p};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(d=>{if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const p=this.getSenders().filter(d=>u.indexOf(d)===-1);this._shimmedLocalStreams[l.id]=[l].concat(p)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const p=this._shimmedLocalStreams[u].indexOf(l);p!==-1&&this._shimmedLocalStreams[u].splice(p,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function _w(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Nw(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=n.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(g=>this._reverseStreams[g.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(g=>{if(this.getSenders().find(b=>b.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const g=new e.MediaStream(h.getTracks());this._streams[h.id]=g,this._reverseStreams[g.id]=h,h=g}r.apply(this,[h])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const y=[].slice.call(arguments,1);if(y.length!==1||!y[0].getTracks().find(E=>E===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(E=>E.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[g.id];if(S)S.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const E=new e.MediaStream([h]);this._streams[g.id]=E,this._reverseStreams[E.id]=g,this.addStream(E)}return this.getSenders().find(E=>E.track===h)};function s(d,h){let g=h.sdp;return Object.keys(d._reverseStreams||[]).forEach(y=>{const b=d._reverseStreams[y],S=d._streams[b.id];g=g.replace(new RegExp(S.id,"g"),b.id)}),new RTCSessionDescription({type:h.type,sdp:g})}function l(d,h){let g=h.sdp;return Object.keys(d._reverseStreams||[]).forEach(y=>{const b=d._reverseStreams[y],S=d._streams[b.id];g=g.replace(new RegExp(b.id,"g"),S.id)}),new RTCSessionDescription({type:h.type,sdp:g})}["createOffer","createAnswer"].forEach(function(d){const h=e.RTCPeerConnection.prototype[d],g={[d](){const y=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[S=>{const E=s(this,S);y[0].apply(null,[E])},S=>{y[1]&&y[1].apply(null,S)},arguments[2]]):h.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[d]=g[d]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const d=p.get.apply(this);return d.type===""?d:s(this,d)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let y;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(E=>h.track===E)&&(y=this._streams[b])}),y&&(y.getTracks().length===1?this.removeStream(this._reverseStreams[y.id]):y.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function i0(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function Dw(e,t){fo(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const DA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Dw,shimAddTrackRemoveTrack:_w,shimAddTrackRemoveTrackWithNative:Nw,shimGetSendersWithDtmf:ww,shimGetUserMedia:Cw,shimMediaStream:Tw,shimOnTrack:Pw,shimPeerConnection:i0,shimSenderReceiverGetStats:Ow},Symbol.toStringTag,{value:"Module"}));function kw(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){uv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,p){u in l&&!(p in l)&&(l[p]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function iI(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function Mw(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function s0(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(p=>{if(t.version<53&&!l)try{p.forEach(d=>{d.type=n[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;p.forEach((h,g)=>{p.set(g,Object.assign({},h,{type:n[h.type]||h.type}))})}return p}).then(l,u)}}function jw(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Iw(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),fo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Rw(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){uv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Lw(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function $w(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function Bw(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Uw(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function zw(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const kA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:$w,shimCreateAnswer:zw,shimCreateOffer:Uw,shimGetDisplayMedia:iI,shimGetParameters:Bw,shimGetUserMedia:kw,shimOnTrack:Mw,shimPeerConnection:s0,shimRTCDataChannel:Lw,shimReceiverGetStats:Iw,shimRemoveStream:Rw,shimSenderGetStats:jw},Symbol.toStringTag,{value:"Module"}));function Gw(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function Hw(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function Yw(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(d,h){const g=arguments.length>=2?arguments[2]:arguments[0],y=n.apply(this,[g]);return h?(y.then(d,h),Promise.resolve()):y},t.createAnswer=function(d,h){const g=arguments.length>=2?arguments[2]:arguments[0],y=r.apply(this,[g]);return h?(y.then(d,h),Promise.resolve()):y};let u=function(p,d,h){const g=i.apply(this,[p]);return h?(g.then(d,h),Promise.resolve()):g};t.setLocalDescription=u,u=function(p,d,h){const g=s.apply(this,[p]);return h?(g.then(d,h),Promise.resolve()):g},t.setRemoteDescription=u,u=function(p,d,h){const g=l.apply(this,[p]);return h?(g.then(d,h),Promise.resolve()):g},t.addIceCandidate=u}function qw(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(Fw(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function Fw(e){return e&&e.video!==void 0?Object.assign({},e,{video:Ew(e.video)}):e}function Vw(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(uv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Kw(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ww(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Xw(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const MA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Xw,shimCallbacksAPI:Yw,shimConstraints:Fw,shimCreateOfferLegacy:Ww,shimGetUserMedia:qw,shimLocalStreamsAPI:Gw,shimRTCIceServerUrls:Vw,shimRemoteStreamsAPI:Hw,shimTrackEventTransceiver:Kw},Symbol.toStringTag,{value:"Module"}));var bg={exports:{}},jA;function sI(){return jA||(jA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const p=s[u],d=t.matchPrefix(n,"a=rtpmap:"+p+" ")[0];if(d){const h=t.parseRtpMap(d),g=t.matchPrefix(n,"a=fmtp:"+p+" ");switch(h.parameters=g.length?t.parseFmtp(g[0]):{},h.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+p+" ").map(t.parseRtcpFb),r.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(h.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(p=>{u.rtcpFeedback.find(h=>h.type===p.type&&h.parameter===p.parameter)||u.rtcpFeedback.push(p)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(y=>t.parseSsrcMedia(y)).filter(y=>y.attribute==="cname"),p=u.length>0&&u[0].ssrc;let d;const h=t.matchPrefix(n,"a=ssrc-group:FID").map(y=>y.substring(17).split(" ").map(S=>parseInt(S,10)));h.length>0&&h[0].length>1&&h[0][0]===p&&(d=h[0][1]),i.codecs.forEach(y=>{if(y.name.toUpperCase()==="RTX"&&y.parameters.apt){let b={ssrc:p,codecPayloadType:parseInt(y.parameters.apt,10)};p&&d&&(b.rtx={ssrc:d}),r.push(b),s&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:p,mechanism:l?"red+ulpfec":"red"},r.push(b))}}),r.length===0&&p&&r.push({ssrc:p});let g=t.matchPrefix(n,"b=");return g.length&&(g[0].indexOf("b=TIAS:")===0?g=parseInt(g[0].substring(7),10):g[0].indexOf("b=AS:")===0?g=parseInt(g[0].substring(5),10)*1e3*.95-2e3*8:g=void 0,r.forEach(y=>{y.maxBitrate=g})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const p=u[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(bg)),bg.exports}var Qw=sI();const gl=ua(Qw),oI=YP({__proto__:null,default:gl},[Qw]);function Df(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=gl.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,fo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function o0(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||fo(e,"icecandidate",t=>{if(t.candidate){const n=gl.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function kf(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const p=gl.splitSections(u.sdp);return p.shift(),p.some(d=>{const h=gl.parseMLine(d);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},r=function(u){const p=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const d=parseInt(p[1],10);return d!==d?-1:d},i=function(u){let p=65536;return t.browser==="firefox"&&(t.version<57?u===-1?p=16384:p=2147483637:t.version<60?p=t.version===57?65535:65536:p=2147483637),p},s=function(u,p){let d=65536;t.browser==="firefox"&&t.version===57&&(d=65535);const h=gl.matchPrefix(u.sdp,"a=max-message-size:");return h.length>0?d=parseInt(h[0].substring(19),10):t.browser==="firefox"&&p!==-1&&(d=2147483637),d},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const p=r(arguments[0]),d=i(p),h=s(arguments[0],p);let g;d===0&&h===0?g=Number.POSITIVE_INFINITY:d===0||h===0?g=Math.max(d,h):g=Math.min(d,h);const y={};Object.defineProperty(y,"maxMessageSize",{get(){return g}}),this._sctp=y}return l.apply(this,arguments)}}function Mf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],p=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&p>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},fo(e,"datachannel",r=>(t(r.channel,r.target),r))}function l0(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function c0(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function jf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function If(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const lI=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:c0,shimAddIceCandidateNullOrEmpty:jf,shimConnectionState:l0,shimMaxMessageSize:kf,shimParameterlessSetLocalDescription:If,shimRTCIceCandidate:Df,shimRTCIceCandidateRelayProtocol:o0,shimSendThrowTypeError:Mf},Symbol.toStringTag,{value:"Module"}));function cI({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Aw,r=aI(e),i={browserDetails:r,commonShim:lI,extractVersion:nu,disableLog:nI,disableWarnings:rI,sdp:oI};switch(r.browser){case"chrome":if(!DA||!i0||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=DA,jf(e,r),If(e),Cw(e,r),Tw(e),i0(e,r),Pw(e),_w(e,r),ww(e),Ow(e),Dw(e,r),Df(e),o0(e),l0(e),kf(e,r),Mf(e),c0(e,r);break;case"firefox":if(!kA||!s0||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=kA,jf(e,r),If(e),kw(e,r),s0(e,r),Mw(e),Rw(e),jw(e),Iw(e),Lw(e),$w(e),Bw(e),Uw(e),zw(e),Df(e),l0(e),kf(e,r),Mf(e);break;case"safari":if(!MA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=MA,jf(e,r),If(e),Vw(e),Ww(e),Yw(e),Gw(e),Hw(e),Kw(e),qw(e),Xw(e),Df(e),o0(e),kf(e,r),Mf(e),c0(e,r);break;default:n("Unsupported browser!");break}return i}const IA=cI({window:typeof window>"u"?void 0:window});function po(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class Zw{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),p=t.slice(l,u),d={__peerData:this._dataCount,n:s,data:p,total:i};n.push(d),l=u,s++}return this._dataCount++,n}}}function uI(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const xg=IA.default||IA,Vc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return xg.browserDetails.browser}getVersion(){return xg.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=xg.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},dI=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),Jw=()=>Math.random().toString(36).slice(2),RA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class fI extends Zw{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=RA,this.browser=Vc.getBrowser(),this.browserVersion=Vc.getVersion(),this.pack=bw,this.unpack=vw,this.supports=(function(){const n={browser:Vc.isBrowserSupported(),webRTC:Vc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(RA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Vc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=dI,this.randomToken=Jw}}const ar=new fI,pI="PeerJS: ";class hI{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[pI,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var we=new hI,dv={},mI=Object.prototype.hasOwnProperty,Qn="~";function uu(){}Object.create&&(uu.prototype=Object.create(null),new uu().__proto__||(Qn=!1));function gI(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function eO(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new gI(n,r||e,i),l=Qn?Qn+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function Rf(e,t){--e._eventsCount===0?e._events=new uu:delete e._events[t]}function qn(){this._events=new uu,this._eventsCount=0}qn.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)mI.call(n,r)&&t.push(Qn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};qn.prototype.listeners=function(t){var n=Qn?Qn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};qn.prototype.listenerCount=function(t){var n=Qn?Qn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};qn.prototype.emit=function(t,n,r,i,s,l){var u=Qn?Qn+t:t;if(!this._events[u])return!1;var p=this._events[u],d=arguments.length,h,g;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),d){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,n),!0;case 3:return p.fn.call(p.context,n,r),!0;case 4:return p.fn.call(p.context,n,r,i),!0;case 5:return p.fn.call(p.context,n,r,i,s),!0;case 6:return p.fn.call(p.context,n,r,i,s,l),!0}for(g=1,h=new Array(d-1);g<d;g++)h[g-1]=arguments[g];p.fn.apply(p.context,h)}else{var y=p.length,b;for(g=0;g<y;g++)switch(p[g].once&&this.removeListener(t,p[g].fn,void 0,!0),d){case 1:p[g].fn.call(p[g].context);break;case 2:p[g].fn.call(p[g].context,n);break;case 3:p[g].fn.call(p[g].context,n,r);break;case 4:p[g].fn.call(p[g].context,n,r,i);break;default:if(!h)for(b=1,h=new Array(d-1);b<d;b++)h[b-1]=arguments[b];p[g].fn.apply(p[g].context,h)}}return!0};qn.prototype.on=function(t,n,r){return eO(this,t,n,r,!1)};qn.prototype.once=function(t,n,r){return eO(this,t,n,r,!0)};qn.prototype.removeListener=function(t,n,r,i){var s=Qn?Qn+t:t;if(!this._events[s])return this;if(!n)return Rf(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&Rf(this,s);else{for(var u=0,p=[],d=l.length;u<d;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&p.push(l[u]);p.length?this._events[s]=p.length===1?p[0]:p:Rf(this,s)}return this};qn.prototype.removeAllListeners=function(t){var n;return t?(n=Qn?Qn+t:t,this._events[n]&&Rf(this,n)):(this._events=new uu,this._eventsCount=0),this};qn.prototype.off=qn.prototype.removeListener;qn.prototype.addListener=qn.prototype.on;qn.prefixed=Qn;qn.EventEmitter=qn;dv=qn;var ho={};po(ho,"ConnectionType",()=>ss);po(ho,"PeerErrorType",()=>en);po(ho,"BaseConnectionErrorType",()=>u0);po(ho,"DataConnectionErrorType",()=>fv);po(ho,"SerializationType",()=>Np);po(ho,"SocketEventType",()=>is);po(ho,"ServerMessageType",()=>zn);var ss=(function(e){return e.Data="data",e.Media="media",e})({}),en=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),u0=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),fv=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Np=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),is=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),zn=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const tO="1.5.5";class yI extends dv.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+tO),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),we.log("Server message received:",s)}catch{we.log("Invalid server message",i.data);return}this.emit(is.Message,s)},this._socket.onclose=i=>{this._disconnected||(we.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(is.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),we.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){we.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:zn.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(is.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class nO{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===ss.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){we.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;we.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(we.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:zn.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":we.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(u0.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":we.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(u0.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":we.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},we.log("Listening for data channel"),t.ondatachannel=l=>{we.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},we.log("Listening for remote stream"),t.ontrack=l=>{we.log("Received remote stream");const u=l.streams[0],p=s.getConnection(n,r);if(p.type===ss.Media){const d=p;this._addStreamToMediaConnection(u,d)}}}cleanup(){we.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);we.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),we.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===ss.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:zn.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(en.WebRTC,i),we.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(en.WebRTC,r),we.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();we.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),we.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:zn.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(en.WebRTC,i),we.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(en.WebRTC,r),we.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;we.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),we.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(en.WebRTC,l),we.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){we.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),we.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(en.WebRTC,n),we.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(we.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return we.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){we.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class rO extends dv.EventEmitter{emitError(t,n){we.error("Error:",n),this.emit("error",new vI(`${t}`,n))}}class vI extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class aO extends rO{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class Gf extends aO{static#e=this.ID_PREFIX="mc_";get type(){return ss.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Gf.ID_PREFIX+ar.randomToken(),this._negotiator=new nO(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{we.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{we.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){we.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case zn.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case zn.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:we.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){we.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class bI{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",tO),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){we.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==ar.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===ar.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw we.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Hf extends aO{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return ss.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||Hf.ID_PREFIX+Jw(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new nO(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{we.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{we.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{we.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(fv.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case zn.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case zn.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:we.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class pv extends Hf{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Hf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return we.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Sg extends pv{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new Zw,this.serialization=Np.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=vw(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=uI(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=bw(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);we.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class xI extends pv{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Np.None}}class SI extends pv{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=ar.chunkedMTU){this.emitError(fv.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Np.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class hv extends rO{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:xI,json:SI,binary:Sg,"binary-utf8":Sg,default:Sg},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:ar.CLOUD_HOST,port:ar.CLOUD_PORT,path:"/",key:hv.DEFAULT_KEY,token:ar.randomToken(),config:ar.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==ar.CLOUD_HOST?this._options.secure=ar.isSecure():this._options.host==ar.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&we.setLogFunction(this._options.logFunction),we.logLevel=this._options.debug||0,this._api=new bI(n),this._socket=this._createServerConnection(),!ar.supports.audioVideo&&!ar.supports.data){this._delayedAbort(en.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!ar.validateId(r)){this._delayedAbort(en.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(en.ServerError,i))}_createServerConnection(){const t=new yI(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(is.Message,n=>{this._handleMessage(n)}),t.on(is.Error,n=>{this._abort(en.SocketError,n)}),t.on(is.Disconnected,()=>{this.disconnected||(this.emitError(en.Network,"Lost connection to server."),this.disconnect())}),t.on(is.Close,()=>{this.disconnected||this._abort(en.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case zn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case zn.Error:this._abort(en.ServerError,r.msg);break;case zn.IdTaken:this._abort(en.UnavailableID,`ID "${this.id}" is taken`);break;case zn.InvalidKey:this._abort(en.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case zn.Leave:we.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case zn.Expire:this.emitError(en.PeerUnavailable,`Could not connect to peer ${i}`);break;case zn.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),we.warn(`Offer received for existing Connection ID:${s}`)),r.type===ss.Media){const p=new Gf(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=p,this._addConnection(i,l),this.emit("call",p)}else if(r.type===ss.Data){const p=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=p,this._addConnection(i,l),this.emit("connection",p)}else{we.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const p of u)l.handleMessage(p);break}default:{if(!r){we.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):we.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){we.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(en.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){we.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(en.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){we.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new Gf(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){we.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){we.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(we.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;we.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)we.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)we.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(en.ServerError,n))}}var LA=hv;class AI{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new LA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{w("MULTIPLAYER","Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{w("MULTIPLAYER","Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new LA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{w("MULTIPLAYER","Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{w("MULTIPLAYER","Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),w("MULTIPLAYER","P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),w("MULTIPLAYER","P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(w("MULTIPLAYER","Received P2P data:",t),t.type){case"STATE_UPDATE":w("MULTIPLAYER","[P2P GUEST] Received state update with animations:",{hasActionAnimations:t.actionAnimations&&t.actionAnimations.length>0,hasSystemAnimations:t.systemAnimations&&t.systemAnimations.length>0,actionAnimationCount:t.actionAnimations?.length||0,systemAnimationCount:t.systemAnimations?.length||0}),this.emit("state_update_received",{state:t.state,actionAnimations:t.actionAnimations||[],systemAnimations:t.systemAnimations||[]});break;case"GUEST_ACTION":this.actionProcessor?await this.actionProcessor.processGuestAction(t.action):console.error("ActionProcessor not set - cannot process guest action");break;case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}broadcastState(t,n=[],r=[]){if(!this.isHost){console.warn("Only host can broadcast state");return}if(this.connection&&this.isConnected)try{w("MULTIPLAYER","[P2P HOST] Broadcasting state - checking player2 hand:",{player2HandSize:t.player2?.hand?.length||0,sampleCard:t.player2?.hand?.[0]||null,sampleInstanceId:t.player2?.hand?.[0]?.instanceId}),this.connection.send({type:"STATE_UPDATE",state:t,actionAnimations:n,systemAnimations:r,timestamp:Date.now()}),w("MULTIPLAYER","[P2P HOST] Broadcasted state update to guest",{hasAnimations:n.length+r.length>0,actionAnimationCount:n.length,systemAnimationCount:r.length})}catch(i){console.error("Failed to broadcast state:",i),this.emit("send_error",{error:i.message})}else console.warn("Cannot broadcast state - no connection available")}sendActionToHost(t,n){if(this.isHost){console.warn("Host should not send actions to itself");return}if(this.connection&&this.isConnected)try{this.connection.send({type:"GUEST_ACTION",action:{type:t,payload:n},timestamp:Date.now()}),w("MULTIPLAYER","[P2P GUEST] Sent action to host:",t)}catch(r){console.error("Failed to send action to host:",r),this.emit("send_error",{error:r.message})}else console.warn("Cannot send action - no connection to host")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(w("MULTIPLAYER","Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const Wn=new AI,d0=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},EI=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Drawing up to Hand Limit",draw:"Drawing up to Hand Limit",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,CI=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],TI=["deployment","action"],PI=e=>CI.includes(e),$A=e=>TI.includes(e),ds=()=>{const[e,t]=A.useState(He.getState()),[n,r]=A.useState(Wn.getStatus());A.useEffect(()=>{He.setupP2PIntegration(Wn)},[]),A.useEffect(()=>He.subscribe(U=>{U.type!=="render_complete"&&t(He.getState())}),[]),A.useEffect(()=>Wn.subscribe(U=>{r(Wn.getStatus())}),[]);const i=A.useCallback(()=>He.isMyTurn(),[e.currentPlayer,e.gameMode]),s=A.useCallback(()=>He.getLocalPlayerId(),[e.gameMode]),l=A.useCallback(()=>He.getOpponentPlayerId(),[e.gameMode]),u=A.useCallback(()=>e.gameMode!=="local",[e.gameMode]),p=A.useCallback(()=>u()&&!i(),[u,i]),d=A.useCallback(()=>He.getLocalPlayerState(),[e.gameMode]),h=A.useCallback(()=>He.getOpponentPlayerState(),[e.gameMode]),g=A.useCallback(te=>He.isLocalPlayer(te),[e.gameMode]),y=A.useCallback(()=>He.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),b=A.useCallback(()=>{const te=He.getOpponentPlacedSections();return e.turnPhase==="placement"&&te.some(U=>U!==null)&&console.error("🔥 CRITICAL - getOpponentPlacedSections returning:",te,"from gameState:",e.opponentPlacedSections),te},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=A.useCallback((te,U)=>{He.updatePlayers(te,U)},[]),E=A.useCallback((te,U)=>{He.updatePlayerState(te,U)},[]),C=A.useCallback((te,U)=>{He.setPlayerStates(te,U)},[]),T=A.useCallback(te=>{He.setFirstPasserOfPreviousRound(te)},[]),O=A.useCallback(te=>{He.setFirstPlayerOverride(te)},[]),N=A.useCallback(te=>{He.setPassInfo(te)},[]),j=A.useCallback(te=>{He.updatePassInfo(te)},[]),M=A.useCallback((te,U,q)=>{He.addLogEntry(te,U,q)},[]),D=A.useCallback(()=>{He.reset()},[]),k=A.useCallback(te=>{He.setWinner(te)},[]),L=A.useCallback(async(te,U)=>await He.processAction(te,U),[]),G=A.useCallback(()=>He.isActionInProgress(),[]),K=A.useCallback(()=>He.getActionQueueLength(),[]),z=A.useCallback(()=>{He.clearActionQueue()},[]),Y=A.useCallback(()=>PI(e.turnPhase),[e.turnPhase]),ie=A.useCallback(()=>$A(e.turnPhase),[e.turnPhase]),Z=A.useCallback(async(te,U)=>{const q=e.turnPhase,Q=$A(q);return w("STATE_SYNC",`🔀 useGameState.routeAction: ${te} in phase ${q} (${Q?"sequential":"simultaneous"})`),Q?await L(te,U):(console.warn(`⚠️ Simultaneous phase action ${te} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${te} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:q,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,L]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:p,getLocalPlayerState:d,getOpponentPlayerState:h,isLocalPlayer:g,getLocalPlacedSections:y,getOpponentPlacedSections:b,updatePlayers:S,updatePlayerState:E,setPlayerStates:C,setFirstPasserOfPreviousRound:T,setFirstPlayerOverride:O,setPassInfo:N,updatePassInfo:j,addLogEntry:M,resetGame:D,setWinner:k,processAction:L,isActionInProgress:G,getActionQueueLength:K,clearActionQueue:z,isSimultaneousPhase:Y,isSequentialPhase:ie,routeAction:Z,gameStateManager:He,p2pManager:Wn}},BA=()=>{const e=["bridge","powerCell","droneControlHub"];return w("PLACEMENT",`🚢 Initialized ship placement: ${e.length} sections available`),w("PLACEMENT",`🎯 Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class ou{constructor(){if(ou.instance)return ou.instance;ou.instance=this,this.PRE_GAME_PHASES=["deckSelection","droneSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw","determineFirstPlayer"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1,w("PHASE_TRANSITIONS","🎮 GameFlowManager initialized")}initialize(t,n,r,i){if(this.isInitialized){w("PHASE_TRANSITIONS","🔧 GameFlowManager already initialized, skipping...");return}if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=un.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;s&&l&&u&&(i.initialize(u,l,s,n,t),w("PHASE_TRANSITIONS","🔄 GameFlowManager re-initialized AIPhaseProcessor with dependencies"))}this.setupEventListeners(),this.isInitialized=!0,w("PHASE_TRANSITIONS","🔧 GameFlowManager initialized with external systems")}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){w("PHASE_TRANSITIONS",`🔔 GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="deckSelection"){if(this.gameStateManager.get("gameMode")==="guest"){w("PHASE_TRANSITIONS","🔒 Guest mode: Skipping game flow logic (waiting for host state)");return}w("PHASE_TRANSITIONS",`🚀 GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let r={};t==="deckSelection"&&(w("PHASE_TRANSITIONS","🎲 GameFlowManager initializing deck selection phase data"),r={...BA()}),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(r).length>0&&this.gameStateManager.setState(r,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(this.gameStateManager.get("gameMode")==="guest")return;if(w("PHASE_TRANSITIONS",`✅ GameFlowManager: Simultaneous phase '${t}' completed`,n),this.actionProcessor){const s=this.actionProcessor.applyPhaseCommitments(t);if(t==="deckSelection"){w("PHASE_TRANSITIONS","🎲 GameFlowManager: Initializing drone selection data for both players after deck selection");const u=this.gameStateManager.get("commitments")?.deckSelection;if(w("DRONE_SELECTION","Deck commitments:",{hasCommitments:!!u,player1HasDrones:!!u?.player1?.drones,player2HasDrones:!!u?.player2?.drones,player1DroneCount:u?.player1?.drones?.length,player2DroneCount:u?.player2?.drones?.length,player1Drones:u?.player1?.drones,player2Drones:u?.player2?.drones}),u){if(u.player1?.drones){const p=this.extractDronesFromDeck(u.player1.drones),d=wA(p,2);s.player1DroneSelectionTrio=d.droneSelectionTrio,s.player1DroneSelectionPool=d.droneSelectionPool,w("PHASE_TRANSITIONS",`🎲 Player1 deck has ${p.length} drones for selection`),w("DRONE_SELECTION","Created player1DroneSelectionTrio:",d.droneSelectionTrio.map(h=>h.name))}else console.warn("⚠️ No drones found in player1 deck commitment");if(u.player2?.drones){const p=this.extractDronesFromDeck(u.player2.drones),d=wA(p,2);s.player2DroneSelectionTrio=d.droneSelectionTrio,s.player2DroneSelectionPool=d.droneSelectionPool,w("PHASE_TRANSITIONS",`🎲 Player2 deck has ${p.length} drones for selection`),w("DRONE_SELECTION","Created player2DroneSelectionTrio:",d.droneSelectionTrio.map(h=>h.name))}else console.warn("⚠️ No drones found in player2 deck commitment");w("DRONE_SELECTION","stateUpdates keys:",Object.keys(s))}else console.error("❌ No deck commitments found - cannot initialize drone selection")}Object.keys(s).length>0&&(this.gameStateManager.setState(s,"COMMITMENT_APPLICATION",`${t}_completion`),w("PHASE_TRANSITIONS",`📋 GameFlowManager: Applied ${t} commitments to game state`))}const i=this.getNextPhase(t);i?this.isSequentialPhase(i)?(w("PHASE_TRANSITIONS",`🔄 GameFlowManager: Handover to sequential phase '${i}'`),this.initiateSequentialPhase(i)):(w("PHASE_TRANSITIONS",`🔄 GameFlowManager: Continuing with simultaneous phase '${i}'`),await this.transitionToPhase(i)):w("PHASE_TRANSITIONS","🎯 GameFlowManager: Game flow completed or needs special handling")}checkSequentialPhaseCompletion(t,n){t.gameMode==="guest"||n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(w("PHASE_TRANSITIONS",`🎯 GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(t.gameMode==="guest"||n!=="COMMITMENT_UPDATE"||!t.commitments)return;w("PHASE_TRANSITIONS","🔍 checkSimultaneousPhaseCompletion called:",{eventType:n,currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){w("PHASE_TRANSITIONS","🔍 Early return: Not a simultaneous phase",{currentPhase:r,simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){w("PHASE_TRANSITIONS","🔍 Early return: No commitments for current phase",{currentPhase:r,allCommitments:Object.keys(t.commitments)});return}const s=i.player1?.completed&&i.player2?.completed;w("PHASE_TRANSITIONS","🔍 Checking completion status:",{currentPhase:r,player1Complete:i.player1?.completed,player2Complete:i.player2?.completed,bothComplete:s}),s&&(w("PHASE_TRANSITIONS",`🎯 GameFlowManager: Detected simultaneous phase completion via state monitoring: ${r}`),this.emit("bothPlayersComplete",{phase:r,commitments:i}),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){w("PHASE_TRANSITIONS",`✅ GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t,n){w("PHASE_TRANSITIONS",`🤖 GameFlowManager: Processing automatic phase '${t}' from '${n}'`),this.isProcessingAutomaticPhase=!0;let r=null;try{t==="gameInitializing"?r=await this.processGameInitializingPhase(n):t==="energyReset"?r=await this.processAutomaticEnergyResetPhase(n):t==="draw"?r=await this.processAutomaticDrawPhase(n):t==="determineFirstPlayer"?r=await this.processAutomaticFirstPlayerPhase(n):console.warn(`⚠️ No handler for automatic phase: ${t}`),r?(w("PHASE_TRANSITIONS",`🔄 GameFlowManager: Transitioning from automatic phase '${t}' to '${r}'`),await this.transitionToPhase(r)):console.warn(`⚠️ No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(t){w("PHASE_TRANSITIONS","🃏 GameFlowManager: Processing automatic draw phase");try{const{performAutomaticDraw:n}=await qr(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-CuPbqHEz.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error("❌ GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),w("PHASE_TRANSITIONS","✅ Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return w("PHASE_TRANSITIONS","✅ Automatic draw completed, returning next phase:",s),s}catch(n){console.error("❌ Error during automatic draw phase:",n)}}async processAutomaticFirstPlayerPhase(t){w("PHASE_TRANSITIONS","🎯 GameFlowManager: Processing automatic first player determination phase");try{const n=await this.actionProcessor.processFirstPlayerDetermination();if(w("PHASE_TRANSITIONS","🎯 First player determination completed:",n),this.animationManager&&n.stateUpdates){const i=this.gameStateManager.getLocalPlayerId(),p={animationName:"PHASE_ANNOUNCEMENT",payload:{phaseText:n.stateUpdates.firstPlayerOfRound===i?"YOU ARE FIRST PLAYER":"OPPONENT IS FIRST PLAYER",phaseName:"firstPlayerResult",timestamp:Date.now()}};await this.actionProcessor.executeAndCaptureAnimations([p],!0),w("PHASE_TRANSITIONS","🎬 [FIRST PLAYER] Second announcement complete")}this.emit("phaseTransition",{newPhase:"determineFirstPlayer",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const r=this.getNextPhase("determineFirstPlayer");return w("PHASE_TRANSITIONS","✅ Automatic first player determination completed, returning next phase:",r),r}catch(n){console.error("❌ Error during automatic first player determination:",n)}}async processAutomaticEnergyResetPhase(t){w("PHASE_TRANSITIONS","⚡ GameFlowManager: Processing automatic energy reset phase");try{if(!this.gameStateManager){console.error("❌ GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await qr(async()=>{const{default:E}=await Promise.resolve().then(()=>Vj);return{default:E}},void 0)).default.getInstance(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={player1:n.placedSections,player2:n.opponentPlacedSections},p=Be.readyDronesAndRestoreShields(n.player1,n.player2,u),d=Be.readyDronesAndRestoreShields(n.player2,n.player1,u),h={...p,energy:s.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?s.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:s.totals.deploymentBudget},g={...d,energy:l.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?l.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:l.totals.deploymentBudget},y=this.roundNumber>=2?s.totals.shieldsPerTurn:0,b=this.roundNumber>=2?l.totals.shieldsPerTurn:0;await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:h,player2:g,shieldsToAllocate:y,opponentShieldsToAllocate:b}}),w("PHASE_TRANSITIONS",`✅ Energy reset complete - Player 1: ${h.energy} energy, Player 2: ${g.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const S=this.getNextPhase("energyReset");return w("PHASE_TRANSITIONS","✅ Automatic energy reset completed, returning next phase:",S),S}catch(n){console.error("❌ Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(t){w("PHASE_TRANSITIONS","🎯 GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(r=>setTimeout(r,100));const n=this.getNextPhase("gameInitializing");return w("PHASE_TRANSITIONS","✅ Game initialization completed, returning next phase:",n),n}catch(n){throw console.error("❌ Error during game initialization:",n),n}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn("⚠️ GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"energyReset":return!0;case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;case"deploymentComplete":return!1;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return t.roundNumber<2?!1:t.shieldsToAllocate>0||t.opponentShieldsToAllocate>0}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn("⚠️ GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){w("PHASE_TRANSITIONS",`🎯 GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(w("PHASE_TRANSITIONS",`🔄 Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn("⚠️ ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1,this.gameStateManager.setState({roundNumber:1,turn:1}))),w("PHASE_TRANSITIONS",`🔄 GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"&&(w("PHASE_TRANSITIONS","🚢 GameFlowManager: Initializing placement phase data"),r=BA()),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.queueAction({type:"phaseTransition",payload:{newPhase:t,resetPassInfo:!0}}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){w("PHASE_TRANSITIONS",`🤖 GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t,n);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,w("PHASE_TRANSITIONS",`🔄 GameFlowManager: Starting round ${this.roundNumber}`),this.gameStateManager.setState({roundNumber:this.roundNumber,turn:this.roundNumber},"ROUND_START","gameFlowManagerMetadata");const t=this.ROUND_PHASES.find(n=>this.isPhaseRequired(n));t?await this.transitionToPhase(t):(console.warn("⚠️ No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){w("PHASE_TRANSITIONS",`🏆 GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){w("PHASE_TRANSITIONS","🔄 GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}extractDronesFromDeck(t){if(!t||!Array.isArray(t))return console.warn("⚠️ Invalid drone names provided to extractDronesFromDeck"),[];const n=t.map(r=>{const i=Yn.find(s=>s.name===r);return i||console.warn(`⚠️ Drone "${r}" not found in collection`),i}).filter(Boolean);return w("PHASE_TRANSITIONS",`📦 Extracted ${n.length} drones from deck: ${n.map(r=>r.name).join(", ")}`),n}}const Yf=new ou;function UA(){const{gameStateManager:e}=ds(),[t,n]=A.useState(!1);A.useEffect(()=>{w("PHASE_TRANSITIONS","🏠 MenuScreen mounted - ensuring clean state"),un.reset(),e?.actionProcessor&&e.actionProcessor.clearQueue(),w("PHASE_TRANSITIONS","✅ MenuScreen: State cleaned up")},[e]);const r=()=>{w("PHASE_TRANSITIONS","🎮 Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{w("PHASE_TRANSITIONS","🎮 Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})},s=()=>{n(!0)},l=()=>{n(!1)};return m.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box",position:"relative"},children:m.jsx("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:t?m.jsxs(m.Fragment,{children:[m.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),m.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[m.jsxs("button",{onClick:r,className:"btn-continue",style:{minWidth:"200px",fontSize:"1.1rem",padding:"16px 30px"},children:["SINGLE PLAYER",m.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),m.jsxs("button",{onClick:i,className:"btn-continue",style:{minWidth:"200px",fontSize:"1.1rem",padding:"16px 30px"},children:["MULTIPLAYER",m.jsx("div",{style:{fontSize:"0.75rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),m.jsx("button",{onClick:l,className:"btn-cancel",children:"BACK"})]}):m.jsxs(m.Fragment,{children:[m.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"EREMOS"}),m.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"the wilderness left when civilization departs"}),m.jsx("button",{onClick:s,className:"btn-continue",children:"START GAME"})]})})})}const zA=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}],wI=({onGameStart:e,onBack:t})=>{const[n,r]=A.useState("menu"),[i,s]=A.useState(""),[l,u]=A.useState(""),[p,d]=A.useState("disconnected"),[h,g]=A.useState(""),[y,b]=A.useState(!1),[S,E]=A.useState(!1);A.useEffect(()=>Wn.subscribe(L=>{switch(w("MULTIPLAYER","P2P Event:",L),L.type){case"room_created":s(L.data.roomCode),r("waiting"),d("waiting"),b(!1);break;case"joined_room":s(L.data.roomCode),r("connected"),d("connected"),b(!1);break;case"connected":r("connected"),d("connected"),b(!1),g("");break;case"disconnected":d("disconnected"),r("menu"),s(""),g("");break;case"connection_error":g(L.data.error),b(!1),r("menu");break}}),[]);const C=async()=>{b(!0),g(""),r("host");try{const k=await Wn.hostGame();w("MULTIPLAYER","Room created with code:",k)}catch(k){console.error("Failed to host game:",k),g(k.message),b(!1),r("menu")}},T=async()=>{if(l.length!==6){g("Please enter a 6-digit room code");return}b(!0),g(""),r("join");try{await Wn.joinGame(l)}catch(k){console.error("Failed to join game:",k),g(k.message),b(!1),r("menu")}},O=async()=>{try{await navigator.clipboard.writeText(i),E(!0),setTimeout(()=>E(!1),2e3)}catch(k){console.error("Failed to copy room code:",k)}},N=()=>{p==="connected"&&e()},j=()=>{Wn.disconnect(),r("menu"),s(""),u(""),g("")},M=()=>{p!=="disconnected"&&j(),t()},D=()=>{switch(p){case"waiting":return m.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[m.jsx(dl,{className:"w-4 h-4 animate-spin"}),m.jsx("span",{children:"Waiting for opponent..."})]});case"connected":return m.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[m.jsx(vA,{className:"w-4 h-4"}),m.jsx("span",{children:"Connected to opponent"})]});case"disconnected":default:return m.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[m.jsx(YM,{className:"w-4 h-4"}),m.jsx("span",{children:"Not connected"})]})}};return w("MULTIPLAYER","🎮 MultiplayerLobby rendering - mode:",n),m.jsx("div",{style:{maxWidth:"500px",width:"100%",margin:"0 auto"},children:m.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20",style:{backgroundColor:"rgba(15, 23, 42, 0.95)",borderColor:"#a855f7",boxShadow:"0 20px 50px rgba(168, 85, 247, 0.2)"},children:[m.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[m.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffffff",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[m.jsx(GM,{className:"w-8 h-8 text-purple-400"}),"Multiplayer Lobby"]}),m.jsx("div",{style:{marginBottom:"1rem"},children:D()})]}),h&&m.jsx("div",{style:{backgroundColor:"rgba(127, 29, 29, 0.5)",border:"1px solid #ef4444",borderRadius:"0.5rem",padding:"0.75rem",marginBottom:"1rem"},children:m.jsx("p",{style:{color:"#fca5a5",fontSize:"0.875rem"},children:h})}),n==="menu"&&m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[m.jsxs("button",{onClick:C,disabled:y,className:"btn-continue",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y?m.jsx(dl,{className:"w-5 h-5 animate-spin"}):m.jsx(AM,{className:"w-5 h-5"}),"Host Game"]}),m.jsx("div",{style:{textAlign:"center",color:"#9ca3af",fontSize:"0.875rem"},children:"or"}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.jsx("input",{type:"text",placeholder:"Enter 6-digit room code",value:l,onChange:k=>u(k.target.value.replace(/[^0-9]/g,"").slice(0,6)),style:{width:"100%",backgroundColor:"#1e293b",border:"1px solid #4b5563",borderRadius:"0.5rem",padding:"0.75rem 1rem",color:"#ffffff",textAlign:"center",fontSize:"1.125rem",letterSpacing:"0.1em"},maxLength:6}),m.jsxs("button",{onClick:T,disabled:y||l.length!==6,className:"btn-confirm",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[y?m.jsx(dl,{className:"w-5 h-5 animate-spin"}):m.jsx(vA,{className:"w-5 h-5"}),"Join Game"]})]})]}),n==="waiting"&&m.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[m.jsxs("div",{style:{backgroundColor:"#1e293b",borderRadius:"0.5rem",padding:"1rem"},children:[m.jsx("p",{style:{color:"#d1d5db",marginBottom:"0.5rem"},children:"Share this room code:"}),m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[m.jsx("code",{style:{fontSize:"1.5rem",fontFamily:"monospace",color:"#ffffff",backgroundColor:"#334155",padding:"0.5rem 1rem",borderRadius:"0.25rem"},children:i}),m.jsx("button",{onClick:O,style:{backgroundColor:"#9333ea",color:"#ffffff",padding:"0.5rem",borderRadius:"0.25rem",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:k=>k.target.style.backgroundColor="#7c3aed",onMouseOut:k=>k.target.style.backgroundColor="#9333ea",children:S?m.jsx(fM,{className:"w-5 h-5"}):m.jsx(av,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",color:"#facc15"},children:[m.jsx(dl,{className:"w-5 h-5 animate-spin"}),m.jsx("span",{children:"Waiting for opponent to join..."})]})]}),n==="connected"&&m.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",gap:"1rem"},children:[m.jsxs("div",{style:{backgroundColor:"rgba(20, 83, 45, 0.5)",border:"1px solid #22c55e",borderRadius:"0.5rem",padding:"1rem"},children:[m.jsx("p",{style:{color:"#86efac"},children:"✅ Connected to opponent!"}),i&&m.jsxs("p",{style:{color:"#9ca3af",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Room: ",i]})]}),m.jsx("button",{onClick:N,className:"btn-continue",style:{width:"100%"},children:"Start Game"})]}),(n==="host"||n==="join")&&y&&m.jsxs("div",{style:{textAlign:"center"},children:[m.jsx(dl,{className:"w-8 h-8 animate-spin text-purple-400",style:{margin:"0 auto 1rem auto",color:"#c084fc"}}),m.jsx("p",{style:{color:"#d1d5db"},children:n==="host"?"Creating room...":"Joining room..."})]}),m.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid #374151"},children:m.jsx("button",{onClick:M,className:"btn-cancel",style:{width:"100%"},children:p!=="disconnected"?"Disconnect & Back":"Back"})})]})})};function OI(){const{gameState:e,gameStateManager:t}=ds(),[n,r]=A.useState(null),i=e.gameMode==="local",s=e.gameMode!=="local";A.useEffect(()=>{s&&(w("PHASE_TRANSITIONS","🔌 Setting up P2P integration for multiplayer"),t.setupP2PIntegration(Wn))},[s]);const l=()=>{w("PHASE_TRANSITIONS","🔙 Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},u=h=>{w("PHASE_TRANSITIONS","🤖 Selected AI:",h.name),r(h)},p=()=>{if(i&&n){if(w("PHASE_TRANSITIONS","🎮 Starting single player game with AI:",n.name),!n.dronePool||!Array.isArray(n.dronePool)){const y=`Cannot start game: AI '${n.name}' has invalid dronePool configuration.`;console.error("❌",y),alert(y);return}if(n.dronePool.length<5){const y=`Cannot start game: AI '${n.name}' has only ${n.dronePool.length} drones. Minimum 5 drones required.`;console.error("❌",y),alert(y);return}if(n.dronePool.length>10){const y=`Cannot start game: AI '${n.name}' has ${n.dronePool.length} drones. Maximum 10 drones allowed.`;console.error("❌",y),alert(y);return}w("PHASE_TRANSITIONS",`✅ AI drone pool validated: ${n.dronePool.length} drones`);const h=Yn.filter(y=>n.dronePool.includes(y.name)),g={};h.forEach(y=>{g[y.name]=0}),oa.initialize(zA,Yn,n,t.actionProcessor,t),w("PHASE_TRANSITIONS","🤖 AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:h,deployedDroneCounts:g,aiPersonality:n})}},d=()=>{w("PHASE_TRANSITIONS","🎮 Starting multiplayer game after connection");const h=Wn.isHost,g=h?"host":"guest";w("PHASE_TRANSITIONS",`🎮 Multiplayer mode: ${g}`),t.startGame(g,{name:h?"Host Player":"Guest Player"},{name:h?"Guest Player":"Host Player"})};return m.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box",position:"relative"},children:m.jsxs("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[m.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:i?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),i&&m.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:zA.map(h=>m.jsxs("div",{onClick:()=>u(h),style:{padding:"20px",backgroundColor:n?.name===h.name?"#0088ff":"#2a2a2a",border:`2px solid ${n?.name===h.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:g=>{n?.name!==h.name&&(g.target.style.backgroundColor="#333333",g.target.style.borderColor="#666666")},onMouseOut:g=>{n?.name!==h.name&&(g.target.style.backgroundColor="#2a2a2a",g.target.style.borderColor="#444444")},children:[m.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:n?.name===h.name?"#ffffff":"#00ff88"},children:h.name}),m.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:h.description}),m.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",h.difficulty]})]},h.name))})}),s&&m.jsx(wI,{onGameStart:d,onBack:l}),i&&m.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[m.jsx("button",{onClick:l,className:"btn-cancel",children:"BACK TO MENU"}),m.jsx("button",{onClick:p,disabled:!n,className:"btn-continue",children:"START GAME"})]})]})})}const GA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>m.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:m.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:m.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&m.jsx(n,{size:12,className:r}),m.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),NI=({text:e,className:t})=>{const n=A.useRef(null),r=A.useRef(null);return A.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,p;t.includes("font-orbitron")?(u=8,p=16):(u=8,p=12);let d=p;for(s.style.fontSize=d+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&d>u;)d-=.5,s.style.fontSize=d+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),m.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:m.jsx("span",{ref:r,className:t,children:e})})},ao=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:p,scale:d=1,isViewOnly:h=!1})=>{let g=e.limit;l.forEach(q=>{q.mod.stat==="limit"&&(g+=q.mod.value)});const y=i>=g,b=n&&(!y||s),S=A.useMemo(()=>{const q={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(Q=>{Q.mod.stat==="cost"?q.cost=Math.max(0,q.cost+Q.mod.value):q.hasOwnProperty(Q.mod.stat)&&(q[Q.mod.stat]+=Q.mod.value)}),q},[e,l]),E=S.cost,C=S.attack>e.attack,T=S.attack<e.attack,O=C?"text-green-400":T?"text-red-400":"text-white",N=S.speed>e.speed,j=S.speed<e.speed,M=N?"text-green-400":j?"text-red-400":"text-white",D=S.cost<e.class,k=S.cost>e.class,L=D?"text-green-400":k?"text-red-400":"text-white",K=g>e.limit?"text-green-400":"text-white",{name:z,image:Y,hull:ie,shields:Z,abilities:te}=e,U=d!==1?{transform:`scale(${d})`,transformOrigin:"center center"}:{};return m.jsx("div",{onClick:b?()=>t(e):void 0,className:`
        w-[225px] h-[275px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${b?"cursor-pointer":h?"cursor-default":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${!b&&!h?"opacity-60":""}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...U},children:m.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[m.jsx("img",{src:Y,alt:z,className:"absolute inset-0 w-full h-full object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-black/40"}),m.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[m.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:m.jsx(NI,{text:z,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),m.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[m.jsx("div",{className:"w-10 h-12",children:m.jsx(GA,{value:S.attack,isFlat:!1,icon:$M,iconColor:"text-red-400",textColor:O})}),m.jsxs("div",{className:"flex flex-col items-center gap-1",children:[m.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:Z>0&&Array.from({length:Z}).map((q,Q)=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:m.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${Q}`))}),m.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:ie}).map((q,Q)=>m.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${Q}`))})]}),m.jsx("div",{className:"w-12 h-12",children:m.jsx(GA,{value:S.speed,isFlat:!0,icon:e0,iconColor:"text-blue-400",textColor:M})})]}),m.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-48 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:te&&te.length>0?te.map((q,Q)=>m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm text-purple-400 tracking-wider font-bold",children:q.name}),m.jsx("p",{className:"text-gray-400 text-sm leading-tight font-exo",children:q.description})]},Q)):m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsx("p",{className:"text-sm text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),m.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(zf,{size:14,className:"text-yellow-300"}),m.jsx("span",{className:`font-bold text-base ml-1 ${L}`,children:E})]})]}),e.upgradeSlots>0&&m.jsxs("button",{onClick:q=>{q.stopPropagation(),p&&p(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[m.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),m.jsx("div",{className:"flex items-center",children:m.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),m.jsx("div",{className:"flex items-center",children:m.jsxs("span",{className:`font-bold text-base ${y?"text-pink-500":K}`,children:[i,"/",g]})})]})]})]})]})})},mv=({phase:e,localPlayerStatus:t})=>m.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:m.jsxs("div",{className:"text-center p-8",children:[m.jsx(dl,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),m.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),m.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&m.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[m.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:"✅ Your Selection Complete"}),m.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function _I(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i}=ds(),{turnPhase:s}=e;i();const l=t(),u=`${l}DroneSelectionTrio`,p=`${l}DroneSelectionPool`,d=e[u],h=e[p];w("DRONE_SELECTION","DroneSelectionScreen render:",{localPlayerId:l,propertyNameTrio:u,propertyNamePool:p,hasTrio:!!d,hasPool:!!h,trioLength:d?.length,poolLength:h?.length,trioData:d?.map(k=>k.name),player1Trio:e.player1DroneSelectionTrio?.map(k=>k.name),player2Trio:e.player2DroneSelectionTrio?.map(k=>k.name),gameMode:e.gameMode});const[g,y]=A.useState([]),[b,S]=A.useState(d||[]),[E,C]=A.useState(h||[]),T=k=>{if(s!=="droneSelection")return;w("DRONE_SELECTION","🔧 handleChooseDroneForSelection called with:",k.name);const L=[...g,k];if(y(L),L.length<5){const G=Xj(E,2);S(G.droneSelectionTrio),C(G.droneSelectionPool),w("DRONE_SELECTION","🔧 Advanced to next pair locally, selected:",L.length)}else w("DRONE_SELECTION","🔧 All 5 drones selected, waiting for Continue button click")},O=()=>{if(s!=="droneSelection")return;w("DRONE_SELECTION","🔧 handleContinueDroneSelection called with:",g.length);const k=t(),L={playerId:k,phase:"droneSelection",actionData:{drones:g}};if(w("DRONE_SELECTION","Submitting commitment:",{gameMode:e.gameMode,playerId:k,droneCount:g.length,commitmentsBefore:e.commitments?.droneSelection}),e.gameMode==="guest"){w("DRONE_SELECTION","[GUEST] Sending drone selection commitment to host"),Wn.sendActionToHost("commitment",L);return}He.actionProcessor.queueAction({type:"commitment",payload:L}).then(G=>{if(!G.success){console.error("❌ Drone selection submission failed:",G.error);return}w("DRONE_SELECTION","✅ Drone selection submitted successfully")}).catch(G=>{console.error("❌ Drone selection submission error:",G)}),w("DRONE_SELECTION","✅ Drone selection submitted to PhaseManager")};A.useEffect(()=>{d&&d.length>0&&b.length===0&&(S(d),w("DRONE_SELECTION","🔄 Updated currentTrio from gameState after data arrival")),h&&h.length>0&&E.length===0&&(C(h),w("DRONE_SELECTION","🔄 Updated remainingPool from gameState after data arrival"))},[d,h]),A.useEffect(()=>{e.gameMode==="guest"&&He.emit("render_complete")},[e,He]);const N=n(),j=e.commitments?.droneSelection?.[l]?.completed||!1,M=e.commitments?.droneSelection?.[N]?.completed||!1;if(w("DRONE_SELECTION","Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:l,opponentPlayerId:N,localPlayerCompleted:j,opponentCompleted:M,fullCommitmentsObject:e.commitments?.droneSelection,turnPhase:s,willShowWaiting:r()&&j&&!M}),r()&&j&&!M){const k=e.commitments?.droneSelection?.[l]?.drones||g,L=k.length>0?k.map(G=>G.name).join(", "):"Selection complete";return m.jsx(mv,{phase:"droneSelection",localPlayerStatus:`You selected: ${L}`})}const D=g.length===5;return m.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[m.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),m.jsxs("div",{className:"flex flex-col items-center w-full p-4 relative z-10",children:[m.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Select Your Active Drone Pool"}),m.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Choosing 5 drones from your deck of 10"}),m.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((k,L)=>m.jsx("div",{className:`w-3 h-3 rounded-full ${L<g.length?"bg-green-500":"bg-gray-600"}`},L)),m.jsxs("span",{className:"ml-2 text-gray-400",children:[g.length,"/5 drones selected"]})]}),D?m.jsx("div",{className:"text-center mb-8",children:m.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[m.jsx("p",{className:"text-green-400 font-bold mb-2",children:"✅ Selection Complete!"}),m.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected for your Active Pool. Ready to proceed to ship placement."})]})}):m.jsxs(m.Fragment,{children:[m.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",g.length+1," of 5: Select one drone from the two options below for your Active Drone Pool."]}),b&&b.length>0&&m.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:b.map((k,L)=>m.jsx(ao,{drone:k,onClick:()=>T(k),isSelectable:!0,deployedCount:0},k.name||L))})]}),m.jsx("button",{onClick:O,disabled:!D,className:"btn-continue mb-8",children:D?"Continue to Ship Placement":`Continue (${g.length}/5)`}),m.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[m.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",g.length,"/5)",D&&m.jsx("span",{className:"text-green-400 ml-2",children:"✓"})]}),g.length>0?m.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:g.map((k,L)=>m.jsx(ao,{drone:k,isSelectable:!1,deployedCount:0,isViewOnly:!0},L))}):m.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function iO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=iO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ht(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=iO(e))&&(r&&(r+=" "),r+=t);return r}var Ag={},Eg={},HA;function DI(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Eg)),Eg}var Cg={},YA;function sO(){return YA||(YA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Cg)),Cg}var Tg={},qA;function oO(){return qA||(qA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Tg)),Tg}var Pg={},FA;function gv(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",p=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const d=n[s];u?d==="\\"&&s+1<i?(s++,l+=n[s]):d===u?u="":l+=d:p?d==='"'||d==="'"?u=d:d==="]"?(p=!1,r.push(l),l=""):l+=d:d==="["?(p=!0,l&&(r.push(l),l="")):d==="."?l&&(r.push(l),l=""):l+=d,s++}return l&&r.push(l),r}e.toPath=t})(Pg)),Pg}var VA;function yv(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DI(),n=sO(),r=oO(),i=gv();function s(u,p,d){if(u==null)return d;switch(typeof p){case"string":{if(t.isUnsafeProperty(p))return d;const h=u[p];return h===void 0?n.isDeepKey(p)?s(u,i.toPath(p),d):d:h}case"number":case"symbol":{typeof p=="number"&&(p=r.toKey(p));const h=u[p];return h===void 0?d:h}default:{if(Array.isArray(p))return l(u,p,d);if(Object.is(p?.valueOf(),-0)?p="-0":p=String(p),t.isUnsafeProperty(p))return d;const h=u[p];return h===void 0?d:h}}}function l(u,p,d){if(p.length===0)return d;let h=u;for(let g=0;g<p.length;g++){if(h==null||t.isUnsafeProperty(p[g]))return d;h=h[p[g]]}return h===void 0?d:h}e.get=s})(Ag)),Ag}var wg,KA;function kI(){return KA||(KA=1,wg=yv().get),wg}var MI=kI();const io=ua(MI);var Og={exports:{}},bt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WA;function jI(){if(WA)return bt;WA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function S(E){if(typeof E=="object"&&E!==null){var C=E.$$typeof;switch(C){case e:switch(E=E.type,E){case n:case i:case r:case p:case d:case y:return E;default:switch(E=E&&E.$$typeof,E){case l:case u:case g:case h:return E;case s:return E;default:return C}}case t:return C}}}return bt.ContextConsumer=s,bt.ContextProvider=l,bt.Element=e,bt.ForwardRef=u,bt.Fragment=n,bt.Lazy=g,bt.Memo=h,bt.Portal=t,bt.Profiler=i,bt.StrictMode=r,bt.Suspense=p,bt.SuspenseList=d,bt.isContextConsumer=function(E){return S(E)===s},bt.isContextProvider=function(E){return S(E)===l},bt.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===e},bt.isForwardRef=function(E){return S(E)===u},bt.isFragment=function(E){return S(E)===n},bt.isLazy=function(E){return S(E)===g},bt.isMemo=function(E){return S(E)===h},bt.isPortal=function(E){return S(E)===t},bt.isProfiler=function(E){return S(E)===i},bt.isStrictMode=function(E){return S(E)===r},bt.isSuspense=function(E){return S(E)===p},bt.isSuspenseList=function(E){return S(E)===d},bt.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===n||E===i||E===r||E===p||E===d||typeof E=="object"&&E!==null&&(E.$$typeof===g||E.$$typeof===h||E.$$typeof===l||E.$$typeof===s||E.$$typeof===u||E.$$typeof===b||E.getModuleId!==void 0)},bt.typeOf=S,bt}var XA;function II(){return XA||(XA=1,Og.exports=jI()),Og.exports}var RI=II(),Sn=e=>e===0?0:e>0?1:-1,Er=e=>typeof e=="number"&&e!=+e,Ws=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,_e=e=>(typeof e=="number"||e instanceof Number)&&!Er(e),ja=e=>_e(e)||typeof e=="string",LI=0,du=e=>{var t=++LI;return"".concat(e||"").concat(t)},Hn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_e(t)&&typeof t!="string")return r;var s;if(Ws(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return Er(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},lO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function Dn(e,t,n){return _e(e)&&_e(t)?e+n*(t-e):t}function $I(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):io(r,t))===n)}var An=e=>e===null||typeof e>"u",Su=e=>An(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),BI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function vv(e){if(typeof e!="string")return!1;var t=BI;return t.includes(e)}var UI=["viewBox","children"],QA=["points","pathLength"],Ng={svg:UI,polygon:QA,polyline:QA},zI=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(A.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{vv(i)&&(r[i]=(s=>n[i](n,s)))}),r},GI=(e,t,n)=>r=>(e(t,n,r),null),Au=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];vv(i)&&typeof s=="function"&&(r||(r={}),r[i]=GI(s,t,n))}),r},HI=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function cO(e){if(typeof e!="string")return!1;var t=HI;return t.includes(e)}function mo(e){var t=Object.entries(e).filter(n=>{var[r]=n;return cO(r)});return Object.fromEntries(t)}var ZA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",JA=null,_g=null,uO=e=>{if(e===JA&&Array.isArray(_g))return _g;var t=[];return A.Children.forEach(e,n=>{An(n)||(RI.isFragment(n)?t=t.concat(uO(n.props.children)):t.push(n))}),_g=t,JA=e,t};function bv(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>ZA(i)):r=[ZA(t)],uO(e).forEach(i=>{var s=io(i,"type.displayName")||io(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var YI=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&Ng?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||cO(t)),p=!!n&&vv(t);return l||u||p},tn=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(A.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;YI((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},qI=["children","width","height","viewBox","className","style","title","desc"];function f0(){return f0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f0.apply(null,arguments)}function FI(e,t){if(e==null)return{};var n,r,i=VI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function VI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var xv=A.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:p,desc:d}=e,h=FI(e,qI),g=s||{width:r,height:i,x:0,y:0},y=ht("recharts-surface",l);return A.createElement("svg",f0({},tn(h,!0,"svg"),{className:y,width:r,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),A.createElement("title",null,p),A.createElement("desc",null,d),n)}),KI=["children","className"];function p0(){return p0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p0.apply(null,arguments)}function WI(e,t){if(e==null)return{};var n,r,i=XI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function XI(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var lr=A.forwardRef((e,t)=>{var{children:n,className:r}=e,i=WI(e,KI),s=ht("recharts-layer",r);return A.createElement("g",p0({className:s},tn(i,!0),{ref:t}),n)}),dO=KP(),fO=A.createContext(null),QI=()=>A.useContext(fO);function Tt(e){return function(){return e}}const pO=Math.cos,qf=Math.sin,da=Math.sqrt,Ff=Math.PI,_p=2*Ff,h0=Math.PI,m0=2*h0,Fs=1e-6,ZI=m0-Fs;function hO(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function JI(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return hO;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class eR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?hO:JI(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,p=r-t,d=i-n,h=l-t,g=u-n,y=h*h+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(y>Fs)if(!(Math.abs(g*p-d*h)>Fs)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let b=r-l,S=i-u,E=p*p+d*d,C=b*b+S*S,T=Math.sqrt(E),O=Math.sqrt(y),N=s*Math.tan((h0-Math.acos((E+y-C)/(2*T*O)))/2),j=N/O,M=N/T;Math.abs(j-1)>Fs&&this._append`L${t+j*h},${n+j*g}`,this._append`A${s},${s},0,0,${+(g*b>h*S)},${this._x1=t+M*p},${this._y1=n+M*d}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),p=r*Math.sin(i),d=t+u,h=n+p,g=1^l,y=l?i-s:s-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>Fs||Math.abs(this._y1-h)>Fs)&&this._append`L${d},${h}`,r&&(y<0&&(y=y%m0+m0),y>ZI?this._append`A${r},${r},0,1,${g},${t-u},${n-p}A${r},${r},0,1,${g},${this._x1=d},${this._y1=h}`:y>Fs&&this._append`A${r},${r},0,${+(y>=h0)},${g},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Sv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new eR(t)}function Av(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mO(e){this._context=e}mO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Dp(e){return new mO(e)}function gO(e){return e[0]}function yO(e){return e[1]}function vO(e,t){var n=Tt(!0),r=null,i=Dp,s=null,l=Sv(u);e=typeof e=="function"?e:e===void 0?gO:Tt(e),t=typeof t=="function"?t:t===void 0?yO:Tt(t);function u(p){var d,h=(p=Av(p)).length,g,y=!1,b;for(r==null&&(s=i(b=l())),d=0;d<=h;++d)!(d<h&&n(g=p[d],d,p))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(g,d,p),+t(g,d,p));if(b)return s=null,b+""||null}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:Tt(+p),u):e},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:Tt(+p),u):t},u.defined=function(p){return arguments.length?(n=typeof p=="function"?p:Tt(!!p),u):n},u.curve=function(p){return arguments.length?(i=p,r!=null&&(s=i(r)),u):i},u.context=function(p){return arguments.length?(p==null?r=s=null:s=i(r=p),u):r},u}function hf(e,t,n){var r=null,i=Tt(!0),s=null,l=Dp,u=null,p=Sv(d);e=typeof e=="function"?e:e===void 0?gO:Tt(+e),t=typeof t=="function"?t:Tt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?yO:Tt(+n);function d(g){var y,b,S,E=(g=Av(g)).length,C,T=!1,O,N=new Array(E),j=new Array(E);for(s==null&&(u=l(O=p())),y=0;y<=E;++y){if(!(y<E&&i(C=g[y],y,g))===T)if(T=!T)b=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=y-1;S>=b;--S)u.point(N[S],j[S]);u.lineEnd(),u.areaEnd()}T&&(N[y]=+e(C,y,g),j[y]=+t(C,y,g),u.point(r?+r(C,y,g):N[y],n?+n(C,y,g):j[y]))}if(O)return u=null,O+""||null}function h(){return vO().defined(i).curve(l).context(s)}return d.x=function(g){return arguments.length?(e=typeof g=="function"?g:Tt(+g),r=null,d):e},d.x0=function(g){return arguments.length?(e=typeof g=="function"?g:Tt(+g),d):e},d.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Tt(+g),d):r},d.y=function(g){return arguments.length?(t=typeof g=="function"?g:Tt(+g),n=null,d):t},d.y0=function(g){return arguments.length?(t=typeof g=="function"?g:Tt(+g),d):t},d.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Tt(+g),d):n},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(n)},d.lineX1=function(){return h().x(r).y(t)},d.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Tt(!!g),d):i},d.curve=function(g){return arguments.length?(l=g,s!=null&&(u=l(s)),d):l},d.context=function(g){return arguments.length?(g==null?s=u=null:u=l(s=g),d):s},d}class bO{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function tR(e){return new bO(e,!0)}function nR(e){return new bO(e,!1)}const Ev={draw(e,t){const n=da(t/Ff);e.moveTo(n,0),e.arc(0,0,n,0,_p)}},rR={draw(e,t){const n=da(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},xO=da(1/3),aR=xO*2,iR={draw(e,t){const n=da(t/aR),r=n*xO;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},sR={draw(e,t){const n=da(t),r=-n/2;e.rect(r,r,n,n)}},oR=.8908130915292852,SO=qf(Ff/10)/qf(7*Ff/10),lR=qf(_p/10)*SO,cR=-pO(_p/10)*SO,uR={draw(e,t){const n=da(t*oR),r=lR*n,i=cR*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=_p*s/5,u=pO(l),p=qf(l);e.lineTo(p*n,-u*n),e.lineTo(u*r-p*i,p*r+u*i)}e.closePath()}},Dg=da(3),dR={draw(e,t){const n=-da(t/(Dg*3));e.moveTo(0,n*2),e.lineTo(-Dg*n,-n),e.lineTo(Dg*n,-n),e.closePath()}},zr=-.5,Gr=da(3)/2,g0=1/da(12),fR=(g0/2+1)*3,pR={draw(e,t){const n=da(t/fR),r=n/2,i=n*g0,s=r,l=n*g0+n,u=-s,p=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,p),e.lineTo(zr*r-Gr*i,Gr*r+zr*i),e.lineTo(zr*s-Gr*l,Gr*s+zr*l),e.lineTo(zr*u-Gr*p,Gr*u+zr*p),e.lineTo(zr*r+Gr*i,zr*i-Gr*r),e.lineTo(zr*s+Gr*l,zr*l-Gr*s),e.lineTo(zr*u+Gr*p,zr*p-Gr*u),e.closePath()}};function hR(e,t){let n=null,r=Sv(i);e=typeof e=="function"?e:Tt(e||Ev),t=typeof t=="function"?t:Tt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Tt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Tt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Vf(){}function Kf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function AO(e){this._context=e}AO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Kf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Kf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mR(e){return new AO(e)}function EO(e){this._context=e}EO.prototype={areaStart:Vf,areaEnd:Vf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Kf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gR(e){return new EO(e)}function CO(e){this._context=e}CO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Kf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yR(e){return new CO(e)}function TO(e){this._context=e}TO.prototype={areaStart:Vf,areaEnd:Vf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function vR(e){return new TO(e)}function eE(e){return e<0?-1:1}function tE(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(eE(s)+eE(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function nE(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function kg(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function Wf(e){this._context=e}Wf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kg(this,this._t0,nE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,kg(this,nE(this,n=tE(this,e,t)),n);break;default:kg(this,this._t0,n=tE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function PO(e){this._context=new wO(e)}(PO.prototype=Object.create(Wf.prototype)).point=function(e,t){Wf.prototype.point.call(this,t,e)};function wO(e){this._context=e}wO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function bR(e){return new Wf(e)}function xR(e){return new PO(e)}function OO(e){this._context=e}OO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=rE(e),i=rE(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function rE(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function SR(e){return new OO(e)}function kp(e,t){this._context=e,this._t=t}kp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function AR(e){return new kp(e,.5)}function ER(e){return new kp(e,0)}function CR(e){return new kp(e,1)}function bl(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function y0(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function TR(e,t){return e[t]}function PR(e){const t=[];return t.key=e,t}function wR(){var e=Tt([]),t=y0,n=bl,r=TR;function i(s){var l=Array.from(e.apply(this,arguments),PR),u,p=l.length,d=-1,h;for(const g of s)for(u=0,++d;u<p;++u)(l[u][d]=[0,+r(g,l[u].key,d,s)]).data=g;for(u=0,h=Av(t(l));u<p;++u)l[h[u]].index=u;return n(l,h),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Tt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Tt(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?y0:typeof s=="function"?s:Tt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??bl,i):n},i}function OR(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}bl(e,t)}}function NR(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}bl(e,t)}}function _R(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,p=0,d=0;u<l;++u){for(var h=e[t[u]],g=h[r][1]||0,y=h[r-1][1]||0,b=(g-y)/2,S=0;S<u;++S){var E=e[t[S]],C=E[r][1]||0,T=E[r-1][1]||0;b+=C-T}p+=g,d+=b*g}i[r-1][1]+=i[r-1][0]=n,p&&(n-=d/p)}i[r-1][1]+=i[r-1][0]=n,bl(e,t)}}var DR=["type","size","sizeType"];function v0(){return v0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v0.apply(null,arguments)}function aE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aE(Object(n),!0).forEach(function(r){kR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kR(e,t,n){return(t=MR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MR(e){var t=jR(e,"string");return typeof t=="symbol"?t:t+""}function jR(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IR(e,t){if(e==null)return{};var n,r,i=RR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function RR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var NO={symbolCircle:Ev,symbolCross:rR,symbolDiamond:iR,symbolSquare:sR,symbolStar:uR,symbolTriangle:dR,symbolWye:pR},LR=Math.PI/180,$R=e=>{var t="symbol".concat(Su(e));return NO[t]||Ev},BR=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*LR;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},UR=(e,t)=>{NO["symbol".concat(Su(e))]=t},Cv=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=IR(e,DR),s=iE(iE({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=$R(l),b=hR().type(y).size(BR(n,r,l));return b()},{className:p,cx:d,cy:h}=s,g=tn(s,!0);return d===+d&&h===+h&&n===+n?A.createElement("path",v0({},g,{className:ht("recharts-symbols",p),transform:"translate(".concat(d,", ").concat(h,")"),d:u()})):null};Cv.registerSymbol=UR;function b0(){return b0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b0.apply(null,arguments)}function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(n),!0).forEach(function(r){Tv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tv(e,t,n){return(t=GR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GR(e){var t=HR(e,"string");return typeof t=="symbol"?t:t+""}function HR(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hr=32;class Pv extends A.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Hr/2,s=Hr/6,l=Hr/3,u=t.inactive?r:t.color,p=n??t.type;if(p==="none")return null;if(p==="plainline")return A.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Hr,y2:i,className:"recharts-legend-icon"});if(p==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Hr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(p==="rect")return A.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Hr/8,"h").concat(Hr,"v").concat(Hr*3/4,"h").concat(-Hr,"z"),className:"recharts-legend-icon"});if(A.isValidElement(t.legendIcon)){var d=zR({},t);return delete d.legendIcon,A.cloneElement(t.legendIcon,d)}return A.createElement(Cv,{fill:u,cx:i,cy:i,size:Hr,sizeType:"diameter",type:p})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:Hr,height:Hr},p={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,g)=>{var y=h.formatter||i,b=ht({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:h.inactive});if(h.type==="none")return null;var S=h.inactive?s:h.color,E=y?y(h.value,h,g):h.value;return A.createElement("li",b0({className:b,style:p,key:"legend-item-".concat(g)},Au(this.props,h,g)),A.createElement(xv,{width:n,height:n,viewBox:u,style:d,"aria-label":"".concat(E," legend icon")},this.renderIcon(h,l)),A.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},E))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Tv(Pv,"displayName","Legend");Tv(Pv,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Mg={},jg={},oE;function YR(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(jg)),jg}var Ig={},lE;function _O(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Ig)),Ig}var Rg={},Lg={},$g={},cE;function qR(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})($g)),$g}var uE;function wv(){return uE||(uE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qR();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(Lg)),Lg}var Bg={},dE;function FR(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Bg)),Bg}var fE;function VR(){return fE||(fE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wv(),n=FR();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(Rg)),Rg}var Ug={},zg={},pE;function KR(){return pE||(pE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yv();function n(r){return function(i){return t.get(i,r)}}e.property=n})(zg)),zg}var Gg={},Hg={},Yg={},qg={},hE;function DO(){return hE||(hE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(qg)),qg}var Fg={},mE;function kO(){return mE||(mE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Fg)),Fg}var Vg={},gE;function MO(){return gE||(gE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Vg)),Vg}var yE;function WR(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ov(),n=DO(),r=kO(),i=MO();function s(g,y,b){return typeof b!="function"?t.isMatch(g,y):l(g,y,function S(E,C,T,O,N,j){const M=b(E,C,T,O,N,j);return M!==void 0?!!M:l(E,C,S,j)},new Map)}function l(g,y,b,S){if(y===g)return!0;switch(typeof y){case"object":return u(g,y,b,S);case"function":return Object.keys(y).length>0?l(g,{...y},b,S):i.eq(g,y);default:return n.isObject(g)?typeof y=="string"?y==="":!0:i.eq(g,y)}}function u(g,y,b,S){if(y==null)return!0;if(Array.isArray(y))return d(g,y,b,S);if(y instanceof Map)return p(g,y,b,S);if(y instanceof Set)return h(g,y,b,S);const E=Object.keys(y);if(g==null)return E.length===0;if(E.length===0)return!0;if(S&&S.has(y))return S.get(y)===g;S&&S.set(y,g);try{for(let C=0;C<E.length;C++){const T=E[C];if(!r.isPrimitive(g)&&!(T in g)||y[T]===void 0&&g[T]!==void 0||y[T]===null&&g[T]!==null||!b(g[T],y[T],T,g,y,S))return!1}return!0}finally{S&&S.delete(y)}}function p(g,y,b,S){if(y.size===0)return!0;if(!(g instanceof Map))return!1;for(const[E,C]of y.entries()){const T=g.get(E);if(b(T,C,E,g,y,S)===!1)return!1}return!0}function d(g,y,b,S){if(y.length===0)return!0;if(!Array.isArray(g))return!1;const E=new Set;for(let C=0;C<y.length;C++){const T=y[C];let O=!1;for(let N=0;N<g.length;N++){if(E.has(N))continue;const j=g[N];let M=!1;if(b(j,T,C,g,y,S)&&(M=!0),M){E.add(N),O=!0;break}}if(!O)return!1}return!0}function h(g,y,b,S){return y.size===0?!0:g instanceof Set?d([...g],[...y],b,S):!1}e.isMatchWith=s,e.isSetMatch=h})(Yg)),Yg}var vE;function Ov(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WR();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Hg)),Hg}var Kg={},Wg={},Xg={},bE;function XR(){return bE||(bE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Xg)),Xg}var Qg={},xE;function jO(){return xE||(xE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(Qg)),Qg}var Zg={},SE;function IO(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",p="[object Map]",d="[object Set]",h="[object Array]",g="[object Function]",y="[object ArrayBuffer]",b="[object Object]",S="[object Error]",E="[object DataView]",C="[object Uint8Array]",T="[object Uint8ClampedArray]",O="[object Uint16Array]",N="[object Uint32Array]",j="[object BigUint64Array]",M="[object Int8Array]",D="[object Int16Array]",k="[object Int32Array]",L="[object BigInt64Array]",G="[object Float32Array]",K="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=h,e.bigInt64ArrayTag=L,e.bigUint64ArrayTag=j,e.booleanTag=i,e.dataViewTag=E,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=G,e.float64ArrayTag=K,e.functionTag=g,e.int16ArrayTag=D,e.int32ArrayTag=k,e.int8ArrayTag=M,e.mapTag=p,e.numberTag=r,e.objectTag=b,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=N,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=T})(Zg)),Zg}var Jg={},AE;function QR(){return AE||(AE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(Jg)),Jg}var EE;function RO(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XR(),n=jO(),r=IO(),i=kO(),s=QR();function l(h,g){return u(h,void 0,h,new Map,g)}function u(h,g,y,b=new Map,S=void 0){const E=S?.(h,g,y,b);if(E!==void 0)return E;if(i.isPrimitive(h))return h;if(b.has(h))return b.get(h);if(Array.isArray(h)){const C=new Array(h.length);b.set(h,C);for(let T=0;T<h.length;T++)C[T]=u(h[T],T,y,b,S);return Object.hasOwn(h,"index")&&(C.index=h.index),Object.hasOwn(h,"input")&&(C.input=h.input),C}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const C=new RegExp(h.source,h.flags);return C.lastIndex=h.lastIndex,C}if(h instanceof Map){const C=new Map;b.set(h,C);for(const[T,O]of h)C.set(T,u(O,T,y,b,S));return C}if(h instanceof Set){const C=new Set;b.set(h,C);for(const T of h)C.add(u(T,void 0,y,b,S));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const C=new(Object.getPrototypeOf(h)).constructor(h.length);b.set(h,C);for(let T=0;T<h.length;T++)C[T]=u(h[T],T,y,b,S);return C}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const C=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return b.set(h,C),p(C,h,y,b,S),C}if(typeof File<"u"&&h instanceof File){const C=new File([h],h.name,{type:h.type});return b.set(h,C),p(C,h,y,b,S),C}if(h instanceof Blob){const C=new Blob([h],{type:h.type});return b.set(h,C),p(C,h,y,b,S),C}if(h instanceof Error){const C=new h.constructor;return b.set(h,C),C.message=h.message,C.name=h.name,C.stack=h.stack,C.cause=h.cause,p(C,h,y,b,S),C}if(typeof h=="object"&&d(h)){const C=Object.create(Object.getPrototypeOf(h));return b.set(h,C),p(C,h,y,b,S),C}return h}function p(h,g,y=h,b,S){const E=[...Object.keys(g),...t.getSymbols(g)];for(let C=0;C<E.length;C++){const T=E[C],O=Object.getOwnPropertyDescriptor(h,T);(O==null||O.writable)&&(h[T]=u(g[T],T,y,b,S))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=p})(Wg)),Wg}var CE;function ZR(){return CE||(CE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RO();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(Kg)),Kg}var TE;function JR(){return TE||(TE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ov(),n=ZR();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Gg)),Gg}var ey={},ty={},ny={},PE;function eL(){return PE||(PE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RO(),n=IO();function r(i,s){return t.cloneDeepWith(i,(l,u,p,d)=>{const h=s?.(l,u,p,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i?.valueOf());return t.copyProperties(g,i),g}case n.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=r})(ny)),ny}var wE;function tL(){return wE||(wE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eL();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(ty)),ty}var ry={},ay={},OE;function LO(){return OE||(OE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(ay)),ay}var iy={},NE;function nL(){return NE||(NE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jO();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(iy)),iy}var _E;function rL(){return _E||(_E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sO(),n=LO(),r=nL(),i=gv();function s(l,u){let p;if(Array.isArray(u)?p=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?p=i.toPath(u):p=[u],p.length===0)return!1;let d=l;for(let h=0;h<p.length;h++){const g=p[h];if((d==null||!Object.hasOwn(d,g))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(g)&&g<d.length))return!1;d=d[g]}return!0}e.has=s})(ry)),ry}var DE;function aL(){return DE||(DE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ov(),n=oO(),r=tL(),i=yv(),s=rL();function l(u,p){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return p=r.cloneDeep(p),function(d){const h=i.get(d,u);return h===void 0?s.has(d,u):p===void 0?h===void 0:t.isMatch(h,p)}}e.matchesProperty=l})(ey)),ey}var kE;function iL(){return kE||(kE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_O(),n=KR(),r=JR(),i=aL();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Ug)),Ug}var ME;function sL(){return ME||(ME=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YR(),n=_O(),r=VR(),i=iL();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(Mg)),Mg}var sy,jE;function oL(){return jE||(jE=1,sy=sL().uniqBy),sy}var lL=oL();const IE=ua(lL);function $O(e,t,n){return t===!0?IE(e,n):typeof t=="function"?IE(e,t):e}var oy={exports:{}},ly={},cy={exports:{}},uy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function cL(){if(RE)return uy;RE=1;var e=Nl();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(g,y){var b=y(),S=r({inst:{value:b,getSnapshot:y}}),E=S[0].inst,C=S[1];return s(function(){E.value=b,E.getSnapshot=y,p(E)&&C({inst:E})},[g,b,y]),i(function(){return p(E)&&C({inst:E}),g(function(){p(E)&&C({inst:E})})},[g]),l(b),b}function p(g){var y=g.getSnapshot;g=g.value;try{var b=y();return!n(g,b)}catch{return!0}}function d(g,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return uy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,uy}var LE;function uL(){return LE||(LE=1,cy.exports=cL()),cy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function dL(){if($E)return ly;$E=1;var e=Nl(),t=uL();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,p=e.useDebugValue;return ly.useSyncExternalStoreWithSelector=function(d,h,g,y,b){var S=s(null);if(S.current===null){var E={hasValue:!1,value:null};S.current=E}else E=S.current;S=u(function(){function T(D){if(!O){if(O=!0,N=D,D=y(D),b!==void 0&&E.hasValue){var k=E.value;if(b(k,D))return j=k}return j=D}if(k=j,r(N,D))return k;var L=y(D);return b!==void 0&&b(k,L)?(N=D,k):(N=D,j=L)}var O=!1,N,j,M=g===void 0?null:g;return[function(){return T(h())},M===null?void 0:function(){return T(M())}]},[h,g,y,b]);var C=i(d,S[0],S[1]);return l(function(){E.hasValue=!0,E.value=C},[C]),p(C),C},ly}var BE;function fL(){return BE||(BE=1,oy.exports=dL()),oy.exports}var pL=fL(),Nv=A.createContext(null),hL=e=>e,Lt=()=>{var e=A.useContext(Nv);return e?e.store.dispatch:hL},Lf=()=>{},mL=()=>Lf,gL=(e,t)=>e===t;function Oe(e){var t=A.useContext(Nv);return pL.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:mL,t?t.store.getState:Lf,t?t.store.getState:Lf,t?e:Lf,gL)}function yL(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function vL(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function bL(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var UE=e=>Array.isArray(e)?e:[e];function xL(e){const t=Array.isArray(e[0])?e[0]:e;return bL(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function SL(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var AL=class{constructor(e){this.value=e}deref(){return this.value}},EL=typeof WeakRef<"u"?WeakRef:AL,CL=0,zE=1;function mf(){return{s:CL,v:void 0,o:null,p:null}}function BO(e,t={}){let n=mf();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:p}=arguments;for(let g=0,y=p;g<y;g++){const b=arguments[g];if(typeof b=="function"||typeof b=="object"&&b!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const E=S.get(b);E===void 0?(u=mf(),S.set(b,u)):u=E}else{let S=u.p;S===null&&(u.p=S=new Map);const E=S.get(b);E===void 0?(u=mf(),S.set(b,u)):u=E}}const d=u;let h;if(u.s===zE)h=u.v;else if(h=e.apply(null,arguments),s++,r){const g=i?.deref?.()??i;g!=null&&r(g,h)&&(h=g,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new EL(h):h}return d.s=zE,d.v=h,h}return l.clearCache=()=>{n=mf(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function TL(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,p={},d=i.pop();typeof d=="object"&&(p=d,d=i.pop()),yL(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...p},{memoize:g,memoizeOptions:y=[],argsMemoize:b=BO,argsMemoizeOptions:S=[]}=h,E=UE(y),C=UE(S),T=xL(i),O=g(function(){return s++,d.apply(null,arguments)},...E),N=b(function(){l++;const M=SL(T,arguments);return u=O.apply(null,M),u},...C);return Object.assign(N,{resultFunc:d,memoizedResultFunc:O,dependencies:T,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var ae=TL(BO),PL=Object.assign((e,t=ae)=>{vL(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,p)=>(l[n[p]]=u,l),{}))},{withTypes:()=>PL}),dy={},fy={},py={},GE;function wL(){return GE||(GE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(py)),py}var hy={},my={},HE;function UO(){return HE||(HE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(my)),my}var YE;function OL(){return YE||(YE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UO(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(hy)),hy}var qE;function NL(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wL(),n=OL(),r=gv();function i(s,l,u,p){if(s==null)return[];u=p?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(b=>String(b));const d=(b,S)=>{let E=b;for(let C=0;C<S.length&&E!=null;++C)E=E[S[C]];return E},h=(b,S)=>S==null||b==null?S:typeof b=="object"&&"key"in b?Object.hasOwn(S,b.key)?S[b.key]:d(S,b.path):typeof b=="function"?b(S):Array.isArray(b)?d(S,b):typeof S=="object"?S[b]:S,g=l.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:r.toPath(b)}));return s.map(b=>({original:b,criteria:g.map(S=>h(S,b))})).slice().sort((b,S)=>{for(let E=0;E<g.length;E++){const C=t.compareValues(b.criteria[E],S.criteria[E],u[E]);if(C!==0)return C}return 0}).map(b=>b.original)}e.orderBy=i})(fy)),fy}var gy={},FE;function _L(){return FE||(FE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,p)=>{for(let d=0;d<u.length;d++){const h=u[d];Array.isArray(h)&&p<s?l(h,p+1):i.push(h)}};return l(n,0),i}e.flatten=t})(gy)),gy}var yy={},VE;function zO(){return VE||(VE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LO(),n=wv(),r=DO(),i=MO();function s(l,u,p){return r.isObject(p)&&(typeof u=="number"&&n.isArrayLike(p)&&t.isIndex(u)&&u<p.length||typeof u=="string"&&u in p)?i.eq(p[u],l):!1}e.isIterateeCall=s})(yy)),yy}var KE;function DL(){return KE||(KE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NL(),n=_L(),r=zO();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(dy)),dy}var vy,WE;function kL(){return WE||(WE=1,vy=DL().sortBy),vy}var ML=kL();const Mp=ua(ML);var GO=e=>e.legend.settings,jL=e=>e.legend.size,IL=e=>e.legend.payload,RL=ae([IL,GO],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Mp(r,n):r});function LL(){return Oe(RL)}var gf=1;function HO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>gf||Math.abs(l.left-t.left)>gf||Math.abs(l.top-t.top)>gf||Math.abs(l.width-t.width)>gf)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Nn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $L=typeof Symbol=="function"&&Symbol.observable||"@@observable",XE=$L,by=()=>Math.random().toString(36).substring(7).split("").join("."),BL={INIT:`@@redux/INIT${by()}`,REPLACE:`@@redux/REPLACE${by()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${by()}`},Xf=BL;function _v(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function YO(e,t,n){if(typeof e!="function")throw new Error(Nn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Nn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Nn(1));return n(YO)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,p=!1;function d(){l===s&&(l=new Map,s.forEach((C,T)=>{l.set(T,C)}))}function h(){if(p)throw new Error(Nn(3));return i}function g(C){if(typeof C!="function")throw new Error(Nn(4));if(p)throw new Error(Nn(5));let T=!0;d();const O=u++;return l.set(O,C),function(){if(T){if(p)throw new Error(Nn(6));T=!1,d(),l.delete(O),s=null}}}function y(C){if(!_v(C))throw new Error(Nn(7));if(typeof C.type>"u")throw new Error(Nn(8));if(typeof C.type!="string")throw new Error(Nn(17));if(p)throw new Error(Nn(9));try{p=!0,i=r(i,C)}finally{p=!1}return(s=l).forEach(O=>{O()}),C}function b(C){if(typeof C!="function")throw new Error(Nn(10));r=C,y({type:Xf.REPLACE})}function S(){const C=g;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(Nn(11));function O(){const j=T;j.next&&j.next(h())}return O(),{unsubscribe:C(O)}},[XE](){return this}}}return y({type:Xf.INIT}),{dispatch:y,subscribe:g,getState:h,replaceReducer:b,[XE]:S}}function UL(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Xf.INIT})>"u")throw new Error(Nn(12));if(typeof n(void 0,{type:Xf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Nn(13))})}function qO(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{UL(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let p=!1;const d={};for(let h=0;h<r.length;h++){const g=r[h],y=n[g],b=l[g],S=y(b,u);if(typeof S>"u")throw u&&u.type,new Error(Nn(14));d[g]=S,p=p||S!==b}return p=p||r.length!==Object.keys(l).length,p?d:l}}function Qf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function zL(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Nn(15))};const l={getState:i.getState,dispatch:(p,...d)=>s(p,...d)},u=e.map(p=>p(l));return s=Qf(...u)(i.dispatch),{...i,dispatch:s}}}function FO(e){return _v(e)&&"type"in e&&typeof e.type=="string"}var VO=Symbol.for("immer-nothing"),QE=Symbol.for("immer-draftable"),Cr=Symbol.for("immer-state");function la(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var xl=Object.getPrototypeOf;function so(e){return!!e&&!!e[Cr]}function vi(e){return e?KO(e)||Array.isArray(e)||!!e[QE]||!!e.constructor?.[QE]||Eu(e)||Ip(e):!1}var GL=Object.prototype.constructor.toString();function KO(e){if(!e||typeof e!="object")return!1;const t=xl(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===GL}function Zf(e,t){jp(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function jp(e){const t=e[Cr];return t?t.type_:Array.isArray(e)?1:Eu(e)?2:Ip(e)?3:0}function x0(e,t){return jp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function WO(e,t,n){const r=jp(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function HL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Eu(e){return e instanceof Map}function Ip(e){return e instanceof Set}function Vs(e){return e.copy_||e.base_}function S0(e,t){if(Eu(e))return new Map(e);if(Ip(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=KO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Cr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(xl(e),r)}else{const r=xl(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Dv(e,t=!1){return Rp(e)||so(e)||!vi(e)||(jp(e)>1&&Object.defineProperties(e,{set:{value:yf},add:{value:yf},clear:{value:yf},delete:{value:yf}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Dv(n,!0))),e}function yf(){la(2)}function Rp(e){return Object.isFrozen(e)}var YL={};function oo(e){const t=YL[e];return t||la(0,e),t}var fu;function XO(){return fu}function qL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ZE(e,t){t&&(oo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function A0(e){E0(e),e.drafts_.forEach(FL),e.drafts_=null}function E0(e){e===fu&&(fu=e.parent_)}function JE(e){return fu=qL(fu,e)}function FL(e){const t=e[Cr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function eC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Cr].modified_&&(A0(t),la(4)),vi(e)&&(e=Jf(t,e),t.parent_||ep(t,e)),t.patches_&&oo("Patches").generateReplacementPatches_(n[Cr].base_,e,t.patches_,t.inversePatches_)):e=Jf(t,n,[]),A0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==VO?e:void 0}function Jf(e,t,n){if(Rp(t))return t;const r=t[Cr];if(!r)return Zf(t,(i,s)=>tC(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return ep(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),Zf(s,(u,p)=>tC(e,r,i,u,p,n,l)),ep(e,i,!1),n&&e.patches_&&oo("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function tC(e,t,n,r,i,s,l){if(so(i)){const u=s&&t&&t.type_!==3&&!x0(t.assigned_,r)?s.concat(r):void 0,p=Jf(e,i,u);if(WO(n,r,p),so(p))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(vi(i)&&!Rp(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Jf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Eu(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&ep(e,i)}}function ep(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Dv(t,n)}function VL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:XO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=kv;n&&(i=[r],s=pu);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var kv={get(e,t){if(t===Cr)return e;const n=Vs(e);if(!x0(n,t))return KL(e,n,t);const r=n[t];return e.finalized_||!vi(r)?r:r===xy(e.base_,t)?(Sy(e),e.copy_[t]=T0(r,e)):r},has(e,t){return t in Vs(e)},ownKeys(e){return Reflect.ownKeys(Vs(e))},set(e,t,n){const r=QO(Vs(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=xy(Vs(e),t),s=i?.[Cr];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(HL(n,i)&&(n!==void 0||x0(e.base_,t)))return!0;Sy(e),C0(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return xy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Sy(e),C0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Vs(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){la(11)},getPrototypeOf(e){return xl(e.base_)},setPrototypeOf(){la(12)}},pu={};Zf(kv,(e,t)=>{pu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});pu.deleteProperty=function(e,t){return pu.set.call(this,e,t,void 0)};pu.set=function(e,t,n){return kv.set.call(this,e[0],t,n,e[0])};function xy(e,t){const n=e[Cr];return(n?Vs(n):e)[t]}function KL(e,t,n){const r=QO(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function QO(e,t){if(!(t in e))return;let n=xl(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=xl(n)}}function C0(e){e.modified_||(e.modified_=!0,e.parent_&&C0(e.parent_))}function Sy(e){e.copy_||(e.copy_=S0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var WL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(p=s,...d){return l.produce(p,h=>n.call(this,h,...d))}}typeof n!="function"&&la(6),r!==void 0&&typeof r!="function"&&la(7);let i;if(vi(t)){const s=JE(this),l=T0(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?A0(s):E0(s)}return ZE(s,r),eC(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===VO&&(i=void 0),this.autoFreeze_&&Dv(i,!0),r){const s=[],l=[];oo("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else la(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,p=>t(p,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){vi(e)||la(8),so(e)&&(e=gi(e));const t=JE(this),n=T0(e,void 0);return n[Cr].isManual_=!0,E0(t),n}finishDraft(e,t){const n=e&&e[Cr];(!n||!n.isManual_)&&la(9);const{scope_:r}=n;return ZE(r,t),eC(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=oo("Patches").applyPatches_;return so(e)?r(e,t):this.produce(e,i=>r(i,t))}};function T0(e,t){const n=Eu(e)?oo("MapSet").proxyMap_(e,t):Ip(e)?oo("MapSet").proxySet_(e,t):VL(e,t);return(t?t.scope_:XO()).drafts_.push(n),n}function gi(e){return so(e)||la(10,e),ZO(e)}function ZO(e){if(!vi(e)||Rp(e))return e;const t=e[Cr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=S0(e,t.scope_.immer_.useStrictShallowCopy_)}else n=S0(e,!0);return Zf(n,(r,i)=>{WO(n,r,ZO(i))}),t&&(t.finalized_=!1),n}var XL=new WL,JO=XL.produce;function eN(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var QL=eN(),ZL=eN,JL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Qf:Qf.apply(null,arguments)};function Wr(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Ar(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>FO(r)&&r.type===e,n}var tN=class ru extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ru.prototype)}static get[Symbol.species](){return ru}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ru(...t[0].concat(this)):new ru(...t.concat(this))}};function nC(e){return vi(e)?JO(e,()=>{}):e}function vf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function e3(e){return typeof e=="boolean"}var t3=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new tN;return n&&(e3(n)?l.push(QL):l.push(ZL(n.extraArgument))),l},n3="RTK_autoBatch",rC=e=>t=>{setTimeout(t,e)},r3=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:rC(10):e.type==="callback"?e.queueNotification:rC(e.timeout),d=()=>{l=!1,s&&(s=!1,u.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const g=()=>i&&h(),y=r.subscribe(g);return u.add(h),()=>{y(),u.delete(h)}},dispatch(h){try{return i=!h?.meta?.[n3],s=!i,s&&(l||(l=!0,p(d))),r.dispatch(h)}finally{i=!0}}})},a3=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new tN(e);return r&&i.push(r3(typeof r=="object"?r:void 0)),i};function i3(e){const t=t3(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(_v(n))u=qO(n);else throw new Error(Ar(1));let p;typeof r=="function"?p=r(t):p=t();let d=Qf;i&&(d=JL({trace:!1,...typeof i=="object"&&i}));const h=zL(...p),g=a3(h);let y=typeof l=="function"?l(g):g();const b=d(...y);return YO(u,s,b)}function nN(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(Ar(28));if(u in t)throw new Error(Ar(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function s3(e){return typeof e=="function"}function o3(e,t){let[n,r,i]=nN(t),s;if(s3(e))s=()=>nC(e());else{const u=nC(e);s=()=>u}function l(u=s(),p){let d=[n[p.type],...r.filter(({matcher:h})=>h(p)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,g)=>{if(g)if(so(h)){const b=g(h,p);return b===void 0?h:b}else{if(vi(h))return JO(h,y=>g(y,p));{const y=g(h,p);if(y===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return h},u)}return l.getInitialState=s,l}var l3="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",c3=(e=21)=>{let t="",n=e;for(;n--;)t+=l3[Math.random()*64|0];return t},u3=Symbol.for("rtk-slice-createasyncthunk");function d3(e,t){return`${e}/${t}`}function f3({creators:e}={}){const t=e?.asyncThunk?.[u3];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(Ar(11));const l=(typeof r.reducers=="function"?r.reducers(h3()):r.reducers)||{},u=Object.keys(l),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(N,j){const M=typeof N=="string"?N:N.type;if(!M)throw new Error(Ar(12));if(M in p.sliceCaseReducersByType)throw new Error(Ar(13));return p.sliceCaseReducersByType[M]=j,d},addMatcher(N,j){return p.sliceMatchers.push({matcher:N,reducer:j}),d},exposeAction(N,j){return p.actionCreators[N]=j,d},exposeCaseReducer(N,j){return p.sliceCaseReducersByName[N]=j,d}};u.forEach(N=>{const j=l[N],M={reducerName:N,type:d3(i,N),createNotation:typeof r.reducers=="function"};g3(j)?v3(M,j,d,t):m3(M,j,d)});function h(){const[N={},j=[],M=void 0]=typeof r.extraReducers=="function"?nN(r.extraReducers):[r.extraReducers],D={...N,...p.sliceCaseReducersByType};return o3(r.initialState,k=>{for(let L in D)k.addCase(L,D[L]);for(let L of p.sliceMatchers)k.addMatcher(L.matcher,L.reducer);for(let L of j)k.addMatcher(L.matcher,L.reducer);M&&k.addDefaultCase(M)})}const g=N=>N,y=new Map,b=new WeakMap;let S;function E(N,j){return S||(S=h()),S(N,j)}function C(){return S||(S=h()),S.getInitialState()}function T(N,j=!1){function M(k){let L=k[N];return typeof L>"u"&&j&&(L=vf(b,M,C)),L}function D(k=g){const L=vf(y,j,()=>new WeakMap);return vf(L,k,()=>{const G={};for(const[K,z]of Object.entries(r.selectors??{}))G[K]=p3(z,k,()=>vf(b,k,C),j);return G})}return{reducerPath:N,getSelectors:D,get selectors(){return D(M)},selectSlice:M}}const O={name:i,reducer:E,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:C,...T(s),injectInto(N,{reducerPath:j,...M}={}){const D=j??s;return N.inject({reducerPath:D,reducer:E},M),{...O,...T(D,!0)}}};return O}}function p3(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var Pr=f3();function h3(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function m3({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!y3(r))throw new Error(Ar(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?Wr(e,l):Wr(e))}function g3(e){return e._reducerDefinitionType==="asyncThunk"}function y3(e){return e._reducerDefinitionType==="reducerWithPrepare"}function v3({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Ar(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:p,settled:d,options:h}=n,g=i(e,s,h);r.exposeAction(t,g),l&&r.addCase(g.fulfilled,l),u&&r.addCase(g.pending,u),p&&r.addCase(g.rejected,p),d&&r.addMatcher(g.settled,d),r.exposeCaseReducer(t,{fulfilled:l||bf,pending:u||bf,rejected:p||bf,settled:d||bf})}function bf(){}var b3="task",rN="listener",aN="completed",Mv="cancelled",x3=`task-${Mv}`,S3=`task-${aN}`,P0=`${rN}-${Mv}`,A3=`${rN}-${aN}`,Lp=class{constructor(e){this.code=e,this.message=`${b3} ${Mv} (reason: ${e})`}name="TaskAbortError";message},jv=(e,t)=>{if(typeof e!="function")throw new TypeError(Ar(32))},tp=()=>{},iN=(e,t=tp)=>(e.catch(t),e),sN=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Js=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},eo=e=>{if(e.aborted){const{reason:t}=e;throw new Lp(t)}};function oN(e,t){let n=tp;return new Promise((r,i)=>{const s=()=>i(new Lp(e.reason));if(e.aborted){s();return}n=sN(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=tp})}var E3=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Lp?"cancelled":"rejected",error:n}}finally{t?.()}},np=e=>t=>iN(oN(e,t).then(n=>(eo(e),n))),lN=e=>{const t=np(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:yl}=Object,aC={},$p="listenerMiddleware",C3=(e,t)=>{const n=r=>sN(e,()=>Js(r,e.reason));return(r,i)=>{jv(r);const s=new AbortController;n(s);const l=E3(async()=>{eo(e),eo(s.signal);const u=await r({pause:np(s.signal),delay:lN(s.signal),signal:s.signal});return eo(s.signal),u},()=>Js(s,S3));return i?.autoJoin&&t.push(l.catch(tp)),{result:np(e)(l),cancel(){Js(s,x3)}}}},T3=(e,t)=>{const n=async(r,i)=>{eo(t);let s=()=>{};const u=[new Promise((p,d)=>{let h=e({predicate:r,effect:(g,y)=>{y.unsubscribe(),p([g,y.getState(),y.getOriginalState()])}});s=()=>{h(),d()}})];i!=null&&u.push(new Promise(p=>setTimeout(p,i,null)));try{const p=await oN(t,Promise.race(u));return eo(t),p}finally{s()}};return(r,i)=>iN(n(r,i))},cN=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Wr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Ar(21));return jv(s),{predicate:i,type:t,effect:s}},uN=yl(e=>{const{type:t,predicate:n,effect:r}=cN(e);return{id:c3(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ar(22))}}},{withTypes:()=>uN}),iC=(e,t)=>{const{type:n,effect:r,predicate:i}=cN(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},w0=e=>{e.pending.forEach(t=>{Js(t,P0)})},P3=e=>()=>{e.forEach(w0),e.clear()},sC=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},dN=yl(Wr(`${$p}/add`),{withTypes:()=>dN}),w3=Wr(`${$p}/removeAll`),fN=yl(Wr(`${$p}/remove`),{withTypes:()=>fN}),O3=(...e)=>{console.error(`${$p}/error`,...e)},Cu=(e={})=>{const t=new Map,{extra:n,onError:r=O3}=e;jv(r);const i=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),g=>{h.unsubscribe(),g?.cancelActive&&w0(h)}),s=h=>{const g=iC(t,h)??uN(h);return i(g)};yl(s,{withTypes:()=>s});const l=h=>{const g=iC(t,h);return g&&(g.unsubscribe(),h.cancelActive&&w0(g)),!!g};yl(l,{withTypes:()=>l});const u=async(h,g,y,b)=>{const S=new AbortController,E=T3(s,S.signal),C=[];try{h.pending.add(S),await Promise.resolve(h.effect(g,yl({},y,{getOriginalState:b,condition:(T,O)=>E(T,O).then(Boolean),take:E,delay:lN(S.signal),pause:np(S.signal),extra:n,signal:S.signal,fork:C3(S.signal,C),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((T,O,N)=>{T!==S&&(Js(T,P0),N.delete(T))})},cancel:()=>{Js(S,P0),h.pending.delete(S)},throwIfCancelled:()=>{eo(S.signal)}})))}catch(T){T instanceof Lp||sC(r,T,{raisedBy:"effect"})}finally{await Promise.all(C),Js(S,A3),h.pending.delete(S)}},p=P3(t);return{middleware:h=>g=>y=>{if(!FO(y))return g(y);if(dN.match(y))return s(y.payload);if(w3.match(y)){p();return}if(fN.match(y))return l(y.payload);let b=h.getState();const S=()=>{if(b===aC)throw new Error(Ar(23));return b};let E;try{if(E=g(y),t.size>0){const C=h.getState(),T=Array.from(t.values());for(const O of T){let N=!1;try{N=O.predicate(y,C,b)}catch(j){N=!1,sC(r,j,{raisedBy:"predicate"})}N&&u(O,y,h,S)}}}finally{b=aC}return E},startListening:s,stopListening:l,clearListeners:p}};function Ar(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var N3={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},pN=Pr({name:"chartLayout",initialState:N3,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:_3,setLayout:D3,setChartSize:k3,setScale:M3}=pN.actions,j3=pN.reducer;function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(n),!0).forEach(function(r){I3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I3(e,t,n){return(t=R3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R3(e){var t=L3(e,"string");return typeof t=="symbol"?t:t+""}function L3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rp=Math.PI/180,$3=e=>e*180/Math.PI,nn=(e,t,n,r)=>({x:e+Math.cos(-rp*r)*n,y:t+Math.sin(-rp*r)*n}),hN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},B3=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},U3=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=B3({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,p=Math.acos(u);return r>s&&(p=2*Math.PI-p),{radius:l,angle:$3(p),angleInRadian:p}},z3=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},G3=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},H3=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=U3({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:p,endAngle:d}=z3(t),h=s,g;if(p<=d){for(;h>d;)h-=360;for(;h<p;)h+=360;g=h>=p&&h<=d}else{for(;h>p;)h-=360;for(;h<d;)h+=360;g=h>=d&&h<=p}return g?lC(lC({},t),{},{radius:i,angle:G3(h,t)}):null};function mN(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function cC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(n),!0).forEach(function(r){Y3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Y3(e,t,n){return(t=q3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q3(e){var t=F3(e,"string");return typeof t=="symbol"?t:t+""}function F3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dt(e,t,n){return An(e)||An(t)?n:ja(t)?io(e,t,n):typeof t=="function"?t(e):n}var V3=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var p=0;p<u;p++){var d=p>0?n[p-1].coordinate:n[u-1].coordinate,h=n[p].coordinate,g=p>=u-1?n[0].coordinate:n[p+1].coordinate,y=void 0;if(Sn(h-d)!==Sn(g-h)){var b=[];if(Sn(g-h)===Sn(i[1]-i[0])){y=g;var S=h+i[1]-i[0];b[0]=Math.min(S,(S+d)/2),b[1]=Math.max(S,(S+d)/2)}else{y=d;var E=g+i[1]-i[0];b[0]=Math.min(h,(E+h)/2),b[1]=Math.max(h,(E+h)/2)}var C=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(e>C[0]&&e<=C[1]||e>=b[0]&&e<=b[1]){({index:l}=n[p]);break}}else{var T=Math.min(d,g),O=Math.max(d,g);if(e>(T+h)/2&&e<=(O+h)/2){({index:l}=n[p]);break}}}else if(t){for(var N=0;N<u;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<u-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===u-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:l}=t[N]);break}}return l},K3=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&_e(e[s]))return Fr(Fr({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&_e(e[l]))return Fr(Fr({},e),{},{[l]:e[l]+(i||0)})}return e},go=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",gN=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},yN=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:p,categoricalDomain:d,tickCount:h,ticks:g,niceTicks:y,axisType:b}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,E=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(E=b==="angleAxis"&&s&&s.length>=2?Sn(s[0]-s[1])*2*E:E,g||y){var C=(g||y||[]).map((T,O)=>{var N=r?r.indexOf(T):T;return{coordinate:l(N)+E,value:T,offset:E,index:O}});return C.filter(T=>!Er(T.coordinate))}return p&&d?d.map((T,O)=>({coordinate:l(T)+E,value:T,index:O,offset:E})):l.ticks&&h!=null?l.ticks(h).map((T,O)=>({coordinate:l(T)+E,value:T,offset:E,index:O})):l.domain().map((T,O)=>({coordinate:l(T)+E,value:r?r[T]:T,index:O,offset:E}))},uC=1e-4,W3=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-uC,s=Math.max(r[0],r[1])+uC,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},X3=(e,t)=>{if(!t||t.length!==2||!_e(t[0])||!_e(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!_e(e[0])||e[0]<n)&&(i[0]=n),(!_e(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},Q3=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=Er(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},Z3=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=Er(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},J3={sign:Q3,expand:OR,none:bl,silhouette:NR,wiggle:_R,positive:Z3},e5=(e,t,n)=>{var r=J3[n],i=wR().keys(t).value((s,l)=>+Dt(s,l,0)).order(y0).offset(r);return i(e)};function t5(e){return e==null?void 0:String(e)}var dC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=Dt(s,t.dataKey,t.scale.domain()[l]);return An(u)?null:t.scale(u)-i/2+r},n5=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},r5=e=>{var t=e.flat(2).filter(_e);return[Math.min(...t),Math.max(...t)]},a5=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],i5=(e,t,n)=>{if(e!=null)return a5(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((p,d)=>{var h=mN(d,t,n),g=r5(h);return[Math.min(p[0],g[0]),Math.max(p[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},fC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Iv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Mp(t,h=>h.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var p=i[l],d=i[l-1];s=Math.min((p.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function hC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return Fr(Fr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function Bp(e,t){if(e)return String(e);if(typeof t=="string")return t}function s5(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?H3({x:e,y:t},r):null}var o5=(e,t,n,r)=>{var i=t.find(d=>d&&d.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return Fr(Fr(Fr({},r),nn(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:p}=r;return Fr(Fr(Fr({},r),nn(r.cx,r.cy,u,p)),{},{angle:p,radius:u})}return{x:0,y:0}},l5=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Ei=e=>e.layout.width,Ci=e=>e.layout.height,c5=e=>e.layout.scale,vN=e=>e.layout.margin,Up=ae(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),zp=ae(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),bN="data-recharts-item-index",xN="data-recharts-item-data-key",Tu=60;function mC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(n),!0).forEach(function(r){u5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u5(e,t,n){return(t=d5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d5(e){var t=f5(e,"string");return typeof t=="symbol"?t:t+""}function f5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p5=e=>e.brush.height;function h5(e){var t=zp(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Tu;return n+i}return n},0)}function m5(e){var t=zp(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Tu;return n+i}return n},0)}function g5(e){var t=Up(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function y5(e){var t=Up(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var dn=ae([Ei,Ci,vN,p5,h5,m5,g5,y5,GO,jL],(e,t,n,r,i,s,l,u,p,d)=>{var h={left:(n.left||0)+i,right:(n.right||0)+s},g={top:(n.top||0)+l,bottom:(n.bottom||0)+u},y=xf(xf({},g),h),b=y.bottom;y.bottom+=r,y=K3(y,p,d);var S=e-y.left-y.right,E=t-y.top-y.bottom;return xf(xf({brushBottom:b},y),{},{width:Math.max(S,0),height:Math.max(E,0)})}),v5=ae(dn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Rv=ae(Ei,Ci,(e,t)=>({x:0,y:0,width:e,height:t})),b5=A.createContext(null),Qr=()=>A.useContext(b5)!=null,Gp=e=>e.brush,Hp=ae([Gp,dn,vN],(e,t,n)=>({height:e.height,x:_e(e.x)?e.x:t.left,y:_e(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:_e(e.width)?e.width:t.width})),Lv=()=>{var e,t=Qr(),n=Oe(v5),r=Oe(Hp),i=(e=Oe(Gp))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},x5={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},SN=()=>{var e;return(e=Oe(dn))!==null&&e!==void 0?e:x5},$v=()=>Oe(Ei),Bv=()=>Oe(Ci),S5=()=>Oe(e=>e.layout.margin),it=e=>e.layout.layoutType,Uv=()=>Oe(it),A5={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},AN=Pr({name:"legend",initialState:A5,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=gi(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:gC,setLegendSettings:E5,addLegendPayload:EN,removeLegendPayload:CN}=AN.actions,C5=AN.reducer,T5=["contextPayload"];function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O0.apply(null,arguments)}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(n),!0).forEach(function(r){zv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zv(e,t,n){return(t=P5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P5(e){var t=w5(e,"string");return typeof t=="symbol"?t:t+""}function w5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O5(e,t){if(e==null)return{};var n,r,i=N5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function N5(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function _5(e){return e.value}function D5(e){var{contextPayload:t}=e,n=O5(e,T5),r=$O(t,e.payloadUniqBy,_5),i=Sl(Sl({},n),{},{payload:r});return A.isValidElement(e.content)?A.cloneElement(e.content,i):typeof e.content=="function"?A.createElement(e.content,i):A.createElement(Pv,i)}function k5(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:p}=t,d,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?d={left:((r||0)-s.width)/2}:d=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(p==="middle"?h={top:((i||0)-s.height)/2}:h=p==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Sl(Sl({},d),h)}function M5(e){var t=Lt();return A.useEffect(()=>{t(E5(e))},[t,e]),null}function j5(e){var t=Lt();return A.useEffect(()=>(t(gC(e)),()=>{t(gC({width:0,height:0}))}),[t,e]),null}function I5(e){var t=LL(),n=QI(),r=S5(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[p,d]=HO([t]),h=$v(),g=Bv();if(h==null||g==null)return null;var y=h-(r.left||0)-(r.right||0),b=Yp.getWidthOrHeight(e.layout,s,i,y),S=u?l:Sl(Sl({position:"absolute",width:b?.width||i||"auto",height:b?.height||s||"auto"},k5(l,e,r,h,g,p)),l),E=u??n;if(E==null)return null;var C=A.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:d},A.createElement(M5,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),A.createElement(j5,{width:p.width,height:p.height}),A.createElement(D5,O0({},e,b,{margin:r,chartWidth:h,chartHeight:g,contextPayload:t})));return dO.createPortal(C,E)}class Yp extends A.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&_e(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return A.createElement(I5,this.props)}}zv(Yp,"displayName","Legend");zv(Yp,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function N0(){return N0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N0.apply(null,arguments)}function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ay(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(n),!0).forEach(function(r){R5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R5(e,t,n){return(t=L5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L5(e){var t=$5(e,"string");return typeof t=="symbol"?t:t+""}function $5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B5(e){return Array.isArray(e)&&ja(e[0])&&ja(e[1])?e.join(" ~ "):e}var U5=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:p,labelClassName:d,label:h,labelFormatter:g,accessibilityLayer:y=!1}=e,b=()=>{if(s&&s.length){var M={padding:0,margin:0},D=(u?Mp(s,u):s).map((k,L)=>{if(k.type==="none")return null;var G=k.formatter||l||B5,{value:K,name:z}=k,Y=K,ie=z;if(G){var Z=G(K,z,k,L,s);if(Array.isArray(Z))[Y,ie]=Z;else if(Z!=null)Y=Z;else return null}var te=Ay({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:te},ja(ie)?A.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,ja(ie)?A.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,A.createElement("span",{className:"recharts-tooltip-item-value"},Y),A.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:M},D)}return null},S=Ay({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),E=Ay({margin:0},i),C=!An(h),T=C?h:"",O=ht("recharts-default-tooltip",p),N=ht("recharts-tooltip-label",d);C&&g&&s!==void 0&&s!==null&&(T=g(h,s));var j=y?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",N0({className:O,style:S},j),A.createElement("p",{className:N,style:E},A.isValidElement(T)?T:"".concat(T)),b())},Kc="recharts-tooltip-wrapper",z5={visibility:"hidden"};function G5(e){var{coordinate:t,translateX:n,translateY:r}=e;return ht(Kc,{["".concat(Kc,"-right")]:_e(n)&&t&&_e(t.x)&&n>=t.x,["".concat(Kc,"-left")]:_e(n)&&t&&_e(t.x)&&n<t.x,["".concat(Kc,"-bottom")]:_e(r)&&t&&_e(t.y)&&r>=t.y,["".concat(Kc,"-top")]:_e(r)&&t&&_e(t.y)&&r<t.y})}function bC(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:p,viewBoxDimension:d}=e;if(s&&_e(s[r]))return s[r];var h=n[r]-u-(i>0?i:0),g=n[r]+i;if(t[r])return l[r]?h:g;var y=p[r];if(y==null)return 0;if(l[r]){var b=h,S=y;return b<S?Math.max(g,y):Math.max(h,y)}if(d==null)return 0;var E=g+u,C=y+d;return E>C?Math.max(h,y):Math.max(g,y)}function H5(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Y5(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:p}=e,d,h,g;return l.height>0&&l.width>0&&n?(h=bC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:p,viewBoxDimension:p.width}),g=bC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:p,viewBoxDimension:p.height}),d=H5({translateX:h,translateY:g,useTranslate3d:u})):d=z5,{cssProperties:d,cssClasses:G5({translateX:h,translateY:g,coordinate:n})}}function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(n),!0).forEach(function(r){_0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _0(e,t,n){return(t=q5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q5(e){var t=F5(e,"string");return typeof t=="symbol"?t:t+""}function F5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class V5 extends A.PureComponent{constructor(){super(...arguments),_0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:p,offset:d,position:h,reverseDirection:g,useTranslate3d:y,viewBox:b,wrapperStyle:S,lastBoundingBox:E,innerRef:C,hasPortalFromProps:T}=this.props,{cssClasses:O,cssProperties:N}=Y5({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:d,position:h,reverseDirection:g,tooltipBox:{height:E.height,width:E.width},useTranslate3d:y,viewBox:b}),j=T?{}:Sf(Sf({transition:p&&t?"transform ".concat(r,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),M=Sf(Sf({},j),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:M,ref:C},s)}}var K5=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Dl={isSsr:K5()},TN=()=>Oe(e=>e.rootProps.accessibilityLayer);function Tr(e){return Number.isFinite(e)}function Al(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function D0(){return D0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D0.apply(null,arguments)}function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(n),!0).forEach(function(r){W5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W5(e,t,n){return(t=X5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X5(e){var t=Q5(e,"string");return typeof t=="symbol"?t:t+""}function Q5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EC={curveBasisClosed:gR,curveBasisOpen:yR,curveBasis:mR,curveBumpX:tR,curveBumpY:nR,curveLinearClosed:vR,curveLinear:Dp,curveMonotoneX:bR,curveMonotoneY:xR,curveNatural:SR,curveStep:AR,curveStepAfter:CR,curveStepBefore:ER},Af=e=>Tr(e.x)&&Tr(e.y),Wc=e=>e.x,Xc=e=>e.y,Z5=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Su(e));return(n==="curveMonotone"||n==="curveBump")&&t?EC["".concat(n).concat(t==="vertical"?"Y":"X")]:EC[n]||Dp},J5=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=Z5(t,i),u=s?n.filter(Af):n,p;if(Array.isArray(r)){var d=s?r.filter(g=>Af(g)):r,h=u.map((g,y)=>AC(AC({},g),{},{base:d[y]}));return i==="vertical"?p=hf().y(Xc).x1(Wc).x0(g=>g.base.x):p=hf().x(Wc).y1(Xc).y0(g=>g.base.y),p.defined(Af).curve(l),p(h)}return i==="vertical"&&_e(r)?p=hf().y(Xc).x1(Wc).x0(r):_e(r)?p=hf().x(Wc).y1(Xc).y0(r):p=vO().x(Wc).y(Xc),p.defined(Af).curve(l),p(u)},PN=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?J5(e):r;return A.createElement("path",D0({},mo(e),zI(e),{className:ht("recharts-curve",t),d:s===null?void 0:s,ref:i}))},e4=["x","y","top","left","width","height","className"];function k0(){return k0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k0.apply(null,arguments)}function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function t4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(n),!0).forEach(function(r){n4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n4(e,t,n){return(t=r4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r4(e){var t=a4(e,"string");return typeof t=="symbol"?t:t+""}function a4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i4(e,t){if(e==null)return{};var n,r,i=s4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var o4=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),l4=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,p=i4(e,e4),d=t4({x:t,y:n,top:r,left:i,width:s,height:l},p);return!_e(t)||!_e(n)||!_e(s)||!_e(l)||!_e(r)||!_e(i)?null:A.createElement("path",k0({},tn(d,!0),{className:ht("recharts-cross",u),d:o4(t,n,s,l,r,i)}))};function c4(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function TC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function u4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(n),!0).forEach(function(r){d4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d4(e,t,n){return(t=f4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f4(e){var t=p4(e,"string");return typeof t=="symbol"?t:t+""}function p4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zr(e,t){var n=u4({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function h4(){}function PC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(n),!0).forEach(function(r){m4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m4(e,t,n){return(t=g4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g4(e){var t=y4(e,"string");return typeof t=="symbol"?t:t+""}function y4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v4=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),wN=(e,t,n)=>e.map(r=>"".concat(v4(r)," ").concat(t,"ms ").concat(n)).join(","),b4=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),hu=(e,t)=>Object.keys(t).reduce((n,r)=>wC(wC({},n),{},{[r]:e(r,t[r])}),{});function OC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(n),!0).forEach(function(r){x4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function x4(e,t,n){return(t=S4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S4(e){var t=A4(e,"string");return typeof t=="symbol"?t:t+""}function A4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ap=(e,t,n)=>e+(t-e)*n,M0=e=>{var{from:t,to:n}=e;return t!==n},ON=(e,t,n)=>{var r=hu((i,s)=>{if(M0(s)){var[l,u]=e(s.from,s.to,s.velocity);return _n(_n({},s),{},{from:l,velocity:u})}return s},t);return n<1?hu((i,s)=>M0(s)?_n(_n({},s),{},{velocity:ap(s.velocity,r[i].velocity,n),from:ap(s.from,r[i].from,n)}):s,t):ON(e,r,n-1)};function E4(e,t,n,r,i,s){var l,u=r.reduce((y,b)=>_n(_n({},y),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),p=()=>hu((y,b)=>b.from,u),d=()=>!Object.values(u).filter(M0).length,h=null,g=y=>{l||(l=y);var b=y-l,S=b/n.dt;u=ON(n,u,S),i(_n(_n(_n({},e),t),p())),l=y,d()||(h=s.setTimeout(g))};return()=>(h=s.setTimeout(g),()=>{h()})}function C4(e,t,n,r,i,s,l){var u=null,p=i.reduce((g,y)=>_n(_n({},g),{},{[y]:[e[y],t[y]]}),{}),d,h=g=>{d||(d=g);var y=(g-d)/r,b=hu((E,C)=>ap(...C,n(y)),p);if(s(_n(_n(_n({},e),t),b)),y<1)u=l.setTimeout(h);else{var S=hu((E,C)=>ap(...C,n(1)),p);s(_n(_n(_n({},e),t),S))}};return()=>(u=l.setTimeout(h),()=>{u()})}const T4=(e,t,n,r,i,s)=>{var l=b4(e,t);return n.isStepper===!0?E4(e,t,n,l,i,s):C4(e,t,n,r,l,i,s)};var ip=1e-4,NN=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],_N=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),NC=(e,t)=>n=>{var r=NN(e,t);return _N(r,n)},P4=(e,t)=>n=>{var r=NN(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return _N(i,n)},_C=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var p=l[0].split("(");p[0]==="cubic-bezier"&&p[1].split(")")[0].split(",").length===4&&([t,r,n,i]=p[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var d=NC(t,n),h=NC(r,i),g=P4(t,n),y=S=>S>1?1:S<0?0:S,b=S=>{for(var E=S>1?1:S,C=E,T=0;T<8;++T){var O=d(C)-E,N=g(C);if(Math.abs(O-E)<ip||N<ip)return h(C);C=y(C-O/N)}return h(C)};return b.isStepper=!1,b},w4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,p)=>{var d=-(l-u)*n,h=p*r,g=p+(d-h)*i/1e3,y=p*i/1e3+l;return Math.abs(y-u)<ip&&Math.abs(g)<ip?[u,0]:[y,g]};return s.isStepper=!0,s.dt=i,s},O4=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _C(e);case"spring":return w4();default:if(e.split("(")[0]==="cubic-bezier")return _C(e)}return typeof e=="function"?e:null};function N4(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[p,...d]=u;if(typeof p=="number"){i=e.setTimeout(s.bind(null,d),p);return}s(p),i=e.setTimeout(s.bind(null,d));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class _4{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function D4(){return N4(new _4)}var k4=A.createContext(D4);function M4(e,t){var n=A.useContext(k4);return A.useMemo(()=>t??n(e),[e,t,n])}var j4={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},DC={t:0},Ey={t:1};function qp(e){var t=Zr(e,j4),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:p,children:d}=t,h=M4(t.animationId,t.animationManager),[g,y]=A.useState(n?DC:Ey),b=A.useRef(null);return A.useEffect(()=>{n||y(Ey)},[n]),A.useEffect(()=>{if(!n||!r)return h4;var S=T4(DC,Ey,O4(s),i,y,h.getTimeoutController()),E=()=>{b.current=S()};return h.start([p,l,E,i,u]),()=>{h.stop(),b.current&&b.current(),u()}},[n,r,i,s,l,p,u,h]),d(g.t)}function Fp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(du(t)),r=A.useRef(e);return r.current!==e&&(n.current=du(t),r.current=e),n.current}function kC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function MC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(n),!0).forEach(function(r){I4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I4(e,t,n){return(t=R4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R4(e){var t=L4(e,"string");return typeof t=="symbol"?t:t+""}function L4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sp(){return sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sp.apply(null,arguments)}var jC=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,p=r>=0&&n>=0||r<0&&n<0?1:0,d;if(s>0&&i instanceof Array){for(var h=[0,0,0,0],g=0,y=4;g<y;g++)h[g]=i[g]>s?s:i[g];d="M".concat(e,",").concat(t+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(p,",").concat(e+u*h[0],",").concat(t)),d+="L ".concat(e+n-u*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(p,`,
        `).concat(e+n,",").concat(t+l*h[1])),d+="L ".concat(e+n,",").concat(t+r-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(p,`,
        `).concat(e+n-u*h[2],",").concat(t+r)),d+="L ".concat(e+u*h[3],",").concat(t+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(p,`,
        `).concat(e,",").concat(t+r-l*h[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var b=Math.min(s,i);d="M ".concat(e,",").concat(t+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+u*b,",").concat(t,`
            L `).concat(e+n-u*b,",").concat(t,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+n,",").concat(t+l*b,`
            L `).concat(e+n,",").concat(t+r-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e+n-u*b,",").concat(t+r,`
            L `).concat(e+u*b,",").concat(t+r,`
            A `).concat(b,",").concat(b,",0,0,").concat(p,",").concat(e,",").concat(t+r-l*b," Z")}else d="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},$4={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DN=e=>{var t=Zr(e,$4),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Z=n.current.getTotalLength();Z&&i(Z)}catch{}},[]);var{x:s,y:l,width:u,height:p,radius:d,className:h}=t,{animationEasing:g,animationDuration:y,animationBegin:b,isAnimationActive:S,isUpdateAnimationActive:E}=t,C=A.useRef(u),T=A.useRef(p),O=A.useRef(s),N=A.useRef(l),j=A.useMemo(()=>({x:s,y:l,width:u,height:p,radius:d}),[s,l,u,p,d]),M=Fp(j,"rectangle-");if(s!==+s||l!==+l||u!==+u||p!==+p||u===0||p===0)return null;var D=ht("recharts-rectangle",h);if(!E)return A.createElement("path",sp({},tn(t,!0),{className:D,d:jC(s,l,u,p,d)}));var k=C.current,L=T.current,G=O.current,K=N.current,z="0px ".concat(r===-1?1:r,"px"),Y="".concat(r,"px 0px"),ie=wN(["strokeDasharray"],y,typeof g=="string"?g:void 0);return A.createElement(qp,{animationId:M,key:M,canBegin:r>0,duration:y,easing:g,isActive:E,begin:b},Z=>{var te=Dn(k,u,Z),U=Dn(L,p,Z),q=Dn(G,s,Z),Q=Dn(K,l,Z);n.current&&(C.current=te,T.current=U,O.current=q,N.current=Q);var Se;return S?Z>0?Se={transition:ie,strokeDasharray:Y}:Se={strokeDasharray:z}:Se={strokeDasharray:Y},A.createElement("path",sp({},tn(t,!0),{className:D,d:jC(q,Q,te,U,d),ref:n,style:MC(MC({},Se),t.style)}))})};function kN(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=nn(t,n,r,i),u=nn(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j0.apply(null,arguments)}var B4=(e,t)=>{var n=Sn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Ef=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:p}=e,d=u*(l?1:-1)+r,h=Math.asin(u/d)/rp,g=p?i:i+s*h,y=nn(t,n,d,g),b=nn(t,n,r,g),S=p?i-s*h:i,E=nn(t,n,d*Math.cos(h*rp),S);return{center:y,circleTangency:b,lineTangency:E,theta:h}},MN=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=B4(s,l),p=s+u,d=nn(t,n,i,s),h=nn(t,n,i,p),g="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>p),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var y=nn(t,n,r,s),b=nn(t,n,r,p);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=p),`,
            `).concat(y.x,",").concat(y.y," Z")}else g+="L ".concat(t,",").concat(n," Z");return g},U4=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:p,endAngle:d}=e,h=Sn(d-p),{circleTangency:g,lineTangency:y,theta:b}=Ef({cx:t,cy:n,radius:i,angle:p,sign:h,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:E,theta:C}=Ef({cx:t,cy:n,radius:i,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:u}),T=u?Math.abs(p-d):Math.abs(p-d)-b-C;if(T<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):MN({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:p,endAngle:d});var O="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(E.x,",").concat(E.y,`
  `);if(r>0){var{circleTangency:N,lineTangency:j,theta:M}=Ef({cx:t,cy:n,radius:r,angle:p,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:D,lineTangency:k,theta:L}=Ef({cx:t,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),G=u?Math.abs(p-d):Math.abs(p-d)-M-L;if(G<0&&s===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(G>180),",").concat(+(h>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(j.x,",").concat(j.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},z4={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},jN=e=>{var t=Zr(e,z4),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:p,startAngle:d,endAngle:h,className:g}=t;if(s<i||d===h)return null;var y=ht("recharts-sector",g),b=s-i,S=Hn(l,b,0,!0),E;return S>0&&Math.abs(d-h)<360?E=U4({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,b/2),forceCornerRadius:u,cornerIsExternal:p,startAngle:d,endAngle:h}):E=MN({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:d,endAngle:h}),A.createElement("path",j0({},tn(t,!0),{className:y,d:E}))};function G4(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:p,innerRadius:d,outerRadius:h,angle:g}=t,y=nn(u,p,d,g),b=nn(u,p,h,g);r=y.x,i=y.y,s=b.x,l=b.y}else return kN(t);return[{x:r,y:i},{x:s,y:l}]}var Cy={},Ty={},Py={},IC;function H4(){return IC||(IC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UO();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(Py)),Py}var RC;function Y4(){return RC||(RC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H4();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(Ty)),Ty}var LC;function q4(){return LC||(LC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zO(),n=Y4();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),p=new Array(u);for(let d=0;d<u;d++)p[d]=i,i+=l;return p}e.range=r})(Cy)),Cy}var wy,$C;function F4(){return $C||($C=1,wy=q4().range),wy}var V4=F4();const IN=ua(V4);function os(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function K4(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gv(e){let t,n,r;e.length!==2?(t=os,n=(u,p)=>os(e(u),p),r=(u,p)=>e(u)-p):(t=e===os||e===K4?e:W4,n=e,r=e);function i(u,p,d=0,h=u.length){if(d<h){if(t(p,p)!==0)return h;do{const g=d+h>>>1;n(u[g],p)<0?d=g+1:h=g}while(d<h)}return d}function s(u,p,d=0,h=u.length){if(d<h){if(t(p,p)!==0)return h;do{const g=d+h>>>1;n(u[g],p)<=0?d=g+1:h=g}while(d<h)}return d}function l(u,p,d=0,h=u.length){const g=i(u,p,d,h-1);return g>d&&r(u[g-1],p)>-r(u[g],p)?g-1:g}return{left:i,center:l,right:s}}function W4(){return 0}function RN(e){return e===null?NaN:+e}function*X4(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Q4=Gv(os),Pu=Q4.right;Gv(RN).center;class BC extends Map{constructor(t,n=e$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(UC(this,t))}has(t){return super.has(UC(this,t))}set(t,n){return super.set(Z4(this,t),n)}delete(t){return super.delete(J4(this,t))}}function UC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Z4({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function J4({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function e$(e){return e!==null&&typeof e=="object"?e.valueOf():e}function t$(e=os){if(e===os)return LN;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function LN(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const n$=Math.sqrt(50),r$=Math.sqrt(10),a$=Math.sqrt(2);function op(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=n$?10:s>=r$?5:s>=a$?2:1;let u,p,d;return i<0?(d=Math.pow(10,-i)/l,u=Math.round(e*d),p=Math.round(t*d),u/d<e&&++u,p/d>t&&--p,d=-d):(d=Math.pow(10,i)*l,u=Math.round(e/d),p=Math.round(t/d),u*d<e&&++u,p*d>t&&--p),p<u&&.5<=n&&n<2?op(e,t,n*2):[u,p,d]}function I0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?op(t,e,n):op(e,t,n);if(!(s>=i))return[];const u=s-i+1,p=new Array(u);if(r)if(l<0)for(let d=0;d<u;++d)p[d]=(s-d)/-l;else for(let d=0;d<u;++d)p[d]=(s-d)*l;else if(l<0)for(let d=0;d<u;++d)p[d]=(i+d)/-l;else for(let d=0;d<u;++d)p[d]=(i+d)*l;return p}function R0(e,t,n){return t=+t,e=+e,n=+n,op(e,t,n)[2]}function L0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?R0(t,e,n):R0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function zC(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function GC(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function $N(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?LN:t$(i);r>n;){if(r-n>600){const p=r-n+1,d=t-n+1,h=Math.log(p),g=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*g*(p-g)/p)*(d-p/2<0?-1:1),b=Math.max(n,Math.floor(t-d*g/p+y)),S=Math.min(r,Math.floor(t+(p-d)*g/p+y));$N(e,t,b,S,i)}const s=e[t];let l=n,u=r;for(Qc(e,n,t),i(e[r],s)>0&&Qc(e,n,r);l<u;){for(Qc(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?Qc(e,n,u):(++u,Qc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Qc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function i$(e,t,n){if(e=Float64Array.from(X4(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return GC(e);if(t>=1)return zC(e);var r,i=(r-1)*t,s=Math.floor(i),l=zC($N(e,s).subarray(0,s+1)),u=GC(e.subarray(s+1));return l+(u-l)*(i-s)}}function s$(e,t,n=RN){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function o$(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Jr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ti(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $0=Symbol("implicit");function Hv(){var e=new BC,t=[],n=[],r=$0;function i(s){let l=e.get(s);if(l===void 0){if(r!==$0)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new BC;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Hv(t,n).unknown(r)},Jr.apply(i,arguments),i}function Yv(){var e=Hv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,p=0,d=0,h=.5;delete e.unknown;function g(){var y=t().length,b=i<r,S=b?i:r,E=b?r:i;s=(E-S)/Math.max(1,y-p+d*2),u&&(s=Math.floor(s)),S+=(E-S-s*(y-p))*h,l=s*(1-p),u&&(S=Math.round(S),l=Math.round(l));var C=o$(y).map(function(T){return S+s*T});return n(b?C.reverse():C)}return e.domain=function(y){return arguments.length?(t(y),g()):t()},e.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,g()):[r,i]},e.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,u=!0,g()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(y){return arguments.length?(u=!!y,g()):u},e.padding=function(y){return arguments.length?(p=Math.min(1,d=+y),g()):p},e.paddingInner=function(y){return arguments.length?(p=Math.min(1,y),g()):p},e.paddingOuter=function(y){return arguments.length?(d=+y,g()):d},e.align=function(y){return arguments.length?(h=Math.max(0,Math.min(1,y)),g()):h},e.copy=function(){return Yv(t(),[r,i]).round(u).paddingInner(p).paddingOuter(d).align(h)},Jr.apply(g(),arguments)}function BN(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return BN(t())},e}function l$(){return BN(Yv.apply(null,arguments).paddingInner(1))}function qv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function UN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function wu(){}var mu=.7,lp=1/mu,vl="\\s*([+-]?\\d+)\\s*",gu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ma="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c$=/^#([0-9a-f]{3,8})$/,u$=new RegExp(`^rgb\\(${vl},${vl},${vl}\\)$`),d$=new RegExp(`^rgb\\(${Ma},${Ma},${Ma}\\)$`),f$=new RegExp(`^rgba\\(${vl},${vl},${vl},${gu}\\)$`),p$=new RegExp(`^rgba\\(${Ma},${Ma},${Ma},${gu}\\)$`),h$=new RegExp(`^hsl\\(${gu},${Ma},${Ma}\\)$`),m$=new RegExp(`^hsla\\(${gu},${Ma},${Ma},${gu}\\)$`),HC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qv(wu,yu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:YC,formatHex:YC,formatHex8:g$,formatHsl:y$,formatRgb:qC,toString:qC});function YC(){return this.rgb().formatHex()}function g$(){return this.rgb().formatHex8()}function y$(){return zN(this).formatHsl()}function qC(){return this.rgb().formatRgb()}function yu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=c$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?FC(t):n===3?new or(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Cf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Cf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=u$.exec(e))?new or(t[1],t[2],t[3],1):(t=d$.exec(e))?new or(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=f$.exec(e))?Cf(t[1],t[2],t[3],t[4]):(t=p$.exec(e))?Cf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=h$.exec(e))?WC(t[1],t[2]/100,t[3]/100,1):(t=m$.exec(e))?WC(t[1],t[2]/100,t[3]/100,t[4]):HC.hasOwnProperty(e)?FC(HC[e]):e==="transparent"?new or(NaN,NaN,NaN,0):null}function FC(e){return new or(e>>16&255,e>>8&255,e&255,1)}function Cf(e,t,n,r){return r<=0&&(e=t=n=NaN),new or(e,t,n,r)}function v$(e){return e instanceof wu||(e=yu(e)),e?(e=e.rgb(),new or(e.r,e.g,e.b,e.opacity)):new or}function B0(e,t,n,r){return arguments.length===1?v$(e):new or(e,t,n,r??1)}function or(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}qv(or,B0,UN(wu,{brighter(e){return e=e==null?lp:Math.pow(lp,e),new or(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mu:Math.pow(mu,e),new or(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new or(to(this.r),to(this.g),to(this.b),cp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VC,formatHex:VC,formatHex8:b$,formatRgb:KC,toString:KC}));function VC(){return`#${Xs(this.r)}${Xs(this.g)}${Xs(this.b)}`}function b$(){return`#${Xs(this.r)}${Xs(this.g)}${Xs(this.b)}${Xs((isNaN(this.opacity)?1:this.opacity)*255)}`}function KC(){const e=cp(this.opacity);return`${e===1?"rgb(":"rgba("}${to(this.r)}, ${to(this.g)}, ${to(this.b)}${e===1?")":`, ${e})`}`}function cp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function to(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xs(e){return e=to(e),(e<16?"0":"")+e.toString(16)}function WC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ca(e,t,n,r)}function zN(e){if(e instanceof ca)return new ca(e.h,e.s,e.l,e.opacity);if(e instanceof wu||(e=yu(e)),!e)return new ca;if(e instanceof ca)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,p=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=p<.5?s+i:2-s-i,l*=60):u=p>0&&p<1?0:l,new ca(l,u,p,e.opacity)}function x$(e,t,n,r){return arguments.length===1?zN(e):new ca(e,t,n,r??1)}function ca(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}qv(ca,x$,UN(wu,{brighter(e){return e=e==null?lp:Math.pow(lp,e),new ca(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mu:Math.pow(mu,e),new ca(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new or(Oy(e>=240?e-240:e+120,i,r),Oy(e,i,r),Oy(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ca(XC(this.h),Tf(this.s),Tf(this.l),cp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cp(this.opacity);return`${e===1?"hsl(":"hsla("}${XC(this.h)}, ${Tf(this.s)*100}%, ${Tf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function XC(e){return e=(e||0)%360,e<0?e+360:e}function Tf(e){return Math.max(0,Math.min(1,e||0))}function Oy(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fv=e=>()=>e;function S$(e,t){return function(n){return e+n*t}}function A$(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function E$(e){return(e=+e)==1?GN:function(t,n){return n-t?A$(t,n,e):Fv(isNaN(t)?n:t)}}function GN(e,t){var n=t-e;return n?S$(e,n):Fv(isNaN(e)?t:e)}const QC=(function e(t){var n=E$(t);function r(i,s){var l=n((i=B0(i)).r,(s=B0(s)).r),u=n(i.g,s.g),p=n(i.b,s.b),d=GN(i.opacity,s.opacity);return function(h){return i.r=l(h),i.g=u(h),i.b=p(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function C$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function T$(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function P$(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=kl(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function w$(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function up(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function O$(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=kl(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var U0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ny=new RegExp(U0.source,"g");function N$(e){return function(){return e}}function _$(e){return function(t){return e(t)+""}}function D$(e,t){var n=U0.lastIndex=Ny.lastIndex=0,r,i,s,l=-1,u=[],p=[];for(e=e+"",t=t+"";(r=U0.exec(e))&&(i=Ny.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,p.push({i:l,x:up(r,i)})),n=Ny.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?p[0]?_$(p[0].x):N$(t):(t=p.length,function(d){for(var h=0,g;h<t;++h)u[(g=p[h]).i]=g.x(d);return u.join("")})}function kl(e,t){var n=typeof t,r;return t==null||n==="boolean"?Fv(t):(n==="number"?up:n==="string"?(r=yu(t))?(t=r,QC):D$:t instanceof yu?QC:t instanceof Date?w$:T$(t)?C$:Array.isArray(t)?P$:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?O$:up)(e,t)}function Vv(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function k$(e,t){t===void 0&&(t=e,e=kl);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function M$(e){return function(){return e}}function dp(e){return+e}var ZC=[0,1];function Xn(e){return e}function z0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:M$(isNaN(t)?NaN:.5)}function j$(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function I$(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=z0(i,r),s=n(l,s)):(r=z0(r,i),s=n(s,l)),function(u){return s(r(u))}}function R$(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=z0(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var p=Pu(e,u,1,r)-1;return s[p](i[p](u))}}function Ou(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vp(){var e=ZC,t=ZC,n=kl,r,i,s,l=Xn,u,p,d;function h(){var y=Math.min(e.length,t.length);return l!==Xn&&(l=j$(e[0],e[y-1])),u=y>2?R$:I$,p=d=null,g}function g(y){return y==null||isNaN(y=+y)?s:(p||(p=u(e.map(r),t,n)))(r(l(y)))}return g.invert=function(y){return l(i((d||(d=u(t,e.map(r),up)))(y)))},g.domain=function(y){return arguments.length?(e=Array.from(y,dp),h()):e.slice()},g.range=function(y){return arguments.length?(t=Array.from(y),h()):t.slice()},g.rangeRound=function(y){return t=Array.from(y),n=Vv,h()},g.clamp=function(y){return arguments.length?(l=y?!0:Xn,h()):l!==Xn},g.interpolate=function(y){return arguments.length?(n=y,h()):n},g.unknown=function(y){return arguments.length?(s=y,g):s},function(y,b){return r=y,i=b,h()}}function Kv(){return Vp()(Xn,Xn)}function L$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function El(e){return e=fp(Math.abs(e)),e?e[1]:NaN}function $$(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],p=0;i>0&&u>0&&(p+u+1>r&&(u=Math.max(1,r-p)),s.push(n.substring(i-=u,i+u)),!((p+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function B$(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var U$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vu(e){if(!(t=U$.exec(e)))throw new Error("invalid format: "+e);var t;return new Wv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vu.prototype=Wv.prototype;function Wv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Wv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function z$(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var HN;function G$(e,t){var n=fp(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(HN=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+fp(e,Math.max(0,t+s-1))[0]}function JC(e,t){var n=fp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const eT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:L$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>JC(e*100,t),r:JC,s:G$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function tT(e){return e}var nT=Array.prototype.map,rT=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function H$(e){var t=e.grouping===void 0||e.thousands===void 0?tT:$$(nT.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?tT:B$(nT.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function d(g){g=vu(g);var y=g.fill,b=g.align,S=g.sign,E=g.symbol,C=g.zero,T=g.width,O=g.comma,N=g.precision,j=g.trim,M=g.type;M==="n"?(O=!0,M="g"):eT[M]||(N===void 0&&(N=12),j=!0,M="g"),(C||y==="0"&&b==="=")&&(C=!0,y="0",b="=");var D=E==="$"?n:E==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",k=E==="$"?r:/[%p]/.test(M)?l:"",L=eT[M],G=/[defgprs%]/.test(M);N=N===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function K(z){var Y=D,ie=k,Z,te,U;if(M==="c")ie=L(z)+ie,z="";else{z=+z;var q=z<0||1/z<0;if(z=isNaN(z)?p:L(Math.abs(z),N),j&&(z=z$(z)),q&&+z==0&&S!=="+"&&(q=!1),Y=(q?S==="("?S:u:S==="-"||S==="("?"":S)+Y,ie=(M==="s"?rT[8+HN/3]:"")+ie+(q&&S==="("?")":""),G){for(Z=-1,te=z.length;++Z<te;)if(U=z.charCodeAt(Z),48>U||U>57){ie=(U===46?i+z.slice(Z+1):z.slice(Z))+ie,z=z.slice(0,Z);break}}}O&&!C&&(z=t(z,1/0));var Q=Y.length+z.length+ie.length,Se=Q<T?new Array(T-Q+1).join(y):"";switch(O&&C&&(z=t(Se+z,Se.length?T-ie.length:1/0),Se=""),b){case"<":z=Y+z+ie+Se;break;case"=":z=Y+Se+z+ie;break;case"^":z=Se.slice(0,Q=Se.length>>1)+Y+z+ie+Se.slice(Q);break;default:z=Se+Y+z+ie;break}return s(z)}return K.toString=function(){return g+""},K}function h(g,y){var b=d((g=vu(g),g.type="f",g)),S=Math.max(-8,Math.min(8,Math.floor(El(y)/3)))*3,E=Math.pow(10,-S),C=rT[8+S/3];return function(T){return b(E*T)+C}}return{format:d,formatPrefix:h}}var Pf,Xv,YN;Y$({thousands:",",grouping:[3],currency:["$",""]});function Y$(e){return Pf=H$(e),Xv=Pf.format,YN=Pf.formatPrefix,Pf}function q$(e){return Math.max(0,-El(Math.abs(e)))}function F$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(El(t)/3)))*3-El(Math.abs(e)))}function V$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,El(t)-El(e))+1}function qN(e,t,n,r){var i=L0(e,t,n),s;switch(r=vu(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=F$(i,l))&&(r.precision=s),YN(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=V$(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=q$(i))&&(r.precision=s-(r.type==="%")*2);break}}return Xv(r)}function fs(e){var t=e.domain;return e.ticks=function(n){var r=t();return I0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return qN(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],p,d,h=10;for(u<l&&(d=l,l=u,u=d,d=i,i=s,s=d);h-- >0;){if(d=R0(l,u,n),d===p)return r[i]=l,r[s]=u,t(r);if(d>0)l=Math.floor(l/d)*d,u=Math.ceil(u/d)*d;else if(d<0)l=Math.ceil(l*d)/d,u=Math.floor(u*d)/d;else break;p=d}return e},e}function FN(){var e=Kv();return e.copy=function(){return Ou(e,FN())},Jr.apply(e,arguments),fs(e)}function VN(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,dp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return VN(e).unknown(t)},e=arguments.length?Array.from(e,dp):[0,1],fs(n)}function KN(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function aT(e){return Math.log(e)}function iT(e){return Math.exp(e)}function K$(e){return-Math.log(-e)}function W$(e){return-Math.exp(-e)}function X$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Q$(e){return e===10?X$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Z$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function sT(e){return(t,n)=>-e(-t,n)}function Qv(e){const t=e(aT,iT),n=t.domain;let r=10,i,s;function l(){return i=Z$(r),s=Q$(r),n()[0]<0?(i=sT(i),s=sT(s),e(K$,W$)):e(aT,iT),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const p=n();let d=p[0],h=p[p.length-1];const g=h<d;g&&([d,h]=[h,d]);let y=i(d),b=i(h),S,E;const C=u==null?10:+u;let T=[];if(!(r%1)&&b-y<C){if(y=Math.floor(y),b=Math.ceil(b),d>0){for(;y<=b;++y)for(S=1;S<r;++S)if(E=y<0?S/s(-y):S*s(y),!(E<d)){if(E>h)break;T.push(E)}}else for(;y<=b;++y)for(S=r-1;S>=1;--S)if(E=y>0?S/s(-y):S*s(y),!(E<d)){if(E>h)break;T.push(E)}T.length*2<C&&(T=I0(d,h,C))}else T=I0(y,b,Math.min(b-y,C)).map(s);return g?T.reverse():T},t.tickFormat=(u,p)=>{if(u==null&&(u=10),p==null&&(p=r===10?"s":","),typeof p!="function"&&(!(r%1)&&(p=vu(p)).precision==null&&(p.trim=!0),p=Xv(p)),u===1/0)return p;const d=Math.max(1,r*u/t.ticks().length);return h=>{let g=h/s(Math.round(i(h)));return g*r<r-.5&&(g*=r),g<=d?p(h):""}},t.nice=()=>n(KN(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function WN(){const e=Qv(Vp()).domain([1,10]);return e.copy=()=>Ou(e,WN()).base(e.base()),Jr.apply(e,arguments),e}function oT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Zv(e){var t=1,n=e(oT(t),lT(t));return n.constant=function(r){return arguments.length?e(oT(t=+r),lT(t)):t},fs(n)}function XN(){var e=Zv(Vp());return e.copy=function(){return Ou(e,XN()).constant(e.constant())},Jr.apply(e,arguments)}function cT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function J$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function e8(e){return e<0?-e*e:e*e}function Jv(e){var t=e(Xn,Xn),n=1;function r(){return n===1?e(Xn,Xn):n===.5?e(J$,e8):e(cT(n),cT(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},fs(t)}function eb(){var e=Jv(Vp());return e.copy=function(){return Ou(e,eb()).exponent(e.exponent())},Jr.apply(e,arguments),e}function t8(){return eb.apply(null,arguments).exponent(.5)}function uT(e){return Math.sign(e)*e*e}function n8(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function QN(){var e=Kv(),t=[0,1],n=!1,r;function i(s){var l=n8(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(uT(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,dp)).map(uT)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return QN(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Jr.apply(i,arguments),fs(i)}function ZN(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=s$(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[Pu(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(os),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return ZN().domain(e).range(t).unknown(r)},Jr.apply(s,arguments)}function JN(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(p){return p!=null&&p<=p?i[Pu(r,p,0,n)]:s}function u(){var p=-1;for(r=new Array(n);++p<n;)r[p]=((p+1)*t-(p-n)*e)/(n+1);return l}return l.domain=function(p){return arguments.length?([e,t]=p,e=+e,t=+t,u()):[e,t]},l.range=function(p){return arguments.length?(n=(i=Array.from(p)).length-1,u()):i.slice()},l.invertExtent=function(p){var d=i.indexOf(p);return d<0?[NaN,NaN]:d<1?[e,r[0]]:d>=n?[r[n-1],t]:[r[d-1],r[d]]},l.unknown=function(p){return arguments.length&&(s=p),l},l.thresholds=function(){return r.slice()},l.copy=function(){return JN().domain([e,t]).range(i).unknown(s)},Jr.apply(fs(l),arguments)}function e_(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Pu(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return e_().domain(e).range(t).unknown(n)},Jr.apply(i,arguments)}const _y=new Date,Dy=new Date;function fn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const p=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return p;let d;do p.push(d=new Date(+s)),t(s,u),e(s);while(d<s&&s<l);return p},i.filter=s=>fn(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(_y.setTime(+s),Dy.setTime(+l),e(_y),e(Dy),Math.floor(n(_y,Dy))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const pp=fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):pp);pp.range;const hi=1e3,Vr=hi*60,mi=Vr*60,bi=mi*24,tb=bi*7,dT=bi*30,ky=bi*365,Qs=fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getUTCSeconds());Qs.range;const nb=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*hi)},(e,t)=>{e.setTime(+e+t*Vr)},(e,t)=>(t-e)/Vr,e=>e.getMinutes());nb.range;const rb=fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Vr)},(e,t)=>(t-e)/Vr,e=>e.getUTCMinutes());rb.range;const ab=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*hi-e.getMinutes()*Vr)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getHours());ab.range;const ib=fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getUTCHours());ib.range;const Nu=fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Vr)/bi,e=>e.getDate()-1);Nu.range;const Kp=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bi,e=>e.getUTCDate()-1);Kp.range;const t_=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bi,e=>Math.floor(e/bi));t_.range;function yo(e){return fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Vr)/tb)}const Wp=yo(0),hp=yo(1),r8=yo(2),a8=yo(3),Cl=yo(4),i8=yo(5),s8=yo(6);Wp.range;hp.range;r8.range;a8.range;Cl.range;i8.range;s8.range;function vo(e){return fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/tb)}const Xp=vo(0),mp=vo(1),o8=vo(2),l8=vo(3),Tl=vo(4),c8=vo(5),u8=vo(6);Xp.range;mp.range;o8.range;l8.range;Tl.range;c8.range;u8.range;const sb=fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());sb.range;const ob=fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ob.range;const xi=fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());xi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});xi.range;const Si=fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Si.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Si.range;function n_(e,t,n,r,i,s){const l=[[Qs,1,hi],[Qs,5,5*hi],[Qs,15,15*hi],[Qs,30,30*hi],[s,1,Vr],[s,5,5*Vr],[s,15,15*Vr],[s,30,30*Vr],[i,1,mi],[i,3,3*mi],[i,6,6*mi],[i,12,12*mi],[r,1,bi],[r,2,2*bi],[n,1,tb],[t,1,dT],[t,3,3*dT],[e,1,ky]];function u(d,h,g){const y=h<d;y&&([d,h]=[h,d]);const b=g&&typeof g.range=="function"?g:p(d,h,g),S=b?b.range(d,+h+1):[];return y?S.reverse():S}function p(d,h,g){const y=Math.abs(h-d)/g,b=Gv(([,,C])=>C).right(l,y);if(b===l.length)return e.every(L0(d/ky,h/ky,g));if(b===0)return pp.every(Math.max(L0(d,h,g),1));const[S,E]=l[y/l[b-1][2]<l[b][2]/y?b-1:b];return S.every(E)}return[u,p]}const[d8,f8]=n_(Si,ob,Xp,t_,ib,rb),[p8,h8]=n_(xi,sb,Wp,Nu,ab,nb);function My(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function m8(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,p=e.shortMonths,d=Jc(i),h=eu(i),g=Jc(s),y=eu(s),b=Jc(l),S=eu(l),E=Jc(u),C=eu(u),T=Jc(p),O=eu(p),N={a:q,A:Q,b:Se,B:I,c:null,d:yT,e:yT,f:$8,g:K8,G:X8,H:I8,I:R8,j:L8,L:r_,m:B8,M:U8,p:F,q:V,Q:xT,s:ST,S:z8,u:G8,U:H8,V:Y8,w:q8,W:F8,x:null,X:null,y:V8,Y:W8,Z:Q8,"%":bT},j={a:se,A:ge,b:Ae,B:ye,c:null,d:vT,e:vT,f:tB,g:dB,G:pB,H:Z8,I:J8,j:eB,L:i_,m:nB,M:rB,p:De,q:Ke,Q:xT,s:ST,S:aB,u:iB,U:sB,V:oB,w:lB,W:cB,x:null,X:null,y:uB,Y:fB,Z:hB,"%":bT},M={a:K,A:z,b:Y,B:ie,c:Z,d:mT,e:mT,f:D8,g:hT,G:pT,H:gT,I:gT,j:w8,L:_8,m:P8,M:O8,p:G,q:T8,Q:M8,s:j8,S:N8,u:x8,U:S8,V:A8,w:b8,W:E8,x:te,X:U,y:hT,Y:pT,Z:C8,"%":k8};N.x=D(n,N),N.X=D(r,N),N.c=D(t,N),j.x=D(n,j),j.X=D(r,j),j.c=D(t,j);function D(xe,Le){return function(ze){var me=[],mt=-1,Je=0,It=xe.length,Kt,Pt,Wt;for(ze instanceof Date||(ze=new Date(+ze));++mt<It;)xe.charCodeAt(mt)===37&&(me.push(xe.slice(Je,mt)),(Pt=fT[Kt=xe.charAt(++mt)])!=null?Kt=xe.charAt(++mt):Pt=Kt==="e"?" ":"0",(Wt=Le[Kt])&&(Kt=Wt(ze,Pt)),me.push(Kt),Je=mt+1);return me.push(xe.slice(Je,mt)),me.join("")}}function k(xe,Le){return function(ze){var me=Zc(1900,void 0,1),mt=L(me,xe,ze+="",0),Je,It;if(mt!=ze.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Le&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Je=jy(Zc(me.y,0,1)),It=Je.getUTCDay(),Je=It>4||It===0?mp.ceil(Je):mp(Je),Je=Kp.offset(Je,(me.V-1)*7),me.y=Je.getUTCFullYear(),me.m=Je.getUTCMonth(),me.d=Je.getUTCDate()+(me.w+6)%7):(Je=My(Zc(me.y,0,1)),It=Je.getDay(),Je=It>4||It===0?hp.ceil(Je):hp(Je),Je=Nu.offset(Je,(me.V-1)*7),me.y=Je.getFullYear(),me.m=Je.getMonth(),me.d=Je.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),It="Z"in me?jy(Zc(me.y,0,1)).getUTCDay():My(Zc(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(It+5)%7:me.w+me.U*7-(It+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,jy(me)):My(me)}}function L(xe,Le,ze,me){for(var mt=0,Je=Le.length,It=ze.length,Kt,Pt;mt<Je;){if(me>=It)return-1;if(Kt=Le.charCodeAt(mt++),Kt===37){if(Kt=Le.charAt(mt++),Pt=M[Kt in fT?Le.charAt(mt++):Kt],!Pt||(me=Pt(xe,ze,me))<0)return-1}else if(Kt!=ze.charCodeAt(me++))return-1}return me}function G(xe,Le,ze){var me=d.exec(Le.slice(ze));return me?(xe.p=h.get(me[0].toLowerCase()),ze+me[0].length):-1}function K(xe,Le,ze){var me=b.exec(Le.slice(ze));return me?(xe.w=S.get(me[0].toLowerCase()),ze+me[0].length):-1}function z(xe,Le,ze){var me=g.exec(Le.slice(ze));return me?(xe.w=y.get(me[0].toLowerCase()),ze+me[0].length):-1}function Y(xe,Le,ze){var me=T.exec(Le.slice(ze));return me?(xe.m=O.get(me[0].toLowerCase()),ze+me[0].length):-1}function ie(xe,Le,ze){var me=E.exec(Le.slice(ze));return me?(xe.m=C.get(me[0].toLowerCase()),ze+me[0].length):-1}function Z(xe,Le,ze){return L(xe,t,Le,ze)}function te(xe,Le,ze){return L(xe,n,Le,ze)}function U(xe,Le,ze){return L(xe,r,Le,ze)}function q(xe){return l[xe.getDay()]}function Q(xe){return s[xe.getDay()]}function Se(xe){return p[xe.getMonth()]}function I(xe){return u[xe.getMonth()]}function F(xe){return i[+(xe.getHours()>=12)]}function V(xe){return 1+~~(xe.getMonth()/3)}function se(xe){return l[xe.getUTCDay()]}function ge(xe){return s[xe.getUTCDay()]}function Ae(xe){return p[xe.getUTCMonth()]}function ye(xe){return u[xe.getUTCMonth()]}function De(xe){return i[+(xe.getUTCHours()>=12)]}function Ke(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Le=D(xe+="",N);return Le.toString=function(){return xe},Le},parse:function(xe){var Le=k(xe+="",!1);return Le.toString=function(){return xe},Le},utcFormat:function(xe){var Le=D(xe+="",j);return Le.toString=function(){return xe},Le},utcParse:function(xe){var Le=k(xe+="",!0);return Le.toString=function(){return xe},Le}}}var fT={"-":"",_:" ",0:"0"},Cn=/^\s*\d+/,g8=/^%/,y8=/[\\^$*+?|[\]().{}]/g;function at(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function v8(e){return e.replace(y8,"\\$&")}function Jc(e){return new RegExp("^(?:"+e.map(v8).join("|")+")","i")}function eu(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function b8(e,t,n){var r=Cn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function x8(e,t,n){var r=Cn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function S8(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function A8(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function E8(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function pT(e,t,n){var r=Cn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function hT(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function C8(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function T8(e,t,n){var r=Cn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function P8(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function mT(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function w8(e,t,n){var r=Cn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function gT(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function O8(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function N8(e,t,n){var r=Cn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function _8(e,t,n){var r=Cn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function D8(e,t,n){var r=Cn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function k8(e,t,n){var r=g8.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function M8(e,t,n){var r=Cn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function j8(e,t,n){var r=Cn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function yT(e,t){return at(e.getDate(),t,2)}function I8(e,t){return at(e.getHours(),t,2)}function R8(e,t){return at(e.getHours()%12||12,t,2)}function L8(e,t){return at(1+Nu.count(xi(e),e),t,3)}function r_(e,t){return at(e.getMilliseconds(),t,3)}function $8(e,t){return r_(e,t)+"000"}function B8(e,t){return at(e.getMonth()+1,t,2)}function U8(e,t){return at(e.getMinutes(),t,2)}function z8(e,t){return at(e.getSeconds(),t,2)}function G8(e){var t=e.getDay();return t===0?7:t}function H8(e,t){return at(Wp.count(xi(e)-1,e),t,2)}function a_(e){var t=e.getDay();return t>=4||t===0?Cl(e):Cl.ceil(e)}function Y8(e,t){return e=a_(e),at(Cl.count(xi(e),e)+(xi(e).getDay()===4),t,2)}function q8(e){return e.getDay()}function F8(e,t){return at(hp.count(xi(e)-1,e),t,2)}function V8(e,t){return at(e.getFullYear()%100,t,2)}function K8(e,t){return e=a_(e),at(e.getFullYear()%100,t,2)}function W8(e,t){return at(e.getFullYear()%1e4,t,4)}function X8(e,t){var n=e.getDay();return e=n>=4||n===0?Cl(e):Cl.ceil(e),at(e.getFullYear()%1e4,t,4)}function Q8(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function vT(e,t){return at(e.getUTCDate(),t,2)}function Z8(e,t){return at(e.getUTCHours(),t,2)}function J8(e,t){return at(e.getUTCHours()%12||12,t,2)}function eB(e,t){return at(1+Kp.count(Si(e),e),t,3)}function i_(e,t){return at(e.getUTCMilliseconds(),t,3)}function tB(e,t){return i_(e,t)+"000"}function nB(e,t){return at(e.getUTCMonth()+1,t,2)}function rB(e,t){return at(e.getUTCMinutes(),t,2)}function aB(e,t){return at(e.getUTCSeconds(),t,2)}function iB(e){var t=e.getUTCDay();return t===0?7:t}function sB(e,t){return at(Xp.count(Si(e)-1,e),t,2)}function s_(e){var t=e.getUTCDay();return t>=4||t===0?Tl(e):Tl.ceil(e)}function oB(e,t){return e=s_(e),at(Tl.count(Si(e),e)+(Si(e).getUTCDay()===4),t,2)}function lB(e){return e.getUTCDay()}function cB(e,t){return at(mp.count(Si(e)-1,e),t,2)}function uB(e,t){return at(e.getUTCFullYear()%100,t,2)}function dB(e,t){return e=s_(e),at(e.getUTCFullYear()%100,t,2)}function fB(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function pB(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Tl(e):Tl.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function hB(){return"+0000"}function bT(){return"%"}function xT(e){return+e}function ST(e){return Math.floor(+e/1e3)}var ul,o_,l_;mB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mB(e){return ul=m8(e),o_=ul.format,ul.parse,l_=ul.utcFormat,ul.utcParse,ul}function gB(e){return new Date(e)}function yB(e){return e instanceof Date?+e:+new Date(+e)}function lb(e,t,n,r,i,s,l,u,p,d){var h=Kv(),g=h.invert,y=h.domain,b=d(".%L"),S=d(":%S"),E=d("%I:%M"),C=d("%I %p"),T=d("%a %d"),O=d("%b %d"),N=d("%B"),j=d("%Y");function M(D){return(p(D)<D?b:u(D)<D?S:l(D)<D?E:s(D)<D?C:r(D)<D?i(D)<D?T:O:n(D)<D?N:j)(D)}return h.invert=function(D){return new Date(g(D))},h.domain=function(D){return arguments.length?y(Array.from(D,yB)):y().map(gB)},h.ticks=function(D){var k=y();return e(k[0],k[k.length-1],D??10)},h.tickFormat=function(D,k){return k==null?M:d(k)},h.nice=function(D){var k=y();return(!D||typeof D.range!="function")&&(D=t(k[0],k[k.length-1],D??10)),D?y(KN(k,D)):h},h.copy=function(){return Ou(h,lb(e,t,n,r,i,s,l,u,p,d))},h}function vB(){return Jr.apply(lb(p8,h8,xi,sb,Wp,Nu,ab,nb,Qs,o_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bB(){return Jr.apply(lb(d8,f8,Si,ob,Xp,Kp,ib,rb,Qs,l_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qp(){var e=0,t=1,n,r,i,s,l=Xn,u=!1,p;function d(g){return g==null||isNaN(g=+g)?p:l(i===0?.5:(g=(s(g)-n)*i,u?Math.max(0,Math.min(1,g)):g))}d.domain=function(g){return arguments.length?([e,t]=g,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),d):[e,t]},d.clamp=function(g){return arguments.length?(u=!!g,d):u},d.interpolator=function(g){return arguments.length?(l=g,d):l};function h(g){return function(y){var b,S;return arguments.length?([b,S]=y,l=g(b,S),d):[l(0),l(1)]}}return d.range=h(kl),d.rangeRound=h(Vv),d.unknown=function(g){return arguments.length?(p=g,d):p},function(g){return s=g,n=g(e),r=g(t),i=n===r?0:1/(r-n),d}}function ps(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function c_(){var e=fs(Qp()(Xn));return e.copy=function(){return ps(e,c_())},Ti.apply(e,arguments)}function u_(){var e=Qv(Qp()).domain([1,10]);return e.copy=function(){return ps(e,u_()).base(e.base())},Ti.apply(e,arguments)}function d_(){var e=Zv(Qp());return e.copy=function(){return ps(e,d_()).constant(e.constant())},Ti.apply(e,arguments)}function cb(){var e=Jv(Qp());return e.copy=function(){return ps(e,cb()).exponent(e.exponent())},Ti.apply(e,arguments)}function xB(){return cb.apply(null,arguments).exponent(.5)}function f_(){var e=[],t=Xn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Pu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(os),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>i$(e,s/r))},n.copy=function(){return f_(t).domain(e)},Ti.apply(n,arguments)}function Zp(){var e=0,t=.5,n=1,r=1,i,s,l,u,p,d=Xn,h,g=!1,y;function b(E){return isNaN(E=+E)?y:(E=.5+((E=+h(E))-s)*(r*E<r*s?u:p),d(g?Math.max(0,Math.min(1,E)):E))}b.domain=function(E){return arguments.length?([e,t,n]=E,i=h(e=+e),s=h(t=+t),l=h(n=+n),u=i===s?0:.5/(s-i),p=s===l?0:.5/(l-s),r=s<i?-1:1,b):[e,t,n]},b.clamp=function(E){return arguments.length?(g=!!E,b):g},b.interpolator=function(E){return arguments.length?(d=E,b):d};function S(E){return function(C){var T,O,N;return arguments.length?([T,O,N]=C,d=k$(E,[T,O,N]),b):[d(0),d(.5),d(1)]}}return b.range=S(kl),b.rangeRound=S(Vv),b.unknown=function(E){return arguments.length?(y=E,b):y},function(E){return h=E,i=E(e),s=E(t),l=E(n),u=i===s?0:.5/(s-i),p=s===l?0:.5/(l-s),r=s<i?-1:1,b}}function p_(){var e=fs(Zp()(Xn));return e.copy=function(){return ps(e,p_())},Ti.apply(e,arguments)}function h_(){var e=Qv(Zp()).domain([.1,1,10]);return e.copy=function(){return ps(e,h_()).base(e.base())},Ti.apply(e,arguments)}function m_(){var e=Zv(Zp());return e.copy=function(){return ps(e,m_()).constant(e.constant())},Ti.apply(e,arguments)}function ub(){var e=Jv(Zp());return e.copy=function(){return ps(e,ub()).exponent(e.exponent())},Ti.apply(e,arguments)}function SB(){return ub.apply(null,arguments).exponent(.5)}const au=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Yv,scaleDiverging:p_,scaleDivergingLog:h_,scaleDivergingPow:ub,scaleDivergingSqrt:SB,scaleDivergingSymlog:m_,scaleIdentity:VN,scaleImplicit:$0,scaleLinear:FN,scaleLog:WN,scaleOrdinal:Hv,scalePoint:l$,scalePow:eb,scaleQuantile:ZN,scaleQuantize:JN,scaleRadial:QN,scaleSequential:c_,scaleSequentialLog:u_,scaleSequentialPow:cb,scaleSequentialQuantile:f_,scaleSequentialSqrt:xB,scaleSequentialSymlog:d_,scaleSqrt:t8,scaleSymlog:XN,scaleThreshold:e_,scaleTime:vB,scaleUtc:bB,tickFormat:qN},Symbol.toStringTag,{value:"Module"}));var hs=e=>e.chartData,db=ae([hs],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),fb=(e,t,n,r)=>r?db(e):hs(e);function Pl(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Tr(t)&&Tr(n))return!0}return!1}function AT(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function AB(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(Tr(n))i=n;else if(typeof n=="function")return;if(Tr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(Pl(l))return l}}function EB(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Pl(r))return AT(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(_e(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&fC.test(i)){var p=fC.exec(i);if(p==null||t==null)l=void 0;else{var d=+p[1];l=t[0]-d}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(_e(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&pC.test(s)){var h=pC.exec(s);if(h==null||t==null)u=void 0;else{var g=+h[1];u=t[1]+g}}else u=t?.[1];var y=[l,u];if(Pl(y))return t==null?y:AT(y,t,n)}}}var Ml=1e9,CB={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hb,kt=!0,Xr="[DecimalError] ",no=Xr+"Invalid argument: ",pb=Xr+"Exponent out of range: ",jl=Math.floor,Ks=Math.pow,TB=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Sr,xn=1e7,wt=7,g_=9007199254740991,gp=jl(g_/wt),Te={};Te.absoluteValue=Te.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Te.comparedTo=Te.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Te.decimalPlaces=Te.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*wt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Te.dividedBy=Te.div=function(e){return yi(this,new this.constructor(e))};Te.dividedToIntegerBy=Te.idiv=function(e){var t=this,n=t.constructor;return St(yi(t,new n(e),0,1),n.precision)};Te.equals=Te.eq=function(e){return!this.cmp(e)};Te.exponent=function(){return rn(this)};Te.greaterThan=Te.gt=function(e){return this.cmp(e)>0};Te.greaterThanOrEqualTo=Te.gte=function(e){return this.cmp(e)>=0};Te.isInteger=Te.isint=function(){return this.e>this.d.length-2};Te.isNegative=Te.isneg=function(){return this.s<0};Te.isPositive=Te.ispos=function(){return this.s>0};Te.isZero=function(){return this.s===0};Te.lessThan=Te.lt=function(e){return this.cmp(e)<0};Te.lessThanOrEqualTo=Te.lte=function(e){return this.cmp(e)<1};Te.logarithm=Te.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Sr))throw Error(Xr+"NaN");if(n.s<1)throw Error(Xr+(n.s?"NaN":"-Infinity"));return n.eq(Sr)?new r(0):(kt=!1,t=yi(bu(n,s),bu(e,s),s),kt=!0,St(t,i))};Te.minus=Te.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?b_(t,e):y_(t,(e.s=-e.s,e))};Te.modulo=Te.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Xr+"NaN");return n.s?(kt=!1,t=yi(n,e,0,1).times(e),kt=!0,n.minus(t)):St(new r(n),i)};Te.naturalExponential=Te.exp=function(){return v_(this)};Te.naturalLogarithm=Te.ln=function(){return bu(this)};Te.negated=Te.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Te.plus=Te.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?y_(t,e):b_(t,(e.s=-e.s,e))};Te.precision=Te.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(no+e);if(t=rn(i)+1,r=i.d.length-1,n=r*wt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Te.squareRoot=Te.sqrt=function(){var e,t,n,r,i,s,l,u=this,p=u.constructor;if(u.s<1){if(!u.s)return new p(0);throw Error(Xr+"NaN")}for(e=rn(u),kt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ka(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=jl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new p(t)):r=new p(i.toString()),n=p.precision,i=l=n+3;;)if(s=r,r=s.plus(yi(u,s,l+2)).times(.5),ka(s.d).slice(0,l)===(t=ka(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(St(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return kt=!0,St(r,n)};Te.times=Te.mul=function(e){var t,n,r,i,s,l,u,p,d,h=this,g=h.constructor,y=h.d,b=(e=new g(e)).d;if(!h.s||!e.s)return new g(0);for(e.s*=h.s,n=h.e+e.e,p=y.length,d=b.length,p<d&&(s=y,y=b,b=s,l=p,p=d,d=l),s=[],l=p+d,r=l;r--;)s.push(0);for(r=d;--r>=0;){for(t=0,i=p+r;i>r;)u=s[i]+b[r]*y[i-r-1]+t,s[i--]=u%xn|0,t=u/xn|0;s[i]=(s[i]+t)%xn|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,kt?St(e,g.precision):e};Te.toDecimalPlaces=Te.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ia(e,0,Ml),t===void 0?t=r.rounding:Ia(t,0,8),St(n,e+rn(n)+1,t))};Te.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=lo(r,!0):(Ia(e,0,Ml),t===void 0?t=i.rounding:Ia(t,0,8),r=St(new i(r),e+1,t),n=lo(r,!0,e+1)),n};Te.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?lo(i):(Ia(e,0,Ml),t===void 0?t=s.rounding:Ia(t,0,8),r=St(new s(i),e+rn(i)+1,t),n=lo(r.abs(),!1,e+rn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Te.toInteger=Te.toint=function(){var e=this,t=e.constructor;return St(new t(e),rn(e)+1,t.rounding)};Te.toNumber=function(){return+this};Te.toPower=Te.pow=function(e){var t,n,r,i,s,l,u=this,p=u.constructor,d=12,h=+(e=new p(e));if(!e.s)return new p(Sr);if(u=new p(u),!u.s){if(e.s<1)throw Error(Xr+"Infinity");return u}if(u.eq(Sr))return u;if(r=p.precision,e.eq(Sr))return St(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=h<0?-h:h)<=g_){for(i=new p(Sr),t=Math.ceil(r/wt+4),kt=!1;n%2&&(i=i.times(u),CT(i.d,t)),n=jl(n/2),n!==0;)u=u.times(u),CT(u.d,t);return kt=!0,e.s<0?new p(Sr).div(i):St(i,r)}}else if(s<0)throw Error(Xr+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,kt=!1,i=e.times(bu(u,r+d)),kt=!0,i=v_(i),i.s=s,i};Te.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=rn(i),r=lo(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ia(e,1,Ml),t===void 0?t=s.rounding:Ia(t,0,8),i=St(new s(i),e,t),n=rn(i),r=lo(i,e<=n||n<=s.toExpNeg,e)),r};Te.toSignificantDigits=Te.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ia(e,1,Ml),t===void 0?t=r.rounding:Ia(t,0,8)),St(new r(n),e,t)};Te.toString=Te.valueOf=Te.val=Te.toJSON=Te[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=rn(e),n=e.constructor;return lo(e,t<=n.toExpNeg||t>=n.toExpPos)};function y_(e,t){var n,r,i,s,l,u,p,d,h=e.constructor,g=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),kt?St(t,g):t;if(p=e.d,d=t.d,l=e.e,i=t.e,p=p.slice(),s=l-i,s){for(s<0?(r=p,s=-s,u=d.length):(r=d,i=l,u=p.length),l=Math.ceil(g/wt),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=p.length,s=d.length,u-s<0&&(s=u,r=d,d=p,p=r),n=0;s;)n=(p[--s]=p[s]+d[s]+n)/xn|0,p[s]%=xn;for(n&&(p.unshift(n),++i),u=p.length;p[--u]==0;)p.pop();return t.d=p,t.e=i,kt?St(t,g):t}function Ia(e,t,n){if(e!==~~e||e<t||e>n)throw Error(no+e)}function ka(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=wt-r.length,n&&(s+=ns(n)),s+=r;l=e[t],r=l+"",n=wt-r.length,n&&(s+=ns(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var yi=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%xn|0,l=s/xn|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,p;if(s!=l)p=s>l?1:-1;else for(u=p=0;u<s;u++)if(r[u]!=i[u]){p=r[u]>i[u]?1:-1;break}return p}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*xn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,p,d,h,g,y,b,S,E,C,T,O,N,j,M,D,k,L,G=r.constructor,K=r.s==i.s?1:-1,z=r.d,Y=i.d;if(!r.s)return new G(r);if(!i.s)throw Error(Xr+"Division by zero");for(p=r.e-i.e,k=Y.length,M=z.length,b=new G(K),S=b.d=[],d=0;Y[d]==(z[d]||0);)++d;if(Y[d]>(z[d]||0)&&--p,s==null?O=s=G.precision:l?O=s+(rn(r)-rn(i))+1:O=s,O<0)return new G(0);if(O=O/wt+2|0,d=0,k==1)for(h=0,Y=Y[0],O++;(d<M||h)&&O--;d++)N=h*xn+(z[d]||0),S[d]=N/Y|0,h=N%Y|0;else{for(h=xn/(Y[0]+1)|0,h>1&&(Y=e(Y,h),z=e(z,h),k=Y.length,M=z.length),j=k,E=z.slice(0,k),C=E.length;C<k;)E[C++]=0;L=Y.slice(),L.unshift(0),D=Y[0],Y[1]>=xn/2&&++D;do h=0,u=t(Y,E,k,C),u<0?(T=E[0],k!=C&&(T=T*xn+(E[1]||0)),h=T/D|0,h>1?(h>=xn&&(h=xn-1),g=e(Y,h),y=g.length,C=E.length,u=t(g,E,y,C),u==1&&(h--,n(g,k<y?L:Y,y))):(h==0&&(u=h=1),g=Y.slice()),y=g.length,y<C&&g.unshift(0),n(E,g,C),u==-1&&(C=E.length,u=t(Y,E,k,C),u<1&&(h++,n(E,k<C?L:Y,C))),C=E.length):u===0&&(h++,E=[0]),S[d++]=h,u&&E[0]?E[C++]=z[j]||0:(E=[z[j]],C=1);while((j++<M||E[0]!==void 0)&&O--)}return S[0]||S.shift(),b.e=p,St(b,l?s+rn(b)+1:s)}})();function v_(e,t){var n,r,i,s,l,u,p=0,d=0,h=e.constructor,g=h.precision;if(rn(e)>16)throw Error(pb+rn(e));if(!e.s)return new h(Sr);for(kt=!1,u=g,l=new h(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(r=Math.log(Ks(2,d))/Math.LN10*2+5|0,u+=r,n=i=s=new h(Sr),h.precision=u;;){if(i=St(i.times(e),u),n=n.times(++p),l=s.plus(yi(i,n,u)),ka(l.d).slice(0,u)===ka(s.d).slice(0,u)){for(;d--;)s=St(s.times(s),u);return h.precision=g,t==null?(kt=!0,St(s,g)):s}s=l}}function rn(e){for(var t=e.e*wt,n=e.d[0];n>=10;n/=10)t++;return t}function Iy(e,t,n){if(t>e.LN10.sd())throw kt=!0,n&&(e.precision=n),Error(Xr+"LN10 precision limit exceeded");return St(new e(e.LN10),t)}function ns(e){for(var t="";e--;)t+="0";return t}function bu(e,t){var n,r,i,s,l,u,p,d,h,g=1,y=10,b=e,S=b.d,E=b.constructor,C=E.precision;if(b.s<1)throw Error(Xr+(b.s?"NaN":"-Infinity"));if(b.eq(Sr))return new E(0);if(t==null?(kt=!1,d=C):d=t,b.eq(10))return t==null&&(kt=!0),Iy(E,d);if(d+=y,E.precision=d,n=ka(S),r=n.charAt(0),s=rn(b),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)b=b.times(e),n=ka(b.d),r=n.charAt(0),g++;s=rn(b),r>1?(b=new E("0."+n),s++):b=new E(r+"."+n.slice(1))}else return p=Iy(E,d+2,C).times(s+""),b=bu(new E(r+"."+n.slice(1)),d-y).plus(p),E.precision=C,t==null?(kt=!0,St(b,C)):b;for(u=l=b=yi(b.minus(Sr),b.plus(Sr),d),h=St(b.times(b),d),i=3;;){if(l=St(l.times(h),d),p=u.plus(yi(l,new E(i),d)),ka(p.d).slice(0,d)===ka(u.d).slice(0,d))return u=u.times(2),s!==0&&(u=u.plus(Iy(E,d+2,C).times(s+""))),u=yi(u,new E(g),d),E.precision=C,t==null?(kt=!0,St(u,C)):u;u=p,i+=2}}function ET(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=jl(n/wt),e.d=[],r=(n+1)%wt,n<0&&(r+=wt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=wt;r<i;)e.d.push(+t.slice(r,r+=wt));t=t.slice(r),r=wt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),kt&&(e.e>gp||e.e<-gp))throw Error(pb+n)}else e.s=0,e.e=0,e.d=[0];return e}function St(e,t,n){var r,i,s,l,u,p,d,h,g=e.d;for(l=1,s=g[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=wt,i=t,d=g[h=0];else{if(h=Math.ceil((r+1)/wt),s=g.length,h>=s)return e;for(d=s=g[h],l=1;s>=10;s/=10)l++;r%=wt,i=r-wt+l}if(n!==void 0&&(s=Ks(10,l-i-1),u=d/s%10|0,p=t<0||g[h+1]!==void 0||d%s,p=n<4?(u||p)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||p||n==6&&(r>0?i>0?d/Ks(10,l-i):0:g[h-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return p?(s=rn(e),g.length=1,t=t-s-1,g[0]=Ks(10,(wt-t%wt)%wt),e.e=jl(-t/wt)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(r==0?(g.length=h,s=1,h--):(g.length=h+1,s=Ks(10,wt-r),g[h]=i>0?(d/Ks(10,l-i)%Ks(10,i)|0)*s:0),p)for(;;)if(h==0){(g[0]+=s)==xn&&(g[0]=1,++e.e);break}else{if(g[h]+=s,g[h]!=xn)break;g[h--]=0,s=1}for(r=g.length;g[--r]===0;)g.pop();if(kt&&(e.e>gp||e.e<-gp))throw Error(pb+rn(e));return e}function b_(e,t){var n,r,i,s,l,u,p,d,h,g,y=e.constructor,b=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),kt?St(t,b):t;if(p=e.d,g=t.d,r=t.e,d=e.e,p=p.slice(),l=d-r,l){for(h=l<0,h?(n=p,l=-l,u=g.length):(n=g,r=d,u=p.length),i=Math.max(Math.ceil(b/wt),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=p.length,u=g.length,h=i<u,h&&(u=i),i=0;i<u;i++)if(p[i]!=g[i]){h=p[i]<g[i];break}l=0}for(h&&(n=p,p=g,g=n,t.s=-t.s),u=p.length,i=g.length-u;i>0;--i)p[u++]=0;for(i=g.length;i>l;){if(p[--i]<g[i]){for(s=i;s&&p[--s]===0;)p[s]=xn-1;--p[s],p[i]+=xn}p[i]-=g[i]}for(;p[--u]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=r,kt?St(t,b):t):new y(0)}function lo(e,t,n){var r,i=rn(e),s=ka(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+ns(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+ns(-i-1)+s,n&&(r=n-l)>0&&(s+=ns(r))):i>=l?(s+=ns(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+ns(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=ns(r))),e.s<0?"-"+s:s}function CT(e,t){if(e.length>t)return e.length=t,!0}function x_(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(no+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return ET(l,s.toString())}else if(typeof s!="string")throw Error(no+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,TB.test(s))ET(l,s);else throw Error(no+s)}if(i.prototype=Te,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=x_,i.config=i.set=PB,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function PB(e){if(!e||typeof e!="object")throw Error(Xr+"Object expected");var t,n,r,i=["precision",1,Ml,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(jl(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(no+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(no+n+": "+r);return this}var hb=x_(CB);Sr=new hb(1);const pt=hb;var wB=e=>e,S_={},A_=e=>e===S_,TT=e=>function t(){return arguments.length===0||arguments.length===1&&A_(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},E_=(e,t)=>e===1?t:TT(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==S_).length;return s>=e?t(...r):E_(e-s,TT(function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];var d=r.map(h=>A_(h)?u.shift():h);return t(...d,...u)}))}),Jp=e=>E_(e.length,e),G0=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},OB=Jp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),NB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return wB;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,p)=>p(u),s(...arguments))}},H0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),C_=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var p;return l===((p=t)===null||p===void 0?void 0:p[u])})||(t=i,n=e(...i)),n}};function T_(e){var t;return e===0?t=1:t=Math.floor(new pt(e).abs().log(10).toNumber())+1,t}function P_(e,t,n){for(var r=new pt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}Jp((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Jp((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Jp((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var w_=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},O_=(e,t,n)=>{if(e.lte(0))return new pt(0);var r=T_(e.toNumber()),i=new pt(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new pt(Math.ceil(s.div(l).toNumber())).add(n).mul(l),p=u.mul(i);return t?new pt(p.toNumber()):new pt(Math.ceil(p.toNumber()))},_B=(e,t,n)=>{var r=new pt(1),i=new pt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new pt(10).pow(T_(e)-1),i=new pt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new pt(Math.floor(e)))}else e===0?i=new pt(Math.floor((t-1)/2)):n||(i=new pt(Math.floor(e)));var l=Math.floor((t-1)/2),u=NB(OB(p=>i.add(new pt(p-l).mul(r)).toNumber()),G0);return u(0,t)},N_=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new pt(0),tickMin:new pt(0),tickMax:new pt(0)};var l=O_(new pt(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new pt(0):(u=new pt(t).add(n).div(2),u=u.sub(new pt(u).mod(l)));var p=Math.ceil(u.sub(t).div(l).toNumber()),d=Math.ceil(new pt(n).sub(u).div(l).toNumber()),h=p+d+1;return h>r?N_(t,n,r,i,s+1):(h<r&&(d=n>0?d+(r-h):d,p=n>0?p:p+(r-h)),{step:l,tickMin:u.sub(new pt(p).mul(l)),tickMax:u.add(new pt(d).mul(l))})};function DB(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=w_([t,n]);if(l===-1/0||u===1/0){var p=u===1/0?[l,...G0(0,r-1).map(()=>1/0)]:[...G0(0,r-1).map(()=>-1/0),u];return t>n?H0(p):p}if(l===u)return _B(l,r,i);var{step:d,tickMin:h,tickMax:g}=N_(l,u,s,i,0),y=P_(h,g.add(new pt(.1).mul(d)),d);return t>n?H0(y):y}function kB(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=w_([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),p=O_(new pt(l).sub(s).div(u-1),i,0),d=[...P_(new pt(s),new pt(l),p),l];return i===!1&&(d=d.map(h=>Math.round(h))),n>r?H0(d):d}var MB=C_(DB),jB=C_(kB),__=e=>e.rootProps.maxBarSize,IB=e=>e.rootProps.barGap,D_=e=>e.rootProps.barCategoryGap,RB=e=>e.rootProps.barSize,_u=e=>e.rootProps.stackOffset,mb=e=>e.options.chartName,gb=e=>e.rootProps.syncId,k_=e=>e.rootProps.syncMethod,yb=e=>e.options.eventEmitter,fi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},xr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},eh=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},LB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:fi.angleAxisId,includeHidden:!1,name:void 0,reversed:fi.reversed,scale:fi.scale,tick:fi.tick,tickCount:void 0,ticks:void 0,type:fi.type,unit:void 0},$B={allowDataOverflow:xr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xr.scale,tick:xr.tick,tickCount:xr.tickCount,ticks:void 0,type:xr.type,unit:void 0},BB={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:fi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fi.scale,tick:fi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},UB={allowDataOverflow:xr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:xr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:xr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:xr.scale,tick:xr.tick,tickCount:xr.tickCount,ticks:void 0,type:"category",unit:void 0},vb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?BB:LB,bb=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?UB:$B,th=e=>e.polarOptions,xb=ae([Ei,Ci,dn],hN),M_=ae([th,xb],(e,t)=>{if(e!=null)return Hn(e.innerRadius,t,0)}),j_=ae([th,xb],(e,t)=>{if(e!=null)return Hn(e.outerRadius,t,t*.8)}),zB=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},I_=ae([th],zB);ae([vb,I_],eh);var R_=ae([xb,M_,j_],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ae([bb,R_],eh);var L_=ae([it,th,M_,j_,Ei,Ci],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:p,endAngle:d}=t;return{cx:Hn(l,i,i/2),cy:Hn(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:p,endAngle:d,clockWise:!1}}}),jt=(e,t)=>t,Du=(e,t,n)=>n;function Sb(e){return e?.id}var pn=e=>{var t=it(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Il=e=>e.tooltip.settings.axisId,Tn=e=>{var t=pn(e),n=Il(e);return ku(e,t,n)},$_=ae([Tn],e=>e?.dataKey);function B_(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var p,d=(p=u.data)!==null&&p!==void 0?p:r;if(!(d==null||d.length===0)){var h=Sb(u);d.forEach((g,y)=>{var b=s==null||i?y:String(Dt(g,s,null)),S=Dt(g,u.dataKey,0),E;l.has(b)?E=l.get(b):E={},Object.assign(E,{[h]:S}),l.set(b,E)})}}),Array.from(l.values())}function nh(e){return e.stackId!=null&&e.dataKey!=null}function PT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PT(Object(n),!0).forEach(function(r){GB(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GB(e,t,n){return(t=HB(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HB(e){var t=YB(e,"string");return typeof t=="symbol"?t:t+""}function YB(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y0=[0,"auto"],yr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},U_=(e,t)=>e.cartesianAxis.xAxis[t],ms=(e,t)=>{var n=U_(e,t);return n??yr},vr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Y0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Tu},z_=(e,t)=>e.cartesianAxis.yAxis[t],gs=(e,t)=>{var n=z_(e,t);return n??vr},qB={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Ab=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??qB},Vt=(e,t,n)=>{switch(t){case"xAxis":return ms(e,n);case"yAxis":return gs(e,n);case"zAxis":return Ab(e,n);case"angleAxis":return vb(e,n);case"radiusAxis":return bb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},FB=(e,t,n)=>{switch(t){case"xAxis":return ms(e,n);case"yAxis":return gs(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},ku=(e,t,n)=>{switch(t){case"xAxis":return ms(e,n);case"yAxis":return gs(e,n);case"angleAxis":return vb(e,n);case"radiusAxis":return bb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},G_=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Eb(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Cb=e=>e.graphicalItems.cartesianItems,VB=ae([jt,Du],Eb),Tb=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Mu=ae([Cb,Vt,VB],Tb),H_=ae([Mu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(nh)),Y_=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),q_=ae([Mu],Y_),Pb=e=>e.map(t=>t.data).filter(Boolean).flat(1),KB=ae([Mu],Pb),wb=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},Ob=ae([KB,fb],wb),Nb=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Dt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Dt(i,r)}))):e.map(r=>({value:r})),rh=ae([Ob,Vt,Mu],Nb);function F_(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function bo(e){return e.filter(t=>ja(t)||t instanceof Date).map(Number).filter(t=>Er(t)===!1)}function WB(e,t,n){return!n||typeof t!="number"||Er(t)?[]:n.length?bo(n.flatMap(r=>{var i=Dt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!Tr(s)||!Tr(l)))return[t-s,t+l]})):[]}var XB=ae([H_,fb,Tn],B_),V_=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,p=u.map(Sb);return[l,{stackedData:e5(e,p,n),graphicalItems:u}]}))},q0=ae([XB,H_,_u],V_),K_=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=i5(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},QB=ae([q0,hs,jt],K_),W_=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,p,d=(u=r[l.id])===null||u===void 0?void 0:u.filter(g=>F_(i,g)),h=Dt(s,(p=t.dataKey)!==null&&p!==void 0?p:l.dataKey);return{value:h,errorDomain:WB(s,h,d)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Dt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),ah=e=>e.errorBars,X_=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>F_(n,r));ae([q_,ah,jt],X_);var ZB=ae([Ob,Vt,q_,ah,jt],W_);function JB(e){var{value:t}=e;if(ja(t)||t instanceof Date)return t}var wT=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=bo(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},e6=(e,t,n)=>{var r=e.map(JB).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&lO(r))?IN(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},_b=e=>{var t;if(e==null||!("domain"in e))return Y0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=bo(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Y0},vp=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},Q_=e=>e.referenceElements.dots,Rl=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),t6=ae([Q_,jt,Du],Rl),Z_=e=>e.referenceElements.areas,n6=ae([Z_,jt,Du],Rl),J_=e=>e.referenceElements.lines,r6=ae([J_,jt,Du],Rl),e2=(e,t)=>{var n=bo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},a6=ae(t6,jt,e2),t2=(e,t)=>{var n=bo(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},i6=ae([n6,jt],t2),n2=(e,t)=>{var n=bo(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},s6=ae(r6,jt,n2),o6=ae(a6,s6,i6,(e,t,n)=>vp(e,n,t)),r2=ae([Vt],_b),Db=(e,t,n,r,i,s,l)=>{var u=AB(t,e.allowDataOverflow);if(u!=null)return u;var p=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",d=p?vp(n,i,wT(r)):vp(i,wT(r));return EB(t,d,e.allowDataOverflow)},l6=ae([Vt,r2,QB,ZB,o6,it,jt],Db),c6=[0,1],kb=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:p}=e,d=go(t,s);return d&&u==null?IN(0,n.length):p==="category"?e6(r,e,d):i==="expand"?c6:l}},Mb=ae([Vt,it,Ob,rh,_u,jt,l6],kb),a2=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Su(s));return u in au?u:"point"}}},Ll=ae([Vt,it,G_,mb,jt],a2);function u6(e){if(e!=null){if(e in au)return au[e]();var t="scale".concat(Su(e));if(t in au)return au[t]()}}function jb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=u6(t);if(i!=null){var s=i.domain(n).range(r);return W3(s),s}}}var Ib=(e,t,n)=>{var r=_b(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Pl(e))return MB(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Pl(e))return jB(e,t.tickCount,t.allowDecimals)}},Rb=ae([Mb,ku,Ll],Ib),Lb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Pl(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},d6=ae([Vt,Mb,Rb,jt],Lb),f6=ae(rh,Vt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(bo(e.map(u=>u.value))).sort((u,p)=>u-p);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),i2=ae(f6,it,D_,dn,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!Tr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=Hn(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),p6=(e,t)=>{var n=ms(e,t);return n==null||typeof n.padding!="string"?0:i2(e,"xAxis",t,n.padding)},h6=(e,t)=>{var n=gs(e,t);return n==null||typeof n.padding!="string"?0:i2(e,"yAxis",t,n.padding)},m6=ae(ms,p6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),g6=ae(gs,h6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),y6=ae([dn,m6,Hp,Gp,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),v6=ae([dn,it,g6,Hp,Gp,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),ju=(e,t,n,r)=>{var i;switch(t){case"xAxis":return y6(e,n,r);case"yAxis":return v6(e,n,r);case"zAxis":return(i=Ab(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return I_(e);case"radiusAxis":return R_(e,n);default:return}},s2=ae([Vt,ju],eh),$l=ae([Vt,Ll,d6,s2],jb);ae([Mu,ah,jt],X_);function o2(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ih=(e,t)=>t,sh=(e,t,n)=>n,b6=ae(Up,ih,sh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(o2)),x6=ae(zp,ih,sh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(o2)),l2=(e,t)=>({width:e.width,height:t.height}),S6=(e,t)=>{var n=typeof t.width=="number"?t.width:Tu;return{width:n,height:e.height}},c2=ae(dn,ms,l2),A6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},E6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},C6=ae(Ci,dn,b6,ih,sh,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var p=l2(t,u);l==null&&(l=A6(t,r,e));var d=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(d)*p.height,l+=(d?-1:1)*p.height}),s}),T6=ae(Ei,dn,x6,ih,sh,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var p=S6(t,u);l==null&&(l=E6(t,r,e));var d=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(d)*p.width,l+=(d?-1:1)*p.width}),s}),P6=(e,t)=>{var n=dn(e),r=ms(e,t);if(r!=null){var i=C6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},w6=(e,t)=>{var n=dn(e),r=gs(e,t);if(r!=null){var i=T6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},u2=ae(dn,gs,(e,t)=>{var n=typeof t.width=="number"?t.width:Tu;return{width:n,height:e.height}}),OT=(e,t,n)=>{switch(t){case"xAxis":return c2(e,n).width;case"yAxis":return u2(e,n).height;default:return}},d2=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=go(e,r),p=t.map(d=>d.value);if(l&&u&&s==="category"&&i&&lO(p))return p}},$b=ae([it,rh,Vt,jt],d2),f2=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=go(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},Bb=ae([it,rh,ku,jt],f2),NT=ae([it,FB,Ll,$l,$b,Bb,ju,Rb,jt],(e,t,n,r,i,s,l,u,p)=>{if(t==null)return null;var d=go(e,p);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:p,categoricalDomain:s,duplicateDomain:i,isCategorical:d,niceTicks:u,range:l,realScaleType:n,scale:r}}),O6=(e,t,n,r,i,s,l,u,p)=>{if(!(t==null||r==null)){var d=go(e,p),{type:h,ticks:g,tickCount:y}=t,b=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=h==="category"&&r.bandwidth?r.bandwidth()/b:0;S=p==="angleAxis"&&s!=null&&s.length>=2?Sn(s[0]-s[1])*2*S:S;var E=g||i;if(E){var C=E.map((T,O)=>{var N=l?l.indexOf(T):T;return{index:O,coordinate:r(N)+S,value:T,offset:S}});return C.filter(T=>!Er(T.coordinate))}return d&&u?u.map((T,O)=>({coordinate:r(T)+S,value:T,index:O,offset:S})):r.ticks?r.ticks(y).map(T=>({coordinate:r(T)+S,value:T,offset:S})):r.domain().map((T,O)=>({coordinate:r(T)+S,value:l?l[T]:T,index:O,offset:S}))}},p2=ae([it,ku,Ll,$l,Rb,ju,$b,Bb,jt],O6),N6=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=go(e,l),{tickCount:p}=t,d=0;return d=l==="angleAxis"&&r?.length>=2?Sn(r[0]-r[1])*2*d:d,u&&s?s.map((h,g)=>({coordinate:n(h)+d,value:h,index:g,offset:d})):n.ticks?n.ticks(p).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,g)=>({coordinate:n(h)+d,value:i?i[h]:h,index:g,offset:d}))}},wl=ae([it,ku,$l,ju,$b,Bb,jt],N6),Ol=ae(Vt,$l,(e,t)=>{if(!(e==null||t==null))return yp(yp({},e),{},{scale:t})}),_6=ae([Vt,Ll,Mb,s2],jb);ae((e,t,n)=>Ab(e,n),_6,(e,t)=>{if(!(e==null||t==null))return yp(yp({},e),{},{scale:t})});var D6=ae([it,Up,zp],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),h2=e=>e.options.defaultTooltipEventType,m2=e=>e.options.validateTooltipEventTypes;function g2(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Ub(e,t){var n=h2(e),r=m2(e);return g2(t,n,r)}function k6(e){return Oe(t=>Ub(t,e))}var y2=(e,t)=>{var n,r=Number(t);if(!(Er(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},M6=e=>e.tooltip.settings,as={active:!1,index:null,dataKey:void 0,coordinate:void 0},j6={itemInteraction:{click:as,hover:as},axisInteraction:{click:as,hover:as},keyboardInteraction:as,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},v2=Pr({name:"tooltip",initialState:j6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=gi(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:I6,removeTooltipEntrySettings:R6,setTooltipSettingsState:L6,setActiveMouseOverItemIndex:b2,mouseLeaveItem:$6,mouseLeaveChart:x2,setActiveClickItemIndex:B6,setMouseOverAxisIndex:S2,setMouseClickAxisIndex:U6,setSyncInteraction:F0,setKeyboardInteraction:V0}=v2.actions,z6=v2.reducer;function _T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_T(Object(n),!0).forEach(function(r){G6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_T(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G6(e,t,n){return(t=H6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H6(e){var t=Y6(e,"string");return typeof t=="symbol"?t:t+""}function Y6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function F6(e){return e.index!=null}var A2=(e,t,n,r)=>{if(t==null)return as;var i=q6(e,t,n);if(i==null)return as;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(F6(i)){if(s)return wf(wf({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return wf(wf({},as),{},{coordinate:i.coordinate})},zb=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!Tr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},E2=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var p=l[0],d=p==null?void 0:u(p.positions,s);if(d!=null)return d;var h=i?.[Number(s)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:h.coordinate}}}},C2=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},Iu=e=>e.options.tooltipPayloadSearcher,Bl=e=>e.tooltip;function DT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DT(Object(n),!0).forEach(function(r){V6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V6(e,t,n){return(t=K6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K6(e){var t=W6(e,"string");return typeof t=="symbol"?t:t+""}function W6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X6(e,t){return e??t}var T2=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:p,dataStartIndex:d,dataEndIndex:h}=n,g=[];return e.reduce((y,b)=>{var S,{dataDefinedOnItem:E,settings:C}=b,T=X6(E,u),O=Array.isArray(T)?mN(T,d,h):T,N=(S=C?.dataKey)!==null&&S!==void 0?S:r,j=C?.nameKey,M;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?M=$I(O,r,i):M=s(O,t,p,j),Array.isArray(M))M.forEach(k=>{var L=kT(kT({},C),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});y.push(hC({tooltipEntrySettings:L,dataKey:k.dataKey,payload:k.payload,value:Dt(k.payload,k.dataKey),name:k.name}))});else{var D;y.push(hC({tooltipEntrySettings:C,dataKey:N,payload:M,value:Dt(M,N),name:(D=Dt(M,j))!==null&&D!==void 0?D:C?.name}))}return y},g)}},Gb=ae([Tn,it,G_,mb,pn],a2),Q6=ae([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Z6=ae([pn,Il],Eb),Ru=ae([Q6,Tn,Z6],Tb),J6=ae([Ru],e=>e.filter(nh)),eU=ae([Ru],Pb),Ul=ae([eU,hs],wb),tU=ae([J6,hs,Tn],B_),Hb=ae([Ul,Tn,Ru],Nb),nU=ae([Tn],_b),rU=ae([Ru],e=>e.filter(nh)),aU=ae([tU,rU,_u],V_),iU=ae([aU,hs,pn],K_),sU=ae([Ru],Y_),oU=ae([Ul,Tn,sU,ah,pn],W_),lU=ae([Q_,pn,Il],Rl),cU=ae([lU,pn],e2),uU=ae([Z_,pn,Il],Rl),dU=ae([uU,pn],t2),fU=ae([J_,pn,Il],Rl),pU=ae([fU,pn],n2),hU=ae([cU,pU,dU],vp),mU=ae([Tn,nU,iU,oU,hU,it,pn],Db),P2=ae([Tn,it,Ul,Hb,_u,pn,mU],kb),gU=ae([P2,Tn,Gb],Ib),yU=ae([Tn,P2,gU,pn],Lb),w2=e=>{var t=pn(e),n=Il(e),r=!1;return ju(e,t,n,r)},O2=ae([Tn,w2],eh),N2=ae([Tn,Gb,yU,O2],jb),vU=ae([it,Hb,Tn,pn],d2),bU=ae([it,Hb,Tn,pn],f2),xU=(e,t,n,r,i,s,l,u)=>{if(t){var{type:p}=t,d=go(e,u);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=p==="category"&&r.bandwidth?r.bandwidth()/h:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?Sn(i[0]-i[1])*2*g:g,d&&l?l.map((y,b)=>({coordinate:r(y)+g,value:y,index:b,offset:g})):r.domain().map((y,b)=>({coordinate:r(y)+g,value:s?s[y]:y,index:b,offset:g}))}}},Pi=ae([it,Tn,Gb,N2,w2,vU,bU,pn],xU),Yb=ae([h2,m2,M6],(e,t,n)=>g2(n.shared,e,t)),_2=e=>e.tooltip.settings.trigger,qb=e=>e.tooltip.settings.defaultIndex,oh=ae([Bl,Yb,_2,qb],A2),co=ae([oh,Ul],zb),D2=ae([Pi,co],y2),k2=ae([oh],e=>{if(e)return e.dataKey}),M2=ae([Bl,Yb,_2,qb],C2),SU=ae([Ei,Ci,it,dn,Pi,qb,M2,Iu],E2),AU=ae([oh,SU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),EU=ae([oh],e=>e.active),CU=ae([M2,co,hs,$_,D2,Iu,Yb],T2);ae([CU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function MT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(n),!0).forEach(function(r){TU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TU(e,t,n){return(t=PU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PU(e){var t=wU(e,"string");return typeof t=="symbol"?t:t+""}function wU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OU=()=>Oe(Tn),NU=()=>{var e=OU(),t=Oe(Pi),n=Oe(N2);return Iv(jT(jT({},e),{},{scale:n}),t)},_U=()=>Oe(mb),Fb=(e,t)=>t,j2=(e,t,n)=>n,Vb=(e,t,n,r)=>r,DU=ae(Pi,e=>Mp(e,t=>t.coordinate)),Kb=ae([Bl,Fb,j2,Vb],A2),I2=ae([Kb,Ul],zb),kU=(e,t,n)=>{if(t!=null){var r=Bl(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},R2=ae([Bl,Fb,j2,Vb],C2),bp=ae([Ei,Ci,it,dn,Pi,Vb,R2,Iu],E2),MU=ae([Kb,bp],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),L2=ae(Pi,I2,y2),jU=ae([R2,I2,hs,$_,L2,Iu,Fb],T2),IU=ae([Kb],e=>({isActive:e.active,activeIndex:e.index})),RU=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var p=s5(e.chartX,e.chartY,t,n,u);if(p){var d=l5(p,t),h=V3(d,l,s,r,i),g=o5(t,s,h,p);return{activeIndex:String(h),activeCoordinate:g}}}};function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K0.apply(null,arguments)}function IT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(n),!0).forEach(function(r){LU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LU(e,t,n){return(t=$U(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $U(e){var t=BU(e,"string");return typeof t=="symbol"?t:t+""}function BU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:p,chartName:d}=e,h=t,g=n,y=r;if(!u||!h||d!=="ScatterChart"&&p!=="axis")return null;var b,S;if(d==="ScatterChart")b=h,S=l4;else if(d==="BarChart")b=c4(l,h,i,s),S=DN;else if(l==="radial"){var{cx:E,cy:C,radius:T,startAngle:O,endAngle:N}=kN(h);b={cx:E,cy:C,startAngle:O,endAngle:N,innerRadius:T,outerRadius:T},S=jN}else b={points:G4(l,h,i)},S=PN;var j=typeof u=="object"&&"className"in u?u.className:void 0,M=Of(Of(Of(Of({stroke:"#ccc",pointerEvents:"none"},i),b),tn(u,!1)),{},{payload:g,payloadIndex:y,className:ht("recharts-tooltip-cursor",j)});return A.isValidElement(u)?A.cloneElement(u,M):A.createElement(S,M)}function zU(e){var t=NU(),n=SN(),r=Uv(),i=_U();return A.createElement(UU,K0({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var $2=A.createContext(null),GU=()=>A.useContext($2),Ry={exports:{}},RT;function HU(){return RT||(RT=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(p,d,h){this.fn=p,this.context=d,this.once=h||!1}function s(p,d,h,g,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var b=new i(h,g||p,y),S=n?n+d:d;return p._events[S]?p._events[S].fn?p._events[S]=[p._events[S],b]:p._events[S].push(b):(p._events[S]=b,p._eventsCount++),p}function l(p,d){--p._eventsCount===0?p._events=new r:delete p._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],h,g;if(this._eventsCount===0)return d;for(g in h=this._events)t.call(h,g)&&d.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},u.prototype.listeners=function(d){var h=n?n+d:d,g=this._events[h];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,b=g.length,S=new Array(b);y<b;y++)S[y]=g[y].fn;return S},u.prototype.listenerCount=function(d){var h=n?n+d:d,g=this._events[h];return g?g.fn?1:g.length:0},u.prototype.emit=function(d,h,g,y,b,S){var E=n?n+d:d;if(!this._events[E])return!1;var C=this._events[E],T=arguments.length,O,N;if(C.fn){switch(C.once&&this.removeListener(d,C.fn,void 0,!0),T){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,h),!0;case 3:return C.fn.call(C.context,h,g),!0;case 4:return C.fn.call(C.context,h,g,y),!0;case 5:return C.fn.call(C.context,h,g,y,b),!0;case 6:return C.fn.call(C.context,h,g,y,b,S),!0}for(N=1,O=new Array(T-1);N<T;N++)O[N-1]=arguments[N];C.fn.apply(C.context,O)}else{var j=C.length,M;for(N=0;N<j;N++)switch(C[N].once&&this.removeListener(d,C[N].fn,void 0,!0),T){case 1:C[N].fn.call(C[N].context);break;case 2:C[N].fn.call(C[N].context,h);break;case 3:C[N].fn.call(C[N].context,h,g);break;case 4:C[N].fn.call(C[N].context,h,g,y);break;default:if(!O)for(M=1,O=new Array(T-1);M<T;M++)O[M-1]=arguments[M];C[N].fn.apply(C[N].context,O)}}return!0},u.prototype.on=function(d,h,g){return s(this,d,h,g,!1)},u.prototype.once=function(d,h,g){return s(this,d,h,g,!0)},u.prototype.removeListener=function(d,h,g,y){var b=n?n+d:d;if(!this._events[b])return this;if(!h)return l(this,b),this;var S=this._events[b];if(S.fn)S.fn===h&&(!y||S.once)&&(!g||S.context===g)&&l(this,b);else{for(var E=0,C=[],T=S.length;E<T;E++)(S[E].fn!==h||y&&!S[E].once||g&&S[E].context!==g)&&C.push(S[E]);C.length?this._events[b]=C.length===1?C[0]:C:l(this,b)}return this},u.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(Ry)),Ry.exports}var YU=HU();const qU=ua(YU);var xu=new qU,W0="recharts.syncEvent.tooltip",LT="recharts.syncEvent.brush";function B2(e,t){if(t){var n=Number.parseInt(t,10);if(!Er(n))return e?.[n]}}var FU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},U2=Pr({name:"options",initialState:FU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),VU=U2.reducer,{createEventEmitter:KU}=U2.actions;function WU(e){return e.tooltip.syncInteraction}var XU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},z2=Pr({name:"chartData",initialState:XU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:$T,setDataStartEndIndexes:QU,setComputedData:OV}=z2.actions,ZU=z2.reducer,JU=["x","y"];function BT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(n),!0).forEach(function(r){ez(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ez(e,t,n){return(t=tz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tz(e){var t=nz(e,"string");return typeof t=="symbol"?t:t+""}function nz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rz(e,t){if(e==null)return{};var n,r,i=az(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function az(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var G2=()=>{};function iz(){var e=Oe(gb),t=Oe(yb),n=Lt(),r=Oe(k_),i=Oe(Pi),s=Uv(),l=Lv(),u=Oe(p=>p.rootProps.className);A.useEffect(()=>{if(e==null)return G2;var p=(d,h,g)=>{if(t!==g&&e===d){if(r==="index"){var y;if(l&&h!==null&&h!==void 0&&(y=h.payload)!==null&&y!==void 0&&y.coordinate){var b=h.payload.coordinate,{x:S,y:E}=b,C=rz(b,JU),T=qs(qs(qs({},C),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof E=="number"&&{y:Math.max(l.y,Math.min(E,l.y+l.height))}),O=qs(qs({},h),{},{payload:qs(qs({},h.payload),{},{coordinate:T})});n(O)}else n(h);return}if(i!=null){var N;if(typeof r=="function"){var j={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},M=r(i,j);N=i[M]}else r==="value"&&(N=i.find(ie=>String(ie.value)===h.payload.label));var{coordinate:D}=h.payload;if(N==null||h.payload.active===!1||D==null||l==null){n(F0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:k,y:L}=D,G=Math.min(k,l.x+l.width),K=Math.min(L,l.y+l.height),z={x:s==="horizontal"?N.coordinate:G,y:s==="horizontal"?K:N.coordinate},Y=F0({active:h.payload.active,coordinate:z,dataKey:h.payload.dataKey,index:String(N.index),label:h.payload.label});n(Y)}}};return xu.on(W0,p),()=>{xu.off(W0,p)}},[u,n,t,e,r,i,s,l])}function sz(){var e=Oe(gb),t=Oe(yb),n=Lt();A.useEffect(()=>{if(e==null)return G2;var r=(i,s,l)=>{t!==l&&e===i&&n(QU(s))};return xu.on(LT,r),()=>{xu.off(LT,r)}},[n,t,e])}function oz(){var e=Lt();A.useEffect(()=>{e(KU())},[e]),iz(),sz()}function lz(e,t,n,r,i,s){var l=Oe(y=>kU(y,e,t)),u=Oe(yb),p=Oe(gb),d=Oe(k_),h=Oe(WU),g=h?.active;A.useEffect(()=>{if(!g&&p!=null&&u!=null){var y=F0({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});xu.emit(W0,p,y,u)}},[g,n,l,i,r,u,p,d,s])}function UT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UT(Object(n),!0).forEach(function(r){cz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cz(e,t,n){return(t=uz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uz(e){var t=dz(e,"string");return typeof t=="symbol"?t:t+""}function dz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fz(e){return e.dataKey}function pz(e,t){return A.isValidElement(e)?A.cloneElement(e,t):typeof e=="function"?A.createElement(e,t):A.createElement(U5,t)}var GT=[],hz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Dl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ia(e){var t=Zr(e,hz),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:p,offset:d,payloadUniqBy:h,position:g,reverseDirection:y,useTranslate3d:b,wrapperStyle:S,cursor:E,shared:C,trigger:T,defaultIndex:O,portal:N,axisId:j}=t,M=Lt(),D=typeof O=="number"?String(O):O;A.useEffect(()=>{M(L6({shared:C,trigger:T,axisId:j,active:n,defaultIndex:D}))},[M,C,T,j,n,D]);var k=Lv(),L=TN(),G=k6(C),{activeIndex:K,isActive:z}=Oe(Ae=>IU(Ae,G,T,D)),Y=Oe(Ae=>jU(Ae,G,T,D)),ie=Oe(Ae=>L2(Ae,G,T,D)),Z=Oe(Ae=>MU(Ae,G,T,D)),te=Y,U=GU(),q=n??z,[Q,Se]=HO([te,q]),I=G==="axis"?ie:void 0;lz(G,T,Z,I,K,q);var F=N??U;if(F==null)return null;var V=te??GT;q||(V=GT),u&&V.length&&(V=$O(te.filter(Ae=>Ae.value!=null&&(Ae.hide!==!0||t.includeHidden)),h,fz));var se=V.length>0,ge=A.createElement(V5,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:p,active:q,coordinate:Z,hasPayload:se,offset:d,position:g,reverseDirection:y,useTranslate3d:b,viewBox:k,wrapperStyle:S,lastBoundingBox:Q,innerRef:Se,hasPortalFromProps:!!N},pz(l,zT(zT({},t),{},{payload:V,label:I,active:q,coordinate:Z,accessibilityLayer:L})));return A.createElement(A.Fragment,null,dO.createPortal(ge,F),q&&A.createElement(zU,{cursor:E,tooltipEventType:G,coordinate:Z,payload:te,index:K}))}var Ly={},$y={},By={},HT;function mz(){return HT||(HT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const p=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),h=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},g=()=>{d&&h(),E()};let y=null;const b=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,g()},r)},S=()=>{y!==null&&(clearTimeout(y),y=null)},E=()=>{S(),l=void 0,u=null},C=()=>{h()},T=function(...O){if(i?.aborted)return;l=this,u=O;const N=y==null;b(),p&&N&&h()};return T.schedule=b,T.cancel=E,T.flush=C,i?.addEventListener("abort",E,{once:!0}),T}e.debounce=t})(By)),By}var YT;function gz(){return YT||(YT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mz();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:p}=s,d=Array(2);l&&(d[0]="leading"),u&&(d[1]="trailing");let h,g=null;const y=t.debounce(function(...E){h=r.apply(this,E),g=null},i,{edges:d}),b=function(...E){return p!=null&&(g===null&&(g=Date.now()),Date.now()-g>=p)?(h=r.apply(this,E),g=Date.now(),y.cancel(),y.schedule(),h):(y.apply(this,E),h)},S=()=>(y.flush(),h);return b.cancel=y.cancel,b.flush=S,b}e.debounce=n})($y)),$y}var qT;function yz(){return qT||(qT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gz();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(Ly)),Ly}var Uy,FT;function vz(){return FT||(FT=1,Uy=yz().throttle),Uy}var bz=vz();const xz=ua(bz);var lu=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function VT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(n),!0).forEach(function(r){Sz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sz(e,t,n){return(t=Az(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Az(e){var t=Ez(e,"string");return typeof t=="symbol"?t:t+""}function Ez(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sa=A.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:p,children:d,debounce:h=0,id:g,className:y,onResize:b,style:S={}}=e,E=A.useRef(null),C=A.useRef();C.current=b,A.useImperativeHandle(t,()=>E.current);var[T,O]=A.useState({containerWidth:r.width,containerHeight:r.height}),N=A.useCallback((M,D)=>{O(k=>{var L=Math.round(M),G=Math.round(D);return k.containerWidth===L&&k.containerHeight===G?k:{containerWidth:L,containerHeight:G}})},[]);A.useEffect(()=>{var M=G=>{var K,{width:z,height:Y}=G[0].contentRect;N(z,Y),(K=C.current)===null||K===void 0||K.call(C,z,Y)};h>0&&(M=xz(M,h,{trailing:!0,leading:!1}));var D=new ResizeObserver(M),{width:k,height:L}=E.current.getBoundingClientRect();return N(k,L),D.observe(E.current),()=>{D.disconnect()}},[N,h]);var j=A.useMemo(()=>{var{containerWidth:M,containerHeight:D}=T;if(M<0||D<0)return null;lu(Ws(i)||Ws(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),lu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var k=Ws(i)?M:i,L=Ws(s)?D:s;return n&&n>0&&(k?L=k/n:L&&(k=L*n),p&&L>p&&(L=p)),lu(k>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,L,i,s,l,u,n),A.Children.map(d,G=>A.cloneElement(G,{width:k,height:L,style:zy({width:k,height:L},G.props.style)}))},[n,d,s,p,u,l,T,i]);return A.createElement("div",{id:g?"".concat(g):void 0,className:ht("recharts-responsive-container",y),style:zy(zy({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:p}),ref:E},A.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),ro=e=>null;ro.displayName="Cell";function Cz(e,t,n){return(t=Tz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tz(e){var t=Pz(e,"string");return typeof t=="symbol"?t:t+""}function Pz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wz{constructor(t){Cz(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function KT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Oz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(n),!0).forEach(function(r){Nz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nz(e,t,n){return(t=_z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _z(e){var t=Dz(e,"string");return typeof t=="symbol"?t:t+""}function Dz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kz={cacheSize:2e3,enableCache:!0},H2=Oz({},kz),WT=new wz(H2.cacheSize),Mz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XT="recharts_measurement_span";function jz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var QT=(e,t)=>{try{var n=document.getElementById(XT);n||(n=document.createElement("span"),n.setAttribute("id",XT),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Mz,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},cu=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Dl.isSsr)return{width:0,height:0};if(!H2.enableCache)return QT(t,n);var r=jz(t,n),i=WT.get(r);if(i)return i;var s=QT(t,n);return WT.set(r,s),s},ZT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Iz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Rz=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Y2={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Lz=Object.keys(Y2),pl="NaN";function $z(e,t){return e*Y2[t]}class ir{static parse(t){var n,[,r,i]=(n=Rz.exec(t))!==null&&n!==void 0?n:[];return new ir(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Er(t)&&(this.unit=""),n!==""&&!Iz.test(n)&&(this.num=NaN,this.unit=""),Lz.includes(n)&&(this.num=$z(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new ir(NaN,""):new ir(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ir(NaN,""):new ir(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ir(NaN,""):new ir(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ir(NaN,""):new ir(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Er(this.num)}}function q2(e){if(e.includes(pl))return pl;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=ZT.exec(t))!==null&&n!==void 0?n:[],l=ir.parse(r??""),u=ir.parse(s??""),p=i==="*"?l.multiply(u):l.divide(u);if(p.isNaN())return pl;t=t.replace(ZT,p.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,h,g,y]=(d=JT.exec(t))!==null&&d!==void 0?d:[],b=ir.parse(h??""),S=ir.parse(y??""),E=g==="+"?b.add(S):b.subtract(S);if(E.isNaN())return pl;t=t.replace(JT,E.toString())}return t}var eP=/\(([^()]*)\)/;function Bz(e){for(var t=e,n;(n=eP.exec(t))!=null;){var[,r]=n;t=t.replace(eP,q2(r))}return t}function Uz(e){var t=e.replace(/\s+/g,"");return t=Bz(t),t=q2(t),t}function zz(e){try{return Uz(e)}catch{return pl}}function Gy(e){var t=zz(e.slice(5,-1));return t===pl?"":t}var Gz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Hz=["dx","dy","angle","className","breakAll"];function X0(){return X0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X0.apply(null,arguments)}function tP(e,t){if(e==null)return{};var n,r,i=Yz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Yz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var F2=/[ \f\n\r\t\v\u2028\u2029]+/,V2=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];An(t)||(n?i=t.toString().split(""):i=t.toString().split(F2));var s=i.map(u=>({word:u,width:cu(u,r).width})),l=n?0:cu(" ",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},qz=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:p}=e,d=_e(s),h=l,g=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce((Y,ie)=>{var{word:Z,width:te}=ie,U=Y[Y.length-1];if(U&&(r==null||i||U.width+te+n<Number(r)))U.words.push(Z),U.width+=te+n;else{var q={words:[Z],width:te};Y.push(q)}return Y},[])},y=g(t),b=K=>K.reduce((z,Y)=>z.width>Y.width?z:Y);if(!d||i)return y;var S=y.length>s||b(y).width>Number(r);if(!S)return y;for(var E="…",C=K=>{var z=h.slice(0,K),Y=V2({breakAll:p,style:u,children:z+E}).wordsWithComputedWidth,ie=g(Y),Z=ie.length>s||b(ie).width>Number(r);return[Z,ie]},T=0,O=h.length-1,N=0,j;T<=O&&N<=h.length-1;){var M=Math.floor((T+O)/2),D=M-1,[k,L]=C(D),[G]=C(M);if(!k&&!G&&(T=M+1),k&&G&&(O=M-1),!k&&G){j=L;break}N++}return j||y},nP=e=>{var t=An(e)?[]:e.toString().split(F2);return[{words:t}]},Fz=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!Dl.isSsr){var u,p,d=V2({breakAll:s,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:g}=d;u=h,p=g}else return nP(r);return qz({breakAll:s,children:r,maxLines:l,style:i},u,p,t,n)}return nP(r)},rP="#808080",lh=A.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:p="end",fill:d=rP}=e,h=tP(e,Gz),g=A.useMemo(()=>Fz({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:y,dy:b,angle:S,className:E,breakAll:C}=h,T=tP(h,Hz);if(!ja(n)||!ja(r)||g.length===0)return null;var O=n+(_e(y)?y:0),N=r+(_e(b)?b:0),j;switch(p){case"start":j=Gy("calc(".concat(s,")"));break;case"middle":j=Gy("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:j=Gy("calc(".concat(g.length-1," * -").concat(i,")"));break}var M=[];if(l){var D=g[0].width,{width:k}=h;M.push("scale(".concat(_e(k)?k/D:1,")"))}return S&&M.push("rotate(".concat(S,", ").concat(O,", ").concat(N,")")),M.length&&(T.transform=M.join(" ")),A.createElement("text",X0({},tn(T,!0),{ref:t,x:O,y:N,className:ht("recharts-text",E),textAnchor:u,fill:d.includes("url")?rP:d}),g.map((L,G)=>{var K=L.words.join(C?"":" ");return A.createElement("tspan",{x:O,dy:G===0?j:i,key:"".concat(K,"-").concat(G)},K)}))});lh.displayName="Text";var Vz=["labelRef"];function Kz(e,t){if(e==null)return{};var n,r,i=Wz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Wz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function aP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(n),!0).forEach(function(r){Xz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xz(e,t,n){return(t=Qz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qz(e){var t=Zz(e,"string");return typeof t=="symbol"?t:t+""}function Zz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pi(){return pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pi.apply(null,arguments)}var K2=A.createContext(null),Jz=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=A.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return A.createElement(K2.Provider,{value:l},s)},W2=()=>{var e=A.useContext(K2),t=Lv();return e||t},eG=A.createContext(null),tG=()=>{var e=A.useContext(eG),t=Oe(L_);return e||t},nG=e=>{var{value:t,formatter:n}=e,r=An(e.children)?t:e.children;return typeof n=="function"?n(r):r},Wb=e=>e!=null&&typeof e=="function",rG=(e,t)=>{var n=Sn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},aG=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:p,innerRadius:d,outerRadius:h,startAngle:g,endAngle:y,clockWise:b}=i,S=(d+h)/2,E=rG(g,y),C=E>=0?1:-1,T,O;switch(t){case"insideStart":T=g+C*s,O=b;break;case"insideEnd":T=y-C*s,O=!b;break;case"end":T=y+C*s,O=b;break;default:throw new Error("Unsupported position ".concat(t))}O=E<=0?O:!O;var N=nn(u,p,S,T),j=nn(u,p,S,T+(O?1:-1)*359),M="M".concat(N.x,",").concat(N.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(O?0:1,`,
    `).concat(j.x,",").concat(j.y),D=An(e.id)?du("recharts-radial-line-"):e.id;return A.createElement("text",pi({},r,{dominantBaseline:"central",className:ht("recharts-radial-bar-label",l)}),A.createElement("defs",null,A.createElement("path",{id:D,d:M})),A.createElement("textPath",{xlinkHref:"#".concat(D)},n))},iG=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:p}=e,d=(u+p)/2;if(n==="outside"){var{x:h,y:g}=nn(r,i,l+t,d);return{x:h,y:g,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(s+l)/2,{x:b,y:S}=nn(r,i,y,d);return{x:b,y:S,textAnchor:"middle",verticalAnchor:"middle"}},X2=e=>"cx"in e&&_e(e.cx),sG=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!X2(n)&&(s=n);var{x:l,y:u,width:p,height:d}=t,h=d>=0?1:-1,g=h*r,y=h>0?"end":"start",b=h>0?"start":"end",S=p>=0?1:-1,E=S*r,C=S>0?"end":"start",T=S>0?"start":"end";if(i==="top"){var O={x:l+p/2,y:u-h*r,textAnchor:"middle",verticalAnchor:y};return Ft(Ft({},O),s?{height:Math.max(u-s.y,0),width:p}:{})}if(i==="bottom"){var N={x:l+p/2,y:u+d+g,textAnchor:"middle",verticalAnchor:b};return Ft(Ft({},N),s?{height:Math.max(s.y+s.height-(u+d),0),width:p}:{})}if(i==="left"){var j={x:l-E,y:u+d/2,textAnchor:C,verticalAnchor:"middle"};return Ft(Ft({},j),s?{width:Math.max(j.x-s.x,0),height:d}:{})}if(i==="right"){var M={x:l+p+E,y:u+d/2,textAnchor:T,verticalAnchor:"middle"};return Ft(Ft({},M),s?{width:Math.max(s.x+s.width-M.x,0),height:d}:{})}var D=s?{width:p,height:d}:{};return i==="insideLeft"?Ft({x:l+E,y:u+d/2,textAnchor:T,verticalAnchor:"middle"},D):i==="insideRight"?Ft({x:l+p-E,y:u+d/2,textAnchor:C,verticalAnchor:"middle"},D):i==="insideTop"?Ft({x:l+p/2,y:u+g,textAnchor:"middle",verticalAnchor:b},D):i==="insideBottom"?Ft({x:l+p/2,y:u+d-g,textAnchor:"middle",verticalAnchor:y},D):i==="insideTopLeft"?Ft({x:l+E,y:u+g,textAnchor:T,verticalAnchor:b},D):i==="insideTopRight"?Ft({x:l+p-E,y:u+g,textAnchor:C,verticalAnchor:b},D):i==="insideBottomLeft"?Ft({x:l+E,y:u+d-g,textAnchor:T,verticalAnchor:y},D):i==="insideBottomRight"?Ft({x:l+p-E,y:u+d-g,textAnchor:C,verticalAnchor:y},D):i&&typeof i=="object"&&(_e(i.x)||Ws(i.x))&&(_e(i.y)||Ws(i.y))?Ft({x:l+Hn(i.x,p),y:u+Hn(i.y,d),textAnchor:"end",verticalAnchor:"end"},D):Ft({x:l+p/2,y:u+d/2,textAnchor:"middle",verticalAnchor:"middle"},D)},oG={offset:5};function rs(e){var t=Zr(e,oG),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:p,labelRef:d}=t,h=tG(),g=W2(),y=r==="center"?g:h??g,b=n||y;if(!b||An(i)&&An(s)&&!A.isValidElement(l)&&typeof l!="function")return null;var S=Ft(Ft({},t),{},{viewBox:b});if(A.isValidElement(l)){var{labelRef:E}=S,C=Kz(S,Vz);return A.cloneElement(l,C)}var T;if(typeof l=="function"){if(T=A.createElement(l,S),A.isValidElement(T))return T}else T=nG(t);var O=X2(b),N=tn(t,!0);if(O&&(r==="insideStart"||r==="insideEnd"||r==="end"))return aG(t,r,T,N,b);var j=O?iG(b,t.offset,t.position):sG(t,b);return A.createElement(lh,pi({ref:d,className:ht("recharts-label",u)},N,j,{breakAll:p}),T)}rs.displayName="Label";var lG=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?A.createElement(rs,pi({key:"label-implicit"},r)):ja(e)?A.createElement(rs,pi({key:"label-implicit",value:e},r)):A.isValidElement(e)?e.type===rs?A.cloneElement(e,Ft({key:"label-implicit"},r)):A.createElement(rs,pi({key:"label-implicit",content:e},r)):Wb(e)?A.createElement(rs,pi({key:"label-implicit",content:e},r)):e&&typeof e=="object"?A.createElement(rs,pi({},e,{key:"label-implicit"},r)):null};function cG(e){var{label:t}=e,n=W2();return lG(t,n)||null}var Hy={},Yy={},iP;function uG(){return iP||(iP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Yy)),Yy}var qy={},sP;function dG(){return sP||(sP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(qy)),qy}var oP;function fG(){return oP||(oP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uG(),n=dG(),r=wv();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(Hy)),Hy}var Fy,lP;function pG(){return lP||(lP=1,Fy=fG().last),Fy}var hG=pG();const mG=ua(hG);var gG=["valueAccessor"],yG=["dataKey","clockWise","id","textBreakAll"];function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xp.apply(null,arguments)}function cP(e,t){if(e==null)return{};var n,r,i=vG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var bG=e=>Array.isArray(e.value)?mG(e.value):e.value,Q2=A.createContext(void 0),xG=Q2.Provider,Z2=A.createContext(void 0),SG=Z2.Provider;function AG(){return A.useContext(Q2)}function EG(){return A.useContext(Z2)}function $f(e){var{valueAccessor:t=bG}=e,n=cP(e,gG),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=cP(n,yG),p=AG(),d=EG(),h=p||d;return!h||!h.length?null:A.createElement(lr,{className:"recharts-label-list"},h.map((g,y)=>{var b,S=An(r)?t(g,y):Dt(g&&g.payload,r),E=An(s)?{}:{id:"".concat(s,"-").concat(y)};return A.createElement(rs,xp({},tn(g,!0),u,E,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:S,textBreakAll:l,viewBox:g.viewBox,key:"label-".concat(y),index:y}))}))}$f.displayName="LabelList";function J2(e){var{label:t}=e;return t?t===!0?A.createElement($f,{key:"labelList-implicit"}):A.isValidElement(t)||Wb(t)?A.createElement($f,{key:"labelList-implicit",content:t}):typeof t=="object"?A.createElement($f,xp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var eD=e=>e.graphicalItems.polarItems,CG=ae([jt,Du],Eb),Xb=ae([eD,Vt,CG],Tb),TG=ae([Xb],Pb),Qb=ae([TG,db],wb),PG=ae([Qb,Vt,Xb],Nb),wG=ae([Qb,Vt,Xb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=Dt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:Dt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),uP=()=>{},OG=ae([Vt,r2,uP,wG,uP,it,jt],Db),tD=ae([Vt,it,Qb,PG,_u,jt,OG],kb),NG=ae([tD,Vt,Ll],Ib);ae([Vt,tD,NG,jt],Lb);var _G={radiusAxis:{},angleAxis:{}},nD=Pr({name:"polarAxis",initialState:_G,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:NV,removeRadiusAxis:_V,addAngleAxis:DV,removeAngleAxis:kV}=nD.actions,DG=nD.reducer;function dP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(n),!0).forEach(function(r){kG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kG(e,t,n){return(t=MG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MG(e){var t=jG(e,"string");return typeof t=="symbol"?t:t+""}function jG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IG=(e,t)=>t,Zb=ae([eD,IG],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),RG=[],Jb=(e,t,n)=>n?.length===0?RG:n,rD=ae([db,Zb,Jb],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>fP(fP({},t.presentationProps),s.props))),i!=null)return i}}),LG=ae([rD,Zb,Jb],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=Dt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:Bp(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),$G=ae([rD,Zb,Jb,dn],(e,t,n,r)=>{if(!(t==null||e==null))return LH({offset:r,pieSettings:t,displayedData:e,cells:n})}),Vy={},pP;function BG(){return pP||(pP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(Vy)),Vy}var Ky,hP;function UG(){return hP||(hP=1,Ky=BG().isPlainObject),Ky}var zG=UG();const GG=ua(zG);function mP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(n),!0).forEach(function(r){HG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HG(e,t,n){return(t=YG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YG(e){var t=qG(e,"string");return typeof t=="symbol"?t:t+""}function qG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sp(){return Sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sp.apply(null,arguments)}var yP=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},FG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VG=e=>{var t=Zr(e,FG),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:p,animationDuration:d,animationBegin:h,isUpdateAnimationActive:g}=t,y=A.useRef(),[b,S]=A.useState(-1),E=A.useRef(i),C=A.useRef(s),T=A.useRef(l),O=A.useRef(n),N=A.useRef(r),j=Fp(e,"trapezoid-");if(A.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var Z=y.current.getTotalLength();Z&&S(Z)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var M=ht("recharts-trapezoid",u);if(!g)return A.createElement("g",null,A.createElement("path",Sp({},tn(t,!0),{className:M,d:yP(n,r,i,s,l)})));var D=E.current,k=C.current,L=T.current,G=O.current,K=N.current,z="0px ".concat(b===-1?1:b,"px"),Y="".concat(b,"px 0px"),ie=wN(["strokeDasharray"],d,p);return A.createElement(qp,{animationId:j,key:j,canBegin:b>0,duration:d,easing:p,isActive:g,begin:h},Z=>{var te=Dn(D,i,Z),U=Dn(k,s,Z),q=Dn(L,l,Z),Q=Dn(G,n,Z),Se=Dn(K,r,Z);y.current&&(E.current=te,C.current=U,T.current=q,O.current=Q,N.current=Se);var I=Z>0?{transition:ie,strokeDasharray:Y}:{strokeDasharray:z};return A.createElement("path",Sp({},tn(t,!0),{className:M,d:yP(Q,Se,te,U,q),ref:y,style:gP(gP({},I),t.style)}))})},KG=["option","shapeType","propTransformer","activeClassName","isActive"];function WG(e,t){if(e==null)return{};var n,r,i=XG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function XG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ap(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(n),!0).forEach(function(r){QG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QG(e,t,n){return(t=ZG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZG(e){var t=JG(e,"string");return typeof t=="symbol"?t:t+""}function JG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eH(e,t){return Ap(Ap({},t),e)}function tH(e,t){return e==="symbols"}function bP(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return A.createElement(DN,n);case"trapezoid":return A.createElement(VG,n);case"sector":return A.createElement(jN,n);case"symbols":if(tH(t))return A.createElement(Cv,n);break;default:return null}}function nH(e){return A.isValidElement(e)?e.props:e}function aD(e){var{option:t,shapeType:n,propTransformer:r=eH,activeClassName:i="recharts-active-shape",isActive:s}=e,l=WG(e,KG),u;if(A.isValidElement(t))u=A.cloneElement(t,Ap(Ap({},l),nH(t)));else if(typeof t=="function")u=t(l);else if(GG(t)&&typeof t!="boolean"){var p=r(t,l);u=A.createElement(bP,{shapeType:n,elementProps:p})}else{var d=l;u=A.createElement(bP,{shapeType:n,elementProps:d})}return s?A.createElement(lr,{className:i},u):u}var ex=(e,t)=>{var n=Lt();return(r,i)=>s=>{e?.(r,i,s),n(b2({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},tx=e=>{var t=Lt();return(n,r)=>i=>{e?.(n,r,i),t($6())}},nx=(e,t)=>{var n=Lt();return(r,i)=>s=>{e?.(r,i,s),n(B6({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function iD(e){var{fn:t,args:n}=e,r=Lt(),i=Qr();return A.useEffect(()=>{if(!i){var s=t(n);return r(I6(s)),()=>{r(R6(s))}}},[t,n,r,i]),null}var sD=()=>{};function rH(e){var{legendPayload:t}=e,n=Lt(),r=Qr();return A.useEffect(()=>r?sD:(n(EN(t)),()=>{n(CN(t))}),[n,r,t]),null}function aH(e){var{legendPayload:t}=e,n=Lt(),r=Oe(it);return A.useEffect(()=>r!=="centric"&&r!=="radial"?sD:(n(EN(t)),()=>{n(CN(t))}),[n,r,t]),null}var Wy,iH=()=>{var[e]=A.useState(()=>du("uid-"));return e},sH=(Wy=aM.useId)!==null&&Wy!==void 0?Wy:iH;function oH(e,t){var n=sH();return t||(e?"".concat(e,"-").concat(n):n)}var lH=A.createContext(void 0),oD=e=>{var{id:t,type:n,children:r}=e,i=oH("recharts-".concat(n),t);return A.createElement(lH.Provider,{value:i},r(i))},cH={cartesianItems:[],polarItems:[]},lD=Pr({name:"graphicalItems",initialState:cH,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=gi(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=gi(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=gi(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:uH,replaceCartesianGraphicalItem:dH,removeCartesianGraphicalItem:fH,addPolarGraphicalItem:pH,removePolarGraphicalItem:hH}=lD.actions,mH=lD.reducer;function gH(e){var t=Lt(),n=A.useRef(null);return A.useEffect(()=>{n.current===null?t(uH(e)):n.current!==e&&t(dH({prev:n.current,next:e})),n.current=e},[t,e]),A.useEffect(()=>()=>{n.current&&(t(fH(n.current)),n.current=null)},[t]),null}function yH(e){var t=Lt();return A.useEffect(()=>(t(pH(e)),()=>{t(hH(e))}),[t,e]),null}var vH=["onMouseEnter","onClick","onMouseLeave"],bH=["id"],xH=["id"];function rx(e,t){if(e==null)return{};var n,r,i=SH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function SH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function xP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(n),!0).forEach(function(r){AH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AH(e,t,n){return(t=EH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EH(e){var t=CH(e,"string");return typeof t=="symbol"?t:t+""}function CH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cs(){return cs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cs.apply(null,arguments)}function TH(e){var t=A.useMemo(()=>bv(e.children,ro),[e.children]),n=Oe(r=>LG(r,e.id,t));return n==null?null:A.createElement(aH,{legendPayload:n})}function PH(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:p,tooltipType:d}=e;return{dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:Bp(u,t),hide:p,type:d,color:l,unit:""}}}var wH=(e,t)=>e>t?"start":e<t?"end":"middle",OH=(e,t,n)=>Hn(typeof t=="function"?t(e):t,n,n*.8),NH=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=hN(s,l),p=i+Hn(e.cx,s,s/2),d=r+Hn(e.cy,l,l/2),h=Hn(e.innerRadius,u,0),g=OH(n,e.outerRadius,u),y=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:p,cy:d,innerRadius:h,outerRadius:g,maxRadius:y}},_H=(e,t)=>{var n=Sn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function DH(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var kH=(e,t)=>{if(A.isValidElement(e))return A.cloneElement(e,t);if(typeof e=="function")return e(t);var n=ht("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return A.createElement(PN,cs({},t,{type:"linear",className:n}))},MH=(e,t,n)=>{if(A.isValidElement(e))return A.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),A.isValidElement(r)))return r;var i=ht("recharts-pie-label-text",DH(e));return A.createElement(lh,cs({},t,{alignmentBaseline:"middle",className:i}),r)};function jH(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=mo(n),p=tn(i,!1),d=tn(s,!1),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((y,b)=>{var S=(y.startAngle+y.endAngle)/2,E=nn(y.cx,y.cy,y.outerRadius+h,S),C=_t(_t(_t(_t({},u),y),{},{stroke:"none"},p),{},{index:b,textAnchor:wH(E.x,y.cx)},E),T=_t(_t(_t(_t({},u),y),{},{fill:"none",stroke:y.fill},d),{},{index:b,points:[nn(y.cx,y.cy,y.outerRadius,S),E],key:"line"});return A.createElement(lr,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(b)},s&&kH(s,T),MH(i,C,Dt(y,l)))});return A.createElement(lr,{className:"recharts-pie-labels"},g)}function IH(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(J2,{label:n.label}):A.createElement(jH,{sectors:t,props:n,showLabels:r})}function RH(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=Oe(co),{onMouseEnter:l,onClick:u,onMouseLeave:p}=i,d=rx(i,vH),h=ex(l,i.dataKey),g=tx(p),y=nx(u,i.dataKey);return t==null||t.length===0?null:A.createElement(A.Fragment,null,t.map((b,S)=>{if(b?.startAngle===0&&b?.endAngle===0&&t.length!==1)return null;var E=n&&String(S)===s,C=s?r:null,T=E?n:C,O=_t(_t({},b),{},{stroke:b.stroke,tabIndex:-1,[bN]:S,[xN]:i.dataKey});return A.createElement(lr,cs({tabIndex:-1,className:"recharts-pie-sector"},Au(d,b,S),{onMouseEnter:h(b,S),onMouseLeave:g(b,S),onClick:y(b,S),key:"sector-".concat(b?.startAngle,"-").concat(b?.endAngle,"-").concat(b.midAngle,"-").concat(S)}),A.createElement(aD,cs({option:T,isActive:E,shapeType:"sector"},O)))}))}function LH(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:p,dataKey:d,nameKey:h,tooltipType:g}=n,y=Math.abs(n.minAngle),b=_H(u,p),S=Math.abs(b),E=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,C=r.filter(D=>Dt(D,d,0)!==0).length,T=(S>=360?C:C-1)*E,O=S-C*y-T,N=r.reduce((D,k)=>{var L=Dt(k,d,0);return D+(_e(L)?L:0)},0),j;if(N>0){var M;j=r.map((D,k)=>{var L=Dt(D,d,0),G=Dt(D,h,k),K=NH(n,s,D),z=(_e(L)?L:0)/N,Y,ie=_t(_t({},D),i&&i[k]&&i[k].props);k?Y=M.endAngle+Sn(b)*E*(L!==0?1:0):Y=u;var Z=Y+Sn(b)*((L!==0?y:0)+z*O),te=(Y+Z)/2,U=(K.innerRadius+K.outerRadius)/2,q=[{name:G,value:L,payload:ie,dataKey:d,type:g}],Q=nn(K.cx,K.cy,U,te);return M=_t(_t(_t(_t({},n.presentationProps),{},{percent:z,cornerRadius:l,name:G,tooltipPayload:q,midAngle:te,middleRadius:U,tooltipPosition:Q},ie),K),{},{value:Dt(D,d),startAngle:Y,endAngle:Z,payload:ie,paddingAngle:Sn(b)*E}),M})}return j}function $H(e){var{showLabels:t,sectors:n,children:r}=e,i=A.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return A.createElement(SG,{value:t?i:void 0},r)}function BH(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:p,inactiveShape:d,onAnimationStart:h,onAnimationEnd:g}=t,y=Fp(t,"recharts-pie-"),b=n.current,[S,E]=A.useState(!1),C=A.useCallback(()=>{typeof g=="function"&&g(),E(!1)},[g]),T=A.useCallback(()=>{typeof h=="function"&&h(),E(!0)},[h]);return A.createElement($H,{showLabels:!S,sectors:r},A.createElement(qp,{animationId:y,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:T,onAnimationEnd:C,key:y},O=>{var N=[],j=r&&r[0],M=j?.startAngle;return r?.forEach((D,k)=>{var L=b&&b[k],G=k>0?io(D,"paddingAngle",0):0;if(L){var K=Dn(L.endAngle-L.startAngle,D.endAngle-D.startAngle,O),z=_t(_t({},D),{},{startAngle:M+G,endAngle:M+K+G});N.push(z),M=z.endAngle}else{var{endAngle:Y,startAngle:ie}=D,Z=Dn(0,Y-ie,O),te=_t(_t({},D),{},{startAngle:M+G,endAngle:M+Z+G});N.push(te),M=te.endAngle}}),n.current=N,A.createElement(lr,null,A.createElement(RH,{sectors:N,activeShape:p,inactiveShape:d,allOtherPieProps:t}))}),A.createElement(IH,{showLabels:!S,sectors:r,props:t}),t.children)}var UH={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Dl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function zH(e){var{id:t}=e,n=rx(e,bH),{hide:r,className:i,rootTabIndex:s}=e,l=A.useMemo(()=>bv(e.children,ro),[e.children]),u=Oe(h=>$G(h,t,l)),p=A.useRef(null),d=ht("recharts-pie",i);return r||u==null?(p.current=null,A.createElement(lr,{tabIndex:s,className:d})):A.createElement(A.Fragment,null,A.createElement(iD,{fn:PH,args:_t(_t({},e),{},{sectors:u})}),A.createElement(lr,{tabIndex:s,className:d},A.createElement(BH,{props:_t(_t({},n),{},{sectors:u}),previousSectorsRef:p})))}function Bf(e){var t=Zr(e,UH),{id:n}=t,r=rx(t,xH),i=mo(r);return A.createElement(oD,{id:n,type:"pie"},s=>A.createElement(A.Fragment,null,A.createElement(yH,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),A.createElement(TH,cs({},r,{id:s})),A.createElement(zH,cs({},r,{id:s}))))}Bf.displayName="Pie";function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(n),!0).forEach(function(r){GH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GH(e,t,n){return(t=HH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HH(e){var t=YH(e,"string");return typeof t=="symbol"?t:t+""}function YH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qH={xAxis:{},yAxis:{},zAxis:{}},cD=Pr({name:"cartesianAxis",initialState:qH,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=AP(AP({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:FH,removeXAxis:VH,addYAxis:KH,removeYAxis:WH,addZAxis:MV,removeZAxis:jV,updateYAxisWidth:XH}=cD.actions,QH=cD.reducer,ZH=ae([dn],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),JH=ae([ZH,Ei,Ci],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),uD=()=>Oe(JH),e9="Invariant failed";function t9(e,t){throw new Error(e9)}var n9=["x","y"];function Q0(){return Q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q0.apply(null,arguments)}function EP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(n),!0).forEach(function(r){r9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r9(e,t,n){return(t=a9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a9(e){var t=i9(e,"string");return typeof t=="symbol"?t:t+""}function i9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s9(e,t){if(e==null)return{};var n,r,i=o9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function l9(e,t){var{x:n,y:r}=e,i=s9(e,n9),s="".concat(n),l=parseInt(s,10),u="".concat(r),p=parseInt(u,10),d="".concat(t.height||i.height),h=parseInt(d,10),g="".concat(t.width||i.width),y=parseInt(g,10);return tu(tu(tu(tu(tu({},t),i),l?{x:l}:{}),p?{y:p}:{}),{},{height:h,width:y,name:t.name,radius:t.radius})}function ax(e){return A.createElement(aD,Q0({shapeType:"rectangle",propTransformer:l9,activeClassName:"recharts-active-bar"},e))}var c9=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(_e(t))return t;var s=_e(r)||An(r);return s?t(r,i):(s||t9(),n)}},u9={},dD=Pr({name:"errorBars",initialState:u9,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:IV,replaceErrorBar:RV,removeErrorBar:LV}=dD.actions,d9=dD.reducer,f9=["children"];function p9(e,t){if(e==null)return{};var n,r,i=h9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var m9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},g9=A.createContext(m9);function y9(e){var{children:t}=e,n=p9(e,f9);return A.createElement(g9.Provider,{value:n},t)}function fD(e,t){var n,r,i=Oe(d=>ms(d,e)),s=Oe(d=>gs(d,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:yr.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:vr.allowDataOverflow,p=l||u;return{needClip:p,needClipX:l,needClipY:u}}function v9(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=uD(),{needClipX:s,needClipY:l,needClip:u}=fD(t,n);if(!u)return null;var{x:p,y:d,width:h,height:g}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:s?p:p-h/2,y:l?d:d-g/2,width:s?h:h*2,height:l?g:g*2}))}var b9=["onMouseEnter","onMouseLeave","onClick"],x9=["value","background","tooltipPosition"],S9=["id"],A9=["onMouseEnter","onClick","onMouseLeave"];function us(){return us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},us.apply(null,arguments)}function CP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(n),!0).forEach(function(r){E9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E9(e,t,n){return(t=C9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C9(e){var t=T9(e,"string");return typeof t=="symbol"?t:t+""}function T9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ep(e,t){if(e==null)return{};var n,r,i=P9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var w9=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Bp(n,t),payload:e}]};function O9(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Bp(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function N9(e){var t=Oe(co),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:p}=s,d=Ep(s,b9),h=ex(l,r),g=tx(u),y=nx(p,r);if(!i||n==null)return null;var b=tn(i,!1);return A.createElement(A.Fragment,null,n.map((S,E)=>{var{value:C,background:T,tooltipPosition:O}=S,N=Ep(S,x9);if(!T)return null;var j=h(S,E),M=g(S,E),D=y(S,E),k=Kn(Kn(Kn(Kn(Kn({option:i,isActive:String(E)===t},N),{},{fill:"#eee"},T),b),Au(d,S,E)),{},{onMouseEnter:j,onMouseLeave:M,onClick:D,dataKey:r,index:E,className:"recharts-bar-background-rectangle"});return A.createElement(ax,us({key:"background-bar-".concat(E)},k))}))}function _9(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return Kn(Kn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return A.createElement(xG,{value:t?i:void 0},n)}function D9(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=Oe(co),p=Oe(k2),d=n&&String(s)===u&&(p==null||l===p),h=d?n:t;return A.createElement(ax,us({},r,i,{isActive:d,option:h,index:s,dataKey:l}))}function k9(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return A.createElement(ax,us({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function M9(e){var{data:t,props:n}=e,r=mo(n),{id:i}=r,s=Ep(r,S9),{shape:l,dataKey:u,activeBar:p}=n,{onMouseEnter:d,onClick:h,onMouseLeave:g}=n,y=Ep(n,A9),b=ex(d,u),S=tx(g),E=nx(h,u);return t?A.createElement(A.Fragment,null,t.map((C,T)=>A.createElement(lr,us({className:"recharts-bar-rectangle"},Au(y,C,T),{onMouseEnter:b(C,T),onMouseLeave:S(C,T),onClick:E(C,T),key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(T)}),p?A.createElement(D9,{shape:l,activeBar:p,baseProps:s,entry:C,index:T,dataKey:u}):A.createElement(k9,{shape:l,baseProps:s,entry:C,index:T,dataKey:u})))):null}function j9(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:p,onAnimationEnd:d,onAnimationStart:h}=t,g=n.current,y=Fp(t,"recharts-bar-"),[b,S]=A.useState(!1),E=!b,C=A.useCallback(()=>{typeof d=="function"&&d(),S(!1)},[d]),T=A.useCallback(()=>{typeof h=="function"&&h(),S(!0)},[h]);return A.createElement(_9,{showLabels:E,rects:r},A.createElement(qp,{animationId:y,begin:l,duration:u,isActive:s,easing:p,onAnimationEnd:C,onAnimationStart:T,key:y},O=>{var N=O===1?r:r?.map((j,M)=>{var D=g&&g[M];if(D)return Kn(Kn({},j),{},{x:Dn(D.x,j.x,O),y:Dn(D.y,j.y,O),width:Dn(D.width,j.width,O),height:Dn(D.height,j.height,O)});if(i==="horizontal"){var k=Dn(0,j.height,O);return Kn(Kn({},j),{},{y:j.y+j.height-k,height:k})}var L=Dn(0,j.width,O);return Kn(Kn({},j),{},{width:L})});return O>0&&(n.current=N??null),N==null?null:A.createElement(lr,null,A.createElement(M9,{props:t,data:N}))}),A.createElement(J2,{label:t.label}),t.children)}function I9(e){var t=A.useRef(null);return A.createElement(j9,{previousRectanglesRef:t,props:e})}var pD=0,R9=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Dt(e,t)}};class L9 extends A.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:p,id:d}=this.props;if(t||n==null)return null;var h=ht("recharts-bar",i),g=d;return A.createElement(lr,{className:h,id:d},u&&A.createElement("defs",null,A.createElement(v9,{clipPathId:g,xAxisId:s,yAxisId:l})),A.createElement(lr,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},A.createElement(N9,{data:n,dataKey:r,background:p,allOtherBarProps:this.props}),A.createElement(I9,this.props)))}}var $9={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Dl.isSsr,legendType:"rect",minPointSize:pD,xAxisId:0,yAxisId:0};function B9(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:d,isAnimationActive:h}=e,{needClip:g}=fD(t,n),y=Uv(),b=Qr(),S=bv(e.children,ro),E=Oe(O=>f7(O,t,n,b,e.id,S));if(y!=="vertical"&&y!=="horizontal")return null;var C,T=E?.[0];return T==null||T.height==null||T.width==null?C=0:C=y==="vertical"?T.height/2:T.width/2,A.createElement(y9,{xAxisId:t,yAxisId:n,data:E,dataPointFormatter:R9,errorBarOffset:C},A.createElement(L9,us({},e,{layout:y,needClip:g,data:E,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:p,animationEasing:d,isAnimationActive:h})))}function U9(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:p,yAxisTicks:d,stackedData:h,displayedData:g,offset:y,cells:b,parentViewBox:S}=e,E=t==="horizontal"?u:l,C=h?E.scale.domain():null,T=n5({numericAxis:E});return g.map((O,N)=>{var j,M,D,k,L,G;h?j=X3(h[N],C):(j=Dt(O,n),Array.isArray(j)||(j=[T,j]));var K=c9(r,pD)(j[1],N);if(t==="horizontal"){var z,[Y,ie]=[u.scale(j[0]),u.scale(j[1])];M=dC({axis:l,ticks:p,bandSize:s,offset:i.offset,entry:O,index:N}),D=(z=ie??Y)!==null&&z!==void 0?z:void 0,k=i.size;var Z=Y-ie;if(L=Er(Z)?0:Z,G={x:M,y:y.top,width:k,height:y.height},Math.abs(K)>0&&Math.abs(L)<Math.abs(K)){var te=Sn(L||K)*(Math.abs(K)-Math.abs(L));D-=te,L+=te}}else{var[U,q]=[l.scale(j[0]),l.scale(j[1])];if(M=U,D=dC({axis:u,ticks:d,bandSize:s,offset:i.offset,entry:O,index:N}),k=q-U,L=i.size,G={x:y.left,y:D,width:y.width,height:L},Math.abs(K)>0&&Math.abs(k)<Math.abs(K)){var Q=Sn(k||K)*(Math.abs(K)-Math.abs(k));k+=Q}}if(M==null||D==null||k==null||L==null)return null;var Se=Kn(Kn({},O),{},{x:M,y:D,width:k,height:L,value:h?j:j[1],payload:O,background:G,tooltipPosition:{x:M+k/2,y:D+L/2},parentViewBox:S},b&&b[N]&&b[N].props);return Se}).filter(Boolean)}function ci(e){var t=Zr(e,$9),n=Qr();return A.createElement(oD,{id:t.id,type:"bar"},r=>A.createElement(A.Fragment,null,A.createElement(rH,{legendPayload:w9(t)}),A.createElement(iD,{fn:O9,args:t}),A.createElement(gH,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:t5(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),A.createElement(B9,us({},t,{id:r}))))}ci.displayName="Bar";function TP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TP(Object(n),!0).forEach(function(r){z9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z9(e,t,n){return(t=G9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G9(e){var t=H9(e,"string");return typeof t=="symbol"?t:t+""}function H9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y9=(e,t)=>t,q9=(e,t,n)=>n,F9=(e,t,n,r)=>r,V9=(e,t,n,r,i)=>i,Lu=ae([Cb,V9],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),K9=ae([Lu],e=>e?.maxBarSize),W9=(e,t,n,r,i,s)=>s,PP=(e,t,n)=>{var r=n??e;if(!An(r))return Hn(r,t,0)},X9=ae([it,Cb,Y9,q9,F9],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Q9=(e,t,n,r)=>{var i=it(e);return i==="horizontal"?q0(e,"yAxis",n,r):q0(e,"xAxis",t,r)},Z9=(e,t,n)=>{var r=it(e);return r==="horizontal"?OT(e,"xAxis",t):OT(e,"yAxis",n)},J9=(e,t,n)=>{var r={},i=e.filter(nh),s=e.filter(d=>d.stackId==null),l=i.reduce((d,h)=>(d[h.stackId]||(d[h.stackId]=[]),d[h.stackId].push(h),d),r),u=Object.entries(l).map(d=>{var[h,g]=d,y=g.map(S=>S.dataKey),b=PP(t,n,g[0].barSize);return{stackId:h,dataKeys:y,barSize:b}}),p=s.map(d=>{var h=[d.dataKey].filter(y=>y!=null),g=PP(t,n,d.barSize);return{stackId:void 0,dataKeys:h,barSize:g}});return[...u,...p]},e7=ae([X9,RB,Z9],J9),t7=(e,t,n,r,i)=>{var s,l,u=Lu(e,t,n,r,i);if(u!=null){var p=it(e),d=__(e),{maxBarSize:h}=u,g=An(h)?d:h,y,b;return p==="horizontal"?(y=Ol(e,"xAxis",t,r),b=wl(e,"xAxis",t,r)):(y=Ol(e,"yAxis",n,r),b=wl(e,"yAxis",n,r)),(s=(l=Iv(y,b,!0))!==null&&l!==void 0?l:g)!==null&&s!==void 0?s:0}},hD=(e,t,n,r)=>{var i=it(e),s,l;return i==="horizontal"?(s=Ol(e,"xAxis",t,r),l=wl(e,"xAxis",t,r)):(s=Ol(e,"yAxis",n,r),l=wl(e,"yAxis",n,r)),Iv(s,l)};function n7(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=Hn(e,n,0,!0),u,p=[];if(Tr(r[0].barSize)){var d=!1,h=n/s,g=r.reduce((T,O)=>T+(O.barSize||0),0);g+=(s-1)*l,g>=n&&(g-=(s-1)*l,l=0),g>=n&&h>0&&(d=!0,h*=.9,g=s*h);var y=(n-g)/2>>0,b={offset:y-l,size:0};u=r.reduce((T,O)=>{var N,j={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:b.offset+b.size+l,size:d?h:(N=O.barSize)!==null&&N!==void 0?N:0}},M=[...T,j];return b=M[M.length-1].position,M},p)}else{var S=Hn(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var E=(n-2*S-(s-1)*l)/s;E>1&&(E>>=0);var C=Tr(i)?Math.min(E,i):E;u=r.reduce((T,O,N)=>[...T,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:S+(E+l)*N+(E-C)/2,size:C}}],p)}return u}}var r7=(e,t,n,r,i,s,l)=>{var u=An(l)?t:l,p=n7(n,r,i!==s?i:s,e,u);return i!==s&&p!=null&&(p=p.map(d=>Nf(Nf({},d),{},{position:Nf(Nf({},d.position),{},{offset:d.position.offset-i/2})}))),p},a7=ae([e7,__,IB,D_,t7,hD,K9],r7),i7=(e,t,n,r)=>Ol(e,"xAxis",t,r),s7=(e,t,n,r)=>Ol(e,"yAxis",n,r),o7=(e,t,n,r)=>wl(e,"xAxis",t,r),l7=(e,t,n,r)=>wl(e,"yAxis",n,r),c7=ae([a7,Lu],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),u7=(e,t)=>{var n=Sb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},d7=ae([Q9,Lu],u7),f7=ae([dn,Rv,i7,s7,o7,l7,c7,it,fb,hD,d7,Lu,W9],(e,t,n,r,i,s,l,u,p,d,h,g,y)=>{var{chartData:b,dataStartIndex:S,dataEndIndex:E}=p;if(!(g==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||d==null)){var{data:C}=g,T;if(C!=null&&C.length>0?T=C:T=b?.slice(S,E+1),T!=null)return U9({layout:u,barSettings:g,pos:l,parentViewBox:t,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:h,displayedData:T,offset:e,cells:y})}}),mD=e=>{var{chartData:t}=e,n=Lt(),r=Qr();return A.useEffect(()=>r?()=>{}:(n($T(t)),()=>{n($T(void 0))}),[t,n,r]),null},wP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},gD=Pr({name:"brush",initialState:wP,reducers:{setBrushSettings(e,t){return t.payload==null?wP:t.payload}}}),{setBrushSettings:$V}=gD.actions,p7=gD.reducer;function h7(e,t,n){return(t=m7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m7(e){var t=g7(e,"string");return typeof t=="symbol"?t:t+""}function g7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ix{static create(t){return new ix(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}h7(ix,"EPS",1e-4);function y7(e){return(e%180+180)%180}var v7=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=y7(i),l=s*Math.PI/180,u=Math.atan(r/n),p=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(p)},b7={dots:[],areas:[],lines:[]},yD=Pr({name:"referenceElements",initialState:b7,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=gi(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=gi(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=gi(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:BV,removeDot:UV,addArea:zV,removeArea:GV,addLine:HV,removeLine:YV}=yD.actions,x7=yD.reducer,S7=A.createContext(void 0),A7=e=>{var{children:t}=e,[n]=A.useState("".concat(du("recharts"),"-clip")),r=uD();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return A.createElement(S7.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function Xy(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function vD(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function E7(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return v7(r,n)}function C7(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Cp(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function T7(e,t){return vD(e,t+1)}function P7(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,p=0,d=1,h=l,g=function(){var S=r?.[p];if(S===void 0)return{v:vD(r,d)};var E=p,C,T=()=>(C===void 0&&(C=n(S,E)),C),O=S.coordinate,N=p===0||Cp(e,O,T,h,u);N||(p=0,h=l,d+=1),N&&(h=O+e*(T()/2+i),p+=d)},y;d<=s.length;)if(y=g(),y)return y.v;return[]}function OP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(n),!0).forEach(function(r){w7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w7(e,t,n){return(t=O7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O7(e){var t=N7(e,"string");return typeof t=="symbol"?t:t+""}function N7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _7(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:p}=t,d=function(y){var b=s[y],S,E=()=>(S===void 0&&(S=n(b,y)),S);if(y===l-1){var C=e*(b.coordinate+e*E()/2-p);s[y]=b=Un(Un({},b),{},{tickCoord:C>0?b.coordinate-C*e:b.coordinate})}else s[y]=b=Un(Un({},b),{},{tickCoord:b.coordinate});var T=Cp(e,b.tickCoord,E,u,p);T&&(p=b.tickCoord-e*(E()/2+i),s[y]=Un(Un({},b),{},{isShow:!0}))},h=l-1;h>=0;h--)d(h);return s}function D7(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:p,end:d}=t;if(s){var h=r[u-1],g=n(h,u-1),y=e*(h.coordinate+e*g/2-d);l[u-1]=h=Un(Un({},h),{},{tickCoord:y>0?h.coordinate-y*e:h.coordinate});var b=Cp(e,h.tickCoord,()=>g,p,d);b&&(d=h.tickCoord-e*(g/2+i),l[u-1]=Un(Un({},h),{},{isShow:!0}))}for(var S=s?u-1:u,E=function(O){var N=l[O],j,M=()=>(j===void 0&&(j=n(N,O)),j);if(O===0){var D=e*(N.coordinate-e*M()/2-p);l[O]=N=Un(Un({},N),{},{tickCoord:D<0?N.coordinate-D*e:N.coordinate})}else l[O]=N=Un(Un({},N),{},{tickCoord:N.coordinate});var k=Cp(e,N.tickCoord,M,p,d);k&&(p=N.tickCoord+e*(M()/2+i),l[O]=Un(Un({},N),{},{isShow:!0}))},C=0;C<S;C++)E(C);return l}function sx(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:p,tickFormatter:d,unit:h,angle:g}=e;if(!i||!i.length||!r)return[];if(_e(p)||Dl.isSsr){var y;return(y=T7(i,_e(p)?p:0))!==null&&y!==void 0?y:[]}var b=[],S=u==="top"||u==="bottom"?"width":"height",E=h&&S==="width"?cu(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},C=(N,j)=>{var M=typeof d=="function"?d(N.value,j):N.value;return S==="width"?E7(cu(M,{fontSize:t,letterSpacing:n}),E,g):cu(M,{fontSize:t,letterSpacing:n})[S]},T=i.length>=2?Sn(i[1].coordinate-i[0].coordinate):1,O=C7(s,T,S);return p==="equidistantPreserveStart"?P7(T,O,C,i,l):(p==="preserveStart"||p==="preserveStartEnd"?b=D7(T,O,C,i,l,p==="preserveStartEnd"):b=_7(T,O,C,i,l),b.filter(N=>N.isShow))}var k7=["viewBox"],M7=["viewBox"];function hl(){return hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hl.apply(null,arguments)}function NP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(n),!0).forEach(function(r){ox(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _P(e,t){if(e==null)return{};var n,r,i=j7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function j7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ox(e,t,n){return(t=I7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I7(e){var t=R7(e,"string");return typeof t=="symbol"?t:t+""}function R7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ys extends A.Component{constructor(t){super(t),this.tickRefs=A.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=_P(t,k7),s=this.props,{viewBox:l}=s,u=_P(s,M7);return!Xy(r,l)||!Xy(i,u)||!Xy(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:p,tickMargin:d}=this.props,h,g,y,b,S,E,C=p?-1:1,T=t.tickSize||u,O=_e(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":h=g=t.coordinate,b=r+ +!p*s,y=b-C*T,E=y-C*d,S=O;break;case"left":y=b=t.coordinate,g=n+ +!p*i,h=g-C*T,S=h-C*d,E=O;break;case"right":y=b=t.coordinate,g=n+ +p*i,h=g+C*T,S=h+C*d,E=O;break;default:h=g=t.coordinate,b=r+ +p*s,y=b+C*T,E=y+C*d,S=O;break}return{line:{x1:h,y1:y,x2:g,y2:b},tick:{x:S,y:E}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,p=cn(cn(cn({},tn(this.props,!1)),tn(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!l||s==="bottom"&&l);p=cn(cn({},p),{},{x1:t,y1:n+d*i,x2:t+r,y2:n+d*i})}else{var h=+(s==="left"&&!l||s==="right"&&l);p=cn(cn({},p),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return A.createElement("line",hl({},p,{className:ht("recharts-cartesian-axis-line",io(u,"className"))}))}static renderTickItem(t,n,r){var i,s=ht(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(t))i=A.cloneElement(t,cn(cn({},n),{},{className:s}));else if(typeof t=="function")i=t(cn(cn({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=ht(l,t.className)),i=A.createElement(lh,hl({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:p,padding:d,tickTextProps:h}=this.props,g=sx(cn(cn({},this.props),{},{ticks:r}),t,n),y=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),S=mo(this.props),E=tn(l,!1),C=cn(cn({},S),{},{fill:"none"},tn(i,!1)),T=g.map((O,N)=>{var{line:j,tick:M}=this.getTickLineCoord(O),D=cn(cn(cn(cn({textAnchor:y,verticalAnchor:b},S),{},{stroke:"none",fill:s},E),M),{},{index:N,payload:O,visibleTicksCount:g.length,tickFormatter:u,padding:d},h);return A.createElement(lr,hl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Au(this.props,O,N)),i&&A.createElement("line",hl({},C,j,{className:ht("recharts-cartesian-axis-tick-line",io(i,"className"))})),l&&ys.renderTickItem(l,D,"".concat(typeof u=="function"?u(O.value,N):O.value).concat(p||"")))});return T.length>0?A.createElement("g",{className:"recharts-cartesian-axis-ticks"},T):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:A.createElement(lr,{className:ht("recharts-cartesian-axis",i),ref:u=>{if(u){var p=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(p);var d=p[0];if(d){var h=window.getComputedStyle(d).fontSize,g=window.getComputedStyle(d).letterSpacing;(h!==this.state.fontSize||g!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),A.createElement(Jz,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},A.createElement(cG,{label:this.props.label}),this.props.children))}}ox(ys,"displayName","CartesianAxis");ox(ys,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var L7=["x1","y1","x2","y2","key"],$7=["offset"],B7=["xAxisId","yAxisId"],U7=["xAxisId","yAxisId"];function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(n),!0).forEach(function(r){z7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z7(e,t,n){return(t=G7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G7(e){var t=H7(e,"string");return typeof t=="symbol"?t:t+""}function H7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zs.apply(null,arguments)}function Tp(e,t){if(e==null)return{};var n,r,i=Y7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Y7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var q7=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return A.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function bD(e,t){var n;if(A.isValidElement(e))n=A.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,p=Tp(t,L7),d=mo(p),{offset:h}=d,g=Tp(d,$7);n=A.createElement("line",Zs({},g,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function F7(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Tp(e,B7),p=i.map((d,h)=>{var g=Gn(Gn({},u),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(h),index:h});return bD(r,g)});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},p)}function V7(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Tp(e,U7),p=i.map((d,h)=>{var g=Gn(Gn({},u),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(h),index:h});return bD(r,g)});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},p)}function K7(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:p=!0}=e;if(!p||!t||!t.length)return null;var d=u.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==d[0]&&d.unshift(0);var h=d.map((g,y)=>{var b=!d[y+1],S=b?i+l-g:d[y+1]-g;if(S<=0)return null;var E=y%t.length;return A.createElement("rect",{key:"react-".concat(y),y:g,x:r,height:S,width:s,stroke:"none",fill:t[E],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function W7(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:p}=e;if(!t||!n||!n.length)return null;var d=p.map(g=>Math.round(g+i-i)).sort((g,y)=>g-y);i!==d[0]&&d.unshift(0);var h=d.map((g,y)=>{var b=!d[y+1],S=b?i+l-g:d[y+1]-g;if(S<=0)return null;var E=y%n.length;return A.createElement("rect",{key:"react-".concat(y),x:g,y:s,width:S,height:u,stroke:"none",fill:n[E],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var X7=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return gN(sx(Gn(Gn(Gn({},ys.defaultProps),n),{},{ticks:yN(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},Q7=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return gN(sx(Gn(Gn(Gn({},ys.defaultProps),n),{},{ticks:yN(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},Z7={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function ui(e){var t=$v(),n=Bv(),r=SN(),i=Gn(Gn({},Zr(e,Z7)),{},{x:_e(e.x)?e.x:r.left,y:_e(e.y)?e.y:r.top,width:_e(e.width)?e.width:r.width,height:_e(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:p,width:d,height:h,syncWithTicks:g,horizontalValues:y,verticalValues:b}=i,S=Qr(),E=Oe(G=>NT(G,"xAxis",s,S)),C=Oe(G=>NT(G,"yAxis",l,S));if(!_e(d)||d<=0||!_e(h)||h<=0||!_e(u)||u!==+u||!_e(p)||p!==+p)return null;var T=i.verticalCoordinatesGenerator||X7,O=i.horizontalCoordinatesGenerator||Q7,{horizontalPoints:N,verticalPoints:j}=i;if((!N||!N.length)&&typeof O=="function"){var M=y&&y.length,D=O({yAxis:C?Gn(Gn({},C),{},{ticks:M?y:C.ticks}):void 0,width:t,height:n,offset:r},M?!0:g);lu(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(N=D)}if((!j||!j.length)&&typeof T=="function"){var k=b&&b.length,L=T({xAxis:E?Gn(Gn({},E),{},{ticks:k?b:E.ticks}):void 0,width:t,height:n,offset:r},k?!0:g);lu(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof L,"]")),Array.isArray(L)&&(j=L)}return A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(q7,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(K7,Zs({},i,{horizontalPoints:N})),A.createElement(W7,Zs({},i,{verticalPoints:j})),A.createElement(F7,Zs({},i,{offset:r,horizontalPoints:N,xAxis:E,yAxis:C})),A.createElement(V7,Zs({},i,{offset:r,verticalPoints:j,xAxis:E,yAxis:C})))}ui.displayName="CartesianGrid";var J7=["children"],eY=["dangerouslySetInnerHTML","ticks"],tY=["id"];function xD(e,t,n){return(t=nY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nY(e){var t=rY(e,"string");return typeof t=="symbol"?t:t+""}function rY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z0(){return Z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z0.apply(null,arguments)}function J0(e,t){if(e==null)return{};var n,r,i=aY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function aY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function iY(e){var t=Lt(),n=A.useMemo(()=>{var{children:r}=e,i=J0(e,J7);return i},[e]);return A.useEffect(()=>(t(FH(n)),()=>{t(VH(n))}),[n,t]),e.children}var sY=e=>{var{xAxisId:t,className:n}=e,r=Oe(Rv),i=Qr(),s="xAxis",l=Oe(C=>$l(C,s,t,i)),u=Oe(C=>p2(C,s,t,i)),p=Oe(C=>c2(C,t)),d=Oe(C=>P6(C,t)),h=Oe(C=>U_(C,t));if(p==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:g,ticks:y}=e,b=J0(e,eY),{id:S}=h,E=J0(h,tY);return A.createElement(ys,Z0({},b,E,{scale:l,x:d.x,y:d.y,width:p.width,height:p.height,className:ht("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},oY=e=>{var t,n,r,i,s;return A.createElement(iY,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},A.createElement(sY,e))};class _a extends A.Component{render(){return A.createElement(oY,this.props)}}xD(_a,"displayName","XAxis");xD(_a,"defaultProps",{allowDataOverflow:yr.allowDataOverflow,allowDecimals:yr.allowDecimals,allowDuplicatedCategory:yr.allowDuplicatedCategory,height:yr.height,hide:!1,mirror:yr.mirror,orientation:yr.orientation,padding:yr.padding,reversed:yr.reversed,scale:yr.scale,tickCount:yr.tickCount,type:yr.type,xAxisId:0});var lY=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(h=>{if(h){var g=h.getBoundingClientRect();g.width>l&&(l=g.width)}});var u=n?n.getBoundingClientRect().width:0,p=i+s,d=l+p+u+(n?r:0);return Math.round(d)}return 0},cY=["dangerouslySetInnerHTML","ticks"],uY=["id"];function SD(e,t,n){return(t=dY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dY(e){var t=fY(e,"string");return typeof t=="symbol"?t:t+""}function fY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(null,arguments)}function kP(e,t){if(e==null)return{};var n,r,i=pY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function pY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function hY(e){var t=Lt();return A.useEffect(()=>(t(KH(e)),()=>{t(WH(e))}),[e,t]),null}var mY=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=A.useRef(null),u=A.useRef(null),p=Oe(Rv),d=Qr(),h=Lt(),g="yAxis",y=Oe(D=>$l(D,g,n,d)),b=Oe(D=>u2(D,n)),S=Oe(D=>w6(D,n)),E=Oe(D=>p2(D,g,n,d)),C=Oe(D=>z_(D,n));if(A.useLayoutEffect(()=>{var D;if(!(i!=="auto"||!b||Wb(s)||A.isValidElement(s)||C==null)){var k=l.current,L=k==null||(D=k.tickRefs)===null||D===void 0?void 0:D.current,{tickSize:G,tickMargin:K}=k.props,z=lY({ticks:L,label:u.current,labelGapWithTick:5,tickSize:G,tickMargin:K});Math.round(b.width)!==Math.round(z)&&h(XH({id:n,width:z}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,b?.width,b,h,s,n,i]),b==null||S==null||C==null)return null;var{dangerouslySetInnerHTML:T,ticks:O}=e,N=kP(e,cY),{id:j}=C,M=kP(C,uY);return A.createElement(ys,ev({},N,M,{ref:l,labelRef:u,scale:y,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:b.width,height:b.height,className:ht("recharts-".concat(g," ").concat(g),r),viewBox:p,ticks:E}))},gY=e=>{var t,n,r,i,s;return A.createElement(A.Fragment,null,A.createElement(hY,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),A.createElement(mY,e))},yY={allowDataOverflow:vr.allowDataOverflow,allowDecimals:vr.allowDecimals,allowDuplicatedCategory:vr.allowDuplicatedCategory,hide:!1,mirror:vr.mirror,orientation:vr.orientation,padding:vr.padding,reversed:vr.reversed,scale:vr.scale,tickCount:vr.tickCount,type:vr.type,width:vr.width,yAxisId:0};class Da extends A.Component{render(){return A.createElement(gY,this.props)}}SD(Da,"displayName","YAxis");SD(Da,"defaultProps",yY);var Qy={exports:{}},Zy={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MP;function vY(){if(MP)return Zy;MP=1;var e=Nl();function t(p,d){return p===d&&(p!==0||1/p===1/d)||p!==p&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Zy.useSyncExternalStoreWithSelector=function(p,d,h,g,y){var b=i(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function C(M){if(!T){if(T=!0,O=M,M=g(M),y!==void 0&&S.hasValue){var D=S.value;if(y(D,M))return N=D}return N=M}if(D=N,n(O,M))return D;var k=g(M);return y!==void 0&&y(D,k)?(O=M,D):(O=M,N=k)}var T=!1,O,N,j=h===void 0?null:h;return[function(){return C(d())},j===null?void 0:function(){return C(j())}]},[d,h,g,y]);var E=r(p,b[0],b[1]);return s(function(){S.hasValue=!0,S.value=E},[E]),u(E),E},Zy}var jP;function bY(){return jP||(jP=1,Qy.exports=vY()),Qy.exports}bY();function xY(e){e()}function SY(){let e=null,t=null;return{clear(){e=null,t=null},notify(){xY(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var IP={notify(){},get:()=>[]};function AY(e,t){let n,r=IP,i=0,s=!1;function l(E){h();const C=r.subscribe(E);let T=!1;return()=>{T||(T=!0,C(),g())}}function u(){r.notify()}function p(){S.onStateChange&&S.onStateChange()}function d(){return s}function h(){i++,n||(n=e.subscribe(p),r=SY())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=IP)}function y(){s||(s=!0,h())}function b(){s&&(s=!1,g())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:p,isSubscribed:d,trySubscribe:y,tryUnsubscribe:b,getListeners:()=>r};return S}var EY=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CY=EY(),TY=()=>typeof navigator<"u"&&navigator.product==="ReactNative",PY=TY(),wY=()=>CY||PY?A.useLayoutEffect:A.useEffect,OY=wY(),NY=Symbol.for("react-redux-context"),_Y=typeof globalThis<"u"?globalThis:{};function DY(){if(!A.createContext)return{};const e=_Y[NY]??=new Map;let t=e.get(A.createContext);return t||(t=A.createContext(null),e.set(A.createContext,t)),t}var kY=DY();function MY(e){const{children:t,context:n,serverState:r,store:i}=e,s=A.useMemo(()=>{const p=AY(i);return{store:i,subscription:p,getServerState:r?()=>r:void 0}},[i,r]),l=A.useMemo(()=>i.getState(),[i]);OY(()=>{const{subscription:p}=s;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),l!==i.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[s,l]);const u=n||kY;return A.createElement(u.Provider,{value:s},t)}var jY=MY,IY=(e,t)=>t,lx=ae([IY,it,L_,pn,O2,Pi,DU,dn],RU),cx=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},AD=Wr("mouseClick"),ED=Cu();ED.startListening({actionCreator:AD,effect:(e,t)=>{var n=e.payload,r=lx(t.getState(),cx(n));r?.activeIndex!=null&&t.dispatch(U6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var tv=Wr("mouseMove"),CD=Cu();CD.startListening({actionCreator:tv,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Ub(r,r.tooltip.settings.shared),s=lx(r,cx(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(S2({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(x2()))}});function RY(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var RP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},TD=Pr({name:"rootProps",initialState:RP,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:RP.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),LY=TD.reducer,{updateOptions:$Y}=TD.actions,PD=Pr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:BY}=PD.actions,UY=PD.reducer,wD=Wr("keyDown"),OD=Wr("focus"),ux=Cu();ux.startListening({actionCreator:wD,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(zb(i,Ul(n))),u=Pi(n);if(s==="Enter"){var p=bp(n,"axis","hover",String(i.index));t.dispatch(V0({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:p}));return}var d=D6(n),h=d==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,y=l+g*h;if(!(u==null||y>=u.length||y<0)){var b=bp(n,"axis","hover",String(y));t.dispatch(V0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}});ux.startListening({actionCreator:OD,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=bp(n,"axis","hover",String(s));t.dispatch(V0({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Yr=Wr("externalEvent"),ND=Cu();ND.startListening({actionCreator:Yr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:AU(n),activeDataKey:k2(n),activeIndex:co(n),activeLabel:D2(n),activeTooltipIndex:co(n),isTooltipActive:EU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var zY=ae([Bl],e=>e.tooltipItemPayloads),GY=ae([zY,Iu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),_D=Wr("touchMove"),DD=Cu();DD.startListening({actionCreator:_D,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Ub(r,r.tooltip.settings.shared);if(i==="axis"){var s=lx(r,cx({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(S2({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],p=document.elementFromPoint(u.clientX,u.clientY);if(!p||!p.getAttribute)return;var d=p.getAttribute(bN),h=(l=p.getAttribute(xN))!==null&&l!==void 0?l:void 0,g=GY(t.getState(),d,h);t.dispatch(b2({activeDataKey:h,activeIndex:d,activeCoordinate:g}))}}});var HY=qO({brush:p7,cartesianAxis:QH,chartData:ZU,errorBars:d9,graphicalItems:mH,layout:j3,legend:C5,options:VU,polarAxis:DG,polarOptions:UY,referenceElements:x7,rootProps:LY,tooltip:z6}),YY=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return i3({reducer:HY,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([ED.middleware,CD.middleware,ux.middleware,ND.middleware,DD.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:RY},name:"recharts-".concat(n)}})};function kD(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Qr(),s=A.useRef(null);if(i)return n;s.current==null&&(s.current=YY(t,r));var l=Nv;return A.createElement(jY,{context:l,store:s.current},n)}function MD(e){var{layout:t,width:n,height:r,margin:i}=e,s=Lt(),l=Qr();return A.useEffect(()=>{l||(s(D3(t)),s(k3({width:n,height:r})),s(_3(i)))},[s,l,t,n,r,i]),null}function jD(e){var t=Lt();return A.useEffect(()=>{t($Y(e))},[t,e]),null}var qY=["children"];function FY(e,t){if(e==null)return{};var n,r,i=VY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function VY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Pp(){return Pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pp.apply(null,arguments)}var KY={width:"100%",height:"100%"},WY=A.forwardRef((e,t)=>{var n=$v(),r=Bv(),i=TN();if(!Al(n)||!Al(r))return null;var{children:s,otherAttributes:l,title:u,desc:p}=e,d,h;return typeof l.tabIndex=="number"?d=l.tabIndex:d=i?0:void 0,typeof l.role=="string"?h=l.role:h=i?"application":void 0,A.createElement(xv,Pp({},l,{title:u,desc:p,role:h,tabIndex:d,width:n,height:r,style:KY,ref:t}),s)}),XY=e=>{var{children:t}=e,n=Oe(Hp);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return A.createElement(xv,{width:r,height:i,x:l,y:s},t)},LP=A.forwardRef((e,t)=>{var{children:n}=e,r=FY(e,qY),i=Qr();return i?A.createElement(XY,null,n):A.createElement(WY,Pp({ref:t},r),n)});function QY(){var e=Lt(),[t,n]=A.useState(null),r=Oe(c5);return A.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;Tr(s)&&s!==r&&e(M3(s))}},[t,e,r]),n}function $P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(n),!0).forEach(function(r){JY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JY(e,t,n){return(t=eq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eq(e){var t=tq(e,"string");return typeof t=="symbol"?t:t+""}function tq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nq=A.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:p,onMouseEnter:d,onMouseLeave:h,onMouseMove:g,onMouseUp:y,onTouchEnd:b,onTouchMove:S,onTouchStart:E,style:C,width:T}=e,O=Lt(),[N,j]=A.useState(null),[M,D]=A.useState(null);oz();var k=QY(),L=A.useCallback(V=>{k(V),typeof t=="function"&&t(V),j(V),D(V)},[k,t,j,D]),G=A.useCallback(V=>{O(AD(V)),O(Yr({handler:s,reactEvent:V}))},[O,s]),K=A.useCallback(V=>{O(tv(V)),O(Yr({handler:d,reactEvent:V}))},[O,d]),z=A.useCallback(V=>{O(x2()),O(Yr({handler:h,reactEvent:V}))},[O,h]),Y=A.useCallback(V=>{O(tv(V)),O(Yr({handler:g,reactEvent:V}))},[O,g]),ie=A.useCallback(()=>{O(OD())},[O]),Z=A.useCallback(V=>{O(wD(V.key))},[O]),te=A.useCallback(V=>{O(Yr({handler:l,reactEvent:V}))},[O,l]),U=A.useCallback(V=>{O(Yr({handler:u,reactEvent:V}))},[O,u]),q=A.useCallback(V=>{O(Yr({handler:p,reactEvent:V}))},[O,p]),Q=A.useCallback(V=>{O(Yr({handler:y,reactEvent:V}))},[O,y]),Se=A.useCallback(V=>{O(Yr({handler:E,reactEvent:V}))},[O,E]),I=A.useCallback(V=>{O(_D(V)),O(Yr({handler:S,reactEvent:V}))},[O,S]),F=A.useCallback(V=>{O(Yr({handler:b,reactEvent:V}))},[O,b]);return A.createElement($2.Provider,{value:N},A.createElement(fO.Provider,{value:M},A.createElement("div",{className:ht("recharts-wrapper",r),style:ZY({position:"relative",cursor:"default",width:T,height:i},C),onClick:G,onContextMenu:te,onDoubleClick:U,onFocus:ie,onKeyDown:Z,onMouseDown:q,onMouseEnter:K,onMouseLeave:z,onMouseMove:Y,onMouseUp:Q,onTouchEnd:F,onTouchMove:I,onTouchStart:Se,ref:L},n)))}),rq=["children","className","width","height","style","compact","title","desc"];function aq(e,t){if(e==null)return{};var n,r,i=iq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function iq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var ID=A.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:p,desc:d}=e,h=aq(e,rq),g=mo(h);return u?A.createElement(LP,{otherAttributes:g,title:p,desc:d},n):A.createElement(nq,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},A.createElement(LP,{otherAttributes:g,title:p,desc:d,ref:t},A.createElement(A7,null,n)))}),sq=["width","height"];function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nv.apply(null,arguments)}function oq(e,t){if(e==null)return{};var n,r,i=lq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var cq={top:5,right:5,bottom:5,left:5},uq={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:cq,reverseStackOrder:!1,syncMethod:"index"},dq=A.forwardRef(function(t,n){var r,i=Zr(t.categoricalChartProps,uq),{width:s,height:l}=i,u=oq(i,sq);if(!Al(s)||!Al(l))return null;var{chartName:p,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,categoricalChartProps:y}=t,b={chartName:p,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,eventEmitter:void 0};return A.createElement(kD,{preloadedState:{options:b},reduxStoreName:(r=y.id)!==null&&r!==void 0?r:p},A.createElement(mD,{chartData:y.data}),A.createElement(MD,{width:s,height:l,layout:i.layout,margin:i.margin}),A.createElement(jD,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),A.createElement(ID,nv({},u,{width:s,height:l,ref:n})))}),fq=["axis","item"],ts=A.forwardRef((e,t)=>A.createElement(dq,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fq,tooltipPayloadSearcher:B2,categoricalChartProps:e,ref:t}));function pq(e){var t=Lt();return A.useEffect(()=>{t(BY(e))},[t,e]),null}var hq=["width","height","layout"];function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rv.apply(null,arguments)}function mq(e,t){if(e==null)return{};var n,r,i=gq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var yq={top:5,right:5,bottom:5,left:5},vq={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:yq,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},bq=A.forwardRef(function(t,n){var r,i=Zr(t.categoricalChartProps,vq),{width:s,height:l,layout:u}=i,p=mq(i,hq);if(!Al(s)||!Al(l))return null;var{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:g,tooltipPayloadSearcher:y}=t,b={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:g,tooltipPayloadSearcher:y,eventEmitter:void 0};return A.createElement(kD,{preloadedState:{options:b},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:d},A.createElement(mD,{chartData:i.data}),A.createElement(MD,{width:s,height:l,layout:u,margin:i.margin}),A.createElement(jD,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),A.createElement(pq,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(ID,rv({width:s,height:l},p,{ref:n})))}),xq=["item"],Sq={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Jy=A.forwardRef((e,t)=>{var n=Zr(e,Sq);return A.createElement(bq,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:xq,tooltipPayloadSearcher:B2,categoricalChartProps:n,ref:t})});const vs=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i,scale:s=1})=>{const{name:l,cost:u,image:p,description:d,type:h,effect:g}=e,y=g?.goAgain,b=s!==1?{transform:`scale(${s})`,transformOrigin:"center center"}:{};return m.jsx("div",{onClick:S=>{S.stopPropagation(),w("CARD_PLAY",`🖱️ ActionCard clicked: ${e.name}`,{cardId:e.id,cardName:e.name,isPlayable:n,isMandatoryTarget:i,willCallOnClick:n||i}),n||i?t(e):w("CARD_PLAY",`🚫 Card click blocked - not playable: ${e.name}`,{isPlayable:n,isMandatoryTarget:i})},className:`
        w-[225px] h-[275px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${n||i?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"opacity-60":""}
        ${i?"ring-4 ring-red-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)",...b},children:m.jsxs("div",{className:"w-full h-full relative flex flex-col font-orbitron text-purple-300 overflow-hidden",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[m.jsx("div",{className:"absolute inset-0 bg-slate-900"}),m.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[m.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-center py-1 px-3 bg-black/40 flex-shrink-0 h-8",children:[m.jsx("div",{className:"overflow-hidden text-center min-w-0",children:m.jsx("span",{className:"font-orbitron text-sm uppercase tracking-widest text-white inline-block truncate max-w-full",children:l})}),m.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full flex-shrink-0",children:[m.jsx(zf,{size:12,className:"text-yellow-300"}),m.jsx("span",{className:"text-white font-bold text-sm ml-1",children:u})]})]}),m.jsx("div",{className:"p-1 flex-shrink-0",children:m.jsx("div",{className:"relative h-20 rounded border border-purple-400/50 overflow-hidden",children:m.jsx("img",{src:p,alt:l,className:"w-full h-full object-cover object-center",style:{objectFit:"cover"}})})}),m.jsx("div",{className:"mx-1 mb-1 flex-grow bg-black/60 backdrop-blur-sm border border-purple-800/70 p-2 overflow-y-auto rounded-md",children:m.jsx("p",{className:"text-sm text-gray-400 leading-tight text-center font-exo font-normal",children:d})}),m.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto] gap-2 items-center px-2 border-t border-purple-800/70 flex-shrink-0 h-6 mt-auto",children:[m.jsx("div",{className:"w-4"}),m.jsx("div",{className:"flex items-center justify-center",children:m.jsxs("span",{className:"text-[10px] text-purple-400 uppercase tracking-widest font-semibold",children:[h," Card"]})}),m.jsx("div",{className:"w-4 flex items-center justify-center",children:y&&m.jsx(NM,{size:14,className:"text-cyan-400",style:{marginLeft:"-20px"}})})]})]})]})})},Aq=({onClick:e,ability:t,isUsable:n,isSelected:r})=>m.jsx("button",{onClick:e,disabled:!n,className:`w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 flex-shrink-0 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("circle",{cx:"12",cy:"12",r:"6"}),m.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),uo=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:p,isHovered:d,onMouseEnter:h,onMouseLeave:g,isCardTarget:y,isInMiddleLane:b,reallocationState:S,gameEngine:E,turnPhase:C,isMyTurn:T,passInfo:O,getLocalPlayerId:N,localPlayerState:j,shipAbilityMode:M,sectionRef:D})=>{if(i)return m.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:m.jsx("span",{className:"text-center",children:"Click to place section"})});const k=E.getShipStatus(t),L=k==="critical"?"bg-red-900/60":k==="damaged"?"bg-yellow-900/50":"bg-black/60";let G=k==="critical"?"border-red-500":k==="damaged"?"border-yellow-500":p?"border-pink-500":"border-cyan-500";const K=p?"shadow-pink-500/20":"shadow-cyan-500/20",z=d?"scale-105 shadow-xl":"";let Y="";if(S)switch(S){case"can-remove":G="border-orange-400",Y="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":G="border-orange-600",Y="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":G="border-gray-600",Y="opacity-50";break;case"can-add":G="border-green-400",Y="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":G="border-green-600",Y="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":G="border-gray-600",Y="opacity-50";break}const ie=y?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",Z=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,U=>U.toUpperCase()),te={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return m.jsxs("div",{ref:D,className:`
        relative rounded-xl shadow-lg ${K} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${G}
        ${u?`cursor-pointer ${z}`:""}
        ${ie}
        ${Y}
      `,style:te,onClick:s,onMouseEnter:h,onMouseLeave:g,children:[m.jsx("div",{className:`absolute inset-0 ${L}`}),m.jsxs("div",{className:"relative z-10 flex flex-col items-center p-2 h-full",children:[m.jsxs("div",{className:"flex items-center justify-between w-full mb-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("p",{className:"font-bold text-lg text-white",children:t.name||Z}),m.jsx("div",{className:`flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${k==="healthy"?"bg-green-500/20 text-green-300":k==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:k.charAt(0).toUpperCase()+k.slice(1)})]}),r&&t.ability&&m.jsx(Aq,{ability:t.ability,isUsable:C==="action"&&T()&&!O[`${N()}Passed`]&&j.energy>=t.ability.cost.energy,isSelected:M?.ability.id===t.ability.id,onClick:U=>l(U,{...t,name:e},t.ability)})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[m.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([U,q])=>{const Q=b&&t.middleLaneBonus&&t.middleLaneBonus[U];return m.jsxs("span",{className:"flex items-center text-xs",children:[m.jsxs("span",{className:"font-semibold mr-1",children:[U,":"]}),m.jsx("span",{className:Q?"text-green-400 font-bold":"",children:q})]},U)})}),m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((U,q)=>m.jsx("div",{children:q<t.allocatedShields?m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:m.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:m.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},q))}),m.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((U,q)=>{const Q=q+1,{critical:Se,damaged:I}=t.thresholds;let F;Q<=Se?F="bg-red-500":Q<=I?F="bg-orange-500":F="bg-green-500";const V=q<t.hull;return m.jsx("div",{className:`h-4 w-4 rounded-sm ${V?F:"bg-gray-400"} border border-black/50`},q)})})]}),m.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:t.ability&&m.jsxs(m.Fragment,{children:[m.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight mb-1",children:t.ability.name}),m.jsx("p",{className:"text-xs text-white leading-tight",children:t.ability.description})]})})]})]})]})},Eq=({isOpen:e,onClose:t,title:n,drones:r=[],cards:i=[],shipComponents:s={}})=>{if(!e)return null;const l=[...r].sort((d,h)=>d.class-h.class),u=[...i].sort((d,h)=>d.card.cost-h.card.cost),p=(d,h)=>{const g=d.stats.healthy,y=d.middleLaneBonus||{},b={};return Object.keys(g).forEach(S=>{b[S]=g[S]+(h&&y[S]||0)}),b};return m.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:m.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 max-w-[1500px] max-h-[900px] w-[95vw] h-[90vh] flex flex-col",onClick:d=>d.stopPropagation(),children:[m.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[m.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:n}),m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:m.jsx(En,{size:32})})]}),m.jsxs("div",{className:"overflow-y-auto flex-grow pr-4",children:[Object.keys(s).length>0&&m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-xl font-orbitron text-yellow-400 mb-3",children:"Ship Layout"}),m.jsx("div",{className:"grid grid-cols-3 gap-4 mb-4",children:["l","m","r"].map((d,h)=>{const g=Object.entries(s).find(([b,S])=>S===d),y=g?br.find(b=>b.id===g[0]):null;return m.jsxs("div",{children:[m.jsx("div",{className:"text-center mb-2",children:m.jsx("span",{className:`font-bold text-sm ${h===1?"text-yellow-400":"text-cyan-400"}`,children:h===1?"MIDDLE (Bonus)":h===0?"LEFT":"RIGHT"})}),y?m.jsx("div",{className:"h-[200px]",children:m.jsx(uo,{section:y.key,stats:y,effectiveStatsForDisplay:p(y,h===1),isPlayer:!0,isInMiddleLane:h===1,gameEngine:Be,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})}):m.jsx("div",{className:"h-[200px] bg-gray-800/30 rounded-lg border-2 border-dashed border-gray-600 flex items-center justify-center",children:m.jsx("span",{className:"text-center text-gray-500 italic text-xs",children:"Empty Lane"})})]},d)})}),m.jsx("div",{className:"border-t border-purple-500/30 mb-6"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("h3",{className:"text-xl font-orbitron text-cyan-400 mb-3",children:["Drones (",l.length,")"]}),l.length>0?m.jsx("div",{className:"max-w-[1165px] mx-auto",children:m.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:l.map((d,h)=>m.jsx("div",{children:m.jsx(ao,{drone:d,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,appliedUpgrades:[],isViewOnly:!0})},`${d.name}-${h}`))})}):m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx("p",{className:"text-gray-500 text-xl italic",children:"No drones selected"})})]}),m.jsx("div",{className:"border-t border-purple-500/30 mb-6"}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("h3",{className:"text-xl font-orbitron text-purple-400 mb-3",children:["Cards (",u.reduce((d,h)=>d+h.quantity,0),")"]}),u.length>0?m.jsx("div",{className:"max-w-[1165px] mx-auto",children:m.jsx("div",{className:"flex flex-wrap gap-[10px] justify-center",children:u.map((d,h)=>m.jsxs("div",{className:"relative",children:[m.jsx(vs,{card:d.card,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1}),d.quantity>1&&m.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white font-bold text-sm px-2 py-1 rounded z-10",children:["x",d.quantity]})]},`${d.card.id}-${h}`))})}):m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx("p",{className:"text-gray-500 text-xl italic",children:"No cards in deck"})})]})]})]})})},Cq=({card:e,onClose:t})=>e?m.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:m.jsx("div",{onClick:n=>n.stopPropagation(),children:m.jsx(vs,{card:e,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1,scale:1.5})})}):null,Tq=({drone:e,onClose:t})=>e?m.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:m.jsx("div",{onClick:n=>n.stopPropagation(),children:m.jsx(ao,{drone:e,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,ignoreDeployLimit:!0,appliedUpgrades:[],scale:1.5,isViewOnly:!0})})}):null,Pq=({component:e,onClose:t})=>{if(!e)return null;const n=(r,i)=>{const s=r.stats.healthy,l=r.middleLaneBonus||{},u={};return Object.keys(s).forEach(p=>{u[p]=s[p]+(i&&l[p]||0)}),u};return m.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:m.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-cyan-500 p-8 shadow-2xl shadow-cyan-500/20 max-w-6xl w-[95vw]",onClick:r=>r.stopPropagation(),children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-3xl font-orbitron font-bold text-cyan-400 mb-2",children:e.name}),m.jsx("p",{className:"text-gray-400 text-sm",children:e.description})]}),m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:m.jsx(En,{size:32})})]}),m.jsx("div",{className:"mb-4 text-center",children:m.jsx("p",{className:"text-yellow-400 font-semibold text-sm",children:"Compare standard lane stats with middle lane bonus stats. The middle lane provides enhanced performance!"})}),m.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-center font-orbitron text-lg text-gray-300 mb-3",children:"LEFT / RIGHT LANE"}),m.jsx("div",{className:"h-[250px]",children:m.jsx(uo,{section:e.key,stats:e,effectiveStatsForDisplay:n(e,!1),isPlayer:!0,isInMiddleLane:!1,gameEngine:Be,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute -top-2 -left-2 -right-2 -bottom-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-xl animate-pulse"}),m.jsxs("div",{className:"relative",children:[m.jsx("h3",{className:"text-center font-orbitron text-lg text-yellow-400 mb-3 font-bold",children:"MIDDLE LANE (BONUS)"}),m.jsx("div",{className:"h-[250px]",children:m.jsx(uo,{section:e.key,stats:e,effectiveStatsForDisplay:n(e,!0),isPlayer:!0,isInMiddleLane:!0,gameEngine:Be,isInteractive:!1,turnPhase:"placement",isMyTurn:()=>!1,passInfo:{},getLocalPlayerId:()=>"player1",localPlayerState:{},shipAbilityMode:null})})]})]})]}),e.ability&&m.jsxs("div",{className:"mt-6 p-4 bg-purple-900/30 rounded-lg border border-purple-500/50",children:[m.jsxs("h4",{className:"font-orbitron text-purple-400 font-bold mb-2",children:["Ship Ability: ",e.ability.name]}),m.jsx("p",{className:"text-gray-300 text-sm mb-2",children:e.ability.description}),m.jsxs("p",{className:"text-gray-400 text-xs",children:["Cost: ",e.ability.cost.energy," Energy"]})]})]})})},wq=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onDronesChange:i,selectedShipComponents:s,onShipComponentsChange:l,onConfirmDeck:u,onImportDeck:p})=>{const[d,h]=A.useState(null),[g,y]=A.useState(null),[b,S]=A.useState(null),[E,C]=A.useState(!1),[T,O]=A.useState(!1),[N,j]=A.useState(!1),[M,D]=A.useState("cards"),[k,L]=A.useState("deck"),[G,K]=A.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[z,Y]=A.useState(!1),ie=A.useRef(null),[Z,te]=A.useState({key:"name",direction:"ascending"}),[U,q]=A.useState({abilities:[]}),[Q,Se]=A.useState({key:"name",direction:"ascending"}),[I,F]=A.useState("cost"),[V,se]=A.useState(!0),ge=A.useMemo(()=>{const R=oe=>oe?oe.replace(/_/g," ").toLowerCase().split(" ").map(ce=>ce.charAt(0).toUpperCase()+ce.slice(1)).join(" "):"";return t.map(oe=>{const fe=[],ce=oe.effect;if(ce.type==="REPEATING_EFFECT")fe.push(R(ce.type)),ce.effects&&Array.isArray(ce.effects)&&ce.effects.forEach(ve=>{ve.type&&fe.push(R(ve.type))});else if(ce.type==="MODIFY_DRONE_BASE"&&ce.mod){const ve=ce.mod.stat,Ie=ce.mod.value;ve==="attack"?fe.push(Ie>0?"Attack Buff":"Attack Debuff"):ve==="speed"?fe.push(Ie>0?"Speed Buff":"Speed Debuff"):ve==="shields"?fe.push(Ie>0?"Shield Buff":"Shield Debuff"):ve==="cost"?fe.push(Ie<0?"Cost Reduction":"Cost Increase"):ve==="limit"?fe.push(Ie>0?"Limit Buff":"Limit Debuff"):ve==="ability"?(fe.push("Ability Grant"),ce.mod.abilityToAdd&&ce.mod.abilityToAdd.name&&fe.push(ce.mod.abilityToAdd.name)):fe.push(R(`${ve} Modification`))}else if(ce.type==="MODIFY_STAT"&&ce.mod){const ve=ce.mod.stat,Ie=ce.mod.value;ce.mod.type,ve==="attack"?fe.push(Ie>0?"Attack Buff":"Attack Debuff"):ve==="speed"?fe.push(Ie>0?"Speed Buff":"Speed Debuff"):ve==="shields"?fe.push(Ie>0?"Shield Buff":"Shield Debuff"):fe.push(Ie>0?`${ve} Buff`:`${ve} Debuff`)}else ce.type==="SEARCH_AND_DRAW"?(fe.push(R(ce.type)),fe.push("Draw")):ce.type&&fe.push(R(ce.type));ce.goAgain&&fe.push("Go Again"),ce.damageType==="PIERCING"&&fe.push("Piercing"),ce.mod?.type&&fe.push(R(ce.mod.type));const he=(()=>{if(oe.targeting){const ve=R(oe.targeting.type);if(oe.targeting.affinity){const Ie=oe.targeting.affinity.charAt(0)+oe.targeting.affinity.slice(1).toLowerCase();return`${ve} (${Ie})`}return ve}else if(ce.type==="MULTI_MOVE"&&ce.source){const ve=ce.source.location||"Any",Ie=ce.source.affinity||"Any",kn=Ie.charAt(0).toUpperCase()+Ie.slice(1).toLowerCase();return`${R(ve)} (${kn})`}else if(ce.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...oe,keywords:fe,targetingText:he}})},[t]),Ae=A.useMemo(()=>Yn.map(R=>{const oe=[];R.abilities&&R.abilities.length>0&&R.abilities.forEach(ce=>{ce.name&&oe.push(ce.name),ce.type&&oe.push(ce.type==="ACTIVE"?"Active":ce.type==="PASSIVE"?"Passive":"Triggered"),ce.effect?.keyword&&oe.push(ce.effect.keyword)});const fe=R.abilities&&R.abilities.length>0?R.abilities.map(ce=>ce.description).join(" | "):"No abilities";return{...R,keywords:oe,description:fe}}),[]),ye=A.useMemo(()=>{const R=new Set,oe=new Set,fe=new Set;ge.forEach(he=>{R.add(he.cost),oe.add(he.targetingText),he.keywords.forEach(ve=>fe.add(ve))});const ce=Array.from(R);return{minCost:Math.min(...ce),maxCost:Math.max(...ce),targets:["all",...Array.from(oe).sort()],abilities:Array.from(fe).sort()}},[ge]),De=A.useMemo(()=>{const R=new Set;return Ae.forEach(oe=>{oe.keywords.forEach(fe=>R.add(fe))}),{abilities:Array.from(R).sort()}},[Ae]);A.useEffect(()=>{ye.minCost!==1/0&&ye.maxCost!==-1/0&&K(R=>({...R,cost:{min:ye.minCost,max:ye.maxCost}}))},[ye.minCost,ye.maxCost]);const{cardCount:Ke,deckListForDisplay:xe,baseCardCounts:Le}=A.useMemo(()=>{const R={};let oe=0;Object.entries(n).forEach(([ce,he])=>{if(he>0){oe+=he;const ve=ge.find(Ie=>Ie.id===ce);if(ve){const Ie=ve.baseCardId;R[Ie]=(R[Ie]||0)+he}}});const fe=Object.entries(n).filter(([,ce])=>ce>0).map(([ce,he])=>({...ge.find(Ie=>Ie.id===ce),quantity:he})).sort((ce,he)=>ce.name.localeCompare(he.name));return{cardCount:oe,deckListForDisplay:fe,baseCardCounts:R}},[n,ge]),ze=Ke>=40,{droneCount:me,droneListForDisplay:mt}=A.useMemo(()=>{let R=0;const oe=[];return Object.entries(e||{}).forEach(([fe,ce])=>{if(ce>0){R+=ce;const he=Ae.find(ve=>ve.name===fe);he&&oe.push({...he,quantity:ce})}}),oe.sort((fe,ce)=>fe.name.localeCompare(ce.name)),{droneCount:R,droneListForDisplay:oe}},[e,Ae]),Je=me===10,{shipComponentCount:It,shipComponentsValid:Kt}=A.useMemo(()=>{const R=s||{},oe=Object.keys(R).filter(ot=>R[ot]).length,fe=Object.keys(R).some(ot=>{const ct=br.find(Ht=>Ht.id===ot);return ct&&ct.type==="Bridge"&&R[ot]}),ce=Object.keys(R).some(ot=>{const ct=br.find(Ht=>Ht.id===ot);return ct&&ct.type==="Power Cell"&&R[ot]}),he=Object.keys(R).some(ot=>{const ct=br.find(Ht=>Ht.id===ot);return ct&&ct.type==="Drone Control Hub"&&R[ot]}),ve=Object.values(R).filter(ot=>ot),Ie=new Set(ve),kn=ve.length===3,st=Ie.size===3;return{shipComponentCount:oe,shipComponentsValid:fe&&ce&&he&&kn&&st}},[s]),Pt=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],Wt=A.useMemo(()=>{const R={};xe.forEach(he=>{const ve=he.cost||0;R[ve]=(R[ve]||0)+he.quantity});const oe=Object.entries(R).map(([he,ve])=>({name:`${he}`,count:ve})).sort((he,ve)=>parseInt(he.name)-parseInt(ve.name)),fe={};xe.forEach(he=>{he.keywords&&he.keywords.forEach(ve=>{fe[ve]=(fe[ve]||0)+he.quantity})});const ce=Object.entries(fe).map(([he,ve])=>({name:he,value:ve})).sort((he,ve)=>ve.value-he.value);return{barChartData:oe,pieChartData:ce}},[xe]),zt=A.useMemo(()=>{const R=ot=>{const ct={};return mt.forEach(Ht=>{const Mn=Ht[ot]||0;ct[Mn]=(ct[Mn]||0)+Ht.quantity}),Object.entries(ct).map(([Ht,Mn])=>({name:`${Ht}`,count:Mn})).sort((Ht,Mn)=>parseInt(Ht.name)-parseInt(Mn.name))},oe=R("class"),fe=R("attack"),ce=R("speed"),he=R("shields"),ve=R("hull"),Ie=R("limit"),kn=R("upgradeSlots"),st={};mt.forEach(ot=>{ot.keywords&&ot.keywords.forEach(ct=>{st[ct]=(st[ct]||0)+ot.quantity})});const Gt=Object.entries(st).map(([ot,ct])=>({name:ot,value:ct})).sort((ot,ct)=>ct.value-ot.value);return{costData:oe,attackData:fe,speedData:ce,shieldsData:he,hullData:ve,limitData:Ie,upgradesData:kn,abilityData:Gt}},[mt]),Ra=A.useMemo(()=>{const R=[];Object.entries(e||{}).forEach(([fe,ce])=>{if(ce>0){const he=Ae.find(ve=>ve.name===fe);he&&R.push(he)}});const oe=[];return Object.entries(n).forEach(([fe,ce])=>{if(ce>0){const he=ge.find(ve=>ve.id===fe);he&&oe.push({card:he,quantity:ce})}}),{drones:R,cards:oe}},[e,n,Ae,ge]),fa=A.useMemo(()=>{let R=[...ge].filter(oe=>oe.cost<G.cost.min||oe.cost>G.cost.max||G.target!=="all"&&oe.targetingText!==G.target||G.type!=="all"&&oe.type!==G.type?!1:G.abilities.length>0?G.abilities.every(fe=>oe.keywords.includes(fe)):!(G.hideEnhanced&&oe.id.endsWith("_ENHANCED")));return Z.key!==null&&R.sort((oe,fe)=>{const ce=oe[Z.key],he=fe[Z.key];if(ce==null&&he==null)return 0;if(ce==null)return 1;if(he==null)return-1;const ve=String(ce).toLowerCase(),Ie=String(he).toLowerCase();return ve<Ie?Z.direction==="ascending"?-1:1:ve>Ie?Z.direction==="ascending"?1:-1:oe.id.localeCompare(fe.id)}),R},[ge,G,Z]),zl=A.useMemo(()=>{let R=[...Ae].filter(oe=>U.abilities.length>0?U.abilities.every(fe=>oe.keywords.includes(fe)):!0);return Q.key!==null&&R.sort((oe,fe)=>{const ce=oe[Q.key],he=fe[Q.key];if(ce==null&&he==null)return 0;if(ce==null)return 1;if(he==null)return-1;const ve=String(ce).toLowerCase(),Ie=String(he).toLowerCase();return ve<Ie?Q.direction==="ascending"?-1:1:ve>Ie?Q.direction==="ascending"?1:-1:oe.name.localeCompare(fe.name)}),R},[Ae,U,Q]),pa=R=>{let oe="ascending";Z.key===R&&Z.direction==="ascending"&&(oe="descending"),te({key:R,direction:oe})},wr=R=>{let oe="ascending";Q.key===R&&Q.direction==="ascending"&&(oe="descending"),Se({key:R,direction:oe})},La=(R,oe)=>{K(fe=>({...fe,[R]:oe}))},$a=R=>{K(oe=>{const fe=oe.abilities.includes(R)?oe.abilities.filter(ce=>ce!==R):[...oe.abilities,R];return{...oe,abilities:fe}})},hn=R=>{q(oe=>{const fe=oe.abilities.includes(R)?oe.abilities.filter(ce=>ce!==R):[...oe.abilities,R];return{...oe,abilities:fe}})},Ye=()=>{K({cost:{min:ye.minCost,max:ye.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),Y(!1)},nt=()=>{q({abilities:[]})},Gl=()=>{Object.keys(n).forEach(R=>{n[R]>0&&r(R,0)})},So=()=>{Object.keys(e||{}).forEach(R=>{e[R]>0&&i(R,0)})};A.useEffect(()=>{const R=oe=>{ie.current&&!ie.current.contains(oe.target)&&Y(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const Ao=Math.PI/180,wi=({cx:R,cy:oe,midAngle:fe,outerRadius:ce,fill:he,name:ve,value:Ie})=>{const kn=Math.sin(-Ao*fe),st=Math.cos(-Ao*fe),Gt=R+(ce+5)*st,ot=oe+(ce+5)*kn,ct=R+(ce+15)*st,Ht=oe+(ce+15)*kn,Mn=ct+(st>=0?1:-1)*12,Fn=Ht,$t=st>=0?"start":"end";return m.jsxs("g",{children:[m.jsx("path",{d:`M${Gt},${ot}L${ct},${Ht}L${Mn},${Fn}`,stroke:he,fill:"none"}),m.jsx("circle",{cx:Mn,cy:Fn,r:2,fill:he,stroke:"none"}),m.jsx("text",{x:Mn+(st>=0?1:-1)*8,y:Fn,dy:4,textAnchor:$t,fill:"#9CA3AF",fontSize:"11px",children:`${ve} (${Ie})`})]})},ha=()=>{const[R,oe]=A.useState(""),fe=A.useRef(null),ce=A.useMemo(()=>{const ve=Object.entries(n).map(([st,Gt])=>`${st}:${Gt}`).join(","),Ie=Object.entries(e||{}).map(([st,Gt])=>`${st}:${Gt}`).join(","),kn=Object.entries(s||{}).filter(([st,Gt])=>Gt).map(([st,Gt])=>`${st}:${Gt}`).join(",");return`cards:${ve}|drones:${Ie}|ship:${kn}`},[n,e,s]),he=()=>{fe.current.select(),document.execCommand("copy"),oe("Copied!"),setTimeout(()=>oe(""),2e3)};return m.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>C(!1),children:m.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:ve=>ve.stopPropagation(),children:[m.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"}),m.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck and drones."}),m.jsx("textarea",{ref:fe,readOnly:!0,value:ce,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),m.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[m.jsx("span",{className:"text-green-400 self-center",children:R}),m.jsxs("button",{onClick:he,className:"btn-confirm flex items-center gap-2",children:[m.jsx(av,{size:16})," Copy to Clipboard"]}),m.jsxs("button",{onClick:()=>C(!1),className:"btn-cancel flex items-center gap-2",children:[m.jsx(En,{size:16})," Close"]})]})]})})},ma=()=>{const[R,oe]=A.useState(""),[fe,ce]=A.useState(""),he=()=>{ce("");const ve=p(R);ve.success?O(!1):ce(ve.message||"Invalid deck code format.")};return m.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>O(!1),children:m.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:ve=>ve.stopPropagation(),children:[m.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),m.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load both cards and drones into the builder."}),m.jsx("textarea",{value:R,onChange:ve=>oe(ve.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"cards:CARD001:4,CARD002:2|drones:Scout Drone:1,Heavy Fighter:1"}),fe&&m.jsx("p",{className:"text-red-500 mt-2",children:fe}),m.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[m.jsx("button",{onClick:()=>O(!1),className:"btn-cancel",children:"Cancel"}),m.jsx("button",{onClick:he,className:"btn-confirm",children:"Load Deck"})]})]})})};return m.jsxs("div",{className:"w-full flex flex-col text-white font-exo mt-8 text-sm",children:[d&&m.jsx(Cq,{card:d,onClose:()=>h(null)}),g&&m.jsx(Tq,{drone:g,onClose:()=>y(null)}),b&&m.jsx(Pq,{component:b,onClose:()=>S(null)}),E&&m.jsx(ha,{}),T&&m.jsx(ma,{}),m.jsx(Eq,{isOpen:N,onClose:()=>j(!1),title:"Your Deck & Drones",drones:Ra.drones,cards:Ra.cards,shipComponents:s||{}}),m.jsxs("div",{className:"flex justify-center items-center mb-4",children:[m.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),m.jsxs("div",{className:"flex gap-4 ml-8",children:[m.jsxs("button",{onClick:()=>O(!0),className:"btn-utility flex items-center gap-2",children:[m.jsx(UM,{size:16})," Import"]}),m.jsxs("button",{onClick:()=>C(!0),className:"btn-utility flex items-center gap-2",children:[m.jsx(bM,{size:16})," Export"]})]})]}),m.jsxs("div",{className:"flex-grow flex gap-6 min-h-0 mb-[10px]",children:[m.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700 h-[calc(100vh-99px)] ml-[10px]",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>{D("cards"),L("deck")},className:`btn-utility ${M==="cards"?"opacity-100":"opacity-60"}`,children:"Cards"}),m.jsx("button",{onClick:()=>{D("drones"),L("drones")},className:`btn-utility ${M==="drones"?"opacity-100":"opacity-60"}`,children:"Drones"}),m.jsx("button",{onClick:()=>{D("ship"),L("ship")},className:`btn-utility ${M==="ship"?"opacity-100":"opacity-60"}`,children:"Ship Components"}),m.jsxs("button",{onClick:()=>j(!0),className:"btn-utility flex items-center gap-2",children:[m.jsx(CM,{size:16}),"View All"]})]}),m.jsx("button",{onClick:M==="cards"?Ye:nt,className:"btn-reset",children:"Reset Filters"})]}),M==="cards"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[m.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[m.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",G.cost.min," - ",G.cost.max]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"range",min:ye.minCost,max:ye.maxCost,value:G.cost.min,onChange:R=>La("cost",{...G.cost,min:Math.min(parseInt(R.target.value),G.cost.max)}),className:"w-1/2"}),m.jsx("input",{type:"range",min:ye.minCost,max:ye.maxCost,value:G.cost.max,onChange:R=>La("cost",{...G.cost,max:Math.max(parseInt(R.target.value),G.cost.min)}),className:"w-1/2"})]})]}),m.jsxs("div",{className:"relative",ref:ie,children:[m.jsx("button",{onClick:()=>Y(!z),className:"filter-select w-full text-left h-full",children:G.abilities.length===0?"Select Abilities":`${G.abilities.length} Abilities Selected`}),z&&m.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:ye.abilities.map(R=>m.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:G.abilities.includes(R),onChange:()=>$a(R),className:"mr-2"}),R]},R))})]}),m.jsxs("select",{onChange:R=>La("type",R.target.value),value:G.type,className:"filter-select h-full",children:[m.jsx("option",{value:"all",children:"All Types"}),m.jsx("option",{value:"Action",children:"Action Cards"}),m.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),m.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:m.jsxs("label",{className:"flex items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:G.hideEnhanced,onChange:R=>La("hideEnhanced",R.target.checked),className:"mr-2"}),m.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),m.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:m.jsxs("table",{className:"w-full text-left deck-builder-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Info"}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>pa("name"),className:`w-full text-left transition-colors underline cursor-pointer ${Z.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",Z.key==="name"&&(Z.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>pa("type"),className:`w-full text-left transition-colors underline cursor-pointer ${Z.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",Z.key==="type"&&(Z.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>pa("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${Z.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",Z.key==="cost"&&(Z.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>pa("description"),className:`w-full text-left transition-colors underline cursor-pointer ${Z.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",Z.key==="description"&&(Z.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:"Abilities"}),m.jsx("th",{children:"Targeting"}),m.jsx("th",{children:"Quantity"})]})}),m.jsx("tbody",{children:fa.map((R,oe)=>{const fe=n[R.id]||0,ce=Le[R.baseCardId]||0,he=R.maxInDeck;return m.jsxs("tr",{className:R.type==="Upgrade"?"bg-purple-900/10":"",children:[m.jsx("td",{children:m.jsx("button",{onClick:()=>h(R),className:"p-1 text-gray-400 hover:text-white",children:m.jsx(Ys,{size:18})})}),m.jsx("td",{className:"font-bold",children:R.name}),m.jsx("td",{className:`font-semibold ${R.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:R.type}),m.jsx("td",{children:R.cost}),m.jsx("td",{className:"text-xs text-gray-400",children:R.description}),m.jsx("td",{children:m.jsx("div",{className:"flex flex-wrap gap-2",children:R.keywords.map(ve=>m.jsx("span",{className:"ability-chip",children:ve},ve))})}),m.jsx("td",{className:"text-xs",children:R.targetingText==="N/A"?m.jsx("span",{className:"text-gray-500",children:"N/A"}):R.targetingText}),m.jsx("td",{children:m.jsx("div",{className:"quantity-buttons",children:Array.from({length:he+1}).map((ve,Ie)=>{const kn=Ie===fe,st=he-(ce-fe),Gt=Ie>st;return m.jsx("button",{onClick:()=>r(R.id,Ie),className:`quantity-btn ${kn?"selected":""}`,disabled:Gt,children:Ie},Ie)})})})]},`${R.id}-${oe}`)})})]})})]}),M==="drones"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:m.jsxs("div",{className:"relative",ref:ie,children:[m.jsx("button",{onClick:()=>Y(!z),className:"filter-select w-full text-left h-full",children:U.abilities.length===0?"Select Abilities":`${U.abilities.length} Abilities Selected`}),z&&m.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:De.abilities.map(R=>m.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:U.abilities.includes(R),onChange:()=>hn(R),className:"mr-2"}),R]},R))})]})}),m.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:m.jsxs("table",{className:"w-full text-left deck-builder-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Info"}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>wr("name"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",Q.key==="name"&&(Q.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>wr("class"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="class"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",Q.key==="class"&&(Q.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>wr("attack"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="attack"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Attack",Q.key==="attack"&&(Q.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>wr("speed"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="speed"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Speed",Q.key==="speed"&&(Q.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>wr("shields"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="shields"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Shields",Q.key==="shields"&&(Q.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>wr("hull"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="hull"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Hull",Q.key==="hull"&&(Q.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:"Abilities"}),m.jsx("th",{children:"Description"}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>wr("limit"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="limit"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Limit",Q.key==="limit"&&(Q.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:m.jsxs("button",{onClick:()=>wr("upgradeSlots"),className:`w-full text-left transition-colors underline cursor-pointer ${Q.key==="upgradeSlots"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Upgrades",Q.key==="upgradeSlots"&&(Q.direction==="ascending"?" ▲":" ▼")]})}),m.jsx("th",{children:"Quantity"})]})}),m.jsx("tbody",{children:zl.map((R,oe)=>{const fe=e&&e[R.name]||0;return m.jsxs("tr",{children:[m.jsx("td",{children:m.jsx("button",{onClick:()=>y(R),className:"p-1 text-gray-400 hover:text-white",children:m.jsx(Ys,{size:18})})}),m.jsx("td",{className:"font-bold",children:R.name}),m.jsx("td",{children:R.class}),m.jsx("td",{children:R.attack}),m.jsx("td",{children:R.speed}),m.jsx("td",{children:R.shields}),m.jsx("td",{children:R.hull}),m.jsx("td",{children:m.jsx("div",{className:"flex flex-wrap gap-2",children:R.keywords.map(ce=>m.jsx("span",{className:"ability-chip",children:ce},ce))})}),m.jsx("td",{className:"text-xs text-gray-400",children:R.description}),m.jsx("td",{children:R.limit}),m.jsx("td",{children:R.upgradeSlots}),m.jsx("td",{children:m.jsxs("div",{className:"quantity-buttons",children:[m.jsx("button",{onClick:()=>i(R.name,0),className:`quantity-btn ${fe===0?"selected":""}`,children:"0"}),m.jsx("button",{onClick:()=>i(R.name,1),className:`quantity-btn ${fe===1?"selected":""}`,children:"1"})]})})]},`${R.name}-${oe}`)})})]})})]}),M==="ship"&&m.jsx(m.Fragment,{children:m.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:m.jsxs("table",{className:"w-full text-left deck-builder-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Info"}),m.jsx("th",{children:"Type"}),m.jsx("th",{children:"Name"}),m.jsx("th",{children:"Description"}),m.jsx("th",{children:"Lane"})]})}),m.jsxs("tbody",{children:[m.jsx("tr",{className:"bg-cyan-900/20",children:m.jsx("td",{colSpan:"5",className:"font-bold text-cyan-400 text-sm py-2",children:"BRIDGE"})}),br.filter(R=>R.type==="Bridge").map((R,oe)=>{const fe=s?.[R.id]||null,ce=Object.entries(s||{}).filter(([he,ve])=>he!==R.id&&ve).map(([he,ve])=>ve);return m.jsxs("tr",{children:[m.jsx("td",{children:m.jsx("button",{onClick:()=>S(R),className:"p-1 text-gray-400 hover:text-white",children:m.jsx(Ys,{size:18})})}),m.jsx("td",{className:"font-semibold text-cyan-400",children:R.type}),m.jsx("td",{className:"font-bold",children:R.name}),m.jsx("td",{className:"text-xs text-gray-400",children:R.description}),m.jsx("td",{children:m.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(he=>m.jsx("button",{onClick:()=>l(R.id,fe===he?null:he),disabled:ce.includes(he)&&fe!==he,className:`px-3 py-1 rounded text-xs font-bold transition-all ${fe===he?"bg-cyan-500 text-white":ce.includes(he)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-cyan-600 hover:text-white"}`,children:he.toUpperCase()},he))})})]},`${R.id}-${oe}`)}),m.jsx("tr",{className:"bg-purple-900/20",children:m.jsx("td",{colSpan:"5",className:"font-bold text-purple-400 text-sm py-2",children:"POWER CELL"})}),br.filter(R=>R.type==="Power Cell").map((R,oe)=>{const fe=s?.[R.id]||null,ce=Object.entries(s||{}).filter(([he,ve])=>he!==R.id&&ve).map(([he,ve])=>ve);return m.jsxs("tr",{children:[m.jsx("td",{children:m.jsx("button",{onClick:()=>S(R),className:"p-1 text-gray-400 hover:text-white",children:m.jsx(Ys,{size:18})})}),m.jsx("td",{className:"font-semibold text-purple-400",children:R.type}),m.jsx("td",{className:"font-bold",children:R.name}),m.jsx("td",{className:"text-xs text-gray-400",children:R.description}),m.jsx("td",{children:m.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(he=>m.jsx("button",{onClick:()=>l(R.id,fe===he?null:he),disabled:ce.includes(he)&&fe!==he,className:`px-3 py-1 rounded text-xs font-bold transition-all ${fe===he?"bg-purple-500 text-white":ce.includes(he)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-purple-600 hover:text-white"}`,children:he.toUpperCase()},he))})})]},`${R.id}-${oe}`)}),m.jsx("tr",{className:"bg-pink-900/20",children:m.jsx("td",{colSpan:"5",className:"font-bold text-pink-400 text-sm py-2",children:"DRONE CONTROL HUB"})}),br.filter(R=>R.type==="Drone Control Hub").map((R,oe)=>{const fe=s?.[R.id]||null,ce=Object.entries(s||{}).filter(([he,ve])=>he!==R.id&&ve).map(([he,ve])=>ve);return m.jsxs("tr",{children:[m.jsx("td",{children:m.jsx("button",{onClick:()=>S(R),className:"p-1 text-gray-400 hover:text-white",children:m.jsx(Ys,{size:18})})}),m.jsx("td",{className:"font-semibold text-pink-400",children:R.type}),m.jsx("td",{className:"font-bold",children:R.name}),m.jsx("td",{className:"text-xs text-gray-400",children:R.description}),m.jsx("td",{children:m.jsx("div",{className:"flex gap-2",children:["l","m","r"].map(he=>m.jsx("button",{onClick:()=>l(R.id,fe===he?null:he),disabled:ce.includes(he)&&fe!==he,className:`px-3 py-1 rounded text-xs font-bold transition-all ${fe===he?"bg-pink-500 text-white":ce.includes(he)?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-gray-300 hover:bg-pink-600 hover:text-white"}`,children:he.toUpperCase()},he))})})]},`${R.id}-${oe}`)})]})]})})})]}),m.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700 h-[calc(100vh-99px)] mr-[10px]",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("div",{className:"flex gap-2 flex-wrap",children:[m.jsxs("button",{onClick:()=>L("deck"),className:`btn-utility ${k==="deck"?"opacity-100":"opacity-60"}`,children:["Deck (",Ke,"/40)"]}),m.jsxs("button",{onClick:()=>L("drones"),className:`btn-utility ${k==="drones"?"opacity-100":"opacity-60"}`,children:["Drones (",me,"/10)"]}),m.jsxs("button",{onClick:()=>L("ship"),className:`btn-utility ${k==="ship"?"opacity-100":"opacity-60"}`,children:["Ship (",It,"/3)"]})]}),m.jsx("button",{onClick:k==="deck"?Gl:k==="drones"?So:()=>l(null,null),className:"btn-reset",children:"Reset"})]}),k==="deck"&&m.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:xe.length>0?xe.map(R=>{const oe=Le[R.baseCardId]>=R.maxInDeck;return m.jsxs("div",{className:"deck-list-item",children:[m.jsx("button",{onClick:()=>h(R),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:m.jsx(Ys,{size:18})}),m.jsx("span",{className:"flex-grow truncate",title:R.name,children:R.name}),m.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[m.jsx("button",{onClick:()=>r(R.id,R.quantity-1),className:"deck-edit-btn",children:"-"}),m.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",R.quantity]}),m.jsx("button",{onClick:()=>r(R.id,R.quantity+1),disabled:oe,className:"deck-edit-btn",children:"+"})]})]},R.id)}):m.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),k==="drones"&&m.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:mt.length>0?mt.map(R=>m.jsxs("div",{className:"deck-list-item",children:[m.jsx("button",{onClick:()=>y(R),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Drone Details",children:m.jsx(Ys,{size:18})}),m.jsx("span",{className:"flex-grow truncate",title:R.name,children:R.name}),m.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[m.jsx("button",{onClick:()=>i(R.name,0),className:"deck-edit-btn",children:"-"}),m.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",R.quantity]}),m.jsx("button",{onClick:()=>i(R.name,1),disabled:me>=10,className:"deck-edit-btn",children:"+"})]})]},R.name)):m.jsx("p",{className:"text-gray-500 italic",children:"Your drone pool is empty. Add drones from the left."})}),k==="ship"&&m.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx("div",{className:"grid grid-cols-3 gap-4",children:["l","m","r"].map((R,oe)=>{const fe=Object.entries(s||{}).find(([he,ve])=>ve===R),ce=fe?br.find(he=>he.id===fe[0]):null;return m.jsxs("div",{className:`p-4 rounded-lg border-2 ${ce?"border-cyan-500 bg-cyan-900/10":"border-dashed border-gray-600 bg-gray-800/30"}`,children:[m.jsx("div",{className:"text-center mb-2",children:m.jsx("span",{className:"font-bold text-sm text-cyan-400",children:oe===1?"MIDDLE (Bonus)":oe===0?"LEFT":"RIGHT"})}),ce?m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-xs text-gray-400 mb-1",children:ce.type}),m.jsx("div",{className:"font-bold text-white mb-2",children:ce.name}),m.jsx("div",{className:"text-xs text-gray-500 mb-2",children:ce.description}),oe===1&&m.jsx("div",{className:"text-xs text-cyan-300 font-semibold",children:"+ Bonus Stats"})]}):m.jsx("div",{className:"text-center text-gray-500 italic text-xs py-4",children:"No component"})]},R)})}),It>0&&m.jsxs("div",{className:"mt-4",children:[m.jsx("h4",{className:"text-sm font-bold text-gray-400 mb-2",children:"Selected Components"}),m.jsx("div",{className:"deck-list",children:Object.entries(s||{}).filter(([R,oe])=>oe).map(([R,oe])=>{const fe=br.find(ce=>ce.id===R);return fe?m.jsxs("div",{className:"deck-list-item",children:[m.jsxs("span",{className:"flex-grow truncate",title:fe.name,children:[fe.name," (",fe.type,")"]}),m.jsxs("span",{className:"font-bold text-cyan-400",children:["Lane: ",oe.toUpperCase()]})]},R):null})})]}),It===0&&m.jsx("p",{className:"text-gray-500 italic text-center py-8",children:"No ship components selected. Select components from the left."})]})}),k==="deck"&&Ke>0&&m.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[m.jsxs("button",{onClick:()=>se(!V),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",m.jsx(iu,{size:20,className:`transition-transform duration-300 ${V?"rotate-0":"rotate-180"}`})]}),m.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${V?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[m.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[m.jsx("button",{onClick:()=>F("cost"),className:`btn-info text-xs ${I==="cost"?"opacity-100":"opacity-60"}`,children:"Cost"}),m.jsx("button",{onClick:()=>F("type"),className:`btn-info text-xs ${I==="type"?"opacity-100":"opacity-60"}`,children:"Type"}),m.jsx("button",{onClick:()=>F("ability"),className:`btn-info text-xs ${I==="ability"?"opacity-100":"opacity-60"}`,children:"Abilities"})]}),m.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[I==="cost"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(ts,{data:Wt.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[m.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),m.jsx(_a,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),m.jsx(Da,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),m.jsx(ia,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),m.jsx(ci,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),I==="type"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(Jy,{margin:{top:20,right:30,bottom:20,left:30},children:[m.jsx(Bf,{data:[{name:"Action Cards",value:xe.filter(R=>R.type==="Action").reduce((R,oe)=>R+oe.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:xe.filter(R=>R.type==="Upgrade").reduce((R,oe)=>R+oe.quantity,0),color:"#c084fc"}].filter(R=>R.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:R,value:oe,percent:fe})=>`${R}: ${oe} (${(fe*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:xe.filter(R=>R.type==="Action").reduce((R,oe)=>R+oe.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:xe.filter(R=>R.type==="Upgrade").reduce((R,oe)=>R+oe.quantity,0),color:"#c084fc"}].filter(R=>R.value>0).map((R,oe)=>m.jsx(ro,{fill:R.color},`cell-${oe}`))}),m.jsx(ia,{}),m.jsx(Yp,{})]})})]}),I==="ability"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(Jy,{margin:{top:20,right:30,bottom:20,left:30},children:[m.jsx(Bf,{data:Wt.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:wi,outerRadius:60,dataKey:"value",children:Wt.pieChartData.map((R,oe)=>m.jsx(ro,{fill:Pt[oe%Pt.length]},`cell-${oe}`))}),m.jsx(ia,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),k==="drones"&&me>0&&m.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[m.jsxs("button",{onClick:()=>se(!V),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Drone Statistics",m.jsx(iu,{size:20,className:`transition-transform duration-300 ${V?"rotate-0":"rotate-180"}`})]}),m.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${V?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[m.jsxs("div",{className:"flex justify-center gap-2 mb-2 flex-wrap",children:[m.jsx("button",{onClick:()=>F("cost"),className:`btn-info text-xs ${I==="cost"?"opacity-100":"opacity-60"}`,children:"Cost"}),m.jsx("button",{onClick:()=>F("attack"),className:`btn-info text-xs ${I==="attack"?"opacity-100":"opacity-60"}`,children:"Attack"}),m.jsx("button",{onClick:()=>F("speed"),className:`btn-info text-xs ${I==="speed"?"opacity-100":"opacity-60"}`,children:"Speed"}),m.jsx("button",{onClick:()=>F("shields"),className:`btn-info text-xs ${I==="shields"?"opacity-100":"opacity-60"}`,children:"Shields"}),m.jsx("button",{onClick:()=>F("hull"),className:`btn-info text-xs ${I==="hull"?"opacity-100":"opacity-60"}`,children:"Hull"}),m.jsx("button",{onClick:()=>F("limit"),className:`btn-info text-xs ${I==="limit"?"opacity-100":"opacity-60"}`,children:"Limit"}),m.jsx("button",{onClick:()=>F("upgrades"),className:`btn-info text-xs ${I==="upgrades"?"opacity-100":"opacity-60"}`,children:"Upgrades"}),m.jsx("button",{onClick:()=>F("ability"),className:`btn-info text-xs ${I==="ability"?"opacity-100":"opacity-60"}`,children:"Abilities"})]}),m.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[I==="cost"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Drone Cost Distribution"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(ts,{data:zt.costData,margin:{top:5,right:20,left:-15,bottom:0},children:[m.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),m.jsx(_a,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),m.jsx(Da,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),m.jsx(ia,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),m.jsx(ci,{dataKey:"count",fill:"#8884d8",name:"Drone Count"})]})})]}),I==="attack"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Attack Distribution"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(ts,{data:zt.attackData,margin:{top:5,right:20,left:-15,bottom:0},children:[m.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),m.jsx(_a,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),m.jsx(Da,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),m.jsx(ia,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),m.jsx(ci,{dataKey:"count",fill:"#ef4444",name:"Drone Count"})]})})]}),I==="speed"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Speed Distribution"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(ts,{data:zt.speedData,margin:{top:5,right:20,left:-15,bottom:0},children:[m.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),m.jsx(_a,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),m.jsx(Da,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),m.jsx(ia,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),m.jsx(ci,{dataKey:"count",fill:"#3b82f6",name:"Drone Count"})]})})]}),I==="shields"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Shield Distribution"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(ts,{data:zt.shieldsData,margin:{top:5,right:20,left:-15,bottom:0},children:[m.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),m.jsx(_a,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),m.jsx(Da,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),m.jsx(ia,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),m.jsx(ci,{dataKey:"count",fill:"#06b6d4",name:"Drone Count"})]})})]}),I==="hull"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Hull Distribution"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(ts,{data:zt.hullData,margin:{top:5,right:20,left:-15,bottom:0},children:[m.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),m.jsx(_a,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),m.jsx(Da,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),m.jsx(ia,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),m.jsx(ci,{dataKey:"count",fill:"#22c55e",name:"Drone Count"})]})})]}),I==="limit"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Deployment Limit Distribution"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(ts,{data:zt.limitData,margin:{top:5,right:20,left:-15,bottom:0},children:[m.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),m.jsx(_a,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),m.jsx(Da,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),m.jsx(ia,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),m.jsx(ci,{dataKey:"count",fill:"#f59e0b",name:"Drone Count"})]})})]}),I==="upgrades"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Upgrade Slots Distribution"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(ts,{data:zt.upgradesData,margin:{top:5,right:20,left:-15,bottom:0},children:[m.jsx(ui,{strokeDasharray:"3 3",stroke:"#4A5568"}),m.jsx(_a,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),m.jsx(Da,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),m.jsx(ia,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),m.jsx(ci,{dataKey:"count",fill:"#a855f7",name:"Drone Count"})]})})]}),I==="ability"&&m.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[m.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),m.jsx(sa,{width:"100%",height:"100%",children:m.jsxs(Jy,{margin:{top:20,right:30,bottom:20,left:30},children:[m.jsx(Bf,{data:zt.abilityData,cx:"50%",cy:"50%",labelLine:!1,label:({name:R,value:oe,percent:fe})=>`${R}: ${oe} (${(fe*100).toFixed(0)}%)`,outerRadius:60,dataKey:"value",children:zt.abilityData.map((R,oe)=>m.jsx(ro,{fill:Pt[oe%Pt.length]},`cell-${oe}`))}),m.jsx(ia,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),m.jsx("button",{onClick:u,disabled:!ze||!Je||!Kt,className:"btn-confirm w-full p-4 mt-4 text-lg font-bold font-orbitron",title:Kt?"":"You must select all 3 ship components with lanes assigned",children:"Confirm Deck, Drones & Ship"})]})]})]})};function Oq(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getOpponentPlayerState:s,addLogEntry:l}=ds(),{turnPhase:u}=e,p=i();s();const[d,h]=A.useState(!1),[g,y]=A.useState({}),[b,S]=A.useState({}),[E,C]=A.useState({}),T=async z=>{if(u==="deckSelection")if(w("DECK_SELECTION","🔧 handleDeckChoice called with:",z),z==="standard"){const Y=t(),ie=Be.buildDeckFromList(fl),Z=[...XP];if(Z.length!==10){console.error(`❌ Standard drone list has ${Z.length} drones, expected 10`),l({player:"SYSTEM",actionType:"ERROR",source:"Deck Validation",target:"N/A",outcome:`Invalid standard drone list: ${Z.length} drones instead of 10.`},"handleDeckChoice");return}const U={phase:"deckSelection",playerId:Y,actionData:{deck:ie,drones:Z,shipComponents:{BRIDGE_001:"l",POWERCELL_001:"m",DRONECONTROL_001:"r"}}};if(e.gameMode==="guest"){w("DECK_SELECTION","[GUEST] Sending deck selection commitment to host"),Wn.sendActionToHost("commitment",U);return}const q=await He.actionProcessor.processCommitment(U);if(!q.success){console.error("❌ Deck selection submission failed:",q.error);return}w("DECK_SELECTION","✅ Standard deck selection submitted to PhaseManager"),l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else z==="custom"&&(w("DECK_SELECTION","🔧 Opening custom deck builder"),h(!0))},O=(z,Y)=>{y(ie=>({...ie,[z]:Y}))},N=(z,Y)=>{S(ie=>({...ie,[z]:Y}))},j=(z,Y)=>{if(z===null&&Y===null){C({});return}C(ie=>({...ie,[z]:Y}))},M=async()=>{w("DECK_SELECTION","🔧 Confirming custom deck:",g);const z=[];let Y=0;Object.entries(g).forEach(([Q,Se])=>{for(let I=0;I<Se;I++){const F=_f.find(V=>V.id===Q);F&&z.push(Be.createCard(F,`card-${Date.now()}-${Y++}`))}});const ie=z.sort(()=>.5-Math.random());w("DECK_SELECTION",`🔀 Custom deck shuffled: ${ie.length} cards`,{sampleCard:ie[0],sampleInstanceId:ie[0]?.instanceId,hasInstanceId:ie[0]?.instanceId!==void 0});const Z=[];Object.entries(b).forEach(([Q,Se])=>{Se>0&&Z.push(Q)}),w("DECK_SELECTION",`🎲 Custom deck includes ${Z.length} drones:`,Z.join(", "));const U={phase:"deckSelection",playerId:t(),actionData:{deck:ie,drones:Z,shipComponents:E}};if(e.gameMode==="guest"){w("DECK_SELECTION","[GUEST] Sending custom deck commitment to host"),Wn.sendActionToHost("commitment",U),h(!1);return}const q=await He.actionProcessor.processCommitment(U);if(!q.success){console.error("❌ Custom deck submission failed:",q.error);return}w("DECK_SELECTION","✅ Custom deck submitted to PhaseManager"),l({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected a Custom Deck."},"handleConfirmDeck"),h(!1)},D=z=>{try{const Y={},ie={},Z={},te=z.split("|");for(const U of te){const[q,...Q]=U.split(":"),Se=Q.join(":");if(q==="cards"){const I=Se.split(",");for(const F of I){const[V,se]=F.split(":"),ge=parseInt(se,10);if(!V||isNaN(ge))return{success:!1,message:"Invalid card format in deck code."};if(!_f.find(ye=>ye.id===V))return{success:!1,message:`Card ${V} not found.`};Y[V]=ge}}else if(q==="drones"){const I=Se.split(",");for(const F of I){const V=F.split(":"),se=V.pop(),ge=V.join(":"),Ae=parseInt(se,10);if(!ge||isNaN(Ae))return{success:!1,message:"Invalid drone format in deck code."};ie[ge]=Ae}}else if(q==="ship"){const I=Se.split(",");for(const F of I){const[V,se]=F.split(":");if(!V||!se||!["l","m","r"].includes(se))return{success:!1,message:"Invalid ship component format in deck code."};Z[V]=se}}}return y(Y),S(ie),C(Z),{success:!0}}catch(Y){return console.error("Error importing deck:",Y),{success:!1,message:"Failed to parse deck code."}}};A.useEffect(()=>{e.gameMode==="guest"&&He.emit("render_complete")},[e,He]);const k=t(),L=n(),G=e.commitments?.deckSelection?.[k]?.completed||!1,K=e.commitments?.deckSelection?.[L]?.completed||!1;return w("DECK_SELECTION","🔍 [DECK SELECTION] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:k,opponentPlayerId:L,localPlayerCompleted:G,opponentCompleted:K,fullCommitmentsObject:e.commitments?.deckSelection,turnPhase:u,localPlayerDeckLength:p.deck?.length,willShowWaiting:r()&&G&&!K}),r()&&G&&!K?m.jsx(mv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):d?m.jsx(wq,{selectedDrones:b,fullCardCollection:_f,deck:g,onDeckChange:O,onDronesChange:N,selectedShipComponents:E,onShipComponentsChange:j,onConfirmDeck:M,onImportDeck:D}):m.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[m.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),m.jsxs("div",{className:"flex flex-col items-center justify-center h-full relative z-10",children:[m.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),m.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),m.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[m.jsxs("div",{onClick:()=>T("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[m.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),m.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),m.jsx("button",{className:"btn-confirm mt-6",children:"Select"})]}),m.jsxs("div",{onClick:()=>T("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[m.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),m.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),m.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}function Nq(){const{gameState:e,getLocalPlayerId:t,getOpponentPlayerId:n,isMultiplayer:r,getLocalPlayerState:i,getLocalPlacedSections:s}=ds(),{turnPhase:l,unplacedSections:u}=e,p=i(),d=s(),[h,g]=A.useState(null),b=(()=>{const K=p.selectedShipComponents;if(!K||Object.keys(K).length===0)return{placed:d||[null,null,null],unplaced:u||["bridge","powerCell","droneControlHub"]};const z=[null,null,null],Y=[],ie={l:0,m:1,r:2};return Object.entries(K).forEach(([te,U])=>{if(U){const q=br.find(Q=>Q.id===te);if(q&&q.key){const Q=ie[U];z[Q]=q.key}}}),["bridge","powerCell","droneControlHub"].forEach(te=>{z.includes(te)||Y.push(te)}),{placed:z,unplaced:Y}})(),[S,E]=A.useState(b.placed),[C,T]=A.useState(b.unplaced),O=K=>{if(l==="placement")if(w("PLACEMENT","🔧 handleSelectSectionForPlacement called with:",K,"gameMode:",e.gameMode),C.includes(K))g(z=>z===K?null:K);else{const z=S.indexOf(K),Y=[...S];Y[z]=null,E(Y),T(ie=>[...ie,K]),g(null)}},N=K=>{if(l==="placement")if(w("PLACEMENT","🔧 handleLaneSelectForPlacement called with lane:",K,"gameMode:",e.gameMode),h){if(S[K]){const z=S[K],Y=[...S];Y[K]=h;const ie=C.indexOf(h),Z=[...C];Z.splice(ie,1,z),E(Y),T(Z)}else{const z=[...S];z[K]=h,E(z),T(Y=>Y.filter(ie=>ie!==h))}g(null)}else S[K]&&O(S[K])},j=async()=>{if(l!=="placement")return;if(w("PLACEMENT","🔧 handleConfirmPlacement called"),S.some(Y=>Y==null)){console.warn("⚠️ Cannot confirm placement: All ship sections must be placed");return}w("PLACEMENT","🔧 Submitting placement to PhaseManager:",S);const z={phase:"placement",playerId:t(),actionData:{placedSections:S}};if(e.gameMode==="guest"){w("PLACEMENT","[GUEST] Sending ship placement commitment to host"),Wn.sendActionToHost("commitment",z);return}try{const Y=await He.actionProcessor.processCommitment(z);if(!Y.success){console.error("❌ Placement submission failed:",Y.error);return}w("PLACEMENT","✅ Placement submitted to PhaseManager")}catch(Y){console.error("❌ Error submitting placement:",Y)}};A.useEffect(()=>{e.gameMode==="guest"&&He.emit("render_complete")},[e,He]);const M=t(),D=n(),k=e.commitments?.placement?.[M]?.completed||!1,L=e.commitments?.placement?.[D]?.completed||!1;if(w("PLACEMENT","🔍 [SHIP PLACEMENT] Render check:",{gameMode:e.gameMode,isMultiplayer:r(),localPlayerId:M,opponentPlayerId:D,localPlayerCompleted:k,opponentCompleted:L,fullCommitmentsObject:e.commitments?.placement,turnPhase:l,willShowWaiting:r()&&k&&!L}),r()&&k&&!L){const K=S.map((z,Y)=>z?z.name:"Empty").join(", ");return m.jsx(mv,{phase:"placement",localPlayerStatus:`Your ship layout: ${K}`})}const G=S.every(K=>K!==null);return w("PLACEMENT","🔥 ShipPlacementScreen rendered:",{allPlaced:G,placed:S,unplaced:u,selected:h}),m.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900/30 via-indigo-950/30 to-black/30 relative",children:[m.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),m.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[m.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),m.jsxs("p",{className:"text-center text-gray-400 mb-8",children:[C.length>0?"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again.":"Your ship components are pre-configured. You can rearrange them by clicking a section to pick it up."," ","The ship section placed in the centre lane will gain a bonus to its stats."]}),m.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[m.jsx("div",{className:"w-full text-center mb-2",children:m.jsx("h3",{className:"text-xl font-orbitron text-cyan-400",children:"Your Ship Layout"})}),m.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(K=>{const z=S[K],Y=h&&!S[K];return m.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>N(K),children:z?m.jsx(uo,{section:z,stats:p.shipSections[z],effectiveStatsForDisplay:p.shipSections[z].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:K===1,gameEngine:Be,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null}):m.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${Y?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:m.jsx("span",{className:"text-center font-bold",children:K===1?"Lane 2 (Center Bonus)":`Lane ${K+1}`})})},K)})}),C.length>0&&m.jsx("div",{className:"w-full text-center mt-6 mb-2",children:m.jsx("h3",{className:"text-lg font-orbitron text-gray-400",children:"Available Sections"})}),m.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(K=>m.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:C.includes(K)&&m.jsx("div",{onClick:()=>O(K),className:`h-full transition-all duration-300 rounded-xl ${h===K?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:m.jsx(uo,{section:K,stats:p.shipSections[K],effectiveStatsForDisplay:p.shipSections[K].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:Be,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:p,shipAbilityMode:null})})},K))})]}),m.jsx("button",{onClick:()=>{w("PLACEMENT",`🔥 Confirm Layout button clicked! allPlaced: ${G}`),j()},disabled:!G,className:"btn-confirm mt-12 text-lg",children:"Confirm Layout"})]})]})}const _q=()=>{const e=A.useRef(null);return A.useEffect(()=>{const t=e.current,n=t.getContext("2d");let r;const i=Array.from({length:500},()=>{const d=Math.random();let h;return d<.9?h="rgba(255, 255, 255, ":d<.94?h="rgba(100, 150, 255, ":d<.98?h="rgba(255, 200, 100, ":h="rgba(255, 100, 100, ",{x:0,y:0,radius:Math.random()*1.5+.5,opacity:Math.random()*.5+.3,twinkleSpeed:.005+Math.random()*.01,twinklePhase:Math.random()*Math.PI*2,color:h}}),s=["rgba(147, 51, 234, ","rgba(59, 130, 246, ","rgba(236, 72, 153, ","rgba(16, 185, 129, ","rgba(6, 182, 212, ","rgba(139, 92, 246, ","rgba(34, 211, 238, "],l=Array.from({length:4},()=>({x:0,y:0,radius:180+Math.random()*150,color:s[Math.floor(Math.random()*s.length)],pulsePhase:Math.random()*Math.PI*2,pulseSpeed:.004+Math.random()*.003})),u=()=>{t.width=window.innerWidth,t.height=window.innerHeight,i.forEach(d=>{d.x=Math.random()*t.width,d.y=Math.random()*(t.height*.75)}),l.forEach(d=>{d.x=Math.random()*t.width,d.y=Math.random()*(t.height*.75)})};u(),window.addEventListener("resize",u);const p=()=>{n.fillStyle="#0a0a1a",n.fillRect(0,0,t.width,t.height),l.forEach(d=>{d.pulsePhase+=d.pulseSpeed;const h=.08+Math.sin(d.pulsePhase)*.04;for(let g=0;g<3;g++){const y=Math.sin(d.pulsePhase*.5+g)*30,b=Math.cos(d.pulsePhase*.3+g)*30,S=h*(.4+g*.3),E=n.createRadialGradient(d.x+y,d.y+b,0,d.x+y,d.y+b,d.radius*(.7+g*.15));E.addColorStop(0,d.color+S+")"),E.addColorStop(.3,d.color+S*.6+")"),E.addColorStop(.7,d.color+S*.2+")"),E.addColorStop(1,d.color+"0)"),n.fillStyle=E,n.fillRect(0,0,t.width,t.height)}}),i.forEach(d=>{d.twinklePhase+=d.twinkleSpeed;const h=.3+Math.sin(d.twinklePhase)*.7;n.beginPath(),n.arc(d.x,d.y,d.radius,0,Math.PI*2),n.fillStyle=d.color+d.opacity*h+")",n.fill(),d.radius>1&&(n.beginPath(),n.arc(d.x,d.y,d.radius*2,0,Math.PI*2),n.fillStyle=d.color+d.opacity*h*.1+")",n.fill())}),r=requestAnimationFrame(p)};return p(),()=>{window.removeEventListener("resize",u),cancelAnimationFrame(r)}},[]),m.jsx("canvas",{ref:e,className:"fixed inset-0 -z-10",style:{background:"#0a0a1a"}})},xo=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&m.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:m.jsx(En,{size:24})}),m.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),m.jsx("p",{className:"text-center text-gray-400",children:t}),r]})}),Na=({icon:e,value:t,max:n,iconColor:r,isPlayer:i})=>{const s=i?"from-cyan-400/30 via-blue-400/30 to-blue-500/30":"from-pink-400/30 via-pink-500/30 to-pink-600/30";return m.jsx("div",{className:`relative p-[1px] bg-gradient-to-br ${s}`,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:m.jsxs("div",{className:"bg-gradient-to-br from-gray-900/95 to-gray-800/95 px-3 py-1 flex items-center gap-2",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[m.jsx(e,{size:18,className:r}),m.jsxs("span",{className:"font-bold text-base text-white whitespace-nowrap",children:[t,n!==void 0&&m.jsxs("span",{className:"hidden xl:inline",children:[" / ",n]})]})]})})};function Dq({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:p,opponentShieldsToAllocate:d,shieldsToRemove:h,shieldsToAdd:g,reallocationPhase:y,totalLocalPlayerDrones:b,totalOpponentPlayerDrones:S,getLocalPlayerId:E,getOpponentPlayerId:C,isMyTurn:T,currentPlayer:O,isMultiplayer:N,handlePlayerPass:j,handleReset:M,handleResetShields:D,handleConfirmShields:k,handleCancelReallocation:L,handleResetReallocation:G,handleContinueToAddPhase:K,handleConfirmReallocation:z,handleRoundStartDraw:Y,optionalDiscardCount:ie,mandatoryAction:Z,multiSelectState:te,AI_HAND_DEBUG_MODE:U,setShowAiHandModal:q,onShowDebugModal:Q,onShowOpponentDrones:Se}){const[I,F]=A.useState(!1),V=A.useRef(null);return A.useEffect(()=>{const se=ge=>{V.current&&!V.current.contains(ge.target)&&F(!1)};return document.addEventListener("mousedown",se),()=>{document.removeEventListener("mousedown",se)}},[]),m.jsxs("header",{className:"w-full flex justify-between items-start mb-2 flex-shrink-0 px-5 pt-2",children:[m.jsxs("div",{className:"flex flex-col gap-1.5",children:[m.jsxs("h2",{className:"text-base font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Opponent",(i==="deployment"||i==="action")&&u===C()&&m.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${C()}Passed`]&&m.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Na,{icon:zf,value:t.energy,max:r.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!1}),m.jsx("div",{onClick:()=>U&&setTimeout(()=>q(!0),100),className:U?"cursor-pointer":"",children:m.jsx(Na,{icon:PM,value:t.hand.length,max:r.totals.handLimit,iconColor:"text-gray-400",isPlayer:!1})}),i==="deployment"&&m.jsx(Na,{icon:e0,value:s===1?t.initialDeploymentBudget:t.deploymentBudget,iconColor:"text-purple-400",isPlayer:!1}),m.jsx("div",{onClick:()=>setTimeout(()=>Se(),100),className:"cursor-pointer hover:scale-105 transition-transform",children:m.jsx(Na,{icon:gA,value:S,max:r.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!1})})]})]}),m.jsxs("div",{className:"text-center flex flex-col items-center gap-2",children:[m.jsxs("h2",{className:"text-base font-bold uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #6b7280, #9ca3af)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[EI(i),i==="allocateShields"&&m.jsxs("span",{className:"text-base font-semibold text-cyan-300 ml-2",children:["(",p," shields to assign)"]}),y==="removing"&&m.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",h," shields to remove)"]}),y==="adding"&&m.jsxs("span",{className:"text-base font-semibold text-green-300 ml-2",children:["(",g," shields to add)"]}),i==="mandatoryDiscard"&&Z?.type==="discard"&&m.jsxs("span",{className:"text-base font-semibold text-orange-300 ml-2",children:["(",Z.count," ",Z.count===1?"card":"cards"," to discard)"]}),i==="optionalDiscard"&&m.jsxs("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:["(",n.totals.discardLimit-ie," ",n.totals.discardLimit-ie===1?"card":"cards"," to discard)"]})]}),(i==="deployment"||i==="action"||y)&&m.jsxs("div",{className:"flex items-center gap-3",children:[T()?m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Your Turn"})}):m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"text-3xl font-orbitron font-black uppercase tracking-widest phase-announcement-shine animate-pulse",style:{backgroundImage:"linear-gradient(45deg, #ec4899, #f472b6, #ec4899)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(236, 72, 153, 0.5), 0 0 60px rgba(244, 114, 182, 0.3)",filter:"drop-shadow(0 0 20px rgba(236, 72, 153, 0.4))",animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:N()?"Opponent's Turn":"AI Thinking"})}),T()&&!Z&&!te&&!y&&m.jsx("button",{onClick:j,disabled:l[`${E()}Passed`],className:"relative p-[1px] transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:l[`${E()}Passed`]?"linear-gradient(45deg, rgba(75, 85, 99, 0.6), rgba(107, 114, 128, 0.6))":"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:m.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:l[`${E()}Passed`]?"#9ca3af":"#fca5a5"},children:"Pass"})}),y==="removing"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:L,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:m.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),m.jsx("button",{onClick:G,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:m.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),m.jsx("button",{onClick:K,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:m.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Continue"})})]}),y==="adding"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:L,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8))"},children:m.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fca5a5"},children:"Cancel"})}),m.jsx("button",{onClick:G,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:m.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),m.jsx("button",{onClick:z,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:m.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]})]}),i==="allocateShields"&&m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:D,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8))"},children:m.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#fde047"},children:"Reset"})}),m.jsx("button",{onClick:k,className:"relative p-[1px] transition-all hover:scale-105",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",backgroundImage:"linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8))"},children:m.jsx("div",{className:"px-6 py-1.5 uppercase text-sm tracking-wider font-semibold bg-gray-900",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)",color:"#86efac"},children:"Confirm"})})]}),i==="optionalDiscard"&&m.jsx("button",{onClick:Y,className:"btn-confirm",children:"Confirm"})]}),m.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[m.jsxs("h2",{className:"text-base font-bold uppercase tracking-wider flex items-center gap-2",style:{backgroundImage:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["Your Resources",(i==="deployment"||i==="action")&&u===E()&&m.jsx("span",{className:"text-base font-semibold text-yellow-300",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${E()}Passed`]&&m.jsx("span",{className:"text-base font-semibold text-red-400",children:"(Passed)"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Na,{icon:zf,value:e.energy,max:n.totals.maxEnergy,iconColor:"text-yellow-300",isPlayer:!0}),i==="deployment"&&m.jsx(Na,{icon:e0,value:s===1?e.initialDeploymentBudget:e.deploymentBudget,iconColor:"text-purple-400",isPlayer:!0}),m.jsx(Na,{icon:gA,value:b,max:n.totals.cpuLimit,iconColor:"text-cyan-400",isPlayer:!0}),i==="allocateShields"&&m.jsx(Na,{icon:hg,value:p,iconColor:"text-cyan-300",isPlayer:!0}),y==="removing"&&m.jsx(Na,{icon:hg,value:h,iconColor:"text-orange-300",isPlayer:!0}),y==="adding"&&m.jsx(Na,{icon:hg,value:g,iconColor:"text-green-300",isPlayer:!0}),m.jsx("button",{onClick:M,className:"relative p-[2px] bg-gradient-to-br from-pink-400 to-pink-600",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Reset Game",children:m.jsx("div",{className:"bg-pink-700 hover:bg-pink-600 p-1.5 transition-colors",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:m.jsx(kM,{size:20,className:"text-white"})})}),m.jsxs("div",{className:"relative",ref:V,children:[m.jsx("button",{onClick:()=>F(!I),className:"relative p-[2px] bg-gradient-to-br from-gray-500 to-gray-700",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},"aria-label":"Settings",children:m.jsxs("div",{className:"bg-slate-700 hover:bg-slate-600 p-1.5 transition-colors flex items-center gap-1",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%)"},children:[m.jsx(yA,{size:20,className:"text-white"}),m.jsx(hM,{size:16,className:"text-white"})]})}),I&&m.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:m.jsxs("button",{onClick:()=>{Q&&Q(),F(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-lg flex items-center gap-2",children:[m.jsx(yA,{size:16}),"Debug View"]})})]})]})]})]})}const ch=()=>{const{gameStateManager:e}=ds(),t=A.useMemo(()=>e?un.getInstance(e):null,[e]),[n,r]=A.useState(null);return A.useEffect(()=>{if(!t)return;const h=()=>{r(t.getCacheStats())};h();const g=setInterval(h,5e3);return()=>clearInterval(g)},[t]),{gameDataService:t,getEffectiveStats:(h,g)=>t?t.getEffectiveStats(h,g):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(h,g=[])=>t?t.getEffectiveShipStats(h,g):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:h=>t?t.getLaneData(h):{lane:h,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(h,g=null)=>t?t.hasGuardianInLane(h,g):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},BP=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:p,gameEngine:d,turnPhase:h,isMyTurn:g,passInfo:y,getLocalPlayerId:b,localPlayerState:S,shipAbilityMode:E,hoveredTarget:C,setHoveredTarget:T,sectionRefs:O})=>{const{getEffectiveShipStats:N}=ch(),j=N(e,n);return m.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(M=>{const D=n[M];if(!D)return w("STATE_SYNC",`Lane ${M} rendering EMPTY div - no hover possible:`,{sectionName:D,sectionNameType:typeof D,sectionNameValue:JSON.stringify(D),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),m.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},M);const k=e.shipSections[D],L=u.some(K=>K.id===D);let G=null;if(p&&t){if(p==="removing")k.allocatedShields>0?G="can-remove":G="cannot-remove";else if(p==="adding"){const K=d.getEffectiveSectionMaxShields(D,e,n);k.allocatedShields<K?G="can-add":G="cannot-add"}}return m.jsx("div",{className:"flex-1 min-w-0 max-h-[120px]",children:m.jsx(uo,{section:D,stats:k,effectiveStatsForDisplay:j.bySection[D],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(D):s&&s({...k,id:D,name:D},"section",t)},onAbilityClick:i,isInteractive:l||h==="action"&&t&&k.ability&&S.energy>=k.ability.cost.energy,isCardTarget:L,isInMiddleLane:M===1,isHovered:C?.type==="section"&&C?.target.name===D&&C?.isOpponent===!t,onMouseEnter:()=>!t&&T({target:{...k,name:D},type:"section",isOpponent:!0}),onMouseLeave:()=>!t&&T(null),reallocationState:G,gameEngine:d,turnPhase:h,isMyTurn:g,passInfo:y,getLocalPlayerId:b,localPlayerState:S,shipAbilityMode:E,sectionRef:K=>{if(O&&K){const z=`${t?"local":"opponent"}-${D}`;O.current[z]=K}}})},M)})})},kq=({droneId:e,timestamp:t,duration:n=2e3})=>{const[r,i]=A.useState(!0);return A.useEffect(()=>{const s=setTimeout(()=>{i(!1)},n);return()=>clearTimeout(s)},[t,n]),r?m.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-50",children:m.jsx("div",{className:"bg-red-600/90 rounded-lg px-4 py-2 shadow-2xl border-2 border-red-400 animate-pulse",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(RM,{className:"w-5 h-5 text-white"}),m.jsx("span",{className:"text-white font-bold text-lg tracking-wide drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]",children:"Intercepted!"})]})})}):null},UP=({value:e,isFlat:t,bgColor:n,textColor:r})=>m.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:m.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),Mq=({onClick:e})=>m.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("circle",{cx:"12",cy:"12",r:"6"}),m.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),Uf=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,onMouseEnter:u,onMouseLeave:p,lane:d,onAbilityClick:h,isActionTarget:g,droneRefs:y,mandatoryAction:b,localPlayerState:S,interceptedBadge:E,enableFloatAnimation:C=!1})=>{const{getEffectiveStats:T}=ch(),O=A.useMemo(()=>Yn.find(ye=>ye.name===e.name),[e.name]),N=T(e,d),{maxShields:j}=N,M=e.currentShields??j,D=O.abilities.filter(ye=>ye.type==="ACTIVE"),k=n?"border-cyan-400":"border-pink-500",L=n?"bg-cyan-900":"bg-pink-950",G=n?"text-cyan-100":"text-pink-100",K=n?"bg-cyan-900":"bg-pink-950",z=n?"text-cyan-400":"text-pink-500",Y=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",ie=N.attack>N.baseAttack,Z=N.attack<N.baseAttack,te=ie?"text-green-400":Z?"text-red-400":"text-white",U=N.speed>N.baseSpeed,q=N.speed<N.baseSpeed,Q=U?"text-green-400":q?"text-red-400":"text-white",Se=e.isExhausted?"grayscale opacity-60":"",I=s?"animate-shake":"",F=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",V=g?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",se=b?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",ge=ye=>!(e.isExhausted&&ye.cost.exhausts!==!1||ye.cost.energy&&S.energy<ye.cost.energy),Ae=e.isTeleporting?"opacity-0 pointer-events-none":"";return m.jsxs("div",{ref:ye=>y.current[e.id]=ye,onClick:ye=>t&&t(ye,e,n),onMouseEnter:u,onMouseLeave:p,className:`relative w-[90px] h-[135px] transition-all duration-200 ${Se} ${I} ${F} ${V} ${se} ${Ae} ${C?"drone-float":""}`,children:[m.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${k} cursor-pointer shadow-black overflow-hidden`,children:[m.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-black/10"}),m.jsxs("div",{className:"relative z-10 h-full",children:[m.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[m.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:j}).map((ye,De)=>De<M?m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:z,children:m.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},De):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:Y,children:m.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},De))}),m.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:O.hull}).map((ye,De)=>{const Ke=De<e.hull,xe=e.isExhausted?"bg-green-800":"bg-green-500";return m.jsx("div",{className:`h-2 w-2 rounded-sm ${Ke?xe:"bg-gray-400"} border border-black/50`},De)})})]}),m.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${L} flex items-center justify-center border-t ${k}`,children:m.jsx("span",{className:`font-orbitron text-[8px] uppercase ${G} tracking-wider w-full text-center`,children:e.name})})]})]}),m.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:m.jsx(UP,{value:N.attack,isFlat:!1,bgColor:K,textColor:te})}),m.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:m.jsx(UP,{value:N.speed,isFlat:!0,bgColor:K,textColor:Q})}),n&&D.length>0&&ge(D[0])&&m.jsx(Mq,{onClick:ye=>h&&h(ye,e,D[0])}),E&&E.droneId===e.id&&m.jsx(kq,{droneId:e.id,timestamp:E.timestamp})]})},jq=(e,t,n,r,i,s,l,u,p,d,h,g,y,b,S,E,C,T,O,N,j)=>m.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(M=>m.jsx(Uf,{drone:M,lane:n,isPlayer:t,onClick:d,onAbilityClick:h,isSelected:g&&g.id===M.id,isSelectedForMove:y?.phase==="select_drones"&&y.selectedDrones.some(D=>D.id===M.id),isHit:b.includes(M.id),isPotentialInterceptor:S.includes(M.id),droneRefs:E,mandatoryAction:C,localPlayerState:r,isActionTarget:T.some(D=>D.id===M.id)||O.some(D=>D.id===M.id),onMouseEnter:()=>!t&&N({target:M,type:"drone",lane:n}),onMouseLeave:()=>!t&&N(null),interceptedBadge:j,enableFloatAnimation:!0},M.id))}),zP=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:p,multiSelectState:d,turnPhase:h,localPlayerState:g,opponentPlayerState:y,localPlacedSections:b,opponentPlacedSections:S,gameEngine:E,getPlacedSectionsForEngine:C,handleTokenClick:T,handleAbilityIconClick:O,selectedDrone:N,recentlyHitDrones:j,potentialInterceptors:M,droneRefs:D,mandatoryAction:k,setHoveredTarget:L,interceptedBadge:G})=>(ch(),m.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(K=>{const z=t?r():i(),Y=s&&l.some(te=>te.id===K&&te.owner===z)||u&&p.some(te=>te.id===K&&te.owner===z)||d&&p.some(te=>te.id===K&&te.owner===z),ie=t&&(h==="deployment"||h==="action"),Z=t?"bg-cyan-400/10":"bg-pink-500/10";return m.jsx("div",{onClick:te=>n(te,K,t),className:`flex-1 rounded-lg transition-all duration-200 p-2
              ${Y?"bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":Z}
              ${ie?"cursor-pointer hover:bg-cyan-900/20":""}
            `,children:jq(e.dronesOnBoard[K],t,K,g,y,b,S,E,C,T,O,N,d,j,M,D,k,l,p,L,G)},K)})}));function Iq({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:p,turnPhase:d,reallocationPhase:h,shipAbilityMode:g,hoveredTarget:y,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:E,droneRefs:C,sectionRefs:T,mandatoryAction:O,gameEngine:N,getLocalPlayerId:j,getOpponentPlayerId:M,isMyTurn:D,getPlacedSectionsForEngine:k,passInfo:L,handleTargetClick:G,handleLaneClick:K,handleShipSectionClick:z,handleShipAbilityClick:Y,handleTokenClick:ie,handleAbilityIconClick:Z,setHoveredTarget:te,interceptedBadge:U}){return m.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:m.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[m.jsx(BP,{player:t,isPlayer:!1,placedSections:r,onTargetClick:G,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:N,turnPhase:d,isMyTurn:D,passInfo:L,getLocalPlayerId:j,localPlayerState:e,shipAbilityMode:g,hoveredTarget:y,setHoveredTarget:te,sectionRefs:T}),m.jsx(zP,{player:t,isPlayer:!1,onLaneClick:K,getLocalPlayerId:j,getOpponentPlayerId:M,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:p,turnPhase:d,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:N,getPlacedSectionsForEngine:k,handleTokenClick:ie,handleAbilityIconClick:Z,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:E,droneRefs:C,mandatoryAction:O,setHoveredTarget:te,interceptedBadge:U}),m.jsx(zP,{player:e,isPlayer:!0,onLaneClick:K,getLocalPlayerId:j,getOpponentPlayerId:M,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:p,turnPhase:d,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:N,getPlacedSectionsForEngine:k,handleTokenClick:ie,handleAbilityIconClick:Z,selectedDrone:b,recentlyHitDrones:S,potentialInterceptors:E,droneRefs:C,mandatoryAction:O,setHoveredTarget:te,interceptedBadge:U}),m.jsx(BP,{player:e,isPlayer:!0,placedSections:n,onSectionClick:z,onAbilityClick:Y,onTargetClick:G,isInteractive:d==="allocateShields"||h,selectedCard:i,validCardTargets:s,reallocationPhase:h,gameEngine:N,turnPhase:d,isMyTurn:D,passInfo:L,getLocalPlayerId:j,localPlayerState:e,shipAbilityMode:g,hoveredTarget:y,setHoveredTarget:te,sectionRefs:T})]})})}const Rq="_footer_1srdi_15",Lq="_tabContainer_1srdi_21",$q="_contentContainer_1srdi_25",Bq="_contentOpen_1srdi_29",Uq="_contentClosed_1srdi_34",zq="_contentWrapper_1srdi_38",Gq="_tabButton_1srdi_44",Hq="_tabButtonActive_1srdi_48",Yq="_tabButtonInactive_1srdi_52",qq="_tabIcon_1srdi_56",Fq="_multiSelectOverlay_1srdi_62",Vq="_multiSelectText_1srdi_66",Kq="_handContainer_1srdi_72",Wq="_cardPile_1srdi_76",Xq="_deckCard_1srdi_80",Qq="_deckCardText_1srdi_88",Zq="_discardCard_1srdi_93",Jq="_discardCardText_1srdi_101",eF="_pileLabel_1srdi_106",tF="_handSection_1srdi_110",nF="_handCardsContainer_1srdi_134",rF="_handCardsWrapper_1srdi_139",aF="_handCardsWrapperGap_1srdi_143",iF="_cardWrapper_1srdi_148",sF="_droneContainer_1srdi_171",oF="_droneGrid_1srdi_175",lF="_logContainer_1srdi_202",cF="_logHeader_1srdi_206",uF="_logTitle_1srdi_210",dF="_downloadButton_1srdi_214",fF="_logTableWrapper_1srdi_219",pF="_logTable_1srdi_219",hF="_logTableHeader_1srdi_227",mF="_logTableHeaderCell_1srdi_231",gF="_logTableDebugHeader_1srdi_235",yF="_logTableRow_1srdi_239",vF="_logTableCell_1srdi_243",bF="_logTableCellBold_1srdi_247",xF="_logTableCellGray_1srdi_251",SF="_logTableCellCyan_1srdi_255",AF="_logTableCellYellow_1srdi_259",EF="_logTableCellGrayText_1srdi_263",CF="_logTableCellDebug_1srdi_267",TF="_logTableCellCenter_1srdi_271",PF="_aiDecisionButton_1srdi_275",wF="_buttonDanger_1srdi_286",OF="_buttonSuccess_1srdi_291",NF="_buttonDisabled_1srdi_296",Ce={footer:Rq,tabContainer:Lq,contentContainer:$q,contentOpen:Bq,contentClosed:Uq,contentWrapper:zq,tabButton:Gq,tabButtonActive:Hq,tabButtonInactive:Yq,tabIcon:qq,multiSelectOverlay:Fq,multiSelectText:Vq,handContainer:Kq,cardPile:Wq,deckCard:Xq,deckCardText:Qq,discardCard:Zq,discardCardText:Jq,pileLabel:eF,handSection:tF,handCardsContainer:nF,handCardsWrapper:rF,handCardsWrapperGap:aF,cardWrapper:iF,droneContainer:sF,droneGrid:oF,logContainer:lF,logHeader:cF,logTitle:uF,downloadButton:dF,logTableWrapper:fF,logTable:pF,logTableHeader:hF,logTableHeaderCell:mF,logTableDebugHeader:gF,logTableRow:yF,logTableCell:vF,logTableCellBold:bF,logTableCellGray:xF,logTableCellCyan:SF,logTableCellYellow:AF,logTableCellGrayText:EF,logTableCellDebug:CF,logTableCellCenter:TF,aiDecisionButton:PF,buttonDanger:wF,buttonSuccess:OF,buttonDisabled:NF};function _F({gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,selectedCard:r,turnPhase:i,mandatoryAction:s,handleCardClick:l,getLocalPlayerId:u,isMyTurn:p,hoveredCardId:d,setHoveredCardId:h,setIsViewDiscardModalOpen:g,setIsViewDeckModalOpen:y,optionalDiscardCount:b,handleRoundStartDraw:S,checkBothPlayersHandLimitComplete:E,handleConfirmMandatoryDiscard:C,handleRoundStartDiscard:T,setConfirmationModal:O,passInfo:N,validCardTargets:j,gameEngine:M,opponentPlayerState:D}){const k=u(),L=p(),G=N[`${k}Passed`];w("HAND_VIEW","HandView render:",{gameMode:e,localPlayerId:k,turnPhase:i,isMyTurn:L,playerPassed:G,handSize:t.hand.length,energy:t.energy,passInfo:N,mandatoryAction:s});const K=225,z=12,Y=6,ie=t.hand.length>Y,Z=Y*K+(Y-1)*z,te=t.hand.length;let U=0;return te>1&&ie&&(U=(Z-K)/(te-1)-K),m.jsxs("div",{className:Ce.handContainer,children:[m.jsxs("div",{className:Ce.cardPile,children:[m.jsx("div",{onClick:()=>g(!0),className:Ce.discardCard,children:m.jsx("p",{className:Ce.discardCardText,children:t.discardPile.length})}),m.jsx("p",{className:Ce.pileLabel,children:"Discard Pile"})]}),m.jsx("div",{className:Ce.handSection,children:m.jsx("div",{className:Ce.handCardsContainer,style:ie?{width:`${Z}px`}:{},children:m.jsx("div",{className:`${Ce.handCardsWrapper} ${ie?"":Ce.handCardsWrapperGap}`,children:t.hand.map((q,Q)=>{const Se=d?t.hand.findIndex(De=>De.instanceId===d):-1,I=t.energy>=q.cost,F=!q.targeting||M.getValidTargets(k,null,q,t,D).length>0,V=i==="action"&&L&&!G&&I&&F,se=i==="optionalDiscard"&&b<n.totals.discardLimit,ge=V||se;w("CARD_PLAY",`Card ${Q}: ${q.name}`,{instanceId:q.instanceId,hasInstanceId:q.instanceId!==void 0,instanceIdType:typeof q.instanceId,id:q.id,cost:q.cost,targeting:q.targeting,hasEnoughEnergy:I,hasValidTargets:F,isActionPhasePlayable:V,isOptionalDiscardPlayable:se,finalIsPlayable:ge,cardKeys:Object.keys(q),conditions:{turnPhase:i,isMyTurn:L,playerPassed:G,energy:t.energy,cardCost:q.cost}});let Ae="",ye={zIndex:Q};return ie&&Se!==-1&&(Q<Se?Ae="transform -translate-x-12":Q>Se?Ae="transform translate-x-12":(Ae="transform -translate-y-8 scale-105",ye.zIndex=50)),ie&&Q>0&&(ye.marginLeft=`${U}px`),m.jsx("div",{className:`${Ce.cardWrapper} ${Ae}`,style:ye,onMouseEnter:()=>h(q.instanceId),onMouseLeave:()=>h(null),children:m.jsx(vs,{card:q,isSelected:r?.instanceId===q.instanceId,isPlayable:ge,isMandatoryTarget:s?.type==="discard",onClick:s?.type==="discard"?De=>O({type:"discard",target:De,onConfirm:()=>C(De),onCancel:()=>O(null),text:`Are you sure you want to discard ${De.name}?`}):i==="optionalDiscard"?De=>O({type:"discard",target:De,onConfirm:()=>T(De),onCancel:()=>O(null),text:`Are you sure you want to discard ${De.name}?`}):l})},q.instanceId||`${q.id}-${Q}`)})})})}),m.jsxs("div",{className:Ce.cardPile,children:[m.jsx("div",{onClick:()=>y(!0),className:Ce.deckCard,children:m.jsx("p",{className:Ce.deckCardText,children:t.deck.length})}),m.jsx("p",{className:Ce.pileLabel,children:"Deck"})]})]})}function DF({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:p,isMyTurn:d,turn:h,passInfo:g,validCardTargets:y}){return m.jsx("div",{className:Ce.droneContainer,children:m.jsx("div",{className:Ce.droneGrid,children:t.map((b,S)=>{const C=(h===1?e.initialDeploymentBudget+e.energy:e.energy)>=b.class,T=n?.type==="Upgrade"&&y.some(O=>O.id===b.name);return m.jsx(ao,{drone:b,onClick:s,isSelected:l&&l.name===b.name,isSelectable:r==="deployment"&&d()&&!g[`${p()}Passed`]&&C&&!i||T,deployedCount:e.deployedDroneCounts[b.name]||0,appliedUpgrades:e.appliedUpgrades[b.name]||[],isUpgradeTarget:T,onViewUpgrades:(O,N)=>u({droneName:O.name,upgrades:N})},S)})})})}function kF({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return m.jsxs("div",{className:Ce.logContainer,children:[m.jsxs("div",{className:Ce.logHeader,children:[m.jsx("h3",{className:Ce.logTitle,children:"Game Log"}),m.jsx("button",{onClick:t,className:Ce.downloadButton,children:"Download CSV"})]}),m.jsx("div",{className:Ce.logTableWrapper,children:m.jsxs("table",{className:Ce.logTable,children:[m.jsx("thead",{className:Ce.logTableHeader,children:m.jsxs("tr",{children:[m.jsx("th",{className:Ce.logTableHeaderCell,children:"Rnd"}),m.jsx("th",{className:Ce.logTableHeaderCell,children:"Timestamp (UTC)"}),m.jsx("th",{className:Ce.logTableHeaderCell,children:"Player"}),m.jsx("th",{className:Ce.logTableHeaderCell,children:"Action"}),m.jsx("th",{className:Ce.logTableHeaderCell,children:"Source"}),m.jsx("th",{className:Ce.logTableHeaderCell,children:"Target"}),m.jsx("th",{className:Ce.logTableHeaderCell,children:"Outcome"}),m.jsx("th",{className:Ce.logTableDebugHeader,children:"Debug Source"}),m.jsx("th",{className:Ce.logTableHeaderCell})]})}),m.jsx("tbody",{children:e.map((r,i)=>m.jsxs("tr",{className:Ce.logTableRow,children:[m.jsx("td",{className:Ce.logTableCellBold,children:r.round}),m.jsx("td",{className:Ce.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),m.jsx("td",{className:Ce.logTableCellCyan,children:r.player}),m.jsx("td",{className:Ce.logTableCellYellow,children:r.actionType}),m.jsx("td",{className:Ce.logTableCell,children:r.source}),m.jsx("td",{className:Ce.logTableCell,children:r.target}),m.jsx("td",{className:Ce.logTableCellGrayText,children:r.outcome}),m.jsx("td",{className:Ce.logTableCellDebug,children:r.debugSource}),m.jsx("td",{className:Ce.logTableCellCenter,children:r.aiDecisionContext&&m.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:Ce.aiDecisionButton,title:"Show AI Decision Logic",children:"ℹ️"})})]},i)).reverse()})]})})]})}function MF({gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,sortedLocalActivePool:r,gameLog:i,footerView:s,isFooterOpen:l,multiSelectState:u,selectedCard:p,turnPhase:d,mandatoryAction:h,handleFooterButtonClick:g,handleCardClick:y,cancelCardSelection:b,downloadLogAsCSV:S,getLocalPlayerId:E,isMyTurn:C,hoveredCardId:T,setHoveredCardId:O,setIsViewDiscardModalOpen:N,setIsViewDeckModalOpen:j,optionalDiscardCount:M,handleRoundStartDraw:D,checkBothPlayersHandLimitComplete:k,handleToggleDroneSelection:L,selectedDrone:G,setViewUpgradesModal:K,handleConfirmMandatoryDiscard:z,handleRoundStartDiscard:Y,setConfirmationModal:ie,turn:Z,passInfo:te,validCardTargets:U,gameEngine:q,opponentPlayerState:Q,setAiDecisionLogToShow:Se}){return m.jsxs("footer",{className:Ce.footer,children:[m.jsxs("div",{className:Ce.tabContainer,children:[m.jsx("button",{onClick:()=>g("hand"),className:`${Ce.tabButton} ${l&&s==="hand"?Ce.tabButtonActive:Ce.tabButtonInactive}`,children:m.jsxs("span",{className:Ce.tabIcon,children:[l&&s==="hand"&&m.jsx(iu,{size:14}),"Hand (",t.hand.length,"/",n.totals.handLimit,")"]})}),m.jsx("button",{onClick:()=>g("drones"),className:`${Ce.tabButton} ${l&&s==="drones"?Ce.tabButtonActive:Ce.tabButtonInactive}`,children:m.jsxs("span",{className:Ce.tabIcon,children:[l&&s==="drones"&&m.jsx(iu,{size:14}),"Drones"]})}),m.jsx("button",{onClick:()=>g("log"),className:`${Ce.tabButton} ${l&&s==="log"?Ce.tabButtonActive:Ce.tabButtonInactive}`,children:m.jsxs("span",{className:Ce.tabIcon,children:[l&&s==="log"&&m.jsx(iu,{size:14}),"Log (",i.length,")"]})})]}),m.jsx("div",{className:`${Ce.contentContainer} ${l?Ce.contentOpen:Ce.contentClosed}`,children:m.jsxs("div",{className:Ce.contentWrapper,children:[u&&m.jsxs("div",{className:Ce.multiSelectOverlay,children:[m.jsxs("span",{className:Ce.multiSelectText,children:[u.phase==="select_source_lane"&&"Reposition: Select a source lane",u.phase==="select_drones"&&`Select Drones (${u.selectedDrones.length} / ${u.maxSelection})`,u.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),m.jsx("button",{onClick:I=>{I.stopPropagation(),b()},className:Ce.buttonDanger,children:"Cancel"}),u.phase==="select_drones"&&m.jsx("button",{onClick:I=>{I.stopPropagation(),u.selectedDrones.length>0&&w("HAND_VIEW","Confirm drones clicked")},disabled:u.selectedDrones.length===0,className:`${Ce.buttonSuccess} ${u.selectedDrones.length===0?Ce.buttonDisabled:""}`,children:"Confirm Drones"})]}),s==="hand"&&m.jsx("div",{className:Ce.viewContent,children:m.jsx(_F,{gameMode:e,localPlayerState:t,localPlayerEffectiveStats:n,selectedCard:p,turnPhase:d,mandatoryAction:h,handleCardClick:y,getLocalPlayerId:E,isMyTurn:C,hoveredCardId:T,setHoveredCardId:O,setIsViewDiscardModalOpen:N,setIsViewDeckModalOpen:j,optionalDiscardCount:M,handleRoundStartDraw:D,checkBothPlayersHandLimitComplete:k,handleConfirmMandatoryDiscard:z,handleRoundStartDiscard:Y,setConfirmationModal:ie,passInfo:te,validCardTargets:U,gameEngine:q,opponentPlayerState:Q})}),s==="drones"&&m.jsx("div",{className:Ce.viewContent,children:m.jsx(DF,{localPlayerState:t,sortedLocalActivePool:r,selectedCard:p,turnPhase:d,mandatoryAction:h,handleToggleDroneSelection:L,selectedDrone:G,setViewUpgradesModal:K,getLocalPlayerId:E,isMyTurn:C,turn:Z,passInfo:te,validCardTargets:U})}),s==="log"&&m.jsx("div",{className:Ce.viewContent,children:m.jsx(kF,{gameLog:i,downloadLogAsCSV:S,setAiDecisionLogToShow:Se})})]})})]})}const jF=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return m.jsxs(xo,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[m.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>m.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[m.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),m.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):m.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),m.jsx("div",{className:"flex justify-center mt-6",children:m.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},IF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=A.useState(null);return m.jsxs(xo,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[m.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(p=>{const d=s.appliedUpgrades[p.name]||[];return m.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[m.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",p.name]}),m.jsx("div",{className:"space-y-2",children:d.map(h=>m.jsx("div",{onClick:()=>u({droneName:p.name,instanceId:h.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===h.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:m.jsx("p",{className:"font-semibold text-white",children:h.name})},h.instanceId))})]},p.id)}):m.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),m.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),m.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"btn-confirm disabled:opacity-50 disabled:cursor-not-allowed",children:"Destroy Upgrade"})]})]})},RF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=A.useState(null);return m.jsxs(xo,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[m.jsx("div",{className:"flex justify-center my-4",children:m.jsx(vs,{card:r,isPlayable:!1})}),m.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>m.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[m.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),m.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),m.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),m.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"btn-confirm disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Upgrade"})]})]})},LF=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:p})=>m.jsxs(m.Fragment,{children:[e&&m.jsx(jF,{modalData:e,onClose:()=>t(null)}),n&&m.jsx(IF,{selectionData:n,onConfirm:async(d,h)=>{await l(d,h,u()),r(null)},onCancel:()=>{r(null),p()}}),i&&m.jsx(RF,{selectionData:i,onConfirm:async(d,h)=>{await l(d,h,u()),s(null)},onCancel:()=>{s(null),p()}})]}),$F=({visible:e,start:t,end:n,lineRef:r})=>e?m.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[m.jsx("defs",{children:m.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:m.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),m.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,BF=({top:e,left:t,size:n="large"})=>{const[r,i]=A.useState([]),s={small:{particleCount:8,radiusMin:30,radiusMax:50,particleSizeMin:4,particleSizeMax:8,duration:500},large:{particleCount:15,radiusMin:60,radiusMax:100,particleSizeMin:8,particleSizeMax:16,duration:800}},l=s[n]||s.large;return A.useEffect(()=>{const u=[];for(let p=0;p<l.particleCount;p++){const d=Math.PI*2*p/l.particleCount,h=l.radiusMin+Math.random()*(l.radiusMax-l.radiusMin),g=l.particleSizeMin+Math.random()*(l.particleSizeMax-l.particleSizeMin);u.push({id:p,x:Math.cos(d)*h,y:Math.sin(d)*h,size:g,opacity:1})}i(u)},[l.particleCount,l.radiusMin,l.radiusMax,l.particleSizeMin,l.particleSizeMax]),m.jsx("div",{style:{position:"fixed",top:`${e}px`,left:`${t}px`,pointerEvents:"none",zIndex:9999},children:r.map(u=>m.jsx("div",{style:{position:"absolute",width:`${u.size}px`,height:`${u.size}px`,borderRadius:"50%",backgroundColor:"#ff6b00",boxShadow:"0 0 10px #ff6b00","--tx":`${u.x}px`,"--ty":`${u.y}px`,animation:`explosionParticle ${l.duration}ms ease-out forwards`,animationDelay:"0ms"}},u.id))})},UF=()=>{const e=Math.random()>.5;return{width:`${180+Math.random()*40}%`,height:`${60+Math.random()*40}%`,gradientAngle:e?120+Math.random()*30:-60+Math.random()*30,colorIntensity:{r:4+Math.random()*10,g:8+Math.random()*16,b:24+Math.random()*20},opacity:.5+Math.random()*.4,scale:1+(Math.random()*.2-.1),position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},zF=()=>{const e=Math.random()>.5;return{position:e?{top:`${-30+Math.random()*20}%`,left:`${-60+Math.random()*20}%`}:{bottom:`${-35+Math.random()*20}%`,right:`${-60+Math.random()*20}%`},rotation:e?-20+Math.random()*15:8+Math.random()*15}},GF=({id:e,properties:t})=>{const n=`rgb(${t.colorIntensity.r} ${t.colorIntensity.g} ${t.colorIntensity.b})`,r=t.position.top!==void 0?{top:t.position.top,left:t.position.left}:{bottom:t.position.bottom,right:t.position.right};return m.jsx("div",{className:"absolute",style:{width:t.width,height:t.height,...r,transform:`rotate(${t.rotation}deg) scale(${t.scale})`,background:`linear-gradient(${t.gradientAngle}deg, ${n} 0%, transparent 100%)`,opacity:t.opacity,transition:"all 8s ease-in-out",willChange:"transform"}})},RD=()=>{const[e,t]=A.useState([]);return A.useEffect(()=>{const n=3+Math.floor(Math.random()*3),r=Array.from({length:n},(i,s)=>({id:s,properties:UF()}));t(r)},[]),A.useEffect(()=>{if(e.length===0)return;const n=setInterval(()=>{t(r=>{const i=Math.floor(Math.random()*r.length);return r.map((s,l)=>{if(l===i){const u=zF();return{...s,properties:{...s.properties,position:u.position,rotation:u.rotation}}}return s})})},1e4);return()=>clearInterval(n)},[e.length]),m.jsx("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:e.map(n=>m.jsx(GF,{id:n.id,properties:n.properties},n.id))})},HF=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const p=n!=="local";return m.jsxs("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:[m.jsx(RD,{}),m.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine relative z-10",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:p?"Opponent Thinking":"AI Thinking"})]})},GP=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:m.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[m.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:m.jsx(En,{size:24})}),m.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?m.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:m.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>m.jsx("div",{className:"flex justify-center",children:m.jsx(vs,{card:l,onClick:()=>{},isPlayable:!0,isSelected:!1,isMandatoryTarget:!1})},`${l.instanceId}-${u}`))})}):m.jsx("div",{className:"flex-grow flex items-center justify-center",children:m.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},YF=({card:e,isSelected:t,onClick:n})=>m.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:m.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[m.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[m.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),m.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:m.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),m.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),m.jsx("div",{className:"p-1",children:m.jsxs("div",{className:"relative h-24",children:[m.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),m.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&m.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:m.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:"✓"})})]})}),m.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:m.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:m.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),m.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),qF=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=A.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:p,filter:d}=r,h=S=>{s(E=>{const C=S.instanceId||`${S.id}-${S.name}`;return E.some(O=>(O.instanceId||`${O.id}-${O.name}`)===C)?E.filter(O=>(O.instanceId||`${O.id}-${O.name}`)!==C):E.length<u?[...E,S]:[...E.slice(0,-1),S]})},g=()=>{i.length===u&&(n(i),s([]))},y=()=>{s([]),t()},b=i.length===u;return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:y,children:m.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[m.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:m.jsx(En,{size:24})}),m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:p==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),m.jsx("p",{className:"text-gray-300 text-lg",children:d?`Select ${u} ${d.type} card${u>1?"s":""} from ${l.length} found ${d.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),m.jsx("div",{className:"mt-2",children:m.jsxs("span",{className:`text-lg font-bold ${b?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto",children:m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,E)=>m.jsx(YF,{card:S,isSelected:i.some(C=>{const T=S.instanceId||`${S.id}-${S.name}`;return(C.instanceId||`${C.id}-${C.name}`)===T}),onClick:h},S.instanceId||`${S.id}-${E}`))})}),m.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:y,className:"btn-cancel",children:"Cancel"}),m.jsx("button",{onClick:g,disabled:!b,className:"btn-confirm",children:"Confirm Selection"})]})]})})},FF=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return m.jsxs(xo,{title:"AI Action: Card Played",text:"",onClose:t,children:[m.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[m.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",m.jsx("strong",{className:"text-purple-400",children:n.name}),r&&m.jsxs(m.Fragment,{children:[" on ",m.jsx("strong",{className:"text-cyan-400",children:r}),i&&m.jsxs(m.Fragment,{children:[" in ",m.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),m.jsx("div",{className:"transform scale-75",children:m.jsx(vs,{card:n,isPlayable:!1})})]}),m.jsx("div",{className:"flex justify-center mt-6",children:m.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},VF=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[m.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:m.jsx(En,{size:24})}),m.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),m.jsx("div",{className:"flex justify-center",children:m.jsx(ao,{drone:t,isSelectable:!1,deployedCount:0,isViewOnly:!0})})]})}),KF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:s})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return m.jsx(xo,{title:"Deployment Complete",text:u,onClose:s,children:m.jsx("div",{className:"flex justify-center mt-6",children:m.jsx("button",{onClick:s,className:"btn-continue",children:"Continue to Action Phase"})})})},WF=({show:e,onContinue:t})=>e?m.jsx(xo,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:m.jsx("div",{className:"flex justify-center mt-6",children:m.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,XF=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=s=>{switch(s){case"determineFirstPlayer":return"Waiting for Opponent";case"mandatoryDiscard":return"Opponent Discarding";case"optionalDiscard":return"Opponent Discarding Cards";case"allocateShields":return"Opponent Allocating Shields";case"mandatoryDroneRemoval":return"Opponent Removing Drones";case"deploymentComplete":return"Waiting for Opponent";default:return"Waiting for Opponent"}};return m.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-auto",children:m.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:i(t)})})},QF=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&m.jsx("button",{onClick:e.onCancel,className:"modal-close",children:m.jsx(En,{size:24})}),m.jsx("h2",{className:"modal-title",children:n}),m.jsx("p",{className:"modal-text",children:e.text}),m.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:e.onCancel,className:"btn-cancel",children:"Cancel"}),m.jsx("button",{onClick:e.onConfirm,className:"btn-confirm",children:"Confirm"})]})]})})},ZF=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container modal-container-md",children:[r&&m.jsx("button",{onClick:r,className:"modal-close",children:m.jsx(En,{size:24})}),m.jsx("h2",{className:"modal-title",children:s}),m.jsx("p",{className:"modal-text",children:l})]})})},JF=({winner:e,localPlayerId:t,show:n,onClose:r})=>{const i=e===t;if(!n)return null;const s=()=>{r()},l=()=>{He.setState({appState:"menu"})};return m.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-sm flex items-center justify-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-12",children:[i?m.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"VICTORY"}):m.jsxs("div",{className:"relative w-full h-full flex items-center justify-center screen-flicker",children:[m.jsx("h1",{className:"text-8xl font-orbitron font-black uppercase tracking-widest text-center defeat-glow screen-distort z-10",style:{color:"#ff3232",textShadow:"0 0 30px rgba(255, 50, 50, 1), 0 0 60px rgba(255, 50, 50, 0.8), 0 0 90px rgba(255, 50, 50, 0.6)",filter:"drop-shadow(0 0 30px rgba(255, 50, 50, 0.6))"},children:"DEFEAT"}),m.jsx("div",{className:"absolute w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent scanline-shutdown",style:{boxShadow:"0 0 10px rgba(255, 50, 50, 0.8)"}}),m.jsx("div",{className:"absolute inset-0 bg-red-900/20 defeat-glow",style:{mixBlendMode:"multiply"}})]}),m.jsxs("div",{className:"flex gap-6 z-20",children:[m.jsx("button",{onClick:s,className:"btn-continue text-xl px-8 py-4",children:"View Board"}),m.jsx("button",{onClick:l,className:"btn-cancel text-xl px-8 py-4",children:"Exit to Menu"})]})]})})},eV=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,p=>p.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&m.jsx("button",{onClick:n,className:"modal-close",children:m.jsx(En,{size:24})}),m.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),m.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),m.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:m.jsxs("table",{className:"w-full text-left text-sm",children:[m.jsx("thead",{className:"sticky top-0 bg-slate-800",children:m.jsxs("tr",{children:[m.jsx("th",{className:"p-2",children:"Type"}),m.jsx("th",{className:"p-2",children:"Instigator"}),m.jsx("th",{className:"p-2",children:"Target"}),m.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),m.jsx("th",{className:"p-2",children:"Score"}),m.jsx("th",{className:"p-2",children:"Chosen"})]})}),m.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>m.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[m.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),m.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),m.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),m.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),m.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),m.jsx("td",{className:"p-2 text-center",children:s.isChosen&&m.jsx("span",{className:"text-yellow-400",children:"✔"})})]},l))})]})}),m.jsx("div",{className:"flex justify-center mt-6",children:m.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},tV=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[m.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),m.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:m.jsx("div",{className:"bg-gray-900/95 p-8 text-center",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:m.jsxs("div",{className:"space-y-8",children:[m.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Deploy Drone?"}),m.jsxs("div",{className:"flex items-center justify-center gap-8",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-5xl font-bold text-cyan-400 mb-2",children:i}),m.jsx("div",{className:"text-cyan-300/50 uppercase text-xs tracking-widest",children:"Deployment"})]}),m.jsx("div",{className:"text-4xl text-cyan-500/30 font-light",children:"|"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-5xl font-bold text-blue-400 mb-2",children:s}),m.jsx("div",{className:"text-blue-300/50 uppercase text-xs tracking-widest",children:"Energy"})]})]}),m.jsxs("div",{className:"flex justify-center gap-6 pt-4",children:[m.jsx("button",{onClick:n,className:"w-32 py-3 border-2 border-gray-600 text-gray-400 hover:border-gray-400 hover:text-gray-200 rounded uppercase text-sm tracking-wider font-semibold transition-all",children:"Cancel"}),m.jsx("button",{onClick:r,className:"w-32 py-3 border-2 rounded uppercase text-sm tracking-wider font-semibold transition-all hover:scale-110 hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",style:{borderColor:"#00ff88",background:"linear-gradient(45deg, rgba(0, 255, 136, 0.2), rgba(0, 136, 255, 0.2))",color:"#00ff88",boxShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"Confirm"})]}),m.jsx("div",{className:"h-px w-80 mx-auto bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})})]})},nV=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container modal-container-md",children:[n&&m.jsx("button",{onClick:n,className:"modal-close",children:m.jsx(En,{size:24})}),m.jsx("h2",{className:"modal-title",children:"Confirm Move"}),m.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),m.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),m.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},rV=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:d,shipAbilityMode:h,droneRefs:g,mandatoryAction:y})=>{if(!t||!e)return null;const{attackDetails:b,interceptors:S}=e,{attacker:E,target:C,targetType:T,lane:O}=b;return m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-md"}),m.jsx("div",{className:"relative p-[2px] bg-gradient-to-br from-cyan-400 to-blue-500 max-w-4xl w-full",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:m.jsxs("div",{className:"bg-gray-900/95 p-8",style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 24px), calc(100% - 24px) 100%, 0 100%)"},children:[m.jsx("h1",{className:"text-4xl font-bold uppercase tracking-[0.3em] text-center mb-2",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(0, 255, 136, 0.5)"},children:"Interception!"}),m.jsxs("p",{className:"text-center text-cyan-300/60 uppercase text-sm tracking-widest mb-8",children:["Combat in ",O?.replace("lane","Lane ")||"Unknown Lane"]}),m.jsx("div",{className:"mb-6 py-8",children:m.jsxs("div",{className:"flex items-start justify-center gap-6",children:[m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"text-xs uppercase tracking-widest text-pink-400/60",children:"Attacker"}),m.jsx("div",{className:"transform scale-150 origin-top",children:m.jsx(Uf,{drone:E,isPlayer:!1,lane:O,droneRefs:g,mandatoryAction:y,localPlayerState:d})})]}),m.jsx("div",{className:"text-5xl font-light text-cyan-500/30 px-4 pt-16",children:"VS"}),m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsx("div",{className:"text-xs uppercase tracking-widest text-cyan-400/60",children:"Target"}),T==="drone"?m.jsx("div",{className:"transform scale-150 origin-top",children:m.jsx(Uf,{drone:C,isPlayer:!0,lane:O,droneRefs:g,mandatoryAction:y,localPlayerState:d})}):m.jsx("div",{className:"transform scale-[0.95] origin-top",style:{width:"400px"},children:m.jsx(uo,{section:C.name,stats:d.shipSections[C.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:p,localPlayerState:d,shipAbilityMode:h})})]})]})}),m.jsx("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent mb-4"}),m.jsx("h3",{className:"text-center text-2xl font-bold uppercase tracking-wider mb-1",style:{background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Choose Interceptor"}),m.jsx("p",{className:"text-center text-cyan-300/50 text-sm mb-4",children:"Select a drone to intercept the attack"}),m.jsx("div",{className:"flex flex-wrap justify-center gap-12 mb-6",children:S.map(N=>m.jsx("div",{className:"cursor-pointer transition-all hover:scale-110 hover:drop-shadow-[0_0_20px_rgba(0,255,136,0.4)]",children:m.jsx(Uf,{drone:N,isPlayer:!0,onClick:()=>n(N),lane:O,droneRefs:g,mandatoryAction:y,localPlayerState:d})},N.id))}),m.jsx("div",{className:"flex justify-center gap-6 pt-4",children:m.jsx("button",{onClick:r,className:"btn-cancel",children:"Decline"})}),m.jsx("div",{className:"h-px w-80 mx-auto mt-8 bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent"})]})})]})},aV=({interceptionModal:e,show:t,onClose:n})=>{if(!t||!e)return null;const{interceptor:r,originalTarget:i}=e;return m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container modal-container-md",children:[n&&m.jsx("button",{onClick:n,className:"modal-close",children:m.jsx(En,{size:24})}),m.jsx("h2",{className:"modal-title",children:"Attack Intercepted!"}),m.jsxs("p",{className:"modal-text",children:["Your opponent used their ",r.name," to protect ",i.name,"!"]}),m.jsx("div",{className:"flex justify-center mt-6",children:m.jsx("button",{onClick:n,className:"btn-continue",children:"Continue"})})]})})},iV=({show:e,opponentName:t="Opponent"})=>e?m.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center pointer-events-none",children:m.jsx("h1",{className:"text-6xl font-orbitron font-black uppercase tracking-widest text-center phase-announcement-shine",style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:"Opponent Deciding Interception"})}):null,sV=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container modal-container-md",children:[n&&m.jsx("button",{onClick:n,className:"modal-close",children:m.jsx(En,{size:24})}),m.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),m.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),m.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),m.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},oV=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container modal-container-md",children:[n&&m.jsx("button",{onClick:n,className:"modal-close",children:m.jsx(En,{size:24})}),m.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),m.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),m.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),m.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},lV=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase());let p="";return l&&(p=l.name),m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container modal-container-md",children:[n&&m.jsx("button",{onClick:n,className:"modal-close",children:m.jsx(En,{size:24})}),m.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),m.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${p}`:"","? This will cost ",i.cost.energy," energy."]}),m.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[m.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),m.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},cV=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&m.jsx("button",{onClick:r,className:"modal-close",children:m.jsx(En,{size:24})}),m.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),m.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),m.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>m.jsx(vs,{card:i,isPlayable:!1},i.instanceId)):m.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),m.jsx("div",{className:"flex justify-center mt-6",children:m.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),uV=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=A.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(y,b)=>{navigator.clipboard.writeText(JSON.stringify(y,null,2)).then(()=>w("STATE_SYNC",`${b} copied to clipboard`)).catch(S=>console.error("Failed to copy:",S))},p=y=>y===null?"null":y===void 0?"undefined":typeof y=="boolean"?y.toString():typeof y=="string"?`"${y}"`:typeof y=="number"?y.toString():Array.isArray(y)?y.length===0?"[]":`[${y.length} items]`:typeof y=="object"?Object.keys(y).length===0?"{}":`{${Object.keys(y).length} properties}`:String(y),d=(y,b,S="")=>m.jsxs("div",{className:`mb-6 ${S}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("h3",{className:"text-lg font-bold text-white",children:b}),m.jsxs("button",{onClick:()=>u(y,b),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[m.jsx(av,{size:12}),"Copy"]})]}),m.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:m.jsxs("table",{className:"w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-800",children:[m.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),m.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),m.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),m.jsx("tbody",{children:Object.entries(y).map(([E,C],T)=>m.jsxs("tr",{className:T%2===0?"bg-gray-900":"bg-gray-800",children:[m.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:E}),m.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:p(C)}),m.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof C=="object"&&C!==null?Array.isArray(C)?"array":"object":typeof C})]},E))})]})})]}),h=()=>{const y={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return m.jsxs("div",{className:"p-4 space-y-6",children:[d(y,"Core Game Info"),d(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),d(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),d({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),d({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&d(l.passInfo,"Pass Information")]})},g=()=>{if(!r)return m.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const y=r.getEffectiveShipStats(l.player1,l.placedSections),b=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},E={};["lane1","lane2","lane3"].forEach(T=>{S[T]=l.player1.dronesOnBoard[T].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,T)})),E[T]=l.player2.dronesOnBoard[T].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,T)}))});const C=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return m.jsxs("div",{className:"p-4 space-y-6",children:[d(y,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),d(b,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),d(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),d(E,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),d(C,"GameDataService Cache Statistics")]})}catch(y){return m.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",y.message]})}};return m.jsx("div",{className:"modal-overlay",children:m.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[m.jsx("button",{onClick:t,className:"modal-close",children:m.jsx(En,{size:24})}),m.jsx("h2",{className:"modal-title",children:"Game Debug View"}),m.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[m.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),m.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),m.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?h():g()}),m.jsx("div",{className:"flex justify-center mt-6",children:m.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},dV=({isOpen:e,onClose:t,drones:n=[]})=>{if(!e)return null;const r=[...n].sort((i,s)=>i.class-s.class);return m.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:t,children:m.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-pink-500 p-8 shadow-2xl shadow-pink-500/20 max-w-[1400px] max-h-[600px] w-[95vw] flex flex-col",onClick:i=>i.stopPropagation(),children:[m.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[m.jsx("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-pink-400",children:"Opponent's Selected Drones"}),m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:m.jsx(En,{size:32})})]}),m.jsx("div",{className:"overflow-y-auto flex-grow pr-4",children:m.jsxs("div",{className:"mb-6",children:[m.jsxs("h3",{className:"text-xl font-orbitron text-cyan-400 mb-3",children:["Drones (",r.length,")"]}),r.length>0?m.jsx("div",{className:"w-full mx-auto",children:m.jsx("div",{className:"flex flex-nowrap gap-[10px] justify-center",children:r.map((i,s)=>m.jsx("div",{children:m.jsx(ao,{drone:i,onClick:()=>{},isSelectable:!1,isSelected:!1,deployedCount:0,appliedUpgrades:[],isViewOnly:!0})},`${i.name}-${s}`))})}):m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx("p",{className:"text-gray-500 text-xl italic",children:"No drones selected yet"})})]})})]})})},fV=(e,t)=>{const[n,r]=A.useState([]),i=A.useCallback((s,l=null,u="large")=>{w("ANIMATIONS","🔥 [EXPLOSION] triggerExplosion called:",{targetId:s,capturedPosition:l,size:u});const p=Be.createExplosionEffect(s);let d=l;if(!d){const h=e.current[s];w("ANIMATIONS","🔥 [EXPLOSION] Looking for drone element:",{targetId:s,found:!!h}),d=d0(h,t.current)}if(w("ANIMATIONS","🔥 [EXPLOSION] Position calculated:",d),d){const h=`${p.timestamp}-${Math.random()}`;w("ANIMATIONS","🔥 [EXPLOSION] Adding explosion to state:",{explosionId:h,top:d.y,left:d.x,size:u}),r(g=>[...g,{id:h,top:d.y,left:d.x,size:u}]),setTimeout(()=>{r(g=>g.filter(y=>y.id!==h))},p.duration)}else console.warn("🔥 [EXPLOSION] No position found, explosion not triggered")},[e,t]);return{explosions:n,triggerExplosion:i}};class pV{constructor(t){this.gameStateManager=t,this.isBlocking=!1,this.visualHandlers=new Map,this.animations={DRONE_ATTACK_START:{duration:500,type:"DRONE_FLY",config:{trail:!0,easing:"easeInOut",isReturn:!1}},DRONE_RETURN:{duration:0,type:"DRONE_FLY",config:{trail:!1,easing:"easeOut",isReturn:!0}},CARD_REVEAL:{duration:1e3,type:"CARD_REVEAL_EFFECT",config:{}},SHIP_ABILITY_REVEAL:{duration:1e3,type:"SHIP_ABILITY_REVEAL_EFFECT",config:{}},CARD_VISUAL:{duration:5e3,type:"CARD_VISUAL_EFFECT",config:{}},PASS_NOTIFICATION:{duration:1e3,type:"PASS_NOTIFICATION_EFFECT",config:{}},PHASE_ANNOUNCEMENT:{duration:1500,type:"PHASE_ANNOUNCEMENT_EFFECT",config:{}},TELEPORT_IN:{duration:600,type:"TELEPORT_EFFECT",config:{revealAt:.7}},TELEPORT_OUT:{duration:600,type:"TELEPORT_EFFECT",config:{}},SHIELD_DAMAGE:{duration:2e3,type:"FLASH_EFFECT",config:{color:"#00bcd4",intensity:.6}},HULL_DAMAGE:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"small"}},DRONE_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DAMAGED:{duration:2e3,type:"SHAKE_EFFECT",config:{intensity:10}}}}registerVisualHandler(t,n){this.visualHandlers.set(t,n)}async executeAnimations(t,n="unknown"){const r=this.gameStateManager?.getState()?.gameMode;if(w("ANIMATIONS","🎬 [EXECUTE] AnimationManager.executeAnimations() START:",{source:n,gameMode:r,effectCount:t?.length||0,effects:t?.map(i=>i.animationName)}),t.forEach((i,s)=>{w("ANIMATIONS",`  🎬 [EXECUTE] Animation ${s+1}/${t.length}: ${i.animationName}`,{type:this.animations[i.animationName]?.type,duration:this.animations[i.animationName]?.duration})}),!t||t.length===0){w("ANIMATIONS","⏭️ [EXECUTE] No effects to execute, returning early");return}w("ANIMATIONS",`🚨 [EXECUTE] PLAYING ${t.length} ANIMATION(S) - Source: ${n} - Mode: ${r}`),this.setBlocking(!0);try{const i=["SHIELD_DAMAGE","HULL_DAMAGE","DRONE_DESTROYED","SECTION_DESTROYED","SECTION_DAMAGED"];let s=0;for(;s<t.length;){const l=t[s];if(i.includes(l.animationName)){const u=[];for(;s<t.length&&i.includes(t[s].animationName);)u.push(t[s]),s++;w("ANIMATIONS","🎬 [ANIMATION DEBUG] Playing damage effects in parallel:",u.map(p=>p.animationName)),await Promise.all(u.map(async p=>{const d=this.animations[p.animationName];if(!d){console.warn(`❌ [ANIMATION DEBUG] Unknown animation: ${p.animationName}`);return}const h=this.visualHandlers.get(d.type);if(!h){console.warn(`❌ [ANIMATION DEBUG] No visual handler for: ${d.type}`);return}return new Promise(g=>{h({...p.payload,config:d.config,onComplete:g}),setTimeout(g,d.duration)})})),w("ANIMATIONS","🎬 [ANIMATION DEBUG] All damage effects completed")}else{w("ANIMATIONS","🎬 [ANIMATION DEBUG] Processing sequential effect:",l.animationName);const u=this.animations[l.animationName];if(!u){console.warn(`❌ [ANIMATION DEBUG] Unknown animation: ${l.animationName}`),s++;continue}const p=this.visualHandlers.get(u.type);if(!p){console.warn(`❌ [ANIMATION DEBUG] No visual handler for: ${u.type}`),s++;continue}await new Promise(d=>{p({...l.payload,config:u.config,onComplete:d}),setTimeout(d,u.duration)}),w("ANIMATIONS","🎬 [ANIMATION DEBUG] Animation completed:",l.animationName),s++}}}finally{await new Promise(i=>setTimeout(i,200)),this.setBlocking(!1),w("ANIMATIONS","🎬 [AI ANIMATION DEBUG] All animations completed, blocking released")}}setBlocking(t){w("ANIMATIONS",`🔒 [ANIMATION BLOCKING] Setting blocking to: ${t}`),this.isBlocking=t,this.gameStateManager.emit("animationStateChange",{blocking:t})}}const hV=({position:e,color:t="#00bcd4",intensity:n=.6,onComplete:r})=>{const[i,s]=A.useState(0);return A.useEffect(()=>{if(!e){r?.();return}const l=50,u=100,p=150;setTimeout(()=>s(n),10),setTimeout(()=>s(0),l+u),setTimeout(()=>{r?.()},l+u+p)},[n,r,e]),e?m.jsx("div",{style:{position:"fixed",left:e.left,top:e.top,width:e.width,height:e.height,backgroundColor:t,opacity:i,borderRadius:"8px",pointerEvents:"none",zIndex:9997,transition:`opacity ${i>0?"50ms":"150ms"} ease-${i>0?"in":"out"}`}}):null},mV=({visualType:e,startPos:t,endPos:n,duration:r=800,onComplete:i})=>{const[s,l]=A.useState(!1);if(A.useEffect(()=>{if(!t||!n){i?.();return}l(!0);const u=setTimeout(()=>{l(!1),i?.()},r);return()=>clearTimeout(u)},[e,t,n,r,i]),!s||!t||!n)return null;switch(e){case"LASER_BLAST":return m.jsx(gV,{startPos:t,endPos:n,duration:r});case"ENERGY_WAVE":return m.jsx(yV,{startPos:t,endPos:n,duration:r});case"NUKE_BLAST":return m.jsx(vV,{endPos:n,duration:r});default:return null}},gV=({startPos:e,endPos:t,duration:n})=>{const r=Math.atan2(t.y-e.y,t.x-e.x),i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return m.jsx("div",{style:{position:"fixed",left:e.x,top:e.y,width:i,height:"4px",backgroundColor:"#ff0000",boxShadow:"0 0 10px #ff0000, 0 0 20px #ff0000",transformOrigin:"0 50%",transform:`rotate(${r}rad)`,zIndex:9998,pointerEvents:"none",animation:`laserFade ${n}ms ease-out forwards`}})},yV=({startPos:e,duration:t})=>m.jsx("div",{style:{position:"fixed",left:e.x-20,top:e.y-20,width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#00ff00",opacity:.7,zIndex:9998,pointerEvents:"none",animation:`energyPulse ${t}ms ease-out forwards`}}),vV=({endPos:e,duration:t})=>m.jsxs(m.Fragment,{children:[m.jsx("div",{style:{position:"fixed",left:e.x-150,top:e.y-150,width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,100,0,0.9) 0%, rgba(255,50,0,0.6) 40%, rgba(255,200,0,0.3) 70%, transparent 100%)",zIndex:9998,pointerEvents:"none",animation:`nukeExpand ${t}ms ease-out forwards`}}),m.jsx("div",{style:{position:"fixed",left:e.x-200,top:e.y-200,width:"400px",height:"400px",borderRadius:"50%",backgroundColor:"#ffffff",opacity:.8,zIndex:9997,pointerEvents:"none",animation:`nukeFlash ${t}ms ease-out forwards`}})]});function bV(e,t,n,r,i,s,l,u,p,d,h,g,y,b,S,E,C,T){A.useEffect(()=>{r(),i();const O=new pV(e),N=(M,D,k,L)=>{if(L==="drone")return t.current[k]||null;if(L==="section"){const G=e.getLocalPlayerId(),K=M===G?"local":"opponent";return n.current[`${K}-${k}`]||null}return null};O.registerVisualHandler("DRONE_FLY",M=>{const{droneId:D,sourcePlayer:k,sourceLane:L,targetId:G,targetPlayer:K,targetLane:z,targetType:Y,config:ie,attackValue:Z,onComplete:te}=M;if(ie.isReturn){te?.();return}w("ANIMATIONS","🔫 [LASER DEBUG] DRONE_FLY handler called:",{droneId:D,sourcePlayer:k,sourceLane:L,targetId:G,targetPlayer:K,targetType:Y,attackValue:Z,config:ie});const U=N(k,L,D,"drone"),q=N(K,z,G,Y);if(!U||!q){console.warn("⚠️ [LASER DEBUG] Missing DOM elements, skipping laser",{hasDrone:!!U,hasTarget:!!q,sourcePlayer:k,sourceLane:L,targetPlayer:K,targetType:Y,targetId:G}),te?.();return}w("ANIMATIONS","✅ [LASER DEBUG] Creating laser effect with attack:",Z);const Q=l(U,u.current),Se=l(q,u.current),I=`laser-${D}-${Date.now()}`;E(F=>[...F,{id:I,startPos:Q,endPos:Se,attackValue:Z||1,duration:500,onComplete:()=>{E(V=>V.filter(se=>se.id!==I)),te?.()}}])}),O.registerVisualHandler("EXPLOSION_EFFECT",M=>{const{targetId:D,targetPlayer:k,targetLane:L,targetType:G,config:K,onComplete:z}=M,Y=N(k,L,D,G);if(Y){const ie=l(Y,u.current);s(D,ie,K?.size||"large")}else console.warn("⚠️ [EXPLOSION DEBUG] Target element not found:",{targetId:D,targetPlayer:k,targetLane:L,targetType:G});z?.()}),O.registerVisualHandler("FLASH_EFFECT",M=>{const{targetId:D,targetPlayer:k,targetLane:L,targetType:G,config:K,onComplete:z}=M,Y=N(k,L,D,G);if(!Y){console.warn("⚠️ [FLASH DEBUG] Target element not found:",{targetId:D,targetPlayer:k,targetLane:L,targetType:G}),z?.();return}const ie=Y.getBoundingClientRect(),Z=`flash-${D}-${Date.now()}`;h(te=>[...te,{id:Z,position:{left:ie.left,top:ie.top,width:ie.width,height:ie.height},color:K.color,intensity:K.intensity,onComplete:()=>{h(U=>U.filter(q=>q.id!==Z)),z?.()}}])}),O.registerVisualHandler("CARD_VISUAL_EFFECT",M=>{const{visualType:D,sourcePlayer:k,targetId:L,targetPlayer:G,targetLane:K,targetType:z,duration:Y,onComplete:ie}=M,Z=u.current?.getBoundingClientRect();if(!Z){ie?.();return}const te=e.getLocalPlayerId(),U=k===te?Z.bottom-100:Z.top+100,q=Z.left+Z.width/2;let Q;if(z==="lane")if(G==="center")Q={x:Z.left+Z.width/2,y:Z.top+Z.height/2};else{const I=k===te?G:G===te?te:G,ge=(e.getState()[I]?.dronesOnBoard||{})[K]||[];if(ge.length>0){const Ae=ge[0],ye=t.current[Ae.id];if(ye){const De=ye.getBoundingClientRect();Q={x:De.left+De.width/2,y:De.top+De.height/2}}else Q={x:Z.left+Z.width/2,y:Z.top+Z.height/2}}else{const Ae=K==="lane1"?0:K==="lane2"?1:2,ye=I===te?Z.bottom-200:Z.top+200;Q={x:Z.left+Z.width/4*(Ae+1),y:ye}}}else{const I=N(G,K,L,z);if(!I){console.warn("⚠️ [CARD VISUAL DEBUG] Target element not found:",{targetId:L,targetPlayer:G,targetLane:K,targetType:z}),ie?.();return}const F=I.getBoundingClientRect();Q={x:F.left+F.width/2,y:F.top+F.height/2}}const Se=`cardvisual-${Date.now()}`;g(I=>[...I,{id:Se,visualType:D||"LASER_BLAST",startPos:{x:q,y:U},endPos:Q,duration:Y||800,onComplete:()=>{g(F=>F.filter(V=>V.id!==Se)),ie?.()}}])}),O.registerVisualHandler("CARD_REVEAL_EFFECT",M=>{const{cardData:D,actingPlayerId:k,onComplete:L}=M;w("ANIMATIONS","🃏 [CARD REVEAL DEBUG] CARD_REVEAL_EFFECT handler called:",{cardName:D?.name,actingPlayerId:k});const G=e.getLocalPlayerId(),K=k===G,z=`cardreveal-${Date.now()}`;y(Y=>[...Y,{id:z,card:D,label:K?"You Played":"Opponent Played",onComplete:()=>{y(ie=>ie.filter(Z=>Z.id!==z)),L?.()}}])}),O.registerVisualHandler("SHIP_ABILITY_REVEAL_EFFECT",M=>{const{abilityName:D,actingPlayerId:k,onComplete:L}=M;w("ANIMATIONS","🚀 [SHIP ABILITY REVEAL DEBUG] SHIP_ABILITY_REVEAL_EFFECT handler called:",{abilityName:D,actingPlayerId:k});const G=e.getLocalPlayerId();if(k===G)L?.();else{const z=`shipability-${Date.now()}`;b(Y=>[...Y,{id:z,abilityName:D,label:"Opponent Used",onComplete:()=>{b(ie=>ie.filter(Z=>Z.id!==z)),L?.()}}])}}),O.registerVisualHandler("PHASE_ANNOUNCEMENT_EFFECT",async M=>{const{phaseText:D,phaseName:k,firstPlayerId:L,onComplete:G}=M;await new Promise(Y=>setTimeout(Y,300));let K=null;if(L){const Y=e.getLocalPlayerId();K=L===Y?"You Go First":"Opponent Goes First"}w("ANIMATIONS","📢 [PHASE ANNOUNCEMENT DEBUG] PHASE_ANNOUNCEMENT_EFFECT handler called:",{phaseName:k,phaseText:D,firstPlayerId:L,localPlayerId:e.getLocalPlayerId(),calculatedSubtitle:K});const z=`phaseannouncement-${Date.now()}`;S(Y=>[...Y,{id:z,phaseText:D,subtitle:K,onComplete:()=>{S(ie=>ie.filter(Z=>Z.id!==z)),G?.()}}])}),O.registerVisualHandler("PASS_NOTIFICATION_EFFECT",M=>{const{passingPlayerId:D,onComplete:k}=M;w("ANIMATIONS","⏸️ [PASS NOTIFICATION DEBUG] PASS_NOTIFICATION_EFFECT handler called:",{passingPlayerId:D});const L=e.getLocalPlayerId(),G=D===L,K=`passnotif-${Date.now()}`;T(z=>[...z,{id:K,label:G?"You Passed":"Opponent Passed",onComplete:()=>{T(Y=>Y.filter(ie=>ie.id!==K)),k?.()}}])}),O.registerVisualHandler("SHAKE_EFFECT",M=>{const{targetId:D,config:k,onComplete:L}=M,G=t.current[D];G?(G.classList.add("animate-shake-damage"),setTimeout(()=>{G.classList.remove("animate-shake-damage"),L?.()},k?.duration||500)):L?.()}),O.registerVisualHandler("TELEPORT_EFFECT",M=>{const{targetId:D,laneId:k,playerId:L,onComplete:G}=M;w("ANIMATIONS","✨ [TELEPORT DEBUG] TELEPORT_EFFECT handler called:",{targetId:D,laneId:k,playerId:L});const K=t.current[D];if(!K){console.warn("⚠️ [TELEPORT DEBUG] Drone element not found - placeholder may not have rendered yet:",D),G?.();return}const z=l(K,u.current);w("ANIMATIONS","✨ [TELEPORT DEBUG] Using exact drone placeholder position:",z);const Y=e.getLocalPlayerId(),Z=L===Y?"#00ffff":"#ec4899",te=`teleport-${D}-${Date.now()}`;C(U=>[...U,{id:te,top:z.y,left:z.x,color:Z,duration:600,onComplete:()=>{C(q=>q.filter(Q=>Q.id!==te)),G?.()}}])});const j=e.subscribe(M=>{M.type==="animationStateChange"&&d(M.payload.blocking)});return e.actionProcessor.setAnimationManager(O),j},[r,i,e,s,t,n,l,u,p,d,h,g,y,S,E,C,T])}const xV=({droneData:e,startPos:t,endPos:n,config:r,onComplete:i})=>{const[s,l]=A.useState(t),[u,p]=A.useState([]),d=A.useRef(),h=A.useRef(Date.now());return A.useEffect(()=>{const g=r.duration||800,y=()=>{const b=Date.now()-h.current,S=Math.min(b/g,1),E=S<.5?2*S*S:-1+(4-2*S)*S,C=t.x+(n.x-t.x)*E,T=t.y+(n.y-t.y)*E;l({x:C,y:T}),r.trail&&p(O=>[...O.slice(-8),{id:Date.now(),x:C,y:T}]),S<1?d.current=requestAnimationFrame(y):i?.()};return d.current=requestAnimationFrame(y),()=>{d.current&&cancelAnimationFrame(d.current)}},[t,n,r,i]),m.jsxs(m.Fragment,{children:[u.map((g,y)=>m.jsx("div",{style:{position:"fixed",left:g.x+35,top:g.y+60,width:"10px",height:"10px",borderRadius:"50%",background:e.owner==="player1"?"#00bcd4":"#e91e63",opacity:.3+y*.05,filter:"blur(2px)",pointerEvents:"none",zIndex:9998}},g.id)),m.jsx("div",{style:{position:"fixed",left:s.x,top:s.y,width:"90px",height:"135px",zIndex:9999,pointerEvents:"none",transform:`scale(${r.isReturn?1:1.1})`,transition:"transform 0.3s"},children:m.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"}})})]})},SV=({card:e,label:t,onComplete:n})=>{const[r,i]=A.useState(!1);return A.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),m.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[m.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),m.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[m.jsx("h2",{className:`
            text-4xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
            card-reveal-label
            ${r?"card-reveal-label-show":""}
          `,children:t}),m.jsx("div",{className:`
            transform scale-110 card-reveal-card
            ${r?"":"card-reveal-dissolve"}
          `,children:m.jsx(vs,{card:e,isPlayable:!1})}),m.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            card-reveal-scanline
            ${r?"card-reveal-scanline-active":""}
          `})]})]})},AV=({abilityName:e,label:t,onComplete:n})=>{const[r,i]=A.useState(!1);return A.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1e3);return()=>clearTimeout(s)},[n]),m.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[m.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),m.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[m.jsx("h2",{className:`
            text-5xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400
            animate-pulse
            drop-shadow-[0_0_20px_rgba(168,85,247,0.8)]
          `,children:t}),m.jsx("div",{className:`
            px-8 py-4 rounded-xl
            bg-gradient-to-r from-purple-900/80 via-pink-900/80 to-purple-900/80
            border-2 border-purple-400
            shadow-[0_0_30px_rgba(168,85,247,0.6)]
            transition-all duration-300
            ${r?"scale-100":"scale-90"}
          `,children:m.jsx("p",{className:"text-3xl font-bold text-white text-center",children:e})}),m.jsx("div",{className:`
            absolute inset-0 pointer-events-none
            bg-gradient-to-b from-transparent via-cyan-500/10 to-transparent
            transition-all duration-1000
            ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-full"}
          `})]})]})},EV=({label:e,onComplete:t})=>{const[n,r]=A.useState(!1);return A.useEffect(()=>{requestAnimationFrame(()=>{r(!0)});const i=setTimeout(()=>{r(!1);const s=setTimeout(()=>{t?.()},300);return()=>clearTimeout(s)},1e3);return()=>clearTimeout(i)},[t]),m.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${n?"opacity-100":"opacity-0"}
      `,children:[m.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),m.jsxs("div",{className:`
          relative flex flex-col items-center gap-6
          transition-all duration-300 transform
          ${n?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[m.jsx("h2",{className:`
            text-5xl font-orbitron font-bold uppercase tracking-wider
            text-transparent bg-clip-text bg-gradient-to-r from-red-300 via-red-400 to-red-300
            animate-pulse
            drop-shadow-[0_0_20px_rgba(239,68,68,0.8)]
          `,children:e}),m.jsx("div",{className:`
            absolute top-1/2 left-0 w-full h-1 pointer-events-none
            ${n?"animate-horizontalScan":""}
          `,style:{background:"linear-gradient(to right, rgba(239, 68, 68, 0) 0%, rgba(239, 68, 68, 0.8) 50%, rgba(239, 68, 68, 0) 100%)",boxShadow:"0 0 10px rgba(239, 68, 68, 0.8), 0 0 20px rgba(239, 68, 68, 0.4)",transform:"translateY(-50%)"}})]}),m.jsx("style",{children:`
        @keyframes horizontalScan {
          0% {
            transform: translateX(-100%) translateY(-50%);
            opacity: 0;
          }
          10% {
            opacity: 1;
          }
          90% {
            opacity: 1;
          }
          100% {
            transform: translateX(100%) translateY(-50%);
            opacity: 0;
          }
        }

        .animate-horizontalScan {
          animation: horizontalScan 800ms ease-in-out;
        }
      `})]})},CV=({phaseText:e,subtitle:t,onComplete:n})=>{const[r,i]=A.useState(!1);return A.useEffect(()=>{requestAnimationFrame(()=>{i(!0)});const s=setTimeout(()=>{i(!1);const l=setTimeout(()=>{n?.()},300);return()=>clearTimeout(l)},1500);return()=>clearTimeout(s)},[n]),m.jsxs("div",{className:`
        fixed inset-0 z-[10000] flex items-center justify-center
        transition-all duration-300 pointer-events-none
        ${r?"opacity-100":"opacity-0"}
      `,children:[m.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),m.jsxs("div",{className:`
          relative flex flex-col items-center
          transition-all duration-300 transform
          ${r?"scale-100 translate-y-0":"scale-90 translate-y-4"}
        `,children:[m.jsx("h1",{className:`
            text-6xl font-orbitron font-black uppercase tracking-widest text-center
            phase-announcement-text
            ${r?"phase-announcement-shine":""}
          `,style:{background:"linear-gradient(45deg, #00ff88, #0088ff, #00ff88)",backgroundSize:"200% auto",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 0 30px rgba(0, 255, 136, 0.5), 0 0 60px rgba(0, 136, 255, 0.3)",filter:"drop-shadow(0 0 20px rgba(0, 255, 136, 0.4))"},children:e}),t&&m.jsx("p",{className:`
              text-2xl font-orbitron font-medium uppercase tracking-wider text-center
              text-cyan-300/80 mt-4
              transition-all duration-300
              ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}
            `,children:t}),m.jsx("div",{className:`
            mt-8 h-1 bg-gradient-to-r from-transparent via-cyan-400 to-transparent
            transition-all duration-500
            ${r?"w-96 opacity-100":"w-0 opacity-0"}
          `}),m.jsx("div",{className:`
            absolute inset-0 pointer-events-none overflow-hidden
          `,children:m.jsx("div",{className:`
              absolute inset-x-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent
              phase-announcement-scanline
              ${r?"phase-announcement-scanline-active":""}
            `})})]})]})},TV=({startPos:e,endPos:t,attackValue:n=1,duration:r=500,onComplete:i})=>{const[s,l]=A.useState(0);A.useEffect(()=>{setTimeout(()=>l(1),50);const y=r*.7;setTimeout(()=>l(0),y);const b=setTimeout(()=>{i?.()},r);return()=>{clearTimeout(b)}},[r,i]);const u=t.x-e.x,p=t.y-e.y,d=Math.sqrt(u*u+p*p),h=Math.atan2(p,u)*(180/Math.PI),g=Math.max(3,2+n*1.5);return m.jsxs("div",{style:{position:"fixed",left:`${e.x}px`,top:`${e.y}px`,width:`${d}px`,height:`${g}px`,transformOrigin:"0 50%",transform:`rotate(${h}deg)`,pointerEvents:"none",zIndex:9998,opacity:s,transition:`opacity ${r*.15}ms ease-in-out`},children:[m.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1) 10%, rgba(255, 0, 0, 1) 90%, rgba(255, 0, 0, 0))",boxShadow:`0 0 ${g*2}px rgba(255, 0, 0, 0.8), 0 0 ${g*4}px rgba(255, 0, 0, 0.4)`,animation:`laserPulse ${r}ms ease-in-out`}}),m.jsx("div",{style:{position:"absolute",width:"100%",height:"40%",top:"30%",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 20%, rgba(255, 255, 255, 0.9) 80%, rgba(255, 255, 255, 0))",filter:"blur(1px)"}})]})},PV=({top:e,left:t,duration:n=800,color:r="#00ffff",onComplete:i})=>{const[s,l]=A.useState([]);return A.useEffect(()=>{const u=[];for(let h=0;h<16;h++){const g=Math.PI*2*h/16;u.push({id:h,angle:g,delay:h/16*200})}l(u);const d=setTimeout(()=>{i?.()},n);return()=>clearTimeout(d)},[n,i]),m.jsxs("div",{style:{position:"fixed",left:`${t}px`,top:`${e}px`,width:"120px",height:"180px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999},children:[m.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out forwards`},children:m.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out forwards`,boxShadow:`0 0 20px ${r}`}})}),m.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out ${n*.2}ms forwards`},children:m.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out ${n*.2}ms forwards`,boxShadow:`0 0 15px ${r}`}})}),s.map(u=>m.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"6px",height:"6px",backgroundColor:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`,"--angle":`${u.angle}rad`,animation:`teleportParticle ${n}ms ease-in ${u.delay}ms forwards`}},u.id)),m.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"40px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${r}cc 0%, ${r}00 70%)`,animation:`teleportGlow ${n}ms ease-in-out forwards`}})]})},HP=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:p,addLogEntry:d,resetGame:h,processAction:g,gameStateManager:y,p2pManager:b}=ds(),{getEffectiveStats:S,getEffectiveShipStats:E,gameDataService:C}=ch(),T=!0,[O,N]=A.useState(!1),[j,M]=A.useState(!1),[D,k]=A.useState([]),[L,G]=A.useState([]),[K,z]=A.useState([]),[Y,ie]=A.useState([]),[Z,te]=A.useState([]),[U,q]=A.useState([]),[Q,Se]=A.useState([]),[I,F]=A.useState([]),[V,se]=A.useState([]),[ge,Ae]=A.useState(!1),[ye,De]=A.useState(null),[Ke,xe]=A.useState(null),[Le,ze]=A.useState(null),[me,mt]=A.useState(null),[Je,It]=A.useState(!1),[Kt,Pt]=A.useState(!1),[Wt,zt]=A.useState(null),[Ra,fa]=A.useState(!1),[zl,pa]=A.useState(!1),[wr,La]=A.useState(!1),[$a,hn]=A.useState(!1),[Ye,nt]=A.useState(null),[Gl,So]=A.useState(null),[Ao,wi]=A.useState(null),[ha,ma]=A.useState(null),[R,oe]=A.useState(null),[fe,ce]=A.useState([]),[he,ve]=A.useState(!1),[Ie,kn]=A.useState(null),[st,Gt]=A.useState(null),[ot,ct]=A.useState(null),[Ht,Mn]=A.useState("drones"),[Fn,$t]=A.useState(!0),[jn,bs]=A.useState([]),[Ba,$u]=A.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[dx,uh]=A.useState({}),[At,Or]=A.useState(null),[Nr,ga]=A.useState([]),[In,Zn]=A.useState(null),[Ot,ya]=A.useState(null),[Rn,Ln]=A.useState(null),[Jn,Hl]=A.useState([]),[xs,_r]=A.useState(null),[Ss,Ua]=A.useState(null),[ut,an]=A.useState(null),[Yl,ql]=A.useState(null),[Oi,Eo]=A.useState(null),[Fl,Bu]=A.useState(null),[Dr,sn]=A.useState(null),[Uu,zu]=A.useState(!1),[As,va]=A.useState(null),[za,Co]=A.useState(null),[Xt,Es]=A.useState(null),[To,ba]=A.useState(0),[xa,Cs]=A.useState(0),[Vl,Ga]=A.useState(null),[dh,Kl]=A.useState(null),[fh,Gu]=A.useState(null),[Wl,Hu]=A.useState(null),[Xl,Yu]=A.useState(null),[Po,Ha]=A.useState(0),ea=A.useRef(null),Ni=A.useRef({}),wo=A.useRef({}),Sa=A.useRef(null),cr=A.useRef(!1),ur=A.useRef(null),{explosions:Ql,triggerExplosion:_i}=fV(Ni,Sa);bV(y,Ni,wo,s,l,_i,d0,Sa,k,Ae,G,z,ie,te,q,Se,F,se),A.useEffect(()=>{Yf.initialize(y,y.actionProcessor,()=>e.gameMode!=="local",oa),w("PHASE_TRANSITIONS","🔧 GameFlowManager initialized")},[]),A.useEffect(()=>{if(e.gameMode==="guest")return;const B=be=>{const{type:pe,phase:Ee,playerId:ke,data:Ue}=be;if(w("PHASE_TRANSITIONS",`🔔 App.jsx received PhaseManager event: ${pe}`,{phase:Ee,playerId:ke}),pe==="bothPlayersComplete"){const{phase:Ze}=be;w("PHASE_TRANSITIONS",`🎯 Both players completed phase: ${Ze}`),Wt===Ze&&(w("PHASE_TRANSITIONS",`✅ Clearing waiting overlay immediately for completed phase: ${Ze}`),zt(null))}if(pe==="phaseTransition"){const{newPhase:Ze,previousPhase:Qt,firstPlayerResult:Va}=be;w("PHASE_TRANSITIONS",`🔄 App.jsx handling phase transition: ${Qt} → ${Ze}`),w("PHASE_TRANSITIONS",`🔍 Waiting overlay check: waitingForPlayerPhase="${Wt}", previousPhase="${Qt}", match=${Wt===Qt}`),Wt===Qt?(w("PHASE_TRANSITIONS",`✅ Clearing waiting overlay for phase: ${Qt}`),zt(null)):Wt&&w("PHASE_TRANSITIONS",`⚠️ Waiting overlay NOT cleared: waiting for "${Wt}" but transition is from "${Qt}"`),Ze==="deploymentComplete"&&(w("PHASE_TRANSITIONS","🎯 Deployment complete phase started, showing modal"),It(!0))}},ne=Yf.subscribe(B);return()=>{ne()}},[i,n,De,Wt,e.gameMode]);const{turnPhase:qe,turn:Ya,currentPlayer:ta,firstPlayerOfRound:Zl,firstPasserOfPreviousRound:Jl,firstPlayerOverride:ec,passInfo:mn,winner:Et,unplacedSections:Di,shieldsToAllocate:Oo,opponentShieldsToAllocate:Ts,gameLog:tc,placedSections:qu}=e,[Fu,No]=A.useState(ta),_o=A.useRef(mn),Vu=A.useRef(qe),ph=A.useRef(Et);A.useEffect(()=>{_o.current=mn},[mn]),A.useEffect(()=>{Vu.current=qe},[qe]),A.useEffect(()=>{ph.current=Et},[Et]);const Me=s(),Qe=l(),qa=u(),Do=p();if(!Me||!Qe)return m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:m.jsx("div",{children:"Initializing game board..."})});A.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]);const Ku=A.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);A.useEffect(()=>{if(!i())return;const B=be=>{if(w("MULTIPLAYER","🔥 P2P Event received in App:",be),be.type==="PHASE_COMPLETED"){const{phase:pe}=be.data||be;w("MULTIPLAYER",`🔥 Opponent completed phase: ${pe}`)}};return b.subscribe(B)},[i,b]);const ko=Me?E(Me,qa):null,Wu=Qe?E(Qe,Do):null,Xu=A.useMemo(()=>Me?Object.values(Me.dronesOnBoard).flat().length:0,[Me?.dronesOnBoard]),nc=A.useMemo(()=>Qe?Object.values(Qe.dronesOnBoard).flat().length:0,[Qe?.dronesOnBoard]),hh=A.useMemo(()=>e.commitments?.droneSelection?.[r()]?.drones||[],[e.commitments?.droneSelection,r]),mh=A.useMemo(()=>[...Me.activeDronePool].sort((B,ne)=>B.class!==ne.class?B.class-ne.class:B.name.localeCompare(ne.name)),[Me.activeDronePool]);A.useMemo(()=>Me?Object.keys(Me.shipSections).some(B=>Me.shipSections[B].allocatedShields<C.getEffectiveSectionMaxShields(B,Me,qa)):!1,[Me.shipSections,qa,C]);const gh=["commitment","destroyDrone","addShield","resetShields"],tt=A.useCallback(async(B,ne)=>{if(e.gameMode==="guest"){if(gh.includes(B))return w("MULTIPLAYER","🔒 [GUEST HOST-ONLY] Sending action to host (no local processing):",B),b.sendActionToHost(B,ne),{success:!0,hostProcessing:!0};w("MULTIPLAYER","🔮 [GUEST OPTIMISTIC] Processing action locally and sending to host:",B),y.trackOptimisticAction(B,ne),w("ANIMATIONS","🔮 [GUEST OPTIMISTIC] Tracked action for deduplication:",{type:B,totalTracked:y.optimisticActions?.length||0}),w("ANIMATIONS","🎬 [GUEST OPTIMISTIC] About to process action locally (will generate animations)");const pe=await g(B,ne);return w("ANIMATIONS","✅ [GUEST OPTIMISTIC] Local processing complete (animations should have played)"),b.sendActionToHost(B,ne),pe}return await g(B,ne)},[e.gameMode,g,b,y]);A.useCallback(B=>{if(w("MULTIPLAYER",`🔥 sendPhaseCompletion called for phase: ${B}`),i()){const ne={type:"PHASE_COMPLETED",data:{phase:B}};w("MULTIPLAYER","🔥 Sending phase completion message:",ne),b.sendData(ne),w("MULTIPLAYER",`🔥 Sent phase completion: ${B}`)}else w("MULTIPLAYER","🔥 Not multiplayer, skipping network send")},[i,b]),A.useCallback(async()=>{st&&!st.card.effect.goAgain?await tt("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):st&&st.card.effect.goAgain&&!Et&&await tt("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),Gt(null)},[g,n,r,st,Et]);const rc=A.useCallback(async()=>{await tt("resetShields",{playerId:n()})},[tt,n]),yh=A.useCallback(()=>{hn(!0)},[]),vh=A.useCallback(async()=>{w("COMMITMENTS","🏁 handleConfirmShields called");const B=await tt("commitment",{playerId:n(),phase:"allocateShields",actionData:{committed:!0}});w("COMMITMENTS","🏁 Shield allocation commitment result:",{hasData:!!B.data,bothPlayersComplete:B.data?.bothPlayersComplete,fullResult:B}),((e.commitments||{}).allocateShields||{})[r()]?.completed?w("COMMITMENTS","✅ Both players complete, no waiting overlay"):(w("COMMITMENTS","✋ Opponent not committed yet, showing waiting overlay"),zt("allocateShields"))},[tt,n,e.commitments,r]);A.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:ne}=Be.calculateAllValidTargets(At,In,ut,Rn,Me,Qe);ga(B),Hl(ne),At&&(Ln(null),Zn(null))},[At,In,Rn,Me,Qe,ut]);const Fa=()=>{At&&(Or(null),nt(null))},gn=()=>{Ln(null),an(null)},Mo=A.useCallback(async B=>{if(cr.current){console.warn("Attack already in progress. Aborting duplicate call.");return}cr.current=!0;try{await new Promise(be=>setTimeout(be,250));const ne=await tt("attack",{attackDetails:B});if(ne?.needsInterceptionDecision){w("COMBAT","🛡️ [APP] Interception decision needed, showing modal..."),oe(ne.interceptionData),cr.current=!1;return}}catch(ne){console.error("Error in resolveAttack:",ne)}finally{cr.current=!1}},[_i,g,n,r]),Qu=A.useCallback(async(B,ne,be)=>{try{const pe=await tt("ability",{droneId:ne.id,abilityIndex:ne.abilities.findIndex(Ee=>Ee.name===B.name),targetId:be?.id||null});Fa()}catch(pe){console.error("Error in resolveAbility:",pe),Fa()}},[g,n]),bh=A.useCallback(async(B,ne,be)=>{const pe=await tt("shipAbility",{ability:B,sectionName:ne,targetId:be?.id||null,playerId:n()});if(pe.mandatoryAction){sn(pe.mandatoryAction),Mn("hand"),$t(!0),Zn(null),ya(null);return}if(pe.requiresShieldReallocation){Zn(null),ya(null);return}return Zn(null),ya(null),pe},[g,n]),ac=A.useCallback(async(B,ne,be,pe=null)=>{if(be===r()){let ke="",Ue="";if(ne)if(ne.name){if(ke=ne.name,ne.id&&ne.owner){const Ze=ne.owner===n()?Me:Qe;for(const[Qt,Va]of Object.entries(Ze.dronesOnBoard))if(Va.some(Ka=>Ka.id===ne.id)){Ue=Qt.replace("lane","Lane ");break}}}else ne.id.startsWith("lane")?(ke=`Lane ${ne.id.slice(-1)}`,Ue=`Lane ${ne.id.slice(-1)}`):ke=ne.id.replace(/([A-Z])/g," $1").replace(/^./,Ze=>Ze.toUpperCase());Gt({card:B,targetName:ke,targetLane:Ue})}const Ee=await tt("cardPlay",{card:B,targetId:ne?.id||null,playerId:be});if(Ee.needsCardSelection){if(Ee.needsCardSelection.type==="single_move"||Ee.needsCardSelection.type==="multi_move"){an({card:Ee.needsCardSelection.card,phase:Ee.needsCardSelection.phase,selectedDrones:[],sourceLane:null});return}Co({...Ee.needsCardSelection,onConfirm:ke=>{xh(ke,Ee.needsCardSelection,B,ne,be,pe,Ee.newPlayerStates),Co(null)},onCancel:()=>{Co(null),be===n()&&(gn(),_r(null))}});return}return be===n()&&(gn(),_r(null)),Ee},[g,n,Me,Qe]),xh=A.useCallback((B,ne,be,pe,Ee,ke,Ue=null)=>{const{searchedCards:Ze,remainingDeck:Qt,discardPile:Va,shuffleAfter:Ka}=ne,Ns=Ze.filter(Mr=>{const oc=Mr.instanceId||`${Mr.id}-${Mr.name}`;return!B.some(Ro=>(Ro.instanceId||`${Ro.id}-${Ro.name}`)===oc)}),kr=Ue||{player1:Me,player2:Qe},er=Ee===n()?kr[n()]:kr[r()],_s=[...er.hand,...B];let Wa=[...Qt,...Ns];Ka&&(Wa=Wa.sort(()=>.5-Math.random()));const Aa={...er,deck:Wa,hand:_s,discardPile:Va};d({player:er.name,actionType:"CARD_SELECTION",source:be.name,target:`Selected ${B.length} cards`,outcome:`Drew: ${B.map(Mr=>Mr.name).join(", ")}`},"handleCardSelection",Ee===r()?ke:null);const fd={[n()]:Ee===n()?{...er,deck:Aa.deck,hand:Aa.hand,discardPile:Aa.discardPile}:kr[n()],[r()]:Ee===r()?{...er,deck:Aa.deck,hand:Aa.hand,discardPile:Aa.discardPile}:kr[r()]},Ea=Be.finishCardPlay(be,Ee,fd);y.setPlayerStates(Ea.newPlayerStates.player1,Ea.newPlayerStates.player2),Ee===n()&&(gn(),_r(null))},[Me,Qe,d]),Sh=A.useCallback(async(B,ne,be,pe)=>{await tt("movementCompletion",{card:B,movementType:"multi_move",drones:ne,fromLane:be,toLane:pe,playerId:n()}),an(null),gn()},[g,n]),Ah=A.useCallback(async(B,ne,be,pe)=>{await tt("movementCompletion",{card:B,movementType:"single_move",drones:[ne],fromLane:be,toLane:pe,playerId:n()}),an(null),gn()},[g,n]),Eh=B=>{Fn?Ht===B?$t(!1):Mn(B):($t(!0),Mn(B))};A.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:ne}=Be.calculateAllValidTargets(At,In,ut,Rn,Me,Qe);ga(B),Hl(ne),At&&(Ln(null),Zn(null))},[At,In,Rn,Me,Qe,ut]),A.useEffect(()=>{Et&&!Ra&&fa(!0)},[Et,Ra]),A.useEffect(()=>{if(qe==="action"){const B=Be.calculatePotentialInterceptors(Ye,Me,Qe,Ku());ce(B)}else ce([])},[Ye,qe,Me,Qe,Be,qa,Do]),A.useEffect(()=>{const B=n();if(e.interceptionPending){const{attackingPlayerId:ne,defendingPlayerId:be,attackDetails:pe,interceptors:Ee}=e.interceptionPending;ne===B?ve(!0):be===B&&oe({attackDetails:pe,interceptors:Ee})}else ve(!1),oe(null)},[e.interceptionPending,n]),A.useEffect(()=>{if(e.lastInterception){const{interceptor:B,timestamp:ne}=e.lastInterception;kn({droneId:B.id,timestamp:ne})}},[e.lastInterception]),A.useEffect(()=>{So(null)},[Ye]),A.useEffect(()=>{if(Ye&&!At&&qe==="action"){const B=d0(Ni.current[Ye.id],Sa.current);B&&$u({visible:!0,start:B,end:{x:B.x,y:B.y}})}else $u(B=>({...B,visible:!1}))},[Ye,qe,At]),A.useEffect(()=>{const B=be=>{if(Ba.visible&&ea.current&&Sa.current){const pe=Sa.current.getBoundingClientRect(),Ee=be.clientX-pe.left,ke=be.clientY-pe.top;ea.current.setAttribute("x2",Ee),ea.current.setAttribute("y2",ke)}},ne=Sa.current;return ne?.addEventListener("mousemove",B),()=>{ne?.removeEventListener("mousemove",B)}},[Ba.visible]),A.useEffect(()=>{Et&&cr.current&&(w("COMBAT","[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),cr.current=!1)},[Et,qe,ta]),A.useEffect(()=>{e.gameMode==="guest"&&(w("STATE_SYNC","✅ [GUEST RENDER] Emitting render_complete event"),y.emit("render_complete"))},[e,y]),A.useEffect(()=>{if(e.gameMode!=="guest")return;const B=ur.current;if(B===null){ur.current=qe;return}if(B!==qe){w("PHASE_TRANSITIONS",`👁️ Guest detected phase change: ${B} → ${qe}`);const ne={newPhase:qe,previousPhase:B,gameStage:e.gameStage,roundNumber:e.roundNumber};(pe=>{{const{newPhase:Ee,previousPhase:ke}=pe;w("PHASE_TRANSITIONS",`🔄 Guest handling synthetic phase transition: ${ke} → ${Ee}`),Wt===ke&&zt(null),Ee==="deploymentComplete"&&(w("PHASE_TRANSITIONS","🎯 Deployment complete phase started, showing modal"),It(!0))}})(ne),ur.current=qe}},[qe,e.gameStage,e.roundNumber,e.gameMode,Wt]);const Ch=()=>{h(),cr.current=!1,nt(null),De(null),Or(null),ga([]),sn(null),zu(!1),va(null),Ln(null),Hl([]),_r(null),fa(!1)},ic=async B=>{const{turnPhase:ne}=e;ne==="allocateShields"?await tt("addShield",{sectionName:B,playerId:n()}):await tt("reallocateShields",{action:"add",sectionName:B,playerId:n()})},Ps=async B=>{if(xa<=0||Me.shipSections[B].allocatedShields<=0)return;(await tt("reallocateShields",{action:"remove",sectionName:B,playerId:n()})).success&&(Cs(pe=>pe-1),ba(pe=>pe+1))},Th=async B=>{if(To<=0)return;(await tt("reallocateShields",{action:"add",sectionName:B,playerId:n()})).success&&ba(be=>be-1)},Zu=()=>{Kl(JSON.parse(JSON.stringify(Me.shipSections))),Es("adding")},Ju=async()=>{Xt==="removing"?(await tt("reallocateShields",{action:"restore",originalShipSections:Vl,playerId:n()}),Cs(Wl.ability.effect.value.maxShields),ba(0)):Xt==="adding"&&(await tt("reallocateShields",{action:"restore",originalShipSections:dh,playerId:n()}),ba(xa+To))},ed=async()=>{await tt("reallocateShields",{action:"restore",originalShipSections:Vl,playerId:n()}),Es(null),Cs(0),ba(0),Ga(null),Kl(null),Hu(null)},td=()=>{ya({ability:Wl.ability,sectionName:Wl.sectionName,target:null})},nd=async()=>{w("PHASE_TRANSITIONS","🎯 App.jsx: Acknowledging deployment complete");const B=n(),ne=await tt("acknowledgeDeploymentComplete",{playerId:B});ne.success&&(It(!1),ne.data?.bothPlayersComplete||zt("deploymentComplete"))},ki=B=>{if(Xt){Xt==="removing"?Ps(B):Xt==="adding"&&Th(B);return}qe==="allocateShields"&&ic(B)},Ph=B=>{mn[n()+"Passed"]||(Ye&&Ye.name===B.name?nt(null):(nt(B),Or(null),gn()))},rd=async B=>{try{const ne=await tt("deployment",{droneData:Ye,laneId:B,playerId:n(),turn:Ya});ne.success?nt(null):De({title:ne.error,text:ne.message,isBlocking:!0})}catch(ne){console.error("Error executing deployment:",ne),De({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},wh=B=>{if(!(!Ye||ta!==n()||mn[n()+"Passed"])){if(Ya===1){const ne=Be.validateDeployment(Me,Ye,Ya,Xu,ko);if(!ne.isValid){De({title:ne.reason,text:ne.message,isBlocking:!0});return}const{budgetCost:be,energyCost:pe}=ne;if(pe>0){xe({lane:B,budgetCost:be,energyCost:pe});return}}rd(B)}},ad=async()=>{mn[`${n()}Passed`]||await tt("playerPass",{playerId:n(),playerName:Me.name,turnPhase:qe,passInfo:mn,opponentPlayerId:r()})},id=(B,ne,be)=>{if(B.stopPropagation(),qe!=="action"||ta!==n()||mn[n()+"Passed"])return;const pe=be.cost||{};if(ne.isExhausted&&pe.exhausts!==!1){De({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(pe.energy&&Me.energy<pe.energy){De({title:"Not Enough Energy",text:`This ability costs ${pe.energy} energy, but you only have ${Me.energy}.`,isBlocking:!0});return}if(be.targeting?.type==="LANE"&&be.targeting?.location==="SAME_LANE"){const Ee=Be.getLaneOfDrone(ne.id,Me);if(Ee){Ua({ability:be,drone:ne,target:{id:Ee,owner:n()}});return}}At&&At.drone.id===ne.id?Fa():(Or({drone:ne,ability:be}),nt(ne),gn())},ws=(B,ne,be)=>{if(B.stopPropagation(),!(qe!=="action"||!t()||mn[`${n()}Passed`])){if(Me.energy<be.cost.energy){De({title:"Not Enough Energy",text:`This ability costs ${be.cost.energy} energy, but you only have ${Me.energy}.`,isBlocking:!0});return}In?.ability.id===be.id?Zn(null):be.targeting?(Zn({sectionName:ne.name,ability:be}),nt(null),Fa(),gn()):be.effect.type==="REALLOCATE_SHIELDS"?(Es("removing"),Cs(be.effect.value.maxShields),ba(0),Ga(JSON.parse(JSON.stringify(Me.shipSections))),Hu({ability:be,sectionName:ne.name})):ya({ability:be,sectionName:ne.name,target:null})}},Os=(B,ne,be)=>{if(B.stopPropagation(),w("COMBAT",`--- handleTokenClick triggered for ${ne.name} (isPlayer: ${be}) ---`),ut&&ut.phase==="select_drones"&&be){w("COMBAT","Action: Multi-move drone selection.");const{selectedDrones:pe,maxSelection:Ee}=ut;pe.some(Ue=>Ue.id===ne.id)?an(Ue=>({...Ue,selectedDrones:Ue.selectedDrones.filter(Ze=>Ze.id!==ne.id)})):pe.length<Ee&&an(Ue=>({...Ue,selectedDrones:[...Ue.selectedDrones,ne]}));return}if(Nr.some(pe=>pe.id===ne.id)||Jn.some(pe=>pe.id===ne.id)){w("COMBAT","Action: Targeting for an active card/ability."),sd(ne,"drone",be);return}if(qe==="action"&&t()&&Ye&&!Ye.isExhausted&&!be){w("COMBAT","Action: Attempting a standard attack."),w("COMBAT","Attacker selected:",Ye.name,`(ID: ${Ye.id})`),w("COMBAT","Target clicked:",ne.name,`(ID: ${ne.id})`);const[pe]=Object.entries(Me.dronesOnBoard).find(([ke,Ue])=>Ue.some(Ze=>Ze.id===Ye.id))||[],[Ee]=Object.entries(Qe.dronesOnBoard).find(([ke,Ue])=>Ue.some(Ze=>Ze.id===ne.id))||[];if(w("COMBAT","Calculated Attacker Lane:",pe),w("COMBAT","Calculated Target Lane:",Ee),pe&&Ee&&pe===Ee)if(w("COMBAT","SUCCESS: Lanes match. Checking for Guardian..."),Qe.dronesOnBoard[Ee].some(Ze=>S(Ze,Ee).keywords.has("GUARDIAN")))w("COMBAT","FAILURE: Target is protected by a Guardian drone."),De({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{w("COMBAT","SUCCESS: No Guardian. Processing attack...");const Ze={attacker:Ye,target:ne,targetType:"drone",lane:pe,attackingPlayer:n()};Mo(Ze),nt(null)}else w("COMBAT","FAILURE: Lanes do not match or could not be found."),De({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(ut&&ut.phase==="select_drones"&&be){w("COMBAT","Action: Multi-move drone selection.");const{selectedDrones:pe,maxSelection:Ee}=ut;pe.some(Ue=>Ue.id===ne.id)?an(Ue=>({...Ue,selectedDrones:Ue.selectedDrones.filter(Ze=>Ze.id!==ne.id)})):pe.length<Ee&&an(Ue=>({...Ue,selectedDrones:[...Ue.selectedDrones,ne]}));return}if(Dr?.type==="destroy"&&be){w("COMBAT","Action: Mandatory destruction."),va({type:"destroy",target:ne,onConfirm:()=>ud(ne),onCancel:()=>va(null),text:`Are you sure you want to destroy your ${ne.name}?`});return}if(be&&qe==="action"&&t()&&!mn[`${n()}Passed`]){if(ne.isExhausted){w("COMBAT","Action prevented: Drone is exhausted.");return}Ye?.id===ne.id?(w("COMBAT","Action: Deselecting drone",ne.name),nt(null)):(w("COMBAT","Action: Selecting drone",ne.name),nt(ne),Fa(),gn());return}w("COMBAT","Action: Fallback - showing drone details."),mt(ne)},sd=(B,ne,be)=>{if(In&&Nr.some(pe=>pe.id===B.id)){ya({ability:In.ability,sectionName:In.sectionName,target:B});return}if(At&&Nr.some(pe=>pe.id===B.id)){Qu(At.ability,At.drone,B);return}if(Rn&&Jn.some(pe=>pe.id===B.id)){const pe=be?n():r();_r({card:Rn,target:{...B,owner:pe}});return}if(qe==="action"&&t()&&Ye&&!Ye.isExhausted&&!be&&ne==="section"){w("COMBAT","Action: Attempting ship section attack."),w("COMBAT","Attacker selected:",Ye.name,`(ID: ${Ye.id})`),w("COMBAT","Target clicked:",B.name);const[pe]=Object.entries(Me.dronesOnBoard).find(([Ee,ke])=>ke.some(Ue=>Ue.id===Ye.id))||[];if(w("COMBAT","Calculated Attacker Lane:",pe),pe){w("COMBAT","SUCCESS: Found attacker lane. Checking for Guardian...");const Ee=Qe.dronesOnBoard[pe];if(Ee&&Ee.some(Ue=>S(Ue,pe).keywords.has("GUARDIAN")))w("COMBAT","FAILURE: Ship section is protected by a Guardian drone."),De({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{w("COMBAT","SUCCESS: No Guardian. Processing attack...");const Ue={attacker:Ye,target:B,targetType:"section",lane:pe,attackingPlayer:n()};Mo(Ue),nt(null)}}else w("COMBAT","FAILURE: Could not determine attacker lane."),De({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}ne==="drone"&&mt(B)},jo=(B,ne,be)=>{if(B.stopPropagation(),At&&At.ability.targeting.type==="LANE"){const pe=be?n():r();if(Nr.some(Ee=>Ee.id===ne&&Ee.owner===pe)){Ua({ability:At.ability,drone:At.drone,target:{id:ne,owner:pe}});return}}if(ut&&be&&Jn.some(pe=>pe.id===ne)){const{phase:pe,sourceLane:Ee,selectedDrones:ke}=ut;if(pe==="select_source_lane"){an(Ue=>({...Ue,phase:"select_drones",sourceLane:ne}));return}if(pe==="select_destination_lane"){Sh(ut.card,ke,Ee,ne);return}}if(ut&&ut.card.effect.type==="SINGLE_MOVE"&&ut.phase==="select_destination"&&be){Jn.some(pe=>pe.id===ne)&&Ah(ut.card,ut.selectedDrone,ut.sourceLane,ne);return}if(Rn&&Rn.targeting.type==="LANE"){const pe=be?n():r();if(Jn.some(Ee=>Ee.id===ne&&Ee.owner===pe)){_r({card:Rn,target:{id:ne,owner:pe}});return}}if(Rn){gn();return}if(At){Fa();return}if(qe==="deployment"&&be)wh(ne);else if(qe==="action"&&be&&Ye){const[pe]=Object.entries(Me.dronesOnBoard).find(([Ue,Ze])=>Ze.some(Qt=>Qt.id===Ye.id))||[];if(!pe)return;const Ee=parseInt(pe.replace("lane",""),10),ke=parseInt(ne.replace("lane",""),10);Math.abs(Ee-ke)===1?ze({drone:Ye,from:pe,to:ne}):De({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},od=async B=>{const ne=n(),be=t(),pe=mn[`${ne}Passed`];if(w("CARD_PLAY",`🎯 handleCardClick called: ${B.name}`,{cardId:B.id,cardCost:B.cost,gameMode:e.gameMode,localPlayerId:ne,turnPhase:qe,isMyTurn:be,playerPassed:pe,playerEnergy:Me.energy,hasEnoughEnergy:Me.energy>=B.cost}),qe!=="action"){w("CARD_PLAY",`🚫 Card click rejected - wrong phase: ${qe}`,{card:B.name});return}if(!be){w("CARD_PLAY","🚫 Card click rejected - not player's turn",{card:B.name,localPlayerId:ne,currentPlayer:e.currentPlayer});return}if(pe){w("CARD_PLAY","🚫 Card click rejected - player has passed",{card:B.name});return}if(Me.energy<B.cost){w("CARD_PLAY","🚫 Card click rejected - not enough energy",{card:B.name,cardCost:B.cost,playerEnergy:Me.energy});return}if(B.effect.type==="MULTI_MOVE"||B.effect.type==="SINGLE_MOVE"){w("CARD_PLAY",`✅ Movement card - processing: ${B.name}`,{effectType:B.effect.type}),ut&&ut.card.instanceId===B.instanceId?gn():await ac(B,null,n());return}if(Rn?.instanceId===B.instanceId)w("CARD_PLAY",`✅ Card deselected: ${B.name}`),gn();else if(B.name==="System Sabotage"){w("CARD_PLAY","✅ System Sabotage card - getting targets",{card:B.name});const Ee=Be.getValidTargets(n(),null,B,Me,Qe);w("CARD_PLAY",`✅ System Sabotage targets found: ${Ee.length}`,{targets:Ee}),ql({card:B,targets:Ee,opponentState:Qe}),Ln(null),Or(null),nt(null)}else if(B.type==="Upgrade"){w("CARD_PLAY",`✅ Upgrade card - getting targets: ${B.name}`);const Ee=Be.getValidTargets(n(),null,B,Me,Qe);w("CARD_PLAY",`✅ Upgrade targets found: ${Ee.length}`,{targets:Ee}),Ee.length>0?(Eo({card:B,targets:Ee}),Ln(null),Or(null),nt(null)):De({title:"No Valid Targets",text:`There are no drone types that can accept the '${B.name}' upgrade right now.`,isBlocking:!0})}else B.targeting?(w("CARD_PLAY",`✅ Targeted card - waiting for target selection: ${B.name}`,{targeting:B.targeting}),Ln(B),nt(null),Or(null)):(w("CARD_PLAY",`✅ Non-targeted card - showing confirmation: ${B.name}`),_r({card:B,target:null}),Ln(null),Or(null),nt(null))},ld=async B=>{const ne=Dr;await tt("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!0}),va(null);const be=ne.count-1;if(be<=0)if(sn(null),ne.fromAbility){const pe=n();await tt("turnTransition",{newPlayer:pe==="player1"?"player2":"player1"})}else{const pe=await tt("commitment",{playerId:n(),phase:"mandatoryDiscard",actionData:{completed:!0}});pe.data&&!pe.data.bothPlayersComplete&&zt("mandatoryDiscard")}else sn(pe=>({...pe,count:be}))},sc=async B=>{await tt("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!1}),Ha(ne=>ne+1),va(null)},Io=async()=>{w("PHASE_TRANSITIONS","[OPTIONAL DISCARD] Player completing optional discard phase"),Ha(0),await tt("commitment",{playerId:n(),phase:"optionalDiscard",actionData:{completed:!0}}),((e.commitments||{}).optionalDiscard||{})[r()]?.completed?w("PHASE_TRANSITIONS","✅ Both players complete, no waiting overlay"):(w("PHASE_TRANSITIONS","✋ Opponent not committed yet, showing waiting overlay"),zt("optionalDiscard"))},cd=()=>{const B=y.actionProcessor?.getPhaseCommitmentStatus("optionalDiscard");return w("PHASE_TRANSITIONS","[OPTIONAL DISCARD] Commitment status:",B),B?.bothComplete||!1},ud=async B=>{const ne=Dr,be=await tt("destroyDrone",{droneId:B.id,playerId:n()});if(!be.success){console.error("Failed to destroy drone:",be.error);return}const pe=ne.count-1;if(pe<=0){if(nc>Wu.totals.cpuLimit&&e.gameMode==="local"){const Ue=Object.values(Qe.dronesOnBoard).flat().length-E(Qe,Do).totals.cpuLimit;for(let Ze=0;Ze<Ue;Ze++){const Qt=Object.entries(Qe.dronesOnBoard).flatMap(([kr,er])=>er.map(_s=>({..._s,lane:kr})));if(Qt.length===0)break;const Va=Math.min(...Qt.map(kr=>kr.class)),Ka=Qt.filter(kr=>kr.class===Va),Ns=Ka[Math.floor(Math.random()*Ka.length)];await tt("destroyDrone",{droneId:Ns.id,playerId:r()})}}sn(null);const ke=await tt("commitment",{playerId:n(),phase:"mandatoryDroneRemoval",actionData:{completed:!0}});ke.data&&!ke.data.bothPlayersComplete&&zt("mandatoryDroneRemoval")}else sn(Ee=>({...Ee,count:pe}));va(null)},dd=()=>{if(tc.length===0){alert("The game log is empty.");return}const B=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],ne=tc.map(ke=>[ke.round,ke.player,ke.actionType,ke.source,ke.target,ke.outcome,ke.debugSource||"N/A"].map(Ze=>`"${String(Ze).replace(/"/g,'""')}"`).join(",")),be=[B.join(","),...ne].join(`
`),pe=new Blob([be],{type:"text/csv;charset=utf-8;"}),Ee=document.createElement("a");if(Ee.download!==void 0){const ke=URL.createObjectURL(pe);Ee.setAttribute("href",ke),Ee.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),Ee.style.visibility="hidden",document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee)}};return m.jsxs("div",{className:"h-screen text-white font-sans overflow-hidden flex flex-col relative",ref:Sa,onClick:()=>{Fa(),gn()},children:[m.jsx(_q,{}),m.jsx($F,{visible:Ba.visible,start:Ba.start,end:Ba.end,lineRef:ea}),Ql.map(B=>m.jsx(BF,{top:B.top,left:B.left,size:B.size},B.id)),D.map(B=>m.jsx(xV,{droneData:B.droneData,startPos:B.startPos,endPos:B.endPos,config:B.config,onComplete:B.onComplete},B.id)),L.map(B=>m.jsx(hV,{position:B.position,color:B.color,intensity:B.intensity,onComplete:B.onComplete},B.id)),K.map(B=>m.jsx(mV,{visualType:B.visualType,startPos:B.startPos,endPos:B.endPos,duration:B.duration,onComplete:B.onComplete},B.id)),Y.map(B=>m.jsx(SV,{card:B.card,label:B.label,onComplete:B.onComplete},B.id)),Z.map(B=>m.jsx(AV,{abilityName:B.abilityName,label:B.label,onComplete:B.onComplete},B.id)),U.map(B=>m.jsx(CV,{phaseText:B.phaseText,subtitle:B.subtitle,onComplete:B.onComplete},B.id)),V.map(B=>m.jsx(EV,{label:B.label,onComplete:B.onComplete},B.id)),Q.map(B=>m.jsx(TV,{startPos:B.startPos,endPos:B.endPos,attackValue:B.attackValue,duration:B.duration,onComplete:B.onComplete},B.id)),I.map(B=>m.jsx(PV,{top:B.top,left:B.left,color:B.color,duration:B.duration,onComplete:B.onComplete},B.id)),ge&&m.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999,cursor:"not-allowed",pointerEvents:"all",backgroundColor:"transparent"}}),m.jsx(Dq,{localPlayerState:Me,opponentPlayerState:Qe,localPlayerEffectiveStats:ko,opponentPlayerEffectiveStats:Wu,turnPhase:qe,turn:Ya,passInfo:mn,firstPlayerOfRound:Zl,shieldsToAllocate:Oo,opponentShieldsToAllocate:Ts,shieldsToRemove:xa,shieldsToAdd:To,reallocationPhase:Xt,totalLocalPlayerDrones:Xu,totalOpponentPlayerDrones:nc,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,currentPlayer:ta,isMultiplayer:i,handlePlayerPass:ad,handleReset:Ch,handleResetShields:rc,handleConfirmShields:vh,handleCancelReallocation:ed,handleResetReallocation:Ju,handleContinueToAddPhase:Zu,handleConfirmReallocation:td,handleRoundStartDraw:Io,optionalDiscardCount:Po,mandatoryAction:Dr,multiSelectState:ut,AI_HAND_DEBUG_MODE:T,setShowAiHandModal:N,onShowDebugModal:()=>M(!0),onShowOpponentDrones:yh}),m.jsx(Iq,{localPlayerState:Me,opponentPlayerState:Qe,localPlacedSections:qa,opponentPlacedSections:Do,selectedCard:Rn,validCardTargets:Jn,abilityMode:At,validAbilityTargets:Nr,multiSelectState:ut,turnPhase:qe,reallocationPhase:Xt,shipAbilityMode:In,hoveredTarget:Gl,selectedDrone:Ye,recentlyHitDrones:jn,potentialInterceptors:fe,droneRefs:Ni,sectionRefs:wo,mandatoryAction:Dr,gameEngine:Be,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:Ku,passInfo:mn,handleTargetClick:sd,handleLaneClick:jo,handleShipSectionClick:ki,handleShipAbilityClick:ws,handleTokenClick:Os,handleAbilityIconClick:id,setHoveredTarget:So,interceptedBadge:Ie}),m.jsx(MF,{gameMode:e.gameMode,localPlayerState:Me,localPlayerEffectiveStats:ko,sortedLocalActivePool:mh,gameLog:tc,footerView:Ht,isFooterOpen:Fn,multiSelectState:ut,selectedCard:Rn,turnPhase:qe,mandatoryAction:Dr,handleFooterButtonClick:Eh,handleCardClick:od,cancelCardSelection:gn,downloadLogAsCSV:dd,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Ao,setHoveredCardId:wi,setIsViewDiscardModalOpen:La,setIsViewDeckModalOpen:pa,handleToggleDroneSelection:Ph,selectedDrone:Ye,setViewUpgradesModal:Bu,handleConfirmMandatoryDiscard:ld,setConfirmationModal:va,turn:Ya,passInfo:mn,validCardTargets:Jn,gameEngine:Be,opponentPlayerState:Qe,setAiDecisionLogToShow:ct,optionalDiscardCount:Po,handleRoundStartDraw:Io,handleRoundStartDiscard:sc,checkBothPlayersHandLimitComplete:cd}),ye&&m.jsx(xo,{title:ye.title,text:ye.text,onClose:ye.onClose===null?null:ye.onClose||(()=>De(null)),children:ye.children}),m.jsx(KF,{show:Je,firstPlayerOfRound:Zl,localPlayerId:n(),localPlayerName:Me.name,opponentPlayerName:Qe.name,onContinue:nd}),m.jsx(WF,{show:Kt,onContinue:()=>Pt(!1)}),m.jsx(XF,{show:!!Wt,phase:Wt,opponentName:Qe.name,roomCode:b.roomCode}),m.jsx(tV,{deploymentConfirmation:Ke,show:!!Ke,onCancel:()=>xe(null),onConfirm:async()=>{if(!Ke)return;const{lane:B}=Ke;xe(null),await rd(B)}}),m.jsx(nV,{moveConfirmation:Le,show:!!Le,onCancel:()=>ze(null),onConfirm:async()=>{if(!Le)return;const{drone:B,from:ne,to:be}=Le;await tt("move",{droneId:B.id,fromLane:ne,toLane:be,playerId:n()}),ze(null),nt(null)}}),m.jsx(aV,{interceptionModal:ha,show:!!ha,onClose:ha?.onClose}),m.jsx(rV,{choiceData:R,show:!!R,onIntercept:async B=>{const ne={...R.attackDetails,interceptor:B};oe(null),setTimeout(async()=>{await Mo(ne)},400)},onDecline:async()=>{const B={...R.attackDetails,interceptor:null};oe(null),setTimeout(async()=>{await Mo(B)},400)},gameEngine:Be,turnPhase:qe,isMyTurn:t,passInfo:mn,getLocalPlayerId:n,localPlayerState:Me,shipAbilityMode:In,droneRefs:Ni,mandatoryAction:Dr}),m.jsx(iV,{show:he,opponentName:Qe?.name||"Opponent"}),m.jsx(VF,{isOpen:!!me,drone:me,onClose:()=>mt(null)}),st&&m.jsx(FF,{report:st,onClose:()=>Gt(null)}),m.jsx(eV,{decisionLog:ot,show:!!ot,onClose:()=>ct(null),getLocalPlayerId:n}),m.jsx(JF,{winner:Et,localPlayerId:n(),show:Et&&Ra,onClose:()=>fa(!1)}),m.jsx(ZF,{mandatoryAction:Dr,effectiveStats:ko,show:Dr&&Uu,onClose:()=>zu(!1)}),m.jsx(QF,{confirmationModal:As,show:!!As}),m.jsx(LF,{viewUpgradesModal:Fl,setViewUpgradesModal:Bu,destroyUpgradeModal:Yl,setDestroyUpgradeModal:ql,upgradeSelectionModal:Oi,setUpgradeSelectionModal:Eo,resolveCardPlay:ac,getLocalPlayerId:n,cancelCardSelection:gn}),m.jsx(sV,{cardConfirmation:xs,show:!!xs,onCancel:()=>_r(null),onConfirm:async()=>{const B=xs.card,ne=xs.target;_r(null),setTimeout(async()=>{await ac(B,ne,n())},400)}}),m.jsx(oV,{abilityConfirmation:Ss,show:!!Ss,onCancel:()=>Ua(null),onConfirm:()=>{Qu(Ss.ability,Ss.drone,Ss.target),Ua(null)}}),m.jsx(cV,{opponentPlayerState:Qe,show:O,debugMode:T,onClose:()=>N(!1)}),m.jsx(dV,{isOpen:$a,onClose:()=>hn(!1),drones:hh}),m.jsx(uV,{show:j,onClose:()=>M(!1),gameStateManager:y,gameDataService:C}),m.jsx(GP,{isOpen:zl,onClose:()=>pa(!1),cards:Me.deck,title:"Remaining Cards in Deck",shouldSort:!0}),m.jsx(GP,{isOpen:wr,onClose:()=>La(!1),cards:Me.discardPile,title:"Discard Pile",shouldSort:!1}),m.jsx(qF,{isOpen:!!za,onClose:za?.onCancel||(()=>Co(null)),onConfirm:za?.onConfirm||(()=>{}),selectionData:za}),m.jsx(lV,{shipAbilityConfirmation:Ot,show:!!Ot,onCancel:()=>ya(null),onConfirm:async()=>await bh(Ot.ability,Ot.sectionName,Ot.target)}),m.jsx(HF,{isVisible:!1,currentPlayer:ta,gameMode:e.gameMode,roomCode:b.roomCode,lastAction:null,localPlayerState:Me,opponentPlayerState:Qe,getLocalPlayerId:n})]})};function wV(){const{gameState:e}=ds(),[t,n]=A.useState(!0),r=A.useRef(!1);if(A.useEffect(()=>{const l=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(l)},[]),A.useEffect(()=>{if(e.gameMode==="guest"){w("PHASE_TRANSITIONS","🔄 Guest mode detected - skipping manager initialization");return}r.current?w("PHASE_TRANSITIONS","🔄 GameFlowManager already initialized, skipping..."):(Yf.initialize(He,He.actionProcessor,()=>e.gameMode!=="local",oa),He.setGameFlowManager(Yf),r.current=!0,w("PHASE_TRANSITIONS","🔄 GameFlowManager initialized in AppRouter (host/local mode)"))},[e.gameMode]),t)return m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:m.jsx("div",{children:"Loading EREMOS..."})});const i=!(e.appState==="inGame"&&!["droneSelection","placement"].includes(e.turnPhase));let s;switch(e.appState){case"menu":s=m.jsx(UA,{});break;case"lobby":s=m.jsx(OI,{});break;case"inGame":switch(e.turnPhase){case"droneSelection":s=m.jsx(_I,{});break;case"deckSelection":s=m.jsx(Oq,{});break;case"placement":s=m.jsx(Nq,{});break;case"gameInitializing":s=m.jsx(HP,{});break;default:s=m.jsx(HP,{})}break;default:console.warn("Unknown app state:",e.appState,"defaulting to menu"),s=m.jsx(UA,{})}return m.jsxs("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(2, 6, 23, 1)",overflow:"auto"},children:[i&&m.jsx(RD,{}),s]})}JM.createRoot(document.getElementById("root")).render(m.jsx(qP.StrictMode,{children:m.jsx(wV,{})}));export{un as G,w as d,Yn as f};
