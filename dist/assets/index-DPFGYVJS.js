function Iw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function qr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vm={exports:{}},gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tA;function Wj(){if(tA)return gc;tA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var l=null;if(s!==void 0&&(l=""+s),i.key!==void 0&&(l=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:s}}return gc.Fragment=t,gc.jsx=n,gc.jsxs=n,gc}var nA;function Qj(){return nA||(nA=1,Vm.exports=Wj()),Vm.exports}var v=Qj(),Km={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function Zj(){if(rA)return Ie;rA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function g(k){return k===null||typeof k!="object"?null:(k=m&&k[m]||k["@@iterator"],typeof k=="function"?k:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function C(k,J,F){this.props=k,this.context=J,this.refs=A,this.updater=F||x}C.prototype.isReactComponent={},C.prototype.setState=function(k,J){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,J,"setState")},C.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function P(){}P.prototype=C.prototype;function O(k,J,F){this.props=k,this.context=J,this.refs=A,this.updater=F||x}var T=O.prototype=new P;T.constructor=O,S(T,C.prototype),T.isPureReactComponent=!0;var j=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function M(k,J,F,ne,me,z){return F=z.ref,{$$typeof:e,type:k,key:J,ref:F!==void 0?F:null,props:z}}function R(k,J){return M(k.type,J,void 0,void 0,void 0,k.props)}function U(k){return typeof k=="object"&&k!==null&&k.$$typeof===e}function K(k){var J={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(F){return J[F]})}var q=/\/+/g;function W(k,J){return typeof k=="object"&&k!==null&&k.key!=null?K(""+k.key):J.toString(36)}function le(){}function ie(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(le,le):(k.status="pending",k.then(function(J){k.status==="pending"&&(k.status="fulfilled",k.value=J)},function(J){k.status==="pending"&&(k.status="rejected",k.reason=J)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function te(k,J,F,ne,me){var z=typeof k;(z==="undefined"||z==="boolean")&&(k=null);var ae=!1;if(k===null)ae=!0;else switch(z){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(k.$$typeof){case e:case t:ae=!0;break;case p:return ae=k._init,te(ae(k._payload),J,F,ne,me)}}if(ae)return me=me(k),ae=ne===""?"."+W(k,0):ne,j(me)?(F="",ae!=null&&(F=ae.replace(q,"$&/")+"/"),te(me,J,F,"",function(oe){return oe})):me!=null&&(U(me)&&(me=R(me,F+(me.key==null||k&&k.key===me.key?"":(""+me.key).replace(q,"$&/")+"/")+ae)),J.push(me)),1;ae=0;var ve=ne===""?".":ne+":";if(j(k))for(var pe=0;pe<k.length;pe++)ne=k[pe],z=ve+W(ne,pe),ae+=te(ne,J,F,z,me);else if(pe=g(k),typeof pe=="function")for(k=pe.call(k),pe=0;!(ne=k.next()).done;)ne=ne.value,z=ve+W(ne,pe++),ae+=te(ne,J,F,z,me);else if(z==="object"){if(typeof k.then=="function")return te(ie(k),J,F,ne,me);throw J=String(k),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ae}function L(k,J,F){if(k==null)return k;var ne=[],me=0;return te(k,ne,"","",function(z){return J.call(F,z,me++)}),ne}function ee(k){if(k._status===-1){var J=k._result;J=J(),J.then(function(F){(k._status===0||k._status===-1)&&(k._status=1,k._result=F)},function(F){(k._status===0||k._status===-1)&&(k._status=2,k._result=F)}),k._status===-1&&(k._status=0,k._result=J)}if(k._status===1)return k._result.default;throw k._result}var he=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Se(){}return Ie.Children={map:L,forEach:function(k,J,F){L(k,function(){J.apply(this,arguments)},F)},count:function(k){var J=0;return L(k,function(){J++}),J},toArray:function(k){return L(k,function(J){return J})||[]},only:function(k){if(!U(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ie.Component=C,Ie.Fragment=n,Ie.Profiler=i,Ie.PureComponent=O,Ie.StrictMode=r,Ie.Suspense=f,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(k){return N.H.useMemoCache(k)}},Ie.cache=function(k){return function(){return k.apply(null,arguments)}},Ie.cloneElement=function(k,J,F){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ne=S({},k.props),me=k.key,z=void 0;if(J!=null)for(ae in J.ref!==void 0&&(z=void 0),J.key!==void 0&&(me=""+J.key),J)!D.call(J,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&J.ref===void 0||(ne[ae]=J[ae]);var ae=arguments.length-2;if(ae===1)ne.children=F;else if(1<ae){for(var ve=Array(ae),pe=0;pe<ae;pe++)ve[pe]=arguments[pe+2];ne.children=ve}return M(k.type,me,void 0,void 0,z,ne)},Ie.createContext=function(k){return k={$$typeof:l,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:s,_context:k},k},Ie.createElement=function(k,J,F){var ne,me={},z=null;if(J!=null)for(ne in J.key!==void 0&&(z=""+J.key),J)D.call(J,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(me[ne]=J[ne]);var ae=arguments.length-2;if(ae===1)me.children=F;else if(1<ae){for(var ve=Array(ae),pe=0;pe<ae;pe++)ve[pe]=arguments[pe+2];me.children=ve}if(k&&k.defaultProps)for(ne in ae=k.defaultProps,ae)me[ne]===void 0&&(me[ne]=ae[ne]);return M(k,z,void 0,void 0,null,me)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(k){return{$$typeof:u,render:k}},Ie.isValidElement=U,Ie.lazy=function(k){return{$$typeof:p,_payload:{_status:-1,_result:k},_init:ee}},Ie.memo=function(k,J){return{$$typeof:h,type:k,compare:J===void 0?null:J}},Ie.startTransition=function(k){var J=N.T,F={};N.T=F;try{var ne=k(),me=N.S;me!==null&&me(F,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(Se,he)}catch(z){he(z)}finally{N.T=J}},Ie.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ie.use=function(k){return N.H.use(k)},Ie.useActionState=function(k,J,F){return N.H.useActionState(k,J,F)},Ie.useCallback=function(k,J){return N.H.useCallback(k,J)},Ie.useContext=function(k){return N.H.useContext(k)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(k,J){return N.H.useDeferredValue(k,J)},Ie.useEffect=function(k,J,F){var ne=N.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(k,J)},Ie.useId=function(){return N.H.useId()},Ie.useImperativeHandle=function(k,J,F){return N.H.useImperativeHandle(k,J,F)},Ie.useInsertionEffect=function(k,J){return N.H.useInsertionEffect(k,J)},Ie.useLayoutEffect=function(k,J){return N.H.useLayoutEffect(k,J)},Ie.useMemo=function(k,J){return N.H.useMemo(k,J)},Ie.useOptimistic=function(k,J){return N.H.useOptimistic(k,J)},Ie.useReducer=function(k,J,F){return N.H.useReducer(k,J,F)},Ie.useRef=function(k){return N.H.useRef(k)},Ie.useState=function(k){return N.H.useState(k)},Ie.useSyncExternalStore=function(k,J,F){return N.H.useSyncExternalStore(k,J,F)},Ie.useTransition=function(){return N.H.useTransition()},Ie.version="19.1.1",Ie}var aA;function rl(){return aA||(aA=1,Km.exports=Zj()),Km.exports}var E=rl();const Lw=qr(E),Jj=Iw({__proto__:null,default:Lw},[E]);var Xm={exports:{}},yc={},Wm={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iA;function eM(){return iA||(iA=1,(function(e){function t(L,ee){var he=L.length;L.push(ee);e:for(;0<he;){var Se=he-1>>>1,k=L[Se];if(0<i(k,ee))L[Se]=ee,L[he]=k,he=Se;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var ee=L[0],he=L.pop();if(he!==ee){L[0]=he;e:for(var Se=0,k=L.length,J=k>>>1;Se<J;){var F=2*(Se+1)-1,ne=L[F],me=F+1,z=L[me];if(0>i(ne,he))me<k&&0>i(z,ne)?(L[Se]=z,L[me]=he,Se=me):(L[Se]=ne,L[F]=he,Se=F);else if(me<k&&0>i(z,he))L[Se]=z,L[me]=he,Se=me;else break e}}return ee}function i(L,ee){var he=L.sortIndex-ee.sortIndex;return he!==0?he:L.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var f=[],h=[],p=1,m=null,g=3,x=!1,S=!1,A=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function j(L){for(var ee=n(h);ee!==null;){if(ee.callback===null)r(h);else if(ee.startTime<=L)r(h),ee.sortIndex=ee.expirationTime,t(f,ee);else break;ee=n(h)}}function N(L){if(A=!1,j(L),!S)if(n(f)!==null)S=!0,D||(D=!0,W());else{var ee=n(h);ee!==null&&te(N,ee.startTime-L)}}var D=!1,M=-1,R=5,U=-1;function K(){return C?!0:!(e.unstable_now()-U<R)}function q(){if(C=!1,D){var L=e.unstable_now();U=L;var ee=!0;try{e:{S=!1,A&&(A=!1,O(M),M=-1),x=!0;var he=g;try{t:{for(j(L),m=n(f);m!==null&&!(m.expirationTime>L&&K());){var Se=m.callback;if(typeof Se=="function"){m.callback=null,g=m.priorityLevel;var k=Se(m.expirationTime<=L);if(L=e.unstable_now(),typeof k=="function"){m.callback=k,j(L),ee=!0;break t}m===n(f)&&r(f),j(L)}else r(f);m=n(f)}if(m!==null)ee=!0;else{var J=n(h);J!==null&&te(N,J.startTime-L),ee=!1}}break e}finally{m=null,g=he,x=!1}ee=void 0}}finally{ee?W():D=!1}}}var W;if(typeof T=="function")W=function(){T(q)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,ie=le.port2;le.port1.onmessage=q,W=function(){ie.postMessage(null)}}else W=function(){P(q,0)};function te(L,ee){M=P(function(){L(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(L){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var he=g;g=ee;try{return L()}finally{g=he}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(L,ee){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var he=g;g=L;try{return ee()}finally{g=he}},e.unstable_scheduleCallback=function(L,ee,he){var Se=e.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Se+he:Se):he=Se,L){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=he+k,L={id:p++,callback:ee,priorityLevel:L,startTime:he,expirationTime:k,sortIndex:-1},he>Se?(L.sortIndex=he,t(h,L),n(f)===null&&L===n(h)&&(A?(O(M),M=-1):A=!0,te(N,he-Se))):(L.sortIndex=k,t(f,L),S||x||(S=!0,D||(D=!0,W()))),L},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(L){var ee=g;return function(){var he=g;g=ee;try{return L.apply(this,arguments)}finally{g=he}}}})(Qm)),Qm}var oA;function tM(){return oA||(oA=1,Wm.exports=eM()),Wm.exports}var Zm={exports:{}},xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA;function nM(){if(sA)return xn;sA=1;var e=rl();function t(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(f,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:f,containerInfo:h,implementation:p}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xn.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return s(f,h,null,p)},xn.flushSync=function(f){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=p,r.d.f()}},xn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},xn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},xn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),g=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:x}):p==="script"&&r.d.X(f,{crossOrigin:m,integrity:g,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},xn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},xn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},xn.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},xn.requestFormReset=function(f){r.d.r(f)},xn.unstable_batchedUpdates=function(f,h){return f(h)},xn.useFormState=function(f,h,p){return l.H.useFormState(f,h,p)},xn.useFormStatus=function(){return l.H.useHostTransitionStatus()},xn.version="19.1.1",xn}var lA;function $w(){if(lA)return Zm.exports;lA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zm.exports=nM(),Zm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA;function rM(){if(cA)return yc;cA=1;var e=tM(),t=rl(),n=$w();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,c=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(c=o.return),a=o.return;while(a)}return o.tag===3?c:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(s(a)!==a)throw Error(r(188))}function f(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var c=a,d=o;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return u(y),a;if(b===d)return u(y),o;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=y,d=b;else{for(var w=!1,_=y.child;_;){if(_===c){w=!0,c=y,d=b;break}if(_===d){w=!0,d=y,c=b;break}_=_.sibling}if(!w){for(_=b.child;_;){if(_===c){w=!0,c=b,d=y;break}if(_===d){w=!0,d=b,c=y;break}_=_.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:o}function h(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=h(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),T=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function W(a){return a===null||typeof a!="object"?null:(a=q&&a[q]||a["@@iterator"],typeof a=="function"?a:null)}var le=Symbol.for("react.client.reference");function ie(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===le?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList";case U:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case T:return(a.displayName||"Context")+".Provider";case O:return(a._context.displayName||"Context")+".Consumer";case j:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case M:return o=a.displayName||null,o!==null?o:ie(a.type)||"Memo";case R:o=a._payload,a=a._init;try{return ie(a(o))}catch{}}return null}var te=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Se=[],k=-1;function J(a){return{current:a}}function F(a){0>k||(a.current=Se[k],Se[k]=null,k--)}function ne(a,o){k++,Se[k]=a.current,a.current=o}var me=J(null),z=J(null),ae=J(null),ve=J(null);function pe(a,o){switch(ne(ae,o),ne(z,a),ne(me,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?_1(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=_1(o),a=D1(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}F(me),ne(me,a)}function oe(){F(me),F(z),F(ae)}function ue(a){a.memoizedState!==null&&ne(ve,a);var o=me.current,c=D1(o,a.type);o!==c&&(ne(z,a),ne(me,c))}function be(a){z.current===a&&(F(me),F(z)),ve.current===a&&(F(ve),dc._currentValue=he)}var de=Object.prototype.hasOwnProperty,rt=e.unstable_scheduleCallback,Le=e.unstable_cancelCallback,Pt=e.unstable_shouldYield,kt=e.unstable_requestPaint,ft=e.unstable_now,Fr=e.unstable_getCurrentPriorityLevel,ha=e.unstable_ImmediatePriority,Xo=e.unstable_UserBlockingPriority,qi=e.unstable_NormalPriority,Fe=e.unstable_LowPriority,Tt=e.unstable_IdlePriority,Mh=e.log,hu=e.unstable_setDisableYieldValue,Yi=null,On=null;function Rn(a){if(typeof Mh=="function"&&hu(a),On&&typeof On.setStrictMode=="function")try{On.setStrictMode(Yi,a)}catch{}}var yn=Math.clz32?Math.clz32:Qo,ml=Math.log,Wo=Math.LN2;function Qo(a){return a>>>=0,a===0?32:31-(ml(a)/Wo|0)|0}var Qa=256,Zo=4194304;function Vr(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Fi(a,o,c){var d=a.pendingLanes;if(d===0)return 0;var y=0,b=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var _=d&134217727;return _!==0?(d=_&~b,d!==0?y=Vr(d):(w&=_,w!==0?y=Vr(w):c||(c=_&~a,c!==0&&(y=Vr(c))))):(_=d&~b,_!==0?y=Vr(_):w!==0?y=Vr(w):c||(c=d&~a,c!==0&&(y=Vr(c)))),y===0?0:o!==0&&o!==y&&(o&b)===0&&(b=y&-y,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:y}function kr(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function pa(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jo(){var a=Qa;return Qa<<=1,(Qa&4194048)===0&&(Qa=256),a}function gl(){var a=Zo;return Zo<<=1,(Zo&62914560)===0&&(Zo=4194304),a}function es(a){for(var o=[],c=0;31>c;c++)o.push(a);return o}function Za(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function yl(a,o,c,d,y,b){var w=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var _=a.entanglements,I=a.expirationTimes,Y=a.hiddenUpdates;for(c=w&~c;0<c;){var re=31-yn(c),ce=1<<re;_[re]=0,I[re]=-1;var V=Y[re];if(V!==null)for(Y[re]=null,re=0;re<V.length;re++){var X=V[re];X!==null&&(X.lane&=-536870913)}c&=~ce}d!==0&&vl(a,d,0),b!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=b&~(w&~o))}function vl(a,o,c){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-yn(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|c&4194090}function ts(a,o){var c=a.entangledLanes|=o;for(a=a.entanglements;c;){var d=31-yn(c),y=1<<d;y&o|a[d]&o&&(a[d]|=o),c&=~y}}function bl(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ja(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ei(){var a=ee.p;return a!==0?a:(a=window.event,a===void 0?32:X1(a.type))}function pu(a,o){var c=ee.p;try{return ee.p=a,o()}finally{ee.p=c}}var ma=Math.random().toString(36).slice(2),sn="__reactFiber$"+ma,He="__reactProps$"+ma,Tn="__reactContainer$"+ma,ga="__reactEvents$"+ma,xl="__reactListeners$"+ma,ur="__reactHandles$"+ma,Kr="__reactResources$"+ma,Rr="__reactMarker$"+ma;function Xr(a){delete a[sn],delete a[He],delete a[ga],delete a[xl],delete a[ur]}function Rt(a){var o=a[sn];if(o)return o;for(var c=a.parentNode;c;){if(o=c[Tn]||c[sn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(a=k1(a);a!==null;){if(c=a[sn])return c;a=k1(a)}return o}a=c,c=a.parentNode}return null}function _n(a){if(a=a[sn]||a[Tn]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function Yn(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function Wr(a){var o=a[Kr];return o||(o=a[Kr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function At(a){a[Rr]=!0}var Ir=new Set,ti={};function dr(a,o){We(a,o),We(a+"Capture",o)}function We(a,o){for(ti[a]=o,a=0;a<o.length;a++)Ir.add(o[a])}var Lr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mu={},Sl={};function kh(a){return de.call(Sl,a)?!0:de.call(mu,a)?!1:Lr.test(a)?Sl[a]=!0:(mu[a]=!0,!1)}function Vi(a,o,c){if(kh(o))if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+c)}}function ns(a,o,c){if(c===null)a.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+c)}}function fr(a,o,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(o,c,""+d)}}var hr,ni;function ri(a){if(hr===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);hr=o&&o[1]||"",ni=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hr+a+ni}var rs=!1;function as(a,o){if(!a||rs)return"";rs=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(X){var V=X}Reflect.construct(a,[],ce)}else{try{ce.call()}catch(X){V=X}a.call(ce.prototype)}}else{try{throw Error()}catch(X){V=X}(ce=a())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(X){if(X&&V&&typeof X.stack=="string")return[X.stack,V.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),w=b[0],_=b[1];if(w&&_){var I=w.split(`
`),Y=_.split(`
`);for(y=d=0;d<I.length&&!I[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(d===I.length||y===Y.length)for(d=I.length-1,y=Y.length-1;1<=d&&0<=y&&I[d]!==Y[y];)y--;for(;1<=d&&0<=y;d--,y--)if(I[d]!==Y[y]){if(d!==1||y!==1)do if(d--,y--,0>y||I[d]!==Y[y]){var re=`
`+I[d].replace(" at new "," at ");return a.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",a.displayName)),re}while(1<=d&&0<=y);break}}}finally{rs=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?ri(c):""}function ya(a){switch(a.tag){case 26:case 27:case 5:return ri(a.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 15:return as(a.type,!1);case 11:return as(a.type.render,!1);case 1:return as(a.type,!0);case 31:return ri("Activity");default:return""}}function Ki(a){try{var o="";do o+=ya(a),a=a.return;while(a);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ln(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ai(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Rh(a){var o=ai(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),d=""+a[o];if(!a.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,b=c.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return y.call(this)},set:function(w){d=""+w,b.call(this,w)}}),Object.defineProperty(a,o,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Xi(a){a._valueTracker||(a._valueTracker=Rh(a))}function is(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return a&&(d=ai(a)?a.checked?"true":"false":a.value),a=d,a!==c?(o.setValue(a),!0):!1}function Wi(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var gu=/[\n"\\]/g;function Fn(a){return a.replace(gu,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Al(a,o,c,d,y,b,w,_){a.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?a.type=w:a.removeAttribute("type"),o!=null?w==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+ln(o)):a.value!==""+ln(o)&&(a.value=""+ln(o)):w!=="submit"&&w!=="reset"||a.removeAttribute("value"),o!=null?yu(a,w,ln(o)):c!=null?yu(a,w,ln(c)):d!=null&&a.removeAttribute("value"),y==null&&b!=null&&(a.defaultChecked=!!b),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.name=""+ln(_):a.removeAttribute("name")}function Ih(a,o,c,d,y,b,w,_){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;c=c!=null?""+ln(c):"",o=o!=null?""+ln(o):c,_||o===a.value||(a.value=o),a.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=_?a.checked:!!d,a.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.name=w)}function yu(a,o,c){o==="number"&&Wi(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function Qi(a,o,c,d){if(a=a.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=o.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&d&&(a[c].defaultSelected=!0)}else{for(c=""+ln(c),o=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,d&&(a[y].defaultSelected=!0);return}o!==null||a[y].disabled||(o=a[y])}o!==null&&(o.selected=!0)}}function vu(a,o,c){if(o!=null&&(o=""+ln(o),o!==a.value&&(a.value=o),c==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=c!=null?""+ln(c):""}function Lh(a,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(r(92));if(te(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=ln(o),a.defaultValue=c,d=a.textContent,d===c&&d!==""&&d!==null&&(a.value=d)}function Zi(a,o){if(o){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=o;return}}a.textContent=o}var $h=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function El(a,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,c):typeof c!="number"||c===0||$h.has(o)?o==="float"?a.cssFloat=c:a[o]=(""+c).trim():a[o]=c+"px"}function Ji(a,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&c[y]!==d&&El(a,y,d)}else for(var b in o)o.hasOwnProperty(b)&&El(a,b,o[b])}function Qr(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $r(a){return Zr.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Cl=null;function eo(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Qe=null,Vn=null;function va(a){var o=_n(a);if(o&&(a=o.stateNode)){var c=a[He]||null;e:switch(a=o.stateNode,o.type){case"input":if(Al(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Fn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==a&&d.form===a.form){var y=d[He]||null;if(!y)throw Error(r(90));Al(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===a.form&&is(d)}break e;case"textarea":vu(a,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Qi(a,!!c.multiple,o,!1)}}}var to=!1;function xu(a,o,c){if(to)return a(o,c);to=!0;try{var d=a(o);return d}finally{if(to=!1,(Qe!==null||Vn!==null)&&(hd(),Qe&&(o=Qe,a=Vn,Vn=Qe=null,va(o),a)))for(o=0;o<a.length;o++)va(a[o])}}function os(a,o){var c=a.stateNode;if(c===null)return null;var d=c[He]||null;if(d===null)return null;c=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var ht=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dn=!1;if(ht)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){Dn=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{Dn=!1}var Jr=null,no=null,Pl=null;function Bh(){if(Pl)return Pl;var a,o=no,c=o.length,d,y="value"in Jr?Jr.value:Jr.textContent,b=y.length;for(a=0;a<c&&o[a]===y[a];a++);var w=c-a;for(d=1;d<=w&&o[c-d]===y[b-d];d++);return Pl=y.slice(a,1<d?1-d:void 0)}function wl(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function ls(){return!0}function Su(){return!1}function vn(a){function o(c,d,y,b,w){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=w,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(c=a[_],this[_]=c?c(b):b[_]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ls:Su,this.isPropagationStopped=Su,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),o}var Pe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Re=vn(Pe),pr=p({},Pe,{view:0,detail:0}),ro=vn(pr),cs,ba,ea,ao=p({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ea&&(ea&&a.type==="mousemove"?(cs=a.screenX-ea.screenX,ba=a.screenY-ea.screenY):ba=cs=0,ea=a),cs)},movementY:function(a){return"movementY"in a?a.movementY:ba}}),Ol=vn(ao),Au=p({},ao,{dataTransfer:0}),Uh=vn(Au),xa=p({},pr,{relatedTarget:0}),Ht=vn(xa),ta=p({},Pe,{animationName:0,elapsedTime:0,pseudoElement:0}),Eu=vn(ta),zh=p({},Pe,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Cu=vn(zh),Gh=p({},Pe,{data:0}),Pu=vn(Gh),Hh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fh(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=Yh[a])?!!o[a]:!1}function Tl(){return Fh}var Vh=p({},pr,{key:function(a){if(a.key){var o=Hh[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=wl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?qh[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(a){return a.type==="keypress"?wl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?wl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Kh=vn(Vh),Xh=p({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wu=vn(Xh),Wh=p({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),Ou=vn(Wh),Qh=p({},Pe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zh=vn(Qh),Jh=p({},ao,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ep=vn(Jh),tp=p({},Pe,{newState:0,oldState:0}),Tu=vn(tp),np=[9,13,27,32],_l=ht&&"CompositionEvent"in window,io=null;ht&&"documentMode"in document&&(io=document.documentMode);var rp=ht&&"TextEvent"in window&&!io,_u=ht&&(!_l||io&&8<io&&11>=io),Du=" ",Nu=!1;function ju(a,o){switch(a){case"keyup":return np.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Q=!1;function ge(a,o){switch(a){case"compositionend":return B(o);case"keypress":return o.which!==32?null:(Nu=!0,Du);case"textInput":return a=o.data,a===Du&&Nu?null:a;default:return null}}function fe(a,o){if(Q)return a==="compositionend"||!_l&&ju(a,o)?(a=Bh(),Pl=no=Jr=null,Q=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return _u&&o.locale!=="ko"?null:o.data;default:return null}}var ye={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Te(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!ye[a.type]:o==="textarea"}function Me(a,o,c,d){Qe?Vn?Vn.push(d):Vn=[d]:Qe=d,o=bd(o,"onChange"),0<o.length&&(c=new Re("onChange","change",null,c,d),a.push({event:c,listeners:o}))}var Be=null,mt=null;function cn(a){C1(a,0)}function _t(a){var o=Yn(a);if(is(o))return a}function It(a,o){if(a==="change")return o}var In=!1;if(ht){var un;if(ht){var oo="oninput"in document;if(!oo){var ii=document.createElement("div");ii.setAttribute("oninput","return;"),oo=typeof ii.oninput=="function"}un=oo}else un=!1;In=un&&(!document.documentMode||9<document.documentMode)}function Sa(){Be&&(Be.detachEvent("onpropertychange",Mu),mt=Be=null)}function Mu(a){if(a.propertyName==="value"&&_t(mt)){var o=[];Me(o,mt,a,eo(a)),xu(cn,o)}}function ku(a,o,c){a==="focusin"?(Sa(),Be=o,mt=c,Be.attachEvent("onpropertychange",Mu)):a==="focusout"&&Sa()}function so(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return _t(mt)}function ap(a,o){if(a==="click")return _t(o)}function Dl(a,o){if(a==="input"||a==="change")return _t(o)}function Xb(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Kn=typeof Object.is=="function"?Object.is:Xb;function Nl(a,o){if(Kn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var c=Object.keys(a),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!de.call(o,y)||!Kn(a[y],o[y]))return!1}return!0}function Wb(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Qb(a,o){var c=Wb(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=o&&d>=o)return{node:c,offset:o-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Wb(c)}}function Zb(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Zb(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Jb(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Wi(a.document);o instanceof a.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)a=o.contentWindow;else break;o=Wi(a.document)}return o}function ip(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var NN=ht&&"documentMode"in document&&11>=document.documentMode,us=null,op=null,jl=null,sp=!1;function ex(a,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;sp||us==null||us!==Wi(d)||(d=us,"selectionStart"in d&&ip(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),jl&&Nl(jl,d)||(jl=d,d=bd(op,"onSelect"),0<d.length&&(o=new Re("onSelect","select",null,o,c),a.push({event:o,listeners:d}),o.target=us)))}function lo(a,o){var c={};return c[a.toLowerCase()]=o.toLowerCase(),c["Webkit"+a]="webkit"+o,c["Moz"+a]="moz"+o,c}var ds={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionrun:lo("Transition","TransitionRun"),transitionstart:lo("Transition","TransitionStart"),transitioncancel:lo("Transition","TransitionCancel"),transitionend:lo("Transition","TransitionEnd")},lp={},tx={};ht&&(tx=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function co(a){if(lp[a])return lp[a];if(!ds[a])return a;var o=ds[a],c;for(c in o)if(o.hasOwnProperty(c)&&c in tx)return lp[a]=o[c];return a}var nx=co("animationend"),rx=co("animationiteration"),ax=co("animationstart"),jN=co("transitionrun"),MN=co("transitionstart"),kN=co("transitioncancel"),ix=co("transitionend"),ox=new Map,cp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cp.push("scrollEnd");function Br(a,o){ox.set(a,o),dr(o,[a])}var sx=new WeakMap;function mr(a,o){if(typeof a=="object"&&a!==null){var c=sx.get(a);return c!==void 0?c:(o={value:a,source:o,stack:Ki(o)},sx.set(a,o),o)}return{value:a,source:o,stack:Ki(o)}}var gr=[],fs=0,up=0;function Ru(){for(var a=fs,o=up=fs=0;o<a;){var c=gr[o];gr[o++]=null;var d=gr[o];gr[o++]=null;var y=gr[o];gr[o++]=null;var b=gr[o];if(gr[o++]=null,d!==null&&y!==null){var w=d.pending;w===null?y.next=y:(y.next=w.next,w.next=y),d.pending=y}b!==0&&lx(c,y,b)}}function Iu(a,o,c,d){gr[fs++]=a,gr[fs++]=o,gr[fs++]=c,gr[fs++]=d,up|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function dp(a,o,c,d){return Iu(a,o,c,d),Lu(a)}function hs(a,o){return Iu(a,null,null,o),Lu(a)}function lx(a,o,c){a.lanes|=c;var d=a.alternate;d!==null&&(d.lanes|=c);for(var y=!1,b=a.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(y=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,y&&o!==null&&(y=31-yn(c),a=b.hiddenUpdates,d=a[y],d===null?a[y]=[o]:d.push(o),o.lane=c|536870912),b):null}function Lu(a){if(50<rc)throw rc=0,ym=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var ps={};function RN(a,o,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(a,o,c,d){return new RN(a,o,c,d)}function fp(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Aa(a,o){var c=a.alternate;return c===null?(c=Xn(a.tag,o,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=o,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,o=a.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function cx(a,o){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,o=c.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function $u(a,o,c,d,y,b){var w=0;if(d=a,typeof a=="function")fp(a)&&(w=1);else if(typeof a=="string")w=Lj(a,c,me.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case U:return a=Xn(31,c,o,y),a.elementType=U,a.lanes=b,a;case S:return uo(c.children,y,b,o);case A:w=8,y|=24;break;case C:return a=Xn(12,c,o,y|2),a.elementType=C,a.lanes=b,a;case N:return a=Xn(13,c,o,y),a.elementType=N,a.lanes=b,a;case D:return a=Xn(19,c,o,y),a.elementType=D,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case P:case T:w=10;break e;case O:w=9;break e;case j:w=11;break e;case M:w=14;break e;case R:w=16,d=null;break e}w=29,c=Error(r(130,a===null?"null":typeof a,"")),d=null}return o=Xn(w,c,o,y),o.elementType=a,o.type=d,o.lanes=b,o}function uo(a,o,c,d){return a=Xn(7,a,d,o),a.lanes=c,a}function hp(a,o,c){return a=Xn(6,a,null,o),a.lanes=c,a}function pp(a,o,c){return o=Xn(4,a.children!==null?a.children:[],a.key,o),o.lanes=c,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var ms=[],gs=0,Bu=null,Uu=0,yr=[],vr=0,fo=null,Ea=1,Ca="";function ho(a,o){ms[gs++]=Uu,ms[gs++]=Bu,Bu=a,Uu=o}function ux(a,o,c){yr[vr++]=Ea,yr[vr++]=Ca,yr[vr++]=fo,fo=a;var d=Ea;a=Ca;var y=32-yn(d)-1;d&=~(1<<y),c+=1;var b=32-yn(o)+y;if(30<b){var w=y-y%5;b=(d&(1<<w)-1).toString(32),d>>=w,y-=w,Ea=1<<32-yn(o)+y|c<<y|d,Ca=b+a}else Ea=1<<b|c<<y|d,Ca=a}function mp(a){a.return!==null&&(ho(a,1),ux(a,1,0))}function gp(a){for(;a===Bu;)Bu=ms[--gs],ms[gs]=null,Uu=ms[--gs],ms[gs]=null;for(;a===fo;)fo=yr[--vr],yr[vr]=null,Ca=yr[--vr],yr[vr]=null,Ea=yr[--vr],yr[vr]=null}var Nn=null,wt=null,Ze=!1,po=null,na=!1,yp=Error(r(519));function mo(a){var o=Error(r(418,""));throw Rl(mr(o,a)),yp}function dx(a){var o=a.stateNode,c=a.type,d=a.memoizedProps;switch(o[sn]=a,o[He]=d,c){case"dialog":Ge("cancel",o),Ge("close",o);break;case"iframe":case"object":case"embed":Ge("load",o);break;case"video":case"audio":for(c=0;c<ic.length;c++)Ge(ic[c],o);break;case"source":Ge("error",o);break;case"img":case"image":case"link":Ge("error",o),Ge("load",o);break;case"details":Ge("toggle",o);break;case"input":Ge("invalid",o),Ih(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Xi(o);break;case"select":Ge("invalid",o);break;case"textarea":Ge("invalid",o),Lh(o,d.value,d.defaultValue,d.children),Xi(o)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||T1(o.textContent,c)?(d.popover!=null&&(Ge("beforetoggle",o),Ge("toggle",o)),d.onScroll!=null&&Ge("scroll",o),d.onScrollEnd!=null&&Ge("scrollend",o),d.onClick!=null&&(o.onclick=xd),o=!0):o=!1,o||mo(a)}function fx(a){for(Nn=a.return;Nn;)switch(Nn.tag){case 5:case 13:na=!1;return;case 27:case 3:na=!0;return;default:Nn=Nn.return}}function Ml(a){if(a!==Nn)return!1;if(!Ze)return fx(a),Ze=!0,!1;var o=a.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||Mm(a.type,a.memoizedProps)),c=!c),c&&wt&&mo(a),fx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(o===0){wt=zr(a.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;a=a.nextSibling}wt=null}}else o===27?(o=wt,Si(a.type)?(a=Lm,Lm=null,wt=a):wt=o):wt=Nn?zr(a.stateNode.nextSibling):null;return!0}function kl(){wt=Nn=null,Ze=!1}function hx(){var a=po;return a!==null&&(Bn===null?Bn=a:Bn.push.apply(Bn,a),po=null),a}function Rl(a){po===null?po=[a]:po.push(a)}var vp=J(null),go=null,Pa=null;function oi(a,o,c){ne(vp,o._currentValue),o._currentValue=c}function wa(a){a._currentValue=vp.current,F(vp)}function bp(a,o,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===c)break;a=a.return}}function xp(a,o,c,d){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var b=y.dependencies;if(b!==null){var w=y.child;b=b.firstContext;e:for(;b!==null;){var _=b;b=y;for(var I=0;I<o.length;I++)if(_.context===o[I]){b.lanes|=c,_=b.alternate,_!==null&&(_.lanes|=c),bp(b.return,c,a),d||(w=null);break e}b=_.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(r(341));w.lanes|=c,b=w.alternate,b!==null&&(b.lanes|=c),bp(w,c,a),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===a){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function Il(a,o,c,d){a=null;for(var y=o,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var _=y.type;Kn(y.pendingProps.value,w.value)||(a!==null?a.push(_):a=[_])}}else if(y===ve.current){if(w=y.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(dc):a=[dc])}y=y.return}a!==null&&xp(o,a,c,d),o.flags|=262144}function zu(a){for(a=a.firstContext;a!==null;){if(!Kn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function yo(a){go=a,Pa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function bn(a){return px(go,a)}function Gu(a,o){return go===null&&yo(a),px(a,o)}function px(a,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Pa===null){if(a===null)throw Error(r(308));Pa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Pa=Pa.next=o;return c}var IN=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(c,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(c){return c()})}},LN=e.unstable_scheduleCallback,$N=e.unstable_NormalPriority,qt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sp(){return{controller:new IN,data:new Map,refCount:0}}function Ll(a){a.refCount--,a.refCount===0&&LN($N,function(){a.controller.abort()})}var $l=null,Ap=0,ys=0,vs=null;function BN(a,o){if($l===null){var c=$l=[];Ap=0,ys=Cm(),vs={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Ap++,o.then(mx,mx),o}function mx(){if(--Ap===0&&$l!==null){vs!==null&&(vs.status="fulfilled");var a=$l;$l=null,ys=0,vs=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function UN(a,o){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var gx=L.S;L.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&BN(a,o),gx!==null&&gx(a,o)};var vo=J(null);function Ep(){var a=vo.current;return a!==null?a:ut.pooledCache}function Hu(a,o){o===null?ne(vo,vo.current):ne(vo,o.pool)}function yx(){var a=Ep();return a===null?null:{parent:qt._currentValue,pool:a}}var Bl=Error(r(460)),vx=Error(r(474)),qu=Error(r(542)),Cp={then:function(){}};function bx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Yu(){}function xx(a,o,c){switch(c=a[c],c===void 0?a.push(o):c!==o&&(o.then(Yu,Yu),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Ax(a),a;default:if(typeof o.status=="string")o.then(Yu,Yu);else{if(a=ut,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Ax(a),a}throw Ul=o,Bl}}var Ul=null;function Sx(){if(Ul===null)throw Error(r(459));var a=Ul;return Ul=null,a}function Ax(a){if(a===Bl||a===qu)throw Error(r(483))}var si=!1;function Pp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wp(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function li(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ci(a,o,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Je&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=Lu(a),lx(a,null,c),o}return Iu(a,d,o,c),Lu(a)}function zl(a,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,ts(a,c)}}function Op(a,o){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=w:b=b.next=w,c=c.next}while(c!==null);b===null?y=b=o:b=b.next=o}else y=b=o;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=o:a.next=o,c.lastBaseUpdate=o}var Tp=!1;function Gl(){if(Tp){var a=vs;if(a!==null)throw a}}function Hl(a,o,c,d){Tp=!1;var y=a.updateQueue;si=!1;var b=y.firstBaseUpdate,w=y.lastBaseUpdate,_=y.shared.pending;if(_!==null){y.shared.pending=null;var I=_,Y=I.next;I.next=null,w===null?b=Y:w.next=Y,w=I;var re=a.alternate;re!==null&&(re=re.updateQueue,_=re.lastBaseUpdate,_!==w&&(_===null?re.firstBaseUpdate=Y:_.next=Y,re.lastBaseUpdate=I))}if(b!==null){var ce=y.baseState;w=0,re=Y=I=null,_=b;do{var V=_.lane&-536870913,X=V!==_.lane;if(X?(qe&V)===V:(d&V)===V){V!==0&&V===ys&&(Tp=!0),re!==null&&(re=re.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var je=a,De=_;V=o;var ot=c;switch(De.tag){case 1:if(je=De.payload,typeof je=="function"){ce=je.call(ot,ce,V);break e}ce=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=De.payload,V=typeof je=="function"?je.call(ot,ce,V):je,V==null)break e;ce=p({},ce,V);break e;case 2:si=!0}}V=_.callback,V!==null&&(a.flags|=64,X&&(a.flags|=8192),X=y.callbacks,X===null?y.callbacks=[V]:X.push(V))}else X={lane:V,tag:_.tag,payload:_.payload,callback:_.callback,next:null},re===null?(Y=re=X,I=ce):re=re.next=X,w|=V;if(_=_.next,_===null){if(_=y.shared.pending,_===null)break;X=_,_=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);re===null&&(I=ce),y.baseState=I,y.firstBaseUpdate=Y,y.lastBaseUpdate=re,b===null&&(y.shared.lanes=0),yi|=w,a.lanes=w,a.memoizedState=ce}}function Ex(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function Cx(a,o){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Ex(c[a],o)}var bs=J(null),Fu=J(0);function Px(a,o){a=Ma,ne(Fu,a),ne(bs,o),Ma=a|o.baseLanes}function _p(){ne(Fu,Ma),ne(bs,bs.current)}function Dp(){Ma=Fu.current,F(bs),F(Fu)}var ui=0,$e=null,at=null,Lt=null,Vu=!1,xs=!1,bo=!1,Ku=0,ql=0,Ss=null,zN=0;function Dt(){throw Error(r(321))}function Np(a,o){if(o===null)return!1;for(var c=0;c<o.length&&c<a.length;c++)if(!Kn(a[c],o[c]))return!1;return!0}function jp(a,o,c,d,y,b){return ui=b,$e=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=a===null||a.memoizedState===null?lS:cS,bo=!1,b=c(d,y),bo=!1,xs&&(b=Ox(o,c,d,y)),wx(a),b}function wx(a){L.H=ed;var o=at!==null&&at.next!==null;if(ui=0,Lt=at=$e=null,Vu=!1,ql=0,Ss=null,o)throw Error(r(300));a===null||Zt||(a=a.dependencies,a!==null&&zu(a)&&(Zt=!0))}function Ox(a,o,c,d){$e=a;var y=0;do{if(xs&&(Ss=null),ql=0,xs=!1,25<=y)throw Error(r(301));if(y+=1,Lt=at=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}L.H=KN,b=o(c,d)}while(xs);return b}function GN(){var a=L.H,o=a.useState()[0];return o=typeof o.then=="function"?Yl(o):o,a=a.useState()[0],(at!==null?at.memoizedState:null)!==a&&($e.flags|=1024),o}function Mp(){var a=Ku!==0;return Ku=0,a}function kp(a,o,c){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~c}function Rp(a){if(Vu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Vu=!1}ui=0,Lt=at=$e=null,xs=!1,ql=Ku=0,Ss=null}function Ln(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?$e.memoizedState=Lt=a:Lt=Lt.next=a,Lt}function $t(){if(at===null){var a=$e.alternate;a=a!==null?a.memoizedState:null}else a=at.next;var o=Lt===null?$e.memoizedState:Lt.next;if(o!==null)Lt=o,at=a;else{if(a===null)throw $e.alternate===null?Error(r(467)):Error(r(310));at=a,a={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Lt===null?$e.memoizedState=Lt=a:Lt=Lt.next=a}return Lt}function Ip(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(a){var o=ql;return ql+=1,Ss===null&&(Ss=[]),a=xx(Ss,a,o),o=$e,(Lt===null?o.memoizedState:Lt.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?lS:cS),a}function Xu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Yl(a);if(a.$$typeof===T)return bn(a)}throw Error(r(438,String(a)))}function Lp(a){var o=null,c=$e.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=$e.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Ip(),$e.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(a),d=0;d<a;d++)c[d]=K;return o.index++,c}function Oa(a,o){return typeof o=="function"?o(a):o}function Wu(a){var o=$t();return $p(o,at,a)}function $p(a,o,c){var d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var y=a.baseQueue,b=d.pending;if(b!==null){if(y!==null){var w=y.next;y.next=b.next,b.next=w}o.baseQueue=y=b,d.pending=null}if(b=a.baseState,y===null)a.memoizedState=b;else{o=y.next;var _=w=null,I=null,Y=o,re=!1;do{var ce=Y.lane&-536870913;if(ce!==Y.lane?(qe&ce)===ce:(ui&ce)===ce){var V=Y.revertLane;if(V===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ce===ys&&(re=!0);else if((ui&V)===V){Y=Y.next,V===ys&&(re=!0);continue}else ce={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},I===null?(_=I=ce,w=b):I=I.next=ce,$e.lanes|=V,yi|=V;ce=Y.action,bo&&c(b,ce),b=Y.hasEagerState?Y.eagerState:c(b,ce)}else V={lane:ce,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},I===null?(_=I=V,w=b):I=I.next=V,$e.lanes|=ce,yi|=ce;Y=Y.next}while(Y!==null&&Y!==o);if(I===null?w=b:I.next=_,!Kn(b,a.memoizedState)&&(Zt=!0,re&&(c=vs,c!==null)))throw c;a.memoizedState=b,a.baseState=w,a.baseQueue=I,d.lastRenderedState=b}return y===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function Bp(a){var o=$t(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var d=c.dispatch,y=c.pending,b=o.memoizedState;if(y!==null){c.pending=null;var w=y=y.next;do b=a(b,w.action),w=w.next;while(w!==y);Kn(b,o.memoizedState)||(Zt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function Tx(a,o,c){var d=$e,y=$t(),b=Ze;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=o();var w=!Kn((at||y).memoizedState,c);w&&(y.memoizedState=c,Zt=!0),y=y.queue;var _=Nx.bind(null,d,y,a);if(Fl(2048,8,_,[a]),y.getSnapshot!==o||w||Lt!==null&&Lt.memoizedState.tag&1){if(d.flags|=2048,As(9,Qu(),Dx.bind(null,d,y,c,o),null),ut===null)throw Error(r(349));b||(ui&124)!==0||_x(d,o,c)}return c}function _x(a,o,c){a.flags|=16384,a={getSnapshot:o,value:c},o=$e.updateQueue,o===null?(o=Ip(),$e.updateQueue=o,o.stores=[a]):(c=o.stores,c===null?o.stores=[a]:c.push(a))}function Dx(a,o,c,d){o.value=c,o.getSnapshot=d,jx(o)&&Mx(a)}function Nx(a,o,c){return c(function(){jx(o)&&Mx(a)})}function jx(a){var o=a.getSnapshot;a=a.value;try{var c=o();return!Kn(a,c)}catch{return!0}}function Mx(a){var o=hs(a,2);o!==null&&er(o,a,2)}function Up(a){var o=Ln();if(typeof a=="function"){var c=a;if(a=c(),bo){Rn(!0);try{c()}finally{Rn(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:a},o}function kx(a,o,c,d){return a.baseState=c,$p(a,at,typeof d=="function"?d:Oa)}function HN(a,o,c,d,y){if(Ju(a))throw Error(r(485));if(a=o.action,a!==null){var b={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){b.listeners.push(w)}};L.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,Rx(o,b)):(b.next=c.next,o.pending=c.next=b)}}function Rx(a,o){var c=o.action,d=o.payload,y=a.state;if(o.isTransition){var b=L.T,w={};L.T=w;try{var _=c(y,d),I=L.S;I!==null&&I(w,_),Ix(a,o,_)}catch(Y){zp(a,o,Y)}finally{L.T=b}}else try{b=c(y,d),Ix(a,o,b)}catch(Y){zp(a,o,Y)}}function Ix(a,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Lx(a,o,d)},function(d){return zp(a,o,d)}):Lx(a,o,c)}function Lx(a,o,c){o.status="fulfilled",o.value=c,$x(o),a.state=c,o=a.pending,o!==null&&(c=o.next,c===o?a.pending=null:(c=c.next,o.next=c,Rx(a,c)))}function zp(a,o,c){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,$x(o),o=o.next;while(o!==d)}a.action=null}function $x(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Bx(a,o){return o}function Ux(a,o){if(Ze){var c=ut.formState;if(c!==null){e:{var d=$e;if(Ze){if(wt){t:{for(var y=wt,b=na;y.nodeType!==8;){if(!b){y=null;break t}if(y=zr(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){wt=zr(y.nextSibling),d=y.data==="F!";break e}}mo(d)}d=!1}d&&(o=c[0])}}return c=Ln(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bx,lastRenderedState:o},c.queue=d,c=iS.bind(null,$e,d),d.dispatch=c,d=Up(!1),b=Fp.bind(null,$e,!1,d.queue),d=Ln(),y={state:o,dispatch:null,action:a,pending:null},d.queue=y,c=HN.bind(null,$e,y,b,c),y.dispatch=c,d.memoizedState=a,[o,c,!1]}function zx(a){var o=$t();return Gx(o,at,a)}function Gx(a,o,c){if(o=$p(a,o,Bx)[0],a=Wu(Oa)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Yl(o)}catch(w){throw w===Bl?qu:w}else d=o;o=$t();var y=o.queue,b=y.dispatch;return c!==o.memoizedState&&($e.flags|=2048,As(9,Qu(),qN.bind(null,y,c),null)),[d,b,a]}function qN(a,o){a.action=o}function Hx(a){var o=$t(),c=at;if(c!==null)return Gx(o,c,a);$t(),o=o.memoizedState,c=$t();var d=c.queue.dispatch;return c.memoizedState=a,[o,d,!1]}function As(a,o,c,d){return a={tag:a,create:c,deps:d,inst:o,next:null},o=$e.updateQueue,o===null&&(o=Ip(),$e.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,o.lastEffect=a),a}function Qu(){return{destroy:void 0,resource:void 0}}function qx(){return $t().memoizedState}function Zu(a,o,c,d){var y=Ln();d=d===void 0?null:d,$e.flags|=a,y.memoizedState=As(1|o,Qu(),c,d)}function Fl(a,o,c,d){var y=$t();d=d===void 0?null:d;var b=y.memoizedState.inst;at!==null&&d!==null&&Np(d,at.memoizedState.deps)?y.memoizedState=As(o,b,c,d):($e.flags|=a,y.memoizedState=As(1|o,b,c,d))}function Yx(a,o){Zu(8390656,8,a,o)}function Fx(a,o){Fl(2048,8,a,o)}function Vx(a,o){return Fl(4,2,a,o)}function Kx(a,o){return Fl(4,4,a,o)}function Xx(a,o){if(typeof o=="function"){a=a();var c=o(a);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Wx(a,o,c){c=c!=null?c.concat([a]):null,Fl(4,4,Xx.bind(null,o,a),c)}function Gp(){}function Qx(a,o){var c=$t();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&Np(o,d[1])?d[0]:(c.memoizedState=[a,o],a)}function Zx(a,o){var c=$t();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&Np(o,d[1]))return d[0];if(d=a(),bo){Rn(!0);try{a()}finally{Rn(!1)}}return c.memoizedState=[d,o],d}function Hp(a,o,c){return c===void 0||(ui&1073741824)!==0?a.memoizedState=o:(a.memoizedState=c,a=t1(),$e.lanes|=a,yi|=a,c)}function Jx(a,o,c,d){return Kn(c,o)?c:bs.current!==null?(a=Hp(a,c,d),Kn(a,o)||(Zt=!0),a):(ui&42)===0?(Zt=!0,a.memoizedState=c):(a=t1(),$e.lanes|=a,yi|=a,o)}function eS(a,o,c,d,y){var b=ee.p;ee.p=b!==0&&8>b?b:8;var w=L.T,_={};L.T=_,Fp(a,!1,o,c);try{var I=y(),Y=L.S;if(Y!==null&&Y(_,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var re=UN(I,d);Vl(a,o,re,Jn(a))}else Vl(a,o,d,Jn(a))}catch(ce){Vl(a,o,{then:function(){},status:"rejected",reason:ce},Jn())}finally{ee.p=b,L.T=w}}function YN(){}function qp(a,o,c,d){if(a.tag!==5)throw Error(r(476));var y=tS(a).queue;eS(a,y,o,he,c===null?YN:function(){return nS(a),c(d)})}function tS(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:he},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:c},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function nS(a){var o=tS(a).next.queue;Vl(a,o,{},Jn())}function Yp(){return bn(dc)}function rS(){return $t().memoizedState}function aS(){return $t().memoizedState}function FN(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var c=Jn();a=li(c);var d=ci(o,a,c);d!==null&&(er(d,o,c),zl(d,o,c)),o={cache:Sp()},a.payload=o;return}o=o.return}}function VN(a,o,c){var d=Jn();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Ju(a)?oS(o,c):(c=dp(a,o,c,d),c!==null&&(er(c,a,d),sS(c,o,d)))}function iS(a,o,c){var d=Jn();Vl(a,o,c,d)}function Vl(a,o,c,d){var y={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ju(a))oS(o,y);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var w=o.lastRenderedState,_=b(w,c);if(y.hasEagerState=!0,y.eagerState=_,Kn(_,w))return Iu(a,o,y,0),ut===null&&Ru(),!1}catch{}finally{}if(c=dp(a,o,y,d),c!==null)return er(c,a,d),sS(c,o,d),!0}return!1}function Fp(a,o,c,d){if(d={lane:2,revertLane:Cm(),action:d,hasEagerState:!1,eagerState:null,next:null},Ju(a)){if(o)throw Error(r(479))}else o=dp(a,c,d,2),o!==null&&er(o,a,2)}function Ju(a){var o=a.alternate;return a===$e||o!==null&&o===$e}function oS(a,o){xs=Vu=!0;var c=a.pending;c===null?o.next=o:(o.next=c.next,c.next=o),a.pending=o}function sS(a,o,c){if((c&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,c|=d,o.lanes=c,ts(a,c)}}var ed={readContext:bn,use:Xu,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt},lS={readContext:bn,use:Xu,useCallback:function(a,o){return Ln().memoizedState=[a,o===void 0?null:o],a},useContext:bn,useEffect:Yx,useImperativeHandle:function(a,o,c){c=c!=null?c.concat([a]):null,Zu(4194308,4,Xx.bind(null,o,a),c)},useLayoutEffect:function(a,o){return Zu(4194308,4,a,o)},useInsertionEffect:function(a,o){Zu(4,2,a,o)},useMemo:function(a,o){var c=Ln();o=o===void 0?null:o;var d=a();if(bo){Rn(!0);try{a()}finally{Rn(!1)}}return c.memoizedState=[d,o],d},useReducer:function(a,o,c){var d=Ln();if(c!==void 0){var y=c(o);if(bo){Rn(!0);try{c(o)}finally{Rn(!1)}}}else y=o;return d.memoizedState=d.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},d.queue=a,a=a.dispatch=VN.bind(null,$e,a),[d.memoizedState,a]},useRef:function(a){var o=Ln();return a={current:a},o.memoizedState=a},useState:function(a){a=Up(a);var o=a.queue,c=iS.bind(null,$e,o);return o.dispatch=c,[a.memoizedState,c]},useDebugValue:Gp,useDeferredValue:function(a,o){var c=Ln();return Hp(c,a,o)},useTransition:function(){var a=Up(!1);return a=eS.bind(null,$e,a.queue,!0,!1),Ln().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,c){var d=$e,y=Ln();if(Ze){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),ut===null)throw Error(r(349));(qe&124)!==0||_x(d,o,c)}y.memoizedState=c;var b={value:c,getSnapshot:o};return y.queue=b,Yx(Nx.bind(null,d,b,a),[a]),d.flags|=2048,As(9,Qu(),Dx.bind(null,d,b,c,o),null),c},useId:function(){var a=Ln(),o=ut.identifierPrefix;if(Ze){var c=Ca,d=Ea;c=(d&~(1<<32-yn(d)-1)).toString(32)+c,o=""+o+"R"+c,c=Ku++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=zN++,o=""+o+"r"+c.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:Yp,useFormState:Ux,useActionState:Ux,useOptimistic:function(a){var o=Ln();o.memoizedState=o.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Fp.bind(null,$e,!0,c),c.dispatch=o,[a,o]},useMemoCache:Lp,useCacheRefresh:function(){return Ln().memoizedState=FN.bind(null,$e)}},cS={readContext:bn,use:Xu,useCallback:Qx,useContext:bn,useEffect:Fx,useImperativeHandle:Wx,useInsertionEffect:Vx,useLayoutEffect:Kx,useMemo:Zx,useReducer:Wu,useRef:qx,useState:function(){return Wu(Oa)},useDebugValue:Gp,useDeferredValue:function(a,o){var c=$t();return Jx(c,at.memoizedState,a,o)},useTransition:function(){var a=Wu(Oa)[0],o=$t().memoizedState;return[typeof a=="boolean"?a:Yl(a),o]},useSyncExternalStore:Tx,useId:rS,useHostTransitionStatus:Yp,useFormState:zx,useActionState:zx,useOptimistic:function(a,o){var c=$t();return kx(c,at,a,o)},useMemoCache:Lp,useCacheRefresh:aS},KN={readContext:bn,use:Xu,useCallback:Qx,useContext:bn,useEffect:Fx,useImperativeHandle:Wx,useInsertionEffect:Vx,useLayoutEffect:Kx,useMemo:Zx,useReducer:Bp,useRef:qx,useState:function(){return Bp(Oa)},useDebugValue:Gp,useDeferredValue:function(a,o){var c=$t();return at===null?Hp(c,a,o):Jx(c,at.memoizedState,a,o)},useTransition:function(){var a=Bp(Oa)[0],o=$t().memoizedState;return[typeof a=="boolean"?a:Yl(a),o]},useSyncExternalStore:Tx,useId:rS,useHostTransitionStatus:Yp,useFormState:Hx,useActionState:Hx,useOptimistic:function(a,o){var c=$t();return at!==null?kx(c,at,a,o):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Lp,useCacheRefresh:aS},Es=null,Kl=0;function td(a){var o=Kl;return Kl+=1,Es===null&&(Es=[]),xx(Es,a,o)}function Xl(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function nd(a,o){throw o.$$typeof===m?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function uS(a){var o=a._init;return o(a._payload)}function dS(a){function o(G,$){if(a){var H=G.deletions;H===null?(G.deletions=[$],G.flags|=16):H.push($)}}function c(G,$){if(!a)return null;for(;$!==null;)o(G,$),$=$.sibling;return null}function d(G){for(var $=new Map;G!==null;)G.key!==null?$.set(G.key,G):$.set(G.index,G),G=G.sibling;return $}function y(G,$){return G=Aa(G,$),G.index=0,G.sibling=null,G}function b(G,$,H){return G.index=H,a?(H=G.alternate,H!==null?(H=H.index,H<$?(G.flags|=67108866,$):H):(G.flags|=67108866,$)):(G.flags|=1048576,$)}function w(G){return a&&G.alternate===null&&(G.flags|=67108866),G}function _(G,$,H,se){return $===null||$.tag!==6?($=hp(H,G.mode,se),$.return=G,$):($=y($,H),$.return=G,$)}function I(G,$,H,se){var Ee=H.type;return Ee===S?re(G,$,H.props.children,se,H.key):$!==null&&($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&uS(Ee)===$.type)?($=y($,H.props),Xl($,H),$.return=G,$):($=$u(H.type,H.key,H.props,null,G.mode,se),Xl($,H),$.return=G,$)}function Y(G,$,H,se){return $===null||$.tag!==4||$.stateNode.containerInfo!==H.containerInfo||$.stateNode.implementation!==H.implementation?($=pp(H,G.mode,se),$.return=G,$):($=y($,H.children||[]),$.return=G,$)}function re(G,$,H,se,Ee){return $===null||$.tag!==7?($=uo(H,G.mode,se,Ee),$.return=G,$):($=y($,H),$.return=G,$)}function ce(G,$,H){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=hp(""+$,G.mode,H),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case g:return H=$u($.type,$.key,$.props,null,G.mode,H),Xl(H,$),H.return=G,H;case x:return $=pp($,G.mode,H),$.return=G,$;case R:var se=$._init;return $=se($._payload),ce(G,$,H)}if(te($)||W($))return $=uo($,G.mode,H,null),$.return=G,$;if(typeof $.then=="function")return ce(G,td($),H);if($.$$typeof===T)return ce(G,Gu(G,$),H);nd(G,$)}return null}function V(G,$,H,se){var Ee=$!==null?$.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ee!==null?null:_(G,$,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case g:return H.key===Ee?I(G,$,H,se):null;case x:return H.key===Ee?Y(G,$,H,se):null;case R:return Ee=H._init,H=Ee(H._payload),V(G,$,H,se)}if(te(H)||W(H))return Ee!==null?null:re(G,$,H,se,null);if(typeof H.then=="function")return V(G,$,td(H),se);if(H.$$typeof===T)return V(G,$,Gu(G,H),se);nd(G,H)}return null}function X(G,$,H,se,Ee){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return G=G.get(H)||null,_($,G,""+se,Ee);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case g:return G=G.get(se.key===null?H:se.key)||null,I($,G,se,Ee);case x:return G=G.get(se.key===null?H:se.key)||null,Y($,G,se,Ee);case R:var Ue=se._init;return se=Ue(se._payload),X(G,$,H,se,Ee)}if(te(se)||W(se))return G=G.get(H)||null,re($,G,se,Ee,null);if(typeof se.then=="function")return X(G,$,H,td(se),Ee);if(se.$$typeof===T)return X(G,$,H,Gu($,se),Ee);nd($,se)}return null}function je(G,$,H,se){for(var Ee=null,Ue=null,Oe=$,Ne=$=0,en=null;Oe!==null&&Ne<H.length;Ne++){Oe.index>Ne?(en=Oe,Oe=null):en=Oe.sibling;var Ve=V(G,Oe,H[Ne],se);if(Ve===null){Oe===null&&(Oe=en);break}a&&Oe&&Ve.alternate===null&&o(G,Oe),$=b(Ve,$,Ne),Ue===null?Ee=Ve:Ue.sibling=Ve,Ue=Ve,Oe=en}if(Ne===H.length)return c(G,Oe),Ze&&ho(G,Ne),Ee;if(Oe===null){for(;Ne<H.length;Ne++)Oe=ce(G,H[Ne],se),Oe!==null&&($=b(Oe,$,Ne),Ue===null?Ee=Oe:Ue.sibling=Oe,Ue=Oe);return Ze&&ho(G,Ne),Ee}for(Oe=d(Oe);Ne<H.length;Ne++)en=X(Oe,G,Ne,H[Ne],se),en!==null&&(a&&en.alternate!==null&&Oe.delete(en.key===null?Ne:en.key),$=b(en,$,Ne),Ue===null?Ee=en:Ue.sibling=en,Ue=en);return a&&Oe.forEach(function(wi){return o(G,wi)}),Ze&&ho(G,Ne),Ee}function De(G,$,H,se){if(H==null)throw Error(r(151));for(var Ee=null,Ue=null,Oe=$,Ne=$=0,en=null,Ve=H.next();Oe!==null&&!Ve.done;Ne++,Ve=H.next()){Oe.index>Ne?(en=Oe,Oe=null):en=Oe.sibling;var wi=V(G,Oe,Ve.value,se);if(wi===null){Oe===null&&(Oe=en);break}a&&Oe&&wi.alternate===null&&o(G,Oe),$=b(wi,$,Ne),Ue===null?Ee=wi:Ue.sibling=wi,Ue=wi,Oe=en}if(Ve.done)return c(G,Oe),Ze&&ho(G,Ne),Ee;if(Oe===null){for(;!Ve.done;Ne++,Ve=H.next())Ve=ce(G,Ve.value,se),Ve!==null&&($=b(Ve,$,Ne),Ue===null?Ee=Ve:Ue.sibling=Ve,Ue=Ve);return Ze&&ho(G,Ne),Ee}for(Oe=d(Oe);!Ve.done;Ne++,Ve=H.next())Ve=X(Oe,G,Ne,Ve.value,se),Ve!==null&&(a&&Ve.alternate!==null&&Oe.delete(Ve.key===null?Ne:Ve.key),$=b(Ve,$,Ne),Ue===null?Ee=Ve:Ue.sibling=Ve,Ue=Ve);return a&&Oe.forEach(function(Xj){return o(G,Xj)}),Ze&&ho(G,Ne),Ee}function ot(G,$,H,se){if(typeof H=="object"&&H!==null&&H.type===S&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case g:e:{for(var Ee=H.key;$!==null;){if($.key===Ee){if(Ee=H.type,Ee===S){if($.tag===7){c(G,$.sibling),se=y($,H.props.children),se.return=G,G=se;break e}}else if($.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&uS(Ee)===$.type){c(G,$.sibling),se=y($,H.props),Xl(se,H),se.return=G,G=se;break e}c(G,$);break}else o(G,$);$=$.sibling}H.type===S?(se=uo(H.props.children,G.mode,se,H.key),se.return=G,G=se):(se=$u(H.type,H.key,H.props,null,G.mode,se),Xl(se,H),se.return=G,G=se)}return w(G);case x:e:{for(Ee=H.key;$!==null;){if($.key===Ee)if($.tag===4&&$.stateNode.containerInfo===H.containerInfo&&$.stateNode.implementation===H.implementation){c(G,$.sibling),se=y($,H.children||[]),se.return=G,G=se;break e}else{c(G,$);break}else o(G,$);$=$.sibling}se=pp(H,G.mode,se),se.return=G,G=se}return w(G);case R:return Ee=H._init,H=Ee(H._payload),ot(G,$,H,se)}if(te(H))return je(G,$,H,se);if(W(H)){if(Ee=W(H),typeof Ee!="function")throw Error(r(150));return H=Ee.call(H),De(G,$,H,se)}if(typeof H.then=="function")return ot(G,$,td(H),se);if(H.$$typeof===T)return ot(G,$,Gu(G,H),se);nd(G,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,$!==null&&$.tag===6?(c(G,$.sibling),se=y($,H),se.return=G,G=se):(c(G,$),se=hp(H,G.mode,se),se.return=G,G=se),w(G)):c(G,$)}return function(G,$,H,se){try{Kl=0;var Ee=ot(G,$,H,se);return Es=null,Ee}catch(Oe){if(Oe===Bl||Oe===qu)throw Oe;var Ue=Xn(29,Oe,null,G.mode);return Ue.lanes=se,Ue.return=G,Ue}finally{}}}var Cs=dS(!0),fS=dS(!1),br=J(null),ra=null;function di(a){var o=a.alternate;ne(Yt,Yt.current&1),ne(br,a),ra===null&&(o===null||bs.current!==null||o.memoizedState!==null)&&(ra=a)}function hS(a){if(a.tag===22){if(ne(Yt,Yt.current),ne(br,a),ra===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(ra=a)}}else fi()}function fi(){ne(Yt,Yt.current),ne(br,br.current)}function Ta(a){F(br),ra===a&&(ra=null),F(Yt)}var Yt=J(0);function rd(a){for(var o=a;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Im(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Vp(a,o,c,d){o=a.memoizedState,c=c(d,o),c=c==null?o:p({},o,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Kp={enqueueSetState:function(a,o,c){a=a._reactInternals;var d=Jn(),y=li(d);y.payload=o,c!=null&&(y.callback=c),o=ci(a,y,d),o!==null&&(er(o,a,d),zl(o,a,d))},enqueueReplaceState:function(a,o,c){a=a._reactInternals;var d=Jn(),y=li(d);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=ci(a,y,d),o!==null&&(er(o,a,d),zl(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var c=Jn(),d=li(c);d.tag=2,o!=null&&(d.callback=o),o=ci(a,d,c),o!==null&&(er(o,a,c),zl(o,a,c))}};function pS(a,o,c,d,y,b,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,b,w):o.prototype&&o.prototype.isPureReactComponent?!Nl(c,d)||!Nl(y,b):!0}function mS(a,o,c,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==a&&Kp.enqueueReplaceState(o,o.state,null)}function xo(a,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(a=a.defaultProps){c===o&&(c=p({},c));for(var y in a)c[y]===void 0&&(c[y]=a[y])}return c}var ad=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function gS(a){ad(a)}function yS(a){console.error(a)}function vS(a){ad(a)}function id(a,o){try{var c=a.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function bS(a,o,c){try{var d=a.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Xp(a,o,c){return c=li(c),c.tag=3,c.payload={element:null},c.callback=function(){id(a,o)},c}function xS(a){return a=li(a),a.tag=3,a}function SS(a,o,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;a.payload=function(){return y(b)},a.callback=function(){bS(o,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){bS(o,c,d),typeof y!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var _=d.stack;this.componentDidCatch(d.value,{componentStack:_!==null?_:""})})}function XN(a,o,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&Il(o,c,y,!0),c=br.current,c!==null){switch(c.tag){case 13:return ra===null?bm():c.alternate===null&&Ot===0&&(Ot=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===Cp?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Sm(a,d,y)),!1;case 22:return c.flags|=65536,d===Cp?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Sm(a,d,y)),!1}throw Error(r(435,c.tag))}return Sm(a,d,y),bm(),!1}if(Ze)return o=br.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==yp&&(a=Error(r(422),{cause:d}),Rl(mr(a,c)))):(d!==yp&&(o=Error(r(423),{cause:d}),Rl(mr(o,c))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,d=mr(d,c),y=Xp(a.stateNode,d,y),Op(a,y),Ot!==4&&(Ot=2)),!1;var b=Error(r(520),{cause:d});if(b=mr(b,c),nc===null?nc=[b]:nc.push(b),Ot!==4&&(Ot=2),o===null)return!0;d=mr(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,a=y&-y,c.lanes|=a,a=Xp(c.stateNode,d,a),Op(c,a),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(vi===null||!vi.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=xS(y),SS(y,a,c,d),Op(c,y),!1}c=c.return}while(c!==null);return!1}var AS=Error(r(461)),Zt=!1;function dn(a,o,c,d){o.child=a===null?fS(o,null,c,d):Cs(o,a.child,c,d)}function ES(a,o,c,d,y){c=c.render;var b=o.ref;if("ref"in d){var w={};for(var _ in d)_!=="ref"&&(w[_]=d[_])}else w=d;return yo(o),d=jp(a,o,c,w,b,y),_=Mp(),a!==null&&!Zt?(kp(a,o,y),_a(a,o,y)):(Ze&&_&&mp(o),o.flags|=1,dn(a,o,d,y),o.child)}function CS(a,o,c,d,y){if(a===null){var b=c.type;return typeof b=="function"&&!fp(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,PS(a,o,b,d,y)):(a=$u(c.type,null,d,o,o.mode,y),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!rm(a,y)){var w=b.memoizedProps;if(c=c.compare,c=c!==null?c:Nl,c(w,d)&&a.ref===o.ref)return _a(a,o,y)}return o.flags|=1,a=Aa(b,d),a.ref=o.ref,a.return=o,o.child=a}function PS(a,o,c,d,y){if(a!==null){var b=a.memoizedProps;if(Nl(b,d)&&a.ref===o.ref)if(Zt=!1,o.pendingProps=d=b,rm(a,y))(a.flags&131072)!==0&&(Zt=!0);else return o.lanes=a.lanes,_a(a,o,y)}return Wp(a,o,c,d,y)}function wS(a,o,c){var d=o.pendingProps,y=d.children,b=a!==null?a.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=b!==null?b.baseLanes|c:c,a!==null){for(y=o.child=a.child,b=0;y!==null;)b=b|y.lanes|y.childLanes,y=y.sibling;o.childLanes=b&~d}else o.childLanes=0,o.child=null;return OS(a,o,d,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Hu(o,b!==null?b.cachePool:null),b!==null?Px(o,b):_p(),hS(o);else return o.lanes=o.childLanes=536870912,OS(a,o,b!==null?b.baseLanes|c:c,c)}else b!==null?(Hu(o,b.cachePool),Px(o,b),fi(),o.memoizedState=null):(a!==null&&Hu(o,null),_p(),fi());return dn(a,o,y,c),o.child}function OS(a,o,c,d){var y=Ep();return y=y===null?null:{parent:qt._currentValue,pool:y},o.memoizedState={baseLanes:c,cachePool:y},a!==null&&Hu(o,null),_p(),hS(o),a!==null&&Il(a,o,d,!0),null}function od(a,o){var c=o.ref;if(c===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(o.flags|=4194816)}}function Wp(a,o,c,d,y){return yo(o),c=jp(a,o,c,d,void 0,y),d=Mp(),a!==null&&!Zt?(kp(a,o,y),_a(a,o,y)):(Ze&&d&&mp(o),o.flags|=1,dn(a,o,c,y),o.child)}function TS(a,o,c,d,y,b){return yo(o),o.updateQueue=null,c=Ox(o,d,c,y),wx(a),d=Mp(),a!==null&&!Zt?(kp(a,o,b),_a(a,o,b)):(Ze&&d&&mp(o),o.flags|=1,dn(a,o,c,b),o.child)}function _S(a,o,c,d,y){if(yo(o),o.stateNode===null){var b=ps,w=c.contextType;typeof w=="object"&&w!==null&&(b=bn(w)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Kp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},Pp(o),w=c.contextType,b.context=typeof w=="object"&&w!==null?bn(w):ps,b.state=o.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Vp(o,c,w,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(w=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),w!==b.state&&Kp.enqueueReplaceState(b,b.state,null),Hl(o,d,b,y),Gl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){b=o.stateNode;var _=o.memoizedProps,I=xo(c,_);b.props=I;var Y=b.context,re=c.contextType;w=ps,typeof re=="object"&&re!==null&&(w=bn(re));var ce=c.getDerivedStateFromProps;re=typeof ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,re||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_||Y!==w)&&mS(o,b,d,w),si=!1;var V=o.memoizedState;b.state=V,Hl(o,d,b,y),Gl(),Y=o.memoizedState,_||V!==Y||si?(typeof ce=="function"&&(Vp(o,c,ce,d),Y=o.memoizedState),(I=si||pS(o,c,I,d,V,Y,w))?(re||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=Y),b.props=d,b.state=Y,b.context=w,d=I):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,wp(a,o),w=o.memoizedProps,re=xo(c,w),b.props=re,ce=o.pendingProps,V=b.context,Y=c.contextType,I=ps,typeof Y=="object"&&Y!==null&&(I=bn(Y)),_=c.getDerivedStateFromProps,(Y=typeof _=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(w!==ce||V!==I)&&mS(o,b,d,I),si=!1,V=o.memoizedState,b.state=V,Hl(o,d,b,y),Gl();var X=o.memoizedState;w!==ce||V!==X||si||a!==null&&a.dependencies!==null&&zu(a.dependencies)?(typeof _=="function"&&(Vp(o,c,_,d),X=o.memoizedState),(re=si||pS(o,c,re,d,V,X,I)||a!==null&&a.dependencies!==null&&zu(a.dependencies))?(Y||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,X,I),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,X,I)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&V===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&V===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=X),b.props=d,b.state=X,b.context=I,d=re):(typeof b.componentDidUpdate!="function"||w===a.memoizedProps&&V===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&V===a.memoizedState||(o.flags|=1024),d=!1)}return b=d,od(a,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&d?(o.child=Cs(o,a.child,null,y),o.child=Cs(o,null,c,y)):dn(a,o,c,y),o.memoizedState=b.state,a=o.child):a=_a(a,o,y),a}function DS(a,o,c,d){return kl(),o.flags|=256,dn(a,o,c,d),o.child}var Qp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zp(a){return{baseLanes:a,cachePool:yx()}}function Jp(a,o,c){return a=a!==null?a.childLanes&~c:0,o&&(a|=xr),a}function NS(a,o,c){var d=o.pendingProps,y=!1,b=(o.flags&128)!==0,w;if((w=b)||(w=a!==null&&a.memoizedState===null?!1:(Yt.current&2)!==0),w&&(y=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,a===null){if(Ze){if(y?di(o):fi(),Ze){var _=wt,I;if(I=_){e:{for(I=_,_=na;I.nodeType!==8;){if(!_){_=null;break e}if(I=zr(I.nextSibling),I===null){_=null;break e}}_=I}_!==null?(o.memoizedState={dehydrated:_,treeContext:fo!==null?{id:Ea,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},I=Xn(18,null,null,0),I.stateNode=_,I.return=o,o.child=I,Nn=o,wt=null,I=!0):I=!1}I||mo(o)}if(_=o.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Im(_)?o.lanes=32:o.lanes=536870912,null;Ta(o)}return _=d.children,d=d.fallback,y?(fi(),y=o.mode,_=sd({mode:"hidden",children:_},y),d=uo(d,y,c,null),_.return=o,d.return=o,_.sibling=d,o.child=_,y=o.child,y.memoizedState=Zp(c),y.childLanes=Jp(a,w,c),o.memoizedState=Qp,d):(di(o),em(o,_))}if(I=a.memoizedState,I!==null&&(_=I.dehydrated,_!==null)){if(b)o.flags&256?(di(o),o.flags&=-257,o=tm(a,o,c)):o.memoizedState!==null?(fi(),o.child=a.child,o.flags|=128,o=null):(fi(),y=d.fallback,_=o.mode,d=sd({mode:"visible",children:d.children},_),y=uo(y,_,c,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,Cs(o,a.child,null,c),d=o.child,d.memoizedState=Zp(c),d.childLanes=Jp(a,w,c),o.memoizedState=Qp,o=y);else if(di(o),Im(_)){if(w=_.nextSibling&&_.nextSibling.dataset,w)var Y=w.dgst;w=Y,d=Error(r(419)),d.stack="",d.digest=w,Rl({value:d,source:null,stack:null}),o=tm(a,o,c)}else if(Zt||Il(a,o,c,!1),w=(c&a.childLanes)!==0,Zt||w){if(w=ut,w!==null&&(d=c&-c,d=(d&42)!==0?1:bl(d),d=(d&(w.suspendedLanes|c))!==0?0:d,d!==0&&d!==I.retryLane))throw I.retryLane=d,hs(a,d),er(w,a,d),AS;_.data==="$?"||bm(),o=tm(a,o,c)}else _.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=I.treeContext,wt=zr(_.nextSibling),Nn=o,Ze=!0,po=null,na=!1,a!==null&&(yr[vr++]=Ea,yr[vr++]=Ca,yr[vr++]=fo,Ea=a.id,Ca=a.overflow,fo=o),o=em(o,d.children),o.flags|=4096);return o}return y?(fi(),y=d.fallback,_=o.mode,I=a.child,Y=I.sibling,d=Aa(I,{mode:"hidden",children:d.children}),d.subtreeFlags=I.subtreeFlags&65011712,Y!==null?y=Aa(Y,y):(y=uo(y,_,c,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,_=a.child.memoizedState,_===null?_=Zp(c):(I=_.cachePool,I!==null?(Y=qt._currentValue,I=I.parent!==Y?{parent:Y,pool:Y}:I):I=yx(),_={baseLanes:_.baseLanes|c,cachePool:I}),y.memoizedState=_,y.childLanes=Jp(a,w,c),o.memoizedState=Qp,d):(di(o),c=a.child,a=c.sibling,c=Aa(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,a!==null&&(w=o.deletions,w===null?(o.deletions=[a],o.flags|=16):w.push(a)),o.child=c,o.memoizedState=null,c)}function em(a,o){return o=sd({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function sd(a,o){return a=Xn(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function tm(a,o,c){return Cs(o,a.child,null,c),a=em(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function jS(a,o,c){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),bp(a.return,o,c)}function nm(a,o,c,d,y){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=c,b.tailMode=y)}function MS(a,o,c){var d=o.pendingProps,y=d.revealOrder,b=d.tail;if(dn(a,o,d.children,c),d=Yt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&jS(a,c,o);else if(a.tag===19)jS(a,c,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}switch(ne(Yt,d),y){case"forwards":for(c=o.child,y=null;c!==null;)a=c.alternate,a!==null&&rd(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),nm(o,!1,y,c,b);break;case"backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(a=y.alternate,a!==null&&rd(a)===null){o.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}nm(o,!0,c,null,b);break;case"together":nm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function _a(a,o,c){if(a!==null&&(o.dependencies=a.dependencies),yi|=o.lanes,(c&o.childLanes)===0)if(a!==null){if(Il(a,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,c=Aa(a,a.pendingProps),o.child=c,c.return=o;a.sibling!==null;)a=a.sibling,c=c.sibling=Aa(a,a.pendingProps),c.return=o;c.sibling=null}return o.child}function rm(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&zu(a)))}function WN(a,o,c){switch(o.tag){case 3:pe(o,o.stateNode.containerInfo),oi(o,qt,a.memoizedState.cache),kl();break;case 27:case 5:ue(o);break;case 4:pe(o,o.stateNode.containerInfo);break;case 10:oi(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(di(o),o.flags|=128,null):(c&o.child.childLanes)!==0?NS(a,o,c):(di(o),a=_a(a,o,c),a!==null?a.sibling:null);di(o);break;case 19:var y=(a.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(Il(a,o,c,!1),d=(c&o.childLanes)!==0),y){if(d)return MS(a,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ne(Yt,Yt.current),d)break;return null;case 22:case 23:return o.lanes=0,wS(a,o,c);case 24:oi(o,qt,a.memoizedState.cache)}return _a(a,o,c)}function kS(a,o,c){if(a!==null)if(a.memoizedProps!==o.pendingProps)Zt=!0;else{if(!rm(a,c)&&(o.flags&128)===0)return Zt=!1,WN(a,o,c);Zt=(a.flags&131072)!==0}else Zt=!1,Ze&&(o.flags&1048576)!==0&&ux(o,Uu,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var d=o.elementType,y=d._init;if(d=y(d._payload),o.type=d,typeof d=="function")fp(d)?(a=xo(d,a),o.tag=1,o=_S(null,o,d,a,c)):(o.tag=0,o=Wp(null,o,d,a,c));else{if(d!=null){if(y=d.$$typeof,y===j){o.tag=11,o=ES(null,o,d,a,c);break e}else if(y===M){o.tag=14,o=CS(null,o,d,a,c);break e}}throw o=ie(d)||d,Error(r(306,o,""))}}return o;case 0:return Wp(a,o,o.type,o.pendingProps,c);case 1:return d=o.type,y=xo(d,o.pendingProps),_S(a,o,d,y,c);case 3:e:{if(pe(o,o.stateNode.containerInfo),a===null)throw Error(r(387));d=o.pendingProps;var b=o.memoizedState;y=b.element,wp(a,o),Hl(o,d,null,c);var w=o.memoizedState;if(d=w.cache,oi(o,qt,d),d!==b.cache&&xp(o,[qt],c,!0),Gl(),d=w.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=DS(a,o,d,c);break e}else if(d!==y){y=mr(Error(r(424)),o),Rl(y),o=DS(a,o,d,c);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(wt=zr(a.firstChild),Nn=o,Ze=!0,po=null,na=!0,c=fS(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(kl(),d===y){o=_a(a,o,c);break e}dn(a,o,d,c)}o=o.child}return o;case 26:return od(a,o),a===null?(c=$1(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ze||(c=o.type,a=o.pendingProps,d=Sd(ae.current).createElement(c),d[sn]=o,d[He]=a,hn(d,c,a),At(d),o.stateNode=d):o.memoizedState=$1(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return ue(o),a===null&&Ze&&(d=o.stateNode=R1(o.type,o.pendingProps,ae.current),Nn=o,na=!0,y=wt,Si(o.type)?(Lm=y,wt=zr(d.firstChild)):wt=y),dn(a,o,o.pendingProps.children,c),od(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Ze&&((y=d=wt)&&(d=Cj(d,o.type,o.pendingProps,na),d!==null?(o.stateNode=d,Nn=o,wt=zr(d.firstChild),na=!1,y=!0):y=!1),y||mo(o)),ue(o),y=o.type,b=o.pendingProps,w=a!==null?a.memoizedProps:null,d=b.children,Mm(y,b)?d=null:w!==null&&Mm(y,w)&&(o.flags|=32),o.memoizedState!==null&&(y=jp(a,o,GN,null,null,c),dc._currentValue=y),od(a,o),dn(a,o,d,c),o.child;case 6:return a===null&&Ze&&((a=c=wt)&&(c=Pj(c,o.pendingProps,na),c!==null?(o.stateNode=c,Nn=o,wt=null,a=!0):a=!1),a||mo(o)),null;case 13:return NS(a,o,c);case 4:return pe(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=Cs(o,null,d,c):dn(a,o,d,c),o.child;case 11:return ES(a,o,o.type,o.pendingProps,c);case 7:return dn(a,o,o.pendingProps,c),o.child;case 8:return dn(a,o,o.pendingProps.children,c),o.child;case 12:return dn(a,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,oi(o,o.type,d.value),dn(a,o,d.children,c),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,yo(o),y=bn(y),d=d(y),o.flags|=1,dn(a,o,d,c),o.child;case 14:return CS(a,o,o.type,o.pendingProps,c);case 15:return PS(a,o,o.type,o.pendingProps,c);case 19:return MS(a,o,c);case 31:return d=o.pendingProps,c=o.mode,d={mode:d.mode,children:d.children},a===null?(c=sd(d,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Aa(a.child,d),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return wS(a,o,c);case 24:return yo(o),d=bn(qt),a===null?(y=Ep(),y===null&&(y=ut,b=Sp(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),o.memoizedState={parent:d,cache:y},Pp(o),oi(o,qt,y)):((a.lanes&c)!==0&&(wp(a,o),Hl(o,null,null,c),Gl()),y=a.memoizedState,b=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),oi(o,qt,d)):(d=b.cache,oi(o,qt,d),d!==y.cache&&xp(o,[qt],c,!0))),dn(a,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Da(a){a.flags|=4}function RS(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!H1(o)){if(o=br.current,o!==null&&((qe&4194048)===qe?ra!==null:(qe&62914560)!==qe&&(qe&536870912)===0||o!==ra))throw Ul=Cp,vx;a.flags|=8192}}function ld(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?gl():536870912,a.lanes|=o,Ts|=o)}function Wl(a,o){if(!Ze)switch(a.tailMode){case"hidden":o=a.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Et(a){var o=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(o)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=d,a.childLanes=c,o}function QN(a,o,c){var d=o.pendingProps;switch(gp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Et(o),null;case 3:return c=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),wa(qt),oe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Ml(o)?Da(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,hx())),Et(o),null;case 26:return c=o.memoizedState,a===null?(Da(o),c!==null?(Et(o),RS(o,c)):(Et(o),o.flags&=-16777217)):c?c!==a.memoizedState?(Da(o),Et(o),RS(o,c)):(Et(o),o.flags&=-16777217):(a.memoizedProps!==d&&Da(o),Et(o),o.flags&=-16777217),null;case 27:be(o),c=ae.current;var y=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Da(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return Et(o),null}a=me.current,Ml(o)?dx(o):(a=R1(y,d,c),o.stateNode=a,Da(o))}return Et(o),null;case 5:if(be(o),c=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Da(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return Et(o),null}if(a=me.current,Ml(o))dx(o);else{switch(y=Sd(ae.current),a){case 1:a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=y.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?a.multiple=!0:d.size&&(a.size=d.size);break;default:a=typeof d.is=="string"?y.createElement(c,{is:d.is}):y.createElement(c)}}a[sn]=o,a[He]=d;e:for(y=o.child;y!==null;){if(y.tag===5||y.tag===6)a.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}o.stateNode=a;e:switch(hn(a,c,d),c){case"button":case"input":case"select":case"textarea":a=!!d.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Da(o)}}return Et(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&Da(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(a=ae.current,Ml(o)){if(a=o.stateNode,c=o.memoizedProps,d=null,y=Nn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}a[sn]=o,a=!!(a.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||T1(a.nodeValue,c)),a||mo(o)}else a=Sd(a).createTextNode(d),a[sn]=o,o.stateNode=a}return Et(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=Ml(o),d!==null&&d.dehydrated!==null){if(a===null){if(!y)throw Error(r(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[sn]=o}else kl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),y=!1}else y=hx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Ta(o),o):(Ta(o),null)}if(Ta(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=d!==null,a=a!==null&&a.memoizedState!==null,c){d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var b=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)}return c!==a&&c&&(o.child.flags|=8192),ld(o,o.updateQueue),Et(o),null;case 4:return oe(),a===null&&Tm(o.stateNode.containerInfo),Et(o),null;case 10:return wa(o.type),Et(o),null;case 19:if(F(Yt),y=o.memoizedState,y===null)return Et(o),null;if(d=(o.flags&128)!==0,b=y.rendering,b===null)if(d)Wl(y,!1);else{if(Ot!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=rd(a),b!==null){for(o.flags|=128,Wl(y,!1),a=b.updateQueue,o.updateQueue=a,ld(o,a),o.subtreeFlags=0,a=c,c=o.child;c!==null;)cx(c,a),c=c.sibling;return ne(Yt,Yt.current&1|2),o.child}a=a.sibling}y.tail!==null&&ft()>dd&&(o.flags|=128,d=!0,Wl(y,!1),o.lanes=4194304)}else{if(!d)if(a=rd(b),a!==null){if(o.flags|=128,d=!0,a=a.updateQueue,o.updateQueue=a,ld(o,a),Wl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!Ze)return Et(o),null}else 2*ft()-y.renderingStartTime>dd&&c!==536870912&&(o.flags|=128,d=!0,Wl(y,!1),o.lanes=4194304);y.isBackwards?(b.sibling=o.child,o.child=b):(a=y.last,a!==null?a.sibling=b:o.child=b,y.last=b)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=ft(),o.sibling=null,a=Yt.current,ne(Yt,d?a&1|2:a&1),o):(Et(o),null);case 22:case 23:return Ta(o),Dp(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),c=o.updateQueue,c!==null&&ld(o,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),a!==null&&F(vo),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),wa(qt),Et(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function ZN(a,o){switch(gp(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return wa(qt),oe(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return be(o),null;case 13:if(Ta(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));kl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return F(Yt),null;case 4:return oe(),null;case 10:return wa(o.type),null;case 22:case 23:return Ta(o),Dp(),a!==null&&F(vo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return wa(qt),null;case 25:return null;default:return null}}function IS(a,o){switch(gp(o),o.tag){case 3:wa(qt),oe();break;case 26:case 27:case 5:be(o);break;case 4:oe();break;case 13:Ta(o);break;case 19:F(Yt);break;case 10:wa(o.type);break;case 22:case 23:Ta(o),Dp(),a!==null&&F(vo);break;case 24:wa(qt)}}function Ql(a,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&a)===a){d=void 0;var b=c.create,w=c.inst;d=b(),w.destroy=d}c=c.next}while(c!==y)}}catch(_){lt(o,o.return,_)}}function hi(a,o,c){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&a)===a){var w=d.inst,_=w.destroy;if(_!==void 0){w.destroy=void 0,y=o;var I=c,Y=_;try{Y()}catch(re){lt(y,I,re)}}}d=d.next}while(d!==b)}}catch(re){lt(o,o.return,re)}}function LS(a){var o=a.updateQueue;if(o!==null){var c=a.stateNode;try{Cx(o,c)}catch(d){lt(a,a.return,d)}}}function $S(a,o,c){c.props=xo(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(d){lt(a,o,d)}}function Zl(a,o){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof c=="function"?a.refCleanup=c(d):c.current=d}}catch(y){lt(a,o,y)}}function aa(a,o){var c=a.ref,d=a.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){lt(a,o,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){lt(a,o,y)}else c.current=null}function BS(a){var o=a.type,c=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){lt(a,a.return,y)}}function am(a,o,c){try{var d=a.stateNode;bj(d,a.type,c,o),d[He]=o}catch(y){lt(a,a.return,y)}}function US(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Si(a.type)||a.tag===4}function im(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||US(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Si(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function om(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(a),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=xd));else if(d!==4&&(d===27&&Si(a.type)&&(c=a.stateNode,o=null),a=a.child,a!==null))for(om(a,o,c),a=a.sibling;a!==null;)om(a,o,c),a=a.sibling}function cd(a,o,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?c.insertBefore(a,o):c.appendChild(a);else if(d!==4&&(d===27&&Si(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(cd(a,o,c),a=a.sibling;a!==null;)cd(a,o,c),a=a.sibling}function zS(a){var o=a.stateNode,c=a.memoizedProps;try{for(var d=a.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);hn(o,d,c),o[sn]=a,o[He]=c}catch(b){lt(a,a.return,b)}}var Na=!1,Nt=!1,sm=!1,GS=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function JN(a,o){if(a=a.containerInfo,Nm=Od,a=Jb(a),ip(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var w=0,_=-1,I=-1,Y=0,re=0,ce=a,V=null;t:for(;;){for(var X;ce!==c||y!==0&&ce.nodeType!==3||(_=w+y),ce!==b||d!==0&&ce.nodeType!==3||(I=w+d),ce.nodeType===3&&(w+=ce.nodeValue.length),(X=ce.firstChild)!==null;)V=ce,ce=X;for(;;){if(ce===a)break t;if(V===c&&++Y===y&&(_=w),V===b&&++re===d&&(I=w),(X=ce.nextSibling)!==null)break;ce=V,V=ce.parentNode}ce=X}c=_===-1||I===-1?null:{start:_,end:I}}else c=null}c=c||{start:0,end:0}}else c=null;for(jm={focusedElem:a,selectionRange:c},Od=!1,Jt=o;Jt!==null;)if(o=Jt,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,Jt=a;else for(;Jt!==null;){switch(o=Jt,b=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,c=o,y=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var je=xo(c.type,y,c.elementType===c.type);a=d.getSnapshotBeforeUpdate(je,b),d.__reactInternalSnapshotBeforeUpdate=a}catch(De){lt(c,c.return,De)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,c=a.nodeType,c===9)Rm(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Rm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,Jt=a;break}Jt=o.return}}function HS(a,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:pi(a,c),d&4&&Ql(5,c);break;case 1:if(pi(a,c),d&4)if(a=c.stateNode,o===null)try{a.componentDidMount()}catch(w){lt(c,c.return,w)}else{var y=xo(c.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(y,o,a.__reactInternalSnapshotBeforeUpdate)}catch(w){lt(c,c.return,w)}}d&64&&LS(c),d&512&&Zl(c,c.return);break;case 3:if(pi(a,c),d&64&&(a=c.updateQueue,a!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Cx(a,o)}catch(w){lt(c,c.return,w)}}break;case 27:o===null&&d&4&&zS(c);case 26:case 5:pi(a,c),o===null&&d&4&&BS(c),d&512&&Zl(c,c.return);break;case 12:pi(a,c);break;case 13:pi(a,c),d&4&&FS(a,c),d&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=lj.bind(null,c),wj(a,c))));break;case 22:if(d=c.memoizedState!==null||Na,!d){o=o!==null&&o.memoizedState!==null||Nt,y=Na;var b=Nt;Na=d,(Nt=o)&&!b?mi(a,c,(c.subtreeFlags&8772)!==0):pi(a,c),Na=y,Nt=b}break;case 30:break;default:pi(a,c)}}function qS(a){var o=a.alternate;o!==null&&(a.alternate=null,qS(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Xr(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var gt=null,$n=!1;function ja(a,o,c){for(c=c.child;c!==null;)YS(a,o,c),c=c.sibling}function YS(a,o,c){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Yi,c)}catch{}switch(c.tag){case 26:Nt||aa(c,o),ja(a,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Nt||aa(c,o);var d=gt,y=$n;Si(c.type)&&(gt=c.stateNode,$n=!1),ja(a,o,c),sc(c.stateNode),gt=d,$n=y;break;case 5:Nt||aa(c,o);case 6:if(d=gt,y=$n,gt=null,ja(a,o,c),gt=d,$n=y,gt!==null)if($n)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(c.stateNode)}catch(b){lt(c,o,b)}else try{gt.removeChild(c.stateNode)}catch(b){lt(c,o,b)}break;case 18:gt!==null&&($n?(a=gt,M1(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),mc(a)):M1(gt,c.stateNode));break;case 4:d=gt,y=$n,gt=c.stateNode.containerInfo,$n=!0,ja(a,o,c),gt=d,$n=y;break;case 0:case 11:case 14:case 15:Nt||hi(2,c,o),Nt||hi(4,c,o),ja(a,o,c);break;case 1:Nt||(aa(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&$S(c,o,d)),ja(a,o,c);break;case 21:ja(a,o,c);break;case 22:Nt=(d=Nt)||c.memoizedState!==null,ja(a,o,c),Nt=d;break;default:ja(a,o,c)}}function FS(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{mc(a)}catch(c){lt(o,o.return,c)}}function ej(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new GS),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new GS),o;default:throw Error(r(435,a.tag))}}function lm(a,o){var c=ej(a);o.forEach(function(d){var y=cj.bind(null,a,d);c.has(d)||(c.add(d),d.then(y,y))})}function Wn(a,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],b=a,w=o,_=w;e:for(;_!==null;){switch(_.tag){case 27:if(Si(_.type)){gt=_.stateNode,$n=!1;break e}break;case 5:gt=_.stateNode,$n=!1;break e;case 3:case 4:gt=_.stateNode.containerInfo,$n=!0;break e}_=_.return}if(gt===null)throw Error(r(160));YS(b,w,y),gt=null,$n=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)VS(o,a),o=o.sibling}var Ur=null;function VS(a,o){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Wn(o,a),Qn(a),d&4&&(hi(3,a,a.return),Ql(3,a),hi(5,a,a.return));break;case 1:Wn(o,a),Qn(a),d&512&&(Nt||c===null||aa(c,c.return)),d&64&&Na&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=Ur;if(Wn(o,a),Qn(a),d&512&&(Nt||c===null||aa(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=a.memoizedState,c===null)if(d===null)if(a.stateNode===null){e:{d=a.type,c=a.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Rr]||b[sn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),hn(b,d,c),b[sn]=a,At(b),d=b;break e;case"link":var w=z1("link","href",y).get(d+(c.href||""));if(w){for(var _=0;_<w.length;_++)if(b=w[_],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(_,1);break t}}b=y.createElement(d),hn(b,d,c),y.head.appendChild(b);break;case"meta":if(w=z1("meta","content",y).get(d+(c.content||""))){for(_=0;_<w.length;_++)if(b=w[_],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(_,1);break t}}b=y.createElement(d),hn(b,d,c),y.head.appendChild(b);break;default:throw Error(r(468,d))}b[sn]=a,At(b),d=b}a.stateNode=d}else G1(y,a.type,a.stateNode);else a.stateNode=U1(y,d,a.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?G1(y,a.type,a.stateNode):U1(y,d,a.memoizedProps)):d===null&&a.stateNode!==null&&am(a,a.memoizedProps,c.memoizedProps)}break;case 27:Wn(o,a),Qn(a),d&512&&(Nt||c===null||aa(c,c.return)),c!==null&&d&4&&am(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Wn(o,a),Qn(a),d&512&&(Nt||c===null||aa(c,c.return)),a.flags&32){y=a.stateNode;try{Zi(y,"")}catch(X){lt(a,a.return,X)}}d&4&&a.stateNode!=null&&(y=a.memoizedProps,am(a,y,c!==null?c.memoizedProps:y)),d&1024&&(sm=!0);break;case 6:if(Wn(o,a),Qn(a),d&4){if(a.stateNode===null)throw Error(r(162));d=a.memoizedProps,c=a.stateNode;try{c.nodeValue=d}catch(X){lt(a,a.return,X)}}break;case 3:if(Cd=null,y=Ur,Ur=Ad(o.containerInfo),Wn(o,a),Ur=y,Qn(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{mc(o.containerInfo)}catch(X){lt(a,a.return,X)}sm&&(sm=!1,KS(a));break;case 4:d=Ur,Ur=Ad(a.stateNode.containerInfo),Wn(o,a),Qn(a),Ur=d;break;case 12:Wn(o,a),Qn(a);break;case 13:Wn(o,a),Qn(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(pm=ft()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,lm(a,d)));break;case 22:y=a.memoizedState!==null;var I=c!==null&&c.memoizedState!==null,Y=Na,re=Nt;if(Na=Y||y,Nt=re||I,Wn(o,a),Nt=re,Na=Y,Qn(a),d&8192)e:for(o=a.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||I||Na||Nt||So(a)),c=null,o=a;;){if(o.tag===5||o.tag===26){if(c===null){I=c=o;try{if(b=I.stateNode,y)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{_=I.stateNode;var ce=I.memoizedProps.style,V=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;_.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(X){lt(I,I.return,X)}}}else if(o.tag===6){if(c===null){I=o;try{I.stateNode.nodeValue=y?"":I.memoizedProps}catch(X){lt(I,I.return,X)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,lm(a,c))));break;case 19:Wn(o,a),Qn(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,lm(a,d)));break;case 30:break;case 21:break;default:Wn(o,a),Qn(a)}}function Qn(a){var o=a.flags;if(o&2){try{for(var c,d=a.return;d!==null;){if(US(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,b=im(a);cd(a,b,y);break;case 5:var w=c.stateNode;c.flags&32&&(Zi(w,""),c.flags&=-33);var _=im(a);cd(a,_,w);break;case 3:case 4:var I=c.stateNode.containerInfo,Y=im(a);om(a,Y,I);break;default:throw Error(r(161))}}catch(re){lt(a,a.return,re)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function KS(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;KS(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function pi(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)HS(a,o.alternate,o),o=o.sibling}function So(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:hi(4,o,o.return),So(o);break;case 1:aa(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&$S(o,o.return,c),So(o);break;case 27:sc(o.stateNode);case 26:case 5:aa(o,o.return),So(o);break;case 22:o.memoizedState===null&&So(o);break;case 30:So(o);break;default:So(o)}a=a.sibling}}function mi(a,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=a,b=o,w=b.flags;switch(b.tag){case 0:case 11:case 15:mi(y,b,c),Ql(4,b);break;case 1:if(mi(y,b,c),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){lt(d,d.return,Y)}if(d=b,y=d.updateQueue,y!==null){var _=d.stateNode;try{var I=y.shared.hiddenCallbacks;if(I!==null)for(y.shared.hiddenCallbacks=null,y=0;y<I.length;y++)Ex(I[y],_)}catch(Y){lt(d,d.return,Y)}}c&&w&64&&LS(b),Zl(b,b.return);break;case 27:zS(b);case 26:case 5:mi(y,b,c),c&&d===null&&w&4&&BS(b),Zl(b,b.return);break;case 12:mi(y,b,c);break;case 13:mi(y,b,c),c&&w&4&&FS(y,b);break;case 22:b.memoizedState===null&&mi(y,b,c),Zl(b,b.return);break;case 30:break;default:mi(y,b,c)}o=o.sibling}}function cm(a,o){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&Ll(c))}function um(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Ll(a))}function ia(a,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)XS(a,o,c,d),o=o.sibling}function XS(a,o,c,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:ia(a,o,c,d),y&2048&&Ql(9,o);break;case 1:ia(a,o,c,d);break;case 3:ia(a,o,c,d),y&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Ll(a)));break;case 12:if(y&2048){ia(a,o,c,d),a=o.stateNode;try{var b=o.memoizedProps,w=b.id,_=b.onPostCommit;typeof _=="function"&&_(w,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(I){lt(o,o.return,I)}}else ia(a,o,c,d);break;case 13:ia(a,o,c,d);break;case 23:break;case 22:b=o.stateNode,w=o.alternate,o.memoizedState!==null?b._visibility&2?ia(a,o,c,d):Jl(a,o):b._visibility&2?ia(a,o,c,d):(b._visibility|=2,Ps(a,o,c,d,(o.subtreeFlags&10256)!==0)),y&2048&&cm(w,o);break;case 24:ia(a,o,c,d),y&2048&&um(o.alternate,o);break;default:ia(a,o,c,d)}}function Ps(a,o,c,d,y){for(y=y&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=a,w=o,_=c,I=d,Y=w.flags;switch(w.tag){case 0:case 11:case 15:Ps(b,w,_,I,y),Ql(8,w);break;case 23:break;case 22:var re=w.stateNode;w.memoizedState!==null?re._visibility&2?Ps(b,w,_,I,y):Jl(b,w):(re._visibility|=2,Ps(b,w,_,I,y)),y&&Y&2048&&cm(w.alternate,w);break;case 24:Ps(b,w,_,I,y),y&&Y&2048&&um(w.alternate,w);break;default:Ps(b,w,_,I,y)}o=o.sibling}}function Jl(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=a,d=o,y=d.flags;switch(d.tag){case 22:Jl(c,d),y&2048&&cm(d.alternate,d);break;case 24:Jl(c,d),y&2048&&um(d.alternate,d);break;default:Jl(c,d)}o=o.sibling}}var ec=8192;function ws(a){if(a.subtreeFlags&ec)for(a=a.child;a!==null;)WS(a),a=a.sibling}function WS(a){switch(a.tag){case 26:ws(a),a.flags&ec&&a.memoizedState!==null&&Bj(Ur,a.memoizedState,a.memoizedProps);break;case 5:ws(a);break;case 3:case 4:var o=Ur;Ur=Ad(a.stateNode.containerInfo),ws(a),Ur=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=ec,ec=16777216,ws(a),ec=o):ws(a));break;default:ws(a)}}function QS(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function tc(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Jt=d,JS(d,a)}QS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ZS(a),a=a.sibling}function ZS(a){switch(a.tag){case 0:case 11:case 15:tc(a),a.flags&2048&&hi(9,a,a.return);break;case 3:tc(a);break;case 12:tc(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,ud(a)):tc(a);break;default:tc(a)}}function ud(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Jt=d,JS(d,a)}QS(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:hi(8,o,o.return),ud(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,ud(o));break;default:ud(o)}a=a.sibling}}function JS(a,o){for(;Jt!==null;){var c=Jt;switch(c.tag){case 0:case 11:case 15:hi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ll(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Jt=d;else e:for(c=a;Jt!==null;){d=Jt;var y=d.sibling,b=d.return;if(qS(d),d===c){Jt=null;break e}if(y!==null){y.return=b,Jt=y;break e}Jt=b}}}var tj={getCacheForType:function(a){var o=bn(qt),c=o.data.get(a);return c===void 0&&(c=a(),o.data.set(a,c)),c}},nj=typeof WeakMap=="function"?WeakMap:Map,Je=0,ut=null,ze=null,qe=0,et=0,Zn=null,gi=!1,Os=!1,dm=!1,Ma=0,Ot=0,yi=0,Ao=0,fm=0,xr=0,Ts=0,nc=null,Bn=null,hm=!1,pm=0,dd=1/0,fd=null,vi=null,fn=0,bi=null,_s=null,Ds=0,mm=0,gm=null,e1=null,rc=0,ym=null;function Jn(){if((Je&2)!==0&&qe!==0)return qe&-qe;if(L.T!==null){var a=ys;return a!==0?a:Cm()}return ei()}function t1(){xr===0&&(xr=(qe&536870912)===0||Ze?Jo():536870912);var a=br.current;return a!==null&&(a.flags|=32),xr}function er(a,o,c){(a===ut&&(et===2||et===9)||a.cancelPendingCommit!==null)&&(Ns(a,0),xi(a,qe,xr,!1)),Za(a,c),((Je&2)===0||a!==ut)&&(a===ut&&((Je&2)===0&&(Ao|=c),Ot===4&&xi(a,qe,xr,!1)),oa(a))}function n1(a,o,c){if((Je&6)!==0)throw Error(r(327));var d=!c&&(o&124)===0&&(o&a.expiredLanes)===0||kr(a,o),y=d?ij(a,o):xm(a,o,!0),b=d;do{if(y===0){Os&&!d&&xi(a,o,0,!1);break}else{if(c=a.current.alternate,b&&!rj(c)){y=xm(a,o,!1),b=!1;continue}if(y===2){if(b=o,a.errorRecoveryDisabledLanes&b)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var _=a;y=nc;var I=_.current.memoizedState.isDehydrated;if(I&&(Ns(_,w).flags|=256),w=xm(_,w,!1),w!==2){if(dm&&!I){_.errorRecoveryDisabledLanes|=b,Ao|=b,y=4;break e}b=Bn,Bn=y,b!==null&&(Bn===null?Bn=b:Bn.push.apply(Bn,b))}y=w}if(b=!1,y!==2)continue}}if(y===1){Ns(a,0),xi(a,o,0,!0);break}e:{switch(d=a,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:xi(d,o,xr,!gi);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(y=pm+300-ft(),10<y)){if(xi(d,o,xr,!gi),Fi(d,0,!0)!==0)break e;d.timeoutHandle=N1(r1.bind(null,d,c,Bn,fd,hm,o,xr,Ao,Ts,gi,b,2,-0,0),y);break e}r1(d,c,Bn,fd,hm,o,xr,Ao,Ts,gi,b,0,-0,0)}}break}while(!0);oa(a)}function r1(a,o,c,d,y,b,w,_,I,Y,re,ce,V,X){if(a.timeoutHandle=-1,ce=o.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(uc={stylesheets:null,count:0,unsuspend:$j},WS(o),ce=Uj(),ce!==null)){a.cancelPendingCommit=ce(u1.bind(null,a,o,b,c,d,y,w,_,I,re,1,V,X)),xi(a,b,w,!Y);return}u1(a,o,b,c,d,y,w,_,I)}function rj(a){for(var o=a;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],b=y.getSnapshot;y=y.value;try{if(!Kn(b(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function xi(a,o,c,d){o&=~fm,o&=~Ao,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var y=o;0<y;){var b=31-yn(y),w=1<<b;d[b]=-1,y&=~w}c!==0&&vl(a,c,o)}function hd(){return(Je&6)===0?(ac(0),!1):!0}function vm(){if(ze!==null){if(et===0)var a=ze.return;else a=ze,Pa=go=null,Rp(a),Es=null,Kl=0,a=ze;for(;a!==null;)IS(a.alternate,a),a=a.return;ze=null}}function Ns(a,o){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,Sj(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),vm(),ut=a,ze=c=Aa(a.current,null),qe=o,et=0,Zn=null,gi=!1,Os=kr(a,o),dm=!1,Ts=xr=fm=Ao=yi=Ot=0,Bn=nc=null,hm=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var y=31-yn(d),b=1<<y;o|=a[y],d&=~b}return Ma=o,Ru(),c}function a1(a,o){$e=null,L.H=ed,o===Bl||o===qu?(o=Sx(),et=3):o===vx?(o=Sx(),et=4):et=o===AS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Zn=o,ze===null&&(Ot=1,id(a,mr(o,a.current)))}function i1(){var a=L.H;return L.H=ed,a===null?ed:a}function o1(){var a=L.A;return L.A=tj,a}function bm(){Ot=4,gi||(qe&4194048)!==qe&&br.current!==null||(Os=!0),(yi&134217727)===0&&(Ao&134217727)===0||ut===null||xi(ut,qe,xr,!1)}function xm(a,o,c){var d=Je;Je|=2;var y=i1(),b=o1();(ut!==a||qe!==o)&&(fd=null,Ns(a,o)),o=!1;var w=Ot;e:do try{if(et!==0&&ze!==null){var _=ze,I=Zn;switch(et){case 8:vm(),w=6;break e;case 3:case 2:case 9:case 6:br.current===null&&(o=!0);var Y=et;if(et=0,Zn=null,js(a,_,I,Y),c&&Os){w=0;break e}break;default:Y=et,et=0,Zn=null,js(a,_,I,Y)}}aj(),w=Ot;break}catch(re){a1(a,re)}while(!0);return o&&a.shellSuspendCounter++,Pa=go=null,Je=d,L.H=y,L.A=b,ze===null&&(ut=null,qe=0,Ru()),w}function aj(){for(;ze!==null;)s1(ze)}function ij(a,o){var c=Je;Je|=2;var d=i1(),y=o1();ut!==a||qe!==o?(fd=null,dd=ft()+500,Ns(a,o)):Os=kr(a,o);e:do try{if(et!==0&&ze!==null){o=ze;var b=Zn;t:switch(et){case 1:et=0,Zn=null,js(a,o,b,1);break;case 2:case 9:if(bx(b)){et=0,Zn=null,l1(o);break}o=function(){et!==2&&et!==9||ut!==a||(et=7),oa(a)},b.then(o,o);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:bx(b)?(et=0,Zn=null,l1(o)):(et=0,Zn=null,js(a,o,b,7));break;case 5:var w=null;switch(ze.tag){case 26:w=ze.memoizedState;case 5:case 27:var _=ze;if(!w||H1(w)){et=0,Zn=null;var I=_.sibling;if(I!==null)ze=I;else{var Y=_.return;Y!==null?(ze=Y,pd(Y)):ze=null}break t}}et=0,Zn=null,js(a,o,b,5);break;case 6:et=0,Zn=null,js(a,o,b,6);break;case 8:vm(),Ot=6;break e;default:throw Error(r(462))}}oj();break}catch(re){a1(a,re)}while(!0);return Pa=go=null,L.H=d,L.A=y,Je=c,ze!==null?0:(ut=null,qe=0,Ru(),Ot)}function oj(){for(;ze!==null&&!Pt();)s1(ze)}function s1(a){var o=kS(a.alternate,a,Ma);a.memoizedProps=a.pendingProps,o===null?pd(a):ze=o}function l1(a){var o=a,c=o.alternate;switch(o.tag){case 15:case 0:o=TS(c,o,o.pendingProps,o.type,void 0,qe);break;case 11:o=TS(c,o,o.pendingProps,o.type.render,o.ref,qe);break;case 5:Rp(o);default:IS(c,o),o=ze=cx(o,Ma),o=kS(c,o,Ma)}a.memoizedProps=a.pendingProps,o===null?pd(a):ze=o}function js(a,o,c,d){Pa=go=null,Rp(o),Es=null,Kl=0;var y=o.return;try{if(XN(a,y,o,c,qe)){Ot=1,id(a,mr(c,a.current)),ze=null;return}}catch(b){if(y!==null)throw ze=y,b;Ot=1,id(a,mr(c,a.current)),ze=null;return}o.flags&32768?(Ze||d===1?a=!0:Os||(qe&536870912)!==0?a=!1:(gi=a=!0,(d===2||d===9||d===3||d===6)&&(d=br.current,d!==null&&d.tag===13&&(d.flags|=16384))),c1(o,a)):pd(o)}function pd(a){var o=a;do{if((o.flags&32768)!==0){c1(o,gi);return}a=o.return;var c=QN(o.alternate,o,Ma);if(c!==null){ze=c;return}if(o=o.sibling,o!==null){ze=o;return}ze=o=a}while(o!==null);Ot===0&&(Ot=5)}function c1(a,o){do{var c=ZN(a.alternate,a);if(c!==null){c.flags&=32767,ze=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(a=a.sibling,a!==null)){ze=a;return}ze=a=c}while(a!==null);Ot=6,ze=null}function u1(a,o,c,d,y,b,w,_,I){a.cancelPendingCommit=null;do md();while(fn!==0);if((Je&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(b=o.lanes|o.childLanes,b|=up,yl(a,c,b,w,_,I),a===ut&&(ze=ut=null,qe=0),_s=o,bi=a,Ds=c,mm=b,gm=y,e1=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,uj(qi,function(){return m1(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=L.T,L.T=null,y=ee.p,ee.p=2,w=Je,Je|=4;try{JN(a,o,c)}finally{Je=w,ee.p=y,L.T=d}}fn=1,d1(),f1(),h1()}}function d1(){if(fn===1){fn=0;var a=bi,o=_s,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=L.T,L.T=null;var d=ee.p;ee.p=2;var y=Je;Je|=4;try{VS(o,a);var b=jm,w=Jb(a.containerInfo),_=b.focusedElem,I=b.selectionRange;if(w!==_&&_&&_.ownerDocument&&Zb(_.ownerDocument.documentElement,_)){if(I!==null&&ip(_)){var Y=I.start,re=I.end;if(re===void 0&&(re=Y),"selectionStart"in _)_.selectionStart=Y,_.selectionEnd=Math.min(re,_.value.length);else{var ce=_.ownerDocument||document,V=ce&&ce.defaultView||window;if(V.getSelection){var X=V.getSelection(),je=_.textContent.length,De=Math.min(I.start,je),ot=I.end===void 0?De:Math.min(I.end,je);!X.extend&&De>ot&&(w=ot,ot=De,De=w);var G=Qb(_,De),$=Qb(_,ot);if(G&&$&&(X.rangeCount!==1||X.anchorNode!==G.node||X.anchorOffset!==G.offset||X.focusNode!==$.node||X.focusOffset!==$.offset)){var H=ce.createRange();H.setStart(G.node,G.offset),X.removeAllRanges(),De>ot?(X.addRange(H),X.extend($.node,$.offset)):(H.setEnd($.node,$.offset),X.addRange(H))}}}}for(ce=[],X=_;X=X.parentNode;)X.nodeType===1&&ce.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ce.length;_++){var se=ce[_];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Od=!!Nm,jm=Nm=null}finally{Je=y,ee.p=d,L.T=c}}a.current=o,fn=2}}function f1(){if(fn===2){fn=0;var a=bi,o=_s,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=L.T,L.T=null;var d=ee.p;ee.p=2;var y=Je;Je|=4;try{HS(a,o.alternate,o)}finally{Je=y,ee.p=d,L.T=c}}fn=3}}function h1(){if(fn===4||fn===3){fn=0,kt();var a=bi,o=_s,c=Ds,d=e1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?fn=5:(fn=0,_s=bi=null,p1(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(vi=null),Ja(c),o=o.stateNode,On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Yi,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=L.T,y=ee.p,ee.p=2,L.T=null;try{for(var b=a.onRecoverableError,w=0;w<d.length;w++){var _=d[w];b(_.value,{componentStack:_.stack})}}finally{L.T=o,ee.p=y}}(Ds&3)!==0&&md(),oa(a),y=a.pendingLanes,(c&4194090)!==0&&(y&42)!==0?a===ym?rc++:(rc=0,ym=a):rc=0,ac(0)}}function p1(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Ll(o)))}function md(a){return d1(),f1(),h1(),m1()}function m1(){if(fn!==5)return!1;var a=bi,o=mm;mm=0;var c=Ja(Ds),d=L.T,y=ee.p;try{ee.p=32>c?32:c,L.T=null,c=gm,gm=null;var b=bi,w=Ds;if(fn=0,_s=bi=null,Ds=0,(Je&6)!==0)throw Error(r(331));var _=Je;if(Je|=4,ZS(b.current),XS(b,b.current,w,c),Je=_,ac(0,!1),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Yi,b)}catch{}return!0}finally{ee.p=y,L.T=d,p1(a,o)}}function g1(a,o,c){o=mr(c,o),o=Xp(a.stateNode,o,2),a=ci(a,o,2),a!==null&&(Za(a,2),oa(a))}function lt(a,o,c){if(a.tag===3)g1(a,a,c);else for(;o!==null;){if(o.tag===3){g1(o,a,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(vi===null||!vi.has(d))){a=mr(c,a),c=xS(2),d=ci(o,c,2),d!==null&&(SS(c,d,o,a),Za(d,2),oa(d));break}}o=o.return}}function Sm(a,o,c){var d=a.pingCache;if(d===null){d=a.pingCache=new nj;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(c)||(dm=!0,y.add(c),a=sj.bind(null,a,o,c),o.then(a,a))}function sj(a,o,c){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,ut===a&&(qe&c)===c&&(Ot===4||Ot===3&&(qe&62914560)===qe&&300>ft()-pm?(Je&2)===0&&Ns(a,0):fm|=c,Ts===qe&&(Ts=0)),oa(a)}function y1(a,o){o===0&&(o=gl()),a=hs(a,o),a!==null&&(Za(a,o),oa(a))}function lj(a){var o=a.memoizedState,c=0;o!==null&&(c=o.retryLane),y1(a,c)}function cj(a,o){var c=0;switch(a.tag){case 13:var d=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),y1(a,c)}function uj(a,o){return rt(a,o)}var gd=null,Ms=null,Am=!1,yd=!1,Em=!1,Eo=0;function oa(a){a!==Ms&&a.next===null&&(Ms===null?gd=Ms=a:Ms=Ms.next=a),yd=!0,Am||(Am=!0,fj())}function ac(a,o){if(!Em&&yd){Em=!0;do for(var c=!1,d=gd;d!==null;){if(a!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var w=d.suspendedLanes,_=d.pingedLanes;b=(1<<31-yn(42|a)+1)-1,b&=y&~(w&~_),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,S1(d,b))}else b=qe,b=Fi(d,d===ut?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||kr(d,b)||(c=!0,S1(d,b));d=d.next}while(c);Em=!1}}function dj(){v1()}function v1(){yd=Am=!1;var a=0;Eo!==0&&(xj()&&(a=Eo),Eo=0);for(var o=ft(),c=null,d=gd;d!==null;){var y=d.next,b=b1(d,o);b===0?(d.next=null,c===null?gd=y:c.next=y,y===null&&(Ms=c)):(c=d,(a!==0||(b&3)!==0)&&(yd=!0)),d=y}ac(a)}function b1(a,o){for(var c=a.suspendedLanes,d=a.pingedLanes,y=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var w=31-yn(b),_=1<<w,I=y[w];I===-1?((_&c)===0||(_&d)!==0)&&(y[w]=pa(_,o)):I<=o&&(a.expiredLanes|=_),b&=~_}if(o=ut,c=qe,c=Fi(a,a===o?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,c===0||a===o&&(et===2||et===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Le(d),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||kr(a,c)){if(o=c&-c,o===a.callbackPriority)return o;switch(d!==null&&Le(d),Ja(c)){case 2:case 8:c=Xo;break;case 32:c=qi;break;case 268435456:c=Tt;break;default:c=qi}return d=x1.bind(null,a),c=rt(c,d),a.callbackPriority=o,a.callbackNode=c,o}return d!==null&&d!==null&&Le(d),a.callbackPriority=2,a.callbackNode=null,2}function x1(a,o){if(fn!==0&&fn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(md()&&a.callbackNode!==c)return null;var d=qe;return d=Fi(a,a===ut?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(n1(a,d,o),b1(a,ft()),a.callbackNode!=null&&a.callbackNode===c?x1.bind(null,a):null)}function S1(a,o){if(md())return null;n1(a,o,!0)}function fj(){Aj(function(){(Je&6)!==0?rt(ha,dj):v1()})}function Cm(){return Eo===0&&(Eo=Jo()),Eo}function A1(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:$r(""+a)}function E1(a,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,a.id&&c.setAttribute("form",a.id),o.parentNode.insertBefore(c,o),a=new FormData(a),c.parentNode.removeChild(c),a}function hj(a,o,c,d,y){if(o==="submit"&&c&&c.stateNode===y){var b=A1((y[He]||null).action),w=d.submitter;w&&(o=(o=w[He]||null)?A1(o.formAction):w.getAttribute("formAction"),o!==null&&(b=o,w=null));var _=new Re("action","action",null,d,y);a.push({event:_,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Eo!==0){var I=w?E1(y,w):new FormData(y);qp(c,{pending:!0,data:I,method:y.method,action:b},null,I)}}else typeof b=="function"&&(_.preventDefault(),I=w?E1(y,w):new FormData(y),qp(c,{pending:!0,data:I,method:y.method,action:b},b,I))},currentTarget:y}]})}}for(var Pm=0;Pm<cp.length;Pm++){var wm=cp[Pm],pj=wm.toLowerCase(),mj=wm[0].toUpperCase()+wm.slice(1);Br(pj,"on"+mj)}Br(nx,"onAnimationEnd"),Br(rx,"onAnimationIteration"),Br(ax,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(jN,"onTransitionRun"),Br(MN,"onTransitionStart"),Br(kN,"onTransitionCancel"),Br(ix,"onTransitionEnd"),We("onMouseEnter",["mouseout","mouseover"]),We("onMouseLeave",["mouseout","mouseover"]),We("onPointerEnter",["pointerout","pointerover"]),We("onPointerLeave",["pointerout","pointerover"]),dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ic));function C1(a,o){o=(o&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],y=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var w=d.length-1;0<=w;w--){var _=d[w],I=_.instance,Y=_.currentTarget;if(_=_.listener,I!==b&&y.isPropagationStopped())break e;b=_,y.currentTarget=Y;try{b(y)}catch(re){ad(re)}y.currentTarget=null,b=I}else for(w=0;w<d.length;w++){if(_=d[w],I=_.instance,Y=_.currentTarget,_=_.listener,I!==b&&y.isPropagationStopped())break e;b=_,y.currentTarget=Y;try{b(y)}catch(re){ad(re)}y.currentTarget=null,b=I}}}}function Ge(a,o){var c=o[ga];c===void 0&&(c=o[ga]=new Set);var d=a+"__bubble";c.has(d)||(P1(o,a,2,!1),c.add(d))}function Om(a,o,c){var d=0;o&&(d|=4),P1(c,a,d,o)}var vd="_reactListening"+Math.random().toString(36).slice(2);function Tm(a){if(!a[vd]){a[vd]=!0,Ir.forEach(function(c){c!=="selectionchange"&&(gj.has(c)||Om(c,!1,a),Om(c,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[vd]||(o[vd]=!0,Om("selectionchange",!1,o))}}function P1(a,o,c,d){switch(X1(o)){case 2:var y=Hj;break;case 8:y=qj;break;default:y=Gm}c=y.bind(null,o,c,a),y=void 0,!Dn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?a.addEventListener(o,c,{capture:!0,passive:y}):a.addEventListener(o,c,!0):y!==void 0?a.addEventListener(o,c,{passive:y}):a.addEventListener(o,c,!1)}function _m(a,o,c,d,y){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var _=d.stateNode.containerInfo;if(_===y)break;if(w===4)for(w=d.return;w!==null;){var I=w.tag;if((I===3||I===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;_!==null;){if(w=Rt(_),w===null)return;if(I=w.tag,I===5||I===6||I===26||I===27){d=b=w;continue e}_=_.parentNode}}d=d.return}xu(function(){var Y=b,re=eo(c),ce=[];e:{var V=ox.get(a);if(V!==void 0){var X=Re,je=a;switch(a){case"keypress":if(wl(c)===0)break e;case"keydown":case"keyup":X=Kh;break;case"focusin":je="focus",X=Ht;break;case"focusout":je="blur",X=Ht;break;case"beforeblur":case"afterblur":X=Ht;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Uh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Ou;break;case nx:case rx:case ax:X=Eu;break;case ix:X=Zh;break;case"scroll":case"scrollend":X=ro;break;case"wheel":X=ep;break;case"copy":case"cut":case"paste":X=Cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=wu;break;case"toggle":case"beforetoggle":X=Tu}var De=(o&4)!==0,ot=!De&&(a==="scroll"||a==="scrollend"),G=De?V!==null?V+"Capture":null:V;De=[];for(var $=Y,H;$!==null;){var se=$;if(H=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||H===null||G===null||(se=os($,G),se!=null&&De.push(oc($,se,H))),ot)break;$=$.return}0<De.length&&(V=new X(V,je,null,c,re),ce.push({event:V,listeners:De}))}}if((o&7)===0){e:{if(V=a==="mouseover"||a==="pointerover",X=a==="mouseout"||a==="pointerout",V&&c!==Cl&&(je=c.relatedTarget||c.fromElement)&&(Rt(je)||je[Tn]))break e;if((X||V)&&(V=re.window===re?re:(V=re.ownerDocument)?V.defaultView||V.parentWindow:window,X?(je=c.relatedTarget||c.toElement,X=Y,je=je?Rt(je):null,je!==null&&(ot=s(je),De=je.tag,je!==ot||De!==5&&De!==27&&De!==6)&&(je=null)):(X=null,je=Y),X!==je)){if(De=Ol,se="onMouseLeave",G="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(De=wu,se="onPointerLeave",G="onPointerEnter",$="pointer"),ot=X==null?V:Yn(X),H=je==null?V:Yn(je),V=new De(se,$+"leave",X,c,re),V.target=ot,V.relatedTarget=H,se=null,Rt(re)===Y&&(De=new De(G,$+"enter",je,c,re),De.target=H,De.relatedTarget=ot,se=De),ot=se,X&&je)t:{for(De=X,G=je,$=0,H=De;H;H=ks(H))$++;for(H=0,se=G;se;se=ks(se))H++;for(;0<$-H;)De=ks(De),$--;for(;0<H-$;)G=ks(G),H--;for(;$--;){if(De===G||G!==null&&De===G.alternate)break t;De=ks(De),G=ks(G)}De=null}else De=null;X!==null&&w1(ce,V,X,De,!1),je!==null&&ot!==null&&w1(ce,ot,je,De,!0)}}e:{if(V=Y?Yn(Y):window,X=V.nodeName&&V.nodeName.toLowerCase(),X==="select"||X==="input"&&V.type==="file")var Ee=It;else if(Te(V))if(In)Ee=Dl;else{Ee=so;var Ue=ku}else X=V.nodeName,!X||X.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?Y&&Qr(Y.elementType)&&(Ee=It):Ee=ap;if(Ee&&(Ee=Ee(a,Y))){Me(ce,Ee,c,re);break e}Ue&&Ue(a,V,Y),a==="focusout"&&Y&&V.type==="number"&&Y.memoizedProps.value!=null&&yu(V,"number",V.value)}switch(Ue=Y?Yn(Y):window,a){case"focusin":(Te(Ue)||Ue.contentEditable==="true")&&(us=Ue,op=Y,jl=null);break;case"focusout":jl=op=us=null;break;case"mousedown":sp=!0;break;case"contextmenu":case"mouseup":case"dragend":sp=!1,ex(ce,c,re);break;case"selectionchange":if(NN)break;case"keydown":case"keyup":ex(ce,c,re)}var Oe;if(_l)e:{switch(a){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Q?ju(a,c)&&(Ne="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(Ne="onCompositionStart");Ne&&(_u&&c.locale!=="ko"&&(Q||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Q&&(Oe=Bh()):(Jr=re,no="value"in Jr?Jr.value:Jr.textContent,Q=!0)),Ue=bd(Y,Ne),0<Ue.length&&(Ne=new Pu(Ne,a,null,c,re),ce.push({event:Ne,listeners:Ue}),Oe?Ne.data=Oe:(Oe=B(c),Oe!==null&&(Ne.data=Oe)))),(Oe=rp?ge(a,c):fe(a,c))&&(Ne=bd(Y,"onBeforeInput"),0<Ne.length&&(Ue=new Pu("onBeforeInput","beforeinput",null,c,re),ce.push({event:Ue,listeners:Ne}),Ue.data=Oe)),hj(ce,a,Y,c,re)}C1(ce,o)})}function oc(a,o,c){return{instance:a,listener:o,currentTarget:c}}function bd(a,o){for(var c=o+"Capture",d=[];a!==null;){var y=a,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=os(a,c),y!=null&&d.unshift(oc(a,y,b)),y=os(a,o),y!=null&&d.push(oc(a,y,b))),a.tag===3)return d;a=a.return}return[]}function ks(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function w1(a,o,c,d,y){for(var b=o._reactName,w=[];c!==null&&c!==d;){var _=c,I=_.alternate,Y=_.stateNode;if(_=_.tag,I!==null&&I===d)break;_!==5&&_!==26&&_!==27||Y===null||(I=Y,y?(Y=os(c,b),Y!=null&&w.unshift(oc(c,Y,I))):y||(Y=os(c,b),Y!=null&&w.push(oc(c,Y,I)))),c=c.return}w.length!==0&&a.push({event:o,listeners:w})}var yj=/\r\n?/g,vj=/\u0000|\uFFFD/g;function O1(a){return(typeof a=="string"?a:""+a).replace(yj,`
`).replace(vj,"")}function T1(a,o){return o=O1(o),O1(a)===o}function xd(){}function it(a,o,c,d,y,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Zi(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Zi(a,""+d);break;case"className":ns(a,"class",d);break;case"tabIndex":ns(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ns(a,c,d);break;case"style":Ji(a,d,b);break;case"data":if(o!=="object"){ns(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){a.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=$r(""+d),a.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&it(a,o,"name",y.name,y,null),it(a,o,"formEncType",y.formEncType,y,null),it(a,o,"formMethod",y.formMethod,y,null),it(a,o,"formTarget",y.formTarget,y,null)):(it(a,o,"encType",y.encType,y,null),it(a,o,"method",y.method,y,null),it(a,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(c);break}d=$r(""+d),a.setAttribute(c,d);break;case"onClick":d!=null&&(a.onclick=xd);break;case"onScroll":d!=null&&Ge("scroll",a);break;case"onScrollEnd":d!=null&&Ge("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}c=$r(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""+d):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":d===!0?a.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(c,d):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(c,d):a.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(c):a.setAttribute(c,d);break;case"popover":Ge("beforetoggle",a),Ge("toggle",a),Vi(a,"popover",d);break;case"xlinkActuate":fr(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":fr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":fr(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":fr(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":fr(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":fr(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":fr(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":fr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":fr(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Vi(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=bu.get(c)||c,Vi(a,c,d))}}function Dm(a,o,c,d,y,b){switch(c){case"style":Ji(a,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof d=="string"?Zi(a,d):(typeof d=="number"||typeof d=="bigint")&&Zi(a,""+d);break;case"onScroll":d!=null&&Ge("scroll",a);break;case"onScrollEnd":d!=null&&Ge("scrollend",a);break;case"onClick":d!=null&&(a.onclick=xd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ti.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),b=a[He]||null,b=b!=null?b[c]:null,typeof b=="function"&&a.removeEventListener(o,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(o,d,y);break e}c in a?a[c]=d:d===!0?a.setAttribute(c,""):Vi(a,c,d)}}}function hn(a,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",a),Ge("load",a);var d=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var w=c[b];if(w!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:it(a,o,b,w,c,null)}}y&&it(a,o,"srcSet",c.srcSet,c,null),d&&it(a,o,"src",c.src,c,null);return;case"input":Ge("invalid",a);var _=b=w=y=null,I=null,Y=null;for(d in c)if(c.hasOwnProperty(d)){var re=c[d];if(re!=null)switch(d){case"name":y=re;break;case"type":w=re;break;case"checked":I=re;break;case"defaultChecked":Y=re;break;case"value":b=re;break;case"defaultValue":_=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,o));break;default:it(a,o,d,re,c,null)}}Ih(a,b,_,I,Y,w,y,!1),Xi(a);return;case"select":Ge("invalid",a),d=w=b=null;for(y in c)if(c.hasOwnProperty(y)&&(_=c[y],_!=null))switch(y){case"value":b=_;break;case"defaultValue":w=_;break;case"multiple":d=_;default:it(a,o,y,_,c,null)}o=b,c=w,a.multiple=!!d,o!=null?Qi(a,!!d,o,!1):c!=null&&Qi(a,!!d,c,!0);return;case"textarea":Ge("invalid",a),b=y=d=null;for(w in c)if(c.hasOwnProperty(w)&&(_=c[w],_!=null))switch(w){case"value":d=_;break;case"defaultValue":y=_;break;case"children":b=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:it(a,o,w,_,c,null)}Lh(a,d,y,b),Xi(a);return;case"option":for(I in c)if(c.hasOwnProperty(I)&&(d=c[I],d!=null))switch(I){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:it(a,o,I,d,c,null)}return;case"dialog":Ge("beforetoggle",a),Ge("toggle",a),Ge("cancel",a),Ge("close",a);break;case"iframe":case"object":Ge("load",a);break;case"video":case"audio":for(d=0;d<ic.length;d++)Ge(ic[d],a);break;case"image":Ge("error",a),Ge("load",a);break;case"details":Ge("toggle",a);break;case"embed":case"source":case"link":Ge("error",a),Ge("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in c)if(c.hasOwnProperty(Y)&&(d=c[Y],d!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:it(a,o,Y,d,c,null)}return;default:if(Qr(o)){for(re in c)c.hasOwnProperty(re)&&(d=c[re],d!==void 0&&Dm(a,o,re,d,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(d=c[_],d!=null&&it(a,o,_,d,c,null))}function bj(a,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,w=null,_=null,I=null,Y=null,re=null;for(X in c){var ce=c[X];if(c.hasOwnProperty(X)&&ce!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":I=ce;default:d.hasOwnProperty(X)||it(a,o,X,null,d,ce)}}for(var V in d){var X=d[V];if(ce=c[V],d.hasOwnProperty(V)&&(X!=null||ce!=null))switch(V){case"type":b=X;break;case"name":y=X;break;case"checked":Y=X;break;case"defaultChecked":re=X;break;case"value":w=X;break;case"defaultValue":_=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,o));break;default:X!==ce&&it(a,o,V,X,d,ce)}}Al(a,w,_,I,Y,re,b,y);return;case"select":X=w=_=V=null;for(b in c)if(I=c[b],c.hasOwnProperty(b)&&I!=null)switch(b){case"value":break;case"multiple":X=I;default:d.hasOwnProperty(b)||it(a,o,b,null,d,I)}for(y in d)if(b=d[y],I=c[y],d.hasOwnProperty(y)&&(b!=null||I!=null))switch(y){case"value":V=b;break;case"defaultValue":_=b;break;case"multiple":w=b;default:b!==I&&it(a,o,y,b,d,I)}o=_,c=w,d=X,V!=null?Qi(a,!!c,V,!1):!!d!=!!c&&(o!=null?Qi(a,!!c,o,!0):Qi(a,!!c,c?[]:"",!1));return;case"textarea":X=V=null;for(_ in c)if(y=c[_],c.hasOwnProperty(_)&&y!=null&&!d.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:it(a,o,_,null,d,y)}for(w in d)if(y=d[w],b=c[w],d.hasOwnProperty(w)&&(y!=null||b!=null))switch(w){case"value":V=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&it(a,o,w,y,d,b)}vu(a,V,X);return;case"option":for(var je in c)if(V=c[je],c.hasOwnProperty(je)&&V!=null&&!d.hasOwnProperty(je))switch(je){case"selected":a.selected=!1;break;default:it(a,o,je,null,d,V)}for(I in d)if(V=d[I],X=c[I],d.hasOwnProperty(I)&&V!==X&&(V!=null||X!=null))switch(I){case"selected":a.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:it(a,o,I,V,d,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in c)V=c[De],c.hasOwnProperty(De)&&V!=null&&!d.hasOwnProperty(De)&&it(a,o,De,null,d,V);for(Y in d)if(V=d[Y],X=c[Y],d.hasOwnProperty(Y)&&V!==X&&(V!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,o));break;default:it(a,o,Y,V,d,X)}return;default:if(Qr(o)){for(var ot in c)V=c[ot],c.hasOwnProperty(ot)&&V!==void 0&&!d.hasOwnProperty(ot)&&Dm(a,o,ot,void 0,d,V);for(re in d)V=d[re],X=c[re],!d.hasOwnProperty(re)||V===X||V===void 0&&X===void 0||Dm(a,o,re,V,d,X);return}}for(var G in c)V=c[G],c.hasOwnProperty(G)&&V!=null&&!d.hasOwnProperty(G)&&it(a,o,G,null,d,V);for(ce in d)V=d[ce],X=c[ce],!d.hasOwnProperty(ce)||V===X||V==null&&X==null||it(a,o,ce,V,d,X)}var Nm=null,jm=null;function Sd(a){return a.nodeType===9?a:a.ownerDocument}function _1(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D1(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Mm(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var km=null;function xj(){var a=window.event;return a&&a.type==="popstate"?a===km?!1:(km=a,!0):(km=null,!1)}var N1=typeof setTimeout=="function"?setTimeout:void 0,Sj=typeof clearTimeout=="function"?clearTimeout:void 0,j1=typeof Promise=="function"?Promise:void 0,Aj=typeof queueMicrotask=="function"?queueMicrotask:typeof j1<"u"?function(a){return j1.resolve(null).then(a).catch(Ej)}:N1;function Ej(a){setTimeout(function(){throw a})}function Si(a){return a==="head"}function M1(a,o){var c=o,d=0,y=0;do{var b=c.nextSibling;if(a.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<d&&8>d){c=d;var w=a.ownerDocument;if(c&1&&sc(w.documentElement),c&2&&sc(w.body),c&4)for(c=w.head,sc(c),w=c.firstChild;w;){var _=w.nextSibling,I=w.nodeName;w[Rr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=_}}if(y===0){a.removeChild(b),mc(o);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:d=c.charCodeAt(0)-48;else d=0;c=b}while(c);mc(o)}function Rm(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Rm(c),Xr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function Cj(a,o,c,d){for(;a.nodeType===1;){var y=c;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Rr])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=zr(a.nextSibling),a===null)break}return null}function Pj(a,o,c){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=zr(a.nextSibling),a===null))return null;return a}function Im(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function wj(a,o){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function zr(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var Lm=null;function k1(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return a;o--}else c==="/$"&&o++}a=a.previousSibling}return null}function R1(a,o,c){switch(o=Sd(c),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function sc(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Xr(a)}var Sr=new Map,I1=new Set;function Ad(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ka=ee.d;ee.d={f:Oj,r:Tj,D:_j,C:Dj,L:Nj,m:jj,X:kj,S:Mj,M:Rj};function Oj(){var a=ka.f(),o=hd();return a||o}function Tj(a){var o=_n(a);o!==null&&o.tag===5&&o.type==="form"?nS(o):ka.r(a)}var Rs=typeof document>"u"?null:document;function L1(a,o,c){var d=Rs;if(d&&typeof o=="string"&&o){var y=Fn(o);y='link[rel="'+a+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),I1.has(y)||(I1.add(y),a={rel:a,crossOrigin:c,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),hn(o,"link",a),At(o),d.head.appendChild(o)))}}function _j(a){ka.D(a),L1("dns-prefetch",a,null)}function Dj(a,o){ka.C(a,o),L1("preconnect",a,o)}function Nj(a,o,c){ka.L(a,o,c);var d=Rs;if(d&&a&&o){var y='link[rel="preload"][as="'+Fn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Fn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Fn(c.imageSizes)+'"]')):y+='[href="'+Fn(a)+'"]';var b=y;switch(o){case"style":b=Is(a);break;case"script":b=Ls(a)}Sr.has(b)||(a=p({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:a,as:o},c),Sr.set(b,a),d.querySelector(y)!==null||o==="style"&&d.querySelector(lc(b))||o==="script"&&d.querySelector(cc(b))||(o=d.createElement("link"),hn(o,"link",a),At(o),d.head.appendChild(o)))}}function jj(a,o){ka.m(a,o);var c=Rs;if(c&&a){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Fn(d)+'"][href="'+Fn(a)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ls(a)}if(!Sr.has(b)&&(a=p({rel:"modulepreload",href:a},o),Sr.set(b,a),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(cc(b)))return}d=c.createElement("link"),hn(d,"link",a),At(d),c.head.appendChild(d)}}}function Mj(a,o,c){ka.S(a,o,c);var d=Rs;if(d&&a){var y=Wr(d).hoistableStyles,b=Is(a);o=o||"default";var w=y.get(b);if(!w){var _={loading:0,preload:null};if(w=d.querySelector(lc(b)))_.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},c),(c=Sr.get(b))&&$m(a,c);var I=w=d.createElement("link");At(I),hn(I,"link",a),I._p=new Promise(function(Y,re){I.onload=Y,I.onerror=re}),I.addEventListener("load",function(){_.loading|=1}),I.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Ed(w,o,d)}w={type:"stylesheet",instance:w,count:1,state:_},y.set(b,w)}}}function kj(a,o){ka.X(a,o);var c=Rs;if(c&&a){var d=Wr(c).hoistableScripts,y=Ls(a),b=d.get(y);b||(b=c.querySelector(cc(y)),b||(a=p({src:a,async:!0},o),(o=Sr.get(y))&&Bm(a,o),b=c.createElement("script"),At(b),hn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function Rj(a,o){ka.M(a,o);var c=Rs;if(c&&a){var d=Wr(c).hoistableScripts,y=Ls(a),b=d.get(y);b||(b=c.querySelector(cc(y)),b||(a=p({src:a,async:!0,type:"module"},o),(o=Sr.get(y))&&Bm(a,o),b=c.createElement("script"),At(b),hn(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function $1(a,o,c,d){var y=(y=ae.current)?Ad(y):null;if(!y)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Is(c.href),c=Wr(y).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=Is(c.href);var b=Wr(y).hoistableStyles,w=b.get(a);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,w),(b=y.querySelector(lc(a)))&&!b._p&&(w.instance=b,w.state.loading=5),Sr.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Sr.set(a,c),b||Ij(y,a,c,w.state))),o&&d===null)throw Error(r(528,""));return w}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ls(c),c=Wr(y).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Is(a){return'href="'+Fn(a)+'"'}function lc(a){return'link[rel="stylesheet"]['+a+"]"}function B1(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function Ij(a,o,c,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),hn(o,"link",c),At(o),a.head.appendChild(o))}function Ls(a){return'[src="'+Fn(a)+'"]'}function cc(a){return"script[async]"+a}function U1(a,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+Fn(c.href)+'"]');if(d)return o.instance=d,At(d),d;var y=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),At(d),hn(d,"style",y),Ed(d,c.precedence,a),o.instance=d;case"stylesheet":y=Is(c.href);var b=a.querySelector(lc(y));if(b)return o.state.loading|=4,o.instance=b,At(b),b;d=B1(c),(y=Sr.get(y))&&$m(d,y),b=(a.ownerDocument||a).createElement("link"),At(b);var w=b;return w._p=new Promise(function(_,I){w.onload=_,w.onerror=I}),hn(b,"link",d),o.state.loading|=4,Ed(b,c.precedence,a),o.instance=b;case"script":return b=Ls(c.src),(y=a.querySelector(cc(b)))?(o.instance=y,At(y),y):(d=c,(y=Sr.get(b))&&(d=p({},c),Bm(d,y)),a=a.ownerDocument||a,y=a.createElement("script"),At(y),hn(y,"link",d),a.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Ed(d,c.precedence,a));return o.instance}function Ed(a,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,w=0;w<d.length;w++){var _=d[w];if(_.dataset.precedence===o)b=_;else if(b!==y)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(a,o.firstChild))}function $m(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Bm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Cd=null;function z1(a,o,c){if(Cd===null){var d=new Map,y=Cd=new Map;y.set(c,d)}else y=Cd,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(a))return d;for(d.set(a,null),c=c.getElementsByTagName(a),y=0;y<c.length;y++){var b=c[y];if(!(b[Rr]||b[sn]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var w=b.getAttribute(o)||"";w=a+w;var _=d.get(w);_?_.push(b):d.set(w,[b])}}return d}function G1(a,o,c){a=a.ownerDocument||a,a.head.insertBefore(c,o==="title"?a.querySelector("head > title"):null)}function Lj(a,o,c){if(c===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function H1(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var uc=null;function $j(){}function Bj(a,o,c){if(uc===null)throw Error(r(475));var d=uc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=Is(c.href),b=a.querySelector(lc(y));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(d.count++,d=Pd.bind(d),a.then(d,d)),o.state.loading|=4,o.instance=b,At(b);return}b=a.ownerDocument||a,c=B1(c),(y=Sr.get(y))&&$m(c,y),b=b.createElement("link"),At(b);var w=b;w._p=new Promise(function(_,I){w.onload=_,w.onerror=I}),hn(b,"link",c),o.instance=b}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=Pd.bind(d),a.addEventListener("load",o),a.addEventListener("error",o))}}function Uj(){if(uc===null)throw Error(r(475));var a=uc;return a.stylesheets&&a.count===0&&Um(a,a.stylesheets),0<a.count?function(o){var c=setTimeout(function(){if(a.stylesheets&&Um(a,a.stylesheets),a.unsuspend){var d=a.unsuspend;a.unsuspend=null,d()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(c)}}:null}function Pd(){if(this.count--,this.count===0){if(this.stylesheets)Um(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var wd=null;function Um(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,wd=new Map,o.forEach(zj,a),wd=null,Pd.call(a))}function zj(a,o){if(!(o.state.loading&4)){var c=wd.get(a);if(c)var d=c.get(null);else{c=new Map,wd.set(a,c);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var w=y[b];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}y=o.instance,w=y.getAttribute("data-precedence"),b=c.get(w)||d,b===d&&c.set(null,y),c.set(w,y),this.count++,d=Pd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),o.state.loading|=4}}var dc={$$typeof:T,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function Gj(a,o,c,d,y,b,w,_){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=es(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=es(0),this.hiddenUpdates=es(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function q1(a,o,c,d,y,b,w,_,I,Y,re,ce){return a=new Gj(a,o,c,w,_,I,Y,ce),o=1,b===!0&&(o|=24),b=Xn(3,null,null,o),a.current=b,b.stateNode=a,o=Sp(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},Pp(b),a}function Y1(a){return a?(a=ps,a):ps}function F1(a,o,c,d,y,b){y=Y1(y),d.context===null?d.context=y:d.pendingContext=y,d=li(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=ci(a,d,o),c!==null&&(er(c,a,o),zl(c,a,o))}function V1(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<o?c:o}}function zm(a,o){V1(a,o),(a=a.alternate)&&V1(a,o)}function K1(a){if(a.tag===13){var o=hs(a,67108864);o!==null&&er(o,a,67108864),zm(a,67108864)}}var Od=!0;function Hj(a,o,c,d){var y=L.T;L.T=null;var b=ee.p;try{ee.p=2,Gm(a,o,c,d)}finally{ee.p=b,L.T=y}}function qj(a,o,c,d){var y=L.T;L.T=null;var b=ee.p;try{ee.p=8,Gm(a,o,c,d)}finally{ee.p=b,L.T=y}}function Gm(a,o,c,d){if(Od){var y=Hm(d);if(y===null)_m(a,o,d,Td,c),W1(a,d);else if(Fj(y,a,o,c,d))d.stopPropagation();else if(W1(a,d),o&4&&-1<Yj.indexOf(a)){for(;y!==null;){var b=_n(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var w=Vr(b.pendingLanes);if(w!==0){var _=b;for(_.pendingLanes|=2,_.entangledLanes|=2;w;){var I=1<<31-yn(w);_.entanglements[1]|=I,w&=~I}oa(b),(Je&6)===0&&(dd=ft()+500,ac(0))}}break;case 13:_=hs(b,2),_!==null&&er(_,b,2),hd(),zm(b,2)}if(b=Hm(d),b===null&&_m(a,o,d,Td,c),b===y)break;y=b}y!==null&&d.stopPropagation()}else _m(a,o,d,null,c)}}function Hm(a){return a=eo(a),qm(a)}var Td=null;function qm(a){if(Td=null,a=Rt(a),a!==null){var o=s(a);if(o===null)a=null;else{var c=o.tag;if(c===13){if(a=l(o),a!==null)return a;a=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Td=a,null}function X1(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fr()){case ha:return 2;case Xo:return 8;case qi:case Fe:return 32;case Tt:return 268435456;default:return 32}default:return 32}}var Ym=!1,Ai=null,Ei=null,Ci=null,fc=new Map,hc=new Map,Pi=[],Yj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function W1(a,o){switch(a){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":Ei=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":fc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(o.pointerId)}}function pc(a,o,c,d,y,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},o!==null&&(o=_n(o),o!==null&&K1(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),a)}function Fj(a,o,c,d,y){switch(o){case"focusin":return Ai=pc(Ai,a,o,c,d,y),!0;case"dragenter":return Ei=pc(Ei,a,o,c,d,y),!0;case"mouseover":return Ci=pc(Ci,a,o,c,d,y),!0;case"pointerover":var b=y.pointerId;return fc.set(b,pc(fc.get(b)||null,a,o,c,d,y)),!0;case"gotpointercapture":return b=y.pointerId,hc.set(b,pc(hc.get(b)||null,a,o,c,d,y)),!0}return!1}function Q1(a){var o=Rt(a.target);if(o!==null){var c=s(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){a.blockedOn=o,pu(a.priority,function(){if(c.tag===13){var d=Jn();d=bl(d);var y=hs(c,d);y!==null&&er(y,c,d),zm(c,d)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function _d(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var c=Hm(a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);Cl=d,c.target.dispatchEvent(d),Cl=null}else return o=_n(c),o!==null&&K1(o),a.blockedOn=c,!1;o.shift()}return!0}function Z1(a,o,c){_d(a)&&c.delete(o)}function Vj(){Ym=!1,Ai!==null&&_d(Ai)&&(Ai=null),Ei!==null&&_d(Ei)&&(Ei=null),Ci!==null&&_d(Ci)&&(Ci=null),fc.forEach(Z1),hc.forEach(Z1)}function Dd(a,o){a.blockedOn===o&&(a.blockedOn=null,Ym||(Ym=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vj)))}var Nd=null;function J1(a){Nd!==a&&(Nd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Nd===a&&(Nd=null);for(var o=0;o<a.length;o+=3){var c=a[o],d=a[o+1],y=a[o+2];if(typeof d!="function"){if(qm(d||c)===null)continue;break}var b=_n(c);b!==null&&(a.splice(o,3),o-=3,qp(b,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function mc(a){function o(I){return Dd(I,a)}Ai!==null&&Dd(Ai,a),Ei!==null&&Dd(Ei,a),Ci!==null&&Dd(Ci,a),fc.forEach(o),hc.forEach(o);for(var c=0;c<Pi.length;c++){var d=Pi[c];d.blockedOn===a&&(d.blockedOn=null)}for(;0<Pi.length&&(c=Pi[0],c.blockedOn===null);)Q1(c),c.blockedOn===null&&Pi.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],b=c[d+1],w=y[He]||null;if(typeof b=="function")w||J1(c);else if(w){var _=null;if(b&&b.hasAttribute("formAction")){if(y=b,w=b[He]||null)_=w.formAction;else if(qm(y)!==null)continue}else _=w.action;typeof _=="function"?c[d+1]=_:(c.splice(d,3),d-=3),J1(c)}}}function Fm(a){this._internalRoot=a}jd.prototype.render=Fm.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,d=Jn();F1(c,d,a,o,null,null)},jd.prototype.unmount=Fm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;F1(a.current,2,null,a,null,null),hd(),o[Tn]=null}};function jd(a){this._internalRoot=a}jd.prototype.unstable_scheduleHydration=function(a){if(a){var o=ei();a={blockedOn:null,target:a,priority:o};for(var c=0;c<Pi.length&&o!==0&&o<Pi[c].priority;c++);Pi.splice(c,0,a),c===0&&Q1(a)}};var eA=t.version;if(eA!=="19.1.1")throw Error(r(527,eA,"19.1.1"));ee.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=f(o),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var Kj={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{Yi=Md.inject(Kj),On=Md}catch{}}return yc.createRoot=function(a,o){if(!i(a))throw Error(r(299));var c=!1,d="",y=gS,b=yS,w=vS,_=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(_=o.unstable_transitionCallbacks)),o=q1(a,1,!1,null,null,c,d,y,b,w,_,null),a[Tn]=o.current,Tm(a),new Fm(o)},yc.hydrateRoot=function(a,o,c){if(!i(a))throw Error(r(299));var d=!1,y="",b=gS,w=yS,_=vS,I=null,Y=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(I=c.unstable_transitionCallbacks),c.formState!==void 0&&(Y=c.formState)),o=q1(a,1,!0,o,c??null,d,y,b,w,_,I,Y),o.context=Y1(null),c=o.current,d=Jn(),d=bl(d),y=li(d),y.callback=null,ci(c,y,d),c=d,o.current.lanes=c,Za(o,c),oa(o),a[Tn]=o.current,Tm(a),new jd(o)},yc.version="19.1.1",yc}var uA;function aM(){if(uA)return Xm.exports;uA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Xm.exports=rM(),Xm.exports}var iM=aM();const oM=qr(iM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),dA=e=>{const t=lM(e);return t.charAt(0).toUpperCase()+t.slice(1)},Bw=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),cM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},f)=>E.createElement("svg",{ref:f,...uM,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Bw("lucide",i),...!s&&!cM(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,p])=>E.createElement(h,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=(e,t)=>{const n=E.forwardRef(({className:r,...i},s)=>E.createElement(dM,{ref:s,iconNode:t,className:Bw(`lucide-${sM(dA(e))}`,`lucide-${e}`,r),...i}));return n.displayName=dA(e),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],Lc=xt("bolt",fM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["circle",{cx:"11",cy:"13",r:"9",key:"hd149"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95",key:"jp4j1b"}],["path",{d:"m22 2-1.5 1.5",key:"ay92ug"}]],pM=xt("bomb",hM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gM=xt("chevron-down",mM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fA=xt("chevron-right",yM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jc=xt("chevron-up",vM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Uw=xt("clock",bM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],zw=xt("copy",xM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],hA=xt("cpu",SM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],EM=xt("download",AM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pA=xt("eye",CM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],wM=xt("hand",PM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Kf=xt("loader-circle",OM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Iy=xt("rocket",TM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],DM=xt("rotate-ccw",_M);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mA=xt("settings",NM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Wd=xt("shield-check",jM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Jm=xt("shield",MM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],RM=xt("skull",kM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],Ly=xt("sword",IM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$M=xt("target",LM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],UM=xt("upload",BM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Gw=xt("user",zM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],gA=xt("wrench",GM);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kt=xt("x",HM),Pn=[{name:"Scout Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:5,image:"/img/Scout.png",abilities:[],upgradeSlots:2},{name:"Standard Fighter",class:2,limit:3,attack:3,hull:2,shields:1,speed:4,image:"/img/StandardFighter.png",abilities:[],upgradeSlots:2},{name:"Heavy Fighter",class:3,limit:2,attack:4,hull:4,shields:1,speed:3,image:"/img/HeavyFighter.png",abilities:[],upgradeSlots:2},{name:"Guardian Drone",class:3,limit:2,attack:1,hull:5,shields:1,speed:1,image:"/img/Guardian.png",abilities:[{name:"Guardian Protocol",description:"The ship section in this lane cannot be targeted by attacks while this drone is active.",type:"PASSIVE",icon:Jm,effect:{type:"GRANT_KEYWORD",keyword:"GUARDIAN"}}],upgradeSlots:2},{name:"Bomber",class:3,limit:3,attack:1,hull:2,shields:1,speed:1,image:"/img/Bomber.png",abilities:[{name:"Tachyon Warhead",description:"Deals +5 damage when attacking an enemy ship section.",type:"PASSIVE",icon:pM,effect:{type:"BONUS_DAMAGE_VS_SHIP",value:4}}],upgradeSlots:2},{name:"Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/Repair.png",abilities:[{name:"Hull Repair",description:"Pay 1 Energy and exhaust to restore 3 hull to a damaged friendly drone in the same lane.",type:"ACTIVE",icon:gA,targeting:{type:"DRONE",affinity:"FRIENDLY",location:"SAME_LANE",custom:["DAMAGED_HULL"]},effect:{type:"HEAL",value:3},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Interceptor",class:3,limit:3,attack:1,hull:4,shields:0,speed:2,image:"/img/Interceptor.png",abilities:[{name:"Vigilant",description:"Can always intercept attacks in this lane, regardless of speed.",type:"PASSIVE",icon:Wd,effect:{type:"GRANT_KEYWORD",keyword:"ALWAYS_INTERCEPTS"}},{name:"Defender",description:"Does not exhaust when intercepting.",type:"PASSIVE",icon:Jm,effect:{type:"GRANT_KEYWORD",keyword:"DEFENDER"}}],upgradeSlots:2},{name:"Aegis Drone",class:3,limit:2,attack:1,hull:2,shields:2,speed:2,image:"/img/Aegis.png",abilities:[{name:"Shield Harmonizer",description:"Other friendly drones in this lane gain +1 max shields.",type:"PASSIVE",icon:Jm,scope:"FRIENDLY_IN_LANE",effect:{type:"MODIFY_STAT",stat:"shields",value:1}}],upgradeSlots:2},{name:"Kamikaze Drone",class:1,limit:4,attack:3,hull:1,shields:0,speed:3,image:"/img/Kamikaze.png",abilities:[{name:"Self-Destruct",description:"This drone is destroyed after it attacks.",type:"PASSIVE",icon:RM,effect:{type:"AFTER_ATTACK",subEffect:{type:"DESTROY_SELF"}}}],upgradeSlots:2},{name:"Swarm Drone",class:0,limit:3,attack:1,hull:1,shields:0,speed:3,image:"/img/Swarm.png",abilities:[],upgradeSlots:3},{name:"Sniper Drone",class:4,limit:2,attack:1,hull:1,shields:0,speed:2,image:"/img/Sniper.png",abilities:[{name:"Long-Range Shot",description:"Pay 1 Energy and exhaust to deal 4 damage to an enemy drone in any lane.",type:"ACTIVE",icon:$M,targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4},cost:{energy:1,exhausts:!0}}],upgradeSlots:2},{name:"Sabot Drone",class:3,limit:2,attack:2,hull:3,shields:1,speed:2,image:"/img/Sabot.png",abilities:[{name:"Piercing",description:"Damage ignores enemy shields.",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}],upgradeSlots:2},{name:"Avenger Drone",class:1,limit:2,attack:1,hull:1,shields:1,speed:3,image:"/img/Avenger.png",abilities:[{name:"Vengeance Protocol",description:"Gains +3 attack if the friendly ship section in this lane has taken hull damage.",type:"PASSIVE",icon:Ly,effect:{type:"CONDITIONAL_MODIFY_STAT",mod:{stat:"attack",value:3},condition:{type:"SHIP_SECTION_HULL_DAMAGED",location:"SAME_LANE"}}}],upgradeSlots:2},{name:"Gladiator",class:2,limit:2,attack:2,hull:2,shields:2,speed:3,image:"/img/Gladiator.png",abilities:[{name:"Veteran Instincts",description:"Gains +1 attack permanently after it attacks.",type:"PASSIVE",icon:jc,effect:{type:"AFTER_ATTACK",subEffect:{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}}}}],upgradeSlots:2},{name:"Vindicator Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:3,image:"/img/Vindicator.png",abilities:[{name:"Retribution",description:"Gains +1 attack for each of your damaged or critical ship sections.",type:"PASSIVE",icon:Ly,effect:{type:"CONDITIONAL_MODIFY_STAT_SCALING",mod:{stat:"attack",value:1},condition:{type:"OWN_DAMAGED_SECTIONS"}}}],upgradeSlots:2},{name:"Skirmisher Drone",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/Skirmisher.png",abilities:[{name:"Flanking",description:"Gains +1 attack and +2 speed while in an outer lane (Lane 1 or Lane 3).",type:"PASSIVE",icon:fA,effect:{type:"FLANKING_BONUS",mods:[{stat:"attack",value:1},{stat:"speed",value:2}]}}],upgradeSlots:2},{name:"Phase Jumper",class:1,limit:3,attack:1,hull:1,shields:1,speed:1,image:"/img/PhaseJumper.png",abilities:[{name:"Phase Shift",description:"After this drone moves, permanently gain +1 Attack and +1 Speed.",type:"TRIGGERED",trigger:"ON_MOVE",icon:fA,effects:[{type:"PERMANENT_STAT_MOD",mod:{stat:"attack",value:1,type:"permanent"}},{type:"PERMANENT_STAT_MOD",mod:{stat:"speed",value:1,type:"permanent"}}]}],upgradeSlots:2},{name:"Nano Repair Drone",class:1,limit:2,attack:0,hull:1,shields:3,speed:2,image:"/img/NanoRepair.png",abilities:[{name:"Nano Repair Swarm",description:"Pay 1 Energy and exhaust to restore 1 hull to all damaged friendly drones in the same lane.",type:"ACTIVE",icon:gA,targeting:{type:"LANE",affinity:"FRIENDLY",location:"SAME_LANE"},effect:{type:"HEAL",value:1,scope:"LANE"},cost:{energy:1,exhausts:!0}}],upgradeSlots:2}],qM=[{id:"CARD001",baseCardId:"CARD001",name:"Laser Blast",maxInDeck:4,type:"Action",cost:3,image:"/cards/LaserBlast.png",description:"Deal 3 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:3}},{id:"CARD001_ENHANCED",baseCardId:"CARD001",name:"Laser Blast+",maxInDeck:4,type:"Action",cost:2,image:"/cards/LaserBlast.png",description:"Deal 4 damage to any drone.",visualEffect:{type:"LASER_BLAST",duration:600},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:4}},{id:"CARD002",baseCardId:"CARD002",name:"System Reboot",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reboot.png",description:"Draw 2 cards from your deck. Go again.",effect:{type:"DRAW",value:2,goAgain:!0}},{id:"CARD002_ENHANCED",baseCardId:"CARD002",name:"System Reboot+",maxInDeck:4,type:"Action",cost:2,image:"/cards/Reboot.png",description:"Draw 3 cards from your deck Go again.",effect:{type:"DRAW",value:3,goAgain:!0}},{id:"CARD003",baseCardId:"CARD003",name:"Out Think",maxInDeck:4,type:"Action",cost:1,image:"/cards/OutThink.png",description:"Draw 1 card.",effect:{type:"DRAW",value:1}},{id:"CARD004",baseCardId:"CARD004",name:"Energy Surge",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 2 Energy. Go again",effect:{type:"GAIN_ENERGY",value:2,goAgain:!0}},{id:"CARD004_ENHANCED",baseCardId:"CARD004",name:"Energy Surge+",maxInDeck:4,type:"Action",cost:0,image:"/cards/EnergySurge.png",description:"Gain 3 Energy. Go again.",effect:{type:"GAIN_ENERGY",value:3,goAgain:!0}},{id:"CARD005",baseCardId:"CARD005",name:"Adrenaline Rush",maxInDeck:4,type:"Action",cost:2,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE"}},{id:"CARD005_ENHANCED",baseCardId:"CARD005",name:"Adrenaline Rush+",maxInDeck:4,type:"Action",cost:3,image:"/cards/AdrenalineRush.png",description:"Ready an exhausted friendly drone. Go again",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE",custom:["EXHAUSTED"]},effect:{type:"READY_DRONE",goAgain:!0}},{id:"CARD006",baseCardId:"CARD006",name:"Nanobot Repair",maxInDeck:4,type:"Action",cost:1,image:"/cards/NanobotRepair.png",description:"Restore 3 hull to a friendly drone. Cannot exceed its maximum hull. Go again.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"HEAL_HULL",value:3,goAgain:!0}},{id:"CARD007",baseCardId:"CARD007",name:"Emergency Patch",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 4 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:4}},{id:"CARD007_ENHANCED",baseCardId:"CARD007",name:"Emergency Patch+",maxInDeck:4,type:"Action",cost:3,image:"/cards/EmergencyPatch.png",description:"Restore 5 hull to one of your ship sections.",targeting:{type:"SHIP_SECTION",affinity:"FRIENDLY"},effect:{type:"HEAL_HULL",value:5}},{id:"CARD008",baseCardId:"CARD008",name:"Shield Recharge",maxInDeck:4,type:"Action",cost:1,image:"/cards/ShieldRecharge.png",description:"Restore 2 shield to all friendly drones in a target lane. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY"},effect:{type:"HEAL_SHIELDS",value:2,goAgain:!0}},{id:"CARD009",baseCardId:"CARD009",name:"Target Lock",maxInDeck:4,type:"Action",cost:5,image:"/cards/TargetLock.png",description:"Destroy a single target drone.",targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DESTROY",scope:"SINGLE"}},{id:"CARD010",baseCardId:"CARD010",name:"Shrieker Missiles",maxInDeck:4,type:"Action",cost:4,image:"/cards/ShriekerMissiles.png",description:"Destroy all enemy drones with a speed of 5 or higher in a selected lane.",targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DESTROY",scope:"FILTERED",filter:{stat:"speed",comparison:"GTE",value:5}}},{id:"CARD011",baseCardId:"CARD011",name:"Nuke",maxInDeck:2,type:"Action",cost:7,image:"/cards/Nuke.png",description:"Destroy ALL drones in a selected lane (both sides).",visualEffect:{type:"NUKE_BLAST",duration:1200},targeting:{type:"LANE",affinity:"ANY"},effect:{type:"DESTROY",scope:"LANE"}},{id:"CARD012",baseCardId:"CARD012",name:"Piercing Shot",maxInDeck:4,type:"Action",cost:4,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD012_ENHANCED",baseCardId:"CARD012",name:"Piercing Shot+",maxInDeck:4,type:"Action",cost:3,image:"/cards/PiercingShot.png",description:"Deal 2 piercing damage to any drone. (Piercing damage ignores shields).",visualEffect:{type:"LASER_BLAST",duration:800},targeting:{type:"DRONE",affinity:"ANY",location:"ANY_LANE"},effect:{type:"DAMAGE",value:2,damageType:"PIERCING"}},{id:"CARD013",baseCardId:"CARD013",name:"Sidewinder Missiles",maxInDeck:4,type:"Action",cost:3,image:"/cards/SidewinderMissiles.png",description:"Deal 2 damage to all enemy drones with a speed of 3 or Less in a selected lane.",visualEffect:{type:"ENERGY_WAVE",duration:800},targeting:{type:"LANE",affinity:"ENEMY"},effect:{type:"DAMAGE",value:2,scope:"FILTERED",filter:{stat:"speed",comparison:"LTE",value:3}}},{id:"CARD014",baseCardId:"CARD014",name:"Overcharge",maxInDeck:4,type:"Action",cost:0,image:"/cards/Overcharge.png",description:"Give a friendly drone +2 attack until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:2,type:"temporary"}}},{id:"CARD015",baseCardId:"CARD015",name:"Streamline",maxInDeck:4,type:"Action",cost:2,image:"/cards/Streamline.png",description:"Give all friendly drones in a line a permanent +1 speed bonus. Go again.",targeting:{type:"LANE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:1,type:"permanent"},goAgain:!0}},{id:"CARD016",baseCardId:"CARD016",name:"Static Field",maxInDeck:4,type:"Action",cost:1,image:"/cards/StaticField.png",description:"Give an enemy drone -2 attack until the end of the turn. Go again.",targeting:{type:"DRONE",affinity:"ENEMY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"attack",value:-2,type:"temporary"},goAgain:!0}},{id:"CARD017",baseCardId:"CARD017",name:"Boosters",maxInDeck:4,type:"Action",cost:1,image:"/cards/Boosters.png",description:"Give a friendly drone +2 speed until the end of the turn.",targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"MODIFY_STAT",mod:{stat:"speed",value:2,type:"temporary"}}},{id:"CARD018",baseCardId:"CARD018",name:"Desperate Measures",maxInDeck:4,type:"Action",cost:1,image:"/cards/DesperateMeasures.png",description:"Draw 1 card and gain 1 Energy. Repeat this effect for each of your damaged or critical ship sections.",effect:{type:"REPEATING_EFFECT",effects:[{type:"DRAW",value:1},{type:"GAIN_ENERGY",value:1}],condition:"OWN_DAMAGED_SECTIONS",goAgain:!0}},{id:"CARD019",baseCardId:"CARD019",name:"Reposition",maxInDeck:4,type:"Action",cost:1,image:"/cards/Reposition.png",description:"Select a lane. Move up to 3 friendly drones from that lane to another. The moved drones are not exhausted.",effect:{type:"MULTI_MOVE",count:3,source:{location:"SAME_LANE",affinity:"FRIENDLY"},destination:{affinity:"FRIENDLY"},properties:["DO_NOT_EXHAUST"]}},{id:"CARD020",baseCardId:"CARD020",name:"Slimline Bodywork",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/SlimlineBodywork.png",description:"Permanently increase the deployment limit of a target drone type by 1. Go again.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"limit",value:1},goAgain:!0},maxApplications:1},{id:"CARD021",baseCardId:"CARD021",name:"Overclocked Thrusters",maxInDeck:2,type:"Upgrade",cost:3,image:"/cards/OverclockedThrusters.png",description:"Permanently grant all drones of a target type +1 Speed.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"speed",value:1}},maxApplications:2},{id:"CARD022",baseCardId:"CARD022",name:"System Sabotage",maxInDeck:4,type:"Action",cost:1,image:"/cards/SystemSabotage.png",description:"Destroy a single applied Upgrade on an enemy drone type.",targeting:{type:"APPLIED_UPGRADE",affinity:"ENEMY"},effect:{type:"DESTROY_UPGRADE"}},{id:"CARD023",baseCardId:"CARD023",name:"Maneuver",maxInDeck:4,type:"Action",cost:1,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD023_ENHANCED",baseCardId:"CARD023",name:"Maneuver+",maxInDeck:4,type:"Action",cost:0,image:"/cards/Maneuver.png",description:"Move a friendly drone to an adjacent lane. The drone is not exhausted by this move. Go again.",effect:{type:"SINGLE_MOVE",properties:["DO_NOT_EXHAUST"],goAgain:!0}},{id:"CARD028",baseCardId:"CARD028",name:"Combat Enhancement",maxInDeck:2,type:"Upgrade",cost:5,image:"/cards/CombatEnhancement.png",description:"Permanently increase the attack of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"attack",value:1}},maxApplications:2},{id:"CARD029",baseCardId:"CARD029",name:"Shield Amplifier",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/ShieldAmplifier.png",description:"Permanently increase the shields of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"shields",value:1}},maxApplications:2},{id:"CARD024",baseCardId:"CARD024",name:"Piercing Rounds",maxInDeck:1,type:"Upgrade",cost:6,image:"/cards/PiercingRounds.png",description:"Permanently grant all drones of a target type the Piercing keyword.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"ability",abilityToAdd:{name:"Piercing",type:"PASSIVE",effect:{type:"GRANT_KEYWORD",keyword:"PIERCING"}}}},maxApplications:1},{id:"CARD025",baseCardId:"CARD025",name:"Strategic Planning",maxInDeck:4,type:"Action",cost:2,image:"/cards/StrategicPlanning.png",description:"Look at the top 5 cards of your deck and draw 1. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:5,drawCount:1,shuffleAfter:!0}},{id:"CARD026",baseCardId:"CARD026",name:"Equipment Cache",maxInDeck:4,type:"Action",cost:4,image:"/cards/EquipmentCache.png",description:"Search your deck for an Upgrade card and add it to your hand. Shuffle your deck.",effect:{type:"SEARCH_AND_DRAW",searchCount:999,drawCount:1,shuffleAfter:!0,filter:{type:"Upgrade"}}},{id:"CARD027",baseCardId:"CARD027",name:"Efficiency Module",maxInDeck:2,type:"Upgrade",cost:4,image:"/cards/EfficiencyModule.png",description:"Permanently reduce the deployment cost of all drones of a target type by 1.",targeting:{type:"DRONE_CARD"},effect:{type:"MODIFY_DRONE_BASE",mod:{stat:"cost",value:-1}},maxApplications:1}],yA={bridge:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"The command center of your ship.",thresholds:{damaged:5,critical:0},stats:{healthy:{Draw:5,Discard:3},damaged:{Draw:5,Discard:2},critical:{Draw:4,Discard:1}},middleLaneBonus:{Draw:1,Discard:1},image:"/img/Bridge.png",ability:{id:"ABILITY_SHIP_01",name:"Recalculate",description:"Draw a card, then discard a card.",cost:{energy:1},targeting:null,effect:{type:"DRAW_THEN_DISCARD",value:{draw:1,discard:1}}}},powerCell:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Generates energy to power your abilities.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":3},damaged:{"Energy Per Turn":10,"Max Energy":10,"Shields Per Turn":2},critical:{"Energy Per Turn":9,"Max Energy":9,"Shields Per Turn":1}},middleLaneBonus:{"Energy Per Turn":2,"Max Energy":2,"Shields Per Turn":1},image:"/img/Power_Cell.png",ability:{id:"ABILITY_SHIP_02",name:"Reallocate Shields",description:"Take up to 2 shields from your ship sections and redeploy them elsewhere.",cost:{energy:1},targeting:null,effect:{type:"REALLOCATE_SHIELDS",value:{maxShields:2}}}},droneControlHub:{hull:10,maxHull:10,shields:3,allocatedShields:3,description:"Controls your drone fleet.",thresholds:{damaged:5,critical:0},stats:{healthy:{"Initial Deployment":6,"CPU Control Value":10,"Deployment Budget":3},damaged:{"Initial Deployment":5,"CPU Control Value":10,"Deployment Budget":2},critical:{"Initial Deployment":4,"CPU Control Value":8,"Deployment Budget":2}},middleLaneBonus:{"Initial Deployment":2,"Deployment Budget":2,"CPU Control Value":2},image:"/img/Drone_Control_Hub.png",ability:{id:"ABILITY_SHIP_03",name:"Recall",description:"Return a friendly drone from any lane to your active pool.",cost:{energy:1},targeting:{type:"DRONE",affinity:"FRIENDLY",location:"ANY_LANE"},effect:{type:"RECALL_DRONE",value:1}}}},Mi=e=>e.hull<=e.thresholds.critical?"critical":e.hull<=e.thresholds.damaged?"damaged":"healthy",Fa=(e,t=[])=>{const n={totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};if(!e||!e.shipSections)return n;const r={};for(const s in e.shipSections){const l=e.shipSections[s],u=Mi(l),f={...l.stats[u]};if(t.indexOf(s)===1&&l.middleLaneBonus)for(const p in l.middleLaneBonus)f.hasOwnProperty(p)&&(f[p]+=l.middleLaneBonus[p]);r[s]=f}const i={handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0};for(const s of Object.values(r))i.handLimit+=s.Draw||0,i.discardLimit+=s.Discard||0,i.energyPerTurn+=s["Energy Per Turn"]||0,i.maxEnergy+=s["Max Energy"]||0,i.shieldsPerTurn+=s["Shields Per Turn"]||0,i.initialDeployment+=s["Initial Deployment"]||0,i.deploymentBudget+=s["Deployment Budget"]||0,i.cpuLimit+=s["CPU Control Value"]||0;return{totals:i,bySection:r}},Tr=(e,t,n,r,i)=>{if(!e||!t||!n||!r||!i)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const s=Pn.find(g=>g.name===e.name);if(!s)return{...e,baseAttack:e.attack,baseSpeed:e.speed,baseCost:e.class||0,cost:e.class||0,maxShields:0,keywords:new Set};const l=n.appliedUpgrades[e.name]||[];let u=s.attack,f=s.speed,h=s.shields,p=s.class;l.forEach(g=>{g.mod.stat==="attack"&&(u+=g.mod.value),g.mod.stat==="speed"&&(f+=g.mod.value),g.mod.stat==="shields"&&(h+=g.mod.value),g.mod.stat==="cost"&&(p+=g.mod.value)}),p=Math.max(0,p);let m={...e,attack:u,speed:f,maxShields:h,cost:p,baseAttack:s.attack,baseSpeed:s.speed,baseCost:s.class,keywords:new Set};return e.statMods?.forEach(g=>{g.stat==="attack"&&(m.attack+=g.value),g.stat==="speed"&&(m.speed+=g.value),g.stat==="cost"&&(m.cost=Math.max(0,m.cost+g.value))}),s.abilities?.forEach(g=>{if(g.type==="PASSIVE"){if(g.effect.type==="GRANT_KEYWORD"&&m.keywords.add(g.effect.keyword),g.effect.type==="CONDITIONAL_MODIFY_STAT"){const{condition:x,mod:S}=g.effect;let A=!1;if(x.type==="SHIP_SECTION_HULL_DAMAGED"&&x.location==="SAME_LANE"){const C=parseInt(t.slice(-1))-1,O=(n.name==="Player 1"?i.player1:i.player2)[C];if(O){const T=n.shipSections[O],j=Mi(T);(j==="damaged"||j==="critical")&&(A=!0)}}A&&S.stat==="attack"&&(m.attack+=S.value)}if(g.effect.type==="CONDITIONAL_MODIFY_STAT_SCALING"){const{condition:x,mod:S}=g.effect;let A=0;if(x.type==="OWN_DAMAGED_SECTIONS")for(const C in n.shipSections){const P=n.shipSections[C],O=Mi(P);(O==="damaged"||O==="critical")&&A++}A>0&&(S.stat==="attack"&&(m.attack+=S.value*A),S.stat==="speed"&&(m.speed+=S.value*A))}g.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(m.potentialShipDamage=(m.potentialShipDamage||0)+g.effect.value),g.effect.type==="FLANKING_BONUS"&&(t==="lane1"||t==="lane3")&&g.effect.mods.forEach(x=>{x.stat==="attack"&&(m.attack+=x.value),x.stat==="speed"&&(m.speed+=x.value)})}}),n.dronesOnBoard[t]?.forEach(g=>{if(g.id===e.id)return;Pn.find(S=>S.name===g.name)?.abilities?.forEach(S=>{if(S.type==="PASSIVE"&&S.scope==="FRIENDLY_IN_LANE"&&S.effect.type==="MODIFY_STAT"){const{stat:A,value:C}=S.effect;A==="shields"?m.maxShields+=C:A==="attack"?m.attack+=C:A==="speed"&&(m.speed+=C)}})}),l.forEach(g=>{g.grantedAbilities&&g.grantedAbilities.forEach(x=>{if(x.type==="PASSIVE"&&(x.effect.type==="GRANT_KEYWORD"&&m.keywords.add(x.effect.keyword),x.effect.type==="MODIFY_STAT")){const{stat:S,value:A}=x.effect;S==="attack"&&(m.attack+=A),S==="speed"&&(m.speed+=A),S==="shields"&&(m.maxShields+=A)}})}),m},YM=(e,t)=>({...e,instanceId:t}),Bs=[{id:"CARD018",quantity:4},{id:"CARD019",quantity:2},{id:"CARD009",quantity:2},{id:"CARD007",quantity:2},{id:"CARD012",quantity:2},{id:"CARD005",quantity:4},{id:"CARD006",quantity:2},{id:"CARD015",quantity:2},{id:"CARD008",quantity:2},{id:"CARD001",quantity:2},{id:"CARD002",quantity:4},{id:"CARD003",quantity:4},{id:"CARD004",quantity:4},{id:"CARD016",quantity:4}],Hw=e=>{const t=[];let n=0;return e.forEach(r=>{const i=qM.find(s=>s.id===r.id);if(i)for(let s=0;s<r.quantity;s++)t.push(YM(i,`card-${Date.now()}-${n++}`))}),t.sort(()=>.5-Math.random())},zv=(e,t,n)=>{const r=t.shipSections[e];if(!r)return 0;let i=r.shields;return n.indexOf(e)===1&&r.middleLaneBonus&&r.middleLaneBonus["Shields Per Turn"]&&(i+=r.middleLaneBonus["Shields Per Turn"]),i},FM=(e,t)=>{const n=Fa({shipSections:yA},[]).totals;return{name:e,shipSections:yA,energy:0,initialDeploymentBudget:n.initialDeployment,deploymentBudget:0,hand:[],deck:Hw(t),discardPile:[],activeDronePool:[],dronesOnBoard:{lane1:[],lane2:[],lane3:[]},deployedDroneCounts:{},appliedUpgrades:{}}},Gs=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},qw=(e,t)=>{if(!e.deployedDroneCounts.hasOwnProperty(t.name))return{};const n={...e.deployedDroneCounts},r=t.name;return n[r]>0&&(n[r]-=1),{deployedDroneCounts:n}},al=(e,t,n)=>{const r=JSON.parse(JSON.stringify(e.dronesOnBoard));for(const i in r)r[i].forEach(s=>{const l=s.currentMaxShields,{maxShields:u}=Tr(s,i,e,t,n);u>l&&(s.currentShields+=u-l),s.currentMaxShields=u,s.currentShields=Math.min(s.currentShields,u)});return r},Gn=(e,t)=>{for(const[n,r]of Object.entries(t.dronesOnBoard))if(r.some(i=>i.id===e))return n;return null},Mc=(e,t,n,r,i)=>{const s=e==="player1"?r:i,l=e==="player1"?i:r,u=[],h=!(typeof n.cost=="number"),{type:p,affinity:m,location:g,custom:x}=n.targeting;let S=null;if(h&&Object.values(s.dronesOnBoard).flat().some(O=>O.id===t.id)&&(S=Gn(t.id,s),!S))return[];const A=(P,O)=>{Object.entries(P.dronesOnBoard).forEach(([T,j])=>{let N=!1;g==="ANY_LANE"&&(N=!0),h&&g==="SAME_LANE"&&(N=T===S),N&&j.forEach(D=>{let M=!0;if(x?.includes("DAMAGED_HULL")){const R=Pn.find(U=>U.name===D.name);(!R||D.hull>=R.hull)&&(M=!1)}x?.includes("EXHAUSTED")&&(D.isExhausted||(M=!1)),M&&u.push({...D,lane:T,owner:O})})})},C=(P,O)=>{Object.keys(P.shipSections).forEach(T=>{u.push({id:T,owner:O,...P.shipSections[T]})})};if(p==="DRONE")(m==="FRIENDLY"||m==="ANY")&&A(s,e),(m==="ENEMY"||m==="ANY")&&A(l,e==="player1"?"player2":"player1");else if(p==="SHIP_SECTION")(m==="FRIENDLY"||m==="ANY")&&C(s,e),(m==="ENEMY"||m==="ANY")&&C(l,e==="player1"?"player2":"player1");else if(p==="LANE")["lane1","lane2","lane3"].forEach(P=>{if((m==="FRIENDLY"||m==="ANY")&&u.push({id:P,owner:e}),m==="ENEMY"||m==="ANY"){const O=e==="player1"?"player2":"player1";u.push({id:P,owner:O})}});else if(p==="DRONE_CARD"){const P=e==="player1"?r:i;P.activeDronePool.forEach(O=>{const T=Pn.find(M=>M.name===O.name),j=P.appliedUpgrades[O.name]||[],N=j.filter(M=>M.id===n.id).length,D=n.maxApplications===void 0?1:n.maxApplications;T&&j.length<T.upgradeSlots&&N<D&&u.push({...O,id:O.name,owner:e})})}else if(p==="APPLIED_UPGRADE"){const P=m==="ENEMY"?l:s,O=m==="ENEMY"?e==="player1"?"player2":"player1":e;Object.values(P.dronesOnBoard).flat().forEach(T=>{(P.appliedUpgrades[T.name]||[]).length>0&&u.push({...T,owner:O})})}return u},Yw=(e,t,n,r,i)=>{const s=Pn.find(h=>h.name===t.name);if(!s?.abilities)return{newState:e};let l=JSON.parse(JSON.stringify(e)),u=!1;const f=s.abilities.filter(h=>h.type==="TRIGGERED"&&h.trigger==="ON_MOVE");if(f.length>0){const h=l.dronesOnBoard[r].findIndex(p=>p.id===t.id);if(h!==-1){const p=l.dronesOnBoard[r][h];f.forEach(m=>{i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${m.name}' after moving from ${n} to ${r}.`},"applyOnMoveEffects_trigger"),p.statMods||(p.statMods=[]),m.effects?.forEach(g=>{g.type==="PERMANENT_STAT_MOD"&&(u=!0,p.statMods.push(g.mod),i({player:l.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Gained a permanent +${g.mod.value} ${g.mod.stat}.`},"applyOnMoveEffects_mod"))})})}}return{newState:u?l:e}},Fw=(e,t)=>{const n=Pn.find(u=>u.name===t.name);if(!n?.abilities)return{newState:e,effects:[]};let r=JSON.parse(JSON.stringify(e));const i=[];let s=!1;return n.abilities.filter(u=>u.effect?.type==="AFTER_ATTACK").forEach(u=>{const{subEffect:f}=u.effect;if(f.type==="DESTROY_SELF")for(const h in r.dronesOnBoard){const p=r.dronesOnBoard[h].findIndex(m=>m.id===t.id);if(p!==-1){s=!0;const m=r.dronesOnBoard[h][p];i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', destroying itself.`}}),i.push({type:"EXPLOSION",payload:{targetId:t.id}}),r.dronesOnBoard[h]=r.dronesOnBoard[h].filter(g=>g.id!==t.id),Object.assign(r,Gs(r,m));break}}else if(f.type==="PERMANENT_STAT_MOD")for(const h in r.dronesOnBoard){const p=r.dronesOnBoard[h].findIndex(m=>m.id===t.id);if(p!==-1){s=!0,r.dronesOnBoard[h][p].statMods||(r.dronesOnBoard[h][p].statMods=[]),i.push({type:"LOG",payload:{player:r.name,actionType:"ABILITY",source:t.name,target:"Self",outcome:`Activated '${u.name}', gaining a permanent +${f.mod.value} ${f.mod.stat}.`}}),r.dronesOnBoard[h][p].statMods.push(f.mod);break}}}),{newState:s?r:e,effects:i}},$y=e=>{if(!e||!e.shipSections)return!1;const t=Object.values(e.shipSections).map(i=>Mi(i));return t.filter(i=>i==="critical").length>=2||t.filter(i=>i==="damaged"||i==="critical").length>=3},Vw=(e,t,n,r,i)=>{if(r>=i.totals.cpuLimit)return{isValid:!1,reason:"CPU Limit Reached",message:"You cannot deploy more drones than your CPU Control Value."};const s=Pn.find(m=>m.name===t.name),l=e.appliedUpgrades[t.name]||[];let u=s.limit;if(l.forEach(m=>{m.mod.stat==="limit"&&(u+=m.mod.value)}),(e.deployedDroneCounts[t.name]||0)>=u)return{isValid:!1,reason:"Deployment Limit Reached",message:`The deployment limit for ${t.name} is currently ${u}.`};const f=t.class;let h=0,p=0;return n===1?(p=Math.min(e.initialDeploymentBudget,f),h=f-p):(p=Math.min(e.deploymentBudget,f),h=f-p),e.energy<h?{isValid:!1,reason:"Not Enough Energy",message:`This action requires ${h} energy, but you only have ${e.energy}.`}:{isValid:!0,budgetCost:p,energyCost:h}},Kw=(e,t,n)=>{const r=e.shipSections[t];return r?r.allocatedShields<=0?{valid:!1,error:"No shields to remove"}:{valid:!0}:{valid:!1,error:"Section not found"}},Gv=(e,t,n)=>{const r=e.shipSections[t];if(!r)return{valid:!1,error:"Section not found",maxAvailable:0};const s=zv(t,e,n)-r.allocatedShields;return s<=0?{valid:!1,error:"Section at maximum shields",maxAvailable:0}:{valid:!0,maxAvailable:s}},VM=(e,t,n)=>{const{removals:r,additions:i}=t,s={...e,shipSections:{...e.shipSections}};return r.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields-u}}),i.forEach(({section:l,count:u})=>{s.shipSections[l]={...s.shipSections[l],allocatedShields:s.shipSections[l].allocatedShields+u}}),s},KM=(e,t,n)=>{const r=[];return Object.keys(e.shipSections).forEach(i=>{if(t==="remove")Kw(e,i).valid&&r.push({id:i,name:i,availableShields:e.shipSections[i].allocatedShields});else if(t==="add"){const s=Gv(e,i,n);s.valid&&r.push({id:i,name:i,maxAvailable:s.maxAvailable})}}),r},XM=(e,t,n)=>{const r=e[t],i=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Gv(r,n,i);return!s.valid||e.shieldsToAllocate<=0?{success:!1,error:s.error||"No shields available to allocate",newPlayerState:r,newShieldsToAllocate:e.shieldsToAllocate}:{success:!0,newPlayerState:{...r,shipSections:{...r.shipSections,[n]:{...r.shipSections[n],allocatedShields:r.shipSections[n].allocatedShields+1}}},newShieldsToAllocate:e.shieldsToAllocate-1,sectionName:n,playerId:t}},WM=(e,t)=>{const n=e[t],r=t==="player1"?e.placedSections:e.opponentPlacedSections,s=Fa(n,r).totals.shieldsPerTurn,l={};return Object.keys(n.shipSections).forEach(f=>{l[f]={...n.shipSections[f],allocatedShields:0}}),{success:!0,newPlayerState:{...n,shipSections:l},newShieldsToAllocate:s,playerId:t}},QM=(e,t)=>{const n=t,r=n==="player1"?"player2":"player1",i=e[n],s=e[r],l=r==="player1"?e.placedSections:e.opponentPlacedSections,f=Fa(s,l).totals.shieldsPerTurn,h=JSON.parse(JSON.stringify(s.shipSections)),p=Object.keys(h);let m=f,g=0,x=0;for(;m>0&&x<100;){const P=p[g%p.length],O=h[P],T=zv(P,s,l);O.allocatedShields<T&&(O.allocatedShields++,m--),g++,x++}const S={...s,shipSections:h},C={success:!0,newPhase:"deployment",firstPlayer:Wf(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound)};return n==="player1"?(C.player1State=i,C.player2State=S):(C.player1State=S,C.player2State=i),C},ZM=(e,t,n,r,i,s,l)=>{const{effect:u,cost:f}=e,h=r.player1;let p="",m="Ability effect applied.";e.targeting?.type==="LANE"?p=`Lane ${n.id.slice(-1)}`:n&&(p=n.name),u.type==="HEAL"?(m=`Healed ${u.value} hull on targets in ${p}.`,u.scope!=="LANE"&&(m=`Healed ${u.value} hull on ${p}.`)):u.type==="DAMAGE"&&(m=`Dealt ${u.value} damage to ${p}.`),s&&s({player:h.name,actionType:"ABILITY",source:`${t.name}'s ${e.name}`,target:p,outcome:m});const g={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(f.energy&&(g.player1.energy-=f.energy),f.exhausts)for(const A in g.player1.dronesOnBoard){const C=g.player1.dronesOnBoard[A].findIndex(P=>P.id===t.id);if(C!==-1){g.player1.dronesOnBoard[A][C].isExhausted=!0;break}}const x=rO(u,t,n,g,i,{resolveAttackCallback:l});g.player1=x.newPlayerStates.player1,g.player2=x.newPlayerStates.player2;const S=x.animationEvents||[];return{newPlayerStates:g,shouldEndTurn:!u.goAgain,animationEvents:S}},JM=(e,t,n,r,i,s,l)=>{const{cost:u,effect:f}=e,h=r.player1;s&&s({player:h.name,actionType:"SHIP_ABILITY",source:`${t}'s ${e.name}`,target:n?.name||"N/A",outcome:`Activated ${e.name}.`});const p={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))};if(p.player1.energy-=u.energy,f.type==="REALLOCATE_SHIELDS")return{newPlayerStates:p,shouldEndTurn:!1,requiresShieldReallocation:!0,animationEvents:[]};{const m=aO(f,t,n,p,i,{resolveAttackCallback:l});p.player1=m.newPlayerStates.player1,p.player2=m.newPlayerStates.player2;const g=m.animationEvents||[];return m.needsDiscardSelection?{newPlayerStates:p,shouldEndTurn:!1,mandatoryAction:{type:"discard",player:"player1",count:m.needsDiscardSelection,fromAbility:!0},animationEvents:g}:{newPlayerStates:p,shouldEndTurn:!0,animationEvents:g}}},Xw=(e,t,n,r,i,s,l)=>{const u=Vw(r,e,n,Object.values(r.dronesOnBoard).flat().length,Fa(r,s.player1));if(!u.isValid)return{success:!1,error:u.reason,message:u.message,newPlayerState:r};const{budgetCost:f,energyCost:h}=u;l&&l({player:r.name,actionType:"DEPLOY",source:e.name,target:t,outcome:`Deployed to ${t}.`});const p=JSON.parse(JSON.stringify(r)),m={...p.dronesOnBoard,[t]:[...p.dronesOnBoard[t],{...e,id:0}]},g={...p,dronesOnBoard:m},x=Tr(e,t,g,i,s),S={...e,id:Date.now(),statMods:[],currentShields:x.maxShields,currentMaxShields:x.maxShields,hull:e.hull,isExhausted:!1};return p.dronesOnBoard[t].push(S),p.deployedDroneCounts={...p.deployedDroneCounts,[e.name]:(p.deployedDroneCounts[e.name]||0)+1},n===1?p.initialDeploymentBudget-=f:p.deploymentBudget-=f,p.energy-=h,p.dronesOnBoard=al(p,i,s),{success:!0,newPlayerState:p,deployedDrone:S}},ek=(e,t)=>{const{logCallback:n,setWinnerCallback:r,showWinnerModalCallback:i}=t;return $y(e.player2)?(r("Player 1"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:"Player 1 wins!"},"winConditionCheck"),"Player 1"):$y(e.player1)?(r("Player 2"),i(!0),n({player:"SYSTEM",actionType:"GAME_END",source:"N/A",target:"N/A",outcome:`${e.player2.name} wins!`},"winConditionCheck"),"Player 2"):null},tk=(e,t,n,r)=>{if(!e||e.isExhausted)return[];const i=Gn(e.id,t);if(!i)return[];const s=Tr(e,i,t,n,r);return(n.dronesOnBoard[i]||[]).filter(f=>{const h=Tr(f,i,n,t,r);return!f.isExhausted&&(h.speed>s.speed||h.keywords.has("ALWAYS_INTERCEPTS"))}).map(f=>f.id)},nk=(e,t,n,r,i,s,l)=>{const{addLogEntry:u}=l,f=e.class;let h=0;n===1?h=Math.min(r.initialDeploymentBudget,f):h=Math.min(r.deploymentBudget,f);const p=f-h;if(r.energy<p)return{success:!1,error:"Insufficient energy for deployment"};const m={...e,id:Date.now(),statMods:[],currentShields:e.shields,currentMaxShields:e.shields,hull:e.hull,isExhausted:!1};let g={...r,dronesOnBoard:{...r.dronesOnBoard,[t]:[...r.dronesOnBoard[t],m]},deployedDroneCounts:{...r.deployedDroneCounts,[e.name]:(r.deployedDroneCounts[e.name]||0)+1},initialDeploymentBudget:n===1?r.initialDeploymentBudget-h:r.initialDeploymentBudget,deploymentBudget:n>1?r.deploymentBudget-h:r.deploymentBudget,energy:r.energy-p};return g.dronesOnBoard=al(g,i,s),{success:!0,newPlayerState:g,deployedDrone:m,costs:{energy:p,budget:h}}},rk=(e,t,n)=>{const{attacker:r,target:i,targetType:s,lane:l}=e,u=Tr(r,l,t.player2,t.player1,n),f=t.player1.dronesOnBoard[l].filter(h=>{const p=Tr(h,l,t.player1,t.player2,n);return!h.isExhausted&&(p.speed>u.speed||p.keywords.has("ALWAYS_INTERCEPTS"))&&(s!=="drone"||h.id!==i.id)});return{hasInterceptors:f.length>0,interceptors:f,attackDetails:e}},Hv=(e,t,n,r)=>{const i=e==="player1"?"player2":"player1";return t.player1Passed&&t.player2Passed?{type:"END_PHASE",phase:n,nextPlayer:null}:i==="player1"&&t.player1Passed||i==="player2"&&t.player2Passed?{type:"CONTINUE_TURN",nextPlayer:e,triggerAi:e==="player2"}:{type:"CHANGE_PLAYER",nextPlayer:i,showOpponentModal:i==="player2"&&!r}},ak=(e,t,n)=>{const r=!t.player1Passed&&!t.player2Passed,i={...t,[`${e}Passed`]:!0,firstPasser:t.firstPasser||(r?e:null)};return i.player1Passed&&i.player2Passed?{type:"END_PHASE",newPassInfo:i,phase:n}:{type:"CHANGE_PLAYER",newPassInfo:i,nextPlayer:e==="player1"?"player2":"player1"}},ik=(e,t)=>{const n=Hv(t,e.passInfo,e.turnPhase,e.winner);let r={...e};const i=[];switch(n.type){case"END_PHASE":i.push({type:"PHASE_END",phase:n.phase,trigger:"both_players_passed"}),r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};break;case"CHANGE_PLAYER":r.currentPlayer=n.nextPlayer,n.showOpponentModal&&i.push({type:"SHOW_WAITING_MODAL",player:n.nextPlayer});break}return{newState:r,uiEffects:i,transitionType:n.type}},ok=(e,t,n="manual")=>{let r={...e,turnPhase:t};const i=[];switch(t){case"deployment":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const s=Wf(e.turn,e.firstPlayerOverride,e.firstPasserOfPreviousRound);r.currentPlayer=s,r.firstPlayerOfRound=s,i.push({type:"PHASE_START",phase:"deployment",firstPlayer:s});break;case"action":r.passInfo={firstPasser:null,player1Passed:!1,player2Passed:!1};const l=e.passInfo.firstPasser||e.firstPlayerOfRound;r.currentPlayer=l,i.push({type:"PHASE_START",phase:"action",firstPlayer:l});break;case"roundEnd":i.push({type:"ROUND_END",turn:e.turn});break;default:console.warn(`Unknown phase: ${t}`)}return{newState:r,uiEffects:i}},sk=(e,t,n,r)=>{const i=By(e.player1,t,n,e.player2,e.placedSections),s=By(e.player2,t,r,e.player1,e.opponentPlacedSections),l=Uy(i,n.totals.handLimit),u=Uy(s,r.totals.handLimit),f=Wf(t,e.firstPlayerOverride,e.firstPasserOfPreviousRound),h={...e,turn:t,turnPhase:"deployment",currentPlayer:f,firstPlayerOfRound:f,firstPasserOfPreviousRound:e.passInfo.firstPasser,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},player1:l,player2:u},p=[{type:"ROUND_START",turn:t,firstPlayer:f},{type:"LOG_ENTRY",entry:{player:"SYSTEM",actionType:"NEW_ROUND",source:`Round ${t}`,target:"N/A",outcome:"New round begins."}},{type:"SHOW_ROUND_START_MODAL",turn:t}];return{newState:h,uiEffects:p}},Ww=(e,t,n)=>{const r={...e.dronesOnBoard};for(const i in r)r[i]=r[i].map(s=>{const l=Tr(s,i,e,t,n);return{...s,statMods:s.statMods?s.statMods.filter(u=>u.type==="permanent"):[],isExhausted:!1,currentShields:l.maxShields}});return{...e,dronesOnBoard:r}},By=(e,t,n,r,i)=>({...Ww(e,r,i),energy:n.totals.energyPerTurn,initialDeploymentBudget:0,deploymentBudget:n.totals.deploymentBudget}),Uy=(e,t)=>{let n=[...e.deck],r=[...e.hand],i=[...e.discardPile];for(;r.length<t;){if(n.length===0)if(i.length>0)n=[...i].sort(()=>.5-Math.random()),i=[];else break;r.push(n.pop())}return{...e,deck:n,hand:r,discardPile:i}},lk=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,passInfo:u,placedSections:f,opponentPlacedSections:h}=e,{addLogEntry:p,setPlayer2:m,setPendingAttack:g,endTurn:x,endDeploymentPhase:S,endActionPhase:A,setPassInfo:C}=n;let P;return l==="deployment"&&!u.player2Passed?P=t.handleOpponentTurn({player1:r,player2:i,turn:s,opponentPlacedSections:h,placedSections:f,getShipStatus:Mi,calculateEffectiveShipStats:Fa,calculateEffectiveStats:Tr,addLogEntry:p}):l==="action"&&!u.player2Passed&&(P=t.handleOpponentAction({player1:r,player2:i,placedSections:f,opponentPlacedSections:h,getShipStatus:Mi,getLaneOfDrone:Gn,getValidTargets:Mc,calculateEffectiveStats:Tr,addLogEntry:p})),P||null},ck=(e,t,n)=>{const{player1:r,player2:i,turn:s,turnPhase:l,placedSections:u,opponentPlacedSections:f}=t,{addLogEntry:h,setPlayer2:p,setPendingAttack:m,endTurn:g,endDeploymentPhase:x,endActionPhase:S,setPassInfo:A,resolveCardPlay:C}=n;if(e.type==="pass"){const P=!t.passInfo.player1Passed,O={...t.passInfo,player2Passed:!0,firstPasser:t.passInfo.firstPasser||(P?"player2":null)};return A(O),O.player1Passed?l==="deployment"?x():l==="action"&&S():g("player2"),{newPassInfo:O}}else if(e.type==="deploy"){const{droneToDeploy:P,targetLane:O,logContext:T}=e.payload;h({player:i.name,actionType:"DEPLOY",source:P.name,target:O,outcome:`Deployed to ${O}.`},"aiDeploymentDeploy",T);const j=Xw(P,O,i,r,s,{player1:u,player2:f});return j.success&&(p(j.newPlayerState),g("player2")),{deployedDrone:j.deployedDrone}}else if(e.type==="action"){const P=e.payload,{logContext:O}=e;switch(P.type){case"play_card":C(P.card,P.target,"player2",O);break;case"attack":m({attacker:P.attacker,target:P.target,targetType:P.targetType,lane:P.attacker.lane,attackingPlayer:"player2",aiContext:O});break;case"move":{const{drone:T,fromLane:j,toLane:N}=P;h({player:i.name,actionType:"MOVE",source:T.name,target:N,outcome:`Moved from ${j} to ${N}.`},"aiActionMove",O);let D=JSON.parse(JSON.stringify(i));D.dronesOnBoard[j]=D.dronesOnBoard[j].filter(U=>U.id!==T.id);const M={...T,isExhausted:!0};D.dronesOnBoard[N].push(M);const{newState:R}=Yw(D,M,j,N,h);R.dronesOnBoard=al(R,r,{player1:u,player2:f}),p(R),g("player2");break}default:g("player2");break}return{action:P}}return null},Qw=(e,t,n,r,i,s,l,u)=>{const{cost:f,effect:h}=e,{logCallback:p,applyOnMoveEffectsCallback:m,updateAurasCallback:g}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=f,x.hand=x.hand.filter(P=>P.instanceId!==e.instanceId),x.discardPile.push(e);const S=new Set(t.map(P=>P.id));x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(P=>!S.has(P.id));const A=t.map(P=>({...P,isExhausted:P.isExhausted||!h.properties?.includes("DO_NOT_EXHAUST")}));x.dronesOnBoard[r].push(...A),p({player:i.name,actionType:"MULTI_MOVE",source:e.name,target:`${t.map(P=>P.name).join(", ")}`,outcome:`Moved ${t.length} drone(s) from ${n} to ${r}.`},"resolveMultiMove");let C=x;return A.forEach(P=>{const{newState:O}=m(C,P,n,r,p);C=O}),C.dronesOnBoard=g(C,s,l),{newPlayerState:C,shouldEndTurn:!0,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},Zw=(e,t,n,r,i,s,l,u)=>{const{cost:f,effect:h}=e,{logCallback:p,applyOnMoveEffectsCallback:m,updateAurasCallback:g}=u;let x=JSON.parse(JSON.stringify(i));x.energy-=f,x.hand=x.hand.filter(C=>C.instanceId!==e.instanceId),x.discardPile.push(e),x.dronesOnBoard[n]=x.dronesOnBoard[n].filter(C=>C.id!==t.id);const S={...t,isExhausted:h.properties?.includes("DO_NOT_EXHAUST")?t.isExhausted:!0};x.dronesOnBoard[r].push(S),p({player:i.name,actionType:"MOVE",source:e.name,target:t.name,outcome:`Moved from ${n} to ${r}.`},"resolveSingleMove");const{newState:A}=m(x,S,n,r,p);return A.dronesOnBoard=g(A,s,l),{newPlayerState:A,shouldEndTurn:!e.effect.goAgain,shouldCancelCardSelection:!0,shouldClearMultiSelectState:!0}},uk=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];return e.cost&&(i.energy-=e.cost),r},Jw=(e,t)=>{let n=1;if(e==="OWN_DAMAGED_SECTIONS")for(const r in t.shipSections){const i=t.shipSections[r],s=Mi(i);(s==="damaged"||s==="critical")&&n++}return n},dk=(e,t,n,r,i,s)=>{const{logCallback:l,explosionCallback:u,hitAnimationCallback:f,resolveAttackCallback:h}=s,p=t?t.name||t.id:"N/A";let m="Card effect applied.";const g=e.effect;if(g.type==="DRAW"&&(m=`Drew ${g.value} card(s).`),g.type==="GAIN_ENERGY"&&(m=`Gained ${g.value} energy.`),g.type==="HEAL_HULL"&&(m=`Healed ${g.value} hull on ${p}.`),g.type==="HEAL_SHIELDS"&&(m=`Healed ${g.value} shields on ${p}.`),g.type==="READY_DRONE"&&(m=`Readied ${p}.`),g.type==="DAMAGE"&&(g.scope==="FILTERED"?m=`Dealt ${g.value} damage to filtered targets in ${p}.`:m=`Dealt ${g.value} damage to ${p}.`),g.type==="MODIFY_STAT"){const C=g.mod,P=C.type==="temporary"?" until the end of the turn":" permanently";m=`Gave ${p} a ${C.value>0?"+":""}${C.value} ${C.stat} bonus${P}.`}if(g.type==="REPEATING_EFFECT"){const C=r[n],P=Jw(g.condition,C);m=`Drew ${P} card(s) and gained ${P} energy based on damaged sections.`}l&&l({player:r[n].name,actionType:"PLAY_CARD",source:e.name,target:p,outcome:m});let x=uk(e,n,r);const S=fk(e.effect,t,n,x,i,s,e),A=[];if(e.visualEffect&&t){let C=null,P=null,O=null;for(const T of["player1","player2"]){for(const j in x[T].dronesOnBoard)if(x[T].dronesOnBoard[j].some(N=>N.id===t.id)){C=T,P=j,O="drone";break}if(C)break}if(!C){for(const T of["player1","player2"])if(x[T].shipSections[t.name]||x[T].shipSections[t.id]){C=T,O="section";break}}A.push({type:"CARD_VISUAL",cardId:e.id,cardName:e.name,visualType:e.visualEffect.type,sourceId:n==="player1"?"player1-hand":"player2-hand",sourcePlayer:n,targetId:t.id,targetPlayer:C,targetLane:P,targetType:O,duration:e.visualEffect.duration||800,timestamp:Date.now()})}if(S.animationEvents&&A.push(...S.animationEvents),console.log("[ANIMATION EVENTS] resolveCardPlay emitted:",A),!S.needsCardSelection){const C=eO(e,n,S.newPlayerStates);return{newPlayerStates:C.newPlayerStates,shouldEndTurn:C.shouldEndTurn,additionalEffects:S.additionalEffects||[],animationEvents:A,needsCardSelection:!1}}return{newPlayerStates:x,shouldEndTurn:!1,additionalEffects:S.additionalEffects||[],animationEvents:A,needsCardSelection:S.needsCardSelection}},eO=(e,t,n)=>{const r={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},i=r[t];i.hand=i.hand.filter(l=>l.instanceId!==e.instanceId),i.discardPile.push(e);const s=!e.effect.goAgain;return{newPlayerStates:r,shouldEndTurn:s}},fk=(e,t,n,r,i,s,l=null)=>e.effects?hk(e,t,n,r,i,s,l):tO(e,t,n,r,i,s,l),hk=(e,t,n,r,i,s,l=null)=>{let u=r,f=[];if(e.type==="REPEATING_EFFECT"){const h=Jw(e.condition,u[n]);for(let p=0;p<h;p++)for(const m of e.effects){const g=tO(m,t,n,u,i,s,l);u=g.newPlayerStates,g.additionalEffects&&f.push(...g.additionalEffects)}}return{newPlayerStates:u,additionalEffects:f}},tO=(e,t,n,r,i,s,l=null)=>{switch(e.type){case"DRAW":return Yv(e,null,t,n,r);case"SEARCH_AND_DRAW":return nO(e,null,t,n,r);case"GAIN_ENERGY":return pk(e,n,r,i);case"READY_DRONE":return mk(e,t,n,r);case"HEAL_HULL":return qv(e,null,t,n,r,i);case"HEAL_SHIELDS":return gk(e,t,n,r);case"DAMAGE":return Xf(e,null,t,n,r,i,s,l);case"DESTROY":return vk(e,t,n,r);case"MODIFY_STAT":return bk(e,t,n,r);case"MODIFY_DRONE_BASE":return xk(e,t,n,r);case"DESTROY_UPGRADE":return Sk(e,t,n,r);case"SINGLE_MOVE":case"MULTI_MOVE":return Pk(e,t,n,r,i,s,l);default:return console.warn(`Unknown effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[]}}},pk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(n.player1)),player2:JSON.parse(JSON.stringify(n.player2))},l=s[t],u=t==="player1"?r.player1:r.player2,f=Fa(l,u).totals,h=Math.min(f.maxEnergy,l.energy+e.value);return l.energy=h,{newPlayerStates:s,additionalEffects:[]}},mk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n];for(const u in l.dronesOnBoard){const f=l.dronesOnBoard[u].findIndex(h=>h.id===t.id);if(f!==-1){l.dronesOnBoard[u][f].isExhausted=!1;break}}return{newPlayerStates:s,additionalEffects:[]}},gk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n];for(const u in l.dronesOnBoard){const f=l.dronesOnBoard[u].findIndex(h=>h.id===t.id);if(f!==-1){const h=l.dronesOnBoard[u][f];h.currentShields=Math.min(h.currentMaxShields||h.shields,h.currentShields+e.value);break}}return{newPlayerStates:s,additionalEffects:[]}},yk=(e,t,n,r,i,s=null)=>{const{resolveAttackCallback:l}=i;if(e.scope==="FILTERED"&&t.id.startsWith("lane")&&e.filter){const u=t.id,h=(s?.affinity||e.affinity)==="ENEMY"?n==="player1"?"player2":"player1":n,m=r[h].dronesOnBoard[u]||[];console.log(`[DEBUG] Filtered damage - ${n} targeting ${h} ${u}`),console.log(`[DEBUG] Drones in ${h} ${u}:`,m.map(T=>`${T.name}(${T.id}) [${T.hull}hp, ${T.speed}spd]`));const{stat:g,comparison:x,value:S}=e.filter,A={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},P=A[h].dronesOnBoard[u]||[];for(let T=P.length-1;T>=0;T--){const j=P[T];let N=!1;if(x==="GTE"&&j[g]>=S&&(N=!0),x==="LTE"&&j[g]<=S&&(N=!0),console.log(`[DEBUG] ${j.name} ${g}=${j[g]} ${x} ${S} = ${N}`),N){console.log(`[DEBUG] Applying ${e.value} damage to ${j.name}`);const D=j.currentShields||0;let M=e.value;const R=Math.min(M,D);j.currentShields=(j.currentShields||0)-R,M-=R,M>0&&(j.hull-=M),j.hull<=0&&(console.log(`[DEBUG] ${j.name} destroyed`),P.splice(T,1))}}const O=[];for(const T of m){const j=P.find(D=>D.id===T.id);let N=!1;if(x==="GTE"&&T[g]>=S&&(N=!0),x==="LTE"&&T[g]<=S&&(N=!0),N){const D=T.currentShields||0,M=Math.min(e.value,D),R=e.value-M;M>0&&O.push({type:"SHIELD_DAMAGE",targetId:T.id,amount:M,timestamp:Date.now()}),j?R>0&&O.push({type:"HULL_DAMAGE",targetId:T.id,amount:R,timestamp:Date.now()}):O.push({type:"DRONE_DESTROYED",targetId:T.id,timestamp:Date.now()})}}return{newPlayerStates:A,additionalEffects:[],animationEvents:O}}else{const u=r[t.owner],f=Gn(t.id,u);if(f){console.log(`[DEBUG] Single target damage - ${n} targeting ${t.name} with ${e.value} damage`);const h={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},m=h[t.owner].dronesOnBoard[f]||[],g=m.find(x=>x.id===t.id);if(g){let x=e.value,S=0,A=x;if(e.damageType!=="PIERCING"&&(S=Math.min(x,g.currentShields),A-=S,g.currentShields-=S),g.hull-=A,console.log(`[DEBUG] Applied ${A} hull damage to ${g.name} (${g.hull} hull remaining)`),g.hull<=0){console.log(`[DEBUG] ${g.name} destroyed`);const P=m.findIndex(O=>O.id===t.id);P>=0&&m.splice(P,1)}const C=[];return S>0&&C.push({type:"SHIELD_DAMAGE",targetId:t.id,amount:S,timestamp:Date.now()}),g.hull<=0?C.push({type:"DRONE_DESTROYED",targetId:t.id,timestamp:Date.now()}):A>0&&C.push({type:"HULL_DAMAGE",targetId:t.id,amount:A,timestamp:Date.now()}),{newPlayerStates:h,additionalEffects:[],animationEvents:C}}return{newPlayerStates:h,additionalEffects:[],animationEvents:[]}}}return{newPlayerStates:r,additionalEffects:[],animationEvents:[]}},vk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=n==="player1"?"player2":"player1",u=[];if(e.scope==="LANE"&&t.id){const f=t.id;(s[l].dronesOnBoard[f]||[]).forEach(m=>{u.push({type:"DRONE_DESTROYED",targetId:m.id,timestamp:Date.now()});const g=Gs(s[l],m);s[l].deployedDroneCounts={...s[l].deployedDroneCounts||{},...g.deployedDroneCounts}}),s[l].dronesOnBoard[f]=[],(s[n].dronesOnBoard[f]||[]).forEach(m=>{u.push({type:"DRONE_DESTROYED",targetId:m.id,timestamp:Date.now()});const g=Gs(s[n],m);s[n].deployedDroneCounts={...s[n].deployedDroneCounts||{},...g.deployedDroneCounts}}),s[n].dronesOnBoard[f]=[]}else if(e.scope==="SINGLE"&&t&&t.owner!==n){const f=s[l],h=Gn(t.id,f);if(h){const p=f.dronesOnBoard[h].find(m=>m.id===t.id);if(p){u.push({type:"DRONE_DESTROYED",targetId:p.id,timestamp:Date.now()});const m=Gs(f,p);f.deployedDroneCounts={...f.deployedDroneCounts||{},...m.deployedDroneCounts},f.dronesOnBoard[h]=f.dronesOnBoard[h].filter(g=>g.id!==t.id)}}}return{newPlayerStates:s,additionalEffects:[],animationEvents:u}},bk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[t.owner||n],u=e.mod;if(t.id&&typeof t.id=="string"&&t.id.startsWith("lane")){const f=t.id;l.dronesOnBoard[f]&&l.dronesOnBoard[f].forEach(h=>{h.statMods||(h.statMods=[]),h.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"})})}else for(const f in l.dronesOnBoard){const h=l.dronesOnBoard[f].findIndex(p=>p.id===t.id);if(h!==-1){const p=l.dronesOnBoard[f][h];p.statMods||(p.statMods=[]),p.statMods.push({stat:u.stat,value:u.value,type:u.type||"temporary",source:"card"});break}}return{newPlayerStates:s,additionalEffects:[]}},xk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},l=s[n],u=t.name,f=l.appliedUpgrades[u]||[],h={instanceId:`upgrade-${Date.now()}-${Math.random()}`,mod:e.mod};return e.mod.stat==="ability"&&e.mod.abilityToAdd&&(h.grantedAbilities=[e.mod.abilityToAdd]),l.appliedUpgrades={...l.appliedUpgrades,[u]:[...f,h]},{newPlayerStates:s,additionalEffects:[]}},Sk=(e,t,n,r,i)=>{const s={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=s[n==="player1"?"player2":"player1"],{droneName:f,instanceId:h}=t;if(u.appliedUpgrades[f]){const p=u.appliedUpgrades[f].filter(m=>m.instanceId!==h);p.length>0?u.appliedUpgrades[f]=p:delete u.appliedUpgrades[f]}return{newPlayerStates:s,additionalEffects:[]}},Xf=(e,t,n,r,i,s,l,u=null)=>{const{resolveAttackCallback:f}=l;if(e.scope==="FILTERED"&&n.id.startsWith("lane")&&e.filter)return yk(e,n,r,i,l,u?.targeting);const h=n.owner==="player1"?i.player1:i.player2,p=Gn(n.id,h);if(p&&f){const m={attacker:t,target:n,targetType:"drone",attackingPlayer:r||"player1",abilityDamage:e.value,lane:p,damageType:e.damageType},g=oO(m,i,s,l.logCallback,l.explosionCallback,l.hitAnimationCallback);return{newPlayerStates:g.newPlayerStates,additionalEffects:g.afterAttackEffects||[],animationEvents:g.animationEvents||[]}}return{newPlayerStates:i,additionalEffects:[],animationEvents:[]}},qv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},f=r||"player1";if(e.scope==="LANE"){const h=n.id;u[f].dronesOnBoard[h]&&u[f].dronesOnBoard[h].forEach(p=>{const m=Pn.find(g=>g.name===p.name);m&&p.hull<m.hull&&(p.hull=Math.min(m.hull,p.hull+e.value))})}else{const h=Pn.find(p=>p.name===n.name);if(h){const p=Gn(n.id,u[f]);if(p){const m=u[f].dronesOnBoard[p].findIndex(g=>g.id===n.id);m!==-1&&(u[f].dronesOnBoard[p][m].hull=Math.min(h.hull,u[f].dronesOnBoard[p][m].hull+e.value))}}else if(n.name&&u[f].shipSections[n.name]){const p=u[f].shipSections[n.name],g=(f==="player1"?s.player1:s.player2).find(x=>x.name===n.name);g&&(p.hull=Math.min(g.maxHull,p.hull+e.value))}}return{newPlayerStates:u,additionalEffects:[]}},Yv=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},f=r||"player1",h=u[f];let p=[...h.deck],m=[...h.hand],g=[...h.discardPile];const x=e.value&&typeof e.value=="object"&&e.value.draw||e.value||1;for(let A=0;A<x;A++){if(p.length===0)if(g.length>0)p=[...g].sort(()=>.5-Math.random()),g=[];else break;p.length>0&&m.push(p.pop())}u[f]={...h,deck:p,hand:m,discardPile:g};const S={newPlayerStates:u,additionalEffects:[]};return e.value&&e.value.discard&&(S.needsDiscardSelection=e.value.discard),S},Ak=(e,t)=>!(t.type&&e.type!==t.type||t.maxCost!==void 0&&e.cost>t.maxCost||t.minCost!==void 0&&e.cost<t.minCost||t.effectType&&e.effect?.type!==t.effectType||t.name&&e.name!==t.name),nO=(e,t,n,r,i,s,l)=>{const u={player1:JSON.parse(JSON.stringify(i.player1)),player2:JSON.parse(JSON.stringify(i.player2))},f=r||"player1",h=u[f];let p=[...h.deck],m=[...h.discardPile],g,x;if(e.filter)p.length===0&&m.length>0&&(p=[...m.sort(()=>.5-Math.random())],m=[]),g=p.filter(A=>Ak(A,e.filter)).slice(0,e.searchCount),x=p.filter(A=>!g.includes(A));else{const S=e.searchCount;p.length<S&&m.length>0&&(p=[...p,...m.sort(()=>.5-Math.random())],m=[]),g=p.slice(-e.searchCount).reverse(),x=p.slice(0,-e.searchCount)}if(f==="player2"){const S=Ek(g,e.drawCount,u),A=g.filter(O=>!S.includes(O)),C=[...h.hand,...S];let P=[...x,...A];return e.shuffleAfter&&(P=P.sort(()=>.5-Math.random())),u[f]={...h,deck:P,hand:C,discardPile:m},{newPlayerStates:u,additionalEffects:[]}}else return{newPlayerStates:i,additionalEffects:[],needsCardSelection:{type:"search_and_draw",searchedCards:g,drawCount:e.drawCount,shuffleAfter:e.shuffleAfter,remainingDeck:x,discardPile:m,filter:e.filter}}},Ek=(e,t,n,r)=>e.map(s=>({card:s,score:Ck(s,n.player2,n.player1)})).sort((s,l)=>l.score-s.score).slice(0,t).map(s=>s.card),Ck=(e,t,n,r)=>{let i=0;if(e.cost>t.energy)return-100;switch(e.effect?.type){case"DAMAGE":i=15+(e.effect.value||0)*3;break;case"DRAW":i=12+(e.effect.value||0)*2;break;case"GAIN_ENERGY":i=8+(e.effect.value||0)*2;break;case"HEAL_HULL":i=10;break;case"DESTROY":i=20;break;default:i=5}return i-=e.cost,i},Pk=(e,t,n,r,i,s,l)=>{if(n==="player1")return{newPlayerStates:r,additionalEffects:[],needsCardSelection:{type:e.type==="SINGLE_MOVE"?"single_move":"multi_move",card:l,effect:e,maxDrones:e.type==="MULTI_MOVE"?e.count:1,doNotExhaust:e.properties?.includes("DO_NOT_EXHAUST")||!1,phase:e.type==="SINGLE_MOVE"?"select_drone":"select_source_lane"}};const u=n==="player1"?"player2":"player1",f=r[n],h=r[u];let p=null,m=-1/0;for(const g of["lane1","lane2","lane3"]){const S=(f.dronesOnBoard[g]||[]).filter(A=>!A.isExhausted);if(S.length!==0)for(const A of["lane1","lane2","lane3"]){if(g===A)continue;if(e.type==="SINGLE_MOVE"){const T=parseInt(g.replace("lane","")),j=parseInt(A.replace("lane",""));if(Math.abs(T-j)!==1)continue}const C=h.dronesOnBoard[A]?.length||0,P=f.dronesOnBoard[A]?.length||0,O=C*10-P*5;O>m&&(m=O,p={fromLane:g,toLane:A,drones:e.type==="SINGLE_MOVE"?[S[0]]:S.slice(0,Math.min(e.count||3,S.length))})}}if(!p)return{newPlayerStates:r,additionalEffects:[]};if(e.type==="SINGLE_MOVE"){const g=Zw(l,p.drones[0],p.fromLane,p.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:g.newPlayerState},additionalEffects:[]}}else{const g=Qw(l,p.drones,p.fromLane,p.toLane,r[n],r[u],i,s);return{newPlayerStates:{...r,[n]:g.newPlayerState},additionalEffects:[]}}},rO=(e,t,n,r,i,s)=>{switch(e.type){case"HEAL":return qv(e,t,n,"player1",r,i);case"DAMAGE":return Xf(e,t,n,"player1",r,i,s);default:return console.warn(`Unknown drone ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},aO=(e,t,n,r,i,s)=>{const l={name:t};switch(e.type){case"DAMAGE":return Xf(e,l,n,"player1",r,i,s);case"RECALL_DRONE":return iO(e,t,n,r,i);case"DRAW_THEN_DISCARD":return Yv(e,l,n,"player1",r);default:return console.warn(`Unknown ship ability effect type: ${e.type}`),{newPlayerStates:r,additionalEffects:[],animationEvents:[]}}},iO=(e,t,n,r,i,s)=>{const l={player1:JSON.parse(JSON.stringify(r.player1)),player2:JSON.parse(JSON.stringify(r.player2))},u=Gn(n.id,l.player1);return u&&(l.player1.dronesOnBoard[u]=l.player1.dronesOnBoard[u].filter(f=>f.id!==n.id),Object.assign(l.player1,qw(l.player1,n)),l.player1.dronesOnBoard=al(l.player1,l.player2,i)),{newPlayerStates:l,additionalEffects:[],animationEvents:[]}},oO=(e,t,n,r,i,s)=>{const{attacker:l,target:u,targetType:f,interceptor:h,attackingPlayer:p,abilityDamage:m,goAgain:g,damageType:x,lane:S}=e,A=m!==void 0,C=h||u,P=h?"drone":f,O=p,T=C.owner||(O==="player1"?"player2":"player1"),j=t[O],N=t[T];let D=null,M=null;!A&&l&&l.id&&(D=Gn(l.id,j),M=Tr(l,D,j,N,n));let R=m??(M?Math.max(0,M.attack):0),U=x||(l?l.damageType:void 0);M&&M.keywords&&M.keywords.has("PIERCING")&&(U="PIERCING"),P==="section"&&!m&&l&&l.name&&Pn.find(ne=>ne.name===l.name)?.abilities?.forEach(ne=>{ne.type==="PASSIVE"&&ne.effect.type==="BONUS_DAMAGE_VS_SHIP"&&(R+=ne.effect.value)});let K=0,q=0,W=!1,le=0,ie=0;if(P==="drone"){let F=null;for(const ne in N.dronesOnBoard)if(F=N.dronesOnBoard[ne].find(me=>me.id===C.id),F)break;if(F){let ne=R;U!=="PIERCING"&&(K=Math.min(R,F.currentShields),ne-=K),q=Math.min(ne,F.hull),W=F.hull-q<=0,le=F.currentShields-K,ie=W?0:F.hull-q}}else{const F=N.shipSections[C.name];if(F){let ne=R;U!=="PIERCING"&&(K=Math.min(R,F.allocatedShields),ne-=K),q=Math.min(ne,F.hull),W=F.hull-q<=0,le=F.allocatedShields-K,ie=W?0:F.hull-q}}const te=`Dealt ${K} shield and ${q} hull damage to ${C.name}.`+(P==="drone"?W?` ${C.name} Destroyed.`:` ${C.name} has ${le} shields and ${ie} hull left.`:""),L=[];if(l&&l.id&&!A&&L.push({type:"DRONE_ATTACK_START",sourceId:l.id,sourcePlayer:O,sourceLane:D,targetId:C.id,targetPlayer:T,targetLane:P==="drone"?Gn(C.id,N):null,targetType:P,attackValue:M?M.attack:1,timestamp:Date.now()}),K>0){const F={type:"SHIELD_DAMAGE",targetId:C.id,targetPlayer:T,targetLane:P==="drone"?Gn(C.id,N):null,targetType:P,amount:K,timestamp:Date.now()};L.push(F)}if(W){const F={type:P==="drone"?"DRONE_DESTROYED":"SECTION_DESTROYED",targetId:C.id,targetPlayer:T,targetLane:P==="drone"?Gn(C.id,N):null,targetType:P,timestamp:Date.now()};L.push(F)}else{if(q>0){const F={type:"HULL_DAMAGE",targetId:C.id,targetPlayer:T,targetLane:P==="drone"?Gn(C.id,N):null,targetType:P,amount:q,timestamp:Date.now()};L.push(F)}P==="section"&&(K>0||q>0)&&L.push({type:"SECTION_DAMAGED",targetId:C.id,targetPlayer:T,targetType:"section",timestamp:Date.now()}),l&&l.id&&!A&&L.push({type:"DRONE_RETURN",sourceId:l.id,sourcePlayer:O,sourceLane:D,timestamp:Date.now()})}console.log("[ANIMATION EVENTS] resolveAttack emitted:",L);const ee=D||(S?S.replace("lane","Lane "):null),he=P==="drone"?`${C.name} (${ee})`:C.name,Se=l&&l.name?`${l.name} (${ee})`:"Card Effect";r&&r({player:t[O].name,actionType:"ATTACK",source:Se,target:he,outcome:te});const k={player1:JSON.parse(JSON.stringify(t.player1)),player2:JSON.parse(JSON.stringify(t.player2))};let J=[];if(P==="drone"){let F=!1;for(const ne in k[T].dronesOnBoard){const me=k[T].dronesOnBoard[ne].findIndex(z=>z.id===C.id);if(me!==-1){if(k[T].dronesOnBoard[ne][me].hull-q<=0){F=!0,J.push({type:"EXPLOSION",payload:{targetId:C.id}});const z=k[T].dronesOnBoard[ne][me];k[T].dronesOnBoard[ne]=k[T].dronesOnBoard[ne].filter(ae=>ae.id!==C.id),Object.assign(k[T],Gs(k[T],z))}else J.push({type:"HIT_ANIMATION",payload:{targetId:C.id}}),k[T].dronesOnBoard[ne][me].hull-=q,k[T].dronesOnBoard[ne][me].currentShields-=K;break}}if(F){const ne=T==="player1"?k.player2:k.player1;k[T].dronesOnBoard=al(k[T],ne,n)}}else{k[T].shipSections[C.name].hull-=q,k[T].shipSections[C.name].allocatedShields-=K;const F=T==="player1"?n.player1:n.player2,ne=Fa(k[T],F).totals;k[T].energy>ne.maxEnergy&&(k[T].energy=ne.maxEnergy)}if(!A&&l&&l.id){let F=!1;for(const ne in k[O].dronesOnBoard){const me=k[O].dronesOnBoard[ne].findIndex(z=>z.id===l.id);if(me!==-1){k[O].dronesOnBoard[ne][me].isExhausted=!0,F=!0;break}}if(F){const ne=Fw(k[O],l);k[O]=ne.newState,J=[...J,...ne.effects]}}if(h){const F=O==="player1"?"player2":"player1";for(const ne in k[F].dronesOnBoard){const me=k[F].dronesOnBoard[ne].findIndex(z=>z.id===h.id);if(me!==-1){Tr(k[F].dronesOnBoard[ne][me],ne,k[F],k[O],n).keywords.has("DEFENDER")||(k[F].dronesOnBoard[ne][me].isExhausted=!0);break}}}return{newPlayerStates:k,attackResult:{attackerName:l&&l.name?l.name:"Card Effect",lane:D||S,targetName:C.name,targetType:P,interceptorName:h?h.name:null,shieldDamage:K,hullDamage:q,wasDestroyed:W,remainingShields:le,remainingHull:ie,outcome:te,shouldEndTurn:!g},afterAttackEffects:J,animationEvents:L}},wk=(e,t)=>{const n=Fa(e,t).totals;let r=[...e.deck],i=[...e.hand],s=[...e.discardPile];const l=n.handLimit;for(;i.length<l;){if(r.length===0)if(s.length>0)r=[...s].sort(()=>.5-Math.random()),s=[];else break;const u=r.pop();i.push(u)}return{...e,deck:r,hand:i,discardPile:s}},Wf=(e,t,n)=>t||(e===1?Math.random()<.5?"player1":"player2":n||"player1"),Ok=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};let n=[...e.hand];const r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++){const l=n.splice(Math.floor(Math.random()*n.length),1)[0];r.push(l)}return{...e,hand:n,discardPile:r,discardCount:i}},Tk=(e,t,n,r)=>{const i=e.hand.length>n.handLimit,s=t.hand.length>r.handLimit;return{player1NeedsDiscard:i,player1DiscardCount:i?e.hand.length-n.handLimit:0,player2NeedsDiscard:s,player2DiscardCount:s?t.hand.length-r.handLimit:0}},_k=(e,t)=>{const n={};for(const r of["player1","player2"]){const i=e[r],s=t[r],l=i.hand.length>s.totals.handLimit,u=l?i.hand.length-s.totals.handLimit:0;n[r]={needsDiscard:l,discardCount:u,currentHandSize:i.hand.length,handLimit:s.totals.handLimit}}return n.hasAnyViolations=n.player1.needsDiscard||n.player2.needsDiscard,n},Dk=(e,t)=>{if(e.hand.length<=t)return{...e,discardCount:0};const n=[...e.hand],r=[...e.discardPile],i=n.length-t;for(let s=0;s<i;s++)if(n.length>0){const l=Math.floor(Math.random()*n.length),u=n.splice(l,1)[0];r.push(u)}return{...e,hand:n,discardPile:r,discardCount:i}},Nk=(e,t,n=null)=>{if(t<=0)return{...e,discardCount:0};const r=[...e.hand],i=[...e.discardPile];let s=0;if(n&&n.length>0)n.forEach(l=>{const u=r.findIndex(f=>f.instanceId===l.instanceId||f.name===l.name&&f.id===l.id);if(u!==-1&&s<t){const f=r.splice(u,1)[0];i.push(f),s++}});else for(let l=0;l<t&&r.length>0;l++){const u=Math.floor(Math.random()*r.length),f=r.splice(u,1)[0];i.push(f),s++}return{...e,hand:r,discardPile:i,discardCount:s}},sO=(e,t)=>{const{phase:n,sourceLane:r,card:i}=e;let s=[];if(i.effect.type==="SINGLE_MOVE"){if(n==="select_drone")Object.values(t.dronesOnBoard).flat().forEach(l=>{l.isExhausted||s.push({...l,owner:"player1"})});else if(n==="select_destination"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const f=parseInt(u.replace("lane",""),10);Math.abs(l-f)===1&&s.push({id:u,owner:"player1"})})}}else if(n==="select_source_lane")["lane1","lane2","lane3"].forEach(l=>{t.dronesOnBoard[l].length>0&&s.push({id:l,owner:"player1"})});else if(n==="select_drones")t.dronesOnBoard[r].filter(l=>!l.isExhausted).forEach(l=>{s.push({...l,owner:"player1"})});else if(n==="select_destination_lane"){const l=parseInt(r.replace("lane",""),10);["lane1","lane2","lane3"].forEach(u=>{const f=parseInt(u.replace("lane",""),10);Math.abs(l-f)===1&&s.push({id:u,owner:"player1"})})}return s},lO=(e,t)=>t.activeDronePool.map(n=>{const r=Pn.find(u=>u.name===n.name),i=t.appliedUpgrades[n.name]||[],s=i.filter(u=>u.id===e.id).length,l=e.maxApplications===void 0?1:e.maxApplications;return r&&i.length<r.upgradeSlots&&s<l?{...n,id:n.name}:null}).filter(Boolean),cO=(e,t)=>{let n=[];const{phase:r,sourceLane:i}=e||{phase:"select_source_lane"};return r==="select_source_lane"?["lane1","lane2","lane3"].forEach(s=>{t.dronesOnBoard[s].length>0&&n.push({id:s,owner:"player1"})}):r==="select_drones"?t.dronesOnBoard[i]?.forEach(s=>{n.push({...s,owner:"player1"})}):r==="select_destination_lane"&&["lane1","lane2","lane3"].forEach(s=>{s!==i&&n.push({id:s,owner:"player1"})}),n},jk=(e,t,n,r,i,s)=>{let l=[],u=[];return e?l=Mc("player1",e.drone,e.ability,i,s):t?l=Mc("player1",{id:t.sectionName},t.ability,i,s):n?u=sO(n,i):r&&(r.type==="Upgrade"?u=lO(r,i):r.effect.type==="MULTI_MOVE"?u=cO(n,i):u=Mc("player1",null,r,i,s)),{validAbilityTargets:l,validCardTargets:u}},Mk=e=>({type:"EXPLOSION",targetId:e,duration:1e3,timestamp:Date.now()}),kk=(e,t,n,r)=>{const i=Hv(e,t,n,r),s=[];switch(i.type){case"CHANGE_PLAYER":i.nextPlayer==="player1"?s.push({type:"CLOSE_MODAL"}):i.showOpponentModal&&s.push({type:"SHOW_MODAL",modal:{title:"Opponent's Turn",text:"The AI is taking its turn.",isBlocking:!1,onClose:null}});break}return i.triggerAi&&s.push({type:"TRIGGER_AI"}),{transition:i,uiEffects:s}},ke={initialPlayerState:FM,buildDeckFromList:Hw,getEffectiveSectionMaxShields:zv,getShipStatus:Mi,onDroneDestroyed:Gs,onDroneRecalled:qw,checkWinCondition:$y,calculateAfterAttackStateAndEffects:Fw,applyOnMoveEffects:Yw,updateAuras:al,getLaneOfDrone:Gn,getValidTargets:Mc,calculateAllValidTargets:jk,calculateMultiSelectTargets:sO,calculateUpgradeTargets:lO,calculateMultiMoveTargets:cO,validateDeployment:Vw,validateShieldRemoval:Kw,validateShieldAddition:Gv,executeShieldReallocation:VM,getValidShieldReallocationTargets:KM,processShieldAllocation:XM,processResetShieldAllocation:WM,processEndShieldAllocation:QM,resolveAttack:oO,resolveAbility:ZM,resolveShipAbility:JM,executeDeployment:Xw,resolveCardPlay:dk,finishCardPlay:eO,resolveMultiMove:Qw,resolveSingleMove:Zw,checkGameStateForWinner:ek,calculatePotentialInterceptors:tk,calculateAiInterception:rk,calculateTurnTransition:Hv,calculatePassTransition:ak,readyDronesAndRestoreShields:Ww,calculateNewRoundPlayerState:By,drawToHandLimit:Uy,drawPlayerCards:wk,determineFirstPlayer:Wf,enforceHandLimit:Ok,checkHandLimitCompliance:Tk,checkHandLimitViolations:_k,enforceHandLimits:Dk,processDiscardPhase:Nk,processTurnTransition:ik,processPhaseChange:ok,processRoundStart:sk,createExplosionEffect:Mk,createTurnEndEffects:kk,resolveUnifiedDamageEffect:Xf,resolveUnifiedHealEffect:qv,resolveUnifiedDrawEffect:Yv,resolveSearchAndDrawEffect:nO,resolveDroneAbilityEffect:rO,resolveShipAbilityEffect:aO,resolveShipRecallEffect:iO,executeAiDeployment:nk,executeAiTurn:lk,executeAiAction:ck},vc=Object.freeze(Object.defineProperty({__proto__:null,gameEngine:ke,startingDecklist:Bs},Symbol.toStringTag,{value:"Module"})),Rk="modulepreload",Ik=function(e){return"/"+e},vA={},sa=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let f=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=f(n.map(h=>{if(h=Ik(h),h in vA)return;vA[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":Rk,p||(g.as="script"),g.crossOrigin="",g.href=h,u&&g.setAttribute("nonce",u),document.head.appendChild(g),p)return new Promise((x,S)=>{g.addEventListener("load",x),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&s(u.reason);return t().catch(s)})};class Lk{constructor(){this.cache=new Map,this.stats={hits:0,misses:0,invalidations:0,totalRequests:0},console.log(" GameDataCache initialized")}generateKey(t,...n){return[t,...n.map(i=>typeof i=="object"&&i!==null?i.id||i.name||JSON.stringify(i):String(i))].join("|")}get(t){return this.stats.totalRequests++,this.cache.has(t)?(this.stats.hits++,this.cache.get(t)):(this.stats.misses++,null)}set(t,n){this.cache.size>1e3&&Array.from(this.cache.keys()).slice(0,200).forEach(i=>this.cache.delete(i)),this.cache.set(t,n)}has(t){return this.cache.has(t)}delete(t){return this.cache.delete(t)}invalidateAll(){const t=this.cache.size;this.cache.clear(),this.stats.invalidations++,t>0&&console.log(` Cache invalidated: ${t} entries cleared`)}invalidateByType(t){const n=[];for(const r of this.cache.keys())r.startsWith(t+"|")&&n.push(r);n.forEach(r=>this.cache.delete(r)),n.length>0&&console.log(` Cache invalidated: ${n.length} ${t} entries cleared`)}getStats(){const t=this.stats.totalRequests>0?(this.stats.hits/this.stats.totalRequests*100).toFixed(2):0;return{...this.stats,hitRate:`${t}%`,cacheSize:this.cache.size}}resetStats(){this.stats={hits:0,misses:0,invalidations:0,totalRequests:0}}size(){return this.cache.size}}const $k=new Lk;class Vt{static instance=null;static getInstance(t){return Vt.instance||(Vt.instance=new Vt(t)),Vt.instance}static reset(){Vt.instance&&Vt.instance.stateSubscriptionCleanup&&Vt.instance.stateSubscriptionCleanup(),Vt.instance=null,console.log(" GameDataService singleton reset")}constructor(t){if(Vt.instance)return console.warn(" GameDataService already exists. Use getInstance() instead of new GameDataService()"),Vt.instance;this.gameStateManager=t,this.cache=$k,this.stateSubscriptionCleanup=this.gameStateManager.subscribe(()=>{this.cache.invalidateAll()}),console.log(" GameDataService initialized")}getEffectiveStats(t,n){if(!t||!n)return{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set};const r=this.cache.generateKey("effectiveStats",t.id||t.name,n),i=this.cache.get(r);if(i)return i;const s=this.gameStateManager.getState(),l=this.gameStateManager.getLocalPlayerId(),u=this.gameStateManager.getOpponentPlayerId(),f=s[l],h=s[u],p=this.getPlacedSectionsForEngine(),m=this.isDroneOwnedByPlayer(t,f),S=Tr(t,n,m?f:h,m?h:f,p);return this.cache.set(r,S),S}getEffectiveShipStats(t,n=[]){if(!t)return{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}};const r=this.getPlayerIdFromState(t),i=Array.isArray(n)?n.join(","):"none",s=this.cache.generateKey("effectiveShipStats",r,i),l=this.cache.get(s);if(l)return l;const u=Fa(t,n);return this.cache.set(s,u),u}getPlacedSectionsForEngine(){const t=this.gameStateManager.getState(),n=this.gameStateManager.getLocalPlayerId(),r=this.gameStateManager.getOpponentPlayerId();return{[n]:n==="player1"?t.placedSections:t.opponentPlacedSections,[r]:r==="player1"?t.placedSections:t.opponentPlacedSections}}isDroneOwnedByPlayer(t,n){if(!t||!n)return!1;for(const r of["lane1","lane2","lane3"])if((n.dronesOnBoard[r]||[]).some(s=>s.id===t.id||s.name===t.name))return!0;return!1}getPlayerIdFromState(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId();return t===n[r]?r:t===n[i]?i:`player_${JSON.stringify(t.shipSections||{}).length}`}getLaneData(t){const n=this.gameStateManager.getState(),r=this.gameStateManager.getLocalPlayerId(),i=this.gameStateManager.getOpponentPlayerId(),s=n[r],l=n[i],u=(s.dronesOnBoard[t]||[]).map(h=>({...h,effectiveStats:this.getEffectiveStats(h,t),isPlayer:!0})),f=(l.dronesOnBoard[t]||[]).map(h=>({...h,effectiveStats:this.getEffectiveStats(h,t),isPlayer:!1}));return{lane:t,localDrones:u,opponentDrones:f,hasGuardian:this.hasGuardianInLane(t,f)}}hasGuardianInLane(t,n=null){return n||(n=this.getLaneData(t).opponentDrones),n.some(r=>(r.effectiveStats||this.getEffectiveStats(r,t)).keywords.has("GUARDIAN"))}getEffectiveSectionMaxShields(t,n,r=[]){if(!n||!n.shipSections||!n.shipSections[t])return 0;const i=n.shipSections[t];let s=i.shields;return r.indexOf(t)===1&&i.middleLaneBonus&&i.middleLaneBonus["Shields Per Turn"]&&(s+=i.middleLaneBonus["Shields Per Turn"]),s}getCacheStats(){return this.cache.getStats()}clearCache(){this.cache.invalidateAll()}}const Bk=Object.freeze(Object.defineProperty({__proto__:null,default:Vt},Symbol.toStringTag,{value:"Module"}));class Uk{constructor(){this.aiPersonalities=null,this.dronePool=null,this.currentAIPersonality=null,this.gameDataService=null,this.isProcessing=!1,this.turnTimer=null,this.isInitialized=!1,this.stateSubscriptionCleanup=null}initialize(t,n,r,i=null,s=null){if(this.isInitialized){console.log(" AIPhaseProcessor already initialized, skipping...");return}this.stateSubscriptionCleanup&&(this.stateSubscriptionCleanup(),this.stateSubscriptionCleanup=null),this.aiPersonalities=t,this.dronePool=n,this.currentAIPersonality=r,this.actionProcessor=i,this.gameStateManager=s,s&&!this.gameDataService&&(this.gameDataService=Vt.getInstance(s),this.effectiveShipStatsWrapper=(l,u)=>this.gameDataService.getEffectiveShipStats(l,u)),s&&(this.stateSubscriptionCleanup=s.subscribe(l=>{this.checkForAITurn(l.state)})),this.isInitialized=!0,console.log(" AIPhaseProcessor initialized with personality:",r?.name||"Default"),i&&console.log(" AIPhaseProcessor connected to ActionProcessor for execution"),s&&console.log(" AIPhaseProcessor subscribed to GameStateManager for self-triggering")}async processDroneSelection(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processDroneSelection starting...");let r=[];if(n&&n.dronePool&&n.dronePool.length>0){r=n.dronePool.map(u=>{const f=this.dronePool?.find(h=>h.name===u);return f||console.warn(` AI personality references unknown drone: ${u}`),f}).filter(u=>u),console.log(` Using ${n.name} personality drone pool: ${r.length} drones mapped from ${n.dronePool.length} names`);const l=r.map(u=>u.name).join(", ");console.log(` Mapped drones: ${l}`)}else r=this.dronePool?[...this.dronePool]:[],console.log(` Using general drone pool: ${r.length} drones`);if(r.length<5){if(console.error(" Not enough drones available for AI selection:",r.length),n&&n.dronePool){const l=n.dronePool.filter(u=>!this.dronePool?.find(f=>f.name===u));l.length>0&&console.error(` Missing drones from collection: ${l.join(", ")}`),console.error(` Available from personality: ${r.map(u=>u.name).join(", ")}`),console.error(` Expected from personality: ${n.dronePool.join(", ")}`)}throw new Error(`Insufficient drones for AI selection: ${r.length} available, need 5`)}const i=this.selectDronesForAI(r,n),s=i.map(l=>l.name).join(", ");return console.log(` AI selected drones: ${s}`),i}selectDronesForAI(t,n){let r=[];if(n&&n.preferredDrones){const l=t.filter(f=>n.preferredDrones.includes(f.name)),u=Math.min(3,l.length);r=l.slice(0,u),console.log(` AI selected ${r.length} preferred drones:`,r.map(f=>f.name).join(", "))}const i=t.filter(l=>!r.includes(l)),s=5-r.length;if(s>0){const l=this.selectBalancedDrones(i,s,n);r=[...r,...l]}for(;r.length<5&&i.length>0;){const l=Math.floor(Math.random()*i.length),u=i.splice(l,1)[0];r.push(u)}if(r.length!==5)throw new Error(`AI selection failed: only selected ${r.length} of 5 drones`);return r}selectBalancedDrones(t,n,r){const i=[],s=[...t];s.sort((f,h)=>{const p=(f.energyCost||1)+(f.health||0)+(f.attack||0);return(h.energyCost||1)+(h.health||0)+(h.attack||0)-p});const l=r?.aggression||.5,u=r?.economy||.5;for(let f=0;f<n&&s.length>0;f++){let h=0;if(l>.7)h=s.findIndex(p=>(p.attack||0)>2),h===-1&&(h=0);else if(u>.7)h=s.findIndex(p=>(p.energyCost||1)<=2),h===-1&&(h=0);else{const p=Math.min(3,s.length);h=Math.floor(Math.random()*p)}i.push(s.splice(h,1)[0])}return console.log(` AI balanced selection (${n}):`,i.map(f=>f.name).join(", ")),i}async processDeckSelection(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processDeckSelection starting...");let r=[];if(n&&n.decklist&&n.decklist.length>0){console.log(` Using ${n.name} personality decklist`);const{gameEngine:i}=await sa(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>vc);return{gameEngine:s}},void 0);r=i.buildDeckFromList(n.decklist)}else{console.log(" Using standard deck as fallback");const{gameEngine:i,startingDecklist:s}=await sa(async()=>{const{gameEngine:l,startingDecklist:u}=await Promise.resolve().then(()=>vc);return{gameEngine:l,startingDecklist:u}},void 0);r=i.buildDeckFromList(s)}return console.log(` AI selected deck with ${r.length} cards`),r}async processPlacement(t=null){const n=t||this.currentAIPersonality;console.log(" AIPhaseProcessor.processPlacement starting...");const r=["bridge","powerCell","droneControlHub"];console.log(` AI placing ${r.length} ship sections`);const i=this.selectSectionsForPlacement(r,n),s=i.join(", ");return console.log(` AI placement completed: ${s}`),i}selectSectionsForPlacement(t,n){const r=[...t];if(n){if(n.aggression>.7){const s=this.arrangeAggressivePlacement(r);return console.log(" AI using aggressive placement strategy"),s}else if(n.economy>.7){const s=this.arrangeEconomicPlacement(r);return console.log(" AI using economic placement strategy"),s}}const i=this.arrangeBalancedPlacement(r);return console.log(" AI using balanced placement strategy"),i}arrangeAggressivePlacement(t){const n=new Array(3).fill(null),r=[...t],i=["droneControlHub","bridge","powerCell"],s=[0,1,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(f=>f===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeEconomicPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["powerCell","bridge","droneControlHub"],s=[1,2,0];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(f=>f===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}arrangeBalancedPlacement(t){const n=new Array(3).fill(null),r=[...t],i=["bridge","powerCell","droneControlHub"],s=[1,0,2];for(let l=0;l<i.length&&l<r.length;l++){const u=r.findIndex(f=>f===i[l]);u!==-1&&(n[s[l]]=r.splice(u,1)[0])}for(let l=0;l<n.length;l++)!n[l]&&r.length>0&&(n[l]=r.shift());return n}async executeDeploymentTurn(t){if(console.log(" AIPhaseProcessor.executeDeploymentTurn starting..."),this.shouldPass(t,"deployment")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await sa(async()=>{const{aiBrain:s}=await import("./aiLogic-HX-BE7hj.js");return{aiBrain:s}},[]),{gameEngine:r}=await sa(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>vc);return{gameEngine:s}},void 0),i=n.handleOpponentTurn({player1:t.player1,player2:t.player2,turn:t.turn,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,calculateEffectiveShipStats:this.effectiveShipStatsWrapper,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log(" AIPhaseProcessor executing deployment decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"deployment",passInfo:t.passInfo,opponentPlayerId:"player1"}}):i.type==="deploy"&&(await this.actionProcessor.queueAction({type:"deployment",payload:{droneData:i.payload.droneToDeploy,laneId:i.payload.targetLane,playerId:"player2",turn:t.turn}})).success&&await this.actionProcessor.queueAction({type:"turnTransition",payload:{newPlayer:"player1",reason:"deploymentCompleted"}})}async executeActionTurn(t){if(console.log(" AIPhaseProcessor.executeActionTurn starting..."),this.shouldPass(t,"action")){await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}});return}if(!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{aiBrain:n}=await sa(async()=>{const{aiBrain:s}=await import("./aiLogic-HX-BE7hj.js");return{aiBrain:s}},[]),{gameEngine:r}=await sa(async()=>{const{gameEngine:s}=await Promise.resolve().then(()=>vc);return{gameEngine:s}},void 0),i=n.handleOpponentAction({player1:t.player1,player2:t.player2,placedSections:t.placedSections,opponentPlacedSections:t.opponentPlacedSections,getShipStatus:r.getShipStatus,getLaneOfDrone:r.getLaneOfDrone,getValidTargets:r.getValidTargets,gameStateManager:this.gameStateManager,addLogEntry:(s,l,u)=>{this.gameStateManager?.addLogEntry(s,l,u)}});console.log(" AIPhaseProcessor executing action decision:",i),i.type==="pass"?await this.actionProcessor.queueAction({type:"playerPass",payload:{playerId:"player2",playerName:"AI Player",turnPhase:"action",passInfo:t.passInfo,opponentPlayerId:"player1"}}):await this.actionProcessor.queueAction({type:"aiAction",payload:{aiDecision:i}})}async executeOptionalDiscardTurn(t){if(console.log(" AIPhaseProcessor.executeOptionalDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const{gameEngine:n}=await sa(async()=>{const{gameEngine:p}=await Promise.resolve().then(()=>vc);return{gameEngine:p}},void 0),r=t.player2,i=t.opponentPlacedSections;if(!r.hand||r.hand.length===0)return console.log(" AI has no cards, auto-completing optional discard"),{type:"optionalDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:r};const l=this.gameDataService.getEffectiveShipStats(r,i).totals.handLimit;let u={...r},f=[];if(u.hand.length>l){const p=u.hand.length-l;f=u.hand.slice(0,p),u={...u,hand:u.hand.slice(p),discardPile:[...u.discardPile,...f]},console.log(` AI discarding ${p} excess cards to meet hand limit of ${l}`)}u=n.drawToHandLimit(u,l);const h=u.hand.length-(r.hand.length-f.length);return h>0&&console.log(` AI drew ${h} cards to reach hand limit`),{type:"optionalDiscard",cardsToDiscard:f,playerId:"player2",updatedPlayerState:u}}async executeMandatoryDiscardTurn(t){if(console.log(" AIPhaseProcessor.executeMandatoryDiscardTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.handLimit;if(!n.hand||n.hand.length<=s)return console.log(" AI already at/below hand limit, auto-completing mandatory discard"),{type:"mandatoryDiscard",cardsToDiscard:[],playerId:"player2",updatedPlayerState:n};const l=n.hand.length-s;let u=[];return u=[...n.hand].sort((h,p)=>p.cost-h.cost).slice(0,l),console.log(` AI discarding ${u.length} excess cards to meet hand limit`),{type:"mandatoryDiscard",cardsToDiscard:u,playerId:"player2",updatedPlayerState:n}}async executeMandatoryDroneRemovalTurn(t){if(console.log(" AIPhaseProcessor.executeMandatoryDroneRemovalTurn starting..."),!this.actionProcessor)throw new Error("AIPhaseProcessor not properly initialized - missing actionProcessor");const n=t.player2,r=t.opponentPlacedSections,s=this.gameDataService.getEffectiveShipStats(n,r).totals.droneLimit,l=Object.values(n.dronesOnBoard||{}).flat().length;if(l<=s)return console.log(" AI already at/below drone limit, auto-completing mandatory drone removal"),{type:"mandatoryDroneRemoval",dronesToRemove:[],playerId:"player2",updatedPlayerState:n};const u=l-s;let f=[];const h=[];return Object.entries(n.dronesOnBoard||{}).forEach(([p,m])=>{m.forEach(g=>{h.push({...g,lane:p})})}),h.sort((p,m)=>{const g=this.gameDataService.getEffectiveStats(p,p.lane),x=this.gameDataService.getEffectiveStats(m,m.lane);return g.power-x.power}),f=h.slice(0,u),console.log(` AI removing ${f.length} excess drones to meet drone limit`),{type:"mandatoryDroneRemoval",dronesToRemove:f,playerId:"player2",updatedPlayerState:n}}shouldPass(t,n){return t.passInfo&&t.passInfo["player2Passed"]?(console.log(" AI has already passed"),!0):!1}async executePass(t){return console.log(` AIPhaseProcessor: Returning pass decision for ${t} phase`),{type:"pass",phase:t,playerId:"player2"}}checkForAITurn(t){this.isProcessing||t.gameMode!=="local"||!["deployment","action"].includes(t.turnPhase)||t.currentPlayer==="player2"&&(t.passInfo&&t.passInfo.player2Passed||(console.log(` AIPhaseProcessor: Scheduling AI turn for ${t.turnPhase} phase`),clearTimeout(this.turnTimer),this.turnTimer=setTimeout(()=>{this.executeTurn(t)},1500)))}async executeTurn(t){if(this.isProcessing){console.log(" AIPhaseProcessor: Already processing a turn, skipping");return}this.isProcessing=!0;try{console.log(` AIPhaseProcessor: Executing AI turn for ${t.turnPhase} phase`);let n;if(t.turnPhase==="deployment")n=await this.executeDeploymentTurn(t);else if(t.turnPhase==="action")n=await this.executeActionTurn(t);else{console.warn(` AIPhaseProcessor: Unknown sequential phase: ${t.turnPhase}`);return}const r=this.gameStateManager.getState();r.currentPlayer==="player2"&&r.passInfo&&!r.passInfo.player2Passed&&(console.log(" AIPhaseProcessor: AI continues taking turns (either human passed or goAgain card played)"),setTimeout(()=>{this.checkForAITurn(r)},100))}catch(n){console.error(" AIPhaseProcessor: Error executing turn:",n)}finally{this.isProcessing=!1}}getCapabilities(){return{droneSelection:!0,deckSelection:!0,placement:!0,deployment:!0,action:!0,version:"1.2.0"}}}const la=new Uk;class Ra{static instance=null;static getInstance(t){return Ra.instance||(Ra.instance=new Ra(t)),Ra.instance}static reset(){Ra.instance=null,console.log(" ActionProcessor singleton reset")}constructor(t){if(Ra.instance)return console.warn(" ActionProcessor already exists. Use getInstance() instead of new ActionProcessor()"),Ra.instance;this.gameStateManager=t,this.gameDataService=Vt.getInstance(t),this.animationManager=null,this.effectiveStatsWrapper=(n,r)=>this.gameDataService.getEffectiveStats(n,r),this.actionQueue=[],this.isProcessing=!1,this.p2pManager=null,this.actionLocks={attack:!1,ability:!1,deployment:!1,cardPlay:!1,shipAbility:!1,turnTransition:!1,phaseTransition:!1,roundStart:!1,reallocateShields:!1,aiAction:!1,aiTurn:!1,playerPass:!1,aiShipPlacement:!1,commitment:!1,processFirstPlayerDetermination:!1},console.log(" ActionProcessor initialized")}setP2PManager(t){this.p2pManager=t}setAnimationManager(t){this.animationManager=t}async queueAction(t){return new Promise((n,r)=>{this.actionQueue.push({...t,resolve:n,reject:r,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(!(this.isProcessing||this.actionQueue.length===0)){this.isProcessing=!0;try{for(;this.actionQueue.length>0;){const t=this.actionQueue.shift();try{const n=await this.processAction(t);t.resolve(n)}catch(n){console.error("Action processing error:",n),t.reject(n)}}}finally{this.isProcessing=!1}}}async processAction(t){const{type:n,payload:r,isNetworkAction:i=!1}=t,s=this.gameStateManager.getState();if(s.passInfo&&["attack","ability","deployment","cardPlay","shipAbility"].includes(n)){let u=r.playerId||s.currentPlayer;n==="aiTurn"&&r.playerId&&(u=r.playerId);const f=`${u}Passed`;if(s.passInfo[f])throw console.log(`[PASS VALIDATION] Blocking ${n} action - ${u} has already passed`),new Error(`Cannot perform ${n} action: ${u} has already passed`)}if(s.turnPhase==="allocateShields"){if(n==="allocateShield")return console.log(" Processing allocateShield action"),{success:!0,message:"Shield allocation not yet implemented in new system"};if(n==="resetShieldAllocation")return console.log(" Processing resetShieldAllocation action"),{success:!0,message:"Shield reset not yet implemented in new system"};if(n==="endShieldAllocation")return console.log(" Processing endShieldAllocation action"),await this.processCommitment({playerId:r.playerId,phase:"allocateShields",actionData:{shieldAllocation:[]}})}if(this.actionLocks[n])throw new Error(`Action ${n} is currently locked`);!i&&this.p2pManager&&this.p2pManager.isConnected&&this.gameStateManager.get("gameMode")!=="local"&&(console.log("[P2P ACTION] Sending action to peer:",{type:n,payload:r}),this.p2pManager.sendData({type:"ACTION",action:{type:n,payload:r},timestamp:Date.now()})),this.actionLocks[n]=!0;try{switch(n){case"attack":return await this.processAttack(r);case"ability":return await this.processAbility(r);case"move":return await this.processMove(r);case"deployment":return await this.processDeployment(r);case"cardPlay":return await this.processCardPlay(r);case"movementCompletion":return await this.processMovementCompletion(r);case"shipAbility":return await this.processShipAbility(r);case"turnTransition":return await this.processTurnTransition(r);case"phaseTransition":return await this.processPhaseTransition(r);case"roundStart":return await this.processRoundStart(r);case"reallocateShields":return await this.processReallocateShields(r);case"aiAction":return await this.processAiAction(r);case"playerPass":return await this.processPlayerPass(r);case"aiShipPlacement":return await this.processAiShipPlacement(r);case"optionalDiscard":return await this.processOptionalDiscard(r);case"acknowledgeFirstPlayer":return await this.acknowledgeFirstPlayer(r.playerId);case"acknowledgeDeploymentComplete":return await this.acknowledgeDeploymentComplete(r.playerId);case"processFirstPlayerDetermination":return await this.processFirstPlayerDetermination();case"commitment":return await this.processCommitment(r);case"draw":return await this.processDraw(r);case"energyReset":return await this.processEnergyReset(r);default:throw new Error(`Unknown action type: ${n}`)}}finally{this.actionLocks[n]=!1}}async processAttack(t){const{attackDetails:n}=t,r=this.gameStateManager.getState(),i={player1:r.placedSections,player2:r.opponentPlacedSections},s=p=>{this.gameStateManager.addLogEntry(p,"resolveAttack",n.attackingPlayer==="player2"?n.aiContext:null)},l=()=>{},u=()=>{},f=ke.resolveAttack(n,{player1:r.player1,player2:r.player2},i,s,l,u),h=(f.animationEvents||[]).map(p=>({animationName:p.type,payload:{droneId:p.sourceId,targetId:p.targetId,sourceId:p.sourceId,amount:p.amount,attackValue:p.attackValue,visualType:p.visualType,cardName:p.cardName,duration:p.duration,targetPlayerId:p.targetPlayerId}}));return console.log("[ANIMATION EVENTS] ActionProcessor received:",f.animationEvents),console.log("[ANIMATION EVENTS] Mapped to animations:",h),console.log(" [AI ANIMATION DEBUG] Built animations array:",{count:h.length,animations:h.map(p=>({name:p.animationName,sourceId:p.payload.sourceId,targetId:p.payload.targetId})),hasAnimationManager:!!this.animationManager}),this.animationManager?(console.log(" [AI ANIMATION DEBUG] Calling animationManager.executeAnimations()"),await this.animationManager.executeAnimations(h),console.log(" [AI ANIMATION DEBUG] executeAnimations() completed")):console.warn(" [AI ANIMATION DEBUG] No animationManager available!"),this.gameStateManager.setPlayerStates(f.newPlayerStates.player1,f.newPlayerStates.player2),f.attackResult&&f.attackResult.shouldEndTurn&&await this.processTurnTransition({newPlayer:n.attackingPlayer==="player1"?"player2":"player1"}),f}async processMove(t){const{droneId:n,fromLane:r,toLane:i,playerId:s}=t,u=this.gameStateManager.getState()[s];if(!u)throw new Error(`Player ${s} not found`);const f=u.dronesOnBoard[r].findIndex(m=>m.id===n);if(f===-1)throw new Error(`Drone ${n} not found in ${r}`);const h=u.dronesOnBoard[r][f],p={...u.dronesOnBoard,[r]:u.dronesOnBoard[r].filter(m=>m.id!==n),[i]:[...u.dronesOnBoard[i],{...h,isExhausted:!0}]};return this.gameStateManager.updatePlayerState(s,{dronesOnBoard:p}),this.gameStateManager.addLogEntry({player:u.name,actionType:"MOVE",source:h.name,target:i.replace("lane","Lane "),outcome:`Moved from ${r.replace("lane","Lane ")} to ${i.replace("lane","Lane ")}.`}),console.log(` Moved ${h.name} from ${r} to ${i}`),await this.processTurnTransition({newPlayer:s==="player1"?"player2":"player1"}),{success:!0,message:`${h.name} moved from ${r} to ${i}`,drone:h,fromLane:r,toLane:i}}async processAbility(t){const{droneId:n,abilityIndex:r,targetId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let f=null,h=null;if(Object.values(l).forEach(A=>{Object.values(A.dronesOnBoard).forEach(C=>{C.forEach(P=>{P.id===n&&(f=P),P.id===i&&(h=P)})})}),!f||!f.abilities[r])throw new Error(`Invalid drone or ability: ${n}, ${r}`);const p=f.abilities[r],m=A=>{this.gameStateManager.addLogEntry(A,"resolveAbility")},g=async A=>await this.processAttack({attackDetails:A}),x=ke.resolveAbility(p,f,h,l,u,m,g),S=(x.animationEvents||[]).map(A=>({animationName:A.type,payload:{droneId:A.sourceId,targetId:A.targetId,sourceId:A.sourceId,amount:A.amount,visualType:A.visualType,duration:A.duration,targetPlayerId:A.targetPlayerId}}));if(this.animationManager&&S.length>0&&await this.animationManager.executeAnimations(S),this.gameStateManager.setPlayerStates(x.newPlayerStates.player1,x.newPlayerStates.player2),x.shouldEndTurn){const A=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:A.currentPlayer==="player1"?"player2":"player1"})}return x}async processDeployment(t){const{droneData:n,laneId:r,playerId:i,turn:s}=t,l=this.gameStateManager.getState(),u=l[i],h=l[i==="player1"?"player2":"player1"],p={player1:l.placedSections,player2:l.opponentPlacedSections},m=x=>{this.gameStateManager.addLogEntry(x)},g=ke.executeDeployment(n,r,s||l.turn,u,h,p,m);if(g.success){const x=g.deployedDrone?.id||n.id,S={...g.newPlayerState,dronesOnBoard:{...g.newPlayerState.dronesOnBoard,[r]:g.newPlayerState.dronesOnBoard[r].map(P=>P.id===x?{...P,isTeleporting:!0}:P)}};i==="player1"?this.gameStateManager.updatePlayers(S,{}):this.gameStateManager.updatePlayers({},S),await new Promise(P=>setTimeout(P,50));const A=[{animationName:"TELEPORT_IN",payload:{targetId:x,laneId:r,playerId:i}}],C=this.animationManager?this.animationManager.executeAnimations(A):Promise.resolve();setTimeout(()=>{i==="player1"?this.gameStateManager.updatePlayers(g.newPlayerState,{}):this.gameStateManager.updatePlayers({},g.newPlayerState)},420),await C,await this.processTurnTransition({newPlayer:i==="player1"?"player2":"player1"})}return g}async processCardPlay(t){const{card:n,targetId:r,playerId:i}=t,s=this.gameStateManager.getState(),l={player1:s.player1,player2:s.player2},u={player1:s.placedSections,player2:s.opponentPlacedSections};let f=null;if(r){for(const g of["player1","player2"]){for(const x of["lane1","lane2","lane3"]){const A=(l[g].dronesOnBoard[x]||[]).find(C=>C.id===r);if(A){f={...A,owner:g};break}}if(f)break}if(!f)for(const g of["player1","player2"]){const x=l[g].shipSections;for(const S in x)if(x[S].id===r){f={...x[S],name:S,owner:g};break}if(f)break}!f&&r&&r.startsWith("lane")&&(f={id:r})}const h={logCallback:g=>this.gameStateManager.addLogEntry(g),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async g=>await this.processAttack(g)},p=ke.resolveCardPlay(n,f,i,l,u,h);console.log("[ANIMATION EVENTS] Card play events:",p.animationEvents);const m=(p.animationEvents||[]).map(g=>({animationName:g.type,payload:{droneId:g.sourceId,targetId:g.targetId,sourceId:g.sourceId,amount:g.amount,attackValue:g.attackValue,visualType:g.visualType,cardName:g.cardName,duration:g.duration,targetPlayerId:g.targetPlayerId}}));if(this.animationManager&&m.length>0&&await this.animationManager.executeAnimations(m),this.gameStateManager.setPlayerStates(p.newPlayerStates.player1,p.newPlayerStates.player2),p.shouldEndTurn){const g=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:g.currentPlayer==="player1"?"player2":"player1"})}return p}async processMovementCompletion(t){const{card:n,movementType:r,drones:i,fromLane:s,toLane:l,playerId:u}=t,f=this.gameStateManager.getState(),h={player1:f.player1,player2:f.player2},p={player1:f.placedSections,player2:f.opponentPlacedSections},m={logCallback:x=>this.gameStateManager.addLogEntry(x),applyOnMoveEffectsCallback:ke.applyOnMoveEffects,updateAurasCallback:ke.updateAuras};let g;if(r==="single_move"){g=ke.resolveSingleMove(n,i[0],s,l,h[u],h[u==="player1"?"player2":"player1"],p,m);const x={...h,[u]:g.newPlayerState};this.gameStateManager.setPlayerStates(x.player1,x.player2)}else{g=ke.resolveMultiMove(n,i,s,l,h[u],h[u==="player1"?"player2":"player1"],p,m);const x={...h,[u]:g.newPlayerState};this.gameStateManager.setPlayerStates(x.player1,x.player2)}if(g.shouldEndTurn){const x=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:x.currentPlayer==="player1"?"player2":"player1"})}return{success:!0,shouldEndTurn:g.shouldEndTurn}}async processShipAbility(t){const{ability:n,sectionName:r,targetId:i,playerId:s}=t,l=this.gameStateManager.getState(),u={player1:l.player1,player2:l.player2},f={player1:l.placedSections,player2:l.opponentPlacedSections},h={logCallback:g=>this.gameStateManager.addLogEntry(g),explosionCallback:()=>{},hitAnimationCallback:()=>{},resolveAttackCallback:async g=>await this.processAttack(g)},p=ke.resolveShipAbility(n,r,i,u,f,h),m=(p.animationEvents||[]).map(g=>({animationName:g.type,payload:{droneId:g.sourceId,targetId:g.targetId,sourceId:g.sourceId,amount:g.amount,visualType:g.visualType,duration:g.duration,targetPlayerId:g.targetPlayerId}}));if(this.animationManager&&m.length>0&&await this.animationManager.executeAnimations(m),this.gameStateManager.setPlayerStates(p.newPlayerStates.player1,p.newPlayerStates.player2),p.shouldEndTurn){const g=this.gameStateManager.getState();await this.processTurnTransition({newPlayer:g.currentPlayer==="player1"?"player2":"player1"})}return p}async processTurnTransition(t){const{newPhase:n,newPlayer:r}=t;console.log("[TURN TRANSITION DEBUG] Processing turn transition:",{newPhase:n,newPlayer:r});const i=this.gameStateManager.getState();console.log("[TURN TRANSITION DEBUG] Current state before transition:",{turnPhase:i.turnPhase,currentPlayer:i.currentPlayer,turn:i.turn});const s=ke.calculateTurnTransition(i.currentPlayer,i.passInfo,i.turnPhase,i.winner);if(n&&(console.log(`[TURN TRANSITION DEBUG] Setting new phase: ${n}`),this.gameStateManager.setTurnPhase(n)),r){const u=this.gameStateManager.getState();let f=r;u.passInfo&&u.passInfo[`${r}Passed`]?(f=u.currentPlayer,console.log(`[TURN TRANSITION DEBUG] ${r} has passed, keeping turn with ${f}`)):console.log(`[TURN TRANSITION DEBUG] Setting new player: ${f}`),this.gameStateManager.setCurrentPlayer(f)}const l=this.gameStateManager.getState();return console.log("[TURN TRANSITION DEBUG] State after transition:",{turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,transitionType:s.type}),{success:!0,transitionType:s.type}}async processPhaseTransition(t){const{newPhase:n,resetPassInfo:r=!0}=t,i=this.gameStateManager.getState();if(i.turnPhase===n)return console.log(`[PHASE TRANSITION DEBUG] Skipping redundant transition to same phase: ${n}`),{success:!0,message:"Already in phase"};console.log(`[PHASE TRANSITION DEBUG] Processing phase transition to: ${n}`),console.log(`[PLACEMENT DATA DEBUG] BEFORE transition to ${n}:`,{currentPhase:i.turnPhase,placedSections:i.placedSections,opponentPlacedSections:i.opponentPlacedSections});const s={};if(["deployment","action"].includes(n)&&(s.currentPlayer=i.firstPlayerOfRound,console.log(`[PHASE TRANSITION DEBUG] Sequential phase: Setting currentPlayer to firstPlayerOfRound: ${i.firstPlayerOfRound}`)),n==="allocateShields"){const f=this.gameStateManager.getLocalPlayerId(),h=i[f],m=this.gameDataService.getEffectiveShipStats(h,this.gameStateManager.getLocalPlacedSections()).totals.shieldsPerTurn;s.shieldsToAllocate=m,console.log(`[SHIELD ALLOCATION DEBUG] Initialized shields to allocate: ${m}`)}else n==="placement"&&(s.unplacedSections=["bridge","powerCell","droneControlHub"],s.placedSections=Array(3).fill(null),s.opponentPlacedSections=Array(3).fill(null),console.log("[PLACEMENT DEBUG] Initialized placement phase"));s.turnPhase=n,this.gameStateManager.setState(s),this.clearPhaseCommitments(),r&&this.gameStateManager.setPassInfo({firstPasser:null,player1Passed:!1,player2Passed:!1}),console.log(`[PHASE TRANSITION DEBUG] Phase transition complete: ${i.turnPhase}  ${n}`);const u=this.gameStateManager.getState();return console.log(`[PLACEMENT DATA DEBUG] AFTER transition to ${n}:`,{newPhase:u.turnPhase,placedSections:u.placedSections,opponentPlacedSections:u.opponentPlacedSections,stateUpdatesApplied:s}),{success:!0,newPhase:n}}async processRoundStart(t){const{newTurn:n,newPhase:r="deployment",firstPlayer:i}=t;console.log(`[ROUND START DEBUG] Processing round start for turn: ${n}`);const s=this.gameStateManager.getState(),l=i||ke.determineFirstPlayer(n,s.firstPlayerOverride,s.firstPasserOfPreviousRound),u=this.gameDataService.getEffectiveShipStats(s.player1,s.placedSections),f=this.gameDataService.getEffectiveShipStats(s.player2,s.opponentPlacedSections),h=ke.calculateNewRoundPlayerState(s.player1,n,u,s.player2,s.placedSections),p=ke.calculateNewRoundPlayerState(s.player2,n,f,s.player1,s.opponentPlacedSections);return this.gameStateManager.setState({turn:n,turnPhase:r,currentPlayer:l,firstPlayerOfRound:l,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1}}),this.gameStateManager.setPlayerStates(h,p),console.log(`[ROUND START DEBUG] Round start complete - Turn ${n}, First player: ${l}`),{success:!0,newTurn:n,newPhase:r,firstPlayer:l,playerStates:{player1:h,player2:p}}}async processReallocateShields(t){const{action:n,sectionName:r,originalShipSections:i,playerId:s=this.gameStateManager.getLocalPlayerId()}=t,l=this.gameStateManager.getState();if(l.turnPhase!=="action")throw new Error(`Shield reallocation through ActionProcessor is only valid during action phase, not ${l.turnPhase}`);console.log("[SHIELD REALLOCATION DEBUG] Processing action phase shield reallocation:",{action:n,sectionName:r,playerId:s});const u=l[s];if(n==="remove"){const f=u.shipSections[r];if(!f||f.allocatedShields<=0)return{success:!1,error:"Cannot remove shield from this section"};const h={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields-1}},p={...u,shipSections:h};return this.gameStateManager.updatePlayerState(s,p),console.log(`[SHIELD REALLOCATION DEBUG] Shield removed from ${r}`),{success:!0,action:"remove",sectionName:r,newPlayerState:p}}else if(n==="add"){const f=s==="player1"?l.placedSections:l.opponentPlacedSections,h=ke.getEffectiveSectionMaxShields(r,u,f),p=u.shipSections[r];if(!p||p.allocatedShields>=h)return{success:!1,error:"Cannot add shield to this section"};const m={...u.shipSections,[r]:{...u.shipSections[r],allocatedShields:u.shipSections[r].allocatedShields+1}},g={...u,shipSections:m};return this.gameStateManager.updatePlayerState(s,g),console.log(`[SHIELD REALLOCATION DEBUG] Shield added to ${r}`),{success:!0,action:"add",sectionName:r,newPlayerState:g}}else if(n==="restore"){if(!i)return{success:!1,error:"No original ship sections provided for restore"};const f={...u,shipSections:i};return this.gameStateManager.updatePlayerState(s,f),console.log("[SHIELD REALLOCATION DEBUG] Shield allocation restored to original state"),{success:!0,action:"restore",newPlayerState:f}}return{success:!1,error:`Unknown reallocation action: ${n}`}}async processAiAction(t){const{aiDecision:n}=t;switch(n.type){case"deploy":const{droneToDeploy:r,targetLane:i}=n.payload;return await this.processDeployment({droneData:r,laneId:i,playerId:"player2",turn:this.gameStateManager.get("turn")});case"action":const s=n.payload;switch(s.type){case"attack":return console.log(" [AI ANIMATION DEBUG] processAiAction attack case:",{attackerId:s.attacker?.id,targetId:s.target?.id,lane:s.attacker?.lane,targetType:s.targetType,hasAttackerObject:!!s.attacker,hasTargetObject:!!s.target}),await this.processAttack({attackDetails:{attacker:s.attacker,target:s.target,targetType:s.targetType||"drone",lane:s.attacker.lane,attackingPlayer:"player2",aiContext:n.logContext}});case"play_card":return await this.processCardPlay({card:s.card,targetId:s.target?.id,playerId:"player2"});case"move":return await this.processMove({droneId:s.drone.id,fromLane:s.fromLane,toLane:s.toLane,playerId:"player2"});case"ability":return await this.processAbility({droneId:s.drone.id,abilityIndex:s.abilityIndex,targetId:s.target?.id});default:throw new Error(`Unknown AI action subtype: ${s.type}`)}case"pass":return{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${n.type}`)}}async processAiDecision(t,n){switch(console.log(`[AI DECISION DEBUG] Processing AI decision type: ${t.type}`),t.type){case"deploy":const{droneToDeploy:r,targetLane:i}=t.payload;console.log("[AI DECISION DEBUG] AI deploying:",{droneToDeploy:r?.name,targetLane:i});const s=await this.processDeployment({droneData:r,laneId:i,playerId:n,turn:this.gameStateManager.get("turn")});return console.log("[AI DECISION DEBUG] Deployment result:",s),s.success?(console.log("[AI DECISION DEBUG] Deployment successful, transitioning turn"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"}),console.log("[AI DECISION DEBUG] Turn transition complete")):console.log("[AI DECISION DEBUG] Deployment failed, not transitioning turn"),s;case"action":const l=t.payload;let u;switch(l.type){case"attack":u=await this.processAttack({attackDetails:{attacker:l.attacker,target:l.target,targetType:l.targetType||"drone",lane:l.lane,attackingPlayer:n,aiContext:t.logContext}});break;case"play_card":u=await this.processCardPlay({card:l.card,targetId:l.target?.id,playerId:n});break;case"move":u=await this.processMove({droneId:l.drone.id,fromLane:l.fromLane,toLane:l.toLane,playerId:n});break;case"ability":u=await this.processAbility({droneId:l.drone.id,abilityIndex:l.abilityIndex,targetId:l.target?.id});break;default:throw new Error(`Unknown AI action subtype: ${l.type}`)}return u;case"pass":console.log("[AI DECISION DEBUG] AI passing");const f=this.gameStateManager.getState(),h=!f.passInfo[n==="player1"?"player2Passed":"player1Passed"];console.log("[AI DECISION DEBUG] Pass info before update:",f.passInfo),this.gameStateManager.updatePassInfo({[n+"Passed"]:!0,firstPasser:f.passInfo.firstPasser||(h?n:null)});const p=this.gameStateManager.get("passInfo");return console.log("[AI DECISION DEBUG] Pass info after update:",p),p.player1Passed&&p.player2Passed?(console.log("[AI DECISION DEBUG] Both players passed, transitioning phase"),f.turnPhase==="deployment"?await this.processPhaseTransition({newPhase:"action"}):f.turnPhase==="action"&&await this.processPhaseTransition({newPhase:"roundEnd"})):(console.log("[AI DECISION DEBUG] Only AI passed, switching to other player"),await this.processTurnTransition({newPlayer:n==="player1"?"player2":"player1"})),{success:!0,action:"pass"};default:throw new Error(`Unknown AI action type: ${t.type}`)}}isActionInProgress(){return this.isProcessing||Object.values(this.actionLocks).some(t=>t)}getQueueLength(){return this.actionQueue.length}async processNetworkAction(t){const{action:n}=t;console.log("[P2P ACTION] Processing network action:",n);const r={...n,isNetworkAction:!0};return await this.queueAction(r)}async processPlayerPass(t){const{playerId:n,playerName:r,turnPhase:i,passInfo:s,opponentPlayerId:l}=t;console.log("[PLAYER PASS DEBUG] Processing player pass through ActionProcessor:",{playerId:n,playerName:r,turnPhase:i,currentPassInfo:s}),this.gameStateManager.getState(),this.gameStateManager.addLogEntry({player:r,actionType:"PASS",source:"N/A",target:"N/A",outcome:`Passed during ${i} phase.`},"playerPass");const u=`${l}Passed`,f=`${n}Passed`,h=!s[u],p={...s,[f]:!0,firstPasser:s.firstPasser||(h?n:null)};if(console.log("[PLAYER PASS DEBUG] Updating pass info:",p),this.gameStateManager.setPassInfo(p,"ActionProcessor"),p.player1Passed&&p.player2Passed)console.log("[PLAYER PASS DEBUG] Both players passed - GameFlowManager will handle phase transition");else{let g=null;n==="player1"&&!p.player2Passed?g="player2":n==="player2"&&!p.player1Passed&&(g="player1"),g&&(console.log(`[PLAYER PASS DEBUG] Switching turn to ${g} (opponent hasn't passed)`),this.gameStateManager.setState({currentPlayer:g},"TURN_SWITCH","playerPass"))}return this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("playerPass",{playerId:n,playerName:r,turnPhase:i,passInfo:p}),{success:!0,newPassInfo:p}}async processAiShipPlacement(t){const{placement:n,aiPersonality:r}=t;console.log("[AI SHIP PLACEMENT] Processing AI ship placement:",{placement:n,aiPersonality:r}),console.error(" CRITICAL - Setting opponentPlacedSections to:",n),this.gameStateManager.setState({opponentPlacedSections:n},"aiShipPlacement");const i=this.gameStateManager.getState();return console.error(" CRITICAL - After setState, opponentPlacedSections is now:",i.opponentPlacedSections),this.gameStateManager.addLogEntry({player:"AI Opponent",actionType:"SHIP_PLACEMENT",source:"AI System",target:"Ship Sections",outcome:`${r} deployed ship sections: ${n.join(", ")}`},"aiShipPlacement"),this.p2pManager&&this.p2pManager.isConnected&&this.p2pManager.sendAction("aiShipPlacement",{placement:n,aiPersonality:r}),{success:!0,placement:n}}async processOptionalDiscard(t){const{playerId:n,cardsToDiscard:r,isMandatory:i=!1}=t,s=this.gameStateManager.getState();if(console.log(`[OPTIONAL DISCARD DEBUG] Processing ${i?"mandatory":"optional"} discard for ${n}:`,r),!Array.isArray(r))throw new Error("Cards to discard must be an array");const l=s[n];if(!l)throw new Error(`Player ${n} not found`);r.forEach(h=>{this.gameStateManager.addLogEntry({player:l.name,actionType:i?"DISCARD_MANDATORY":"DISCARD_OPTIONAL",source:h.name,target:"N/A",outcome:`Discarded ${h.name}.`})});const u=l.hand.filter(h=>!r.some(p=>h.instanceId===p.instanceId)),f=[...l.discardPile,...r];return this.gameStateManager.updatePlayerState(n,{hand:u,discardPile:f}),console.log(`[OPTIONAL DISCARD DEBUG] Discarded ${r.length} cards for ${n}`),{success:!0,message:`Discarded ${r.length} cards`,cardsDiscarded:r}}async processFirstPlayerDetermination(){console.log(" ActionProcessor: Processing first player determination");const t=this.gameStateManager.getState(),{determineFirstPlayer:n,getFirstPlayerReasonText:r}=await sa(async()=>{const{determineFirstPlayer:l,getFirstPlayerReasonText:u}=await import("./firstPlayerUtils-C-yFl_SP.js");return{determineFirstPlayer:l,getFirstPlayerReasonText:u}},[]),i=n(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound),s=r(t.turn,t.firstPlayerOverride,t.firstPasserOfPreviousRound);return this.gameStateManager.setState({currentPlayer:i,firstPlayerOfRound:i}),console.log(` First player determination complete: ${i}`),{success:!0,firstPlayer:i,reasonText:s,turn:t.turn}}async acknowledgeFirstPlayer(t){return console.log(` ActionProcessor: Processing first player acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"determineFirstPlayer",actionData:{acknowledged:!0}})}async acknowledgeDeploymentComplete(t){return console.log(` ActionProcessor: Processing deployment complete acknowledgment for ${t}`),await this.processCommitment({playerId:t,phase:"deploymentComplete",actionData:{acknowledged:!0}})}getPhaseCommitmentStatus(t){const n=this.gameStateManager.getState();if(!n.commitments[t])return{phase:t,commitments:{player1:{completed:!1},player2:{completed:!1}},bothComplete:!1};const r=n.commitments[t],i=r.player1.completed&&r.player2.completed;return{phase:t,commitments:r,bothComplete:i}}clearPhaseCommitments(t=null){const n=this.gameStateManager.getState();t?(n.commitments[t]&&(n.commitments[t]={player1:{completed:!1},player2:{completed:!1}}),console.log(` Cleared commitments for phase: ${t}`)):(n.commitments={},console.log(" Cleared all phase commitments")),this.gameStateManager.setState({commitments:n.commitments})}async processCommitment(t){const{playerId:n,phase:r,actionData:i}=t;console.log(` ActionProcessor: Processing ${r} commitment for ${n}`);const s=this.gameStateManager.getState();s.commitments[r]||(s.commitments[r]={player1:{completed:!1},player2:{completed:!1}}),s.commitments[r][n]={completed:!0,...i},this.gameStateManager.setState({commitments:s.commitments},"COMMITMENT_UPDATE");const l=s.commitments[r].player1.completed&&s.commitments[r].player2.completed;return console.log(` ${n} ${r} committed, both complete: ${l}`),n==="player1"&&s.gameMode==="local"&&(console.log(" Single-player mode: Auto-completing AI commitment"),la&&setTimeout(async()=>{try{await this.handleAICommitment(r,s)}catch(u){console.error("AI commitment error:",u)}},100)),{success:!0,data:{playerId:n,phase:r,actionData:i,bothPlayersComplete:l}}}async handleAICommitment(t,n){try{console.log(` Processing AI commitment for phase: ${t}`);let r;switch(t){case"droneSelection":r=await la.processDroneSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"droneSelection",actionData:{drones:r}}});break;case"deckSelection":r=await la.processDeckSelection(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deckSelection",actionData:{deck:r}}});break;case"placement":r=await la.processPlacement(),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"placement",actionData:{placedSections:r}}});break;case"mandatoryDiscard":r=await la.executeMandatoryDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"optionalDiscard":r=await la.executeOptionalDiscardTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"optionalDiscard",actionData:{discardedCards:r.cardsToDiscard}}});break;case"allocateShields":await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"allocateShields",actionData:{shieldAllocation:[]}}});break;case"mandatoryDroneRemoval":r=await la.executeMandatoryDroneRemovalTurn(n),await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"mandatoryDroneRemoval",actionData:{removedDrones:r.dronesToRemove}}});break;case"determineFirstPlayer":await new Promise(i=>{setTimeout(async()=>{await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"determineFirstPlayer",actionData:{acknowledged:!0}}}),i()},1e3)});break;case"deploymentComplete":console.log(" AI will acknowledge deployment complete after 3 second delay (for testing)"),await new Promise(i=>{setTimeout(async()=>{await this.queueAction({type:"commitment",payload:{playerId:"player2",phase:"deploymentComplete",actionData:{acknowledged:!0}}}),console.log(" AI acknowledged deployment complete"),i()},3e3)});break;default:console.warn(` No AI handler for phase: ${t}`)}}catch(r){console.error("AI commitment error:",r)}}applyPhaseCommitments(t){const n=this.gameStateManager.getState(),r=n.commitments[t];if(!r)return console.warn(` No commitments found for phase: ${t}`),{};console.log(` ActionProcessor: Applying ${t} commitments to game state`,r);const i={};switch(t){case"droneSelection":r.player1?.drones&&(i.player1={...n.player1,activeDronePool:r.player1.drones,deployedDroneCounts:r.player1.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),r.player2?.drones&&(i.player2={...n.player2,activeDronePool:r.player2.drones,deployedDroneCounts:r.player2.drones.reduce((s,l)=>(s[l.name]=0,s),{})}),console.log(" Applied drone selections to player states");break;case"deckSelection":r.player1?.deck&&(i.player1={...n.player1,deck:r.player1.deck,discard:[]}),r.player2?.deck&&(i.player2={...n.player2,deck:r.player2.deck,discard:[]}),console.log(" Applied deck selections to player states");break;case"placement":r.player1?.placedSections&&(i.placedSections=r.player1.placedSections),r.player2?.placedSections&&(i.opponentPlacedSections=r.player2.placedSections),console.log(" Applied ship placements:",{player1:i.placedSections,player2:i.opponentPlacedSections});break;case"determineFirstPlayer":console.log(" First player determination (handled separately)");break;case"mandatoryDiscard":case"optionalDiscard":console.log(" Discard commitments (handled via card actions)");break;case"allocateShields":console.log(" Shield allocation (handled separately)");break;case"deploymentComplete":console.log(" Deployment complete acknowledgments (no state changes)");break;case"determineFirstPlayer":console.log(" First player determination (handled by GameFlowManager)");break;default:console.warn(` No commitment application logic for phase: ${t}`)}return i}async processDraw(t){const{player1:n,player2:r}=t;return console.log(" ActionProcessor: Processing automatic draw"),this.gameStateManager.setState({player1:n,player2:r}),{success:!0,message:"Draw completed",player1:n,player2:r}}async processEnergyReset(t){const{player1:n,player2:r}=t;return console.log(" ActionProcessor: Processing energy reset"),this.gameStateManager.setPlayerStates(n,r),{success:!0,message:"Energy reset completed",player1:n,player2:r}}clearQueue(){this.actionQueue.forEach(t=>{t.reject(new Error("Action queue cleared"))}),this.actionQueue=[],Object.keys(this.actionLocks).forEach(t=>{this.actionLocks[t]=!1}),this.isProcessing=!1}}const uO=e=>{if(!e||e.length===0)throw new Error("droneCollection must be a non-empty array");const t=[...e].sort(()=>.5-Math.random()),n=t.slice(0,3),r=t.slice(3);return console.log(` Initialized drone selection: ${n.length} in trio, ${r.length} in pool`),console.log(` Initial trio: ${n.map(i=>i.name).join(", ")}`),{droneSelectionTrio:n,droneSelectionPool:r}},zk=(e,t=3)=>{if(!e||e.length===0)return console.warn(" No drones remaining in pool for next trio"),{droneSelectionTrio:[],droneSelectionPool:[]};const n=e.slice(0,t),r=e.slice(t);return console.log(` Advanced drone trio: ${n.map(i=>i.name).join(", ")}`),console.log(` Remaining in pool: ${r.length} drones`),{droneSelectionTrio:n,droneSelectionPool:r}};class Gk{constructor(){console.log(" GAMESTATE INITIALIZATION: Creating new GameStateManager instance"),this.listeners=new Set,this.state={appState:"menu",isHost:!1,isGuest:!1,isConnected:!1,opponentId:null,gameMode:"local",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],gameStage:"preGame",roundNumber:0,commitments:{}},this.actionProcessor=Ra.getInstance(this),this.gameFlowManager=null,this.p2pIntegrationSetup=!1,console.log(" GAMESTATE INITIALIZATION: GameStateManager created"),console.log(" App State:",this.state.appState),console.log(" Game Active:",this.state.gameActive),console.log(" GAMESTATE INITIALIZATION: GameStateManager ready (no game active)")}setGameFlowManager(t){this.gameFlowManager=t}setupP2PIntegration(t){this.p2pIntegrationSetup||(this.actionProcessor.setP2PManager(t),t.setActionProcessor(this.actionProcessor),t.subscribe(n=>{switch(n.type){case"multiplayer_mode_change":this.setMultiplayerMode(n.data.mode,n.data.isHost);break;case"state_sync_requested":const r=this.getState();t.sendData({type:"GAME_STATE_SYNC",state:r,timestamp:Date.now()});break}}),this.p2pIntegrationSetup=!0)}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,payload:n,state:this.getState()})}catch(i){console.error("Error in state listener:",i)}})}getState(){return{...this.state}}get(t){return this.state[t]}setState(t,n="STATE_UPDATE",r=null){const i={...this.state},s=new Error().stack,l=s?s.split(`
`):[],u=this.extractCallerInfo(l),f=l.some(A=>A.includes("App.jsx")),h=l.some(A=>A.includes("ActionProcessor")),p=l.some(A=>A.includes("PhaseManager")),m=h||p;f&&!m&&(console.error(" ARCHITECTURE VIOLATION: App.jsx is directly updating GameStateManager!"),console.error(" App.jsx should only call ActionProcessor or PhaseManager methods"),console.error(" Stack trace:",s));const g=Object.keys(t),x=`${u.primaryCaller} in ${u.primaryFile}`;console.log(` GAMESTATE CHANGE [${n}] from ${x}:`,{changedKeys:g,allUpdates:t,architectureViolation:f&&!m});const S=["GAME_RESET","INITIALIZATION"].includes(n);(t.player1||t.player2)&&!S&&this.logPlayerStateChanges(t,i,x,n),g.forEach(A=>{if(!["player1","player2"].includes(A)){const C=i[A],P=t[A];JSON.stringify(C)!==JSON.stringify(P)&&console.log(` STATE CHANGE: ${A}`,{before:C,after:P,caller:x,eventType:n})}}),this.validateStateUpdate(t,i,r),this.state={...this.state,...t},this.emit(n,{updates:t,prevState:i})}validateStateUpdate(t,n,r=null){const i=new Error().stack,s=i&&i.includes("ActionProcessor");if(this.actionProcessor.isActionInProgress()&&Object.keys(t).length>0&&!s){const u=["player1","player2","turnPhase","currentPlayer"].some(m=>m in t),f=i&&i.includes("GameFlowManager"),h=r==="phaseTransition"||t.turnPhase&&f;u&&!(h&&f)&&console.warn("Race condition detected: External state update during action processing",{updates:Object.keys(t),actionInProgress:!0,queueLength:this.actionProcessor.getQueueLength(),context:r,isFromGameFlowManager:f,isPhaseTransition:h,stack:i?.split(`
`).slice(0,5)})}this.validateActionProcessorUsage(t,n,s,i),(t.player1||t.player2)&&this.validatePlayerStates(t.player1||n.player1,t.player2||n.player2),t.turnPhase&&t.turnPhase!==n.turnPhase&&this.validateTurnPhaseTransition(n.turnPhase,t.turnPhase)}validatePlayerStates(t,n){if(!t||!n)return;const r=(s,l)=>{s.energy<0&&console.error(`Invalid state: ${l} has negative energy: ${s.energy}`),s.deploymentBudget<0&&console.error(`Invalid state: ${l} has negative deployment budget: ${s.deploymentBudget}`)};r(t,"player1"),r(n,"player2");const i=new Set;[t,n].forEach((s,l)=>{Object.values(s.dronesOnBoard).forEach(u=>{u.forEach(f=>{i.has(f.id)&&console.error(`Duplicate drone ID detected: ${f.id} in player${l+1}`),i.add(f.id)})})})}validateTurnPhaseTransition(t,n){({null:["droneSelection","preGame"],preGame:["droneSelection","deckSelection"],droneSelection:["deckSelection"],deckSelection:["placement"],placement:["gameInitializing"],gameInitializing:["determineFirstPlayer"],energyReset:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],initialDraw:["mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],mandatoryDiscard:["optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment"],optionalDiscard:["draw","allocateShields","mandatoryDroneRemoval","deployment"],draw:["allocateShields","mandatoryDroneRemoval","deployment"],determineFirstPlayer:["energyReset"],allocateShields:["mandatoryDroneRemoval","deployment"],mandatoryDroneRemoval:["deployment"],deployment:["deploymentComplete","roundEnd"],deploymentComplete:["action"],action:["deployment","roundEnd","determineFirstPlayer","gameEnd"],roundEnd:["determineFirstPlayer","deployment","gameEnd"],gameEnd:[]})[t]?.includes(n)||console.warn(`Invalid turn phase transition: ${t} -> ${n}`)}validateActionProcessorUsage(t,n,r,i){if(r||this.isInitializationPhase(n.turnPhase))return;if(console.log(" Checking automatic phase flag:",{hasGameFlowManager:!!this.gameFlowManager,isProcessingAutomaticPhase:this.gameFlowManager?.isProcessingAutomaticPhase,currentPhase:n.turnPhase,updatingFields:Object.keys(t)}),this.gameFlowManager&&this.gameFlowManager.isProcessingAutomaticPhase){console.log(" Skipping validation - automatic phase processing active");return}if(["droneSelection","deckSelection","placement","gameInitializing","mandatoryDiscard","allocateShields","mandatoryDroneRemoval"].includes(n.turnPhase))return;const l=["energyReset","draw","determineFirstPlayer"];if(l.includes(n.turnPhase)||l.includes(t.turnPhase))return;const u=["player1","player2","currentPlayer","turnPhase","turn","passInfo","winner","firstPlayerOfRound","firstPasserOfPreviousRound"],f=["gameLog","shieldsToAllocate","placedSections","opponentPlacedSections","unplacedSections","droneSelectionPool","droneSelectionTrio"],h=Object.keys(t).filter(P=>u.includes(P)),p=Object.keys(t).filter(P=>f.includes(P)),m=i&&i.includes("GameFlowManager");["energyReset","draw","determineFirstPlayer"].includes(n.turnPhase)||["deployment","action"].includes(n.turnPhase);const g=h.every(P=>["player1","player2"].includes(P)),x=h.every(P=>["turnPhase","gameStage","roundNumber","firstPlayerOfRound"].includes(P));if(m&&(g||x))return;const S=i&&i.includes("SequentialPhaseManager"),A=["deployment","action"].includes(n.turnPhase),C=h.length===1&&h[0]==="passInfo";if(!(S&&A&&C)){if(h.length>0&&!r){const P=i?.split(`
`)||[],O=P.find(T=>T.includes(".jsx")&&!T.includes("GameStateManager"))||P[2]||"Unknown";console.warn(" ActionProcessor bypass detected: Critical game state updated directly",{updates:h,turnPhase:n.turnPhase,caller:O.trim(),allUpdates:Object.keys(t),actionInProgress:this.actionProcessor.isActionInProgress(),recommendation:"Use processAction() instead of direct state updates"}),console.debug(" ActionProcessor bypass debug info:",{stackTrace:P.slice(0,8),currentState:{turnPhase:n.turnPhase,currentPlayer:n.currentPlayer,turn:n.turn},updateDetails:t})}p.length>0,this.validateFunctionAppropriateForStateUpdate(t,n,r,i),this.validateOwnershipBoundaries(t,i)}}logPlayerStateChanges(t,n,r,i){["player1","player2"].forEach(s=>{if(t[s]){const l=n[s],u=t[s];console.log(` PLAYER STATE CHANGE [${s}] [${i}] from ${r}:`),["energy","activeDronePool","hand","deck","dronesOnBoard","deploymentBudget","initialDeploymentBudget"].forEach(h=>{const p=l?l[h]:void 0,m=u?u[h]:void 0;if(JSON.stringify(p)!==JSON.stringify(m))if(h==="energy"||h==="deploymentBudget"||h==="initialDeploymentBudget")console.log(`   ${h}: ${p}  ${m}`),(m==null||isNaN(m))&&console.error(`   WARNING: ${h} became ${m}!`);else if(h==="activeDronePool"){const g=Array.isArray(p)?p.length:"undefined",x=Array.isArray(m)?m.length:"undefined";let S,A;if(Array.isArray(p))try{S=p.map(C=>C?.name||"UNNAMED").join(",")}catch(C){S=`ERROR_MAPPING_OLD: ${C.message}`}else S="undefined";if(Array.isArray(m))try{A=m.map(C=>C?.name||"UNNAMED").join(",")}catch(C){A=`ERROR_MAPPING_NEW: ${C.message}`}else A="undefined";if(console.log(`   ${h}: [${g} drones]  [${x} drones]`),console.log(`    Old drones: ${S}`),console.log(`    New drones: ${A}`),(A.includes("ERROR")||A==="undefined")&&(console.log("     Debug newValue:",m),Array.isArray(m)&&m.length>0&&console.log("     First drone object:",m[0])),g!==x||S!==A){const C=new Error().stack?.split(`
`).slice(1,4).join(`
`)||"No stack trace";console.log(`     Update source:
${C}`)}}else if(h==="hand"||h==="deck"){const g=Array.isArray(p)?p.length:"undefined",x=Array.isArray(m)?m.length:"undefined";console.log(`   ${h}: [${g} cards]  [${x} cards]`)}else if(h==="dronesOnBoard"){const g=p?`L1:${p.lane1?.length||0} L2:${p.lane2?.length||0} L3:${p.lane3?.length||0}`:"undefined",x=m?`L1:${m.lane1?.length||0} L2:${m.lane2?.length||0} L3:${m.lane3?.length||0}`:"undefined";console.log(`   ${h}: ${g}  ${x}`)}else console.log(`   ${h}:`,{before:p,after:m})}),console.log(` Full ${s} state:`,u)}})}isInitializationPhase(t){return[null,"preGame","droneSelection","deckSelection","deckBuilding","placement","gameInitializing","initialDraw"].includes(t)}validateFunctionAppropriateForStateUpdate(t,n,r,i){if(this.isInitializationPhase(n.turnPhase)||r)return;const s=i?.split(`
`)||[],l=this.extractCallerInfo(s),u=["handle","onClick","onSubmit","onSelect","onConfirm","onComplete","render","component","modal","display","show","hide","setModal","setSelected","setActive","setVisible","calculate","format","validate","transform"],f=["GameStateManager","ActionProcessor","gameLogic","gameEngine","reset","initialize","setup","init","setState","updateState","syncState","p2p","network","sync"],h=l.functions.filter(m=>u.some(g=>m.toLowerCase().includes(g.toLowerCase()))),p=l.functions.filter(m=>f.some(g=>m.toLowerCase().includes(g.toLowerCase())));h.length>0&&p.length===0&&(console.warn(" Inappropriate function updating game state:",{inappropriateFunctions:h,updates:Object.keys(t),turnPhase:n.turnPhase,callerInfo:l,recommendation:"UI functions should use processAction() instead of direct state updates",architecture:"UI  ActionProcessor  gameLogic.js  GameStateManager"}),console.debug(" Function validation debug info:",{allFunctionsInStack:l.functions,inappropriateFound:h,appropriateFound:p,updateDetails:t,stackTrace:s.slice(0,10)}))}extractCallerInfo(t){const n=[],r=[];for(const i of t){const s=i.match(/at\s+([\w.$]+)\s*\(/);if(s){const u=s[1];u!=="Object"&&u!=="anonymous"&&!u.startsWith("eval")&&n.push(u)}const l=i.match(/\/([^\/]+\.(jsx?|ts|tsx)):\d+/);l&&r.push(l[1])}return{functions:[...new Set(n)],files:[...new Set(r)],primaryCaller:n[0]||"Unknown",primaryFile:r[0]||"Unknown"}}validateOwnershipBoundaries(t,n){if(!n)return;const r=Object.keys(t);if(r.length===0)return;const i=n.includes("GameFlowManager"),s=n.includes("SequentialPhaseManager"),l=n.includes("ActionProcessor"),u={turnPhase:"GameFlowManager",gameStage:"GameFlowManager",roundNumber:"GameFlowManager",gameActive:"GameFlowManager",passInfo:["SequentialPhaseManager","GameFlowManager"],currentPlayer:["ActionProcessor","GameFlowManager"],firstPlayerOfRound:["ActionProcessor","GameFlowManager"],firstPlayerOverride:["ActionProcessor","GameFlowManager"]};for(const f of r){const h=u[f];if(!h)continue;const p=Array.isArray(h)?h:[h];let m=!1;for(const g of p)(g==="GameFlowManager"&&i||g==="SequentialPhaseManager"&&s||g==="ActionProcessor"&&l)&&(m=!0);if(!m){const g=i?"GameFlowManager":s?"SequentialPhaseManager":l?"ActionProcessor":"Unknown";console.warn(` OWNERSHIP VIOLATION: ${g} cannot update '${f}'`,{updateKey:f,currentManager:g,allowedOwners:p,updates:r,recommendation:`Only ${p.join(" or ")} should update '${f}'`})}}}reset(){console.log(" GAME RESET: Resetting game state and clearing caches");const t={turnPhase:"preGame",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:ke.initialPlayerState("Player 1",Bs),player2:ke.initialPlayerState("Player 2",Bs),placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}};this.setState(t,"GAME_RESET"),Vt.reset(),this.actionProcessor.clearQueue(),console.log(" GAME RESET: State, cache, and queue cleared")}startGame(t="local",n={},r={}){console.log(" GAME START: Initializing new game session");const i={appState:"inGame",gameActive:!0,gameMode:t,turnPhase:"droneSelection",turn:1,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:{firstPasser:null,player1Passed:!1,player2Passed:!1},winner:null,player1:{...ke.initialPlayerState(n.name||"Player 1",n.decklist||Bs),...n},player2:{...ke.initialPlayerState(r.name||"Player 2",r.decklist||Bs),...r},placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,gameLog:[],commitments:{}},s=uO(Pn);i.droneSelectionPool=s.droneSelectionPool,i.droneSelectionTrio=s.droneSelectionTrio,this.setState(i,"GAME_STARTED"),console.log(" Player 1 Created:",{name:i.player1.name,energy:i.player1.energy,deckCount:i.player1.deck?.length||0}),console.log(" Player 2 Created:",{name:i.player2.name,energy:i.player2.energy,deckCount:i.player2.deck?.length||0}),console.log(" GAME START: Game session initialized successfully")}endGame(){console.log(" GAME END: Ending current game session and clearing caches"),this.setState({appState:"menu",gameActive:!1,turnPhase:null,turn:null,currentPlayer:null,firstPlayerOfRound:null,firstPasserOfPreviousRound:null,firstPlayerOverride:null,passInfo:null,winner:null,player1:null,player2:null,placedSections:[],opponentPlacedSections:[],unplacedSections:[],shieldsToAllocate:0,droneSelectionPool:[],droneSelectionTrio:[],gameLog:[],commitments:{}},"GAME_ENDED"),Vt.reset(),this.actionProcessor.clearQueue(),console.log(" GAME END: Returned to menu state, cache and queue cleared")}setMultiplayerMode(t,n=!1){this.setState({gameMode:t,isHost:n&&t!=="local",isGuest:!n&&t!=="local"},"MULTIPLAYER_MODE_SET")}updatePlayers(t={},n={}){const r={};Object.keys(t).length>0&&(r.player1={...this.state.player1,...t}),Object.keys(n).length>0&&(r.player2={...this.state.player2,...n}),Object.keys(r).length>0&&this.setState(r,"PLAYERS_UPDATED")}updatePlayerState(t,n){t==="player1"?this.updatePlayers(n,{}):t==="player2"&&this.updatePlayers({},n)}setPlayerStates(t,n){this.setState({player1:t,player2:n},"PLAYER_STATES_SET")}setCurrentPlayer(t){this.setState({currentPlayer:t},"CURRENT_PLAYER_CHANGED")}setTurnPhase(t){this.setState({turnPhase:t},"TURN_PHASE_CHANGED")}setFirstPlayerOfRound(t){this.setState({firstPlayerOfRound:t},"FIRST_PLAYER_OF_ROUND_SET")}setFirstPasserOfPreviousRound(t){this.setState({firstPasserOfPreviousRound:t},"FIRST_PASSER_OF_PREVIOUS_ROUND_SET")}setFirstPlayerOverride(t){this.setState({firstPlayerOverride:t},"FIRST_PLAYER_OVERRIDE_SET")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setPassInfo(t){this.setState({passInfo:t},"PASS_INFO_SET")}isMyTurn(){return this.state.gameMode==="local"?this.state.currentPlayer==="player1":this.state.gameMode==="host"?this.state.currentPlayer==="player1":this.state.gameMode==="guest"?this.state.currentPlayer==="player2":!1}getLocalPlayerId(){return this.state.gameMode==="local"||this.state.gameMode==="host"?"player1":this.state.gameMode==="guest"?"player2":"player1"}getOpponentPlayerId(){return this.getLocalPlayerId()==="player1"?"player2":"player1"}getLocalPlayerState(){const t=this.getLocalPlayerId();return this.state[t]}getOpponentPlayerState(){const t=this.getOpponentPlayerId();return this.state[t]}isLocalPlayer(t){return t===this.getLocalPlayerId()}getLocalPlacedSections(){return this.state.gameMode==="local"?this.state.placedSections:this.state.gameMode==="host"?this.state.placedSections:this.state.gameMode==="guest"?this.state.opponentPlacedSections:this.state.placedSections}getOpponentPlacedSections(){let t;return this.state.gameMode==="local"?t=this.state.opponentPlacedSections:this.state.gameMode==="host"?t=this.state.opponentPlacedSections:this.state.gameMode==="guest"?t=this.state.placedSections:t=this.state.opponentPlacedSections,this.state.turnPhase==="placement"&&t.some(n=>n!==null)&&console.log(" [DEBUG] GameStateManager.getOpponentPlacedSections:",{gameMode:this.state.gameMode,result:t,rawOpponentPlacedSections:this.state.opponentPlacedSections,rawPlacedSections:this.state.placedSections}),t}addLogEntry(t,n=null,r=null){const i={...t,timestamp:t.timestamp||Date.now(),round:t.round||this.state.turn};n&&(i.debugSource=n),r&&(i.aiDecisionContext=r);const s=[...this.state.gameLog,i];this.setState({gameLog:s},"LOG_ENTRY_ADDED")}updatePassInfo(t){const n={...this.state.passInfo,...t};this.setState({passInfo:n},"PASS_INFO_UPDATED")}setWinner(t){this.setState({winner:t},"GAME_ENDED")}async processAction(t,n){return await this.actionProcessor.queueAction({type:t,payload:n})}isActionInProgress(){return this.actionProcessor.isActionInProgress()}getActionQueueLength(){return this.actionProcessor.getQueueLength()}clearActionQueue(){this.actionProcessor.clearQueue()}}const Ye=new Gk;class Hk{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return qk(t).buffer}}function qk(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function dO(e){return new Yk(e).unpack()}function fO(e){const t=new Fk,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class Yk{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,i="",s,l;for(;r<t;)s=n[r],s<160?(l=s,r++):(s^192)<32?(l=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(l=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(l=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(l);return this.index+=t,i}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,i=t&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,i=(t>>20&2047)-1023,l=(t&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*l}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class Fk{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(t[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),i=t/2**r-1,s=Math.floor(i*2**52),l=2**32,u=n<<31|r+1023<<20|s/l&1048575,f=s%l;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(f)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const l=n[s];if(t.hasOwnProperty(l)){this.pack(l);const u=this.pack(t[l]);if(u instanceof Promise)return u.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Hk,this._textEncoder=new TextEncoder}}let hO=!0,pO=!0;function _c(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function zo(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,u){if(l!==t)return i.apply(this,arguments);const f=h=>{const p=n(h);p&&(u.handleEvent?u.handleEvent(p):u(p))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(u,f),i.apply(this,[l,f])};const s=r.removeEventListener;r.removeEventListener=function(l,u){if(l!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(u))return s.apply(this,arguments);const f=this._eventMap[t].get(u);return this._eventMap[t].delete(u),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[l,f])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function Vk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(hO=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Kk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(pO=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function mO(){if(typeof window=="object"){if(hO)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Fv(e,t){pO&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Xk(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(_c(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(_c(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(_c(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=_c(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function bA(e){return Object.prototype.toString.call(e)==="[object Object]"}function gO(e){return bA(e)?Object.keys(e).reduce(function(t,n){const r=bA(e[n]),i=r?gO(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function zy(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?zy(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{zy(e,e.get(i),n)})}))}function xA(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&s.push(l)}),s.forEach(l=>{e.forEach(u=>{u.type===r&&u.trackId===l.id&&zy(e,u,i)})}),i}const SA=mO;function yO(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const f={};return Object.keys(u).forEach(h=>{if(h==="require"||h==="advanced"||h==="mediaSource")return;const p=typeof u[h]=="object"?u[h]:{ideal:u[h]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const m=function(g,x){return g?g+x.charAt(0).toUpperCase()+x.slice(1):x==="deviceId"?"sourceId":x};if(p.ideal!==void 0){f.optional=f.optional||[];let g={};typeof p.ideal=="number"?(g[m("min",h)]=p.ideal,f.optional.push(g),g={},g[m("max",h)]=p.ideal,f.optional.push(g)):(g[m("",h)]=p.ideal,f.optional.push(g))}p.exact!==void 0&&typeof p.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[m("",h)]=p.exact):["min","max"].forEach(g=>{p[g]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[m(g,h)]=p[g])})}),u.advanced&&(f.optional=(f.optional||[]).concat(u.advanced)),f},i=function(u,f){if(t.version>=61)return f(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const h=function(p,m,g){m in p&&!(g in p)&&(p[g]=p[m],delete p[m])};u=JSON.parse(JSON.stringify(u)),h(u.audio,"autoGainControl","googAutoGainControl"),h(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=r(u.audio)}if(u&&typeof u.video=="object"){let h=u.video.facingMode;h=h&&(typeof h=="object"?h:{ideal:h});const p=t.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete u.video.facingMode;let m;if(h.exact==="environment"||h.ideal==="environment"?m=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(S=>S.kind==="videoinput");let x=g.find(S=>m.some(A=>S.label.toLowerCase().includes(A)));return!x&&g.length&&m.includes("back")&&(x=g[g.length-1]),x&&(u.video.deviceId=h.exact?{exact:x.deviceId}:{ideal:x.deviceId}),u.video=r(u.video),SA("chrome: "+JSON.stringify(u)),f(u)})}u.video=r(u.video)}return SA("chrome: "+JSON.stringify(u)),f(u)},s=function(u){return t.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(u,f,h){i(u,p=>{n.webkitGetUserMedia(p,f,m=>{h&&h(s(m))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(f){return i(f,h=>u(h).then(p=>{if(h.audio&&!p.getAudioTracks().length||h.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(s(p))))}}}function vO(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function bO(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.track.id):s={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(u=>u.track&&u.track.id===i.id):s={track:i};const l=new Event("track");l.track=i,l.receiver=s,l.transceiver={receiver:s},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else zo(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function xO(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,f){let h=i.apply(this,arguments);return h||(h=t(this,u),this._senders.push(h)),h};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){s.apply(this,arguments);const f=this._senders.indexOf(u);f!==-1&&this._senders.splice(f,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(l=>{const u=this._senders.find(f=>f.track===l);u&&this._senders.splice(this._senders.indexOf(u),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function SO(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(l=>l._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(l=>xA(l,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),zo(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>xA(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,l;return this.getSenders().forEach(u=>{u.track===r&&(i?l=!0:i=u)}),this.getReceivers().forEach(u=>(u.track===r&&(s?l=!0:s=u),u.track===r)),l||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function AO(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,u){if(!u)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=t.apply(this,arguments);return this._shimmedLocalStreams[u.id]?this._shimmedLocalStreams[u.id].indexOf(f)===-1&&this._shimmedLocalStreams[u.id].push(f):this._shimmedLocalStreams[u.id]=[u,f],f};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(h=>{if(this.getSenders().find(m=>m.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const u=this.getSenders();n.apply(this,arguments);const f=this.getSenders().filter(h=>u.indexOf(h)===-1);this._shimmedLocalStreams[l.id]=[l].concat(f)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(u=>{const f=this._shimmedLocalStreams[u].indexOf(l);f!==-1&&this._shimmedLocalStreams[u].splice(f,1),this._shimmedLocalStreams[u].length===1&&delete this._shimmedLocalStreams[u]}),i.apply(this,arguments)}}function EO(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return AO(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const p=n.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(m=>this._reverseStreams[m.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(m=>{if(this.getSenders().find(x=>x.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const m=new e.MediaStream(p.getTracks());this._streams[p.id]=m,this._reverseStreams[m.id]=p,p=m}r.apply(this,[p])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},e.RTCPeerConnection.prototype.addTrack=function(p,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(A=>A===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const S=this._streams[m.id];if(S)S.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new e.MediaStream([p]);this._streams[m.id]=A,this._reverseStreams[A.id]=m,this.addStream(A)}return this.getSenders().find(A=>A.track===p)};function s(h,p){let m=p.sdp;return Object.keys(h._reverseStreams||[]).forEach(g=>{const x=h._reverseStreams[g],S=h._streams[x.id];m=m.replace(new RegExp(S.id,"g"),x.id)}),new RTCSessionDescription({type:p.type,sdp:m})}function l(h,p){let m=p.sdp;return Object.keys(h._reverseStreams||[]).forEach(g=>{const x=h._reverseStreams[g],S=h._streams[x.id];m=m.replace(new RegExp(x.id,"g"),S.id)}),new RTCSessionDescription({type:p.type,sdp:m})}["createOffer","createAnswer"].forEach(function(h){const p=e.RTCPeerConnection.prototype[h],m={[h](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[S=>{const A=s(this,S);g[0].apply(null,[A])},S=>{g[1]&&g[1].apply(null,S)},arguments[2]]):p.apply(this,arguments).then(S=>s(this,S))}};e.RTCPeerConnection.prototype[h]=m[h]});const u=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=l(this,arguments[0]),u.apply(this,arguments))};const f=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const h=f.get.apply(this);return h.type===""?h:s(this,h)}}),e.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(x=>{this._streams[x].getTracks().find(A=>p.track===A)&&(g=this._streams[x])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Gy(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function CO(e,t){zo(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const AA=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:CO,shimAddTrackRemoveTrack:EO,shimAddTrackRemoveTrackWithNative:AO,shimGetSendersWithDtmf:xO,shimGetUserMedia:yO,shimMediaStream:vO,shimOnTrack:bO,shimPeerConnection:Gy,shimSenderReceiverGetStats:SO},Symbol.toStringTag,{value:"Module"}));function PO(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,l){Fv("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,l)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,u,f){u in l&&!(f in l)&&(l[f]=l[u],delete l[u])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),s(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const u=l.apply(this,arguments);return i(u,"mozAutoGainControl","autoGainControl"),i(u,"mozNoiseSuppression","noiseSuppression"),u}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),i(u,"autoGainControl","mozAutoGainControl"),i(u,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[u])}}}}function Wk(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function wO(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Hy(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,l,u]=arguments;return r.apply(this,[s||null]).then(f=>{if(t.version<53&&!l)try{f.forEach(h=>{h.type=n[h.type]||h.type})}catch(h){if(h.name!=="TypeError")throw h;f.forEach((p,m)=>{f.set(m,Object.assign({},p,{type:n[p.type]||p.type}))})}return f}).then(l,u)}}function OO(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function TO(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),zo(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function _O(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Fv("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function DO(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function NO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:l}=s,u=l.getParameters();(!("encodings"in u)||u.encodings.length===1&&Object.keys(u.encodings[0]).length===0)&&(u.encodings=r,l.sendEncodings=r,this.setParametersPromises.push(l.setParameters(u).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return s})}function jO(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function MO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function kO(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const EA=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:NO,shimCreateAnswer:kO,shimCreateOffer:MO,shimGetDisplayMedia:Wk,shimGetParameters:jO,shimGetUserMedia:PO,shimOnTrack:wO,shimPeerConnection:Hy,shimRTCDataChannel:DO,shimReceiverGetStats:TO,shimRemoveStream:_O,shimSenderGetStats:OO},Symbol.toStringTag,{value:"Module"}));function RO(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function IO(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const l=new Event("addstream");l.stream=s,r.dispatchEvent(l)})}),t.apply(r,arguments)}}}function LO(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(h,p){const m=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[m]);return p?(g.then(h,p),Promise.resolve()):g},t.createAnswer=function(h,p){const m=arguments.length>=2?arguments[2]:arguments[0],g=r.apply(this,[m]);return p?(g.then(h,p),Promise.resolve()):g};let u=function(f,h,p){const m=i.apply(this,[f]);return p?(m.then(h,p),Promise.resolve()):m};t.setLocalDescription=u,u=function(f,h,p){const m=s.apply(this,[f]);return p?(m.then(h,p),Promise.resolve()):m},t.setRemoteDescription=u,u=function(f,h,p){const m=l.apply(this,[f]);return p?(m.then(h,p),Promise.resolve()):m},t.addIceCandidate=u}function $O(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(BO(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function BO(e){return e&&e.video!==void 0?Object.assign({},e,{video:gO(e.video)}):e}function UO(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let l=0;l<r.iceServers.length;l++){let u=r.iceServers[l];u.urls===void 0&&u.url?(Fv("RTCIceServer.url","RTCIceServer.urls"),u=JSON.parse(JSON.stringify(u)),u.urls=u.url,delete u.url,s.push(u)):s.push(r.iceServers[l])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function zO(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function GO(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function HO(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const CA=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:HO,shimCallbacksAPI:LO,shimConstraints:BO,shimCreateOfferLegacy:GO,shimGetUserMedia:$O,shimLocalStreamsAPI:RO,shimRTCIceServerUrls:UO,shimRemoteStreamsAPI:IO,shimTrackEventTransceiver:zO},Symbol.toStringTag,{value:"Module"}));var eg={exports:{}},PA;function Qk(){return PA||(PA=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<s.length;l++)i=s[l].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?s.push(l+"="+n.parameters[l]):s.push(l)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let u=3;u<s.length;u++){const f=s[u],h=t.matchPrefix(n,"a=rtpmap:"+f+" ")[0];if(h){const p=t.parseRtpMap(h),m=t.matchPrefix(n,"a=fmtp:"+f+" ");switch(p.parameters=m.length?t.parseFmtp(m[0]):{},p.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+f+" ").map(t.parseRtcpFb),r.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(p.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(u=>{r.headerExtensions.push(t.parseExtmap(u))});const l=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(u=>{l.forEach(f=>{u.rtcpFeedback.find(p=>p.type===f.type&&p.parameter===f.parameter)||u.rtcpFeedback.push(f)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(l=>{i+=t.writeRtpMap(l),i+=t.writeFmtp(l),i+=t.writeRtcpFb(l)});let s=0;return r.codecs.forEach(l=>{l.maxptime>s&&(s=l.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(l=>{i+=t.writeExtmap(l)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,u=t.matchPrefix(n,"a=ssrc:").map(g=>t.parseSsrcMedia(g)).filter(g=>g.attribute==="cname"),f=u.length>0&&u[0].ssrc;let h;const p=t.matchPrefix(n,"a=ssrc-group:FID").map(g=>g.substring(17).split(" ").map(S=>parseInt(S,10)));p.length>0&&p[0].length>1&&p[0][0]===f&&(h=p[0][1]),i.codecs.forEach(g=>{if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){let x={ssrc:f,codecPayloadType:parseInt(g.parameters.apt,10)};f&&h&&(x.rtx={ssrc:h}),r.push(x),s&&(x=JSON.parse(JSON.stringify(x)),x.fec={ssrc:f,mechanism:l?"red+ulpfec":"red"},r.push(x))}}),r.length===0&&f&&r.push({ssrc:f});let m=t.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,r.forEach(g=>{g.maxBitrate=m})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const l=t.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(l=>t.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const l=t.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const u=t.matchPrefix(n,"a=sctpmap:");if(u.length>0){const f=u[0].substring(10).split(" ");return{port:parseInt(f[0],10),protocol:f[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const l=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(eg)),eg.exports}var qO=Qk();const Hs=qr(qO),Zk=Iw({__proto__:null,default:Hs},[qO]);function Qd(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=Hs.parseCandidate(r.candidate);for(const l in s)l in i||Object.defineProperty(i,l,{value:s[l]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,zo(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function qy(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||zo(e,"icecandidate",t=>{if(t.candidate){const n=Hs.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Zd(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(u){if(!u||!u.sdp)return!1;const f=Hs.splitSections(u.sdp);return f.shift(),f.some(h=>{const p=Hs.parseMLine(h);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},r=function(u){const f=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(f===null||f.length<2)return-1;const h=parseInt(f[1],10);return h!==h?-1:h},i=function(u){let f=65536;return t.browser==="firefox"&&(t.version<57?u===-1?f=16384:f=2147483637:t.version<60?f=t.version===57?65535:65536:f=2147483637),f},s=function(u,f){let h=65536;t.browser==="firefox"&&t.version===57&&(h=65535);const p=Hs.matchPrefix(u.sdp,"a=max-message-size:");return p.length>0?h=parseInt(p[0].substring(19),10):t.browser==="firefox"&&f!==-1&&(h=2147483637),h},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const f=r(arguments[0]),h=i(f),p=s(arguments[0],f);let m;h===0&&p===0?m=Number.POSITIVE_INFINITY:h===0||p===0?m=Math.max(h,p):m=Math.min(h,p);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return m}}),this._sctp=g}return l.apply(this,arguments)}}function Jd(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const u=arguments[0],f=u.length||u.size||u.byteLength;if(r.readyState==="open"&&i.sctp&&f>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},zo(e,"datachannel",r=>(t(r.channel,r.target),r))}function Yy(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const l=new Event("connectionstatechange",i);s.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Fy(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function ef(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function tf(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}const Jk=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Fy,shimAddIceCandidateNullOrEmpty:ef,shimConnectionState:Yy,shimMaxMessageSize:Zd,shimParameterlessSetLocalDescription:tf,shimRTCIceCandidate:Qd,shimRTCIceCandidateRelayProtocol:qy,shimSendThrowTypeError:Jd},Symbol.toStringTag,{value:"Module"}));function eR({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=mO,r=Xk(e),i={browserDetails:r,commonShim:Jk,extractVersion:_c,disableLog:Vk,disableWarnings:Kk,sdp:Zk};switch(r.browser){case"chrome":if(!AA||!Gy||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=AA,ef(e,r),tf(e),yO(e,r),vO(e),Gy(e,r),bO(e),EO(e,r),xO(e),SO(e),CO(e,r),Qd(e),qy(e),Yy(e),Zd(e,r),Jd(e),Fy(e,r);break;case"firefox":if(!EA||!Hy||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=EA,ef(e,r),tf(e),PO(e,r),Hy(e,r),wO(e),_O(e),OO(e),TO(e),DO(e),NO(e),jO(e),MO(e),kO(e),Qd(e),Yy(e),Zd(e,r),Jd(e);break;case"safari":if(!CA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=CA,ef(e,r),tf(e),UO(e),GO(e),LO(e),RO(e),IO(e),zO(e),$O(e),HO(e),Qd(e),qy(e),Zd(e,r),Jd(e),Fy(e,r);break;default:n("Unsupported browser!");break}return i}const wA=eR({window:typeof window>"u"?void 0:window});function Go(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class YO{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,l=0;for(;l<r;){const u=Math.min(r,l+this.chunkedMTU),f=t.slice(l,u),h={__peerData:this._dataCount,n:s,data:f,total:i};n.push(h),l=u,s++}return this._dataCount++,n}}}function tR(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}const tg=wA.default||wA,bc=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return tg.browserDetails.browser}getVersion(){return tg.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=tg.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},nR=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),FO=()=>Math.random().toString(36).slice(2),OA={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class rR extends YO{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=OA,this.browser=bc.getBrowser(),this.browserVersion=bc.getVersion(),this.pack=fO,this.unpack=dO,this.supports=(function(){const n={browser:bc.isBrowserSupported(),webRTC:bc.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(OA),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!bc.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=nR,this.randomToken=FO}}const Un=new rR,aR="PeerJS: ";class iR{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[aR,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Ce=new iR,Vv={},oR=Object.prototype.hasOwnProperty,kn="~";function $c(){}Object.create&&($c.prototype=Object.create(null),new $c().__proto__||(kn=!1));function sR(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function VO(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new sR(n,r||e,i),l=kn?kn+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function nf(e,t){--e._eventsCount===0?e._events=new $c:delete e._events[t]}function wn(){this._events=new $c,this._eventsCount=0}wn.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)oR.call(n,r)&&t.push(kn?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};wn.prototype.listeners=function(t){var n=kn?kn+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,l=new Array(s);i<s;i++)l[i]=r[i].fn;return l};wn.prototype.listenerCount=function(t){var n=kn?kn+t:t,r=this._events[n];return r?r.fn?1:r.length:0};wn.prototype.emit=function(t,n,r,i,s,l){var u=kn?kn+t:t;if(!this._events[u])return!1;var f=this._events[u],h=arguments.length,p,m;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),h){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,n),!0;case 3:return f.fn.call(f.context,n,r),!0;case 4:return f.fn.call(f.context,n,r,i),!0;case 5:return f.fn.call(f.context,n,r,i,s),!0;case 6:return f.fn.call(f.context,n,r,i,s,l),!0}for(m=1,p=new Array(h-1);m<h;m++)p[m-1]=arguments[m];f.fn.apply(f.context,p)}else{var g=f.length,x;for(m=0;m<g;m++)switch(f[m].once&&this.removeListener(t,f[m].fn,void 0,!0),h){case 1:f[m].fn.call(f[m].context);break;case 2:f[m].fn.call(f[m].context,n);break;case 3:f[m].fn.call(f[m].context,n,r);break;case 4:f[m].fn.call(f[m].context,n,r,i);break;default:if(!p)for(x=1,p=new Array(h-1);x<h;x++)p[x-1]=arguments[x];f[m].fn.apply(f[m].context,p)}}return!0};wn.prototype.on=function(t,n,r){return VO(this,t,n,r,!1)};wn.prototype.once=function(t,n,r){return VO(this,t,n,r,!0)};wn.prototype.removeListener=function(t,n,r,i){var s=kn?kn+t:t;if(!this._events[s])return this;if(!n)return nf(this,s),this;var l=this._events[s];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&nf(this,s);else{for(var u=0,f=[],h=l.length;u<h;u++)(l[u].fn!==n||i&&!l[u].once||r&&l[u].context!==r)&&f.push(l[u]);f.length?this._events[s]=f.length===1?f[0]:f:nf(this,s)}return this};wn.prototype.removeAllListeners=function(t){var n;return t?(n=kn?kn+t:t,this._events[n]&&nf(this,n)):(this._events=new $c,this._eventsCount=0),this};wn.prototype.off=wn.prototype.removeListener;wn.prototype.addListener=wn.prototype.on;wn.prefixed=kn;wn.EventEmitter=wn;Vv=wn;var Ho={};Go(Ho,"ConnectionType",()=>Ni);Go(Ho,"PeerErrorType",()=>Bt);Go(Ho,"BaseConnectionErrorType",()=>Vy);Go(Ho,"DataConnectionErrorType",()=>Kv);Go(Ho,"SerializationType",()=>Qf);Go(Ho,"SocketEventType",()=>Di);Go(Ho,"ServerMessageType",()=>An);var Ni=(function(e){return e.Data="data",e.Media="media",e})({}),Bt=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),Vy=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),Kv=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Qf=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),Di=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),An=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const KO="1.5.5";class lR extends Vv.EventEmitter{constructor(t,n,r,i,s,l=5e3){super(),this.pingInterval=l,this._disconnected=!0,this._messagesQueue=[];const u=t?"wss://":"ws://";this._baseUrl=u+n+":"+r+i+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+KO),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),Ce.log("Server message received:",s)}catch{Ce.log("Invalid server message",i.data);return}this.emit(Di.Message,s)},this._socket.onclose=i=>{this._disconnected||(Ce.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(Di.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Ce.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Ce.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:An.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Di.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class XO{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Ni.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,i={ordered:!!t.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Ce.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;Ce.log("Listening for ICE candidates."),t.onicecandidate=l=>{!l.candidate||!l.candidate.candidate||(Ce.log(`Received ICE candidates for ${n}:`,l.candidate),s.socket.send({type:An.Candidate,payload:{candidate:l.candidate,type:i,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Ce.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Vy.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Ce.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Vy.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Ce.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Ce.log("Listening for data channel"),t.ondatachannel=l=>{Ce.log("Received data channel");const u=l.channel;s.getConnection(n,r)._initializeDataChannel(u)},Ce.log("Listening for remote stream"),t.ontrack=l=>{Ce.log("Received remote stream");const u=l.streams[0],f=s.getConnection(n,r);if(f.type===Ni.Media){const h=f;this._addStreamToMediaConnection(u,h)}}}cleanup(){Ce.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Ce.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ce.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ni.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:An.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Bt.WebRTC,i),Ce.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(Bt.WebRTC,r),Ce.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Ce.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Ce.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:An.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(Bt.WebRTC,i),Ce.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(Bt.WebRTC,r),Ce.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;Ce.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),Ce.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(l){i.emitError(Bt.WebRTC,l),Ce.log("Failed to setRemoteDescription, ",l)}}async handleCandidate(t){Ce.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Ce.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Bt.WebRTC,n),Ce.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Ce.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Ce.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Ce.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class WO extends Vv.EventEmitter{emitError(t,n){Ce.error("Error:",n),this.emit("error",new cR(`${t}`,n))}}class cR extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class QO extends WO{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class lf extends QO{static#e=this.ID_PREFIX="mc_";get type(){return Ni.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||lf.ID_PREFIX+Un.randomToken(),this._negotiator=new XO(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Ce.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case An.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case An.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Ce.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Ce.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class uR{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:l}=this._options,u=new URL(`${n}://${r}:${i}${s}${l}/${t}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",KO),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Ce.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Un.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Un.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Ce.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class cf extends QO{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Ni.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||cf.ID_PREFIX+FO(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new XO(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Ce.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Ce.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Ce.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Kv.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case An.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case An.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Ce.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Xv extends cf{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>cf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Ce.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class ng extends Xv{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new YO,this.serialization=Qf.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=dO(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=tR(r.data);this._handleDataMessage({data:i})}}_send(t,n){const r=fO(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Ce.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class dR extends Xv{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Qf.None}}class fR extends Xv{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=Un.chunkedMTU){this.emitError(Kv.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Qf.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Wv extends WO{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:dR,json:fR,binary:ng,"binary-utf8":ng,default:ng},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:Un.CLOUD_HOST,port:Un.CLOUD_PORT,path:"/",key:Wv.DEFAULT_KEY,token:Un.randomToken(),config:Un.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Un.CLOUD_HOST?this._options.secure=Un.isSecure():this._options.host==Un.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Ce.setLogFunction(this._options.logFunction),Ce.logLevel=this._options.debug||0,this._api=new uR(n),this._socket=this._createServerConnection(),!Un.supports.audioVideo&&!Un.supports.data){this._delayedAbort(Bt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Un.validateId(r)){this._delayedAbort(Bt.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(Bt.ServerError,i))}_createServerConnection(){const t=new lR(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Di.Message,n=>{this._handleMessage(n)}),t.on(Di.Error,n=>{this._abort(Bt.SocketError,n)}),t.on(Di.Disconnected,()=>{this.disconnected||(this.emitError(Bt.Network,"Lost connection to server."),this.disconnect())}),t.on(Di.Close,()=>{this.disconnected||this._abort(Bt.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,i=t.src;switch(n){case An.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case An.Error:this._abort(Bt.ServerError,r.msg);break;case An.IdTaken:this._abort(Bt.UnavailableID,`ID "${this.id}" is taken`);break;case An.InvalidKey:this._abort(Bt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case An.Leave:Ce.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case An.Expire:this.emitError(Bt.PeerUnavailable,`Could not connect to peer ${i}`);break;case An.Offer:{const s=r.connectionId;let l=this.getConnection(i,s);if(l&&(l.close(),Ce.warn(`Offer received for existing Connection ID:${s}`)),r.type===Ni.Media){const f=new lf(i,this,{connectionId:s,_payload:r,metadata:r.metadata});l=f,this._addConnection(i,l),this.emit("call",f)}else if(r.type===Ni.Data){const f=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});l=f,this._addConnection(i,l),this.emit("connection",f)}else{Ce.warn(`Received malformed connection type:${r.type}`);return}const u=this._getMessages(s);for(const f of u)l.handleMessage(f);break}default:{if(!r){Ce.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,l=this.getConnection(i,s);l&&l.peerConnection?l.handleMessage(t):s?this._storeMessage(s,t):Ce.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Bt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Ce.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Bt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Ce.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new lf(t,this,{...r,_stream:n});return this._addConnection(t,i),i}_addConnection(t,n){Ce.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Ce.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Ce.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Ce.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Ce.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Ce.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Bt.ServerError,n))}}var TA=Wv;class hR{constructor(){this.peer=null,this.connection=null,this.roomCode=null,this.isHost=!1,this.isConnected=!1,this.listeners=new Set,this.actionProcessor=null}setActionProcessor(t){this.actionProcessor=t}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}emit(t,n={}){this.listeners.forEach(r=>{try{r({type:t,data:n})}catch(i){console.error("Error in P2P listener:",i)}})}generateRoomCode(){return Math.floor(1e5+Math.random()*9e5).toString()}async hostGame(){try{return this.isHost=!0,this.roomCode=this.generateRoomCode(),this.peer=new TA(this.roomCode,{debug:2}),new Promise((t,n)=>{this.peer.on("open",r=>{console.log("Host peer opened with ID:",r),this.emit("multiplayer_mode_change",{mode:"host",isHost:!0}),this.emit("room_created",{roomCode:this.roomCode}),t(this.roomCode)}),this.peer.on("connection",r=>{console.log("Guest connected:",r.peer),this.connection=r,this.setupConnection()}),this.peer.on("error",r=>{console.error("Peer error:",r),this.emit("connection_error",{error:r.message}),n(r)}),setTimeout(()=>{(!this.peer||!this.peer.open)&&n(new Error("Failed to create room - timeout"))},3e4)})}catch(t){throw console.error("Failed to host game:",t),t}}async joinGame(t){try{return this.isHost=!1,this.roomCode=t,this.peer=new TA({debug:2}),new Promise((n,r)=>{this.peer.on("open",i=>{console.log("Guest peer opened with ID:",i),this.connection=this.peer.connect(t),this.setupConnection(),this.connection.on("open",()=>{console.log("Connected to host"),this.emit("multiplayer_mode_change",{mode:"guest",isHost:!1}),this.emit("joined_room",{roomCode:t}),n()}),this.connection.on("error",s=>{console.error("Connection error:",s),this.emit("connection_error",{error:s.message}),r(s)})}),this.peer.on("error",i=>{console.error("Peer error:",i),this.emit("connection_error",{error:i.message}),r(i)}),setTimeout(()=>{this.isConnected||r(new Error("Failed to join room - timeout"))},3e4)})}catch(n){throw console.error("Failed to join game:",n),n}}setupConnection(){this.connection&&(this.connection.on("open",()=>{this.isConnected=!0,this.emit("connected",{isHost:this.isHost,roomCode:this.roomCode}),console.log("P2P connection established")}),this.connection.on("data",t=>{this.handleReceivedData(t)}),this.connection.on("close",()=>{this.isConnected=!1,this.emit("disconnected",{}),console.log("P2P connection closed")}),this.connection.on("error",t=>{console.error("Connection error:",t),this.emit("connection_error",{error:t.message})}))}async handleReceivedData(t){try{switch(console.log("Received P2P data:",t),t.type){case"ACTION":this.actionProcessor?await this.actionProcessor.processNetworkAction(t):console.error("ActionProcessor not set - cannot process network action");break;case"PING":this.sendData({type:"PONG",timestamp:t.timestamp});break;case"PONG":const n=Date.now()-t.timestamp;this.emit("latency_update",{latency:n});break;case"PHASE_COMPLETED":this.emit("PHASE_COMPLETED",t.data);break;default:console.warn("Unknown P2P data type received:",t.type)}}catch(n){console.error("Error handling received P2P data:",n)}}sendData(t){if(this.connection&&this.isConnected)try{this.connection.send(t)}catch(n){console.error("Failed to send data:",n),this.emit("send_error",{error:n.message})}else console.warn("Attempted to send data but no connection available")}syncGameState(t=null){console.warn("syncGameState is deprecated - use ActionProcessor for state changes"),t?(console.log("Received state sync (not applied):",t),this.emit("state_sync_received",{state:t})):this.emit("state_sync_requested",{})}ping(){this.isConnected&&this.sendData({type:"PING",timestamp:Date.now()})}disconnect(){this.connection&&(this.connection.close(),this.connection=null),this.peer&&(this.peer.destroy(),this.peer=null),this.isConnected=!1,this.isHost=!1,this.roomCode=null,this.emit("multiplayer_mode_change",{mode:"local",isHost:!1}),this.emit("disconnected",{})}getStatus(){return{isConnected:this.isConnected,isHost:this.isHost,roomCode:this.roomCode,peerId:this.peer?.id,connectionId:this.connection?.peer}}isReady(){return this.isConnected&&this.connection&&this.peer}}const xc=new hR,rf=(e,t)=>{if(!e||!t)return null;const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left+r.width/2-n.left,y:r.top+r.height/2-n.top}},pR=e=>({preGame:"Pre-Game Setup",placement:"Placement Phase",droneSelection:"Drone Selection",initialDraw:"Draw Phase",optionalDiscard:"Discard Phase",allocateShields:"Shield Allocation",deployment:"Deployment Phase",action:"Action Phase",combatPending:"Combat Phase Pending",roundEnd:"Round End",gameEnd:"Game Over"})[e]||e,mR=["preGame","droneSelection","deckSelection","deckBuilding","placement","initialDraw","allocateShields","optionalDiscard"],gR=["deployment","action"],yR=e=>mR.includes(e),_A=e=>gR.includes(e),Ii=()=>{const[e,t]=E.useState(Ye.getState()),[n,r]=E.useState(xc.getStatus());E.useEffect(()=>{Ye.setupP2PIntegration(xc)},[]),E.useEffect(()=>Ye.subscribe(L=>{t(Ye.getState())}),[]),E.useEffect(()=>xc.subscribe(L=>{r(xc.getStatus())}),[]);const i=E.useCallback(()=>Ye.isMyTurn(),[e.currentPlayer,e.gameMode]),s=E.useCallback(()=>Ye.getLocalPlayerId(),[e.gameMode]),l=E.useCallback(()=>Ye.getOpponentPlayerId(),[e.gameMode]),u=E.useCallback(()=>e.gameMode!=="local",[e.gameMode]),f=E.useCallback(()=>u()&&!i(),[u,i]),h=E.useCallback(()=>Ye.getLocalPlayerState(),[e.gameMode]),p=E.useCallback(()=>Ye.getOpponentPlayerState(),[e.gameMode]),m=E.useCallback(te=>Ye.isLocalPlayer(te),[e.gameMode]),g=E.useCallback(()=>Ye.getLocalPlacedSections(),[e.gameMode,e.placedSections,e.opponentPlacedSections]),x=E.useCallback(()=>{const te=Ye.getOpponentPlacedSections();return e.turnPhase==="placement"&&te.some(L=>L!==null)&&console.error(" CRITICAL - getOpponentPlacedSections returning:",te,"from gameState:",e.opponentPlacedSections),te},[e.gameMode,e.placedSections,e.opponentPlacedSections,e.turnPhase]),S=E.useCallback((te,L)=>{Ye.updatePlayers(te,L)},[]),A=E.useCallback((te,L)=>{Ye.updatePlayerState(te,L)},[]),C=E.useCallback((te,L)=>{Ye.setPlayerStates(te,L)},[]),P=E.useCallback(te=>{Ye.setFirstPasserOfPreviousRound(te)},[]),O=E.useCallback(te=>{Ye.setFirstPlayerOverride(te)},[]),T=E.useCallback(te=>{Ye.setPassInfo(te)},[]),j=E.useCallback(te=>{Ye.updatePassInfo(te)},[]),N=E.useCallback((te,L,ee)=>{Ye.addLogEntry(te,L,ee)},[]),D=E.useCallback(()=>{Ye.reset()},[]),M=E.useCallback(te=>{Ye.setWinner(te)},[]),R=E.useCallback(async(te,L)=>await Ye.processAction(te,L),[]),U=E.useCallback(()=>Ye.isActionInProgress(),[]),K=E.useCallback(()=>Ye.getActionQueueLength(),[]),q=E.useCallback(()=>{Ye.clearActionQueue()},[]),W=E.useCallback(()=>yR(e.turnPhase),[e.turnPhase]),le=E.useCallback(()=>_A(e.turnPhase),[e.turnPhase]),ie=E.useCallback(async(te,L)=>{const ee=e.turnPhase,he=_A(ee);return console.log(` useGameState.routeAction: ${te} in phase ${ee} (${he?"sequential":"simultaneous"})`),he?await R(te,L):(console.warn(` Simultaneous phase action ${te} requires direct GameStateManager updates in component`),{success:!1,error:`Simultaneous phase action ${te} should use direct updates (updateGameState/updatePlayerState) rather than routeAction`,phase:ee,recommendation:"Use direct GameStateManager methods for simultaneous phases"})},[e.turnPhase,R]);return{gameState:e,p2pStatus:n,isMyTurn:i,getLocalPlayerId:s,getOpponentPlayerId:l,isMultiplayer:u,isWaitingForOpponent:f,getLocalPlayerState:h,getOpponentPlayerState:p,isLocalPlayer:m,getLocalPlacedSections:g,getOpponentPlacedSections:x,updatePlayers:S,updatePlayerState:A,setPlayerStates:C,setFirstPasserOfPreviousRound:P,setFirstPlayerOverride:O,setPassInfo:T,updatePassInfo:j,addLogEntry:N,resetGame:D,setWinner:M,processAction:R,isActionInProgress:U,getActionQueueLength:K,clearActionQueue:q,isSimultaneousPhase:W,isSequentialPhase:le,routeAction:ie,gameStateManager:Ye,p2pManager:xc}},DA=()=>{const e=["bridge","powerCell","droneControlHub"];return console.log(` Initialized ship placement: ${e.length} sections available`),console.log(` Available sections: ${e.join(", ")}`),{unplacedSections:[...e],placedSections:Array(3).fill(null),opponentPlacedSections:Array(3).fill(null)}};class kc{constructor(){if(kc.instance)return kc.instance;kc.instance=this,this.PRE_GAME_PHASES=["droneSelection","deckSelection","placement","gameInitializing"],this.ROUND_PHASES=["determineFirstPlayer","energyReset","mandatoryDiscard","optionalDiscard","draw","allocateShields","mandatoryDroneRemoval","deployment","deploymentComplete","action"],this.SIMULTANEOUS_PHASES=["droneSelection","deckSelection","placement","mandatoryDiscard","optionalDiscard","determineFirstPlayer","allocateShields","mandatoryDroneRemoval","deploymentComplete"],this.SEQUENTIAL_PHASES=["deployment","action"],this.AUTOMATIC_PHASES=["gameInitializing","energyReset","draw"],this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.isProcessingAutomaticPhase=!1,this.listeners=[],this.gameStateManager=null,this.actionProcessor=null,this.isMultiplayer=!1,this.gameDataService=null,this.isInitialized=!1,console.log(" GameFlowManager initialized")}initialize(t,n,r,i){if(this.isInitialized){console.log(" GameFlowManager already initialized, skipping...");return}if(this.gameStateManager=t,this.actionProcessor=n,this.isMultiplayer=r,this.gameDataService||(this.gameDataService=Vt.getInstance(t)),i&&i.initialize&&this.isMultiplayer&&!this.isMultiplayer()){const s=i.currentAIPersonality,l=i.dronePool,u=i.aiPersonalities;s&&l&&u&&(i.initialize(u,l,s,n,t),console.log(" GameFlowManager re-initialized AIPhaseProcessor with dependencies"))}this.setupEventListeners(),this.isInitialized=!0,console.log(" GameFlowManager initialized with external systems")}setupEventListeners(){this.gameStateManager&&this.gameStateManager.subscribe(t=>{const{state:n,type:r}=t;this.checkSequentialPhaseCompletion(n,r),this.checkSimultaneousPhaseCompletion(n,r)})}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}emit(t,n){console.log(` GameFlowManager emitting: ${t}`,n),this.listeners.forEach(r=>{try{r({type:t,...n})}catch(i){console.error("GameFlowManager listener error:",i)}})}getCurrentPhaseInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,isPreGame:this.gameStage==="preGame",isRoundLoop:this.gameStage==="roundLoop",isGameOver:this.gameStage==="gameOver"}}async startGameFlow(t="droneSelection"){console.log(` GameFlowManager starting game flow with phase: ${t}`),this.currentPhase=t,this.gameStage=this.gameStateManager.get("gameStage"),this.roundNumber=this.gameStateManager.get("roundNumber");let n={};if(t==="droneSelection"){console.log(" GameFlowManager initializing drone selection phase data");const r=uO(Pn),i=DA();n={...r,...i}}this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!1}),Object.keys(n).length>0&&this.gameStateManager.setState(n,"GAME_INITIALIZATION","phaseInitialization")),this.emit("phaseTransition",{newPhase:t,previousPhase:null,gameStage:this.gameStage})}async onSimultaneousPhaseComplete(t,n){if(console.log(` GameFlowManager: Simultaneous phase '${t}' completed`,n),this.actionProcessor){const i=this.actionProcessor.applyPhaseCommitments(t);Object.keys(i).length>0&&(this.gameStateManager.setState(i,"COMMITMENT_APPLICATION",`${t}_completion`),console.log(` GameFlowManager: Applied ${t} commitments to game state`))}const r=this.getNextPhase(t);r?this.isSequentialPhase(r)?(console.log(` GameFlowManager: Handover to sequential phase '${r}'`),this.initiateSequentialPhase(r)):(console.log(` GameFlowManager: Continuing with simultaneous phase '${r}'`),await this.transitionToPhase(r)):console.log(" GameFlowManager: Game flow completed or needs special handling")}checkSequentialPhaseCompletion(t,n){n!=="PASS_INFO_SET"||!["deployment","action"].includes(t.turnPhase)||t.passInfo&&t.passInfo.player1Passed&&t.passInfo.player2Passed&&(console.log(` GameFlowManager: Detected sequential phase completion via state monitoring: ${t.turnPhase}`),this.onSequentialPhaseComplete(t.turnPhase,{firstPasser:t.passInfo.firstPasser}))}checkSimultaneousPhaseCompletion(t,n){if(n!=="COMMITMENT_UPDATE"||!t.commitments)return;console.log(" checkSimultaneousPhaseCompletion called:",{eventType:n,currentPhase:t.turnPhase});const r=t.turnPhase;if(!this.SIMULTANEOUS_PHASES.includes(r)){console.log(" Early return: Not a simultaneous phase",{currentPhase:r,simultaneousPhases:this.SIMULTANEOUS_PHASES});return}const i=t.commitments[r];if(!i){console.log(" Early return: No commitments for current phase",{currentPhase:r,allCommitments:Object.keys(t.commitments)});return}const s=i.player1?.completed&&i.player2?.completed;console.log(" Checking completion status:",{currentPhase:r,player1Complete:i.player1?.completed,player2Complete:i.player2?.completed,bothComplete:s}),s&&(console.log(` GameFlowManager: Detected simultaneous phase completion via state monitoring: ${r}`),this.onSimultaneousPhaseComplete(r,i))}async onSequentialPhaseComplete(t,n){console.log(` GameFlowManager: Sequential phase '${t}' completed`,n);const r=this.getNextPhase(t);r?await this.transitionToPhase(r):t==="action"&&await this.startNewRound()}getNextPhase(t){return this.gameStage==="preGame"?this.getNextPreGamePhase(t):this.gameStage==="roundLoop"?this.getNextRoundPhase(t):null}async processAutomaticPhase(t){console.log(` GameFlowManager: Processing automatic phase '${t}'`),this.isProcessingAutomaticPhase=!0;let n=null;try{t==="gameInitializing"?n=await this.processGameInitializingPhase():t==="energyReset"?n=await this.processAutomaticEnergyResetPhase():t==="draw"?n=await this.processAutomaticDrawPhase():console.warn(` No handler for automatic phase: ${t}`),n?(console.log(` GameFlowManager: Transitioning from automatic phase '${t}' to '${n}'`),await this.transitionToPhase(n)):console.warn(` No next phase found after automatic phase: ${t}`)}finally{this.isProcessingAutomaticPhase=!1}}async processAutomaticDrawPhase(){console.log(" GameFlowManager: Processing automatic draw phase");const t="draw";try{const{performAutomaticDraw:n}=await sa(async()=>{const{performAutomaticDraw:l}=await import("./cardDrawUtils-Dy_AStx-.js");return{performAutomaticDraw:l}},[]);if(!this.gameStateManager){console.error(" GameStateManager not available for automatic draw");return}const r=this.gameStateManager.getState(),i=n(r,this.gameStateManager);await this.actionProcessor.queueAction({type:"draw",payload:{player1:i.player1,player2:i.player2}}),console.log(" Automatic draw phase completed, transitioning to next phase"),this.emit("phaseTransition",{newPhase:"draw",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const s=this.getNextPhase("draw");return console.log(" Automatic draw completed, returning next phase:",s),s}catch(n){console.error(" Error during automatic draw phase:",n)}}async processAutomaticEnergyResetPhase(){console.log(" GameFlowManager: Processing automatic energy reset phase");const t="energyReset";try{if(!this.gameStateManager){console.error(" GameStateManager not available for energy reset");return}const n=this.gameStateManager.getState(),i=(await sa(async()=>{const{default:x}=await Promise.resolve().then(()=>Bk);return{default:x}},void 0)).default.getInstance(this.gameStateManager),s=i.getEffectiveShipStats(n.player1,n.placedSections),l=i.getEffectiveShipStats(n.player2,n.opponentPlacedSections),u={player1:n.placedSections,player2:n.opponentPlacedSections},f=ke.readyDronesAndRestoreShields(n.player1,n.player2,u),h=ke.readyDronesAndRestoreShields(n.player2,n.player1,u),p={...f,energy:s.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?s.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:s.totals.deploymentBudget},m={...h,energy:l.totals.energyPerTurn,initialDeploymentBudget:this.roundNumber===1?l.totals.initialDeployment:0,deploymentBudget:this.roundNumber===1?0:l.totals.deploymentBudget};await this.actionProcessor.queueAction({type:"energyReset",payload:{player1:p,player2:m}}),console.log(` Energy reset complete - Player 1: ${p.energy} energy, Player 2: ${m.energy} energy`),this.emit("phaseTransition",{newPhase:"energyReset",previousPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber,automaticProcessed:!0});const g=this.getNextPhase("energyReset");return console.log(" Automatic energy reset completed, returning next phase:",g),g}catch(n){console.error(" Error during automatic energy reset phase:",n)}}async processGameInitializingPhase(){console.log(" GameFlowManager: Processing game initializing phase");try{this.emit("phaseTransition",{newPhase:"gameInitializing",previousPhase:"placement",gameStage:this.gameStage,roundNumber:this.roundNumber}),await new Promise(n=>setTimeout(n,100));const t=this.getNextPhase("gameInitializing");return console.log(" Game initialization completed, returning next phase:",t),t}catch(t){throw console.error(" Error during game initialization:",t),t}}getNextPreGamePhase(t){const n=this.PRE_GAME_PHASES.indexOf(t);return n>=0&&n<this.PRE_GAME_PHASES.length-1?this.PRE_GAME_PHASES[n+1]:t==="gameInitializing"?"determineFirstPlayer":null}getNextRoundPhase(t){const n=this.ROUND_PHASES.indexOf(t);for(let r=n+1;r<this.ROUND_PHASES.length;r++){const i=this.ROUND_PHASES[r];if(this.isPhaseRequired(i))return i}return null}isPhaseRequired(t){if(!this.gameStateManager)return console.warn(" GameStateManager not available for phase requirement check"),!0;const n=this.gameStateManager.getState();switch(t){case"energyReset":return!0;case"mandatoryDiscard":return this.anyPlayerExceedsHandLimit(n);case"optionalDiscard":return this.anyPlayerHasCards(n);case"draw":return!0;case"determineFirstPlayer":return!0;case"allocateShields":return this.anyPlayerHasShieldsToAllocate(n);case"mandatoryDroneRemoval":return this.anyPlayerExceedsDroneLimit(n);case"deployment":case"action":return!0;case"deploymentComplete":return!1;default:return!0}}anyPlayerExceedsHandLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for hand limit check"),!1;const n=t.player1.hand?t.player1.hand.length:0,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.handLimit;if(n>i)return!0;const s=t.player2.hand?t.player2.hand.length:0,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.handLimit;return s>u}anyPlayerHasShieldsToAllocate(t){return!1}anyPlayerHasCards(t){const n=t.player1.hand&&t.player1.hand.length>0,r=t.player2.hand&&t.player2.hand.length>0;return n||r}anyPlayerExceedsDroneLimit(t){if(!this.gameDataService)return console.warn(" GameDataService not initialized for drone limit check"),!1;const n=Object.values(t.player1.dronesOnBoard||{}).flat().length,i=this.gameDataService.getEffectiveShipStats(t.player1,t.placedSections).totals.droneLimit;if(n>i)return!0;const s=Object.values(t.player2.dronesOnBoard||{}).flat().length,u=this.gameDataService.getEffectiveShipStats(t.player2,t.opponentPlacedSections).totals.droneLimit;return s>u}isSimultaneousPhase(t){return this.SIMULTANEOUS_PHASES.includes(t)}isSequentialPhase(t){return this.SEQUENTIAL_PHASES.includes(t)}isAutomaticPhase(t){return this.AUTOMATIC_PHASES.includes(t)}initiateSequentialPhase(t){console.log(` GameFlowManager: Initiating sequential phase '${t}' via ActionProcessor`);const n=this.currentPhase;this.currentPhase=t,this.actionProcessor&&this.gameStateManager?(console.log(` Starting ${t} phase through ActionProcessor`),this.actionProcessor.processPhaseTransition({newPhase:t,gameStage:this.gameStage,roundNumber:this.roundNumber})):console.warn(" ActionProcessor or GameStateManager not available for sequential phase initiation"),this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,handoverType:"simultaneous-to-sequential"})}async transitionToPhase(t){const n=this.currentPhase;this.currentPhase=t,this.ROUND_PHASES.includes(t)&&this.gameStage!=="roundLoop"&&(this.gameStage="roundLoop",this.roundNumber===0&&(this.roundNumber=1)),console.log(` GameFlowManager: Transitioning from '${n}' to '${t}' (${this.gameStage})`);let r={},i=null;if(t==="placement"?(console.log(" GameFlowManager: Initializing placement phase data"),r=DA()):t==="determineFirstPlayer"&&(console.log(" GameFlowManager: Initializing first player determination phase"),this.actionProcessor&&(i=await this.actionProcessor.processFirstPlayerDetermination(),console.log(" First player determination completed:",i),i&&i.stateUpdates&&(r={...r,...i.stateUpdates},console.log(" GameFlowManager: Including first player state updates:",i.stateUpdates)))),this.actionProcessor&&this.gameStateManager&&(await this.actionProcessor.processPhaseTransition({newPhase:t,resetPassInfo:!0}),this.gameStateManager.setState({gameStage:this.gameStage,roundNumber:this.roundNumber,...r},"PHASE_TRANSITION","gameFlowManagerMetadata")),this.isAutomaticPhase(t)){console.log(` GameFlowManager: Auto-processing automatic phase '${t}'`),await this.processAutomaticPhase(t);return}this.emit("phaseTransition",{newPhase:t,previousPhase:n,gameStage:this.gameStage,roundNumber:this.roundNumber,firstPlayerResult:i})}async startNewRound(){this.roundNumber++,console.log(` GameFlowManager: Starting round ${this.roundNumber}`);const t={player1Passed:!1,player2Passed:!1,firstPasser:null};this.gameStateManager.setPassInfo(t),console.log(" PassInfo reset for new round");const n=this.ROUND_PHASES.find(r=>this.isPhaseRequired(r));n?await this.transitionToPhase(n):(console.warn(" No required phases found for new round, defaulting to deployment"),await this.transitionToPhase("deployment"))}endGame(t){console.log(` GameFlowManager: Game ended, winner: ${t}`),this.gameStage="gameOver",this.currentPhase="gameOver",this.actionProcessor&&this.gameStateManager&&(this.actionProcessor.processPhaseTransition({newPhase:"gameOver",resetPassInfo:!1}),this.gameStateManager.setState({gameStage:"gameOver",winner:t},"GAME_ENDED","gameEndMetadata")),this.emit("gameEnded",{winnerId:t,finalRound:this.roundNumber})}reset(){console.log(" GameFlowManager: Resetting game flow"),this.currentPhase="preGame",this.gameStage="preGame",this.roundNumber=0,this.emit("gameReset",{})}getDebugInfo(){return{currentPhase:this.currentPhase,gameStage:this.gameStage,roundNumber:this.roundNumber,preGamePhases:this.PRE_GAME_PHASES,roundPhases:this.ROUND_PHASES,systemsConnected:{gameStateManager:!!this.gameStateManager,actionProcessor:!!this.actionProcessor},timestamp:new Date().toISOString()}}}const Bc=new kc;function NA(){const{gameStateManager:e}=Ii(),[t,n]=E.useState(!1);E.useEffect(()=>{console.log(" MenuScreen mounted - ensuring clean state"),Vt.reset(),e?.actionProcessor&&e.actionProcessor.clearQueue(),console.log(" MenuScreen: State cleaned up")},[e]);const r=()=>{console.log(" Selected: Single Player"),e.setState({appState:"lobby",gameMode:"local"})},i=()=>{console.log(" Selected: Multiplayer"),e.setState({appState:"lobby",gameMode:"multiplayer"})},s=()=>{n(!0)},l=()=>{n(!1)};return v.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:t?v.jsxs(v.Fragment,{children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"3rem",textAlign:"center",color:"#ffffff"},children:"SELECT GAME MODE"}),v.jsxs("div",{style:{display:"flex",gap:"2rem",marginBottom:"2rem"},children:[v.jsxs("button",{onClick:r,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#00ff88",color:"#000000",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 255, 136, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#00cc6a",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#00ff88",u.target.style.transform="translateY(0)"},children:["SINGLE PLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs AI Opponent"})]}),v.jsxs("button",{onClick:i,style:{fontSize:"1.3rem",padding:"20px 30px",backgroundColor:"#ff6b35",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"200px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 107, 53, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#e55a2b",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#ff6b35",u.target.style.transform="translateY(0)"},children:["MULTIPLAYER",v.jsx("div",{style:{fontSize:"0.9rem",marginTop:"5px",opacity:.8},children:"vs Human Player"})]})]}),v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"10px 20px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:u=>{u.target.style.backgroundColor="#cccccc",u.target.style.color="#1a1a1a"},onMouseOut:u=>{u.target.style.backgroundColor="transparent",u.target.style.color="#cccccc"},children:"BACK"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h1",{style:{fontSize:"4rem",marginBottom:"2rem",textAlign:"center",background:"linear-gradient(45deg, #00ff88, #0088ff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(0, 255, 136, 0.3)"},children:"DRONE WARS"}),v.jsx("div",{style:{fontSize:"1.2rem",marginBottom:"3rem",textAlign:"center",color:"#cccccc"},children:"Strategic Combat in the Digital Arena"}),v.jsx("button",{onClick:s,style:{fontSize:"1.5rem",padding:"15px 40px",backgroundColor:"#0088ff",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0, 136, 255, 0.3)"},onMouseOver:u=>{u.target.style.backgroundColor="#0066cc",u.target.style.transform="translateY(-2px)"},onMouseOut:u=>{u.target.style.backgroundColor="#0088ff",u.target.style.transform="translateY(0)"},children:"START GAME"})]})})}const jA=[{name:"Annihilator Alpha",description:"Focuses on overwhelming firepower and direct destruction.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Swarm Drone"],shipDeployment:{strategy:"aggressive",placement:["powerCell","bridge","droneControlHub"],reasoning:"Places powerCell in outer lane for safety, bridge in middle lane for combat bonus, droneControlHub in outer lane for flexibility"},decklist:[{id:"CARD001_ENHANCED",quantity:40},{id:"CARD002",quantity:0},{id:"CARD003",quantity:0},{id:"CARD004",quantity:0},{id:"CARD005",quantity:0},{id:"CARD006",quantity:0},{id:"CARD007",quantity:0},{id:"CARD008",quantity:0},{id:"CARD009",quantity:0},{id:"CARD010",quantity:0},{id:"CARD011",quantity:0},{id:"CARD012",quantity:0},{id:"CARD013",quantity:0},{id:"CARD014",quantity:0},{id:"CARD015",quantity:0},{id:"CARD016",quantity:0},{id:"CARD017",quantity:0},{id:"CARD018",quantity:0},{id:"CARD019",quantity:0}]},{name:"Manticore - Class II Gunship",description:"Focuses on overwhelming firepower and direct damage to drones and ship sections.",dronePool:["Heavy Fighter","Standard Fighter","Kamikaze Drone","Bomber","Avenger Drone"],shipDeployment:{strategy:"balanced",placement:["bridge","droneControlHub","powerCell"],reasoning:"Places bridge in outer lane for durability, droneControlHub in middle for deployment bonus, powerCell in outer for resource safety"},decklist:[{id:"CARD011",quantity:1},{id:"CARD009",quantity:2},{id:"CARD010",quantity:2},{id:"CARD001_ENHANCED",quantity:4},{id:"CARD012_ENHANCED",quantity:4},{id:"CARD013",quantity:4},{id:"CARD014",quantity:4},{id:"CARD017",quantity:3},{id:"CARD016",quantity:3},{id:"CARD005_ENHANCED",quantity:2},{id:"CARD004_ENHANCED",quantity:2},{id:"CARD003",quantity:2},{id:"CARD002_ENHANCED",quantity:3},{id:"CARD018",quantity:4}]}];function vR(){const{gameState:e,gameStateManager:t}=Ii(),[n,r]=E.useState(null),i=e.gameMode==="local",s=e.gameMode==="multiplayer",l=()=>{console.log(" Returning to main menu"),t.setState({appState:"menu",gameMode:"local"})},u=h=>{console.log(" Selected AI:",h.name),r(h)},f=()=>{if(i&&n){console.log(" Starting single player game with AI:",n.name);const h=Pn.filter(m=>n.dronePool.includes(m.name)),p={};h.forEach(m=>{p[m.name]=0}),la.initialize(jA,Pn,n,t.actionProcessor,t),console.log(" AIPhaseProcessor initialized for single-player with:",n.name),t.startGame("local",{name:"Player 1"},{name:n.name,decklist:n.decklist,activeDronePool:h,deployedDroneCounts:p,aiPersonality:n})}else s&&(console.log(" Starting multiplayer game"),t.startGame("multiplayer",{name:"Player 1"},{name:"Player 2"}))};return v.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif",padding:"20px",boxSizing:"border-box"},children:[v.jsx("h2",{style:{fontSize:"2.5rem",marginBottom:"2rem",textAlign:"center",color:"#ffffff"},children:i?"SELECT AI OPPONENT":"MULTIPLAYER SETUP"}),i&&v.jsx("div",{style:{maxWidth:"800px",width:"100%",marginBottom:"2rem"},children:v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:jA.map(h=>v.jsxs("div",{onClick:()=>u(h),style:{padding:"20px",backgroundColor:n?.name===h.name?"#0088ff":"#2a2a2a",border:`2px solid ${n?.name===h.name?"#00ff88":"#444444"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onMouseOver:p=>{n?.name!==h.name&&(p.target.style.backgroundColor="#333333",p.target.style.borderColor="#666666")},onMouseOut:p=>{n?.name!==h.name&&(p.target.style.backgroundColor="#2a2a2a",p.target.style.borderColor="#444444")},children:[v.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"1.3rem",color:n?.name===h.name?"#ffffff":"#00ff88"},children:h.name}),v.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.9rem",color:"#cccccc",lineHeight:"1.4"},children:h.description}),v.jsxs("div",{style:{fontSize:"0.8rem",color:"#888888"},children:["Difficulty: ",h.difficulty]})]},h.name))})}),s&&v.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[v.jsx("div",{style:{fontSize:"1.2rem",color:"#cccccc",marginBottom:"1rem"},children:"Multiplayer game ready to start"}),v.jsx("div",{style:{fontSize:"1rem",color:"#888888"},children:"Both players will customize their decks and drones in-game"})]}),v.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[v.jsx("button",{onClick:l,style:{fontSize:"1rem",padding:"12px 24px",backgroundColor:"transparent",color:"#cccccc",border:"2px solid #cccccc",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:h=>{h.target.style.backgroundColor="#cccccc",h.target.style.color="#1a1a1a"},onMouseOut:h=>{h.target.style.backgroundColor="transparent",h.target.style.color="#cccccc"},children:"BACK TO MENU"}),v.jsx("button",{onClick:f,disabled:i&&!n,style:{fontSize:"1.2rem",padding:"12px 30px",backgroundColor:i&&!n?"#444444":"#00ff88",color:i&&!n?"#888888":"#000000",border:"none",borderRadius:"8px",cursor:i&&!n?"not-allowed":"pointer",transition:"all 0.3s ease",opacity:i&&!n?.5:1},onMouseOver:h=>{i&&!n||(h.target.style.backgroundColor="#00cc6a",h.target.style.transform="translateY(-2px)")},onMouseOut:h=>{i&&!n||(h.target.style.backgroundColor="#00ff88",h.target.style.transform="translateY(0)")},children:i?"START GAME":"START MULTIPLAYER"})]})]})}const MA=({value:e,isFlat:t,icon:n,iconColor:r,textColor:i="text-white"})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black/60 flex items-center justify-center p-0.5`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-slate-900/80 flex items-center justify-center`,children:v.jsxs("div",{className:`flex items-center justify-center gap-1 font-bold ${i}`,children:[n&&v.jsx(n,{size:12,className:r}),v.jsx("span",{className:"font-orbitron text-base",children:e})]})})}),bR=({text:e,className:t})=>{const n=E.useRef(null),r=E.useRef(null);return E.useEffect(()=>{const i=n.current,s=r.current;if(!i||!s||i.clientHeight===0)return;const l=()=>{let u,f;t.includes("font-orbitron")?(u=8,f=16):(u=8,f=12);let h=f;for(s.style.fontSize=h+"px";(s.scrollWidth>i.clientWidth||s.scrollHeight>i.clientHeight)&&h>u;)h-=.5,s.style.fontSize=h+"px"};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e,t]),v.jsx("div",{ref:n,className:"w-full h-full overflow-hidden flex items-center justify-center",children:v.jsx("span",{ref:r,className:t,children:e})})},uf=({drone:e,onClick:t,isSelectable:n,isSelected:r,deployedCount:i,ignoreDeployLimit:s=!1,appliedUpgrades:l=[],isUpgradeTarget:u=!1,onViewUpgrades:f})=>{let h=e.limit;l.forEach(ie=>{ie.mod.stat==="limit"&&(h+=ie.mod.value)});const p=i>=h,m=n&&(!p||s),g=E.useMemo(()=>{const ie={attack:e.attack,speed:e.speed,cost:e.class};return l.forEach(te=>{te.mod.stat==="cost"?ie.cost=Math.max(0,ie.cost+te.mod.value):ie.hasOwnProperty(te.mod.stat)&&(ie[te.mod.stat]+=te.mod.value)}),ie},[e,l]),x=g.cost,S=g.attack>e.attack,A=g.attack<e.attack,C=S?"text-green-400":A?"text-red-400":"text-white",P=g.speed>e.speed,O=g.speed<e.speed,T=P?"text-green-400":O?"text-red-400":"text-white",j=g.cost<e.class,N=g.cost>e.class,D=j?"text-green-400":N?"text-red-400":"text-white",R=h>e.limit?"text-green-400":"text-white",{name:U,image:K,hull:q,shields:W,abilities:le}=e;return v.jsx("div",{onClick:m?()=>t(e):void 0,className:`
        w-60 h-[320px] rounded-lg p-[2px] relative group
        transition-all duration-200
        ${m?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-cyan-400":"bg-cyan-800/80"}
        ${m?"":"opacity-60"}
        ${u?"ring-4 ring-purple-500 animate-pulse":""}
      `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:v.jsxs("div",{className:`
          w-full h-full relative flex flex-col font-orbitron text-cyan-300 overflow-hidden
        `,style:{clipPath:"polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%)"},children:[v.jsx("img",{src:K,alt:U,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/40"}),v.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[v.jsx("div",{className:"text-center py-1 px-3 bg-black/40 flex-shrink-0 h-8 flex items-center justify-center",children:v.jsx(bR,{text:U,className:"font-orbitron text-sm uppercase tracking-widest whitespace-nowrap text-white"})}),v.jsxs("div",{className:"flex justify-between items-center px-2 flex-shrink-0 mt-2 h-12",children:[v.jsx("div",{className:"w-10 h-12",children:v.jsx(MA,{value:g.attack,isFlat:!1,icon:Ly,iconColor:"text-red-400",textColor:C})}),v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("div",{className:"flex w-full justify-center gap-1.5 min-h-[12px]",children:W>0&&Array.from({length:W}).map((ie,te)=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},`shield-${te}`))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:q}).map((ie,te)=>v.jsx("div",{className:"h-3 w-3 rounded-sm bg-green-500 border border-black/50"},`hull-${te}`))})]}),v.jsx("div",{className:"w-12 h-12",children:v.jsx(MA,{value:g.speed,isFlat:!0,icon:Iy,iconColor:"text-blue-400",textColor:T})})]}),v.jsx("div",{className:"mx-2 mt-auto mb-2 max-h-40 bg-black/60 backdrop-blur-sm border border-cyan-800/70 p-2 flex flex-col space-y-2 overflow-y-auto rounded-md",children:le&&le.length>0?le.map((ie,te)=>v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs text-purple-400 tracking-wider font-bold",children:ie.name}),v.jsx("p",{className:"text-gray-400 text-xs leading-tight font-exo",children:ie.description})]},te)):v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("p",{className:"text-xs text-cyan-700 italic opacity-70",children:"[ No Abilities ]"})})}),v.jsxs("div",{className:"grid grid-cols-3 items-center p-1 border-t border-cyan-800/70 flex-shrink-0 h-12",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Cost"}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(Lc,{size:14,className:"text-yellow-300"}),v.jsx("span",{className:`font-bold text-base ml-1 ${D}`,children:x})]})]}),e.upgradeSlots>0&&v.jsxs("button",{onClick:ie=>{ie.stopPropagation(),f&&f(e,l)},className:"flex flex-col items-center cursor-pointer group",children:[v.jsx("span",{className:"text-[10px] text-gray-400 group-hover:text-white transition-colors",children:"Upgrades"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:"font-bold text-base text-purple-400",children:[l.length,"/",e.upgradeSlots]})})]}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("span",{className:"text-[10px] text-gray-400",children:"Deployed"}),v.jsx("div",{className:"flex items-center",children:v.jsxs("span",{className:`font-bold text-base ${p?"text-pink-500":R}`,children:[i,"/",h]})})]})]})]})]})})},Qv=({phase:e,localPlayerStatus:t})=>v.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:v.jsxs("div",{className:"text-center p-8",children:[v.jsx(Kf,{className:"w-16 h-16 mx-auto text-cyan-400 animate-spin mb-6"}),v.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Waiting for Your Opponent"}),v.jsxs("p",{className:"text-gray-400 text-lg mb-6",children:[e==="droneSelection"&&"Your opponent is still selecting their drones...",e==="deckSelection"&&"Your opponent is still choosing their deck..."]}),t&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 max-w-md mx-auto",children:[v.jsx("h3",{className:"text-lg font-bold text-green-400 mb-2",children:" Your Selection Complete"}),v.jsx("p",{className:"text-gray-300 text-sm",children:t})]})]})});function xR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r}=Ii(),{droneSelectionPool:i,droneSelectionTrio:s,turnPhase:l}=e,u=r(),[f,h]=E.useState([]),[p,m]=E.useState(s),[g,x]=E.useState(i),[S,A]=E.useState({droneSelection:!1}),[C,P]=E.useState({droneSelection:!1});E.useEffect(()=>{const D=M=>{const{type:R,phase:U,playerId:K}=M.detail||M;console.log(` DroneSelectionScreen received PhaseManager event: ${R}`,{phase:U,playerId:K}),U==="droneSelection"&&(R==="playerCompleted"?K===t()?A(W=>({...W,droneSelection:!0})):n()&&P(W=>({...W,droneSelection:!0})):R==="phaseCompleted"&&(h([]),A(q=>({...q,droneSelection:!1})),P(q=>({...q,droneSelection:!1}))))};return window.addEventListener("phaseManagerEvent",D),()=>{window.removeEventListener("phaseManagerEvent",D)}},[t,n]);const O=D=>{if(l!=="droneSelection")return;console.log(" handleChooseDroneForSelection called with:",D.name);const M=[...f,D];if(h(M),M.length<5){const R=zk(g);m(R.droneSelectionTrio),x(R.droneSelectionPool),console.log(" Advanced to next trio locally, selected:",M.length,"of 5 drones")}else console.log(" All 5 drones selected, waiting for Continue button click")},T=()=>{if(l!=="droneSelection")return;console.log(" handleContinueDroneSelection called with:",f.length,"drones");const D=t();Ye.actionProcessor.queueAction({type:"commitment",payload:{playerId:D,phase:"droneSelection",actionData:{drones:f}}}).then(M=>{if(!M.success){console.error(" Drone selection submission failed:",M.error);return}console.log(" Drone selection submitted successfully")}).catch(M=>{console.error(" Drone selection submission error:",M)}),console.log(" Drone selection submitted to PhaseManager")},j=S.droneSelection;if(n()&&j&&!C.droneSelection){const M=Ye.actionProcessor.getPhaseCommitmentStatus("droneSelection").commitments?.player1?.drones||u.activeDronePool||f,R=M.length>0?M.map(U=>U.name).join(", "):"Selection complete";return v.jsx(Qv,{phase:"droneSelection",localPlayerStatus:`You selected: ${R}`})}const N=f.length===5;return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full p-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center",children:"Choose Your Drones"}),v.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[[...Array(5)].map((D,M)=>v.jsx("div",{className:`w-3 h-3 rounded-full ${M<f.length?"bg-green-500":"bg-gray-600"}`},M)),v.jsxs("span",{className:"ml-2 text-gray-400",children:[f.length,"/5 drones selected"]})]}),N?v.jsx("div",{className:"text-center mb-8",children:v.jsxs("div",{className:"bg-green-900/30 border border-green-500 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-green-400 font-bold mb-2",children:" Selection Complete!"}),v.jsx("p",{className:"text-gray-300",children:"All 5 drones have been selected. Ready to proceed to deck selection."})]})}):v.jsxs(v.Fragment,{children:[v.jsxs("p",{className:"text-center text-gray-400 mb-6",children:["Choice ",f.length+1," of 5: Select one drone from the three options below to add to your Active Drone Pool."]}),p&&p.length>0&&v.jsx("div",{className:"flex flex-wrap justify-center gap-6 mb-8",children:p.map((D,M)=>v.jsx(uf,{drone:D,onClick:()=>O(D),isSelectable:!0,deployedCount:0},D.name||M))})]}),v.jsx("button",{onClick:T,disabled:!N,className:`px-8 py-3 font-bold rounded-lg transition-all mb-8 ${N?"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-600/25 hover:shadow-green-500/30 transform hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:N?"Continue to Deck Selection":`Continue (${f.length}/5)`}),v.jsxs("div",{className:"w-full mt-4 pt-8 border-t border-gray-700",children:[v.jsxs("h3",{className:"text-2xl font-bold text-white text-center mb-4",children:["Your Selection (",f.length,"/5)",N&&v.jsx("span",{className:"text-green-400 ml-2",children:""})]}),f.length>0?v.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:f.map((D,M)=>v.jsx(uf,{drone:D,isSelectable:!1,deployedCount:0},M))}):v.jsx("p",{className:"text-center text-gray-500",children:"No drones selected yet."})]})]})]})}function SR(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getOpponentPlayerState:i,addLogEntry:s}=Ii(),{turnPhase:l}=e,u=r();i();const[f,h]=E.useState({deckSelection:!1}),[p,m]=E.useState({deckSelection:!1});E.useEffect(()=>{const S=A=>{const{type:C,phase:P,playerId:O}=A.detail||A;console.log(` DeckSelectionScreen received PhaseManager event: ${C}`,{phase:P,playerId:O}),P==="deckSelection"&&(C==="playerCompleted"?O===t()?h(j=>({...j,deckSelection:!0})):n()&&m(j=>({...j,deckSelection:!0})):C==="phaseCompleted"&&(h(T=>({...T,deckSelection:!1})),m(T=>({...T,deckSelection:!1}))))};return window.addEventListener("phaseManagerEvent",S),()=>{window.removeEventListener("phaseManagerEvent",S)}},[t,n]);const g=async S=>{if(l==="deckSelection")if(console.log(" handleDeckChoice called with:",S),S==="standard"){const A=t(),C=ke.buildDeckFromList(Bs),P=await Ye.actionProcessor.processCommitment({phase:"deckSelection",playerId:A,actionData:{deck:C}});if(!P.success){console.error(" Deck selection submission failed:",P.error);return}console.log(" Standard deck selection submitted to PhaseManager"),s({player:"SYSTEM",actionType:"DECK_SELECTION",source:"Player Setup",target:"N/A",outcome:"Player selected the Standard Deck."},"handleDeckChoice")}else S==="custom"&&(console.log(" Transitioning to deck building phase"),Bc.transitionToPhase("deckBuilding"))},x=u.deck&&u.deck.length>0;return console.log("Deck selection render check:",{isMultiplayer:n(),localPlayerHasDeck:x,opponentPhaseCompletion_deckSelection:p.deckSelection,turnPhase:l,localPlayerDeckLength:u.deck?.length}),n()&&x&&!p.deckSelection?v.jsx(Qv,{phase:"deckSelection",localPlayerStatus:"You have selected your deck and are ready to begin."}):v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-white mb-2",children:"Select Your Deck"}),v.jsx("p",{className:"text-gray-400 mb-8",children:"Choose a pre-defined deck or build your own."}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-8",children:[v.jsxs("div",{onClick:()=>g("standard"),className:"w-72 bg-gray-900 border-2 border-cyan-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-cyan-500 hover:scale-105 hover:shadow-2xl hover:shadow-cyan-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-cyan-400 mb-3",children:"Use Standard Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Play with the balanced, pre-built starter deck."}),v.jsx("button",{className:"mt-6 bg-cyan-600 text-white font-bold px-6 py-2 rounded-full hover:bg-cyan-700 transition-colors duration-200",children:"Select"})]}),v.jsxs("div",{onClick:()=>g("custom"),className:"w-72 bg-gray-900 border-2 border-purple-500/50 rounded-lg p-6 flex flex-col items-center text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20",children:[v.jsx("h2",{className:"text-2xl font-orbitron font-bold text-purple-400 mb-3",children:"Build Custom Deck"}),v.jsx("p",{className:"font-exo text-gray-300 flex-grow",children:"Create your own deck from your card collection."}),v.jsx("button",{className:"mt-6 btn-continue",children:"Select"})]})]})]})]})}const AR=({onClick:e,ability:t,isUsable:n,isSelected:r})=>v.jsx("button",{onClick:e,disabled:!n,className:`absolute w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 transition-all duration-200 ${n?"hover:bg-purple-500":"bg-gray-700 opacity-60 cursor-not-allowed"} ${r?"ring-2 ring-yellow-300 scale-110":""}`,style:{top:"50%",right:"-0.875rem",transform:"translateY(-50%)"},title:`${t.name} - Cost: ${t.cost.energy} Energy`,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),df=({section:e,stats:t,effectiveStatsForDisplay:n,isPlayer:r,isPlaceholder:i,onClick:s,onAbilityClick:l,isInteractive:u,isOpponent:f,isHovered:h,onMouseEnter:p,onMouseLeave:m,isCardTarget:g,isInMiddleLane:x,reallocationState:S,gameEngine:A,turnPhase:C,isMyTurn:P,passInfo:O,getLocalPlayerId:T,localPlayerState:j,shipAbilityMode:N,sectionRef:D})=>{if(i)return v.jsx("div",{className:"bg-black/30 rounded-lg border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 min-h-[160px] h-full transition-colors duration-300 cursor-pointer hover:border-purple-500 hover:text-purple-300",onClick:s,children:v.jsx("span",{className:"text-center",children:"Click to place section"})});const M=A.getShipStatus(t),R=M==="critical"?"bg-red-900/60":M==="damaged"?"bg-yellow-900/50":"bg-black/60";let U=M==="critical"?"border-red-500":M==="damaged"?"border-yellow-500":f?"border-pink-500":"border-cyan-500";const K=f?"shadow-pink-500/20":"shadow-cyan-500/20",q=h?"scale-105 shadow-xl":"";let W="";if(S)switch(S){case"can-remove":U="border-orange-400",W="ring-2 ring-orange-400/50 shadow-lg shadow-orange-400/30";break;case"removed-from":U="border-orange-600",W="ring-4 ring-orange-600/80 shadow-lg shadow-orange-600/50 bg-orange-900/20";break;case"cannot-remove":U="border-gray-600",W="opacity-50";break;case"can-add":U="border-green-400",W="ring-2 ring-green-400/50 shadow-lg shadow-green-400/30";break;case"added-to":U="border-green-600",W="ring-4 ring-green-600/80 shadow-lg shadow-green-600/50 bg-green-900/20";break;case"cannot-add":U="border-gray-600",W="opacity-50";break}const le=g?"ring-4 ring-purple-400 shadow-lg shadow-purple-400/50 animate-pulse":"",ie=e==="droneControlHub"?"Drone Control Hub":e.replace(/([A-Z])/g," $1").replace(/^./,L=>L.toUpperCase()),te={backgroundImage:`url(${t.image})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return v.jsxs("div",{ref:D,className:`
        relative rounded-xl shadow-lg ${K} border-2 h-full
        transition-all duration-300 overflow-hidden
        ${U}
        ${u?`cursor-pointer ${q}`:""}
        ${le}
        ${W}
      `,style:te,onClick:s,onMouseEnter:p,onMouseLeave:m,children:[v.jsx("div",{className:`absolute inset-0 ${R}`}),v.jsxs("div",{className:"relative z-10 flex flex-col items-center p-4 h-full",children:[v.jsx("div",{className:`absolute top-2 right-2 flex items-center gap-1 font-semibold text-xs px-2 py-0.5 rounded-full ${M==="healthy"?"bg-green-500/20 text-green-300":M==="damaged"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:M.charAt(0).toUpperCase()+M.slice(1)}),v.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[v.jsx("p",{className:"font-bold text-lg text-white",children:ie}),v.jsx("p",{className:"text-xs text-gray-400 italic max-w-[200px]",children:t.description})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full items-center mt-auto",children:[v.jsx("div",{className:"flex flex-col items-start text-sm text-gray-300",children:n&&Object.entries(n).map(([L,ee])=>{const he=x&&t.middleLaneBonus&&t.middleLaneBonus[L];return v.jsxs("span",{className:"flex items-center text-xs",children:[v.jsxs("span",{className:"font-semibold mr-1",children:[L,":"]}),v.jsx("span",{className:he?"text-green-400 font-bold":"",children:ee})]},L)})}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:"flex gap-1 items-center mb-2",children:Array(t.shields).fill(0).map((L,ee)=>v.jsx("div",{children:ee<t.allocatedShields?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"text-cyan-300",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})})},ee))}),v.jsx("div",{className:"flex w-full justify-center gap-1",children:Array.from({length:t.maxHull}).map((L,ee)=>{const he=ee+1,{critical:Se,damaged:k}=t.thresholds;let J;he<=Se?J="bg-red-500":he<=k?J="bg-orange-500":J="bg-green-500";const F=ee<t.hull;return v.jsx("div",{className:`h-4 w-4 rounded-sm ${F?J:"bg-gray-400"} border border-black/50`},ee)})})]}),v.jsx("div",{className:"flex flex-col items-center justify-center h-full pl-4 text-center",children:r&&t.ability&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"relative w-full mb-1",children:[v.jsx("h4",{className:"font-bold text-sm text-purple-300 leading-tight",children:t.ability.name}),v.jsx(AR,{ability:t.ability,isUsable:C==="action"&&P()&&!O[`${T()}Passed`]&&j.energy>=t.ability.cost.energy,isSelected:N?.ability.id===t.ability.id,onClick:L=>l(L,{name:e,...t},t.ability)})]}),v.jsx("p",{className:"text-xs text-gray-400 leading-tight",children:t.ability.description})]})})]})]})]})};function ER(){const{gameState:e,getLocalPlayerId:t,isMultiplayer:n,getLocalPlayerState:r,getLocalPlacedSections:i,setModalContent:s}=Ii(),{turnPhase:l,unplacedSections:u}=e,f=r(),h=i(),[p,m]=E.useState(null),[g,x]=E.useState(h||[null,null,null]),[S,A]=E.useState(u||["bridge","powerCell","droneControlHub"]),[C,P]=E.useState({placement:!1}),[O,T]=E.useState({placement:!1});E.useEffect(()=>{const R=U=>{const{type:K,phase:q,playerId:W}=U.detail||U;console.log(` ShipPlacementScreen received PhaseManager event: ${K}`,{phase:q,playerId:W}),q==="placement"&&(K==="playerCompleted"?W===t()?P(ie=>({...ie,placement:!0})):n()&&T(ie=>({...ie,placement:!0})):K==="phaseCompleted"&&(P(le=>({...le,placement:!1})),T(le=>({...le,placement:!1}))))};return window.addEventListener("phaseManagerEvent",R),()=>{window.removeEventListener("phaseManagerEvent",R)}},[t,n]);const j=R=>{if(l==="placement")if(console.log(" handleSelectSectionForPlacement called with:",R,"gameMode:",e.gameMode),S.includes(R))m(U=>U===R?null:R);else{const U=g.indexOf(R),K=[...g];K[U]=null,x(K),A(q=>[...q,R]),m(null)}},N=R=>{if(l==="placement")if(console.log(" handleLaneSelectForPlacement called with lane:",R,"gameMode:",e.gameMode),p){if(g[R]){const U=g[R],K=[...g];K[R]=p;const q=S.indexOf(p),W=[...S];W.splice(q,1,U),x(K),A(W)}else{const U=[...g];U[R]=p,x(U),A(K=>K.filter(q=>q!==p))}m(null)}else g[R]&&j(g[R])},D=async()=>{if(l!=="placement")return;if(console.log(" handleConfirmPlacement called"),g.some(U=>U==null)){s({title:"Incomplete Placement",text:"All ship sections must be placed before confirming placement.",onClose:()=>s(null),isBlocking:!1});return}console.log(" Submitting placement to PhaseManager:",g);try{const U=await Ye.actionProcessor.processCommitment({phase:"placement",playerId:t(),actionData:{placedSections:g}});if(!U.success){console.error(" Placement submission failed:",U.error),s({title:"Placement Error",text:U.error,onClose:()=>s(null),isBlocking:!1});return}console.log(" Placement submitted to PhaseManager"),n()&&!U.data.bothComplete&&s({title:"Placement Confirmed",text:"Your ship placement has been confirmed. Waiting for opponent to complete their placement...",onClose:()=>s(null),isBlocking:!1})}catch(U){console.error(" Error submitting placement:",U),s({title:"Placement Error",text:"An error occurred while submitting placement. Please try again.",onClose:()=>s(null),isBlocking:!1})}};if(g&&g.length===3&&g.every(R=>R!==null),n()&&C.placement&&!O.placement){const R=g.map((U,K)=>U?U.name:"Empty").join(", ");return v.jsx(Qv,{phase:"placement",localPlayerStatus:`Your ship layout: ${R}`})}const M=g.every(R=>R!==null);return console.log(" ShipPlacementScreen rendered:",{allPlaced:M,placed:g,unplaced:u,selected:p}),v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",children:[v.jsx("style",{children:`
          .hexagon { clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); }
          .hexagon-flat { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
          .font-orbitron { font-family: 'Orbitron', sans-serif; }
          .font-exo { font-family: 'Exo', sans-serif; }
        `}),v.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start pt-8 px-4",children:[v.jsx("h2",{className:"text-3xl font-bold mb-2 text-white text-center font-orbitron",children:"Configure Your Ship Layout"}),v.jsx("p",{className:"text-center text-gray-400 mb-8",children:"Select a section, then click an empty lane to place it. You can also click a placed section to pick it up again. The ship section placed in the centre lane will gain a bonus to its stats."}),v.jsxs("div",{className:"flex flex-col items-center w-full space-y-4",children:[v.jsx("div",{className:"flex w-full justify-between gap-8",children:["bridge","powerCell","droneControlHub"].map(R=>v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",children:S.includes(R)&&v.jsx("div",{onClick:()=>j(R),className:`h-full transition-all duration-300 rounded-xl ${p===R?"scale-105 ring-4 ring-cyan-400":"opacity-70 hover:opacity-100 cursor-pointer"}`,children:v.jsx(df,{section:R,stats:f.shipSections[R],effectiveStatsForDisplay:f.shipSections[R].stats.healthy,isPlayer:!0,isInteractive:!0,gameEngine:ke,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:f,shipAbilityMode:null})})},R))}),v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(R=>{const U=g[R],K=p&&!g[R];return v.jsx("div",{className:"flex-1 min-w-0 h-[190px]",onClick:()=>N(R),children:U?v.jsx(df,{section:U,stats:f.shipSections[U],effectiveStatsForDisplay:f.shipSections[U].stats.healthy,isPlayer:!0,isInteractive:!0,isInMiddleLane:R===1,gameEngine:ke,turnPhase:l,isMyTurn:()=>!0,passInfo:{},getLocalPlayerId:t,localPlayerState:f,shipAbilityMode:null}):v.jsx("div",{className:`bg-black/30 rounded-xl border-2 border-dashed border-purple-500/50 flex items-center justify-center text-purple-300/70 p-4 h-full transition-colors duration-300 ${K?"cursor-pointer hover:border-purple-500 hover:bg-purple-900/20":""}`,children:v.jsx("span",{className:"text-center font-bold",children:R===1?"Lane 2 (Center Bonus)":`Lane ${R+1}`})})},R)})})]}),v.jsx("button",{onClick:()=>{console.log(` Confirm Layout button clicked! allPlaced: ${M}`),D()},disabled:!M,className:"mt-12 bg-green-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 disabled:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed enabled:hover:bg-green-500 shadow-lg",children:"Confirm Layout"})]})]})}function ZO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ZO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function nt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ZO(e))&&(r&&(r+=" "),r+=t);return r}var rg={},ag={},kA;function CR(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(ag)),ag}var ig={},RA;function JO(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(ig)),ig}var og={},IA;function e2(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(og)),og}var sg={},LA;function Zv(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const r=[],i=n.length;if(i===0)return r;let s=0,l="",u="",f=!1;for(n.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const h=n[s];u?h==="\\"&&s+1<i?(s++,l+=n[s]):h===u?u="":l+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,r.push(l),l=""):l+=h:h==="["?(f=!0,l&&(r.push(l),l="")):h==="."?l&&(r.push(l),l=""):l+=h,s++}return l&&r.push(l),r}e.toPath=t})(sg)),sg}var $A;function Jv(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CR(),n=JO(),r=e2(),i=Zv();function s(u,f,h){if(u==null)return h;switch(typeof f){case"string":{if(t.isUnsafeProperty(f))return h;const p=u[f];return p===void 0?n.isDeepKey(f)?s(u,i.toPath(f),h):h:p}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const p=u[f];return p===void 0?h:p}default:{if(Array.isArray(f))return l(u,f,h);if(Object.is(f?.valueOf(),-0)?f="-0":f=String(f),t.isUnsafeProperty(f))return h;const p=u[f];return p===void 0?h:p}}}function l(u,f,h){if(f.length===0)return h;let p=u;for(let m=0;m<f.length;m++){if(p==null||t.isUnsafeProperty(f[m]))return h;p=p[f[m]]}return p===void 0?h:p}e.get=s})(rg)),rg}var lg,BA;function PR(){return BA||(BA=1,lg=Jv().get),lg}var wR=PR();const Io=qr(wR);var cg={exports:{}},st={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UA;function OR(){if(UA)return st;UA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function S(A){if(typeof A=="object"&&A!==null){var C=A.$$typeof;switch(C){case e:switch(A=A.type,A){case n:case i:case r:case f:case h:case g:return A;default:switch(A=A&&A.$$typeof,A){case l:case u:case m:case p:return A;case s:return A;default:return C}}case t:return C}}}return st.ContextConsumer=s,st.ContextProvider=l,st.Element=e,st.ForwardRef=u,st.Fragment=n,st.Lazy=m,st.Memo=p,st.Portal=t,st.Profiler=i,st.StrictMode=r,st.Suspense=f,st.SuspenseList=h,st.isContextConsumer=function(A){return S(A)===s},st.isContextProvider=function(A){return S(A)===l},st.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},st.isForwardRef=function(A){return S(A)===u},st.isFragment=function(A){return S(A)===n},st.isLazy=function(A){return S(A)===m},st.isMemo=function(A){return S(A)===p},st.isPortal=function(A){return S(A)===t},st.isProfiler=function(A){return S(A)===i},st.isStrictMode=function(A){return S(A)===r},st.isSuspense=function(A){return S(A)===f},st.isSuspenseList=function(A){return S(A)===h},st.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===f||A===h||typeof A=="object"&&A!==null&&(A.$$typeof===m||A.$$typeof===p||A.$$typeof===l||A.$$typeof===s||A.$$typeof===u||A.$$typeof===x||A.getModuleId!==void 0)},st.typeOf=S,st}var zA;function TR(){return zA||(zA=1,cg.exports=OR()),cg.exports}var _R=TR(),nn=e=>e===0?0:e>0?1:-1,or=e=>typeof e=="number"&&e!=+e,To=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,_e=e=>(typeof e=="number"||e instanceof Number)&&!or(e),da=e=>_e(e)||typeof e=="string",DR=0,Uc=e=>{var t=++DR;return"".concat(e||"").concat(t)},Cn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_e(t)&&typeof t!="string")return r;var s;if(To(t)){if(n==null)return r;var l=t.indexOf("%");s=n*parseFloat(t.slice(0,l))/100}else s=+t;return or(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},t2=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function gn(e,t,n){return _e(e)&&_e(t)?e+n*(t-e):t}function NR(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Io(r,t))===n)}var rn=e=>e===null||typeof e>"u",Wc=e=>rn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),jR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function e0(e){if(typeof e!="string")return!1;var t=jR;return t.includes(e)}var MR=["viewBox","children"],GA=["points","pathLength"],ug={svg:MR,polygon:GA,polyline:GA},kR=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(E.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{e0(i)&&(r[i]=(s=>n[i](n,s)))}),r},RR=(e,t,n)=>r=>(e(t,n,r),null),Qc=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];e0(i)&&typeof s=="function"&&(r||(r={}),r[i]=RR(s,t,n))}),r},IR=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function n2(e){if(typeof e!="string")return!1;var t=IR;return t.includes(e)}function qo(e){var t=Object.entries(e).filter(n=>{var[r]=n;return n2(r)});return Object.fromEntries(t)}var HA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",qA=null,dg=null,r2=e=>{if(e===qA&&Array.isArray(dg))return dg;var t=[];return E.Children.forEach(e,n=>{rn(n)||(_R.isFragment(n)?t=t.concat(r2(n.props.children)):t.push(n))}),dg=t,qA=e,t};function t0(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>HA(i)):r=[HA(t)],r2(e).forEach(i=>{var s=Io(i,"type.displayName")||Io(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}var LR=(e,t,n,r)=>{var i;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(i=r&&ug?.[r])!==null&&i!==void 0?i:[],l=t.startsWith("data-"),u=typeof e!="function"&&(!!r&&s.includes(t)||n2(t)),f=!!n&&e0(t);return l||u||f},Ut=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(E.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var l;LR((l=r)===null||l===void 0?void 0:l[s],s,t,n)&&(i[s]=r[s])}),i},$R=["children","width","height","viewBox","className","style","title","desc"];function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ky.apply(null,arguments)}function BR(e,t){if(e==null)return{};var n,r,i=UR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function UR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var n0=E.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:s,className:l,style:u,title:f,desc:h}=e,p=BR(e,$R),m=s||{width:r,height:i,x:0,y:0},g=nt("recharts-surface",l);return E.createElement("svg",Ky({},Ut(p,!0,"svg"),{className:g,width:r,height:i,style:u,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),E.createElement("title",null,f),E.createElement("desc",null,h),n)}),zR=["children","className"];function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(null,arguments)}function GR(e,t){if(e==null)return{};var n,r,i=HR(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HR(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var qn=E.forwardRef((e,t)=>{var{children:n,className:r}=e,i=GR(e,zR),s=nt("recharts-layer",r);return E.createElement("g",Xy({className:s},Ut(i,!0),{ref:t}),n)}),a2=$w(),i2=E.createContext(null),qR=()=>E.useContext(i2);function dt(e){return function(){return e}}const o2=Math.cos,ff=Math.sin,Yr=Math.sqrt,hf=Math.PI,Zf=2*hf,Wy=Math.PI,Qy=2*Wy,Po=1e-6,YR=Qy-Po;function s2(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function FR(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return s2;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class VR{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?s2:FR(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+l}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,u=this._y1,f=r-t,h=i-n,p=l-t,m=u-n,g=p*p+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(g>Po)if(!(Math.abs(m*f-h*p)>Po)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-l,S=i-u,A=f*f+h*h,C=x*x+S*S,P=Math.sqrt(A),O=Math.sqrt(g),T=s*Math.tan((Wy-Math.acos((A+g-C)/(2*P*O)))/2),j=T/O,N=T/P;Math.abs(j-1)>Po&&this._append`L${t+j*p},${n+j*m}`,this._append`A${s},${s},0,0,${+(m*x>p*S)},${this._x1=t+N*f},${this._y1=n+N*h}`}}arc(t,n,r,i,s,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),f=r*Math.sin(i),h=t+u,p=n+f,m=1^l,g=l?i-s:s-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Po||Math.abs(this._y1-p)>Po)&&this._append`L${h},${p}`,r&&(g<0&&(g=g%Qy+Qy),g>YR?this._append`A${r},${r},0,1,${m},${t-u},${n-f}A${r},${r},0,1,${m},${this._x1=h},${this._y1=p}`:g>Po&&this._append`A${r},${r},0,${+(g>=Wy)},${m},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function r0(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new VR(t)}function a0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function l2(e){this._context=e}l2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Jf(e){return new l2(e)}function c2(e){return e[0]}function u2(e){return e[1]}function d2(e,t){var n=dt(!0),r=null,i=Jf,s=null,l=r0(u);e=typeof e=="function"?e:e===void 0?c2:dt(e),t=typeof t=="function"?t:t===void 0?u2:dt(t);function u(f){var h,p=(f=a0(f)).length,m,g=!1,x;for(r==null&&(s=i(x=l())),h=0;h<=p;++h)!(h<p&&n(m=f[h],h,f))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+e(m,h,f),+t(m,h,f));if(x)return s=null,x+""||null}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:dt(+f),u):e},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:dt(+f),u):t},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:dt(!!f),u):n},u.curve=function(f){return arguments.length?(i=f,r!=null&&(s=i(r)),u):i},u.context=function(f){return arguments.length?(f==null?r=s=null:s=i(r=f),u):r},u}function kd(e,t,n){var r=null,i=dt(!0),s=null,l=Jf,u=null,f=r0(h);e=typeof e=="function"?e:e===void 0?c2:dt(+e),t=typeof t=="function"?t:dt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?u2:dt(+n);function h(m){var g,x,S,A=(m=a0(m)).length,C,P=!1,O,T=new Array(A),j=new Array(A);for(s==null&&(u=l(O=f())),g=0;g<=A;++g){if(!(g<A&&i(C=m[g],g,m))===P)if(P=!P)x=g,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),S=g-1;S>=x;--S)u.point(T[S],j[S]);u.lineEnd(),u.areaEnd()}P&&(T[g]=+e(C,g,m),j[g]=+t(C,g,m),u.point(r?+r(C,g,m):T[g],n?+n(C,g,m):j[g]))}if(O)return u=null,O+""||null}function p(){return d2().defined(i).curve(l).context(s)}return h.x=function(m){return arguments.length?(e=typeof m=="function"?m:dt(+m),r=null,h):e},h.x0=function(m){return arguments.length?(e=typeof m=="function"?m:dt(+m),h):e},h.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:dt(+m),h):r},h.y=function(m){return arguments.length?(t=typeof m=="function"?m:dt(+m),n=null,h):t},h.y0=function(m){return arguments.length?(t=typeof m=="function"?m:dt(+m),h):t},h.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:dt(+m),h):n},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(n)},h.lineX1=function(){return p().x(r).y(t)},h.defined=function(m){return arguments.length?(i=typeof m=="function"?m:dt(!!m),h):i},h.curve=function(m){return arguments.length?(l=m,s!=null&&(u=l(s)),h):l},h.context=function(m){return arguments.length?(m==null?s=u=null:u=l(s=m),h):s},h}class f2{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function KR(e){return new f2(e,!0)}function XR(e){return new f2(e,!1)}const i0={draw(e,t){const n=Yr(t/hf);e.moveTo(n,0),e.arc(0,0,n,0,Zf)}},WR={draw(e,t){const n=Yr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},h2=Yr(1/3),QR=h2*2,ZR={draw(e,t){const n=Yr(t/QR),r=n*h2;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},JR={draw(e,t){const n=Yr(t),r=-n/2;e.rect(r,r,n,n)}},eI=.8908130915292852,p2=ff(hf/10)/ff(7*hf/10),tI=ff(Zf/10)*p2,nI=-o2(Zf/10)*p2,rI={draw(e,t){const n=Yr(t*eI),r=tI*n,i=nI*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const l=Zf*s/5,u=o2(l),f=ff(l);e.lineTo(f*n,-u*n),e.lineTo(u*r-f*i,f*r+u*i)}e.closePath()}},fg=Yr(3),aI={draw(e,t){const n=-Yr(t/(fg*3));e.moveTo(0,n*2),e.lineTo(-fg*n,-n),e.lineTo(fg*n,-n),e.closePath()}},Ar=-.5,Er=Yr(3)/2,Zy=1/Yr(12),iI=(Zy/2+1)*3,oI={draw(e,t){const n=Yr(t/iI),r=n/2,i=n*Zy,s=r,l=n*Zy+n,u=-s,f=l;e.moveTo(r,i),e.lineTo(s,l),e.lineTo(u,f),e.lineTo(Ar*r-Er*i,Er*r+Ar*i),e.lineTo(Ar*s-Er*l,Er*s+Ar*l),e.lineTo(Ar*u-Er*f,Er*u+Ar*f),e.lineTo(Ar*r+Er*i,Ar*i-Er*r),e.lineTo(Ar*s+Er*l,Ar*l-Er*s),e.lineTo(Ar*u+Er*f,Ar*f-Er*u),e.closePath()}};function sI(e,t){let n=null,r=r0(i);e=typeof e=="function"?e:dt(e||i0),t=typeof t=="function"?t:dt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:dt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:dt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function pf(){}function mf(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function m2(e){this._context=e}m2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lI(e){return new m2(e)}function g2(e){this._context=e}g2.prototype={areaStart:pf,areaEnd:pf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cI(e){return new g2(e)}function y2(e){this._context=e}y2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:mf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uI(e){return new y2(e)}function v2(e){this._context=e}v2.prototype={areaStart:pf,areaEnd:pf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function dI(e){return new v2(e)}function YA(e){return e<0?-1:1}function FA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),u=(s*i+l*r)/(r+i);return(YA(s)+YA(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(u))||0}function VA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function hg(e,t,n){var r=e._x0,i=e._y0,s=e._x1,l=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,l-u*n,s,l)}function gf(e){this._context=e}gf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hg(this,this._t0,VA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,hg(this,VA(this,n=FA(this,e,t)),n);break;default:hg(this,this._t0,n=FA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function b2(e){this._context=new x2(e)}(b2.prototype=Object.create(gf.prototype)).point=function(e,t){gf.prototype.point.call(this,t,e)};function x2(e){this._context=e}x2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function fI(e){return new gf(e)}function hI(e){return new b2(e)}function S2(e){this._context=e}S2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=KA(e),i=KA(t),s=0,l=1;l<n;++s,++l)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function KA(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),l=new Array(n);for(i[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function pI(e){return new S2(e)}function eh(e,t){this._context=e,this._t=t}eh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function mI(e){return new eh(e,.5)}function gI(e){return new eh(e,0)}function yI(e){return new eh(e,1)}function Fs(e,t){if((l=e.length)>1)for(var n=1,r,i,s=e[t[0]],l,u=s.length;n<l;++n)for(i=s,s=e[t[n]],r=0;r<u;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Jy(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function vI(e,t){return e[t]}function bI(e){const t=[];return t.key=e,t}function xI(){var e=dt([]),t=Jy,n=Fs,r=vI;function i(s){var l=Array.from(e.apply(this,arguments),bI),u,f=l.length,h=-1,p;for(const m of s)for(u=0,++h;u<f;++u)(l[u][h]=[0,+r(m,l[u].key,h,s)]).data=m;for(u=0,p=a0(t(l));u<f;++u)l[p[u]].index=u;return n(l,p),l}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:dt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:dt(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Jy:typeof s=="function"?s:dt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Fs,i):n},i}function SI(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,l;i<s;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}Fs(e,t)}}function AI(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var l=0,u=0;l<i;++l)u+=e[l][n][1]||0;r[n][1]+=r[n][0]=-u/2}Fs(e,t)}}function EI(e,t){if(!(!((l=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,l;r<s;++r){for(var u=0,f=0,h=0;u<l;++u){for(var p=e[t[u]],m=p[r][1]||0,g=p[r-1][1]||0,x=(m-g)/2,S=0;S<u;++S){var A=e[t[S]],C=A[r][1]||0,P=A[r-1][1]||0;x+=C-P}f+=m,h+=x*m}i[r-1][1]+=i[r-1][0]=n,f&&(n-=h/f)}i[r-1][1]+=i[r-1][0]=n,Fs(e,t)}}var CI=["type","size","sizeType"];function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(null,arguments)}function XA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function WA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XA(Object(n),!0).forEach(function(r){PI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PI(e,t,n){return(t=wI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wI(e){var t=OI(e,"string");return typeof t=="symbol"?t:t+""}function OI(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TI(e,t){if(e==null)return{};var n,r,i=_I(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _I(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var A2={symbolCircle:i0,symbolCross:WR,symbolDiamond:ZR,symbolSquare:JR,symbolStar:rI,symbolTriangle:aI,symbolWye:oI},DI=Math.PI/180,NI=e=>{var t="symbol".concat(Wc(e));return A2[t]||i0},jI=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*DI;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},MI=(e,t)=>{A2["symbol".concat(Wc(e))]=t},o0=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=TI(e,CI),s=WA(WA({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var g=NI(l),x=sI().type(g).size(jI(n,r,l));return x()},{className:f,cx:h,cy:p}=s,m=Ut(s,!0);return h===+h&&p===+p&&n===+n?E.createElement("path",ev({},m,{className:nt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};o0.registerSymbol=MI;function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(null,arguments)}function QA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(n),!0).forEach(function(r){s0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s0(e,t,n){return(t=RI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RI(e){var t=II(e,"string");return typeof t=="symbol"?t:t+""}function II(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cr=32;class l0 extends E.PureComponent{renderIcon(t,n){var{inactiveColor:r}=this.props,i=Cr/2,s=Cr/6,l=Cr/3,u=t.inactive?r:t.color,f=n??t.type;if(f==="none")return null;if(f==="plainline")return E.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:Cr,y2:i,className:"recharts-legend-icon"});if(f==="line")return E.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Cr,"M").concat(2*l,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(f==="rect")return E.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Cr/8,"h").concat(Cr,"v").concat(Cr*3/4,"h").concat(-Cr,"z"),className:"recharts-legend-icon"});if(E.isValidElement(t.legendIcon)){var h=kI({},t);return delete h.legendIcon,E.cloneElement(t.legendIcon,h)}return E.createElement(o0,{fill:u,cx:i,cy:i,size:Cr,sizeType:"diameter",type:f})}renderItems(){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:l}=this.props,u={x:0,y:0,width:Cr,height:Cr},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,m)=>{var g=p.formatter||i,x=nt({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:p.inactive});if(p.type==="none")return null;var S=p.inactive?s:p.color,A=g?g(p.value,p,m):p.value;return E.createElement("li",tv({className:x,style:f,key:"legend-item-".concat(m)},Qc(this.props,p,m)),E.createElement(n0,{width:n,height:n,viewBox:u,style:h,"aria-label":"".concat(A," legend icon")},this.renderIcon(p,l)),E.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},A))})}render(){var{payload:t,layout:n,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return E.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}s0(l0,"displayName","Legend");s0(l0,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var pg={},mg={},ZA;function LI(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let s=0;s<n.length;s++){const l=n[s],u=r(l);i.has(u)||i.set(u,l)}return Array.from(i.values())}e.uniqBy=t})(mg)),mg}var gg={},JA;function E2(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(gg)),gg}var yg={},vg={},bg={},eE;function $I(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(bg)),bg}var tE;function c0(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$I();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(vg)),vg}var xg={},nE;function BI(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(xg)),xg}var rE;function UI(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c0(),n=BI();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(yg)),yg}var Sg={},Ag={},aE;function zI(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jv();function n(r){return function(i){return t.get(i,r)}}e.property=n})(Ag)),Ag}var Eg={},Cg={},Pg={},wg={},iE;function C2(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(wg)),wg}var Og={},oE;function P2(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Og)),Og}var Tg={},sE;function w2(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(Tg)),Tg}var lE;function GI(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u0(),n=C2(),r=P2(),i=w2();function s(m,g,x){return typeof x!="function"?t.isMatch(m,g):l(m,g,function S(A,C,P,O,T,j){const N=x(A,C,P,O,T,j);return N!==void 0?!!N:l(A,C,S,j)},new Map)}function l(m,g,x,S){if(g===m)return!0;switch(typeof g){case"object":return u(m,g,x,S);case"function":return Object.keys(g).length>0?l(m,{...g},x,S):i.eq(m,g);default:return n.isObject(m)?typeof g=="string"?g==="":!0:i.eq(m,g)}}function u(m,g,x,S){if(g==null)return!0;if(Array.isArray(g))return h(m,g,x,S);if(g instanceof Map)return f(m,g,x,S);if(g instanceof Set)return p(m,g,x,S);const A=Object.keys(g);if(m==null)return A.length===0;if(A.length===0)return!0;if(S&&S.has(g))return S.get(g)===m;S&&S.set(g,m);try{for(let C=0;C<A.length;C++){const P=A[C];if(!r.isPrimitive(m)&&!(P in m)||g[P]===void 0&&m[P]!==void 0||g[P]===null&&m[P]!==null||!x(m[P],g[P],P,m,g,S))return!1}return!0}finally{S&&S.delete(g)}}function f(m,g,x,S){if(g.size===0)return!0;if(!(m instanceof Map))return!1;for(const[A,C]of g.entries()){const P=m.get(A);if(x(P,C,A,m,g,S)===!1)return!1}return!0}function h(m,g,x,S){if(g.length===0)return!0;if(!Array.isArray(m))return!1;const A=new Set;for(let C=0;C<g.length;C++){const P=g[C];let O=!1;for(let T=0;T<m.length;T++){if(A.has(T))continue;const j=m[T];let N=!1;if(x(j,P,C,m,g,S)&&(N=!0),N){A.add(T),O=!0;break}}if(!O)return!1}return!0}function p(m,g,x,S){return g.size===0?!0:m instanceof Set?h([...m],[...g],x,S):!1}e.isMatchWith=s,e.isSetMatch=p})(Pg)),Pg}var cE;function u0(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GI();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(Cg)),Cg}var _g={},Dg={},Ng={},uE;function HI(){return uE||(uE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(Ng)),Ng}var jg={},dE;function O2(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(jg)),jg}var Mg={},fE;function T2(){return fE||(fE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",l="[object Symbol]",u="[object Date]",f="[object Map]",h="[object Set]",p="[object Array]",m="[object Function]",g="[object ArrayBuffer]",x="[object Object]",S="[object Error]",A="[object DataView]",C="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",T="[object Uint32Array]",j="[object BigUint64Array]",N="[object Int8Array]",D="[object Int16Array]",M="[object Int32Array]",R="[object BigInt64Array]",U="[object Float32Array]",K="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=g,e.arrayTag=p,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=j,e.booleanTag=i,e.dataViewTag=A,e.dateTag=u,e.errorTag=S,e.float32ArrayTag=U,e.float64ArrayTag=K,e.functionTag=m,e.int16ArrayTag=D,e.int32ArrayTag=M,e.int8ArrayTag=N,e.mapTag=f,e.numberTag=r,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=T,e.uint8ArrayTag=C,e.uint8ClampedArrayTag=P})(Mg)),Mg}var kg={},hE;function qI(){return hE||(hE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(kg)),kg}var pE;function _2(){return pE||(pE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HI(),n=O2(),r=T2(),i=P2(),s=qI();function l(p,m){return u(p,void 0,p,new Map,m)}function u(p,m,g,x=new Map,S=void 0){const A=S?.(p,m,g,x);if(A!==void 0)return A;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const C=new Array(p.length);x.set(p,C);for(let P=0;P<p.length;P++)C[P]=u(p[P],P,g,x,S);return Object.hasOwn(p,"index")&&(C.index=p.index),Object.hasOwn(p,"input")&&(C.input=p.input),C}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const C=new RegExp(p.source,p.flags);return C.lastIndex=p.lastIndex,C}if(p instanceof Map){const C=new Map;x.set(p,C);for(const[P,O]of p)C.set(P,u(O,P,g,x,S));return C}if(p instanceof Set){const C=new Set;x.set(p,C);for(const P of p)C.add(u(P,void 0,g,x,S));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const C=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,C);for(let P=0;P<p.length;P++)C[P]=u(p[P],P,g,x,S);return C}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const C=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,C),f(C,p,g,x,S),C}if(typeof File<"u"&&p instanceof File){const C=new File([p],p.name,{type:p.type});return x.set(p,C),f(C,p,g,x,S),C}if(p instanceof Blob){const C=new Blob([p],{type:p.type});return x.set(p,C),f(C,p,g,x,S),C}if(p instanceof Error){const C=new p.constructor;return x.set(p,C),C.message=p.message,C.name=p.name,C.stack=p.stack,C.cause=p.cause,f(C,p,g,x,S),C}if(typeof p=="object"&&h(p)){const C=Object.create(Object.getPrototypeOf(p));return x.set(p,C),f(C,p,g,x,S),C}return p}function f(p,m,g=p,x,S){const A=[...Object.keys(m),...t.getSymbols(m)];for(let C=0;C<A.length;C++){const P=A[C],O=Object.getOwnPropertyDescriptor(p,P);(O==null||O.writable)&&(p[P]=u(m[P],P,g,x,S))}}function h(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=f})(Dg)),Dg}var mE;function YI(){return mE||(mE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_2();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(_g)),_g}var gE;function FI(){return gE||(gE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u0(),n=YI();function r(i){return i=n.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=r})(Eg)),Eg}var Rg={},Ig={},Lg={},yE;function VI(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_2(),n=T2();function r(i,s){return t.cloneDeepWith(i,(l,u,f,h)=>{const p=s?.(l,u,f,h);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new i.constructor(i?.valueOf());return t.copyProperties(m,i),m}case n.argumentsTag:{const m={};return t.copyProperties(m,i),m.length=i.length,m[Symbol.iterator]=i[Symbol.iterator],m}default:return}})}e.cloneDeepWith=r})(Lg)),Lg}var vE;function KI(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VI();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(Ig)),Ig}var $g={},Bg={},bE;function D2(){return bE||(bE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(Bg)),Bg}var Ug={},xE;function XI(){return xE||(xE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O2();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(Ug)),Ug}var SE;function WI(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JO(),n=D2(),r=XI(),i=Zv();function s(l,u){let f;if(Array.isArray(u)?f=u:typeof u=="string"&&t.isDeepKey(u)&&l?.[u]==null?f=i.toPath(u):f=[u],f.length===0)return!1;let h=l;for(let p=0;p<f.length;p++){const m=f[p];if((h==null||!Object.hasOwn(h,m))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(m)&&m<h.length))return!1;h=h[m]}return!0}e.has=s})($g)),$g}var AE;function QI(){return AE||(AE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u0(),n=e2(),r=KI(),i=Jv(),s=WI();function l(u,f){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return f=r.cloneDeep(f),function(h){const p=i.get(h,u);return p===void 0?s.has(h,u):f===void 0?p===void 0:t.isMatch(p,f)}}e.matchesProperty=l})(Rg)),Rg}var EE;function ZI(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E2(),n=zI(),r=FI(),i=QI();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=s})(Sg)),Sg}var CE;function JI(){return CE||(CE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LI(),n=E2(),r=UI(),i=ZI();function s(l,u=n.identity){return r.isArrayLikeObject(l)?t.uniqBy(Array.from(l),i.iteratee(u)):[]}e.uniqBy=s})(pg)),pg}var zg,PE;function eL(){return PE||(PE=1,zg=JI().uniqBy),zg}var tL=eL();const wE=qr(tL);function N2(e,t,n){return t===!0?wE(e,n):typeof t=="function"?wE(e,t):e}var Gg={exports:{}},Hg={},qg={exports:{}},Yg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function nL(){if(OE)return Yg;OE=1;var e=rl();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function u(m,g){var x=g(),S=r({inst:{value:x,getSnapshot:g}}),A=S[0].inst,C=S[1];return s(function(){A.value=x,A.getSnapshot=g,f(A)&&C({inst:A})},[m,x,g]),i(function(){return f(A)&&C({inst:A}),m(function(){f(A)&&C({inst:A})})},[m]),l(x),x}function f(m){var g=m.getSnapshot;m=m.value;try{var x=g();return!n(m,x)}catch{return!0}}function h(m,g){return g()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Yg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Yg}var TE;function rL(){return TE||(TE=1,qg.exports=nL()),qg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function aL(){if(_E)return Hg;_E=1;var e=rl(),t=rL();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,u=e.useMemo,f=e.useDebugValue;return Hg.useSyncExternalStoreWithSelector=function(h,p,m,g,x){var S=s(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=u(function(){function P(D){if(!O){if(O=!0,T=D,D=g(D),x!==void 0&&A.hasValue){var M=A.value;if(x(M,D))return j=M}return j=D}if(M=j,r(T,D))return M;var R=g(D);return x!==void 0&&x(M,R)?(T=D,M):(T=D,j=R)}var O=!1,T,j,N=m===void 0?null:m;return[function(){return P(p())},N===null?void 0:function(){return P(N())}]},[p,m,g,x]);var C=i(h,S[0],S[1]);return l(function(){A.hasValue=!0,A.value=C},[C]),f(C),C},Hg}var DE;function iL(){return DE||(DE=1,Gg.exports=aL()),Gg.exports}var oL=iL(),d0=E.createContext(null),sL=e=>e,Ct=()=>{var e=E.useContext(d0);return e?e.store.dispatch:sL},af=()=>{},lL=()=>af,cL=(e,t)=>e===t;function we(e){var t=E.useContext(d0);return oL.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:lL,t?t.store.getState:af,t?t.store.getState:af,t?e:af,cL)}function uL(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function dL(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function fL(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var NE=e=>Array.isArray(e)?e:[e];function hL(e){const t=Array.isArray(e[0])?e[0]:e;return fL(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function pL(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var mL=class{constructor(e){this.value=e}deref(){return this.value}},gL=typeof WeakRef<"u"?WeakRef:mL,yL=0,jE=1;function Rd(){return{s:yL,v:void 0,o:null,p:null}}function j2(e,t={}){let n=Rd();const{resultEqualityCheck:r}=t;let i,s=0;function l(){let u=n;const{length:f}=arguments;for(let m=0,g=f;m<g;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const A=S.get(x);A===void 0?(u=Rd(),S.set(x,u)):u=A}else{let S=u.p;S===null&&(u.p=S=new Map);const A=S.get(x);A===void 0?(u=Rd(),S.set(x,u)):u=A}}const h=u;let p;if(u.s===jE)p=u.v;else if(p=e.apply(null,arguments),s++,r){const m=i?.deref?.()??i;m!=null&&r(m,p)&&(p=m,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new gL(p):p}return h.s=jE,h.v=p,p}return l.clearCache=()=>{n=Rd(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function vL(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,l=0,u,f={},h=i.pop();typeof h=="object"&&(f=h,h=i.pop()),uL(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...n,...f},{memoize:m,memoizeOptions:g=[],argsMemoize:x=j2,argsMemoizeOptions:S=[]}=p,A=NE(g),C=NE(S),P=hL(i),O=m(function(){return s++,h.apply(null,arguments)},...A),T=x(function(){l++;const N=pL(P,arguments);return u=O.apply(null,N),u},...C);return Object.assign(T,{resultFunc:h,memoizedResultFunc:O,dependencies:P,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var Z=vL(j2),bL=Object.assign((e,t=Z)=>{dL(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((l,u,f)=>(l[n[f]]=u,l),{}))},{withTypes:()=>bL}),Fg={},Vg={},Kg={},ME;function xL(){return ME||(ME=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const l=t(r),u=t(i);if(l===u&&l===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?u-l:l-u}return 0};e.compareValues=n})(Kg)),Kg}var Xg={},Wg={},kE;function M2(){return kE||(kE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Wg)),Wg}var RE;function SL(){return RE||(RE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M2(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=i})(Xg)),Xg}var IE;function AL(){return IE||(IE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xL(),n=SL(),r=Zv();function i(s,l,u,f){if(s==null)return[];u=f?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,S)=>{let A=x;for(let C=0;C<S.length&&A!=null;++C)A=A[S[C]];return A},p=(x,S)=>S==null||x==null?S:typeof x=="object"&&"key"in x?Object.hasOwn(S,x.key)?S[x.key]:h(S,x.path):typeof x=="function"?x(S):Array.isArray(x)?h(S,x):typeof S=="object"?S[x]:S,m=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return s.map(x=>({original:x,criteria:m.map(S=>p(S,x))})).slice().sort((x,S)=>{for(let A=0;A<m.length;A++){const C=t.compareValues(x.criteria[A],S.criteria[A],u[A]);if(C!==0)return C}return 0}).map(x=>x.original)}e.orderBy=i})(Vg)),Vg}var Qg={},LE;function EL(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],s=Math.floor(r),l=(u,f)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&f<s?l(p,f+1):i.push(p)}};return l(n,0),i}e.flatten=t})(Qg)),Qg}var Zg={},$E;function k2(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D2(),n=c0(),r=C2(),i=w2();function s(l,u,f){return r.isObject(f)&&(typeof u=="number"&&n.isArrayLike(f)&&t.isIndex(u)&&u<f.length||typeof u=="string"&&u in f)?i.eq(f[u],l):!1}e.isIterateeCall=s})(Zg)),Zg}var BE;function CL(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AL(),n=EL(),r=k2();function i(s,...l){const u=l.length;return u>1&&r.isIterateeCall(s,l[0],l[1])?l=[]:u>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,n.flatten(l),["asc"])}e.sortBy=i})(Fg)),Fg}var Jg,UE;function PL(){return UE||(UE=1,Jg=CL().sortBy),Jg}var wL=PL();const th=qr(wL);var R2=e=>e.legend.settings,OL=e=>e.legend.size,TL=e=>e.legend.payload,_L=Z([TL,R2],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?th(r,n):r});function DL(){return we(_L)}var Id=1;function I2(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>Id||Math.abs(l.left-t.left)>Id||Math.abs(l.top-t.top)>Id||Math.abs(l.width-t.width)>Id)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function pn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var NL=typeof Symbol=="function"&&Symbol.observable||"@@observable",zE=NL,ey=()=>Math.random().toString(36).substring(7).split("").join("."),jL={INIT:`@@redux/INIT${ey()}`,REPLACE:`@@redux/REPLACE${ey()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ey()}`},yf=jL;function f0(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function L2(e,t,n){if(typeof e!="function")throw new Error(pn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(pn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(pn(1));return n(L2)(e,t)}let r=e,i=t,s=new Map,l=s,u=0,f=!1;function h(){l===s&&(l=new Map,s.forEach((C,P)=>{l.set(P,C)}))}function p(){if(f)throw new Error(pn(3));return i}function m(C){if(typeof C!="function")throw new Error(pn(4));if(f)throw new Error(pn(5));let P=!0;h();const O=u++;return l.set(O,C),function(){if(P){if(f)throw new Error(pn(6));P=!1,h(),l.delete(O),s=null}}}function g(C){if(!f0(C))throw new Error(pn(7));if(typeof C.type>"u")throw new Error(pn(8));if(typeof C.type!="string")throw new Error(pn(17));if(f)throw new Error(pn(9));try{f=!0,i=r(i,C)}finally{f=!1}return(s=l).forEach(O=>{O()}),C}function x(C){if(typeof C!="function")throw new Error(pn(10));r=C,g({type:yf.REPLACE})}function S(){const C=m;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(pn(11));function O(){const j=P;j.next&&j.next(p())}return O(),{unsubscribe:C(O)}},[zE](){return this}}}return g({type:yf.INIT}),{dispatch:g,subscribe:m,getState:p,replaceReducer:x,[zE]:S}}function ML(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:yf.INIT})>"u")throw new Error(pn(12));if(typeof n(void 0,{type:yf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pn(13))})}function $2(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{ML(n)}catch(s){i=s}return function(l={},u){if(i)throw i;let f=!1;const h={};for(let p=0;p<r.length;p++){const m=r[p],g=n[m],x=l[m],S=g(x,u);if(typeof S>"u")throw u&&u.type,new Error(pn(14));h[m]=S,f=f||S!==x}return f=f||r.length!==Object.keys(l).length,f?h:l}}function vf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function kL(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(pn(15))};const l={getState:i.getState,dispatch:(f,...h)=>s(f,...h)},u=e.map(f=>f(l));return s=vf(...u)(i.dispatch),{...i,dispatch:s}}}function B2(e){return f0(e)&&"type"in e&&typeof e.type=="string"}var U2=Symbol.for("immer-nothing"),GE=Symbol.for("immer-draftable"),sr=Symbol.for("immer-state");function Gr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Vs=Object.getPrototypeOf;function Lo(e){return!!e&&!!e[sr]}function Ga(e){return e?z2(e)||Array.isArray(e)||!!e[GE]||!!e.constructor?.[GE]||Zc(e)||rh(e):!1}var RL=Object.prototype.constructor.toString();function z2(e){if(!e||typeof e!="object")return!1;const t=Vs(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===RL}function bf(e,t){nh(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function nh(e){const t=e[sr];return t?t.type_:Array.isArray(e)?1:Zc(e)?2:rh(e)?3:0}function nv(e,t){return nh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function G2(e,t,n){const r=nh(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function IL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Zc(e){return e instanceof Map}function rh(e){return e instanceof Set}function wo(e){return e.copy_||e.base_}function rv(e,t){if(Zc(e))return new Map(e);if(rh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=z2(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[sr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const l=i[s],u=r[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Vs(e),r)}else{const r=Vs(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function h0(e,t=!1){return ah(e)||Lo(e)||!Ga(e)||(nh(e)>1&&Object.defineProperties(e,{set:{value:Ld},add:{value:Ld},clear:{value:Ld},delete:{value:Ld}}),Object.freeze(e),t&&Object.values(e).forEach(n=>h0(n,!0))),e}function Ld(){Gr(2)}function ah(e){return Object.isFrozen(e)}var LL={};function $o(e){const t=LL[e];return t||Gr(0,e),t}var zc;function H2(){return zc}function $L(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function HE(e,t){t&&($o("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function av(e){iv(e),e.drafts_.forEach(BL),e.drafts_=null}function iv(e){e===zc&&(zc=e.parent_)}function qE(e){return zc=$L(zc,e)}function BL(e){const t=e[sr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function YE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[sr].modified_&&(av(t),Gr(4)),Ga(e)&&(e=xf(t,e),t.parent_||Sf(t,e)),t.patches_&&$o("Patches").generateReplacementPatches_(n[sr].base_,e,t.patches_,t.inversePatches_)):e=xf(t,n,[]),av(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==U2?e:void 0}function xf(e,t,n){if(ah(t))return t;const r=t[sr];if(!r)return bf(t,(i,s)=>FE(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Sf(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,l=!1;r.type_===3&&(s=new Set(i),i.clear(),l=!0),bf(s,(u,f)=>FE(e,r,i,u,f,n,l)),Sf(e,i,!1),n&&e.patches_&&$o("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function FE(e,t,n,r,i,s,l){if(Lo(i)){const u=s&&t&&t.type_!==3&&!nv(t.assigned_,r)?s.concat(r):void 0,f=xf(e,i,u);if(G2(n,r,f),Lo(f))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(Ga(i)&&!ah(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;xf(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Zc(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Sf(e,i)}}function Sf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&h0(t,n)}function UL(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:H2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=p0;n&&(i=[r],s=Gc);const{revoke:l,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=l,u}var p0={get(e,t){if(t===sr)return e;const n=wo(e);if(!nv(n,t))return zL(e,n,t);const r=n[t];return e.finalized_||!Ga(r)?r:r===ty(e.base_,t)?(ny(e),e.copy_[t]=sv(r,e)):r},has(e,t){return t in wo(e)},ownKeys(e){return Reflect.ownKeys(wo(e))},set(e,t,n){const r=q2(wo(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=ty(wo(e),t),s=i?.[sr];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(IL(n,i)&&(n!==void 0||nv(e.base_,t)))return!0;ny(e),ov(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ty(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ny(e),ov(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=wo(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Gr(11)},getPrototypeOf(e){return Vs(e.base_)},setPrototypeOf(){Gr(12)}},Gc={};bf(p0,(e,t)=>{Gc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Gc.deleteProperty=function(e,t){return Gc.set.call(this,e,t,void 0)};Gc.set=function(e,t,n){return p0.set.call(this,e[0],t,n,e[0])};function ty(e,t){const n=e[sr];return(n?wo(n):e)[t]}function zL(e,t,n){const r=q2(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function q2(e,t){if(!(t in e))return;let n=Vs(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Vs(n)}}function ov(e){e.modified_||(e.modified_=!0,e.parent_&&ov(e.parent_))}function ny(e){e.copy_||(e.copy_=rv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var GL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const l=this;return function(f=s,...h){return l.produce(f,p=>n.call(this,p,...h))}}typeof n!="function"&&Gr(6),r!==void 0&&typeof r!="function"&&Gr(7);let i;if(Ga(t)){const s=qE(this),l=sv(t,void 0);let u=!0;try{i=n(l),u=!1}finally{u?av(s):iv(s)}return HE(s,r),YE(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===U2&&(i=void 0),this.autoFreeze_&&h0(i,!0),r){const s=[],l=[];$o("Patches").generateReplacementPatches_(t,i,s,l),r(s,l)}return i}else Gr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,f=>t(f,...u));let r,i;return[this.produce(t,n,(l,u)=>{r=l,i=u}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ga(e)||Gr(8),Lo(e)&&(e=Ua(e));const t=qE(this),n=sv(e,void 0);return n[sr].isManual_=!0,iv(t),n}finishDraft(e,t){const n=e&&e[sr];(!n||!n.isManual_)&&Gr(9);const{scope_:r}=n;return HE(r,t),YE(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=$o("Patches").applyPatches_;return Lo(e)?r(e,t):this.produce(e,i=>r(i,t))}};function sv(e,t){const n=Zc(e)?$o("MapSet").proxyMap_(e,t):rh(e)?$o("MapSet").proxySet_(e,t):UL(e,t);return(t?t.scope_:H2()).drafts_.push(n),n}function Ua(e){return Lo(e)||Gr(10,e),Y2(e)}function Y2(e){if(!Ga(e)||ah(e))return e;const t=e[sr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=rv(e,t.scope_.immer_.useStrictShallowCopy_)}else n=rv(e,!0);return bf(n,(r,i)=>{G2(n,r,Y2(i))}),t&&(t.finalized_=!1),n}var HL=new GL,F2=HL.produce;function V2(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var qL=V2(),YL=V2,FL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vf:vf.apply(null,arguments)};function _r(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(ir(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>B2(r)&&r.type===e,n}var K2=class Dc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Dc.prototype)}static get[Symbol.species](){return Dc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Dc(...t[0].concat(this)):new Dc(...t.concat(this))}};function VE(e){return Ga(e)?F2(e,()=>{}):e}function $d(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function VL(e){return typeof e=="boolean"}var KL=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let l=new K2;return n&&(VL(n)?l.push(qL):l.push(YL(n.extraArgument))),l},XL="RTK_autoBatch",KE=e=>t=>{setTimeout(t,e)},WL=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,l=!1;const u=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:KE(10):e.type==="callback"?e.queueNotification:KE(e.timeout),h=()=>{l=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const m=()=>i&&p(),g=r.subscribe(m);return u.add(p),()=>{g(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[XL],s=!i,s&&(l||(l=!0,f(h))),r.dispatch(p)}finally{i=!0}}})},QL=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new K2(e);return r&&i.push(WL(typeof r=="object"?r:void 0)),i};function ZL(e){const t=KL(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(f0(n))u=$2(n);else throw new Error(ir(1));let f;typeof r=="function"?f=r(t):f=t();let h=vf;i&&(h=FL({trace:!1,...typeof i=="object"&&i}));const p=kL(...f),m=QL(p);let g=typeof l=="function"?l(m):m();const x=h(...g);return L2(u,s,x)}function X2(e){const t={},n=[];let r;const i={addCase(s,l){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(ir(28));if(u in t)throw new Error(ir(29));return t[u]=l,i},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:s.settled,reducer:l.settled}),i},addMatcher(s,l){return n.push({matcher:s,reducer:l}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function JL(e){return typeof e=="function"}function e4(e,t){let[n,r,i]=X2(t),s;if(JL(e))s=()=>VE(e());else{const u=VE(e);s=()=>u}function l(u=s(),f){let h=[n[f.type],...r.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,m)=>{if(m)if(Lo(p)){const x=m(p,f);return x===void 0?p:x}else{if(Ga(p))return F2(p,g=>m(g,f));{const g=m(p,f);if(g===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return p},u)}return l.getInitialState=s,l}var t4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",n4=(e=21)=>{let t="",n=e;for(;n--;)t+=t4[Math.random()*64|0];return t},r4=Symbol.for("rtk-slice-createasyncthunk");function a4(e,t){return`${e}/${t}`}function i4({creators:e}={}){const t=e?.asyncThunk?.[r4];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(ir(11));const l=(typeof r.reducers=="function"?r.reducers(s4()):r.reducers)||{},u=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(T,j){const N=typeof T=="string"?T:T.type;if(!N)throw new Error(ir(12));if(N in f.sliceCaseReducersByType)throw new Error(ir(13));return f.sliceCaseReducersByType[N]=j,h},addMatcher(T,j){return f.sliceMatchers.push({matcher:T,reducer:j}),h},exposeAction(T,j){return f.actionCreators[T]=j,h},exposeCaseReducer(T,j){return f.sliceCaseReducersByName[T]=j,h}};u.forEach(T=>{const j=l[T],N={reducerName:T,type:a4(i,T),createNotation:typeof r.reducers=="function"};c4(j)?d4(N,j,h,t):l4(N,j,h)});function p(){const[T={},j=[],N=void 0]=typeof r.extraReducers=="function"?X2(r.extraReducers):[r.extraReducers],D={...T,...f.sliceCaseReducersByType};return e4(r.initialState,M=>{for(let R in D)M.addCase(R,D[R]);for(let R of f.sliceMatchers)M.addMatcher(R.matcher,R.reducer);for(let R of j)M.addMatcher(R.matcher,R.reducer);N&&M.addDefaultCase(N)})}const m=T=>T,g=new Map,x=new WeakMap;let S;function A(T,j){return S||(S=p()),S(T,j)}function C(){return S||(S=p()),S.getInitialState()}function P(T,j=!1){function N(M){let R=M[T];return typeof R>"u"&&j&&(R=$d(x,N,C)),R}function D(M=m){const R=$d(g,j,()=>new WeakMap);return $d(R,M,()=>{const U={};for(const[K,q]of Object.entries(r.selectors??{}))U[K]=o4(q,M,()=>$d(x,M,C),j);return U})}return{reducerPath:T,getSelectors:D,get selectors(){return D(N)},selectSlice:N}}const O={name:i,reducer:A,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:C,...P(s),injectInto(T,{reducerPath:j,...N}={}){const D=j??s;return T.inject({reducerPath:D,reducer:A},N),{...O,...P(D,!0)}}};return O}}function o4(e,t,n,r){function i(s,...l){let u=t(s);return typeof u>"u"&&r&&(u=n()),e(u,...l)}return i.unwrapped=e,i}var cr=i4();function s4(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function l4({type:e,reducerName:t,createNotation:n},r,i){let s,l;if("reducer"in r){if(n&&!u4(r))throw new Error(ir(17));s=r.reducer,l=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?_r(e,l):_r(e))}function c4(e){return e._reducerDefinitionType==="asyncThunk"}function u4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function d4({type:e,reducerName:t},n,r,i){if(!i)throw new Error(ir(18));const{payloadCreator:s,fulfilled:l,pending:u,rejected:f,settled:h,options:p}=n,m=i(e,s,p);r.exposeAction(t,m),l&&r.addCase(m.fulfilled,l),u&&r.addCase(m.pending,u),f&&r.addCase(m.rejected,f),h&&r.addMatcher(m.settled,h),r.exposeCaseReducer(t,{fulfilled:l||Bd,pending:u||Bd,rejected:f||Bd,settled:h||Bd})}function Bd(){}var f4="task",W2="listener",Q2="completed",m0="cancelled",h4=`task-${m0}`,p4=`task-${Q2}`,lv=`${W2}-${m0}`,m4=`${W2}-${Q2}`,ih=class{constructor(e){this.code=e,this.message=`${f4} ${m0} (reason: ${e})`}name="TaskAbortError";message},g0=(e,t)=>{if(typeof e!="function")throw new TypeError(ir(32))},Af=()=>{},Z2=(e,t=Af)=>(e.catch(t),e),J2=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),jo=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Mo=e=>{if(e.aborted){const{reason:t}=e;throw new ih(t)}};function eT(e,t){let n=Af;return new Promise((r,i)=>{const s=()=>i(new ih(e.reason));if(e.aborted){s();return}n=J2(e,s),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Af})}var g4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof ih?"cancelled":"rejected",error:n}}finally{t?.()}},Ef=e=>t=>Z2(eT(e,t).then(n=>(Mo(e),n))),tT=e=>{const t=Ef(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:qs}=Object,XE={},oh="listenerMiddleware",y4=(e,t)=>{const n=r=>J2(e,()=>jo(r,e.reason));return(r,i)=>{g0(r);const s=new AbortController;n(s);const l=g4(async()=>{Mo(e),Mo(s.signal);const u=await r({pause:Ef(s.signal),delay:tT(s.signal),signal:s.signal});return Mo(s.signal),u},()=>jo(s,p4));return i?.autoJoin&&t.push(l.catch(Af)),{result:Ef(e)(l),cancel(){jo(s,h4)}}}},v4=(e,t)=>{const n=async(r,i)=>{Mo(t);let s=()=>{};const u=[new Promise((f,h)=>{let p=e({predicate:r,effect:(m,g)=>{g.unsubscribe(),f([m,g.getState(),g.getOriginalState()])}});s=()=>{p(),h()}})];i!=null&&u.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await eT(t,Promise.race(u));return Mo(t),f}finally{s()}};return(r,i)=>Z2(n(r,i))},nT=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=_r(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ir(21));return g0(s),{predicate:i,type:t,effect:s}},rT=qs(e=>{const{type:t,predicate:n,effect:r}=nT(e);return{id:n4(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ir(22))}}},{withTypes:()=>rT}),WE=(e,t)=>{const{type:n,effect:r,predicate:i}=nT(t);return Array.from(e.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},cv=e=>{e.pending.forEach(t=>{jo(t,lv)})},b4=e=>()=>{e.forEach(cv),e.clear()},QE=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},aT=qs(_r(`${oh}/add`),{withTypes:()=>aT}),x4=_r(`${oh}/removeAll`),iT=qs(_r(`${oh}/remove`),{withTypes:()=>iT}),S4=(...e)=>{console.error(`${oh}/error`,...e)},Jc=(e={})=>{const t=new Map,{extra:n,onError:r=S4}=e;g0(r);const i=p=>(p.unsubscribe=()=>t.delete(p.id),t.set(p.id,p),m=>{p.unsubscribe(),m?.cancelActive&&cv(p)}),s=p=>{const m=WE(t,p)??rT(p);return i(m)};qs(s,{withTypes:()=>s});const l=p=>{const m=WE(t,p);return m&&(m.unsubscribe(),p.cancelActive&&cv(m)),!!m};qs(l,{withTypes:()=>l});const u=async(p,m,g,x)=>{const S=new AbortController,A=v4(s,S.signal),C=[];try{p.pending.add(S),await Promise.resolve(p.effect(m,qs({},g,{getOriginalState:x,condition:(P,O)=>A(P,O).then(Boolean),take:A,delay:tT(S.signal),pause:Ef(S.signal),extra:n,signal:S.signal,fork:y4(S.signal,C),unsubscribe:p.unsubscribe,subscribe:()=>{t.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((P,O,T)=>{P!==S&&(jo(P,lv),T.delete(P))})},cancel:()=>{jo(S,lv),p.pending.delete(S)},throwIfCancelled:()=>{Mo(S.signal)}})))}catch(P){P instanceof ih||QE(r,P,{raisedBy:"effect"})}finally{await Promise.all(C),jo(S,m4),p.pending.delete(S)}},f=b4(t);return{middleware:p=>m=>g=>{if(!B2(g))return m(g);if(aT.match(g))return s(g.payload);if(x4.match(g)){f();return}if(iT.match(g))return l(g.payload);let x=p.getState();const S=()=>{if(x===XE)throw new Error(ir(23));return x};let A;try{if(A=m(g),t.size>0){const C=p.getState(),P=Array.from(t.values());for(const O of P){let T=!1;try{T=O.predicate(g,C,x)}catch(j){T=!1,QE(r,j,{raisedBy:"predicate"})}T&&u(O,g,p,S)}}}finally{x=XE}return A},startListening:s,stopListening:l,clearListeners:f}};function ir(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var A4={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},oT=cr({name:"chartLayout",initialState:A4,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:E4,setLayout:C4,setChartSize:P4,setScale:w4}=oT.actions,O4=oT.reducer;function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function JE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(n),!0).forEach(function(r){T4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T4(e,t,n){return(t=_4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _4(e){var t=D4(e,"string");return typeof t=="symbol"?t:t+""}function D4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cf=Math.PI/180,N4=e=>e*180/Math.PI,zt=(e,t,n,r)=>({x:e+Math.cos(-Cf*r)*n,y:t+Math.sin(-Cf*r)*n}),sT=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},j4=(e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)},M4=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,l=j4({x:n,y:r},{x:i,y:s});if(l<=0)return{radius:l,angle:0};var u=(n-i)/l,f=Math.acos(u);return r>s&&(f=2*Math.PI-f),{radius:l,angle:N4(f),angleInRadian:f}},k4=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-s*360,endAngle:n-s*360}},R4=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360),l=Math.min(i,s);return e+l*360},I4=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=M4({x:n,y:r},t),{innerRadius:l,outerRadius:u}=t;if(i<l||i>u||i===0)return null;var{startAngle:f,endAngle:h}=k4(t),p=s,m;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=f}return m?JE(JE({},t),{},{radius:i,angle:R4(p,t)}):null};function lT(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function eC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(n),!0).forEach(function(r){L4(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L4(e,t,n){return(t=$4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $4(e){var t=B4(e,"string");return typeof t=="symbol"?t:t+""}function B4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vt(e,t,n){return rn(e)||rn(t)?n:da(t)?Io(e,t,n):typeof t=="function"?t(e):n}var U4=(e,t,n,r,i)=>{var s,l=-1,u=(s=t?.length)!==null&&s!==void 0?s:0;if(u<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<u;f++){var h=f>0?n[f-1].coordinate:n[u-1].coordinate,p=n[f].coordinate,m=f>=u-1?n[0].coordinate:n[f+1].coordinate,g=void 0;if(nn(p-h)!==nn(m-p)){var x=[];if(nn(m-p)===nn(i[1]-i[0])){g=m;var S=p+i[1]-i[0];x[0]=Math.min(S,(S+h)/2),x[1]=Math.max(S,(S+h)/2)}else{g=h;var A=m+i[1]-i[0];x[0]=Math.min(p,(A+p)/2),x[1]=Math.max(p,(A+p)/2)}var C=[Math.min(p,(g+p)/2),Math.max(p,(g+p)/2)];if(e>C[0]&&e<=C[1]||e>=x[0]&&e<=x[1]){({index:l}=n[f]);break}}else{var P=Math.min(h,m),O=Math.max(h,m);if(e>(P+p)/2&&e<=(O+p)/2){({index:l}=n[f]);break}}}else if(t){for(var T=0;T<u;T++)if(T===0&&e<=(t[T].coordinate+t[T+1].coordinate)/2||T>0&&T<u-1&&e>(t[T].coordinate+t[T-1].coordinate)/2&&e<=(t[T].coordinate+t[T+1].coordinate)/2||T===u-1&&e>(t[T].coordinate+t[T-1].coordinate)/2){({index:l}=t[T]);break}}return l},z4=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&s!=="center"&&_e(e[s]))return wr(wr({},e),{},{[s]:e[s]+(r||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&l!=="middle"&&_e(e[l]))return wr(wr({},e),{},{[l]:e[l]+(i||0)})}return e},Yo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",cT=(e,t,n,r)=>{if(r)return e.map(u=>u.coordinate);var i,s,l=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===n&&(s=!0),u.coordinate));return i||l.push(t),s||l.push(n),l},uT=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:s,scale:l,realScaleType:u,isCategorical:f,categoricalDomain:h,tickCount:p,ticks:m,niceTicks:g,axisType:x}=e;if(!l)return null;var S=u==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,A=i==="category"&&l.bandwidth?l.bandwidth()/S:0;if(A=x==="angleAxis"&&s&&s.length>=2?nn(s[0]-s[1])*2*A:A,m||g){var C=(m||g||[]).map((P,O)=>{var T=r?r.indexOf(P):P;return{coordinate:l(T)+A,value:P,offset:A,index:O}});return C.filter(P=>!or(P.coordinate))}return f&&h?h.map((P,O)=>({coordinate:l(P)+A,value:P,index:O,offset:A})):l.ticks&&p!=null?l.ticks(p).map((P,O)=>({coordinate:l(P)+A,value:P,offset:A,index:O})):l.domain().map((P,O)=>({coordinate:l(P)+A,value:r?r[P]:P,index:O,offset:A}))},tC=1e-4,G4=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-tC,s=Math.max(r[0],r[1])+tC,l=e(t[0]),u=e(t[n-1]);(l<i||l>s||u<i||u>s)&&e.domain([t[0],t[n-1]])}},H4=(e,t)=>{if(!t||t.length!==2||!_e(t[0])||!_e(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!_e(e[0])||e[0]<n)&&(i[0]=n),(!_e(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},q4=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,l=0;l<t;++l){var u=or(e[l][n][1])?e[l][n][0]:e[l][n][1];u>=0?(e[l][n][0]=i,e[l][n][1]=i+u,i=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+u,s=e[l][n][1])}},Y4=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var l=or(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=i,e[s][n][1]=i+l,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},F4={sign:q4,expand:SI,none:Fs,silhouette:AI,wiggle:EI,positive:Y4},V4=(e,t,n)=>{var r=F4[n],i=xI().keys(t).value((s,l)=>+vt(s,l,0)).order(Jy).offset(r);return i(e)};function K4(e){return e==null?void 0:String(e)}var nC=e=>{var{axis:t,ticks:n,offset:r,bandSize:i,entry:s,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+r:null;var u=vt(s,t.dataKey,t.scale.domain()[l]);return rn(u)?null:t.scale(u)-i/2+r},X4=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},W4=e=>{var t=e.flat(2).filter(_e);return[Math.min(...t),Math.max(...t)]},Q4=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Z4=(e,t,n)=>{if(e!=null)return Q4(Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:l}=s,u=l.reduce((f,h)=>{var p=lT(h,t,n),m=W4(p);return[Math.min(f[0],m[0]),Math.max(f[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],r[0]),Math.max(u[1],r[1])]},[1/0,-1/0]))},rC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,y0=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=th(t,p=>p.coordinate),s=1/0,l=1,u=i.length;l<u;l++){var f=i[l],h=i[l-1];s=Math.min((f.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function iC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return wr(wr({},t),{},{dataKey:n,payload:r,value:i,name:s})}function sh(e,t){if(e)return String(e);if(typeof t=="string")return t}function J4(e,t,n,r,i){if(n==="horizontal"||n==="vertical"){var s=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return s?{x:e,y:t}:null}return r?I4({x:e,y:t},r):null}var e3=(e,t,n,r)=>{var i=t.find(h=>h&&h.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,{radius:l}=r;return wr(wr(wr({},r),zt(r.cx,r.cy,l,s)),{},{angle:s,radius:l})}var u=i.coordinate,{angle:f}=r;return wr(wr(wr({},r),zt(r.cx,r.cy,u,f)),{},{angle:f,radius:u})}return{x:0,y:0}},t3=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Va=e=>e.layout.width,Ka=e=>e.layout.height,n3=e=>e.layout.scale,dT=e=>e.layout.margin,lh=Z(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ch=Z(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),fT="data-recharts-item-index",hT="data-recharts-item-data-key",eu=60;function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(n),!0).forEach(function(r){r3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r3(e,t,n){return(t=a3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a3(e){var t=i3(e,"string");return typeof t=="symbol"?t:t+""}function i3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o3=e=>e.brush.height;function s3(e){var t=ch(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:eu;return n+i}return n},0)}function l3(e){var t=ch(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:eu;return n+i}return n},0)}function c3(e){var t=lh(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function u3(e){var t=lh(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Xt=Z([Va,Ka,dT,o3,s3,l3,c3,u3,R2,OL],(e,t,n,r,i,s,l,u,f,h)=>{var p={left:(n.left||0)+i,right:(n.right||0)+s},m={top:(n.top||0)+l,bottom:(n.bottom||0)+u},g=Ud(Ud({},m),p),x=g.bottom;g.bottom+=r,g=z4(g,f,h);var S=e-g.left-g.right,A=t-g.top-g.bottom;return Ud(Ud({brushBottom:x},g),{},{width:Math.max(S,0),height:Math.max(A,0)})}),d3=Z(Xt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),v0=Z(Va,Ka,(e,t)=>({x:0,y:0,width:e,height:t})),f3=E.createContext(null),Nr=()=>E.useContext(f3)!=null,uh=e=>e.brush,dh=Z([uh,Xt,dT],(e,t,n)=>({height:e.height,x:_e(e.x)?e.x:t.left,y:_e(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:_e(e.width)?e.width:t.width})),b0=()=>{var e,t=Nr(),n=we(d3),r=we(dh),i=(e=we(uh))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},h3={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},pT=()=>{var e;return(e=we(Xt))!==null&&e!==void 0?e:h3},x0=()=>we(Va),S0=()=>we(Ka),p3=()=>we(e=>e.layout.margin),Xe=e=>e.layout.layoutType,A0=()=>we(Xe),m3={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},mT=cr({name:"legend",initialState:m3,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Ua(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:sC,setLegendSettings:g3,addLegendPayload:gT,removeLegendPayload:yT}=mT.actions,y3=mT.reducer,v3=["contextPayload"];function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uv.apply(null,arguments)}function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ks(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(n),!0).forEach(function(r){E0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E0(e,t,n){return(t=b3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b3(e){var t=x3(e,"string");return typeof t=="symbol"?t:t+""}function x3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S3(e,t){if(e==null)return{};var n,r,i=A3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function E3(e){return e.value}function C3(e){var{contextPayload:t}=e,n=S3(e,v3),r=N2(t,e.payloadUniqBy,E3),i=Ks(Ks({},n),{},{payload:r});return E.isValidElement(e.content)?E.cloneElement(e.content,i):typeof e.content=="function"?E.createElement(e.content,i):E.createElement(l0,i)}function P3(e,t,n,r,i,s){var{layout:l,align:u,verticalAlign:f}=t,h,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(u==="center"&&l==="vertical"?h={left:((r||0)-s.width)/2}:h=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?p={top:((i||0)-s.height)/2}:p=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Ks(Ks({},h),p)}function w3(e){var t=Ct();return E.useEffect(()=>{t(g3(e))},[t,e]),null}function O3(e){var t=Ct();return E.useEffect(()=>(t(sC(e)),()=>{t(sC({width:0,height:0}))}),[t,e]),null}function T3(e){var t=DL(),n=qR(),r=p3(),{width:i,height:s,wrapperStyle:l,portal:u}=e,[f,h]=I2([t]),p=x0(),m=S0();if(p==null||m==null)return null;var g=p-(r.left||0)-(r.right||0),x=fh.getWidthOrHeight(e.layout,s,i,g),S=u?l:Ks(Ks({position:"absolute",width:x?.width||i||"auto",height:x?.height||s||"auto"},P3(l,e,r,p,m,f)),l),A=u??n;if(A==null)return null;var C=E.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:h},E.createElement(w3,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),E.createElement(O3,{width:f.width,height:f.height}),E.createElement(C3,uv({},e,x,{margin:r,chartWidth:p,chartHeight:m,contextPayload:t})));return a2.createPortal(C,A)}class fh extends E.PureComponent{static getWidthOrHeight(t,n,r,i){return t==="vertical"&&_e(n)?{height:n}:t==="horizontal"?{width:r||i}:null}render(){return E.createElement(T3,this.props)}}E0(fh,"displayName","Legend");E0(fh,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dv.apply(null,arguments)}function cC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(n),!0).forEach(function(r){_3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _3(e,t,n){return(t=D3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D3(e){var t=N3(e,"string");return typeof t=="symbol"?t:t+""}function N3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j3(e){return Array.isArray(e)&&da(e[0])&&da(e[1])?e.join(" ~ "):e}var M3=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:l,itemSorter:u,wrapperClassName:f,labelClassName:h,label:p,labelFormatter:m,accessibilityLayer:g=!1}=e,x=()=>{if(s&&s.length){var N={padding:0,margin:0},D=(u?th(s,u):s).map((M,R)=>{if(M.type==="none")return null;var U=M.formatter||l||j3,{value:K,name:q}=M,W=K,le=q;if(U){var ie=U(K,q,M,R,s);if(Array.isArray(ie))[W,le]=ie;else if(ie!=null)W=ie;else return null}var te=ry({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:te},da(le)?E.createElement("span",{className:"recharts-tooltip-item-name"},le):null,da(le)?E.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,E.createElement("span",{className:"recharts-tooltip-item-value"},W),E.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:N},D)}return null},S=ry({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=ry({margin:0},i),C=!rn(p),P=C?p:"",O=nt("recharts-default-tooltip",f),T=nt("recharts-tooltip-label",h);C&&m&&s!==void 0&&s!==null&&(P=m(p,s));var j=g?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",dv({className:O,style:S},j),E.createElement("p",{className:T,style:A},E.isValidElement(P)?P:"".concat(P)),x())},Sc="recharts-tooltip-wrapper",k3={visibility:"hidden"};function R3(e){var{coordinate:t,translateX:n,translateY:r}=e;return nt(Sc,{["".concat(Sc,"-right")]:_e(n)&&t&&_e(t.x)&&n>=t.x,["".concat(Sc,"-left")]:_e(n)&&t&&_e(t.x)&&n<t.x,["".concat(Sc,"-bottom")]:_e(r)&&t&&_e(t.y)&&r>=t.y,["".concat(Sc,"-top")]:_e(r)&&t&&_e(t.y)&&r<t.y})}function uC(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:l,tooltipDimension:u,viewBox:f,viewBoxDimension:h}=e;if(s&&_e(s[r]))return s[r];var p=n[r]-u-(i>0?i:0),m=n[r]+i;if(t[r])return l[r]?p:m;var g=f[r];if(g==null)return 0;if(l[r]){var x=p,S=g;return x<S?Math.max(m,g):Math.max(p,g)}if(h==null)return 0;var A=m+u,C=g+h;return A>C?Math.max(p,g):Math.max(m,g)}function I3(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function L3(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:l,useTranslate3d:u,viewBox:f}=e,h,p,m;return l.height>0&&l.width>0&&n?(p=uC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:f,viewBoxDimension:f.width}),m=uC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:f,viewBoxDimension:f.height}),h=I3({translateX:p,translateY:m,useTranslate3d:u})):h=k3,{cssProperties:h,cssClasses:R3({translateX:p,translateY:m,coordinate:n})}}function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(n),!0).forEach(function(r){fv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fv(e,t,n){return(t=$3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $3(e){var t=B3(e,"string");return typeof t=="symbol"?t:t+""}function B3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class U3 extends E.PureComponent{constructor(){super(...arguments),fv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),fv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:l,hasPayload:u,isAnimationActive:f,offset:h,position:p,reverseDirection:m,useTranslate3d:g,viewBox:x,wrapperStyle:S,lastBoundingBox:A,innerRef:C,hasPortalFromProps:P}=this.props,{cssClasses:O,cssProperties:T}=L3({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:h,position:p,reverseDirection:m,tooltipBox:{height:A.height,width:A.width},useTranslate3d:g,viewBox:x}),j=P?{}:zd(zd({transition:f&&t?"transform ".concat(r,"ms ").concat(i):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),N=zd(zd({},j),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},S);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:N,ref:C},s)}}var z3=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),il={isSsr:z3()},vT=()=>we(e=>e.rootProps.accessibilityLayer);function lr(e){return Number.isFinite(e)}function Xs(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hv.apply(null,arguments)}function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(n),!0).forEach(function(r){G3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G3(e,t,n){return(t=H3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H3(e){var t=q3(e,"string");return typeof t=="symbol"?t:t+""}function q3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pC={curveBasisClosed:cI,curveBasisOpen:uI,curveBasis:lI,curveBumpX:KR,curveBumpY:XR,curveLinearClosed:dI,curveLinear:Jf,curveMonotoneX:fI,curveMonotoneY:hI,curveNatural:pI,curveStep:mI,curveStepAfter:yI,curveStepBefore:gI},Gd=e=>lr(e.x)&&lr(e.y),Ac=e=>e.x,Ec=e=>e.y,Y3=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Wc(e));return(n==="curveMonotone"||n==="curveBump")&&t?pC["".concat(n).concat(t==="vertical"?"Y":"X")]:pC[n]||Jf},F3=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=e,l=Y3(t,i),u=s?n.filter(Gd):n,f;if(Array.isArray(r)){var h=s?r.filter(m=>Gd(m)):r,p=u.map((m,g)=>hC(hC({},m),{},{base:h[g]}));return i==="vertical"?f=kd().y(Ec).x1(Ac).x0(m=>m.base.x):f=kd().x(Ac).y1(Ec).y0(m=>m.base.y),f.defined(Gd).curve(l),f(p)}return i==="vertical"&&_e(r)?f=kd().y(Ec).x1(Ac).x0(r):_e(r)?f=kd().x(Ac).y1(Ec).y0(r):f=d2().x(Ac).y(Ec),f.defined(Gd).curve(l),f(u)},bT=e=>{var{className:t,points:n,path:r,pathRef:i}=e;if((!n||!n.length)&&!r)return null;var s=n&&n.length?F3(e):r;return E.createElement("path",hv({},qo(e),kR(e),{className:nt("recharts-curve",t),d:s===null?void 0:s,ref:i}))},V3=["x","y","top","left","width","height","className"];function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pv.apply(null,arguments)}function mC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function K3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(n),!0).forEach(function(r){X3(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X3(e,t,n){return(t=W3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W3(e){var t=Q3(e,"string");return typeof t=="symbol"?t:t+""}function Q3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z3(e,t){if(e==null)return{};var n,r,i=J3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function J3(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var e$=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),t$=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:s=0,height:l=0,className:u}=e,f=Z3(e,V3),h=K3({x:t,y:n,top:r,left:i,width:s,height:l},f);return!_e(t)||!_e(n)||!_e(s)||!_e(l)||!_e(r)||!_e(i)?null:E.createElement("path",pv({},Ut(h,!0),{className:nt("recharts-cross",u),d:e$(t,n,s,l,r,i)}))};function n$(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function r$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(r){a$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a$(e,t,n){return(t=i$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i$(e){var t=o$(e,"string");return typeof t=="symbol"?t:t+""}function o$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jr(e,t){var n=r$({},e),r=t,i=Object.keys(t),s=i.reduce((l,u)=>(l[u]===void 0&&r[u]!==void 0&&(l[u]=r[u]),l),n);return s}function s$(){}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(n),!0).forEach(function(r){l$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l$(e,t,n){return(t=c$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c$(e){var t=u$(e,"string");return typeof t=="symbol"?t:t+""}function u$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d$=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),xT=(e,t,n)=>e.map(r=>"".concat(d$(r)," ").concat(t,"ms ").concat(n)).join(","),f$=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),Hc=(e,t)=>Object.keys(t).reduce((n,r)=>vC(vC({},n),{},{[r]:e(r,t[r])}),{});function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(n),!0).forEach(function(r){h$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h$(e,t,n){return(t=p$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p$(e){var t=m$(e,"string");return typeof t=="symbol"?t:t+""}function m$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pf=(e,t,n)=>e+(t-e)*n,mv=e=>{var{from:t,to:n}=e;return t!==n},ST=(e,t,n)=>{var r=Hc((i,s)=>{if(mv(s)){var[l,u]=e(s.from,s.to,s.velocity);return mn(mn({},s),{},{from:l,velocity:u})}return s},t);return n<1?Hc((i,s)=>mv(s)?mn(mn({},s),{},{velocity:Pf(s.velocity,r[i].velocity,n),from:Pf(s.from,r[i].from,n)}):s,t):ST(e,r,n-1)};function g$(e,t,n,r,i,s){var l,u=r.reduce((g,x)=>mn(mn({},g),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),f=()=>Hc((g,x)=>x.from,u),h=()=>!Object.values(u).filter(mv).length,p=null,m=g=>{l||(l=g);var x=g-l,S=x/n.dt;u=ST(n,u,S),i(mn(mn(mn({},e),t),f())),l=g,h()||(p=s.setTimeout(m))};return()=>(p=s.setTimeout(m),()=>{p()})}function y$(e,t,n,r,i,s,l){var u=null,f=i.reduce((m,g)=>mn(mn({},m),{},{[g]:[e[g],t[g]]}),{}),h,p=m=>{h||(h=m);var g=(m-h)/r,x=Hc((A,C)=>Pf(...C,n(g)),f);if(s(mn(mn(mn({},e),t),x)),g<1)u=l.setTimeout(p);else{var S=Hc((A,C)=>Pf(...C,n(1)),f);s(mn(mn(mn({},e),t),S))}};return()=>(u=l.setTimeout(p),()=>{u()})}const v$=(e,t,n,r,i,s)=>{var l=f$(e,t);return n.isStepper===!0?g$(e,t,n,l,i,s):y$(e,t,n,r,l,i,s)};var wf=1e-4,AT=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],ET=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),xC=(e,t)=>n=>{var r=AT(e,t);return ET(r,n)},b$=(e,t)=>n=>{var r=AT(e,t),i=[...r.map((s,l)=>s*l).slice(1),0];return ET(i,n)},SC=function(){for(var t,n,r,i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(l.length===1)switch(l[0]){case"linear":[t,r,n,i]=[0,0,1,1];break;case"ease":[t,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[t,r,n,i]=[.42,0,1,1];break;case"ease-out":[t,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[t,r,n,i]=[0,0,.58,1];break;default:{var f=l[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([t,r,n,i]=f[1].split(")")[0].split(",").map(S=>parseFloat(S)))}}else l.length===4&&([t,r,n,i]=l);var h=xC(t,n),p=xC(r,i),m=b$(t,n),g=S=>S>1?1:S<0?0:S,x=S=>{for(var A=S>1?1:S,C=A,P=0;P<8;++P){var O=h(C)-A,T=m(C);if(Math.abs(O-A)<wf||T<wf)return p(C);C=g(C-O/T)}return p(C)};return x.isStepper=!1,x},x$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,s=(l,u,f)=>{var h=-(l-u)*n,p=f*r,m=f+(h-p)*i/1e3,g=f*i/1e3+l;return Math.abs(g-u)<wf&&Math.abs(m)<wf?[u,0]:[g,m]};return s.isStepper=!0,s.dt=i,s},S$=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return SC(e);case"spring":return x$();default:if(e.split("(")[0]==="cubic-bezier")return SC(e)}return typeof e=="function"?e:null};function A$(e){var t,n=()=>null,r=!1,i=null,s=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,[f,...h]=u;if(typeof f=="number"){i=e.setTimeout(s.bind(null,h),f);return}s(f),i=e.setTimeout(s.bind(null,h));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),s(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class E${setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function C$(){return A$(new E$)}var P$=E.createContext(C$);function w$(e,t){var n=E.useContext(P$);return E.useMemo(()=>t??n(e),[e,t,n])}var O$={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},AC={t:0},ay={t:1};function hh(e){var t=jr(e,O$),{isActive:n,canBegin:r,duration:i,easing:s,begin:l,onAnimationEnd:u,onAnimationStart:f,children:h}=t,p=w$(t.animationId,t.animationManager),[m,g]=E.useState(n?AC:ay),x=E.useRef(null);return E.useEffect(()=>{n||g(ay)},[n]),E.useEffect(()=>{if(!n||!r)return s$;var S=v$(AC,ay,S$(s),i,g,p.getTimeoutController()),A=()=>{x.current=S()};return p.start([f,l,A,i,u]),()=>{p.stop(),x.current&&x.current(),u()}},[n,r,i,s,l,f,u,p]),h(m.t)}function ph(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(Uc(t)),r=E.useRef(e);return r.current!==e&&(n.current=Uc(t),r.current=e),n.current}function EC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function CC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(n),!0).forEach(function(r){T$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T$(e,t,n){return(t=_$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _$(e){var t=D$(e,"string");return typeof t=="symbol"?t:t+""}function D$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Of(){return Of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Of.apply(null,arguments)}var PC=(e,t,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),l=r>=0?1:-1,u=n>=0?1:-1,f=r>=0&&n>=0||r<0&&n<0?1:0,h;if(s>0&&i instanceof Array){for(var p=[0,0,0,0],m=0,g=4;m<g;m++)p[m]=i[m]>s?s:i[m];h="M".concat(e,",").concat(t+l*p[0]),p[0]>0&&(h+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(f,",").concat(e+u*p[0],",").concat(t)),h+="L ".concat(e+n-u*p[1],",").concat(t),p[1]>0&&(h+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(f,`,
        `).concat(e+n,",").concat(t+l*p[1])),h+="L ".concat(e+n,",").concat(t+r-l*p[2]),p[2]>0&&(h+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(f,`,
        `).concat(e+n-u*p[2],",").concat(t+r)),h+="L ".concat(e+u*p[3],",").concat(t+r),p[3]>0&&(h+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(t+r-l*p[3])),h+="Z"}else if(s>0&&i===+i&&i>0){var x=Math.min(s,i);h="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+n-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e+n,",").concat(t+l*x,`
            L `).concat(e+n,",").concat(t+r-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e+n-u*x,",").concat(t+r,`
            L `).concat(e+u*x,",").concat(t+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(f,",").concat(e,",").concat(t+r-l*x," Z")}else h="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},N$={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CT=e=>{var t=jr(e,N$),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ie=n.current.getTotalLength();ie&&i(ie)}catch{}},[]);var{x:s,y:l,width:u,height:f,radius:h,className:p}=t,{animationEasing:m,animationDuration:g,animationBegin:x,isAnimationActive:S,isUpdateAnimationActive:A}=t,C=E.useRef(u),P=E.useRef(f),O=E.useRef(s),T=E.useRef(l),j=E.useMemo(()=>({x:s,y:l,width:u,height:f,radius:h}),[s,l,u,f,h]),N=ph(j,"rectangle-");if(s!==+s||l!==+l||u!==+u||f!==+f||u===0||f===0)return null;var D=nt("recharts-rectangle",p);if(!A)return E.createElement("path",Of({},Ut(t,!0),{className:D,d:PC(s,l,u,f,h)}));var M=C.current,R=P.current,U=O.current,K=T.current,q="0px ".concat(r===-1?1:r,"px"),W="".concat(r,"px 0px"),le=xT(["strokeDasharray"],g,typeof m=="string"?m:void 0);return E.createElement(hh,{animationId:N,key:N,canBegin:r>0,duration:g,easing:m,isActive:A,begin:x},ie=>{var te=gn(M,u,ie),L=gn(R,f,ie),ee=gn(U,s,ie),he=gn(K,l,ie);n.current&&(C.current=te,P.current=L,O.current=ee,T.current=he);var Se;return S?ie>0?Se={transition:le,strokeDasharray:W}:Se={strokeDasharray:q}:Se={strokeDasharray:W},E.createElement("path",Of({},Ut(t,!0),{className:D,d:PC(ee,he,te,L,h),ref:n,style:CC(CC({},Se),t.style)}))})};function PT(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e,l=zt(t,n,r,i),u=zt(t,n,r,s);return{points:[l,u],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gv.apply(null,arguments)}var j$=(e,t)=>{var n=nn(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Hd=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:l,cornerRadius:u,cornerIsExternal:f}=e,h=u*(l?1:-1)+r,p=Math.asin(u/h)/Cf,m=f?i:i+s*p,g=zt(t,n,h,m),x=zt(t,n,r,m),S=f?i-s*p:i,A=zt(t,n,h*Math.cos(p*Cf),S);return{center:g,circleTangency:x,lineTangency:A,theta:p}},wT=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:l}=e,u=j$(s,l),f=s+u,h=zt(t,n,i,s),p=zt(t,n,i,f),m="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>f),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(r>0){var g=zt(t,n,r,s),x=zt(t,n,r,f);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=f),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},M$=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:h}=e,p=nn(h-f),{circleTangency:m,lineTangency:g,theta:x}=Hd({cx:t,cy:n,radius:i,angle:f,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:S,lineTangency:A,theta:C}=Hd({cx:t,cy:n,radius:i,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:u}),P=u?Math.abs(f-h):Math.abs(f-h)-x-C;if(P<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):wT({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:h});var O="M ".concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(P>180),",").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:T,lineTangency:j,theta:N}=Hd({cx:t,cy:n,radius:r,angle:f,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:D,lineTangency:M,theta:R}=Hd({cx:t,cy:n,radius:r,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),U=u?Math.abs(f-h):Math.abs(f-h)-N-R;if(U<0&&s===0)return"".concat(O,"L").concat(t,",").concat(n,"Z");O+="L".concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(U>180),",").concat(+(p>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(j.x,",").concat(j.y,"Z")}else O+="L".concat(t,",").concat(n,"Z");return O},k$={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},OT=e=>{var t=jr(e,k$),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:p,className:m}=t;if(s<i||h===p)return null;var g=nt("recharts-sector",m),x=s-i,S=Cn(l,x,0,!0),A;return S>0&&Math.abs(h-p)<360?A=M$({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,x/2),forceCornerRadius:u,cornerIsExternal:f,startAngle:h,endAngle:p}):A=wT({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:h,endAngle:p}),E.createElement("path",gv({},Ut(t,!0),{className:g,d:A}))};function R$(e,t,n){var r,i,s,l;if(e==="horizontal")r=t.x,s=r,i=n.top,l=n.top+n.height;else if(e==="vertical")i=t.y,l=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:u,cy:f,innerRadius:h,outerRadius:p,angle:m}=t,g=zt(u,f,h,m),x=zt(u,f,p,m);r=g.x,i=g.y,s=x.x,l=x.y}else return PT(t);return[{x:r,y:i},{x:s,y:l}]}var iy={},oy={},sy={},wC;function I$(){return wC||(wC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M2();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(sy)),sy}var OC;function L$(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I$();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(oy)),oy}var TC;function $$(){return TC||(TC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k2(),n=L$();function r(i,s,l){l&&typeof l!="number"&&t.isIterateeCall(i,s,l)&&(s=l=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),l=l===void 0?i<s?1:-1:n.toFinite(l);const u=Math.max(Math.ceil((s-i)/(l||1)),0),f=new Array(u);for(let h=0;h<u;h++)f[h]=i,i+=l;return f}e.range=r})(iy)),iy}var ly,_C;function B$(){return _C||(_C=1,ly=$$().range),ly}var U$=B$();const TT=qr(U$);function ji(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function z$(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function C0(e){let t,n,r;e.length!==2?(t=ji,n=(u,f)=>ji(e(u),f),r=(u,f)=>e(u)-f):(t=e===ji||e===z$?e:G$,n=e,r=e);function i(u,f,h=0,p=u.length){if(h<p){if(t(f,f)!==0)return p;do{const m=h+p>>>1;n(u[m],f)<0?h=m+1:p=m}while(h<p)}return h}function s(u,f,h=0,p=u.length){if(h<p){if(t(f,f)!==0)return p;do{const m=h+p>>>1;n(u[m],f)<=0?h=m+1:p=m}while(h<p)}return h}function l(u,f,h=0,p=u.length){const m=i(u,f,h,p-1);return m>h&&r(u[m-1],f)>-r(u[m],f)?m-1:m}return{left:i,center:l,right:s}}function G$(){return 0}function _T(e){return e===null?NaN:+e}function*H$(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const q$=C0(ji),tu=q$.right;C0(_T).center;class DC extends Map{constructor(t,n=V$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(NC(this,t))}has(t){return super.has(NC(this,t))}set(t,n){return super.set(Y$(this,t),n)}delete(t){return super.delete(F$(this,t))}}function NC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Y$({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function F$({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function V$(e){return e!==null&&typeof e=="object"?e.valueOf():e}function K$(e=ji){if(e===ji)return DT;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function DT(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const X$=Math.sqrt(50),W$=Math.sqrt(10),Q$=Math.sqrt(2);function Tf(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),l=s>=X$?10:s>=W$?5:s>=Q$?2:1;let u,f,h;return i<0?(h=Math.pow(10,-i)/l,u=Math.round(e*h),f=Math.round(t*h),u/h<e&&++u,f/h>t&&--f,h=-h):(h=Math.pow(10,i)*l,u=Math.round(e/h),f=Math.round(t/h),u*h<e&&++u,f*h>t&&--f),f<u&&.5<=n&&n<2?Tf(e,t,n*2):[u,f,h]}function yv(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,l]=r?Tf(t,e,n):Tf(e,t,n);if(!(s>=i))return[];const u=s-i+1,f=new Array(u);if(r)if(l<0)for(let h=0;h<u;++h)f[h]=(s-h)/-l;else for(let h=0;h<u;++h)f[h]=(s-h)*l;else if(l<0)for(let h=0;h<u;++h)f[h]=(i+h)/-l;else for(let h=0;h<u;++h)f[h]=(i+h)*l;return f}function vv(e,t,n){return t=+t,e=+e,n=+n,Tf(e,t,n)[2]}function bv(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?vv(t,e,n):vv(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function jC(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function MC(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function NT(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?DT:K$(i);r>n;){if(r-n>600){const f=r-n+1,h=t-n+1,p=Math.log(f),m=.5*Math.exp(2*p/3),g=.5*Math.sqrt(p*m*(f-m)/f)*(h-f/2<0?-1:1),x=Math.max(n,Math.floor(t-h*m/f+g)),S=Math.min(r,Math.floor(t+(f-h)*m/f+g));NT(e,t,x,S,i)}const s=e[t];let l=n,u=r;for(Cc(e,n,t),i(e[r],s)>0&&Cc(e,n,r);l<u;){for(Cc(e,l,u),++l,--u;i(e[l],s)<0;)++l;for(;i(e[u],s)>0;)--u}i(e[n],s)===0?Cc(e,n,u):(++u,Cc(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Cc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Z$(e,t,n){if(e=Float64Array.from(H$(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return MC(e);if(t>=1)return jC(e);var r,i=(r-1)*t,s=Math.floor(i),l=jC(NT(e,s).subarray(0,s+1)),u=MC(e.subarray(s+1));return l+(u-l)*(i-s)}}function J$(e,t,n=_T){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),l=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return l+(u-l)*(i-s)}}function e5(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Mr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Xa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const xv=Symbol("implicit");function P0(){var e=new DC,t=[],n=[],r=xv;function i(s){let l=e.get(s);if(l===void 0){if(r!==xv)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new DC;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return P0(t,n).unknown(r)},Mr.apply(i,arguments),i}function w0(){var e=P0().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,l,u=!1,f=0,h=0,p=.5;delete e.unknown;function m(){var g=t().length,x=i<r,S=x?i:r,A=x?r:i;s=(A-S)/Math.max(1,g-f+h*2),u&&(s=Math.floor(s)),S+=(A-S-s*(g-f))*p,l=s*(1-f),u&&(S=Math.round(S),l=Math.round(l));var C=e5(g).map(function(P){return S+s*P});return n(x?C.reverse():C)}return e.domain=function(g){return arguments.length?(t(g),m()):t()},e.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,m()):[r,i]},e.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,u=!0,m()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(g){return arguments.length?(u=!!g,m()):u},e.padding=function(g){return arguments.length?(f=Math.min(1,h=+g),m()):f},e.paddingInner=function(g){return arguments.length?(f=Math.min(1,g),m()):f},e.paddingOuter=function(g){return arguments.length?(h=+g,m()):h},e.align=function(g){return arguments.length?(p=Math.max(0,Math.min(1,g)),m()):p},e.copy=function(){return w0(t(),[r,i]).round(u).paddingInner(f).paddingOuter(h).align(p)},Mr.apply(m(),arguments)}function jT(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return jT(t())},e}function t5(){return jT(w0.apply(null,arguments).paddingInner(1))}function O0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function MT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nu(){}var qc=.7,_f=1/qc,Ys="\\s*([+-]?\\d+)\\s*",Yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",n5=/^#([0-9a-f]{3,8})$/,r5=new RegExp(`^rgb\\(${Ys},${Ys},${Ys}\\)$`),a5=new RegExp(`^rgb\\(${ua},${ua},${ua}\\)$`),i5=new RegExp(`^rgba\\(${Ys},${Ys},${Ys},${Yc}\\)$`),o5=new RegExp(`^rgba\\(${ua},${ua},${ua},${Yc}\\)$`),s5=new RegExp(`^hsl\\(${Yc},${ua},${ua}\\)$`),l5=new RegExp(`^hsla\\(${Yc},${ua},${ua},${Yc}\\)$`),kC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};O0(nu,Fc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:RC,formatHex:RC,formatHex8:c5,formatHsl:u5,formatRgb:IC,toString:IC});function RC(){return this.rgb().formatHex()}function c5(){return this.rgb().formatHex8()}function u5(){return kT(this).formatHsl()}function IC(){return this.rgb().formatRgb()}function Fc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=n5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?LC(t):n===3?new Hn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?qd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?qd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=r5.exec(e))?new Hn(t[1],t[2],t[3],1):(t=a5.exec(e))?new Hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=i5.exec(e))?qd(t[1],t[2],t[3],t[4]):(t=o5.exec(e))?qd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=s5.exec(e))?UC(t[1],t[2]/100,t[3]/100,1):(t=l5.exec(e))?UC(t[1],t[2]/100,t[3]/100,t[4]):kC.hasOwnProperty(e)?LC(kC[e]):e==="transparent"?new Hn(NaN,NaN,NaN,0):null}function LC(e){return new Hn(e>>16&255,e>>8&255,e&255,1)}function qd(e,t,n,r){return r<=0&&(e=t=n=NaN),new Hn(e,t,n,r)}function d5(e){return e instanceof nu||(e=Fc(e)),e?(e=e.rgb(),new Hn(e.r,e.g,e.b,e.opacity)):new Hn}function Sv(e,t,n,r){return arguments.length===1?d5(e):new Hn(e,t,n,r??1)}function Hn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}O0(Hn,Sv,MT(nu,{brighter(e){return e=e==null?_f:Math.pow(_f,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qc:Math.pow(qc,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Hn(ko(this.r),ko(this.g),ko(this.b),Df(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$C,formatHex:$C,formatHex8:f5,formatRgb:BC,toString:BC}));function $C(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}`}function f5(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}${_o((isNaN(this.opacity)?1:this.opacity)*255)}`}function BC(){const e=Df(this.opacity);return`${e===1?"rgb(":"rgba("}${ko(this.r)}, ${ko(this.g)}, ${ko(this.b)}${e===1?")":`, ${e})`}`}function Df(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ko(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _o(e){return e=ko(e),(e<16?"0":"")+e.toString(16)}function UC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hr(e,t,n,r)}function kT(e){if(e instanceof Hr)return new Hr(e.h,e.s,e.l,e.opacity);if(e instanceof nu||(e=Fc(e)),!e)return new Hr;if(e instanceof Hr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,u=s-i,f=(s+i)/2;return u?(t===s?l=(n-r)/u+(n<r)*6:n===s?l=(r-t)/u+2:l=(t-n)/u+4,u/=f<.5?s+i:2-s-i,l*=60):u=f>0&&f<1?0:l,new Hr(l,u,f,e.opacity)}function h5(e,t,n,r){return arguments.length===1?kT(e):new Hr(e,t,n,r??1)}function Hr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}O0(Hr,h5,MT(nu,{brighter(e){return e=e==null?_f:Math.pow(_f,e),new Hr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qc:Math.pow(qc,e),new Hr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Hn(cy(e>=240?e-240:e+120,i,r),cy(e,i,r),cy(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Hr(zC(this.h),Yd(this.s),Yd(this.l),Df(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Df(this.opacity);return`${e===1?"hsl(":"hsla("}${zC(this.h)}, ${Yd(this.s)*100}%, ${Yd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zC(e){return e=(e||0)%360,e<0?e+360:e}function Yd(e){return Math.max(0,Math.min(1,e||0))}function cy(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const T0=e=>()=>e;function p5(e,t){return function(n){return e+n*t}}function m5(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function g5(e){return(e=+e)==1?RT:function(t,n){return n-t?m5(t,n,e):T0(isNaN(t)?n:t)}}function RT(e,t){var n=t-e;return n?p5(e,n):T0(isNaN(e)?t:e)}const GC=(function e(t){var n=g5(t);function r(i,s){var l=n((i=Sv(i)).r,(s=Sv(s)).r),u=n(i.g,s.g),f=n(i.b,s.b),h=RT(i.opacity,s.opacity);return function(p){return i.r=l(p),i.g=u(p),i.b=f(p),i.opacity=h(p),i+""}}return r.gamma=e,r})(1);function y5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function v5(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function b5(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=ol(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(u){for(l=0;l<r;++l)s[l]=i[l](u);return s}}function x5(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Nf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function S5(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ol(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Av=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uy=new RegExp(Av.source,"g");function A5(e){return function(){return e}}function E5(e){return function(t){return e(t)+""}}function C5(e,t){var n=Av.lastIndex=uy.lastIndex=0,r,i,s,l=-1,u=[],f=[];for(e=e+"",t=t+"";(r=Av.exec(e))&&(i=uy.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),u[l]?u[l]+=s:u[++l]=s),(r=r[0])===(i=i[0])?u[l]?u[l]+=i:u[++l]=i:(u[++l]=null,f.push({i:l,x:Nf(r,i)})),n=uy.lastIndex;return n<t.length&&(s=t.slice(n),u[l]?u[l]+=s:u[++l]=s),u.length<2?f[0]?E5(f[0].x):A5(t):(t=f.length,function(h){for(var p=0,m;p<t;++p)u[(m=f[p]).i]=m.x(h);return u.join("")})}function ol(e,t){var n=typeof t,r;return t==null||n==="boolean"?T0(t):(n==="number"?Nf:n==="string"?(r=Fc(t))?(t=r,GC):C5:t instanceof Fc?GC:t instanceof Date?x5:v5(t)?y5:Array.isArray(t)?b5:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?S5:Nf)(e,t)}function _0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function P5(e,t){t===void 0&&(t=e,e=ol);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(l){var u=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return s[u](l-u)}}function w5(e){return function(){return e}}function jf(e){return+e}var HC=[0,1];function Mn(e){return e}function Ev(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:w5(isNaN(t)?NaN:.5)}function O5(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function T5(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=Ev(i,r),s=n(l,s)):(r=Ev(r,i),s=n(s,l)),function(u){return s(r(u))}}function _5(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Ev(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(u){var f=tu(e,u,1,r)-1;return s[f](i[f](u))}}function ru(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function mh(){var e=HC,t=HC,n=ol,r,i,s,l=Mn,u,f,h;function p(){var g=Math.min(e.length,t.length);return l!==Mn&&(l=O5(e[0],e[g-1])),u=g>2?_5:T5,f=h=null,m}function m(g){return g==null||isNaN(g=+g)?s:(f||(f=u(e.map(r),t,n)))(r(l(g)))}return m.invert=function(g){return l(i((h||(h=u(t,e.map(r),Nf)))(g)))},m.domain=function(g){return arguments.length?(e=Array.from(g,jf),p()):e.slice()},m.range=function(g){return arguments.length?(t=Array.from(g),p()):t.slice()},m.rangeRound=function(g){return t=Array.from(g),n=_0,p()},m.clamp=function(g){return arguments.length?(l=g?!0:Mn,p()):l!==Mn},m.interpolate=function(g){return arguments.length?(n=g,p()):n},m.unknown=function(g){return arguments.length?(s=g,m):s},function(g,x){return r=g,i=x,p()}}function D0(){return mh()(Mn,Mn)}function D5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Mf(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ws(e){return e=Mf(Math.abs(e)),e?e[1]:NaN}function N5(e,t){return function(n,r){for(var i=n.length,s=[],l=0,u=e[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),s.push(n.substring(i-=u,i+u)),!((f+=u+1)>r));)u=e[l=(l+1)%e.length];return s.reverse().join(t)}}function j5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var M5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vc(e){if(!(t=M5.exec(e)))throw new Error("invalid format: "+e);var t;return new N0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Vc.prototype=N0.prototype;function N0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}N0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var IT;function R5(e,t){var n=Mf(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(IT=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Mf(e,Math.max(0,t+s-1))[0]}function qC(e,t){var n=Mf(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const YC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:D5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>qC(e*100,t),r:qC,s:R5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function FC(e){return e}var VC=Array.prototype.map,KC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function I5(e){var t=e.grouping===void 0||e.thousands===void 0?FC:N5(VC.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?FC:j5(VC.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function h(m){m=Vc(m);var g=m.fill,x=m.align,S=m.sign,A=m.symbol,C=m.zero,P=m.width,O=m.comma,T=m.precision,j=m.trim,N=m.type;N==="n"?(O=!0,N="g"):YC[N]||(T===void 0&&(T=12),j=!0,N="g"),(C||g==="0"&&x==="=")&&(C=!0,g="0",x="=");var D=A==="$"?n:A==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",M=A==="$"?r:/[%p]/.test(N)?l:"",R=YC[N],U=/[defgprs%]/.test(N);T=T===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function K(q){var W=D,le=M,ie,te,L;if(N==="c")le=R(q)+le,q="";else{q=+q;var ee=q<0||1/q<0;if(q=isNaN(q)?f:R(Math.abs(q),T),j&&(q=k5(q)),ee&&+q==0&&S!=="+"&&(ee=!1),W=(ee?S==="("?S:u:S==="-"||S==="("?"":S)+W,le=(N==="s"?KC[8+IT/3]:"")+le+(ee&&S==="("?")":""),U){for(ie=-1,te=q.length;++ie<te;)if(L=q.charCodeAt(ie),48>L||L>57){le=(L===46?i+q.slice(ie+1):q.slice(ie))+le,q=q.slice(0,ie);break}}}O&&!C&&(q=t(q,1/0));var he=W.length+q.length+le.length,Se=he<P?new Array(P-he+1).join(g):"";switch(O&&C&&(q=t(Se+q,Se.length?P-le.length:1/0),Se=""),x){case"<":q=W+q+le+Se;break;case"=":q=W+Se+q+le;break;case"^":q=Se.slice(0,he=Se.length>>1)+W+q+le+Se.slice(he);break;default:q=Se+W+q+le;break}return s(q)}return K.toString=function(){return m+""},K}function p(m,g){var x=h((m=Vc(m),m.type="f",m)),S=Math.max(-8,Math.min(8,Math.floor(Ws(g)/3)))*3,A=Math.pow(10,-S),C=KC[8+S/3];return function(P){return x(A*P)+C}}return{format:h,formatPrefix:p}}var Fd,j0,LT;L5({thousands:",",grouping:[3],currency:["$",""]});function L5(e){return Fd=I5(e),j0=Fd.format,LT=Fd.formatPrefix,Fd}function $5(e){return Math.max(0,-Ws(Math.abs(e)))}function B5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ws(t)/3)))*3-Ws(Math.abs(e)))}function U5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ws(t)-Ws(e))+1}function $T(e,t,n,r){var i=bv(e,t,n),s;switch(r=Vc(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=B5(i,l))&&(r.precision=s),LT(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=U5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=$5(i))&&(r.precision=s-(r.type==="%")*2);break}}return j0(r)}function Li(e){var t=e.domain;return e.ticks=function(n){var r=t();return yv(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return $T(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],u=r[s],f,h,p=10;for(u<l&&(h=l,l=u,u=h,h=i,i=s,s=h);p-- >0;){if(h=vv(l,u,n),h===f)return r[i]=l,r[s]=u,t(r);if(h>0)l=Math.floor(l/h)*h,u=Math.ceil(u/h)*h;else if(h<0)l=Math.ceil(l*h)/h,u=Math.floor(u*h)/h;else break;f=h}return e},e}function BT(){var e=D0();return e.copy=function(){return ru(e,BT())},Mr.apply(e,arguments),Li(e)}function UT(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,jf),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return UT(e).unknown(t)},e=arguments.length?Array.from(e,jf):[0,1],Li(n)}function zT(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],l;return s<i&&(l=n,n=r,r=l,l=i,i=s,s=l),e[n]=t.floor(i),e[r]=t.ceil(s),e}function XC(e){return Math.log(e)}function WC(e){return Math.exp(e)}function z5(e){return-Math.log(-e)}function G5(e){return-Math.exp(-e)}function H5(e){return isFinite(e)?+("1e"+e):e<0?0:e}function q5(e){return e===10?H5:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Y5(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function QC(e){return(t,n)=>-e(-t,n)}function M0(e){const t=e(XC,WC),n=t.domain;let r=10,i,s;function l(){return i=Y5(r),s=q5(r),n()[0]<0?(i=QC(i),s=QC(s),e(z5,G5)):e(XC,WC),t}return t.base=function(u){return arguments.length?(r=+u,l()):r},t.domain=function(u){return arguments.length?(n(u),l()):n()},t.ticks=u=>{const f=n();let h=f[0],p=f[f.length-1];const m=p<h;m&&([h,p]=[p,h]);let g=i(h),x=i(p),S,A;const C=u==null?10:+u;let P=[];if(!(r%1)&&x-g<C){if(g=Math.floor(g),x=Math.ceil(x),h>0){for(;g<=x;++g)for(S=1;S<r;++S)if(A=g<0?S/s(-g):S*s(g),!(A<h)){if(A>p)break;P.push(A)}}else for(;g<=x;++g)for(S=r-1;S>=1;--S)if(A=g>0?S/s(-g):S*s(g),!(A<h)){if(A>p)break;P.push(A)}P.length*2<C&&(P=yv(h,p,C))}else P=yv(g,x,Math.min(x-g,C)).map(s);return m?P.reverse():P},t.tickFormat=(u,f)=>{if(u==null&&(u=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Vc(f)).precision==null&&(f.trim=!0),f=j0(f)),u===1/0)return f;const h=Math.max(1,r*u/t.ticks().length);return p=>{let m=p/s(Math.round(i(p)));return m*r<r-.5&&(m*=r),m<=h?f(p):""}},t.nice=()=>n(zT(n(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function GT(){const e=M0(mh()).domain([1,10]);return e.copy=()=>ru(e,GT()).base(e.base()),Mr.apply(e,arguments),e}function ZC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function JC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function k0(e){var t=1,n=e(ZC(t),JC(t));return n.constant=function(r){return arguments.length?e(ZC(t=+r),JC(t)):t},Li(n)}function HT(){var e=k0(mh());return e.copy=function(){return ru(e,HT()).constant(e.constant())},Mr.apply(e,arguments)}function eP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function F5(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function V5(e){return e<0?-e*e:e*e}function R0(e){var t=e(Mn,Mn),n=1;function r(){return n===1?e(Mn,Mn):n===.5?e(F5,V5):e(eP(n),eP(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Li(t)}function I0(){var e=R0(mh());return e.copy=function(){return ru(e,I0()).exponent(e.exponent())},Mr.apply(e,arguments),e}function K5(){return I0.apply(null,arguments).exponent(.5)}function tP(e){return Math.sign(e)*e*e}function X5(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function qT(){var e=D0(),t=[0,1],n=!1,r;function i(s){var l=X5(e(s));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(s){return e.invert(tP(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,jf)).map(tP)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return qT(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Mr.apply(i,arguments),Li(i)}function YT(){var e=[],t=[],n=[],r;function i(){var l=0,u=Math.max(1,t.length);for(n=new Array(u-1);++l<u;)n[l-1]=J$(e,l/u);return s}function s(l){return l==null||isNaN(l=+l)?r:t[tu(n,l)]}return s.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(ji),i()},s.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return YT().domain(e).range(t).unknown(r)},Mr.apply(s,arguments)}function FT(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function l(f){return f!=null&&f<=f?i[tu(r,f,0,n)]:s}function u(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*t-(f-n)*e)/(n+1);return l}return l.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,u()):[e,t]},l.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,u()):i.slice()},l.invertExtent=function(f){var h=i.indexOf(f);return h<0?[NaN,NaN]:h<1?[e,r[0]]:h>=n?[r[n-1],t]:[r[h-1],r[h]]},l.unknown=function(f){return arguments.length&&(s=f),l},l.thresholds=function(){return r.slice()},l.copy=function(){return FT().domain([e,t]).range(i).unknown(s)},Mr.apply(Li(l),arguments)}function VT(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[tu(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return VT().domain(e).range(t).unknown(n)},Mr.apply(i,arguments)}const dy=new Date,fy=new Date;function Wt(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const l=i(s),u=i.ceil(s);return s-l<u-s?l:u},i.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),i.range=(s,l,u)=>{const f=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<l)||!(u>0))return f;let h;do f.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<l);return f},i.filter=s=>Wt(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!s(l););else for(;--u>=0;)for(;t(l,1),!s(l););}),n&&(i.count=(s,l)=>(dy.setTime(+s),fy.setTime(+l),e(dy),e(fy),Math.floor(n(dy,fy))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?l=>r(l)%s===0:l=>i.count(0,l)%s===0):i)),i}const kf=Wt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);kf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Wt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):kf);kf.range;const $a=1e3,Or=$a*60,Ba=Or*60,Ha=Ba*24,L0=Ha*7,nP=Ha*30,hy=Ha*365,Do=Wt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$a)},(e,t)=>(t-e)/$a,e=>e.getUTCSeconds());Do.range;const $0=Wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$a)},(e,t)=>{e.setTime(+e+t*Or)},(e,t)=>(t-e)/Or,e=>e.getMinutes());$0.range;const B0=Wt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Or)},(e,t)=>(t-e)/Or,e=>e.getUTCMinutes());B0.range;const U0=Wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$a-e.getMinutes()*Or)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getHours());U0.range;const z0=Wt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getUTCHours());z0.range;const au=Wt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Or)/Ha,e=>e.getDate()-1);au.range;const gh=Wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ha,e=>e.getUTCDate()-1);gh.range;const KT=Wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ha,e=>Math.floor(e/Ha));KT.range;function Fo(e){return Wt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Or)/L0)}const yh=Fo(0),Rf=Fo(1),W5=Fo(2),Q5=Fo(3),Qs=Fo(4),Z5=Fo(5),J5=Fo(6);yh.range;Rf.range;W5.range;Q5.range;Qs.range;Z5.range;J5.range;function Vo(e){return Wt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/L0)}const vh=Vo(0),If=Vo(1),eB=Vo(2),tB=Vo(3),Zs=Vo(4),nB=Vo(5),rB=Vo(6);vh.range;If.range;eB.range;tB.range;Zs.range;nB.range;rB.range;const G0=Wt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());G0.range;const H0=Wt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());H0.range;const qa=Wt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});qa.range;const Ya=Wt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ya.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ya.range;function XT(e,t,n,r,i,s){const l=[[Do,1,$a],[Do,5,5*$a],[Do,15,15*$a],[Do,30,30*$a],[s,1,Or],[s,5,5*Or],[s,15,15*Or],[s,30,30*Or],[i,1,Ba],[i,3,3*Ba],[i,6,6*Ba],[i,12,12*Ba],[r,1,Ha],[r,2,2*Ha],[n,1,L0],[t,1,nP],[t,3,3*nP],[e,1,hy]];function u(h,p,m){const g=p<h;g&&([h,p]=[p,h]);const x=m&&typeof m.range=="function"?m:f(h,p,m),S=x?x.range(h,+p+1):[];return g?S.reverse():S}function f(h,p,m){const g=Math.abs(p-h)/m,x=C0(([,,C])=>C).right(l,g);if(x===l.length)return e.every(bv(h/hy,p/hy,m));if(x===0)return kf.every(Math.max(bv(h,p,m),1));const[S,A]=l[g/l[x-1][2]<l[x][2]/g?x-1:x];return S.every(A)}return[u,f]}const[aB,iB]=XT(Ya,H0,vh,KT,z0,B0),[oB,sB]=XT(qa,G0,yh,au,U0,$0);function py(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function my(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Pc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function lB(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,l=e.shortDays,u=e.months,f=e.shortMonths,h=wc(i),p=Oc(i),m=wc(s),g=Oc(s),x=wc(l),S=Oc(l),A=wc(u),C=Oc(u),P=wc(f),O=Oc(f),T={a:ee,A:he,b:Se,B:k,c:null,d:lP,e:lP,f:NB,g:zB,G:HB,H:TB,I:_B,j:DB,L:WT,m:jB,M:MB,p:J,q:F,Q:dP,s:fP,S:kB,u:RB,U:IB,V:LB,w:$B,W:BB,x:null,X:null,y:UB,Y:GB,Z:qB,"%":uP},j={a:ne,A:me,b:z,B:ae,c:null,d:cP,e:cP,f:KB,g:a8,G:o8,H:YB,I:FB,j:VB,L:ZT,m:XB,M:WB,p:ve,q:pe,Q:dP,s:fP,S:QB,u:ZB,U:JB,V:e8,w:t8,W:n8,x:null,X:null,y:r8,Y:i8,Z:s8,"%":uP},N={a:K,A:q,b:W,B:le,c:ie,d:oP,e:oP,f:CB,g:iP,G:aP,H:sP,I:sP,j:xB,L:EB,m:bB,M:SB,p:U,q:vB,Q:wB,s:OB,S:AB,u:hB,U:pB,V:mB,w:fB,W:gB,x:te,X:L,y:iP,Y:aP,Z:yB,"%":PB};T.x=D(n,T),T.X=D(r,T),T.c=D(t,T),j.x=D(n,j),j.X=D(r,j),j.c=D(t,j);function D(oe,ue){return function(be){var de=[],rt=-1,Le=0,Pt=oe.length,kt,ft,Fr;for(be instanceof Date||(be=new Date(+be));++rt<Pt;)oe.charCodeAt(rt)===37&&(de.push(oe.slice(Le,rt)),(ft=rP[kt=oe.charAt(++rt)])!=null?kt=oe.charAt(++rt):ft=kt==="e"?" ":"0",(Fr=ue[kt])&&(kt=Fr(be,ft)),de.push(kt),Le=rt+1);return de.push(oe.slice(Le,rt)),de.join("")}}function M(oe,ue){return function(be){var de=Pc(1900,void 0,1),rt=R(de,oe,be+="",0),Le,Pt;if(rt!=be.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(ue&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Le=my(Pc(de.y,0,1)),Pt=Le.getUTCDay(),Le=Pt>4||Pt===0?If.ceil(Le):If(Le),Le=gh.offset(Le,(de.V-1)*7),de.y=Le.getUTCFullYear(),de.m=Le.getUTCMonth(),de.d=Le.getUTCDate()+(de.w+6)%7):(Le=py(Pc(de.y,0,1)),Pt=Le.getDay(),Le=Pt>4||Pt===0?Rf.ceil(Le):Rf(Le),Le=au.offset(Le,(de.V-1)*7),de.y=Le.getFullYear(),de.m=Le.getMonth(),de.d=Le.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Pt="Z"in de?my(Pc(de.y,0,1)).getUTCDay():py(Pc(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Pt+5)%7:de.w+de.U*7-(Pt+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,my(de)):py(de)}}function R(oe,ue,be,de){for(var rt=0,Le=ue.length,Pt=be.length,kt,ft;rt<Le;){if(de>=Pt)return-1;if(kt=ue.charCodeAt(rt++),kt===37){if(kt=ue.charAt(rt++),ft=N[kt in rP?ue.charAt(rt++):kt],!ft||(de=ft(oe,be,de))<0)return-1}else if(kt!=be.charCodeAt(de++))return-1}return de}function U(oe,ue,be){var de=h.exec(ue.slice(be));return de?(oe.p=p.get(de[0].toLowerCase()),be+de[0].length):-1}function K(oe,ue,be){var de=x.exec(ue.slice(be));return de?(oe.w=S.get(de[0].toLowerCase()),be+de[0].length):-1}function q(oe,ue,be){var de=m.exec(ue.slice(be));return de?(oe.w=g.get(de[0].toLowerCase()),be+de[0].length):-1}function W(oe,ue,be){var de=P.exec(ue.slice(be));return de?(oe.m=O.get(de[0].toLowerCase()),be+de[0].length):-1}function le(oe,ue,be){var de=A.exec(ue.slice(be));return de?(oe.m=C.get(de[0].toLowerCase()),be+de[0].length):-1}function ie(oe,ue,be){return R(oe,t,ue,be)}function te(oe,ue,be){return R(oe,n,ue,be)}function L(oe,ue,be){return R(oe,r,ue,be)}function ee(oe){return l[oe.getDay()]}function he(oe){return s[oe.getDay()]}function Se(oe){return f[oe.getMonth()]}function k(oe){return u[oe.getMonth()]}function J(oe){return i[+(oe.getHours()>=12)]}function F(oe){return 1+~~(oe.getMonth()/3)}function ne(oe){return l[oe.getUTCDay()]}function me(oe){return s[oe.getUTCDay()]}function z(oe){return f[oe.getUTCMonth()]}function ae(oe){return u[oe.getUTCMonth()]}function ve(oe){return i[+(oe.getUTCHours()>=12)]}function pe(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var ue=D(oe+="",T);return ue.toString=function(){return oe},ue},parse:function(oe){var ue=M(oe+="",!1);return ue.toString=function(){return oe},ue},utcFormat:function(oe){var ue=D(oe+="",j);return ue.toString=function(){return oe},ue},utcParse:function(oe){var ue=M(oe+="",!0);return ue.toString=function(){return oe},ue}}}var rP={"-":"",_:" ",0:"0"},an=/^\s*\d+/,cB=/^%/,uB=/[\\^$*+?|[\]().{}]/g;function Ke(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function dB(e){return e.replace(uB,"\\$&")}function wc(e){return new RegExp("^(?:"+e.map(dB).join("|")+")","i")}function Oc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function fB(e,t,n){var r=an.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function hB(e,t,n){var r=an.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function pB(e,t,n){var r=an.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function mB(e,t,n){var r=an.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function gB(e,t,n){var r=an.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function aP(e,t,n){var r=an.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function iP(e,t,n){var r=an.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yB(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vB(e,t,n){var r=an.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function bB(e,t,n){var r=an.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function oP(e,t,n){var r=an.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xB(e,t,n){var r=an.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function sP(e,t,n){var r=an.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function SB(e,t,n){var r=an.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function AB(e,t,n){var r=an.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function EB(e,t,n){var r=an.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function CB(e,t,n){var r=an.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function PB(e,t,n){var r=cB.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function wB(e,t,n){var r=an.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function OB(e,t,n){var r=an.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function lP(e,t){return Ke(e.getDate(),t,2)}function TB(e,t){return Ke(e.getHours(),t,2)}function _B(e,t){return Ke(e.getHours()%12||12,t,2)}function DB(e,t){return Ke(1+au.count(qa(e),e),t,3)}function WT(e,t){return Ke(e.getMilliseconds(),t,3)}function NB(e,t){return WT(e,t)+"000"}function jB(e,t){return Ke(e.getMonth()+1,t,2)}function MB(e,t){return Ke(e.getMinutes(),t,2)}function kB(e,t){return Ke(e.getSeconds(),t,2)}function RB(e){var t=e.getDay();return t===0?7:t}function IB(e,t){return Ke(yh.count(qa(e)-1,e),t,2)}function QT(e){var t=e.getDay();return t>=4||t===0?Qs(e):Qs.ceil(e)}function LB(e,t){return e=QT(e),Ke(Qs.count(qa(e),e)+(qa(e).getDay()===4),t,2)}function $B(e){return e.getDay()}function BB(e,t){return Ke(Rf.count(qa(e)-1,e),t,2)}function UB(e,t){return Ke(e.getFullYear()%100,t,2)}function zB(e,t){return e=QT(e),Ke(e.getFullYear()%100,t,2)}function GB(e,t){return Ke(e.getFullYear()%1e4,t,4)}function HB(e,t){var n=e.getDay();return e=n>=4||n===0?Qs(e):Qs.ceil(e),Ke(e.getFullYear()%1e4,t,4)}function qB(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ke(t/60|0,"0",2)+Ke(t%60,"0",2)}function cP(e,t){return Ke(e.getUTCDate(),t,2)}function YB(e,t){return Ke(e.getUTCHours(),t,2)}function FB(e,t){return Ke(e.getUTCHours()%12||12,t,2)}function VB(e,t){return Ke(1+gh.count(Ya(e),e),t,3)}function ZT(e,t){return Ke(e.getUTCMilliseconds(),t,3)}function KB(e,t){return ZT(e,t)+"000"}function XB(e,t){return Ke(e.getUTCMonth()+1,t,2)}function WB(e,t){return Ke(e.getUTCMinutes(),t,2)}function QB(e,t){return Ke(e.getUTCSeconds(),t,2)}function ZB(e){var t=e.getUTCDay();return t===0?7:t}function JB(e,t){return Ke(vh.count(Ya(e)-1,e),t,2)}function JT(e){var t=e.getUTCDay();return t>=4||t===0?Zs(e):Zs.ceil(e)}function e8(e,t){return e=JT(e),Ke(Zs.count(Ya(e),e)+(Ya(e).getUTCDay()===4),t,2)}function t8(e){return e.getUTCDay()}function n8(e,t){return Ke(If.count(Ya(e)-1,e),t,2)}function r8(e,t){return Ke(e.getUTCFullYear()%100,t,2)}function a8(e,t){return e=JT(e),Ke(e.getUTCFullYear()%100,t,2)}function i8(e,t){return Ke(e.getUTCFullYear()%1e4,t,4)}function o8(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Zs(e):Zs.ceil(e),Ke(e.getUTCFullYear()%1e4,t,4)}function s8(){return"+0000"}function uP(){return"%"}function dP(e){return+e}function fP(e){return Math.floor(+e/1e3)}var $s,e_,t_;l8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function l8(e){return $s=lB(e),e_=$s.format,$s.parse,t_=$s.utcFormat,$s.utcParse,$s}function c8(e){return new Date(e)}function u8(e){return e instanceof Date?+e:+new Date(+e)}function q0(e,t,n,r,i,s,l,u,f,h){var p=D0(),m=p.invert,g=p.domain,x=h(".%L"),S=h(":%S"),A=h("%I:%M"),C=h("%I %p"),P=h("%a %d"),O=h("%b %d"),T=h("%B"),j=h("%Y");function N(D){return(f(D)<D?x:u(D)<D?S:l(D)<D?A:s(D)<D?C:r(D)<D?i(D)<D?P:O:n(D)<D?T:j)(D)}return p.invert=function(D){return new Date(m(D))},p.domain=function(D){return arguments.length?g(Array.from(D,u8)):g().map(c8)},p.ticks=function(D){var M=g();return e(M[0],M[M.length-1],D??10)},p.tickFormat=function(D,M){return M==null?N:h(M)},p.nice=function(D){var M=g();return(!D||typeof D.range!="function")&&(D=t(M[0],M[M.length-1],D??10)),D?g(zT(M,D)):p},p.copy=function(){return ru(p,q0(e,t,n,r,i,s,l,u,f,h))},p}function d8(){return Mr.apply(q0(oB,sB,qa,G0,yh,au,U0,$0,Do,e_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function f8(){return Mr.apply(q0(aB,iB,Ya,H0,vh,gh,z0,B0,Do,t_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bh(){var e=0,t=1,n,r,i,s,l=Mn,u=!1,f;function h(m){return m==null||isNaN(m=+m)?f:l(i===0?.5:(m=(s(m)-n)*i,u?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t]=m,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),h):[e,t]},h.clamp=function(m){return arguments.length?(u=!!m,h):u},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var x,S;return arguments.length?([x,S]=g,l=m(x,S),h):[l(0),l(1)]}}return h.range=p(ol),h.rangeRound=p(_0),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return s=m,n=m(e),r=m(t),i=n===r?0:1/(r-n),h}}function $i(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function n_(){var e=Li(bh()(Mn));return e.copy=function(){return $i(e,n_())},Xa.apply(e,arguments)}function r_(){var e=M0(bh()).domain([1,10]);return e.copy=function(){return $i(e,r_()).base(e.base())},Xa.apply(e,arguments)}function a_(){var e=k0(bh());return e.copy=function(){return $i(e,a_()).constant(e.constant())},Xa.apply(e,arguments)}function Y0(){var e=R0(bh());return e.copy=function(){return $i(e,Y0()).exponent(e.exponent())},Xa.apply(e,arguments)}function h8(){return Y0.apply(null,arguments).exponent(.5)}function i_(){var e=[],t=Mn;function n(r){if(r!=null&&!isNaN(r=+r))return t((tu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ji),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Z$(e,s/r))},n.copy=function(){return i_(t).domain(e)},Xa.apply(n,arguments)}function xh(){var e=0,t=.5,n=1,r=1,i,s,l,u,f,h=Mn,p,m=!1,g;function x(A){return isNaN(A=+A)?g:(A=.5+((A=+p(A))-s)*(r*A<r*s?u:f),h(m?Math.max(0,Math.min(1,A)):A))}x.domain=function(A){return arguments.length?([e,t,n]=A,i=p(e=+e),s=p(t=+t),l=p(n=+n),u=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,x):[e,t,n]},x.clamp=function(A){return arguments.length?(m=!!A,x):m},x.interpolator=function(A){return arguments.length?(h=A,x):h};function S(A){return function(C){var P,O,T;return arguments.length?([P,O,T]=C,h=P5(A,[P,O,T]),x):[h(0),h(.5),h(1)]}}return x.range=S(ol),x.rangeRound=S(_0),x.unknown=function(A){return arguments.length?(g=A,x):g},function(A){return p=A,i=A(e),s=A(t),l=A(n),u=i===s?0:.5/(s-i),f=s===l?0:.5/(l-s),r=s<i?-1:1,x}}function o_(){var e=Li(xh()(Mn));return e.copy=function(){return $i(e,o_())},Xa.apply(e,arguments)}function s_(){var e=M0(xh()).domain([.1,1,10]);return e.copy=function(){return $i(e,s_()).base(e.base())},Xa.apply(e,arguments)}function l_(){var e=k0(xh());return e.copy=function(){return $i(e,l_()).constant(e.constant())},Xa.apply(e,arguments)}function F0(){var e=R0(xh());return e.copy=function(){return $i(e,F0()).exponent(e.exponent())},Xa.apply(e,arguments)}function p8(){return F0.apply(null,arguments).exponent(.5)}const Nc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:w0,scaleDiverging:o_,scaleDivergingLog:s_,scaleDivergingPow:F0,scaleDivergingSqrt:p8,scaleDivergingSymlog:l_,scaleIdentity:UT,scaleImplicit:xv,scaleLinear:BT,scaleLog:GT,scaleOrdinal:P0,scalePoint:t5,scalePow:I0,scaleQuantile:YT,scaleQuantize:FT,scaleRadial:qT,scaleSequential:n_,scaleSequentialLog:r_,scaleSequentialPow:Y0,scaleSequentialQuantile:i_,scaleSequentialSqrt:h8,scaleSequentialSymlog:a_,scaleSqrt:K5,scaleSymlog:HT,scaleThreshold:VT,scaleTime:d8,scaleUtc:f8,tickFormat:$T},Symbol.toStringTag,{value:"Module"}));var Bi=e=>e.chartData,V0=Z([Bi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),K0=(e,t,n,r)=>r?V0(e):Bi(e);function Js(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(lr(t)&&lr(n))return!0}return!1}function hP(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function m8(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,s;if(lr(n))i=n;else if(typeof n=="function")return;if(lr(r))s=r;else if(typeof r=="function")return;var l=[i,s];if(Js(l))return l}}function g8(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Js(r))return hP(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,l,u;if(i==="auto")t!=null&&(l=Math.min(...t));else if(_e(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[0]))}catch{}else if(typeof i=="string"&&rC.test(i)){var f=rC.exec(i);if(f==null||t==null)l=void 0;else{var h=+f[1];l=t[0]-h}}else l=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(_e(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&aC.test(s)){var p=aC.exec(s);if(p==null||t==null)u=void 0;else{var m=+p[1];u=t[1]+m}}else u=t?.[1];var g=[l,u];if(Js(g))return t==null?g:hP(g,t,n)}}}var sl=1e9,y8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},W0,bt=!0,Dr="[DecimalError] ",Ro=Dr+"Invalid argument: ",X0=Dr+"Exponent out of range: ",ll=Math.floor,Oo=Math.pow,v8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ar,tn=1e7,pt=7,c_=9007199254740991,Lf=ll(c_/pt),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*pt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ae.dividedBy=Ae.div=function(e){return za(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,n=t.constructor;return ct(za(t,new n(e),0,1),n.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return Gt(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ar))throw Error(Dr+"NaN");if(n.s<1)throw Error(Dr+(n.s?"NaN":"-Infinity"));return n.eq(ar)?new r(0):(bt=!1,t=za(Kc(n,s),Kc(e,s),s),bt=!0,ct(t,i))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?f_(t,e):u_(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Dr+"NaN");return n.s?(bt=!1,t=za(n,e,0,1).times(e),bt=!0,n.minus(t)):ct(new r(n),i)};Ae.naturalExponential=Ae.exp=function(){return d_(this)};Ae.naturalLogarithm=Ae.ln=function(){return Kc(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?u_(t,e):f_(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ro+e);if(t=Gt(i)+1,r=i.d.length-1,n=r*pt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ae.squareRoot=Ae.sqrt=function(){var e,t,n,r,i,s,l,u=this,f=u.constructor;if(u.s<1){if(!u.s)return new f(0);throw Error(Dr+"NaN")}for(e=Gt(u),bt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ca(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=ll((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new f(t)):r=new f(i.toString()),n=f.precision,i=l=n+3;;)if(s=r,r=s.plus(za(u,s,l+2)).times(.5),ca(s.d).slice(0,l)===(t=ca(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(ct(s,n+1,0),s.times(s).eq(u)){r=s;break}}else if(t!="9999")break;l+=4}return bt=!0,ct(r,n)};Ae.times=Ae.mul=function(e){var t,n,r,i,s,l,u,f,h,p=this,m=p.constructor,g=p.d,x=(e=new m(e)).d;if(!p.s||!e.s)return new m(0);for(e.s*=p.s,n=p.e+e.e,f=g.length,h=x.length,f<h&&(s=g,g=x,x=s,l=f,f=h,h=l),s=[],l=f+h,r=l;r--;)s.push(0);for(r=h;--r>=0;){for(t=0,i=f+r;i>r;)u=s[i]+x[r]*g[i-r-1]+t,s[i--]=u%tn|0,t=u/tn|0;s[i]=(s[i]+t)%tn|0}for(;!s[--l];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,bt?ct(e,m.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(fa(e,0,sl),t===void 0?t=r.rounding:fa(t,0,8),ct(n,e+Gt(n)+1,t))};Ae.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Bo(r,!0):(fa(e,0,sl),t===void 0?t=i.rounding:fa(t,0,8),r=ct(new i(r),e+1,t),n=Bo(r,!0,e+1)),n};Ae.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?Bo(i):(fa(e,0,sl),t===void 0?t=s.rounding:fa(t,0,8),r=ct(new s(i),e+Gt(i)+1,t),n=Bo(r.abs(),!1,e+Gt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return ct(new t(e),Gt(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,n,r,i,s,l,u=this,f=u.constructor,h=12,p=+(e=new f(e));if(!e.s)return new f(ar);if(u=new f(u),!u.s){if(e.s<1)throw Error(Dr+"Infinity");return u}if(u.eq(ar))return u;if(r=f.precision,e.eq(ar))return ct(u,r);if(t=e.e,n=e.d.length-1,l=t>=n,s=u.s,l){if((n=p<0?-p:p)<=c_){for(i=new f(ar),t=Math.ceil(r/pt+4),bt=!1;n%2&&(i=i.times(u),mP(i.d,t)),n=ll(n/2),n!==0;)u=u.times(u),mP(u.d,t);return bt=!0,e.s<0?new f(ar).div(i):ct(i,r)}}else if(s<0)throw Error(Dr+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,bt=!1,i=e.times(Kc(u,r+h)),bt=!0,i=d_(i),i.s=s,i};Ae.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Gt(i),r=Bo(i,n<=s.toExpNeg||n>=s.toExpPos)):(fa(e,1,sl),t===void 0?t=s.rounding:fa(t,0,8),i=ct(new s(i),e,t),n=Gt(i),r=Bo(i,e<=n||n<=s.toExpNeg,e)),r};Ae.toSignificantDigits=Ae.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(fa(e,1,sl),t===void 0?t=r.rounding:fa(t,0,8)),ct(new r(n),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Gt(e),n=e.constructor;return Bo(e,t<=n.toExpNeg||t>=n.toExpPos)};function u_(e,t){var n,r,i,s,l,u,f,h,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),bt?ct(t,m):t;if(f=e.d,h=t.d,l=e.e,i=t.e,f=f.slice(),s=l-i,s){for(s<0?(r=f,s=-s,u=h.length):(r=h,i=l,u=f.length),l=Math.ceil(m/pt),u=l>u?l+1:u+1,s>u&&(s=u,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(u=f.length,s=h.length,u-s<0&&(s=u,r=h,h=f,f=r),n=0;s;)n=(f[--s]=f[s]+h[s]+n)/tn|0,f[s]%=tn;for(n&&(f.unshift(n),++i),u=f.length;f[--u]==0;)f.pop();return t.d=f,t.e=i,bt?ct(t,m):t}function fa(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ro+e)}function ca(e){var t,n,r,i=e.length-1,s="",l=e[0];if(i>0){for(s+=l,t=1;t<i;t++)r=e[t]+"",n=pt-r.length,n&&(s+=Oi(n)),s+=r;l=e[t],r=l+"",n=pt-r.length,n&&(s+=Oi(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var za=(function(){function e(r,i){var s,l=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+l,r[u]=s%tn|0,l=s/tn|0;return l&&r.unshift(l),r}function t(r,i,s,l){var u,f;if(s!=l)f=s>l?1:-1;else for(u=f=0;u<s;u++)if(r[u]!=i[u]){f=r[u]>i[u]?1:-1;break}return f}function n(r,i,s){for(var l=0;s--;)r[s]-=l,l=r[s]<i[s]?1:0,r[s]=l*tn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,l){var u,f,h,p,m,g,x,S,A,C,P,O,T,j,N,D,M,R,U=r.constructor,K=r.s==i.s?1:-1,q=r.d,W=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(Dr+"Division by zero");for(f=r.e-i.e,M=W.length,N=q.length,x=new U(K),S=x.d=[],h=0;W[h]==(q[h]||0);)++h;if(W[h]>(q[h]||0)&&--f,s==null?O=s=U.precision:l?O=s+(Gt(r)-Gt(i))+1:O=s,O<0)return new U(0);if(O=O/pt+2|0,h=0,M==1)for(p=0,W=W[0],O++;(h<N||p)&&O--;h++)T=p*tn+(q[h]||0),S[h]=T/W|0,p=T%W|0;else{for(p=tn/(W[0]+1)|0,p>1&&(W=e(W,p),q=e(q,p),M=W.length,N=q.length),j=M,A=q.slice(0,M),C=A.length;C<M;)A[C++]=0;R=W.slice(),R.unshift(0),D=W[0],W[1]>=tn/2&&++D;do p=0,u=t(W,A,M,C),u<0?(P=A[0],M!=C&&(P=P*tn+(A[1]||0)),p=P/D|0,p>1?(p>=tn&&(p=tn-1),m=e(W,p),g=m.length,C=A.length,u=t(m,A,g,C),u==1&&(p--,n(m,M<g?R:W,g))):(p==0&&(u=p=1),m=W.slice()),g=m.length,g<C&&m.unshift(0),n(A,m,C),u==-1&&(C=A.length,u=t(W,A,M,C),u<1&&(p++,n(A,M<C?R:W,C))),C=A.length):u===0&&(p++,A=[0]),S[h++]=p,u&&A[0]?A[C++]=q[j]||0:(A=[q[j]],C=1);while((j++<N||A[0]!==void 0)&&O--)}return S[0]||S.shift(),x.e=f,ct(x,l?s+Gt(x)+1:s)}})();function d_(e,t){var n,r,i,s,l,u,f=0,h=0,p=e.constructor,m=p.precision;if(Gt(e)>16)throw Error(X0+Gt(e));if(!e.s)return new p(ar);for(bt=!1,u=m,l=new p(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(r=Math.log(Oo(2,h))/Math.LN10*2+5|0,u+=r,n=i=s=new p(ar),p.precision=u;;){if(i=ct(i.times(e),u),n=n.times(++f),l=s.plus(za(i,n,u)),ca(l.d).slice(0,u)===ca(s.d).slice(0,u)){for(;h--;)s=ct(s.times(s),u);return p.precision=m,t==null?(bt=!0,ct(s,m)):s}s=l}}function Gt(e){for(var t=e.e*pt,n=e.d[0];n>=10;n/=10)t++;return t}function gy(e,t,n){if(t>e.LN10.sd())throw bt=!0,n&&(e.precision=n),Error(Dr+"LN10 precision limit exceeded");return ct(new e(e.LN10),t)}function Oi(e){for(var t="";e--;)t+="0";return t}function Kc(e,t){var n,r,i,s,l,u,f,h,p,m=1,g=10,x=e,S=x.d,A=x.constructor,C=A.precision;if(x.s<1)throw Error(Dr+(x.s?"NaN":"-Infinity"));if(x.eq(ar))return new A(0);if(t==null?(bt=!1,h=C):h=t,x.eq(10))return t==null&&(bt=!0),gy(A,h);if(h+=g,A.precision=h,n=ca(S),r=n.charAt(0),s=Gt(x),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(e),n=ca(x.d),r=n.charAt(0),m++;s=Gt(x),r>1?(x=new A("0."+n),s++):x=new A(r+"."+n.slice(1))}else return f=gy(A,h+2,C).times(s+""),x=Kc(new A(r+"."+n.slice(1)),h-g).plus(f),A.precision=C,t==null?(bt=!0,ct(x,C)):x;for(u=l=x=za(x.minus(ar),x.plus(ar),h),p=ct(x.times(x),h),i=3;;){if(l=ct(l.times(p),h),f=u.plus(za(l,new A(i),h)),ca(f.d).slice(0,h)===ca(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus(gy(A,h+2,C).times(s+""))),u=za(u,new A(m),h),A.precision=C,t==null?(bt=!0,ct(u,C)):u;u=f,i+=2}}function pP(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=ll(n/pt),e.d=[],r=(n+1)%pt,n<0&&(r+=pt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=pt;r<i;)e.d.push(+t.slice(r,r+=pt));t=t.slice(r),r=pt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),bt&&(e.e>Lf||e.e<-Lf))throw Error(X0+n)}else e.s=0,e.e=0,e.d=[0];return e}function ct(e,t,n){var r,i,s,l,u,f,h,p,m=e.d;for(l=1,s=m[0];s>=10;s/=10)l++;if(r=t-l,r<0)r+=pt,i=t,h=m[p=0];else{if(p=Math.ceil((r+1)/pt),s=m.length,p>=s)return e;for(h=s=m[p],l=1;s>=10;s/=10)l++;r%=pt,i=r-pt+l}if(n!==void 0&&(s=Oo(10,l-i-1),u=h/s%10|0,f=t<0||m[p+1]!==void 0||h%s,f=n<4?(u||f)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||f||n==6&&(r>0?i>0?h/Oo(10,l-i):0:m[p-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return f?(s=Gt(e),m.length=1,t=t-s-1,m[0]=Oo(10,(pt-t%pt)%pt),e.e=ll(-t/pt)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(r==0?(m.length=p,s=1,p--):(m.length=p+1,s=Oo(10,pt-r),m[p]=i>0?(h/Oo(10,l-i)%Oo(10,i)|0)*s:0),f)for(;;)if(p==0){(m[0]+=s)==tn&&(m[0]=1,++e.e);break}else{if(m[p]+=s,m[p]!=tn)break;m[p--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(bt&&(e.e>Lf||e.e<-Lf))throw Error(X0+Gt(e));return e}function f_(e,t){var n,r,i,s,l,u,f,h,p,m,g=e.constructor,x=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),bt?ct(t,x):t;if(f=e.d,m=t.d,r=t.e,h=e.e,f=f.slice(),l=h-r,l){for(p=l<0,p?(n=f,l=-l,u=m.length):(n=m,r=h,u=f.length),i=Math.max(Math.ceil(x/pt),u)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=f.length,u=m.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(f[i]!=m[i]){p=f[i]<m[i];break}l=0}for(p&&(n=f,f=m,m=n,t.s=-t.s),u=f.length,i=m.length-u;i>0;--i)f[u++]=0;for(i=m.length;i>l;){if(f[--i]<m[i]){for(s=i;s&&f[--s]===0;)f[s]=tn-1;--f[s],f[i]+=tn}f[i]-=m[i]}for(;f[--u]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(t.d=f,t.e=r,bt?ct(t,x):t):new g(0)}function Bo(e,t,n){var r,i=Gt(e),s=ca(e.d),l=s.length;return t?(n&&(r=n-l)>0?s=s.charAt(0)+"."+s.slice(1)+Oi(r):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Oi(-i-1)+s,n&&(r=n-l)>0&&(s+=Oi(r))):i>=l?(s+=Oi(i+1-l),n&&(r=n-i-1)>0&&(s=s+"."+Oi(r))):((r=i+1)<l&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(s+="."),s+=Oi(r))),e.s<0?"-"+s:s}function mP(e,t){if(e.length>t)return e.length=t,!0}function h_(e){var t,n,r;function i(s){var l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,s instanceof i){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Ro+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return pP(l,s.toString())}else if(typeof s!="string")throw Error(Ro+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,v8.test(s))pP(l,s);else throw Error(Ro+s)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=h_,i.config=i.set=b8,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function b8(e){if(!e||typeof e!="object")throw Error(Dr+"Object expected");var t,n,r,i=["precision",1,sl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(ll(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Ro+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ro+n+": "+r);return this}var W0=h_(y8);ar=new W0(1);const tt=W0;var x8=e=>e,p_={},m_=e=>e===p_,gP=e=>function t(){return arguments.length===0||arguments.length===1&&m_(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},g_=(e,t)=>e===1?t:gP(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(l=>l!==p_).length;return s>=e?t(...r):g_(e-s,gP(function(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];var h=r.map(p=>m_(p)?u.shift():p);return t(...h,...u)}))}),Sh=e=>g_(e.length,e),Cv=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},S8=Sh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),A8=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return x8;var i=n.reverse(),s=i[0],l=i.slice(1);return function(){return l.reduce((u,f)=>f(u),s(...arguments))}},Pv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),y_=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((l,u)=>{var f;return l===((f=t)===null||f===void 0?void 0:f[u])})||(t=i,n=e(...i)),n}};function v_(e){var t;return e===0?t=1:t=Math.floor(new tt(e).abs().log(10).toNumber())+1,t}function b_(e,t,n){for(var r=new tt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}Sh((e,t,n)=>{var r=+e,i=+t;return r+n*(i-r)});Sh((e,t,n)=>{var r=t-+e;return r=r||1/0,(n-e)/r});Sh((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var x_=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},S_=(e,t,n)=>{if(e.lte(0))return new tt(0);var r=v_(e.toNumber()),i=new tt(10).pow(r),s=e.div(i),l=r!==1?.05:.1,u=new tt(Math.ceil(s.div(l).toNumber())).add(n).mul(l),f=u.mul(i);return t?new tt(f.toNumber()):new tt(Math.ceil(f.toNumber()))},E8=(e,t,n)=>{var r=new tt(1),i=new tt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new tt(10).pow(v_(e)-1),i=new tt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new tt(Math.floor(e)))}else e===0?i=new tt(Math.floor((t-1)/2)):n||(i=new tt(Math.floor(e)));var l=Math.floor((t-1)/2),u=A8(S8(f=>i.add(new tt(f-l).mul(r)).toNumber()),Cv);return u(0,t)},A_=function(t,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new tt(0),tickMin:new tt(0),tickMax:new tt(0)};var l=S_(new tt(n).sub(t).div(r-1),i,s),u;t<=0&&n>=0?u=new tt(0):(u=new tt(t).add(n).div(2),u=u.sub(new tt(u).mod(l)));var f=Math.ceil(u.sub(t).div(l).toNumber()),h=Math.ceil(new tt(n).sub(u).div(l).toNumber()),p=f+h+1;return p>r?A_(t,n,r,i,s+1):(p<r&&(h=n>0?h+(r-p):h,f=n>0?f:f+(r-p)),{step:l,tickMin:u.sub(new tt(f).mul(l)),tickMax:u.add(new tt(h).mul(l))})};function C8(e){var[t,n]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[l,u]=x_([t,n]);if(l===-1/0||u===1/0){var f=u===1/0?[l,...Cv(0,r-1).map(()=>1/0)]:[...Cv(0,r-1).map(()=>-1/0),u];return t>n?Pv(f):f}if(l===u)return E8(l,r,i);var{step:h,tickMin:p,tickMax:m}=A_(l,u,s,i,0),g=b_(p,m.add(new tt(.1).mul(h)),h);return t>n?Pv(g):g}function P8(e,t){var[n,r]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=x_([n,r]);if(s===-1/0||l===1/0)return[n,r];if(s===l)return[s];var u=Math.max(t,2),f=S_(new tt(l).sub(s).div(u-1),i,0),h=[...b_(new tt(s),new tt(l),f),l];return i===!1&&(h=h.map(p=>Math.round(p))),n>r?Pv(h):h}var w8=y_(C8),O8=y_(P8),E_=e=>e.rootProps.maxBarSize,T8=e=>e.rootProps.barGap,C_=e=>e.rootProps.barCategoryGap,_8=e=>e.rootProps.barSize,iu=e=>e.rootProps.stackOffset,Q0=e=>e.options.chartName,Z0=e=>e.rootProps.syncId,P_=e=>e.rootProps.syncMethod,J0=e=>e.options.eventEmitter,Ia={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},rr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Ah=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},D8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ia.angleAxisId,includeHidden:!1,name:void 0,reversed:Ia.reversed,scale:Ia.scale,tick:Ia.tick,tickCount:void 0,ticks:void 0,type:Ia.type,unit:void 0},N8={allowDataOverflow:rr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:rr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:rr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:rr.scale,tick:rr.tick,tickCount:rr.tickCount,ticks:void 0,type:rr.type,unit:void 0},j8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ia.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ia.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ia.scale,tick:Ia.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},M8={allowDataOverflow:rr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:rr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:rr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:rr.scale,tick:rr.tick,tickCount:rr.tickCount,ticks:void 0,type:"category",unit:void 0},eb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?j8:D8,tb=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?M8:N8,Eh=e=>e.polarOptions,nb=Z([Va,Ka,Xt],sT),w_=Z([Eh,nb],(e,t)=>{if(e!=null)return Cn(e.innerRadius,t,0)}),O_=Z([Eh,nb],(e,t)=>{if(e!=null)return Cn(e.outerRadius,t,t*.8)}),k8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},T_=Z([Eh],k8);Z([eb,T_],Ah);var __=Z([nb,w_,O_],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});Z([tb,__],Ah);var D_=Z([Xe,Eh,w_,O_,Va,Ka],(e,t,n,r,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:u,startAngle:f,endAngle:h}=t;return{cx:Cn(l,i,i/2),cy:Cn(u,s,s/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:h,clockWise:!1}}}),St=(e,t)=>t,ou=(e,t,n)=>n;function rb(e){return e?.id}var Qt=e=>{var t=Xe(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},cl=e=>e.tooltip.settings.axisId,on=e=>{var t=Qt(e),n=cl(e);return su(e,t,n)},N_=Z([on],e=>e?.dataKey);function j_(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,l=new Map;return e.forEach(u=>{var f,h=(f=u.data)!==null&&f!==void 0?f:r;if(!(h==null||h.length===0)){var p=rb(u);h.forEach((m,g)=>{var x=s==null||i?g:String(vt(m,s,null)),S=vt(m,u.dataKey,0),A;l.has(x)?A=l.get(x):A={},Object.assign(A,{[p]:S}),l.set(x,A)})}}),Array.from(l.values())}function Ch(e){return e.stackId!=null&&e.dataKey!=null}function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(n),!0).forEach(function(r){R8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R8(e,t,n){return(t=I8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I8(e){var t=L8(e,"string");return typeof t=="symbol"?t:t+""}function L8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wv=[0,"auto"],tr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},M_=(e,t)=>e.cartesianAxis.xAxis[t],Ui=(e,t)=>{var n=M_(e,t);return n??tr},nr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:wv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:eu},k_=(e,t)=>e.cartesianAxis.yAxis[t],zi=(e,t)=>{var n=k_(e,t);return n??nr},$8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ab=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??$8},Mt=(e,t,n)=>{switch(t){case"xAxis":return Ui(e,n);case"yAxis":return zi(e,n);case"zAxis":return ab(e,n);case"angleAxis":return eb(e,n);case"radiusAxis":return tb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},B8=(e,t,n)=>{switch(t){case"xAxis":return Ui(e,n);case"yAxis":return zi(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},su=(e,t,n)=>{switch(t){case"xAxis":return Ui(e,n);case"yAxis":return zi(e,n);case"angleAxis":return eb(e,n);case"radiusAxis":return tb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},R_=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function ib(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var ob=e=>e.graphicalItems.cartesianItems,U8=Z([St,ou],ib),sb=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),lu=Z([ob,Mt,U8],sb),I_=Z([lu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Ch)),L_=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),$_=Z([lu],L_),lb=e=>e.map(t=>t.data).filter(Boolean).flat(1),z8=Z([lu],lb),cb=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},ub=Z([z8,K0],cb),db=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:vt(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:vt(i,r)}))):e.map(r=>({value:r})),Ph=Z([ub,Mt,lu],db);function B_(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ko(e){return e.filter(t=>da(t)||t instanceof Date).map(Number).filter(t=>or(t)===!1)}function G8(e,t,n){return!n||typeof t!="number"||or(t)?[]:n.length?Ko(n.flatMap(r=>{var i=vt(e,r.dataKey),s,l;if(Array.isArray(i)?[s,l]=i:s=l=i,!(!lr(s)||!lr(l)))return[t-s,t+l]})):[]}var H8=Z([I_,K0,on],j_),U_=(e,t,n)=>{var r={},i=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[l,u]=s,f=u.map(rb);return[l,{stackedData:V4(e,f,n),graphicalItems:u}]}))},Ov=Z([H8,I_,iu],U_),z_=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(n!=="zAxis"){var s=Z4(e,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},q8=Z([Ov,Bi,St],z_),G_=(e,t,n,r,i)=>n.length>0?e.flatMap(s=>n.flatMap(l=>{var u,f,h=(u=r[l.id])===null||u===void 0?void 0:u.filter(m=>B_(i,m)),p=vt(s,(f=t.dataKey)!==null&&f!==void 0?f:l.dataKey);return{value:p,errorDomain:G8(s,p,h)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:vt(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),wh=e=>e.errorBars,H_=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>B_(n,r));Z([$_,wh,St],H_);var Y8=Z([ub,Mt,$_,wh,St],G_);function F8(e){var{value:t}=e;if(da(t)||t instanceof Date)return t}var vP=e=>{var t=e.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Ko(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},V8=(e,t,n)=>{var r=e.map(F8).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&t2(r))?TT(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},fb=e=>{var t;if(e==null||!("domain"in e))return wv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Ko(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:wv},Bf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),l=Math.min(...s),u=Math.max(...s);return[l,u]}},q_=e=>e.referenceElements.dots,ul=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),K8=Z([q_,St,ou],ul),Y_=e=>e.referenceElements.areas,X8=Z([Y_,St,ou],ul),F_=e=>e.referenceElements.lines,W8=Z([F_,St,ou],ul),V_=(e,t)=>{var n=Ko(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Q8=Z(K8,St,V_),K_=(e,t)=>{var n=Ko(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Z8=Z([X8,St],K_),X_=(e,t)=>{var n=Ko(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},J8=Z(W8,St,X_),e6=Z(Q8,J8,Z8,(e,t,n)=>Bf(e,n,t)),W_=Z([Mt],fb),hb=(e,t,n,r,i,s,l)=>{var u=m8(t,e.allowDataOverflow);if(u!=null)return u;var f=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",h=f?Bf(n,i,vP(r)):Bf(i,vP(r));return g8(t,h,e.allowDataOverflow)},t6=Z([Mt,W_,q8,Y8,e6,Xe,St],hb),n6=[0,1],pb=(e,t,n,r,i,s,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:u,type:f}=e,h=Yo(t,s);return h&&u==null?TT(0,n.length):f==="category"?V8(r,e,h):i==="expand"?n6:l}},mb=Z([Mt,Xe,ub,Ph,iu,St,t6],pb),Q_=(e,t,n,r,i)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Wc(s));return u in Nc?u:"point"}}},dl=Z([Mt,Xe,R_,Q0,St],Q_);function r6(e){if(e!=null){if(e in Nc)return Nc[e]();var t="scale".concat(Wc(e));if(t in Nc)return Nc[t]()}}function gb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=r6(t);if(i!=null){var s=i.domain(n).range(r);return G4(s),s}}}var yb=(e,t,n)=>{var r=fb(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Js(e))return w8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Js(e))return O8(e,t.tickCount,t.allowDecimals)}},vb=Z([mb,su,dl],yb),bb=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Js(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],l=t[1],u=n[n.length-1];return[Math.min(i,s),Math.max(l,u)]}return t},a6=Z([Mt,mb,vb,St],bb),i6=Z(Ph,Mt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(Ko(e.map(u=>u.value))).sort((u,f)=>u-f);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var l=r[s+1]-r[s];n=Math.min(n,l)}return n/i}}),Z_=Z(i6,Xe,C_,Xt,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!lr(e))return 0;var s=t==="vertical"?r.height:r.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var l=Cn(n,e*s),u=e*s/2;return u-l-(u-l)/s*l}return 0}),o6=(e,t)=>{var n=Ui(e,t);return n==null||typeof n.padding!="string"?0:Z_(e,"xAxis",t,n.padding)},s6=(e,t)=>{var n=zi(e,t);return n==null||typeof n.padding!="string"?0:Z_(e,"yAxis",t,n.padding)},l6=Z(Ui,o6,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),c6=Z(zi,s6,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),u6=Z([Xt,l6,dh,uh,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),d6=Z([Xt,Xe,c6,dh,uh,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:l}=i;return s?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),cu=(e,t,n,r)=>{var i;switch(t){case"xAxis":return u6(e,n,r);case"yAxis":return d6(e,n,r);case"zAxis":return(i=ab(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return T_(e);case"radiusAxis":return __(e,n);default:return}},J_=Z([Mt,cu],Ah),fl=Z([Mt,dl,a6,J_],gb);Z([lu,wh,St],H_);function eD(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Oh=(e,t)=>t,Th=(e,t,n)=>n,f6=Z(lh,Oh,Th,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(eD)),h6=Z(ch,Oh,Th,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(eD)),tD=(e,t)=>({width:e.width,height:t.height}),p6=(e,t)=>{var n=typeof t.width=="number"?t.width:eu;return{width:n,height:e.height}},nD=Z(Xt,Ui,tD),m6=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},g6=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},y6=Z(Ka,Xt,f6,Oh,Th,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var f=tD(t,u);l==null&&(l=m6(t,r,e));var h=r==="top"&&!i||r==="bottom"&&i;s[u.id]=l-Number(h)*f.height,l+=(h?-1:1)*f.height}),s}),v6=Z(Va,Xt,h6,Oh,Th,(e,t,n,r,i)=>{var s={},l;return n.forEach(u=>{var f=p6(t,u);l==null&&(l=g6(t,r,e));var h=r==="left"&&!i||r==="right"&&i;s[u.id]=l-Number(h)*f.width,l+=(h?-1:1)*f.width}),s}),b6=(e,t)=>{var n=Xt(e),r=Ui(e,t);if(r!=null){var i=y6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:n.left,y:0}:{x:n.left,y:s}}},x6=(e,t)=>{var n=Xt(e),r=zi(e,t);if(r!=null){var i=v6(e,r.orientation,r.mirror),s=i[t];return s==null?{x:0,y:n.top}:{x:s,y:n.top}}},rD=Z(Xt,zi,(e,t)=>{var n=typeof t.width=="number"?t.width:eu;return{width:n,height:e.height}}),bP=(e,t,n)=>{switch(t){case"xAxis":return nD(e,n).width;case"yAxis":return rD(e,n).height;default:return}},aD=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:l}=n,u=Yo(e,r),f=t.map(h=>h.value);if(l&&u&&s==="category"&&i&&t2(f))return f}},xb=Z([Xe,Ph,Mt,St],aD),iD=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,l=Yo(e,r);if(l&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},Sb=Z([Xe,Ph,su,St],iD),xP=Z([Xe,B8,dl,fl,xb,Sb,cu,vb,St],(e,t,n,r,i,s,l,u,f)=>{if(t==null)return null;var h=Yo(e,f);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:f,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:l,realScaleType:n,scale:r}}),S6=(e,t,n,r,i,s,l,u,f)=>{if(!(t==null||r==null)){var h=Yo(e,f),{type:p,ticks:m,tickCount:g}=t,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,S=p==="category"&&r.bandwidth?r.bandwidth()/x:0;S=f==="angleAxis"&&s!=null&&s.length>=2?nn(s[0]-s[1])*2*S:S;var A=m||i;if(A){var C=A.map((P,O)=>{var T=l?l.indexOf(P):P;return{index:O,coordinate:r(T)+S,value:P,offset:S}});return C.filter(P=>!or(P.coordinate))}return h&&u?u.map((P,O)=>({coordinate:r(P)+S,value:P,index:O,offset:S})):r.ticks?r.ticks(g).map(P=>({coordinate:r(P)+S,value:P,offset:S})):r.domain().map((P,O)=>({coordinate:r(P)+S,value:l?l[P]:P,index:O,offset:S}))}},oD=Z([Xe,su,dl,fl,vb,cu,xb,Sb,St],S6),A6=(e,t,n,r,i,s,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var u=Yo(e,l),{tickCount:f}=t,h=0;return h=l==="angleAxis"&&r?.length>=2?nn(r[0]-r[1])*2*h:h,u&&s?s.map((p,m)=>({coordinate:n(p)+h,value:p,index:m,offset:h})):n.ticks?n.ticks(f).map(p=>({coordinate:n(p)+h,value:p,offset:h})):n.domain().map((p,m)=>({coordinate:n(p)+h,value:i?i[p]:p,index:m,offset:h}))}},el=Z([Xe,su,fl,cu,xb,Sb,St],A6),tl=Z(Mt,fl,(e,t)=>{if(!(e==null||t==null))return $f($f({},e),{},{scale:t})}),E6=Z([Mt,dl,mb,J_],gb);Z((e,t,n)=>ab(e,n),E6,(e,t)=>{if(!(e==null||t==null))return $f($f({},e),{},{scale:t})});var C6=Z([Xe,lh,ch],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),sD=e=>e.options.defaultTooltipEventType,lD=e=>e.options.validateTooltipEventTypes;function cD(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function Ab(e,t){var n=sD(e),r=lD(e);return cD(t,n,r)}function P6(e){return we(t=>Ab(t,e))}var uD=(e,t)=>{var n,r=Number(t);if(!(or(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},w6=e=>e.tooltip.settings,_i={active:!1,index:null,dataKey:void 0,coordinate:void 0},O6={itemInteraction:{click:_i,hover:_i},axisInteraction:{click:_i,hover:_i},keyboardInteraction:_i,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},dD=cr({name:"tooltip",initialState:O6,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Ua(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:T6,removeTooltipEntrySettings:_6,setTooltipSettingsState:D6,setActiveMouseOverItemIndex:fD,mouseLeaveItem:N6,mouseLeaveChart:hD,setActiveClickItemIndex:j6,setMouseOverAxisIndex:pD,setMouseClickAxisIndex:M6,setSyncInteraction:Tv,setKeyboardInteraction:_v}=dD.actions,k6=dD.reducer;function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(n),!0).forEach(function(r){R6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R6(e,t,n){return(t=I6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I6(e){var t=L6(e,"string");return typeof t=="symbol"?t:t+""}function L6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $6(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function B6(e){return e.index!=null}var mD=(e,t,n,r)=>{if(t==null)return _i;var i=$6(e,t,n);if(i==null)return _i;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(B6(i)){if(s)return Vd(Vd({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Vd(Vd({},_i),{},{coordinate:i.coordinate})},Eb=(e,t)=>{var n=e?.index;if(n==null)return null;var r=Number(n);if(!lr(r))return n;var i=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(i,Math.min(r,s)))},gD=(e,t,n,r,i,s,l,u)=>{if(!(s==null||u==null)){var f=l[0],h=f==null?void 0:u(f.positions,s);if(h!=null)return h;var p=i?.[Number(s)];if(p)switch(n){case"horizontal":return{x:p.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:p.coordinate}}}},yD=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===i})},uu=e=>e.options.tooltipPayloadSearcher,hl=e=>e.tooltip;function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function EP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(n),!0).forEach(function(r){U6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U6(e,t,n){return(t=z6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z6(e){var t=G6(e,"string");return typeof t=="symbol"?t:t+""}function G6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H6(e,t){return e??t}var vD=(e,t,n,r,i,s,l)=>{if(!(t==null||s==null)){var{chartData:u,computedData:f,dataStartIndex:h,dataEndIndex:p}=n,m=[];return e.reduce((g,x)=>{var S,{dataDefinedOnItem:A,settings:C}=x,P=H6(A,u),O=Array.isArray(P)?lT(P,h,p):P,T=(S=C?.dataKey)!==null&&S!==void 0?S:r,j=C?.nameKey,N;if(r&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?N=NR(O,r,i):N=s(O,t,f,j),Array.isArray(N))N.forEach(M=>{var R=EP(EP({},C),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});g.push(iC({tooltipEntrySettings:R,dataKey:M.dataKey,payload:M.payload,value:vt(M.payload,M.dataKey),name:M.name}))});else{var D;g.push(iC({tooltipEntrySettings:C,dataKey:T,payload:N,value:vt(N,T),name:(D=vt(N,j))!==null&&D!==void 0?D:C?.name}))}return g},m)}},Cb=Z([on,Xe,R_,Q0,Qt],Q_),q6=Z([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Y6=Z([Qt,cl],ib),du=Z([q6,on,Y6],sb),F6=Z([du],e=>e.filter(Ch)),V6=Z([du],lb),pl=Z([V6,Bi],cb),K6=Z([F6,Bi,on],j_),Pb=Z([pl,on,du],db),X6=Z([on],fb),W6=Z([du],e=>e.filter(Ch)),Q6=Z([K6,W6,iu],U_),Z6=Z([Q6,Bi,Qt],z_),J6=Z([du],L_),eU=Z([pl,on,J6,wh,Qt],G_),tU=Z([q_,Qt,cl],ul),nU=Z([tU,Qt],V_),rU=Z([Y_,Qt,cl],ul),aU=Z([rU,Qt],K_),iU=Z([F_,Qt,cl],ul),oU=Z([iU,Qt],X_),sU=Z([nU,oU,aU],Bf),lU=Z([on,X6,Z6,eU,sU,Xe,Qt],hb),bD=Z([on,Xe,pl,Pb,iu,Qt,lU],pb),cU=Z([bD,on,Cb],yb),uU=Z([on,bD,cU,Qt],bb),xD=e=>{var t=Qt(e),n=cl(e),r=!1;return cu(e,t,n,r)},SD=Z([on,xD],Ah),AD=Z([on,Cb,uU,SD],gb),dU=Z([Xe,Pb,on,Qt],aD),fU=Z([Xe,Pb,on,Qt],iD),hU=(e,t,n,r,i,s,l,u)=>{if(t){var{type:f}=t,h=Yo(e,u);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=f==="category"&&r.bandwidth?r.bandwidth()/p:0;return m=u==="angleAxis"&&i!=null&&i?.length>=2?nn(i[0]-i[1])*2*m:m,h&&l?l.map((g,x)=>({coordinate:r(g)+m,value:g,index:x,offset:m})):r.domain().map((g,x)=>({coordinate:r(g)+m,value:s?s[g]:g,index:x,offset:m}))}}},Wa=Z([Xe,on,Cb,AD,xD,dU,fU,Qt],hU),wb=Z([sD,lD,w6],(e,t,n)=>cD(n.shared,e,t)),ED=e=>e.tooltip.settings.trigger,Ob=e=>e.tooltip.settings.defaultIndex,_h=Z([hl,wb,ED,Ob],mD),Uo=Z([_h,pl],Eb),CD=Z([Wa,Uo],uD),PD=Z([_h],e=>{if(e)return e.dataKey}),wD=Z([hl,wb,ED,Ob],yD),pU=Z([Va,Ka,Xe,Xt,Wa,Ob,wD,uu],gD),mU=Z([_h,pU],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),gU=Z([_h],e=>e.active),yU=Z([wD,Uo,Bi,N_,CD,uu,wb],vD);Z([yU],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function CP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(n),!0).forEach(function(r){vU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vU(e,t,n){return(t=bU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bU(e){var t=xU(e,"string");return typeof t=="symbol"?t:t+""}function xU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SU=()=>we(on),AU=()=>{var e=SU(),t=we(Wa),n=we(AD);return y0(PP(PP({},e),{},{scale:n}),t)},EU=()=>we(Q0),Tb=(e,t)=>t,OD=(e,t,n)=>n,_b=(e,t,n,r)=>r,CU=Z(Wa,e=>th(e,t=>t.coordinate)),Db=Z([hl,Tb,OD,_b],mD),TD=Z([Db,pl],Eb),PU=(e,t,n)=>{if(t!=null){var r=hl(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},_D=Z([hl,Tb,OD,_b],yD),Uf=Z([Va,Ka,Xe,Xt,Wa,_b,_D,uu],gD),wU=Z([Db,Uf],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),DD=Z(Wa,TD,uD),OU=Z([_D,TD,Bi,N_,DD,uu,Tb],vD),TU=Z([Db],e=>({isActive:e.active,activeIndex:e.index})),_U=(e,t,n,r,i,s,l,u)=>{if(!(!e||!t||!r||!i||!s)){var f=J4(e.chartX,e.chartY,t,n,u);if(f){var h=t3(f,t),p=U4(h,l,s,r,i),m=e3(t,s,p,f);return{activeIndex:String(p),activeCoordinate:m}}}};function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dv.apply(null,arguments)}function wP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(n),!0).forEach(function(r){DU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DU(e,t,n){return(t=NU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NU(e){var t=jU(e,"string");return typeof t=="symbol"?t:t+""}function jU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MU(e){var{coordinate:t,payload:n,index:r,offset:i,tooltipAxisBandSize:s,layout:l,cursor:u,tooltipEventType:f,chartName:h}=e,p=t,m=n,g=r;if(!u||!p||h!=="ScatterChart"&&f!=="axis")return null;var x,S;if(h==="ScatterChart")x=p,S=t$;else if(h==="BarChart")x=n$(l,p,i,s),S=CT;else if(l==="radial"){var{cx:A,cy:C,radius:P,startAngle:O,endAngle:T}=PT(p);x={cx:A,cy:C,startAngle:O,endAngle:T,innerRadius:P,outerRadius:P},S=OT}else x={points:R$(l,p,i)},S=bT;var j=typeof u=="object"&&"className"in u?u.className:void 0,N=Kd(Kd(Kd(Kd({stroke:"#ccc",pointerEvents:"none"},i),x),Ut(u,!1)),{},{payload:m,payloadIndex:g,className:nt("recharts-tooltip-cursor",j)});return E.isValidElement(u)?E.cloneElement(u,N):E.createElement(S,N)}function kU(e){var t=AU(),n=pT(),r=A0(),i=EU();return E.createElement(MU,Dv({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var ND=E.createContext(null),RU=()=>E.useContext(ND),yy={exports:{}},OP;function IU(){return OP||(OP=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,h,p){this.fn=f,this.context=h,this.once=p||!1}function s(f,h,p,m,g){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,m||f,g),S=n?n+h:h;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],x]:f._events[S].push(x):(f._events[S]=x,f._eventsCount++),f}function l(f,h){--f._eventsCount===0?f._events=new r:delete f._events[h]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)t.call(p,m)&&h.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=n?n+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,x=m.length,S=new Array(x);g<x;g++)S[g]=m[g].fn;return S},u.prototype.listenerCount=function(h){var p=n?n+h:h,m=this._events[p];return m?m.fn?1:m.length:0},u.prototype.emit=function(h,p,m,g,x,S){var A=n?n+h:h;if(!this._events[A])return!1;var C=this._events[A],P=arguments.length,O,T;if(C.fn){switch(C.once&&this.removeListener(h,C.fn,void 0,!0),P){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,p),!0;case 3:return C.fn.call(C.context,p,m),!0;case 4:return C.fn.call(C.context,p,m,g),!0;case 5:return C.fn.call(C.context,p,m,g,x),!0;case 6:return C.fn.call(C.context,p,m,g,x,S),!0}for(T=1,O=new Array(P-1);T<P;T++)O[T-1]=arguments[T];C.fn.apply(C.context,O)}else{var j=C.length,N;for(T=0;T<j;T++)switch(C[T].once&&this.removeListener(h,C[T].fn,void 0,!0),P){case 1:C[T].fn.call(C[T].context);break;case 2:C[T].fn.call(C[T].context,p);break;case 3:C[T].fn.call(C[T].context,p,m);break;case 4:C[T].fn.call(C[T].context,p,m,g);break;default:if(!O)for(N=1,O=new Array(P-1);N<P;N++)O[N-1]=arguments[N];C[T].fn.apply(C[T].context,O)}}return!0},u.prototype.on=function(h,p,m){return s(this,h,p,m,!1)},u.prototype.once=function(h,p,m){return s(this,h,p,m,!0)},u.prototype.removeListener=function(h,p,m,g){var x=n?n+h:h;if(!this._events[x])return this;if(!p)return l(this,x),this;var S=this._events[x];if(S.fn)S.fn===p&&(!g||S.once)&&(!m||S.context===m)&&l(this,x);else{for(var A=0,C=[],P=S.length;A<P;A++)(S[A].fn!==p||g&&!S[A].once||m&&S[A].context!==m)&&C.push(S[A]);C.length?this._events[x]=C.length===1?C[0]:C:l(this,x)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&l(this,p)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(yy)),yy.exports}var LU=IU();const $U=qr(LU);var Xc=new $U,Nv="recharts.syncEvent.tooltip",TP="recharts.syncEvent.brush";function jD(e,t){if(t){var n=Number.parseInt(t,10);if(!or(n))return e?.[n]}}var BU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},MD=cr({name:"options",initialState:BU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),UU=MD.reducer,{createEventEmitter:zU}=MD.actions;function GU(e){return e.tooltip.syncInteraction}var HU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},kD=cr({name:"chartData",initialState:HU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:_P,setDataStartEndIndexes:qU,setComputedData:mV}=kD.actions,YU=kD.reducer,FU=["x","y"];function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Co(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(n),!0).forEach(function(r){VU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VU(e,t,n){return(t=KU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KU(e){var t=XU(e,"string");return typeof t=="symbol"?t:t+""}function XU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WU(e,t){if(e==null)return{};var n,r,i=QU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function QU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var RD=()=>{};function ZU(){var e=we(Z0),t=we(J0),n=Ct(),r=we(P_),i=we(Wa),s=A0(),l=b0(),u=we(f=>f.rootProps.className);E.useEffect(()=>{if(e==null)return RD;var f=(h,p,m)=>{if(t!==m&&e===h){if(r==="index"){var g;if(l&&p!==null&&p!==void 0&&(g=p.payload)!==null&&g!==void 0&&g.coordinate){var x=p.payload.coordinate,{x:S,y:A}=x,C=WU(x,FU),P=Co(Co(Co({},C),typeof S=="number"&&{x:Math.max(l.x,Math.min(S,l.x+l.width))}),typeof A=="number"&&{y:Math.max(l.y,Math.min(A,l.y+l.height))}),O=Co(Co({},p),{},{payload:Co(Co({},p.payload),{},{coordinate:P})});n(O)}else n(p);return}if(i!=null){var T;if(typeof r=="function"){var j={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},N=r(i,j);T=i[N]}else r==="value"&&(T=i.find(le=>String(le.value)===p.payload.label));var{coordinate:D}=p.payload;if(T==null||p.payload.active===!1||D==null||l==null){n(Tv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:M,y:R}=D,U=Math.min(M,l.x+l.width),K=Math.min(R,l.y+l.height),q={x:s==="horizontal"?T.coordinate:U,y:s==="horizontal"?K:T.coordinate},W=Tv({active:p.payload.active,coordinate:q,dataKey:p.payload.dataKey,index:String(T.index),label:p.payload.label});n(W)}}};return Xc.on(Nv,f),()=>{Xc.off(Nv,f)}},[u,n,t,e,r,i,s,l])}function JU(){var e=we(Z0),t=we(J0),n=Ct();E.useEffect(()=>{if(e==null)return RD;var r=(i,s,l)=>{t!==l&&e===i&&n(qU(s))};return Xc.on(TP,r),()=>{Xc.off(TP,r)}},[n,t,e])}function ez(){var e=Ct();E.useEffect(()=>{e(zU())},[e]),ZU(),JU()}function tz(e,t,n,r,i,s){var l=we(g=>PU(g,e,t)),u=we(J0),f=we(Z0),h=we(P_),p=we(GU),m=p?.active;E.useEffect(()=>{if(!m&&f!=null&&u!=null){var g=Tv({active:s,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r});Xc.emit(Nv,f,g,u)}},[m,n,l,i,r,u,f,h,s])}function NP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(n),!0).forEach(function(r){nz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nz(e,t,n){return(t=rz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rz(e){var t=az(e,"string");return typeof t=="symbol"?t:t+""}function az(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iz(e){return e.dataKey}function oz(e,t){return E.isValidElement(e)?E.cloneElement(e,t):typeof e=="function"?E.createElement(e,t):E.createElement(M3,t)}var MP=[],sz={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!il.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function vy(e){var t=jr(e,sz),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:l,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:p,position:m,reverseDirection:g,useTranslate3d:x,wrapperStyle:S,cursor:A,shared:C,trigger:P,defaultIndex:O,portal:T,axisId:j}=t,N=Ct(),D=typeof O=="number"?String(O):O;E.useEffect(()=>{N(D6({shared:C,trigger:P,axisId:j,active:n,defaultIndex:D}))},[N,C,P,j,n,D]);var M=b0(),R=vT(),U=P6(C),{activeIndex:K,isActive:q}=we(z=>TU(z,U,P,D)),W=we(z=>OU(z,U,P,D)),le=we(z=>DD(z,U,P,D)),ie=we(z=>wU(z,U,P,D)),te=W,L=RU(),ee=n??q,[he,Se]=I2([te,ee]),k=U==="axis"?le:void 0;tz(U,P,ie,k,K,ee);var J=T??L;if(J==null)return null;var F=te??MP;ee||(F=MP),u&&F.length&&(F=N2(te.filter(z=>z.value!=null&&(z.hide!==!0||t.includeHidden)),p,iz));var ne=F.length>0,me=E.createElement(U3,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:f,active:ee,coordinate:ie,hasPayload:ne,offset:h,position:m,reverseDirection:g,useTranslate3d:x,viewBox:M,wrapperStyle:S,lastBoundingBox:he,innerRef:Se,hasPortalFromProps:!!T},oz(l,jP(jP({},t),{},{payload:F,label:k,active:ee,coordinate:ie,accessibilityLayer:R})));return E.createElement(E.Fragment,null,a2.createPortal(me,J),ee&&E.createElement(kU,{cursor:A,tooltipEventType:U,coordinate:ie,payload:te,index:K}))}var by={},xy={},Sy={},kP;function lz(){return kP||(kP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:s}={}){let l,u=null;const f=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{u!==null&&(n.apply(l,u),l=void 0,u=null)},m=()=>{h&&p(),A()};let g=null;const x=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,m()},r)},S=()=>{g!==null&&(clearTimeout(g),g=null)},A=()=>{S(),l=void 0,u=null},C=()=>{p()},P=function(...O){if(i?.aborted)return;l=this,u=O;const T=g==null;x(),f&&T&&p()};return P.schedule=x,P.cancel=A,P.flush=C,i?.addEventListener("abort",A,{once:!0}),P}e.debounce=t})(Sy)),Sy}var RP;function cz(){return RP||(RP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lz();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:u=!0,maxWait:f}=s,h=Array(2);l&&(h[0]="leading"),u&&(h[1]="trailing");let p,m=null;const g=t.debounce(function(...A){p=r.apply(this,A),m=null},i,{edges:h}),x=function(...A){return f!=null&&(m===null&&(m=Date.now()),Date.now()-m>=f)?(p=r.apply(this,A),m=Date.now(),g.cancel(),g.schedule(),p):(g.apply(this,A),p)},S=()=>(g.flush(),p);return x.cancel=g.cancel,x.flush=S,x}e.debounce=n})(xy)),xy}var IP;function uz(){return IP||(IP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cz();function n(r,i=0,s={}){const{leading:l=!0,trailing:u=!0}=s;return t.debounce(r,i,{leading:l,maxWait:i,trailing:u})}e.throttle=n})(by)),by}var Ay,LP;function dz(){return LP||(LP=1,Ay=uz().throttle),Ay}var fz=dz();const hz=qr(fz);var Rc=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function $P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ey(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(n),!0).forEach(function(r){pz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pz(e,t,n){return(t=mz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mz(e){var t=gz(e,"string");return typeof t=="symbol"?t:t+""}function gz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cy=E.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:l=0,minHeight:u,maxHeight:f,children:h,debounce:p=0,id:m,className:g,onResize:x,style:S={}}=e,A=E.useRef(null),C=E.useRef();C.current=x,E.useImperativeHandle(t,()=>A.current);var[P,O]=E.useState({containerWidth:r.width,containerHeight:r.height}),T=E.useCallback((N,D)=>{O(M=>{var R=Math.round(N),U=Math.round(D);return M.containerWidth===R&&M.containerHeight===U?M:{containerWidth:R,containerHeight:U}})},[]);E.useEffect(()=>{var N=U=>{var K,{width:q,height:W}=U[0].contentRect;T(q,W),(K=C.current)===null||K===void 0||K.call(C,q,W)};p>0&&(N=hz(N,p,{trailing:!0,leading:!1}));var D=new ResizeObserver(N),{width:M,height:R}=A.current.getBoundingClientRect();return T(M,R),D.observe(A.current),()=>{D.disconnect()}},[T,p]);var j=E.useMemo(()=>{var{containerWidth:N,containerHeight:D}=P;if(N<0||D<0)return null;Rc(To(i)||To(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Rc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=To(i)?N:i,R=To(s)?D:s;return n&&n>0&&(M?R=M/n:R&&(M=R*n),f&&R>f&&(R=f)),Rc(M>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,R,i,s,l,u,n),E.Children.map(h,U=>E.cloneElement(U,{width:M,height:R,style:Ey({width:M,height:R},U.props.style)}))},[n,h,s,f,u,l,P,i]);return E.createElement("div",{id:m?"".concat(m):void 0,className:nt("recharts-responsive-container",g),style:Ey(Ey({},S),{},{width:i,height:s,minWidth:l,minHeight:u,maxHeight:f}),ref:A},E.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),nl=e=>null;nl.displayName="Cell";function yz(e,t,n){return(t=vz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vz(e){var t=bz(e,"string");return typeof t=="symbol"?t:t+""}function bz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class xz{constructor(t){yz(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function BP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(n),!0).forEach(function(r){Az(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Az(e,t,n){return(t=Ez(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ez(e){var t=Cz(e,"string");return typeof t=="symbol"?t:t+""}function Cz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pz={cacheSize:2e3,enableCache:!0},ID=Sz({},Pz),UP=new xz(ID.cacheSize),wz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},zP="recharts_measurement_span";function Oz(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(l,"|").concat(u)}var GP=(e,t)=>{try{var n=document.getElementById(zP);n||(n=document.createElement("span"),n.setAttribute("id",zP),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,wz,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Ic=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||il.isSsr)return{width:0,height:0};if(!ID.enableCache)return GP(t,n);var r=Oz(t,n),i=UP.get(r);if(i)return i;var s=GP(t,n);return UP.set(r,s),s},HP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Tz=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_z=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,LD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Dz=Object.keys(LD),Us="NaN";function Nz(e,t){return e*LD[t]}class zn{static parse(t){var n,[,r,i]=(n=_z.exec(t))!==null&&n!==void 0?n:[];return new zn(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,or(t)&&(this.unit=""),n!==""&&!Tz.test(n)&&(this.num=NaN,this.unit=""),Dz.includes(n)&&(this.num=Nz(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new zn(NaN,""):new zn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new zn(NaN,""):new zn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new zn(NaN,""):new zn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new zn(NaN,""):new zn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return or(this.num)}}function $D(e){if(e.includes(Us))return Us;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=(n=HP.exec(t))!==null&&n!==void 0?n:[],l=zn.parse(r??""),u=zn.parse(s??""),f=i==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return Us;t=t.replace(HP,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,m,g]=(h=qP.exec(t))!==null&&h!==void 0?h:[],x=zn.parse(p??""),S=zn.parse(g??""),A=m==="+"?x.add(S):x.subtract(S);if(A.isNaN())return Us;t=t.replace(qP,A.toString())}return t}var YP=/\(([^()]*)\)/;function jz(e){for(var t=e,n;(n=YP.exec(t))!=null;){var[,r]=n;t=t.replace(YP,$D(r))}return t}function Mz(e){var t=e.replace(/\s+/g,"");return t=jz(t),t=$D(t),t}function kz(e){try{return Mz(e)}catch{return Us}}function Py(e){var t=kz(e.slice(5,-1));return t===Us?"":t}var Rz=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Iz=["dx","dy","angle","className","breakAll"];function jv(){return jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jv.apply(null,arguments)}function FP(e,t){if(e==null)return{};var n,r,i=Lz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Lz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var BD=/[ \f\n\r\t\v\u2028\u2029]+/,UD=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];rn(t)||(n?i=t.toString().split(""):i=t.toString().split(BD));var s=i.map(u=>({word:u,width:Ic(u,r).width})),l=n?0:Ic("",r).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},$z=(e,t,n,r,i)=>{var{maxLines:s,children:l,style:u,breakAll:f}=e,h=_e(s),p=l,m=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce((W,le)=>{var{word:ie,width:te}=le,L=W[W.length-1];if(L&&(r==null||i||L.width+te+n<Number(r)))L.words.push(ie),L.width+=te+n;else{var ee={words:[ie],width:te};W.push(ee)}return W},[])},g=m(t),x=K=>K.reduce((q,W)=>q.width>W.width?q:W);if(!h||i)return g;var S=g.length>s||x(g).width>Number(r);if(!S)return g;for(var A="",C=K=>{var q=p.slice(0,K),W=UD({breakAll:f,style:u,children:q+A}).wordsWithComputedWidth,le=m(W),ie=le.length>s||x(le).width>Number(r);return[ie,le]},P=0,O=p.length-1,T=0,j;P<=O&&T<=p.length-1;){var N=Math.floor((P+O)/2),D=N-1,[M,R]=C(D),[U]=C(N);if(!M&&!U&&(P=N+1),M&&U&&(O=N-1),!M&&U){j=R;break}T++}return j||g},VP=e=>{var t=rn(e)?[]:e.toString().split(BD);return[{words:t}]},Bz=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:l}=e;if((t||n)&&!il.isSsr){var u,f,h=UD({breakAll:s,children:r,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:m}=h;u=p,f=m}else return VP(r);return $z({breakAll:s,children:r,maxLines:l,style:i},u,f,t,n)}return VP(r)},KP="#808080",Dh=E.forwardRef((e,t)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:u="start",verticalAnchor:f="end",fill:h=KP}=e,p=FP(e,Rz),m=E.useMemo(()=>Bz({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:l,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,l,p.style,p.width]),{dx:g,dy:x,angle:S,className:A,breakAll:C}=p,P=FP(p,Iz);if(!da(n)||!da(r)||m.length===0)return null;var O=n+(_e(g)?g:0),T=r+(_e(x)?x:0),j;switch(f){case"start":j=Py("calc(".concat(s,")"));break;case"middle":j=Py("calc(".concat((m.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:j=Py("calc(".concat(m.length-1," * -").concat(i,")"));break}var N=[];if(l){var D=m[0].width,{width:M}=p;N.push("scale(".concat(_e(M)?M/D:1,")"))}return S&&N.push("rotate(".concat(S,", ").concat(O,", ").concat(T,")")),N.length&&(P.transform=N.join(" ")),E.createElement("text",jv({},Ut(P,!0),{ref:t,x:O,y:T,className:nt("recharts-text",A),textAnchor:u,fill:h.includes("url")?KP:h}),m.map((R,U)=>{var K=R.words.join(C?"":" ");return E.createElement("tspan",{x:O,dy:U===0?j:i,key:"".concat(K,"-").concat(U)},K)}))});Dh.displayName="Text";var Uz=["labelRef"];function zz(e,t){if(e==null)return{};var n,r,i=Gz(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Gz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function XP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XP(Object(n),!0).forEach(function(r){Hz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hz(e,t,n){return(t=qz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qz(e){var t=Yz(e,"string");return typeof t=="symbol"?t:t+""}function Yz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},La.apply(null,arguments)}var zD=E.createContext(null),Fz=e=>{var{x:t,y:n,width:r,height:i,children:s}=e,l=E.useMemo(()=>({x:t,y:n,width:r,height:i}),[t,n,r,i]);return E.createElement(zD.Provider,{value:l},s)},GD=()=>{var e=E.useContext(zD),t=b0();return e||t},Vz=E.createContext(null),Kz=()=>{var e=E.useContext(Vz),t=we(D_);return e||t},Xz=e=>{var{value:t,formatter:n}=e,r=rn(e.children)?t:e.children;return typeof n=="function"?n(r):r},Nb=e=>e!=null&&typeof e=="function",Wz=(e,t)=>{var n=nn(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Qz=(e,t,n,r,i)=>{var{offset:s,className:l}=e,{cx:u,cy:f,innerRadius:h,outerRadius:p,startAngle:m,endAngle:g,clockWise:x}=i,S=(h+p)/2,A=Wz(m,g),C=A>=0?1:-1,P,O;switch(t){case"insideStart":P=m+C*s,O=x;break;case"insideEnd":P=g-C*s,O=!x;break;case"end":P=g+C*s,O=x;break;default:throw new Error("Unsupported position ".concat(t))}O=A<=0?O:!O;var T=zt(u,f,S,P),j=zt(u,f,S,P+(O?1:-1)*359),N="M".concat(T.x,",").concat(T.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(O?0:1,`,
    `).concat(j.x,",").concat(j.y),D=rn(e.id)?Uc("recharts-radial-line-"):e.id;return E.createElement("text",La({},r,{dominantBaseline:"central",className:nt("recharts-radial-bar-label",l)}),E.createElement("defs",null,E.createElement("path",{id:D,d:N})),E.createElement("textPath",{xlinkHref:"#".concat(D)},n))},Zz=(e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:l,startAngle:u,endAngle:f}=e,h=(u+f)/2;if(n==="outside"){var{x:p,y:m}=zt(r,i,l+t,h);return{x:p,y:m,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(s+l)/2,{x,y:S}=zt(r,i,g,h);return{x,y:S,textAnchor:"middle",verticalAnchor:"middle"}},HD=e=>"cx"in e&&_e(e.cx),Jz=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,s;n!=null&&!HD(n)&&(s=n);var{x:l,y:u,width:f,height:h}=t,p=h>=0?1:-1,m=p*r,g=p>0?"end":"start",x=p>0?"start":"end",S=f>=0?1:-1,A=S*r,C=S>0?"end":"start",P=S>0?"start":"end";if(i==="top"){var O={x:l+f/2,y:u-p*r,textAnchor:"middle",verticalAnchor:g};return jt(jt({},O),s?{height:Math.max(u-s.y,0),width:f}:{})}if(i==="bottom"){var T={x:l+f/2,y:u+h+m,textAnchor:"middle",verticalAnchor:x};return jt(jt({},T),s?{height:Math.max(s.y+s.height-(u+h),0),width:f}:{})}if(i==="left"){var j={x:l-A,y:u+h/2,textAnchor:C,verticalAnchor:"middle"};return jt(jt({},j),s?{width:Math.max(j.x-s.x,0),height:h}:{})}if(i==="right"){var N={x:l+f+A,y:u+h/2,textAnchor:P,verticalAnchor:"middle"};return jt(jt({},N),s?{width:Math.max(s.x+s.width-N.x,0),height:h}:{})}var D=s?{width:f,height:h}:{};return i==="insideLeft"?jt({x:l+A,y:u+h/2,textAnchor:P,verticalAnchor:"middle"},D):i==="insideRight"?jt({x:l+f-A,y:u+h/2,textAnchor:C,verticalAnchor:"middle"},D):i==="insideTop"?jt({x:l+f/2,y:u+m,textAnchor:"middle",verticalAnchor:x},D):i==="insideBottom"?jt({x:l+f/2,y:u+h-m,textAnchor:"middle",verticalAnchor:g},D):i==="insideTopLeft"?jt({x:l+A,y:u+m,textAnchor:P,verticalAnchor:x},D):i==="insideTopRight"?jt({x:l+f-A,y:u+m,textAnchor:C,verticalAnchor:x},D):i==="insideBottomLeft"?jt({x:l+A,y:u+h-m,textAnchor:P,verticalAnchor:g},D):i==="insideBottomRight"?jt({x:l+f-A,y:u+h-m,textAnchor:C,verticalAnchor:g},D):i&&typeof i=="object"&&(_e(i.x)||To(i.x))&&(_e(i.y)||To(i.y))?jt({x:l+Cn(i.x,f),y:u+Cn(i.y,h),textAnchor:"end",verticalAnchor:"end"},D):jt({x:l+f/2,y:u+h/2,textAnchor:"middle",verticalAnchor:"middle"},D)},eG={offset:5};function Ti(e){var t=jr(e,eG),{viewBox:n,position:r,value:i,children:s,content:l,className:u="",textBreakAll:f,labelRef:h}=t,p=Kz(),m=GD(),g=r==="center"?m:p??m,x=n||g;if(!x||rn(i)&&rn(s)&&!E.isValidElement(l)&&typeof l!="function")return null;var S=jt(jt({},t),{},{viewBox:x});if(E.isValidElement(l)){var{labelRef:A}=S,C=zz(S,Uz);return E.cloneElement(l,C)}var P;if(typeof l=="function"){if(P=E.createElement(l,S),E.isValidElement(P))return P}else P=Xz(t);var O=HD(x),T=Ut(t,!0);if(O&&(r==="insideStart"||r==="insideEnd"||r==="end"))return Qz(t,r,P,T,x);var j=O?Zz(x,t.offset,t.position):Jz(t,x);return E.createElement(Dh,La({ref:h,className:nt("recharts-label",u)},T,j,{breakAll:f}),P)}Ti.displayName="Label";var tG=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?E.createElement(Ti,La({key:"label-implicit"},r)):da(e)?E.createElement(Ti,La({key:"label-implicit",value:e},r)):E.isValidElement(e)?e.type===Ti?E.cloneElement(e,jt({key:"label-implicit"},r)):E.createElement(Ti,La({key:"label-implicit",content:e},r)):Nb(e)?E.createElement(Ti,La({key:"label-implicit",content:e},r)):e&&typeof e=="object"?E.createElement(Ti,La({},e,{key:"label-implicit"},r)):null};function nG(e){var{label:t}=e,n=GD();return tG(t,n)||null}var wy={},Oy={},WP;function rG(){return WP||(WP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Oy)),Oy}var Ty={},QP;function aG(){return QP||(QP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Ty)),Ty}var ZP;function iG(){return ZP||(ZP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rG(),n=aG(),r=c0();function i(s){if(r.isArrayLike(s))return t.last(n.toArray(s))}e.last=i})(wy)),wy}var _y,JP;function oG(){return JP||(JP=1,_y=iG().last),_y}var sG=oG();const lG=qr(sG);var cG=["valueAccessor"],uG=["dataKey","clockWise","id","textBreakAll"];function zf(){return zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zf.apply(null,arguments)}function ew(e,t){if(e==null)return{};var n,r,i=dG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function dG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var fG=e=>Array.isArray(e.value)?lG(e.value):e.value,qD=E.createContext(void 0),hG=qD.Provider,YD=E.createContext(void 0),pG=YD.Provider;function mG(){return E.useContext(qD)}function gG(){return E.useContext(YD)}function of(e){var{valueAccessor:t=fG}=e,n=ew(e,cG),{dataKey:r,clockWise:i,id:s,textBreakAll:l}=n,u=ew(n,uG),f=mG(),h=gG(),p=f||h;return!p||!p.length?null:E.createElement(qn,{className:"recharts-label-list"},p.map((m,g)=>{var x,S=rn(r)?t(m,g):vt(m&&m.payload,r),A=rn(s)?{}:{id:"".concat(s,"-").concat(g)};return E.createElement(Ti,zf({},Ut(m,!0),u,A,{fill:(x=n.fill)!==null&&x!==void 0?x:m.fill,parentViewBox:m.parentViewBox,value:S,textBreakAll:l,viewBox:m.viewBox,key:"label-".concat(g),index:g}))}))}of.displayName="LabelList";function FD(e){var{label:t}=e;return t?t===!0?E.createElement(of,{key:"labelList-implicit"}):E.isValidElement(t)||Nb(t)?E.createElement(of,{key:"labelList-implicit",content:t}):typeof t=="object"?E.createElement(of,zf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var VD=e=>e.graphicalItems.polarItems,yG=Z([St,ou],ib),jb=Z([VD,Mt,yG],sb),vG=Z([jb],lb),Mb=Z([vG,V0],cb),bG=Z([Mb,Mt,jb],db),xG=Z([Mb,Mt,jb],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var s,l=vt(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:vt(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),tw=()=>{},SG=Z([Mt,W_,tw,xG,tw,Xe,St],hb),KD=Z([Mt,Xe,Mb,bG,iu,St,SG],pb),AG=Z([KD,Mt,dl],yb);Z([Mt,KD,AG,St],bb);var EG={radiusAxis:{},angleAxis:{}},XD=cr({name:"polarAxis",initialState:EG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:gV,removeRadiusAxis:yV,addAngleAxis:vV,removeAngleAxis:bV}=XD.actions,CG=XD.reducer;function nw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nw(Object(n),!0).forEach(function(r){PG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PG(e,t,n){return(t=wG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wG(e){var t=OG(e,"string");return typeof t=="symbol"?t:t+""}function OG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TG=(e,t)=>t,kb=Z([VD,TG],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),_G=[],Rb=(e,t,n)=>n?.length===0?_G:n,WD=Z([V0,kb,Rb],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>rw(rw({},t.presentationProps),s.props))),i!=null)return i}}),DG=Z([WD,kb,Rb],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,l=vt(r,t.nameKey,t.name),u;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?u=r.fill:u=t.fill,{value:sh(l,t.dataKey),color:u,payload:r,type:t.legendType}})}),NG=Z([WD,kb,Rb,Xt],(e,t,n,r)=>{if(!(t==null||e==null))return D7({offset:r,pieSettings:t,displayedData:e,cells:n})}),Dy={},aw;function jG(){return aw||(aw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(Dy)),Dy}var Ny,iw;function MG(){return iw||(iw=1,Ny=jG().isPlainObject),Ny}var kG=MG();const RG=qr(kG);function ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ow(Object(n),!0).forEach(function(r){IG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ow(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function IG(e,t,n){return(t=LG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LG(e){var t=$G(e,"string");return typeof t=="symbol"?t:t+""}function $G(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gf.apply(null,arguments)}var lw=(e,t,n,r,i)=>{var s=n-r,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+n,",").concat(t),l+="L ".concat(e+n-s/2,",").concat(t+i),l+="L ".concat(e+n-s/2-r,",").concat(t+i),l+="L ".concat(e,",").concat(t," Z"),l},BG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UG=e=>{var t=jr(e,BG),{x:n,y:r,upperWidth:i,lowerWidth:s,height:l,className:u}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:m}=t,g=E.useRef(),[x,S]=E.useState(-1),A=E.useRef(i),C=E.useRef(s),P=E.useRef(l),O=E.useRef(n),T=E.useRef(r),j=ph(e,"trapezoid-");if(E.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var ie=g.current.getTotalLength();ie&&S(ie)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||l!==+l||i===0&&s===0||l===0)return null;var N=nt("recharts-trapezoid",u);if(!m)return E.createElement("g",null,E.createElement("path",Gf({},Ut(t,!0),{className:N,d:lw(n,r,i,s,l)})));var D=A.current,M=C.current,R=P.current,U=O.current,K=T.current,q="0px ".concat(x===-1?1:x,"px"),W="".concat(x,"px 0px"),le=xT(["strokeDasharray"],h,f);return E.createElement(hh,{animationId:j,key:j,canBegin:x>0,duration:h,easing:f,isActive:m,begin:p},ie=>{var te=gn(D,i,ie),L=gn(M,s,ie),ee=gn(R,l,ie),he=gn(U,n,ie),Se=gn(K,r,ie);g.current&&(A.current=te,C.current=L,P.current=ee,O.current=he,T.current=Se);var k=ie>0?{transition:le,strokeDasharray:W}:{strokeDasharray:q};return E.createElement("path",Gf({},Ut(t,!0),{className:N,d:lw(he,Se,te,L,ee),ref:g,style:sw(sw({},k),t.style)}))})},zG=["option","shapeType","propTransformer","activeClassName","isActive"];function GG(e,t){if(e==null)return{};var n,r,i=HG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function HG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(r){qG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qG(e,t,n){return(t=YG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YG(e){var t=FG(e,"string");return typeof t=="symbol"?t:t+""}function FG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VG(e,t){return Hf(Hf({},t),e)}function KG(e,t){return e==="symbols"}function uw(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return E.createElement(CT,n);case"trapezoid":return E.createElement(UG,n);case"sector":return E.createElement(OT,n);case"symbols":if(KG(t))return E.createElement(o0,n);break;default:return null}}function XG(e){return E.isValidElement(e)?e.props:e}function QD(e){var{option:t,shapeType:n,propTransformer:r=VG,activeClassName:i="recharts-active-shape",isActive:s}=e,l=GG(e,zG),u;if(E.isValidElement(t))u=E.cloneElement(t,Hf(Hf({},l),XG(t)));else if(typeof t=="function")u=t(l);else if(RG(t)&&typeof t!="boolean"){var f=r(t,l);u=E.createElement(uw,{shapeType:n,elementProps:f})}else{var h=l;u=E.createElement(uw,{shapeType:n,elementProps:h})}return s?E.createElement(qn,{className:i},u):u}var Ib=(e,t)=>{var n=Ct();return(r,i)=>s=>{e?.(r,i,s),n(fD({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Lb=e=>{var t=Ct();return(n,r)=>i=>{e?.(n,r,i),t(N6())}},$b=(e,t)=>{var n=Ct();return(r,i)=>s=>{e?.(r,i,s),n(j6({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}};function ZD(e){var{fn:t,args:n}=e,r=Ct(),i=Nr();return E.useEffect(()=>{if(!i){var s=t(n);return r(T6(s)),()=>{r(_6(s))}}},[t,n,r,i]),null}var JD=()=>{};function WG(e){var{legendPayload:t}=e,n=Ct(),r=Nr();return E.useEffect(()=>r?JD:(n(gT(t)),()=>{n(yT(t))}),[n,r,t]),null}function QG(e){var{legendPayload:t}=e,n=Ct(),r=we(Xe);return E.useEffect(()=>r!=="centric"&&r!=="radial"?JD:(n(gT(t)),()=>{n(yT(t))}),[n,r,t]),null}var jy,ZG=()=>{var[e]=E.useState(()=>Uc("uid-"));return e},JG=(jy=Jj.useId)!==null&&jy!==void 0?jy:ZG;function e7(e,t){var n=JG();return t||(e?"".concat(e,"-").concat(n):n)}var t7=E.createContext(void 0),eN=e=>{var{id:t,type:n,children:r}=e,i=e7("recharts-".concat(n),t);return E.createElement(t7.Provider,{value:i},r(i))},n7={cartesianItems:[],polarItems:[]},tN=cr({name:"graphicalItems",initialState:n7,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=Ua(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=Ua(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Ua(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:r7,replaceCartesianGraphicalItem:a7,removeCartesianGraphicalItem:i7,addPolarGraphicalItem:o7,removePolarGraphicalItem:s7}=tN.actions,l7=tN.reducer;function c7(e){var t=Ct(),n=E.useRef(null);return E.useEffect(()=>{n.current===null?t(r7(e)):n.current!==e&&t(a7({prev:n.current,next:e})),n.current=e},[t,e]),E.useEffect(()=>()=>{n.current&&(t(i7(n.current)),n.current=null)},[t]),null}function u7(e){var t=Ct();return E.useEffect(()=>(t(o7(e)),()=>{t(s7(e))}),[t,e]),null}var d7=["onMouseEnter","onClick","onMouseLeave"],f7=["id"],h7=["id"];function Bb(e,t){if(e==null)return{};var n,r,i=p7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dw(Object(n),!0).forEach(function(r){m7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m7(e,t,n){return(t=g7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g7(e){var t=y7(e,"string");return typeof t=="symbol"?t:t+""}function y7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ki.apply(null,arguments)}function v7(e){var t=E.useMemo(()=>t0(e.children,nl),[e.children]),n=we(r=>DG(r,e.id,t));return n==null?null:E.createElement(QG,{legendPayload:n})}function b7(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:l,name:u,hide:f,tooltipType:h}=e;return{dataDefinedOnItem:r.map(p=>p.tooltipPayload),positions:r.map(p=>p.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:l,dataKey:t,nameKey:n,name:sh(u,t),hide:f,type:h,color:l,unit:""}}}var x7=(e,t)=>e>t?"start":e<t?"end":"middle",S7=(e,t,n)=>Cn(typeof t=="function"?t(e):t,n,n*.8),A7=(e,t,n)=>{var{top:r,left:i,width:s,height:l}=t,u=sT(s,l),f=i+Cn(e.cx,s,s/2),h=r+Cn(e.cy,l,l/2),p=Cn(e.innerRadius,u,0),m=S7(n,e.outerRadius,u),g=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:f,cy:h,innerRadius:p,outerRadius:m,maxRadius:g}},E7=(e,t)=>{var n=nn(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function C7(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var P7=(e,t)=>{if(E.isValidElement(e))return E.cloneElement(e,t);if(typeof e=="function")return e(t);var n=nt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return E.createElement(bT,ki({},t,{type:"linear",className:n}))},w7=(e,t,n)=>{if(E.isValidElement(e))return E.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),E.isValidElement(r)))return r;var i=nt("recharts-pie-label-text",C7(e));return E.createElement(Dh,ki({},t,{alignmentBaseline:"middle",className:i}),r)};function O7(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:s,dataKey:l}=n;if(!r||!i||!t)return null;var u=qo(n),f=Ut(i,!1),h=Ut(s,!1),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,m=t.map((g,x)=>{var S=(g.startAngle+g.endAngle)/2,A=zt(g.cx,g.cy,g.outerRadius+p,S),C=yt(yt(yt(yt({},u),g),{},{stroke:"none"},f),{},{index:x,textAnchor:x7(A.x,g.cx)},A),P=yt(yt(yt(yt({},u),g),{},{fill:"none",stroke:g.fill},h),{},{index:x,points:[zt(g.cx,g.cy,g.outerRadius,S),A],key:"line"});return E.createElement(qn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},s&&P7(s,P),w7(i,C,vt(g,l)))});return E.createElement(qn,{className:"recharts-pie-labels"},m)}function T7(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?E.createElement(FD,{label:n.label}):E.createElement(O7,{sectors:t,props:n,showLabels:r})}function _7(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i}=e,s=we(Uo),{onMouseEnter:l,onClick:u,onMouseLeave:f}=i,h=Bb(i,d7),p=Ib(l,i.dataKey),m=Lb(f),g=$b(u,i.dataKey);return t==null||t.length===0?null:E.createElement(E.Fragment,null,t.map((x,S)=>{if(x?.startAngle===0&&x?.endAngle===0&&t.length!==1)return null;var A=n&&String(S)===s,C=s?r:null,P=A?n:C,O=yt(yt({},x),{},{stroke:x.stroke,tabIndex:-1,[fT]:S,[hT]:i.dataKey});return E.createElement(qn,ki({tabIndex:-1,className:"recharts-pie-sector"},Qc(h,x,S),{onMouseEnter:p(x,S),onMouseLeave:m(x,S),onClick:g(x,S),key:"sector-".concat(x?.startAngle,"-").concat(x?.endAngle,"-").concat(x.midAngle,"-").concat(S)}),E.createElement(QD,ki({option:P,isActive:A,shapeType:"sector"},O)))}))}function D7(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:s}=e,{cornerRadius:l,startAngle:u,endAngle:f,dataKey:h,nameKey:p,tooltipType:m}=n,g=Math.abs(n.minAngle),x=E7(u,f),S=Math.abs(x),A=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,C=r.filter(D=>vt(D,h,0)!==0).length,P=(S>=360?C:C-1)*A,O=S-C*g-P,T=r.reduce((D,M)=>{var R=vt(M,h,0);return D+(_e(R)?R:0)},0),j;if(T>0){var N;j=r.map((D,M)=>{var R=vt(D,h,0),U=vt(D,p,M),K=A7(n,s,D),q=(_e(R)?R:0)/T,W,le=yt(yt({},D),i&&i[M]&&i[M].props);M?W=N.endAngle+nn(x)*A*(R!==0?1:0):W=u;var ie=W+nn(x)*((R!==0?g:0)+q*O),te=(W+ie)/2,L=(K.innerRadius+K.outerRadius)/2,ee=[{name:U,value:R,payload:le,dataKey:h,type:m}],he=zt(K.cx,K.cy,L,te);return N=yt(yt(yt(yt({},n.presentationProps),{},{percent:q,cornerRadius:l,name:U,tooltipPayload:ee,midAngle:te,middleRadius:L,tooltipPosition:he},le),K),{},{value:vt(D,h),startAngle:W,endAngle:ie,payload:le,paddingAngle:nn(x)*A}),N})}return j}function N7(e){var{showLabels:t,sectors:n,children:r}=e,i=E.useMemo(()=>!t||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,t]);return E.createElement(pG,{value:t?i:void 0},r)}function j7(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:l,animationEasing:u,activeShape:f,inactiveShape:h,onAnimationStart:p,onAnimationEnd:m}=t,g=ph(t,"recharts-pie-"),x=n.current,[S,A]=E.useState(!1),C=E.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),P=E.useCallback(()=>{typeof p=="function"&&p(),A(!0)},[p]);return E.createElement(N7,{showLabels:!S,sectors:r},E.createElement(hh,{animationId:g,begin:s,duration:l,isActive:i,easing:u,onAnimationStart:P,onAnimationEnd:C,key:g},O=>{var T=[],j=r&&r[0],N=j?.startAngle;return r?.forEach((D,M)=>{var R=x&&x[M],U=M>0?Io(D,"paddingAngle",0):0;if(R){var K=gn(R.endAngle-R.startAngle,D.endAngle-D.startAngle,O),q=yt(yt({},D),{},{startAngle:N+U,endAngle:N+K+U});T.push(q),N=q.endAngle}else{var{endAngle:W,startAngle:le}=D,ie=gn(0,W-le,O),te=yt(yt({},D),{},{startAngle:N+U,endAngle:N+ie+U});T.push(te),N=te.endAngle}}),n.current=T,E.createElement(qn,null,E.createElement(_7,{sectors:T,activeShape:f,inactiveShape:h,allOtherPieProps:t}))}),E.createElement(T7,{showLabels:!S,sectors:r,props:t}),t.children)}var M7={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!il.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function k7(e){var{id:t}=e,n=Bb(e,f7),{hide:r,className:i,rootTabIndex:s}=e,l=E.useMemo(()=>t0(e.children,nl),[e.children]),u=we(p=>NG(p,t,l)),f=E.useRef(null),h=nt("recharts-pie",i);return r||u==null?(f.current=null,E.createElement(qn,{tabIndex:s,className:h})):E.createElement(E.Fragment,null,E.createElement(ZD,{fn:b7,args:yt(yt({},e),{},{sectors:u})}),E.createElement(qn,{tabIndex:s,className:h},E.createElement(j7,{props:yt(yt({},n),{},{sectors:u}),previousSectorsRef:f})))}function Mv(e){var t=jr(e,M7),{id:n}=t,r=Bb(t,h7),i=qo(r);return E.createElement(eN,{id:n,type:"pie"},s=>E.createElement(E.Fragment,null,E.createElement(u7,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),E.createElement(v7,ki({},r,{id:s})),E.createElement(k7,ki({},r,{id:s}))))}Mv.displayName="Pie";function fw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fw(Object(n),!0).forEach(function(r){R7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function R7(e,t,n){return(t=I7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I7(e){var t=L7(e,"string");return typeof t=="symbol"?t:t+""}function L7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $7={xAxis:{},yAxis:{},zAxis:{}},nN=cr({name:"cartesianAxis",initialState:$7,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=hw(hw({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:B7,removeXAxis:U7,addYAxis:z7,removeYAxis:G7,addZAxis:xV,removeZAxis:SV,updateYAxisWidth:H7}=nN.actions,q7=nN.reducer,Y7=Z([Xt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),F7=Z([Y7,Va,Ka],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),rN=()=>we(F7),V7="Invariant failed";function K7(e,t){throw new Error(V7)}var X7=["x","y"];function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kv.apply(null,arguments)}function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(n),!0).forEach(function(r){W7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W7(e,t,n){return(t=Q7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q7(e){var t=Z7(e,"string");return typeof t=="symbol"?t:t+""}function Z7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J7(e,t){if(e==null)return{};var n,r,i=e9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function e9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function t9(e,t){var{x:n,y:r}=e,i=J7(e,X7),s="".concat(n),l=parseInt(s,10),u="".concat(r),f=parseInt(u,10),h="".concat(t.height||i.height),p=parseInt(h,10),m="".concat(t.width||i.width),g=parseInt(m,10);return Tc(Tc(Tc(Tc(Tc({},t),i),l?{x:l}:{}),f?{y:f}:{}),{},{height:p,width:g,name:t.name,radius:t.radius})}function Ub(e){return E.createElement(QD,kv({shapeType:"rectangle",propTransformer:t9,activeClassName:"recharts-active-bar"},e))}var n9=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(_e(t))return t;var s=_e(r)||rn(r);return s?t(r,i):(s||K7(),n)}},r9={},aN=cr({name:"errorBars",initialState:r9,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:AV,replaceErrorBar:EV,removeErrorBar:CV}=aN.actions,a9=aN.reducer,i9=["children"];function o9(e,t){if(e==null)return{};var n,r,i=s9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var l9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},c9=E.createContext(l9);function u9(e){var{children:t}=e,n=o9(e,i9);return E.createElement(c9.Provider,{value:n},t)}function iN(e,t){var n,r,i=we(h=>Ui(h,e)),s=we(h=>zi(h,t)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:tr.allowDataOverflow,u=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:nr.allowDataOverflow,f=l||u;return{needClip:f,needClipX:l,needClipY:u}}function d9(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=rN(),{needClipX:s,needClipY:l,needClip:u}=iN(t,n);if(!u)return null;var{x:f,y:h,width:p,height:m}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:s?f:f-p/2,y:l?h:h-m/2,width:s?p:p*2,height:l?m:m*2}))}var f9=["onMouseEnter","onMouseLeave","onClick"],h9=["value","background","tooltipPosition"],p9=["id"],m9=["onMouseEnter","onClick","onMouseLeave"];function Ri(){return Ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ri.apply(null,arguments)}function mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(n),!0).forEach(function(r){g9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g9(e,t,n){return(t=y9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y9(e){var t=v9(e,"string");return typeof t=="symbol"?t:t+""}function v9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qf(e,t){if(e==null)return{};var n,r,i=b9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function b9(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var x9=e=>{var{dataKey:t,name:n,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:sh(n,t),payload:e}]};function S9(e){var{dataKey:t,stroke:n,strokeWidth:r,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:sh(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function A9(e){var t=we(Uo),{data:n,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:u,onClick:f}=s,h=qf(s,f9),p=Ib(l,r),m=Lb(u),g=$b(f,r);if(!i||n==null)return null;var x=Ut(i,!1);return E.createElement(E.Fragment,null,n.map((S,A)=>{var{value:C,background:P,tooltipPosition:O}=S,T=qf(S,h9);if(!P)return null;var j=p(S,A),N=m(S,A),D=g(S,A),M=jn(jn(jn(jn(jn({option:i,isActive:String(A)===t},T),{},{fill:"#eee"},P),x),Qc(h,S,A)),{},{onMouseEnter:j,onMouseLeave:N,onClick:D,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return E.createElement(Ub,Ri({key:"background-bar-".concat(A)},M))}))}function E9(e){var{showLabels:t,children:n,rects:r}=e,i=r?.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return jn(jn({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return E.createElement(hG,{value:t?i:void 0},n)}function C9(e){var{shape:t,activeBar:n,baseProps:r,entry:i,index:s,dataKey:l}=e,u=we(Uo),f=we(PD),h=n&&String(s)===u&&(f==null||l===f),p=h?n:t;return E.createElement(Ub,Ri({},r,i,{isActive:h,option:p,index:s,dataKey:l}))}function P9(e){var{shape:t,baseProps:n,entry:r,index:i,dataKey:s}=e;return E.createElement(Ub,Ri({},n,r,{isActive:!1,option:t,index:i,dataKey:s}))}function w9(e){var{data:t,props:n}=e,r=qo(n),{id:i}=r,s=qf(r,p9),{shape:l,dataKey:u,activeBar:f}=n,{onMouseEnter:h,onClick:p,onMouseLeave:m}=n,g=qf(n,m9),x=Ib(h,u),S=Lb(m),A=$b(p,u);return t?E.createElement(E.Fragment,null,t.map((C,P)=>E.createElement(qn,Ri({className:"recharts-bar-rectangle"},Qc(g,C,P),{onMouseEnter:x(C,P),onMouseLeave:S(C,P),onClick:A(C,P),key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(P)}),f?E.createElement(C9,{shape:l,activeBar:f,baseProps:s,entry:C,index:P,dataKey:u}):E.createElement(P9,{shape:l,baseProps:s,entry:C,index:P,dataKey:u})))):null}function O9(e){var{props:t,previousRectanglesRef:n}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:f,onAnimationEnd:h,onAnimationStart:p}=t,m=n.current,g=ph(t,"recharts-bar-"),[x,S]=E.useState(!1),A=!x,C=E.useCallback(()=>{typeof h=="function"&&h(),S(!1)},[h]),P=E.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);return E.createElement(E9,{showLabels:A,rects:r},E.createElement(hh,{animationId:g,begin:l,duration:u,isActive:s,easing:f,onAnimationEnd:C,onAnimationStart:P,key:g},O=>{var T=O===1?r:r?.map((j,N)=>{var D=m&&m[N];if(D)return jn(jn({},j),{},{x:gn(D.x,j.x,O),y:gn(D.y,j.y,O),width:gn(D.width,j.width,O),height:gn(D.height,j.height,O)});if(i==="horizontal"){var M=gn(0,j.height,O);return jn(jn({},j),{},{y:j.y+j.height-M,height:M})}var R=gn(0,j.width,O);return jn(jn({},j),{},{width:R})});return O>0&&(n.current=T??null),T==null?null:E.createElement(qn,null,E.createElement(w9,{props:t,data:T}))}),E.createElement(FD,{label:t.label}),t.children)}function T9(e){var t=E.useRef(null);return E.createElement(O9,{previousRectanglesRef:t,props:e})}var oN=0,_9=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:vt(e,t)}};class D9 extends E.PureComponent{render(){var{hide:t,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:l,needClip:u,background:f,id:h}=this.props;if(t||n==null)return null;var p=nt("recharts-bar",i),m=h;return E.createElement(qn,{className:p,id:h},u&&E.createElement("defs",null,E.createElement(d9,{clipPathId:m,xAxisId:s,yAxisId:l})),E.createElement(qn,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(m,")"):void 0},E.createElement(A9,{data:n,dataKey:r,background:f,allOtherBarProps:this.props}),E.createElement(T9,this.props)))}}var N9={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!il.isSsr,legendType:"rect",minPointSize:oN,xAxisId:0,yAxisId:0};function j9(e){var{xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:p}=e,{needClip:m}=iN(t,n),g=A0(),x=Nr(),S=t0(e.children,nl),A=we(O=>iH(O,t,n,x,e.id,S));if(g!=="vertical"&&g!=="horizontal")return null;var C,P=A?.[0];return P==null||P.height==null||P.width==null?C=0:C=g==="vertical"?P.height/2:P.width/2,E.createElement(u9,{xAxisId:t,yAxisId:n,data:A,dataPointFormatter:_9,errorBarOffset:C},E.createElement(D9,Ri({},e,{layout:g,needClip:m,data:A,xAxisId:t,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:l,animationBegin:u,animationDuration:f,animationEasing:h,isAnimationActive:p})))}function M9(e){var{layout:t,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:l,yAxis:u,xAxisTicks:f,yAxisTicks:h,stackedData:p,displayedData:m,offset:g,cells:x,parentViewBox:S}=e,A=t==="horizontal"?u:l,C=p?A.scale.domain():null,P=X4({numericAxis:A});return m.map((O,T)=>{var j,N,D,M,R,U;p?j=H4(p[T],C):(j=vt(O,n),Array.isArray(j)||(j=[P,j]));var K=n9(r,oN)(j[1],T);if(t==="horizontal"){var q,[W,le]=[u.scale(j[0]),u.scale(j[1])];N=nC({axis:l,ticks:f,bandSize:s,offset:i.offset,entry:O,index:T}),D=(q=le??W)!==null&&q!==void 0?q:void 0,M=i.size;var ie=W-le;if(R=or(ie)?0:ie,U={x:N,y:g.top,width:M,height:g.height},Math.abs(K)>0&&Math.abs(R)<Math.abs(K)){var te=nn(R||K)*(Math.abs(K)-Math.abs(R));D-=te,R+=te}}else{var[L,ee]=[l.scale(j[0]),l.scale(j[1])];if(N=L,D=nC({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:O,index:T}),M=ee-L,R=i.size,U={x:g.left,y:D,width:g.width,height:R},Math.abs(K)>0&&Math.abs(M)<Math.abs(K)){var he=nn(M||K)*(Math.abs(K)-Math.abs(M));M+=he}}if(N==null||D==null||M==null||R==null)return null;var Se=jn(jn({},O),{},{x:N,y:D,width:M,height:R,value:p?j:j[1],payload:O,background:U,tooltipPosition:{x:N+M/2,y:D+R/2},parentViewBox:S},x&&x[T]&&x[T].props);return Se}).filter(Boolean)}function sN(e){var t=jr(e,N9),n=Nr();return E.createElement(eN,{id:t.id,type:"bar"},r=>E.createElement(E.Fragment,null,E.createElement(WG,{legendPayload:x9(t)}),E.createElement(ZD,{fn:S9,args:t}),E.createElement(c7,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:K4(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),E.createElement(j9,Ri({},t,{id:r}))))}sN.displayName="Bar";function gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gw(Object(n),!0).forEach(function(r){k9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k9(e,t,n){return(t=R9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R9(e){var t=I9(e,"string");return typeof t=="symbol"?t:t+""}function I9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L9=(e,t)=>t,$9=(e,t,n)=>n,B9=(e,t,n,r)=>r,U9=(e,t,n,r,i)=>i,fu=Z([ob,U9],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),z9=Z([fu],e=>e?.maxBarSize),G9=(e,t,n,r,i,s)=>s,yw=(e,t,n)=>{var r=n??e;if(!rn(r))return Cn(r,t,0)},H9=Z([Xe,ob,L9,$9,B9],(e,t,n,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),q9=(e,t,n,r)=>{var i=Xe(e);return i==="horizontal"?Ov(e,"yAxis",n,r):Ov(e,"xAxis",t,r)},Y9=(e,t,n)=>{var r=Xe(e);return r==="horizontal"?bP(e,"xAxis",t):bP(e,"yAxis",n)},F9=(e,t,n)=>{var r={},i=e.filter(Ch),s=e.filter(h=>h.stackId==null),l=i.reduce((h,p)=>(h[p.stackId]||(h[p.stackId]=[]),h[p.stackId].push(p),h),r),u=Object.entries(l).map(h=>{var[p,m]=h,g=m.map(S=>S.dataKey),x=yw(t,n,m[0].barSize);return{stackId:p,dataKeys:g,barSize:x}}),f=s.map(h=>{var p=[h.dataKey].filter(g=>g!=null),m=yw(t,n,h.barSize);return{stackId:void 0,dataKeys:p,barSize:m}});return[...u,...f]},V9=Z([H9,_8,Y9],F9),K9=(e,t,n,r,i)=>{var s,l,u=fu(e,t,n,r,i);if(u!=null){var f=Xe(e),h=E_(e),{maxBarSize:p}=u,m=rn(p)?h:p,g,x;return f==="horizontal"?(g=tl(e,"xAxis",t,r),x=el(e,"xAxis",t,r)):(g=tl(e,"yAxis",n,r),x=el(e,"yAxis",n,r)),(s=(l=y0(g,x,!0))!==null&&l!==void 0?l:m)!==null&&s!==void 0?s:0}},lN=(e,t,n,r)=>{var i=Xe(e),s,l;return i==="horizontal"?(s=tl(e,"xAxis",t,r),l=el(e,"xAxis",t,r)):(s=tl(e,"yAxis",n,r),l=el(e,"yAxis",n,r)),y0(s,l)};function X9(e,t,n,r,i){var s=r.length;if(!(s<1)){var l=Cn(e,n,0,!0),u,f=[];if(lr(r[0].barSize)){var h=!1,p=n/s,m=r.reduce((P,O)=>P+(O.barSize||0),0);m+=(s-1)*l,m>=n&&(m-=(s-1)*l,l=0),m>=n&&p>0&&(h=!0,p*=.9,m=s*p);var g=(n-m)/2>>0,x={offset:g-l,size:0};u=r.reduce((P,O)=>{var T,j={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:x.offset+x.size+l,size:h?p:(T=O.barSize)!==null&&T!==void 0?T:0}},N=[...P,j];return x=N[N.length-1].position,N},f)}else{var S=Cn(t,n,0,!0);n-2*S-(s-1)*l<=0&&(l=0);var A=(n-2*S-(s-1)*l)/s;A>1&&(A>>=0);var C=lr(i)?Math.min(A,i):A;u=r.reduce((P,O,T)=>[...P,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:S+(A+l)*T+(A-C)/2,size:C}}],f)}return u}}var W9=(e,t,n,r,i,s,l)=>{var u=rn(l)?t:l,f=X9(n,r,i!==s?i:s,e,u);return i!==s&&f!=null&&(f=f.map(h=>Xd(Xd({},h),{},{position:Xd(Xd({},h.position),{},{offset:h.position.offset-i/2})}))),f},Q9=Z([V9,E_,T8,C_,K9,lN,z9],W9),Z9=(e,t,n,r)=>tl(e,"xAxis",t,r),J9=(e,t,n,r)=>tl(e,"yAxis",n,r),eH=(e,t,n,r)=>el(e,"xAxis",t,r),tH=(e,t,n,r)=>el(e,"yAxis",n,r),nH=Z([Q9,fu],(e,t)=>{if(!(e==null||t==null)){var n=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),rH=(e,t)=>{var n=rb(t);if(!(!e||n==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(l=>l.key===n)}}}},aH=Z([q9,fu],rH),iH=Z([Xt,v0,Z9,J9,eH,tH,nH,Xe,K0,lN,aH,fu,G9],(e,t,n,r,i,s,l,u,f,h,p,m,g)=>{var{chartData:x,dataStartIndex:S,dataEndIndex:A}=f;if(!(m==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||r==null||i==null||s==null||h==null)){var{data:C}=m,P;if(C!=null&&C.length>0?P=C:P=x?.slice(S,A+1),P!=null)return M9({layout:u,barSettings:m,pos:l,parentViewBox:t,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:p,displayedData:P,offset:e,cells:g})}}),cN=e=>{var{chartData:t}=e,n=Ct(),r=Nr();return E.useEffect(()=>r?()=>{}:(n(_P(t)),()=>{n(_P(void 0))}),[t,n,r]),null},vw={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},uN=cr({name:"brush",initialState:vw,reducers:{setBrushSettings(e,t){return t.payload==null?vw:t.payload}}}),{setBrushSettings:PV}=uN.actions,oH=uN.reducer;function sH(e,t,n){return(t=lH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lH(e){var t=cH(e,"string");return typeof t=="symbol"?t:t+""}function cH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class zb{static create(t){return new zb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}sH(zb,"EPS",1e-4);function uH(e){return(e%180+180)%180}var dH=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=uH(i),l=s*Math.PI/180,u=Math.atan(r/n),f=l>u&&l<Math.PI-u?r/Math.sin(l):n/Math.cos(l);return Math.abs(f)},fH={dots:[],areas:[],lines:[]},dN=cr({name:"referenceElements",initialState:fH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ua(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ua(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ua(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:wV,removeDot:OV,addArea:TV,removeArea:_V,addLine:DV,removeLine:NV}=dN.actions,hH=dN.reducer,pH=E.createContext(void 0),mH=e=>{var{children:t}=e,[n]=E.useState("".concat(Uc("recharts"),"-clip")),r=rN();if(r==null)return null;var{x:i,y:s,width:l,height:u}=r;return E.createElement(pH.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:s,height:u,width:l}))),t)};function My(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function fN(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function gH(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return dH(r,n)}function yH(e,t,n){var r=n==="width",{x:i,y:s,width:l,height:u}=e;return t===1?{start:r?i:s,end:r?i+l:s+u}:{start:r?i+l:s+u,end:r?i:s}}function Yf(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function vH(e,t){return fN(e,t+1)}function bH(e,t,n,r,i){for(var s=(r||[]).slice(),{start:l,end:u}=t,f=0,h=1,p=l,m=function(){var S=r?.[f];if(S===void 0)return{v:fN(r,h)};var A=f,C,P=()=>(C===void 0&&(C=n(S,A)),C),O=S.coordinate,T=f===0||Yf(e,O,P,p,u);T||(f=0,p=l,h+=1),T&&(p=O+e*(P()/2+i),f+=h)},g;h<=s.length;)if(g=m(),g)return g.v;return[]}function bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bw(Object(n),!0).forEach(function(r){xH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xH(e,t,n){return(t=SH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SH(e){var t=AH(e,"string");return typeof t=="symbol"?t:t+""}function AH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EH(e,t,n,r,i){for(var s=(r||[]).slice(),l=s.length,{start:u}=t,{end:f}=t,h=function(g){var x=s[g],S,A=()=>(S===void 0&&(S=n(x,g)),S);if(g===l-1){var C=e*(x.coordinate+e*A()/2-f);s[g]=x=Sn(Sn({},x),{},{tickCoord:C>0?x.coordinate-C*e:x.coordinate})}else s[g]=x=Sn(Sn({},x),{},{tickCoord:x.coordinate});var P=Yf(e,x.tickCoord,A,u,f);P&&(f=x.tickCoord-e*(A()/2+i),s[g]=Sn(Sn({},x),{},{isShow:!0}))},p=l-1;p>=0;p--)h(p);return s}function CH(e,t,n,r,i,s){var l=(r||[]).slice(),u=l.length,{start:f,end:h}=t;if(s){var p=r[u-1],m=n(p,u-1),g=e*(p.coordinate+e*m/2-h);l[u-1]=p=Sn(Sn({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate});var x=Yf(e,p.tickCoord,()=>m,f,h);x&&(h=p.tickCoord-e*(m/2+i),l[u-1]=Sn(Sn({},p),{},{isShow:!0}))}for(var S=s?u-1:u,A=function(O){var T=l[O],j,N=()=>(j===void 0&&(j=n(T,O)),j);if(O===0){var D=e*(T.coordinate-e*N()/2-f);l[O]=T=Sn(Sn({},T),{},{tickCoord:D<0?T.coordinate-D*e:T.coordinate})}else l[O]=T=Sn(Sn({},T),{},{tickCoord:T.coordinate});var M=Yf(e,T.tickCoord,N,f,h);M&&(f=T.tickCoord+e*(N()/2+i),l[O]=Sn(Sn({},T),{},{isShow:!0}))},C=0;C<S;C++)A(C);return l}function Gb(e,t,n){var{tick:r,ticks:i,viewBox:s,minTickGap:l,orientation:u,interval:f,tickFormatter:h,unit:p,angle:m}=e;if(!i||!i.length||!r)return[];if(_e(f)||il.isSsr){var g;return(g=vH(i,_e(f)?f:0))!==null&&g!==void 0?g:[]}var x=[],S=u==="top"||u==="bottom"?"width":"height",A=p&&S==="width"?Ic(p,{fontSize:t,letterSpacing:n}):{width:0,height:0},C=(T,j)=>{var N=typeof h=="function"?h(T.value,j):T.value;return S==="width"?gH(Ic(N,{fontSize:t,letterSpacing:n}),A,m):Ic(N,{fontSize:t,letterSpacing:n})[S]},P=i.length>=2?nn(i[1].coordinate-i[0].coordinate):1,O=yH(s,P,S);return f==="equidistantPreserveStart"?bH(P,O,C,i,l):(f==="preserveStart"||f==="preserveStartEnd"?x=CH(P,O,C,i,l,f==="preserveStartEnd"):x=EH(P,O,C,i,l),x.filter(T=>T.isShow))}var PH=["viewBox"],wH=["viewBox"];function zs(){return zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zs.apply(null,arguments)}function xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(n),!0).forEach(function(r){Hb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sw(e,t){if(e==null)return{};var n,r,i=OH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function OH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Hb(e,t,n){return(t=TH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TH(e){var t=_H(e,"string");return typeof t=="symbol"?t:t+""}function _H(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Gi extends E.Component{constructor(t){super(t),this.tickRefs=E.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:r}=t,i=Sw(t,PH),s=this.props,{viewBox:l}=s,u=Sw(s,wH);return!My(r,l)||!My(i,u)||!My(n,this.state)}getTickLineCoord(t){var{x:n,y:r,width:i,height:s,orientation:l,tickSize:u,mirror:f,tickMargin:h}=this.props,p,m,g,x,S,A,C=f?-1:1,P=t.tickSize||u,O=_e(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":p=m=t.coordinate,x=r+ +!f*s,g=x-C*P,A=g-C*h,S=O;break;case"left":g=x=t.coordinate,m=n+ +!f*i,p=m-C*P,S=p-C*h,A=O;break;case"right":g=x=t.coordinate,m=n+ +f*i,p=m+C*P,S=p+C*h,A=O;break;default:p=m=t.coordinate,x=r+ +f*s,g=x+C*P,A=g+C*h,S=O;break}return{line:{x1:p,y1:g,x2:m,y2:x},tick:{x:S,y:A}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:r,height:i,orientation:s,mirror:l,axisLine:u}=this.props,f=Ft(Ft(Ft({},Ut(this.props,!1)),Ut(u,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var h=+(s==="top"&&!l||s==="bottom"&&l);f=Ft(Ft({},f),{},{x1:t,y1:n+h*i,x2:t+r,y2:n+h*i})}else{var p=+(s==="left"&&!l||s==="right"&&l);f=Ft(Ft({},f),{},{x1:t+p*r,y1:n,x2:t+p*r,y2:n+i})}return E.createElement("line",zs({},f,{className:nt("recharts-cartesian-axis-line",Io(u,"className"))}))}static renderTickItem(t,n,r){var i,s=nt(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(t))i=E.cloneElement(t,Ft(Ft({},n),{},{className:s}));else if(typeof t=="function")i=t(Ft(Ft({},n),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=nt(l,t.className)),i=E.createElement(Dh,zs({},n,{className:l}),r)}return i}renderTicks(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:l,tickFormatter:u,unit:f,padding:h,tickTextProps:p}=this.props,m=Gb(Ft(Ft({},this.props),{},{ticks:r}),t,n),g=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),S=qo(this.props),A=Ut(l,!1),C=Ft(Ft({},S),{},{fill:"none"},Ut(i,!1)),P=m.map((O,T)=>{var{line:j,tick:N}=this.getTickLineCoord(O),D=Ft(Ft(Ft(Ft({textAnchor:g,verticalAnchor:x},S),{},{stroke:"none",fill:s},A),N),{},{index:T,payload:O,visibleTicksCount:m.length,tickFormatter:u,padding:h},p);return E.createElement(qn,zs({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Qc(this.props,O,T)),i&&E.createElement("line",zs({},C,j,{className:nt("recharts-cartesian-axis-tick-line",Io(i,"className"))})),l&&Gi.renderTickItem(l,D,"".concat(typeof u=="function"?u(O.value,T):O.value).concat(f||"")))});return P.length>0?E.createElement("g",{className:"recharts-cartesian-axis-ticks"},P):null}render(){var{axisLine:t,width:n,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:l}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:E.createElement(qn,{className:nt("recharts-cartesian-axis",i),ref:u=>{if(u){var f=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(f);var h=f[0];if(h){var p=window.getComputedStyle(h).fontSize,m=window.getComputedStyle(h).letterSpacing;(p!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(h).fontSize,letterSpacing:window.getComputedStyle(h).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),E.createElement(Fz,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},E.createElement(nG,{label:this.props.label}),this.props.children))}}Hb(Gi,"displayName","CartesianAxis");Hb(Gi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var DH=["x1","y1","x2","y2","key"],NH=["offset"],jH=["xAxisId","yAxisId"],MH=["xAxisId","yAxisId"];function Aw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Aw(Object(n),!0).forEach(function(r){kH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kH(e,t,n){return(t=RH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RH(e){var t=IH(e,"string");return typeof t=="symbol"?t:t+""}function IH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},No.apply(null,arguments)}function Ff(e,t){if(e==null)return{};var n,r,i=LH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function LH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var $H=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:l,ry:u}=e;return E.createElement("rect",{x:r,y:i,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function hN(e,t){var n;if(E.isValidElement(e))n=E.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:r,y1:i,x2:s,y2:l,key:u}=t,f=Ff(t,DH),h=qo(f),{offset:p}=h,m=Ff(h,NH);n=E.createElement("line",No({},m,{x1:r,y1:i,x2:s,y2:l,fill:"none",key:u}))}return n}function BH(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Ff(e,jH),f=i.map((h,p)=>{var m=En(En({},u),{},{x1:t,y1:h,x2:t+n,y2:h,key:"line-".concat(p),index:p});return hN(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function UH(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:l}=e,u=Ff(e,MH),f=i.map((h,p)=>{var m=En(En({},u),{},{x1:h,y1:t,x2:h,y2:t+n,key:"line-".concat(p),index:p});return hN(r,m)});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function zH(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:s,height:l,horizontalPoints:u,horizontal:f=!0}=e;if(!f||!t||!t.length)return null;var h=u.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==h[0]&&h.unshift(0);var p=h.map((m,g)=>{var x=!h[g+1],S=x?i+l-m:h[g+1]-m;if(S<=0)return null;var A=g%t.length;return E.createElement("rect",{key:"react-".concat(g),y:m,x:r,height:S,width:s,stroke:"none",fill:t[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function GH(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:l,height:u,verticalPoints:f}=e;if(!t||!n||!n.length)return null;var h=f.map(m=>Math.round(m+i-i)).sort((m,g)=>m-g);i!==h[0]&&h.unshift(0);var p=h.map((m,g)=>{var x=!h[g+1],S=x?i+l-m:h[g+1]-m;if(S<=0)return null;var A=g%n.length;return E.createElement("rect",{key:"react-".concat(g),x:m,y:s,width:S,height:u,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var HH=(e,t)=>{var{xAxis:n,width:r,height:i,offset:s}=e;return cT(Gb(En(En(En({},Gi.defaultProps),n),{},{ticks:uT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,t)},qH=(e,t)=>{var{yAxis:n,width:r,height:i,offset:s}=e;return cT(Gb(En(En(En({},Gi.defaultProps),n),{},{ticks:uT(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,t)},YH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function pN(e){var t=x0(),n=S0(),r=pT(),i=En(En({},jr(e,YH)),{},{x:_e(e.x)?e.x:r.left,y:_e(e.y)?e.y:r.top,width:_e(e.width)?e.width:r.width,height:_e(e.height)?e.height:r.height}),{xAxisId:s,yAxisId:l,x:u,y:f,width:h,height:p,syncWithTicks:m,horizontalValues:g,verticalValues:x}=i,S=Nr(),A=we(U=>xP(U,"xAxis",s,S)),C=we(U=>xP(U,"yAxis",l,S));if(!_e(h)||h<=0||!_e(p)||p<=0||!_e(u)||u!==+u||!_e(f)||f!==+f)return null;var P=i.verticalCoordinatesGenerator||HH,O=i.horizontalCoordinatesGenerator||qH,{horizontalPoints:T,verticalPoints:j}=i;if((!T||!T.length)&&typeof O=="function"){var N=g&&g.length,D=O({yAxis:C?En(En({},C),{},{ticks:N?g:C.ticks}):void 0,width:t,height:n,offset:r},N?!0:m);Rc(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(T=D)}if((!j||!j.length)&&typeof P=="function"){var M=x&&x.length,R=P({xAxis:A?En(En({},A),{},{ticks:M?x:A.ticks}):void 0,width:t,height:n,offset:r},M?!0:m);Rc(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(j=R)}return E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement($H,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement(zH,No({},i,{horizontalPoints:T})),E.createElement(GH,No({},i,{verticalPoints:j})),E.createElement(BH,No({},i,{offset:r,horizontalPoints:T,xAxis:A,yAxis:C})),E.createElement(UH,No({},i,{offset:r,verticalPoints:j,xAxis:A,yAxis:C})))}pN.displayName="CartesianGrid";var FH=["children"],VH=["dangerouslySetInnerHTML","ticks"],KH=["id"];function mN(e,t,n){return(t=XH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rv.apply(null,arguments)}function Iv(e,t){if(e==null)return{};var n,r,i=QH(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function QH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function ZH(e){var t=Ct(),n=E.useMemo(()=>{var{children:r}=e,i=Iv(e,FH);return i},[e]);return E.useEffect(()=>(t(B7(n)),()=>{t(U7(n))}),[n,t]),e.children}var JH=e=>{var{xAxisId:t,className:n}=e,r=we(v0),i=Nr(),s="xAxis",l=we(C=>fl(C,s,t,i)),u=we(C=>oD(C,s,t,i)),f=we(C=>nD(C,t)),h=we(C=>b6(C,t)),p=we(C=>M_(C,t));if(f==null||h==null||p==null)return null;var{dangerouslySetInnerHTML:m,ticks:g}=e,x=Iv(e,VH),{id:S}=p,A=Iv(p,KH);return E.createElement(Gi,Rv({},x,A,{scale:l,x:h.x,y:h.y,width:f.width,height:f.height,className:nt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:u}))},eq=e=>{var t,n,r,i,s;return E.createElement(ZH,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},E.createElement(JH,e))};class qb extends E.Component{render(){return E.createElement(eq,this.props)}}mN(qb,"displayName","XAxis");mN(qb,"defaultProps",{allowDataOverflow:tr.allowDataOverflow,allowDecimals:tr.allowDecimals,allowDuplicatedCategory:tr.allowDuplicatedCategory,height:tr.height,hide:!1,mirror:tr.mirror,orientation:tr.orientation,padding:tr.padding,reversed:tr.reversed,scale:tr.scale,tickCount:tr.tickCount,type:tr.type,xAxisId:0});var tq=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=e,l=0;if(t){t.forEach(p=>{if(p){var m=p.getBoundingClientRect();m.width>l&&(l=m.width)}});var u=n?n.getBoundingClientRect().width:0,f=i+s,h=l+f+u+(n?r:0);return Math.round(h)}return 0},nq=["dangerouslySetInnerHTML","ticks"],rq=["id"];function gN(e,t,n){return(t=aq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aq(e){var t=iq(e,"string");return typeof t=="symbol"?t:t+""}function iq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lv.apply(null,arguments)}function Ew(e,t){if(e==null)return{};var n,r,i=oq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function oq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function sq(e){var t=Ct();return E.useEffect(()=>(t(z7(e)),()=>{t(G7(e))}),[e,t]),null}var lq=e=>{var t,{yAxisId:n,className:r,width:i,label:s}=e,l=E.useRef(null),u=E.useRef(null),f=we(v0),h=Nr(),p=Ct(),m="yAxis",g=we(D=>fl(D,m,n,h)),x=we(D=>rD(D,n)),S=we(D=>x6(D,n)),A=we(D=>oD(D,m,n,h)),C=we(D=>k_(D,n));if(E.useLayoutEffect(()=>{var D;if(!(i!=="auto"||!x||Nb(s)||E.isValidElement(s)||C==null)){var M=l.current,R=M==null||(D=M.tickRefs)===null||D===void 0?void 0:D.current,{tickSize:U,tickMargin:K}=M.props,q=tq({ticks:R,label:u.current,labelGapWithTick:5,tickSize:U,tickMargin:K});Math.round(x.width)!==Math.round(q)&&p(H7({id:n,width:q}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,x?.width,x,p,s,n,i]),x==null||S==null||C==null)return null;var{dangerouslySetInnerHTML:P,ticks:O}=e,T=Ew(e,nq),{id:j}=C,N=Ew(C,rq);return E.createElement(Gi,Lv({},T,N,{ref:l,labelRef:u,scale:g,x:S.x,y:S.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:x.width,height:x.height,className:nt("recharts-".concat(m," ").concat(m),r),viewBox:f,ticks:A}))},cq=e=>{var t,n,r,i,s;return E.createElement(E.Fragment,null,E.createElement(sq,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(r=e.angle)!==null&&r!==void 0?r:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),E.createElement(lq,e))},uq={allowDataOverflow:nr.allowDataOverflow,allowDecimals:nr.allowDecimals,allowDuplicatedCategory:nr.allowDuplicatedCategory,hide:!1,mirror:nr.mirror,orientation:nr.orientation,padding:nr.padding,reversed:nr.reversed,scale:nr.scale,tickCount:nr.tickCount,type:nr.type,width:nr.width,yAxisId:0};class Yb extends E.Component{render(){return E.createElement(cq,this.props)}}gN(Yb,"displayName","YAxis");gN(Yb,"defaultProps",uq);var ky={exports:{}},Ry={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function dq(){if(Cw)return Ry;Cw=1;var e=rl();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Ry.useSyncExternalStoreWithSelector=function(f,h,p,m,g){var x=i(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function C(N){if(!P){if(P=!0,O=N,N=m(N),g!==void 0&&S.hasValue){var D=S.value;if(g(D,N))return T=D}return T=N}if(D=T,n(O,N))return D;var M=m(N);return g!==void 0&&g(D,M)?(O=N,D):(O=N,T=M)}var P=!1,O,T,j=p===void 0?null:p;return[function(){return C(h())},j===null?void 0:function(){return C(j())}]},[h,p,m,g]);var A=r(f,x[0],x[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),u(A),A},Ry}var Pw;function fq(){return Pw||(Pw=1,ky.exports=dq()),ky.exports}fq();function hq(e){e()}function pq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){hq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var ww={notify(){},get:()=>[]};function mq(e,t){let n,r=ww,i=0,s=!1;function l(A){p();const C=r.subscribe(A);let P=!1;return()=>{P||(P=!0,C(),m())}}function u(){r.notify()}function f(){S.onStateChange&&S.onStateChange()}function h(){return s}function p(){i++,n||(n=e.subscribe(f),r=pq())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=ww)}function g(){s||(s=!0,p())}function x(){s&&(s=!1,m())}const S={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:h,trySubscribe:g,tryUnsubscribe:x,getListeners:()=>r};return S}var gq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yq=gq(),vq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",bq=vq(),xq=()=>yq||bq?E.useLayoutEffect:E.useEffect,Sq=xq(),Aq=Symbol.for("react-redux-context"),Eq=typeof globalThis<"u"?globalThis:{};function Cq(){if(!E.createContext)return{};const e=Eq[Aq]??=new Map;let t=e.get(E.createContext);return t||(t=E.createContext(null),e.set(E.createContext,t)),t}var Pq=Cq();function wq(e){const{children:t,context:n,serverState:r,store:i}=e,s=E.useMemo(()=>{const f=mq(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),l=E.useMemo(()=>i.getState(),[i]);Sq(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,l]);const u=n||Pq;return E.createElement(u.Provider,{value:s},t)}var Oq=wq,Tq=(e,t)=>t,Fb=Z([Tq,Xe,D_,Qt,SD,Wa,CU,Xt],_U),Vb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},yN=_r("mouseClick"),vN=Jc();vN.startListening({actionCreator:yN,effect:(e,t)=>{var n=e.payload,r=Fb(t.getState(),Vb(n));r?.activeIndex!=null&&t.dispatch(M6({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var $v=_r("mouseMove"),bN=Jc();bN.startListening({actionCreator:$v,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Ab(r,r.tooltip.settings.shared),s=Fb(r,Vb(n));i==="axis"&&(s?.activeIndex!=null?t.dispatch(pD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(hD()))}});function _q(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Ow={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},xN=cr({name:"rootProps",initialState:Ow,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:Ow.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Dq=xN.reducer,{updateOptions:Nq}=xN.actions,SN=cr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:jq}=SN.actions,Mq=SN.reducer,AN=_r("keyDown"),EN=_r("focus"),Kb=Jc();Kb.startListening({actionCreator:AN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(Eb(i,pl(n))),u=Wa(n);if(s==="Enter"){var f=Uf(n,"axis","hover",String(i.index));t.dispatch(_v({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:f}));return}var h=C6(n),p=h==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=l+m*p;if(!(u==null||g>=u.length||g<0)){var x=Uf(n,"axis","hover",String(g));t.dispatch(_v({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Kb.startListening({actionCreator:EN,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",l=Uf(n,"axis","hover",String(s));t.dispatch(_v({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Pr=_r("externalEvent"),CN=Jc();CN.startListening({actionCreator:Pr,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),r={activeCoordinate:mU(n),activeDataKey:PD(n),activeIndex:Uo(n),activeLabel:CD(n),activeTooltipIndex:Uo(n),isTooltipActive:gU(n)};e.payload.handler(r,e.payload.reactEvent)}}});var kq=Z([hl],e=>e.tooltipItemPayloads),Rq=Z([kq,uu,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(u=>u.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var l=t(s,n);return l}}}),PN=_r("touchMove"),wN=Jc();wN.startListening({actionCreator:PN,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=Ab(r,r.tooltip.settings.shared);if(i==="axis"){var s=Fb(r,Vb({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&t.dispatch(pD({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0],f=document.elementFromPoint(u.clientX,u.clientY);if(!f||!f.getAttribute)return;var h=f.getAttribute(fT),p=(l=f.getAttribute(hT))!==null&&l!==void 0?l:void 0,m=Rq(t.getState(),h,p);t.dispatch(fD({activeDataKey:p,activeIndex:h,activeCoordinate:m}))}}});var Iq=$2({brush:oH,cartesianAxis:q7,chartData:YU,errorBars:a9,graphicalItems:l7,layout:O4,legend:y3,options:UU,polarAxis:CG,polarOptions:Mq,referenceElements:hH,rootProps:Dq,tooltip:k6}),Lq=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return ZL({reducer:Iq,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([vN.middleware,bN.middleware,Kb.middleware,CN.middleware,wN.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:_q},name:"recharts-".concat(n)}})};function ON(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=Nr(),s=E.useRef(null);if(i)return n;s.current==null&&(s.current=Lq(t,r));var l=d0;return E.createElement(Oq,{context:l,store:s.current},n)}function TN(e){var{layout:t,width:n,height:r,margin:i}=e,s=Ct(),l=Nr();return E.useEffect(()=>{l||(s(C4(t)),s(P4({width:n,height:r})),s(E4(i)))},[s,l,t,n,r,i]),null}function _N(e){var t=Ct();return E.useEffect(()=>{t(Nq(e))},[t,e]),null}var $q=["children"];function Bq(e,t){if(e==null)return{};var n,r,i=Uq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Uq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Vf(){return Vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vf.apply(null,arguments)}var zq={width:"100%",height:"100%"},Gq=E.forwardRef((e,t)=>{var n=x0(),r=S0(),i=vT();if(!Xs(n)||!Xs(r))return null;var{children:s,otherAttributes:l,title:u,desc:f}=e,h,p;return typeof l.tabIndex=="number"?h=l.tabIndex:h=i?0:void 0,typeof l.role=="string"?p=l.role:p=i?"application":void 0,E.createElement(n0,Vf({},l,{title:u,desc:f,role:p,tabIndex:h,width:n,height:r,style:zq,ref:t}),s)}),Hq=e=>{var{children:t}=e,n=we(dh);if(!n)return null;var{width:r,height:i,y:s,x:l}=n;return E.createElement(n0,{width:r,height:i,x:l,y:s},t)},Tw=E.forwardRef((e,t)=>{var{children:n}=e,r=Bq(e,$q),i=Nr();return i?E.createElement(Hq,null,n):E.createElement(Gq,Vf({ref:t},r),n)});function qq(){var e=Ct(),[t,n]=E.useState(null),r=we(n3);return E.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;lr(s)&&s!==r&&e(w4(s))}},[t,e,r]),n}function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_w(Object(n),!0).forEach(function(r){Fq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fq(e,t,n){return(t=Vq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vq(e){var t=Kq(e,"string");return typeof t=="symbol"?t:t+""}function Kq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xq=E.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:l,onDoubleClick:u,onMouseDown:f,onMouseEnter:h,onMouseLeave:p,onMouseMove:m,onMouseUp:g,onTouchEnd:x,onTouchMove:S,onTouchStart:A,style:C,width:P}=e,O=Ct(),[T,j]=E.useState(null),[N,D]=E.useState(null);ez();var M=qq(),R=E.useCallback(F=>{M(F),typeof t=="function"&&t(F),j(F),D(F)},[M,t,j,D]),U=E.useCallback(F=>{O(yN(F)),O(Pr({handler:s,reactEvent:F}))},[O,s]),K=E.useCallback(F=>{O($v(F)),O(Pr({handler:h,reactEvent:F}))},[O,h]),q=E.useCallback(F=>{O(hD()),O(Pr({handler:p,reactEvent:F}))},[O,p]),W=E.useCallback(F=>{O($v(F)),O(Pr({handler:m,reactEvent:F}))},[O,m]),le=E.useCallback(()=>{O(EN())},[O]),ie=E.useCallback(F=>{O(AN(F.key))},[O]),te=E.useCallback(F=>{O(Pr({handler:l,reactEvent:F}))},[O,l]),L=E.useCallback(F=>{O(Pr({handler:u,reactEvent:F}))},[O,u]),ee=E.useCallback(F=>{O(Pr({handler:f,reactEvent:F}))},[O,f]),he=E.useCallback(F=>{O(Pr({handler:g,reactEvent:F}))},[O,g]),Se=E.useCallback(F=>{O(Pr({handler:A,reactEvent:F}))},[O,A]),k=E.useCallback(F=>{O(PN(F)),O(Pr({handler:S,reactEvent:F}))},[O,S]),J=E.useCallback(F=>{O(Pr({handler:x,reactEvent:F}))},[O,x]);return E.createElement(ND.Provider,{value:T},E.createElement(i2.Provider,{value:N},E.createElement("div",{className:nt("recharts-wrapper",r),style:Yq({position:"relative",cursor:"default",width:P,height:i},C),onClick:U,onContextMenu:te,onDoubleClick:L,onFocus:le,onKeyDown:ie,onMouseDown:ee,onMouseEnter:K,onMouseLeave:q,onMouseMove:W,onMouseUp:he,onTouchEnd:J,onTouchMove:k,onTouchStart:Se,ref:R},n)))}),Wq=["children","className","width","height","style","compact","title","desc"];function Qq(e,t){if(e==null)return{};var n,r,i=Zq(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Zq(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var DN=E.forwardRef((e,t)=>{var{children:n,className:r,width:i,height:s,style:l,compact:u,title:f,desc:h}=e,p=Qq(e,Wq),m=qo(p);return u?E.createElement(Tw,{otherAttributes:m,title:f,desc:h},n):E.createElement(Xq,{className:r,style:l,width:i,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},E.createElement(Tw,{otherAttributes:m,title:f,desc:h,ref:t},E.createElement(mH,null,n)))}),Jq=["width","height"];function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bv.apply(null,arguments)}function eY(e,t){if(e==null)return{};var n,r,i=tY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var nY={top:5,right:5,bottom:5,left:5},rY={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:nY,reverseStackOrder:!1,syncMethod:"index"},aY=E.forwardRef(function(t,n){var r,i=jr(t.categoricalChartProps,rY),{width:s,height:l}=i,u=eY(i,Jq);if(!Xs(s)||!Xs(l))return null;var{chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,categoricalChartProps:g}=t,x={chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:p,tooltipPayloadSearcher:m,eventEmitter:void 0};return E.createElement(ON,{preloadedState:{options:x},reduxStoreName:(r=g.id)!==null&&r!==void 0?r:f},E.createElement(cN,{chartData:g.data}),E.createElement(TN,{width:s,height:l,layout:i.layout,margin:i.margin}),E.createElement(_N,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(DN,Bv({},u,{width:s,height:l,ref:n})))}),iY=["axis","item"],oY=E.forwardRef((e,t)=>E.createElement(aY,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:iY,tooltipPayloadSearcher:jD,categoricalChartProps:e,ref:t}));function sY(e){var t=Ct();return E.useEffect(()=>{t(jq(e))},[t,e]),null}var lY=["width","height","layout"];function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uv.apply(null,arguments)}function cY(e,t){if(e==null)return{};var n,r,i=uY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var dY={top:5,right:5,bottom:5,left:5},fY={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:dY,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},hY=E.forwardRef(function(t,n){var r,i=jr(t.categoricalChartProps,fY),{width:s,height:l,layout:u}=i,f=cY(i,lY);if(!Xs(s)||!Xs(l))return null;var{chartName:h,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:g}=t,x={chartName:h,defaultTooltipEventType:p,validateTooltipEventTypes:m,tooltipPayloadSearcher:g,eventEmitter:void 0};return E.createElement(ON,{preloadedState:{options:x},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:h},E.createElement(cN,{chartData:i.data}),E.createElement(TN,{width:s,height:l,layout:u,margin:i.margin}),E.createElement(_N,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(sY,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),E.createElement(DN,Uv({width:s,height:l},f,{ref:n})))}),pY=["item"],mY={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Dw=E.forwardRef((e,t)=>{var n=jr(e,mY);return E.createElement(hY,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:pY,tooltipPayloadSearcher:jD,categoricalChartProps:n,ref:t})});const gY=({card:e,onClose:t})=>e?v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:t,children:v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80 transform scale-150",onClick:n=>n.stopPropagation(),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Lc,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})}):null,yY=({selectedDrones:e,fullCardCollection:t,deck:n,onDeckChange:r,onConfirmDeck:i,onImportDeck:s})=>{const[l,u]=E.useState(null),[f,h]=E.useState(!1),[p,m]=E.useState(!1),[g,x]=E.useState({cost:{min:0,max:99},target:"all",type:"all",abilities:[],hideEnhanced:!1}),[S,A]=E.useState(!1),C=E.useRef(null),[P,O]=E.useState({key:"name",direction:"ascending"}),[T,j]=E.useState("cost"),[N,D]=E.useState(!0),M=E.useMemo(()=>{const z=ae=>ae?ae.replace(/_/g," ").toLowerCase().split(" ").map(pe=>pe.charAt(0).toUpperCase()+pe.slice(1)).join(" "):"";return t.map(ae=>{const ve=[],pe=ae.effect;if(pe.type==="REPEATING_EFFECT")ve.push(z(pe.type)),pe.effects&&Array.isArray(pe.effects)&&pe.effects.forEach(ue=>{ue.type&&ve.push(z(ue.type))});else if(pe.type==="MODIFY_DRONE_BASE"&&pe.mod){const ue=pe.mod.stat,be=pe.mod.value;ue==="attack"?ve.push(be>0?"Attack Buff":"Attack Debuff"):ue==="speed"?ve.push(be>0?"Speed Buff":"Speed Debuff"):ue==="shields"?ve.push(be>0?"Shield Buff":"Shield Debuff"):ue==="cost"?ve.push(be<0?"Cost Reduction":"Cost Increase"):ue==="limit"?ve.push(be>0?"Limit Buff":"Limit Debuff"):ue==="ability"?(ve.push("Ability Grant"),pe.mod.abilityToAdd&&pe.mod.abilityToAdd.name&&ve.push(pe.mod.abilityToAdd.name)):ve.push(z(`${ue} Modification`))}else if(pe.type==="MODIFY_STAT"&&pe.mod){const ue=pe.mod.stat,be=pe.mod.value;pe.mod.type,ue==="attack"?ve.push(be>0?"Attack Buff":"Attack Debuff"):ue==="speed"?ve.push(be>0?"Speed Buff":"Speed Debuff"):ue==="shields"?ve.push(be>0?"Shield Buff":"Shield Debuff"):ve.push(be>0?`${ue} Buff`:`${ue} Debuff`)}else pe.type==="SEARCH_AND_DRAW"?(ve.push(z(pe.type)),ve.push("Draw")):pe.type&&ve.push(z(pe.type));pe.goAgain&&ve.push("Go Again"),pe.damageType==="PIERCING"&&ve.push("Piercing"),pe.mod?.type&&ve.push(z(pe.mod.type));const oe=(()=>{if(ae.targeting){const ue=z(ae.targeting.type);if(ae.targeting.affinity){const be=ae.targeting.affinity.charAt(0)+ae.targeting.affinity.slice(1).toLowerCase();return`${ue} (${be})`}return ue}else if(pe.type==="MULTI_MOVE"&&pe.source){const ue=pe.source.location||"Any",be=pe.source.affinity||"Any",de=be.charAt(0).toUpperCase()+be.slice(1).toLowerCase();return`${z(ue)} (${de})`}else if(pe.type==="SINGLE_MOVE")return"Drone (Friendly)";return"N/A"})();return{...ae,keywords:ve,targetingText:oe}})},[t]),R=E.useMemo(()=>{const z=new Set,ae=new Set,ve=new Set;M.forEach(oe=>{z.add(oe.cost),ae.add(oe.targetingText),oe.keywords.forEach(ue=>ve.add(ue))});const pe=Array.from(z);return{minCost:Math.min(...pe),maxCost:Math.max(...pe),targets:["all",...Array.from(ae).sort()],abilities:Array.from(ve).sort()}},[M]);E.useEffect(()=>{R.minCost!==1/0&&R.maxCost!==-1/0&&x(z=>({...z,cost:{min:R.minCost,max:R.maxCost}}))},[R.minCost,R.maxCost]);const{cardCount:U,deckListForDisplay:K,baseCardCounts:q}=E.useMemo(()=>{const z={};let ae=0;Object.entries(n).forEach(([pe,oe])=>{if(oe>0){ae+=oe;const ue=M.find(be=>be.id===pe);if(ue){const be=ue.baseCardId;z[be]=(z[be]||0)+oe}}});const ve=Object.entries(n).filter(([,pe])=>pe>0).map(([pe,oe])=>({...M.find(be=>be.id===pe),quantity:oe})).sort((pe,oe)=>pe.name.localeCompare(oe.name));return{cardCount:ae,deckListForDisplay:ve,baseCardCounts:z}},[n,M]),W=U>=40,le=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF","#FF1943","#A45D5D","#8C5DA4"],ie=E.useMemo(()=>{const z={};K.forEach(oe=>{const ue=oe.cost||0;z[ue]=(z[ue]||0)+oe.quantity});const ae=Object.entries(z).map(([oe,ue])=>({name:`${oe}`,count:ue})).sort((oe,ue)=>parseInt(oe.name)-parseInt(ue.name)),ve={};K.forEach(oe=>{oe.keywords&&oe.keywords.forEach(ue=>{ve[ue]=(ve[ue]||0)+oe.quantity})});const pe=Object.entries(ve).map(([oe,ue])=>({name:oe,value:ue})).sort((oe,ue)=>ue.value-oe.value);return{barChartData:ae,pieChartData:pe}},[K]),te=E.useMemo(()=>{let z=[...M].filter(ae=>ae.cost<g.cost.min||ae.cost>g.cost.max||g.target!=="all"&&ae.targetingText!==g.target||g.type!=="all"&&ae.type!==g.type?!1:g.abilities.length>0?g.abilities.every(ve=>ae.keywords.includes(ve)):!(g.hideEnhanced&&ae.id.endsWith("_ENHANCED")));return P.key!==null&&z.sort((ae,ve)=>{const pe=ae[P.key],oe=ve[P.key];if(pe==null&&oe==null)return 0;if(pe==null)return 1;if(oe==null)return-1;const ue=String(pe).toLowerCase(),be=String(oe).toLowerCase();return ue<be?P.direction==="ascending"?-1:1:ue>be?P.direction==="ascending"?1:-1:ae.id.localeCompare(ve.id)}),z},[M,g,P]),L=z=>{let ae="ascending";P.key===z&&P.direction==="ascending"&&(ae="descending"),O({key:z,direction:ae})},ee=(z,ae)=>{x(ve=>({...ve,[z]:ae}))},he=z=>{x(ae=>{const ve=ae.abilities.includes(z)?ae.abilities.filter(pe=>pe!==z):[...ae.abilities,z];return{...ae,abilities:ve}})},Se=()=>{x({cost:{min:R.minCost,max:R.maxCost},target:"all",type:"all",abilities:[],hideEnhanced:!1}),A(!1)},k=()=>{Object.keys(n).forEach(z=>{n[z]>0&&r(z,0)})};E.useEffect(()=>{const z=ae=>{C.current&&!C.current.contains(ae.target)&&A(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const J=Math.PI/180,F=({cx:z,cy:ae,midAngle:ve,outerRadius:pe,fill:oe,name:ue,value:be})=>{const de=Math.sin(-J*ve),rt=Math.cos(-J*ve),Le=z+(pe+5)*rt,Pt=ae+(pe+5)*de,kt=z+(pe+15)*rt,ft=ae+(pe+15)*de,Fr=kt+(rt>=0?1:-1)*12,ha=ft,Xo=rt>=0?"start":"end";return v.jsxs("g",{children:[v.jsx("path",{d:`M${Le},${Pt}L${kt},${ft}L${Fr},${ha}`,stroke:oe,fill:"none"}),v.jsx("circle",{cx:Fr,cy:ha,r:2,fill:oe,stroke:"none"}),v.jsx("text",{x:Fr+(rt>=0?1:-1)*8,y:ha,dy:4,textAnchor:Xo,fill:"#9CA3AF",fontSize:"11px",children:`${ue} (${be})`})]})},ne=()=>{const[z,ae]=E.useState(""),ve=E.useRef(null),pe=E.useMemo(()=>Object.entries(n).map(([ue,be])=>`${ue}:${be}`).join(","),[n]),oe=()=>{ve.current.select(),document.execCommand("copy"),ae("Copied!"),setTimeout(()=>ae(""),2e3)};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>h(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:ue=>ue.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Export Deck Code"})," ",v.jsx("p",{className:"text-gray-400 mb-4",children:"Copy the code below to save or share your deck."}),v.jsx("textarea",{ref:ve,readOnly:!0,value:pe,className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono"}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("span",{className:"text-green-400 self-center",children:z}),v.jsxs("button",{onClick:oe,className:"flex items-center gap-2 bg-cyan-600 text-white font-bold py-2 px-4 rounded hover:bg-cyan-700",children:[v.jsx(zw,{size:16})," Copy to Clipboard"]}),v.jsxs("button",{onClick:()=>h(!1),className:"flex items-center gap-2 bg-pink-600 text-white font-bold py-2 px-4 rounded hover:bg-pink-700",children:[v.jsx(Kt,{size:16})," Close"]})]})]})})},me=()=>{const[z,ae]=E.useState(""),[ve,pe]=E.useState(""),oe=()=>{pe("");const ue=s(z);ue.success?m(!1):pe(ue.message||"Invalid deck code format.")};return v.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>m(!1),children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 w-full max-w-2xl",onClick:ue=>ue.stopPropagation(),children:[v.jsx("h2",{className:"text-xl font-orbitron mb-4",children:"Import Deck Code"}),v.jsx("p",{className:"text-gray-400 mb-4",children:"Paste a deck code below to load it into the builder."}),v.jsx("textarea",{value:z,onChange:ue=>ae(ue.target.value),className:"w-full h-32 p-2 bg-gray-800 border border-gray-600 rounded text-gray-300 font-mono",placeholder:"CARD001:4,CARD002:2,..."}),ve&&v.jsx("p",{className:"text-red-500 mt-2",children:ve}),v.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[v.jsx("button",{onClick:()=>m(!1),className:"bg-gray-600 text-white font-bold py-2 px-4 rounded hover:bg-gray-700",children:"Cancel"}),v.jsx("button",{onClick:oe,className:"bg-purple-600 text-white font-bold py-2 px-4 rounded hover:bg-purple-700",children:"Load Deck"})]})]})})};return v.jsxs("div",{className:"w-full h-full flex flex-col text-white font-exo mt-8 text-sm",children:[l&&v.jsx(gY,{card:l,onClose:()=>u(null)}),f&&v.jsx(ne,{}),p&&v.jsx(me,{}),v.jsxs("div",{className:"flex justify-center items-center mb-4",children:[v.jsx("h1",{className:"text-3xl font-orbitron font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500",children:"Deck Builder"}),v.jsxs("div",{className:"flex gap-4 ml-8",children:[v.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(UM,{size:16})," Import"]}),v.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 bg-slate-700 text-white font-bold py-2 px-4 rounded hover:bg-slate-600",children:[v.jsx(EM,{size:16})," Export"]})]})]}),v.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[v.jsxs("div",{className:"w-2/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-xl font-orbitron",children:"Available Cards"}),v.jsx("button",{onClick:Se,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Filters"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[v.jsxs("div",{className:"filter-select flex flex-col justify-center",children:[v.jsxs("label",{className:"text-center text-gray-400 mb-1",children:["Cost Range: ",g.cost.min," - ",g.cost.max]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"range",min:R.minCost,max:R.maxCost,value:g.cost.min,onChange:z=>ee("cost",{...g.cost,min:Math.min(parseInt(z.target.value),g.cost.max)}),className:"w-1/2"}),v.jsx("input",{type:"range",min:R.minCost,max:R.maxCost,value:g.cost.max,onChange:z=>ee("cost",{...g.cost,max:Math.max(parseInt(z.target.value),g.cost.min)}),className:"w-1/2"})]})]}),v.jsxs("div",{className:"relative",ref:C,children:[v.jsx("button",{onClick:()=>A(!S),className:"filter-select w-full text-left h-full",children:g.abilities.length===0?"Select Abilities":`${g.abilities.length} Abilities Selected`}),S&&v.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-gray-600 mt-1 rounded-md z-10 max-h-60 overflow-y-auto",children:R.abilities.map(z=>v.jsxs("label",{className:"flex items-center p-2 hover:bg-slate-700 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:g.abilities.includes(z),onChange:()=>he(z),className:"mr-2"}),z]},z))})]}),v.jsxs("select",{onChange:z=>ee("type",z.target.value),value:g.type,className:"filter-select h-full",children:[v.jsx("option",{value:"all",children:"All Types"}),v.jsx("option",{value:"Action",children:"Action Cards"}),v.jsx("option",{value:"Upgrade",children:"Upgrade Cards"})]}),v.jsx("div",{className:"filter-select flex items-center justify-center h-full",children:v.jsxs("label",{className:"flex items-center cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:g.hideEnhanced,onChange:z=>ee("hideEnhanced",z.target.checked),className:"mr-2"}),v.jsx("span",{className:"text-gray-300",children:"Hide Enhanced Cards"})]})})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:v.jsxs("table",{className:"w-full text-left deck-builder-table",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:"Info"}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("name"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="name"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Name",P.key==="name"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("type"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="type"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Type",P.key==="type"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("cost"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="cost"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Cost",P.key==="cost"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:v.jsxs("button",{onClick:()=>L("description"),className:`w-full text-left transition-colors underline cursor-pointer ${P.key==="description"?"text-cyan-400":"hover:text-cyan-400"}`,children:["Description",P.key==="description"&&(P.direction==="ascending"?" ":" ")]})}),v.jsx("th",{children:"Abilities"}),v.jsx("th",{children:"Targeting"}),v.jsx("th",{children:"Quantity"})]})}),v.jsx("tbody",{children:te.map((z,ae)=>{const ve=n[z.id]||0,pe=q[z.baseCardId]||0,oe=z.maxInDeck;return v.jsxs("tr",{className:z.type==="Upgrade"?"bg-purple-900/10":"",children:[v.jsx("td",{children:v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white",children:v.jsx(pA,{size:18})})}),v.jsx("td",{className:"font-bold",children:z.name}),v.jsx("td",{className:`font-semibold ${z.type==="Upgrade"?"text-purple-400":"text-cyan-400"}`,children:z.type}),v.jsx("td",{children:z.cost}),v.jsx("td",{className:"text-xs text-gray-400",children:z.description}),v.jsx("td",{children:v.jsx("div",{className:"flex flex-wrap gap-2",children:z.keywords.map(ue=>v.jsx("span",{className:"ability-chip",children:ue},ue))})}),v.jsx("td",{className:"text-xs",children:z.targetingText==="N/A"?v.jsx("span",{className:"text-gray-500",children:"N/A"}):z.targetingText}),v.jsx("td",{children:v.jsx("div",{className:"quantity-buttons",children:Array.from({length:oe+1}).map((ue,be)=>{const de=be===ve,rt=oe-(pe-ve),Le=be>rt;return v.jsx("button",{onClick:()=>r(z.id,be),className:`quantity-btn ${de?"selected":""}`,disabled:Le,children:be},be)})})})]},`${z.id}-${ae}`)})})]})})]}),v.jsxs("div",{className:"w-1/3 flex flex-col bg-slate-900/50 rounded-lg p-4 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:`text-xl font-orbitron transition-colors ${W?"text-green-400":"text-white"}`,children:["Your Deck (",U,"/40)"]}),v.jsx("button",{onClick:k,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Reset Deck"})]}),v.jsx("div",{className:"flex-grow overflow-y-auto pr-2 deck-list",children:K.length>0?K.map(z=>{const ae=q[z.baseCardId]>=z.maxInDeck;return v.jsxs("div",{className:"deck-list-item",children:[v.jsx("button",{onClick:()=>u(z),className:"p-1 text-gray-400 hover:text-white flex-shrink-0 mr-3",title:"View Card Details",children:v.jsx(pA,{size:18})}),v.jsx("span",{className:"flex-grow truncate",title:z.name,children:z.name}),v.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[v.jsx("button",{onClick:()=>r(z.id,z.quantity-1),className:"deck-edit-btn",children:"-"}),v.jsxs("span",{className:"font-bold w-8 text-center",children:["x ",z.quantity]}),v.jsx("button",{onClick:()=>r(z.id,z.quantity+1),disabled:ae,className:"deck-edit-btn",children:"+"})]})]},z.id)}):v.jsx("p",{className:"text-gray-500 italic",children:"Your deck is empty. Add cards from the left."})}),U>0&&v.jsxs("div",{className:"mt-4 pt-4 border-t-2 border-slate-700",children:[v.jsxs("button",{onClick:()=>D(!N),className:"w-full flex justify-center items-center gap-2 text-lg font-orbitron mb-2 text-center text-cyan-300 hover:text-cyan-200 transition-colors",children:["Deck Statistics",v.jsx(jc,{size:20,className:`transition-transform duration-300 ${N?"rotate-0":"rotate-180"}`})]}),v.jsxs("div",{className:`transition-all ease-in-out duration-500 overflow-hidden ${N?"max-h-[320px] opacity-100":"max-h-0 opacity-0"}`,children:[v.jsxs("div",{className:"flex justify-center gap-2 mb-2",children:[v.jsx("button",{onClick:()=>j("cost"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${T==="cost"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Cost"}),v.jsx("button",{onClick:()=>j("type"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${T==="type"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Type"}),v.jsx("button",{onClick:()=>j("ability"),className:`px-3 py-1 text-xs font-bold rounded-full transition-colors ${T==="ability"?"bg-cyan-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:"Abilities"})]}),v.jsxs("div",{className:"text-xs",style:{height:"280px"},children:[T==="cost"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Cost Distribution"}),v.jsx(Cy,{width:"100%",height:"100%",children:v.jsxs(oY,{data:ie.barChartData,margin:{top:5,right:20,left:-15,bottom:0},children:[v.jsx(pN,{strokeDasharray:"3 3",stroke:"#4A5568"}),v.jsx(qb,{dataKey:"name",tick:{fill:"#A0AEC0"},interval:0}),v.jsx(Yb,{allowDecimals:!1,tick:{fill:"#A0AEC0"}}),v.jsx(vy,{cursor:{fill:"rgba(128, 90, 213, 0.2)"},contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}}),v.jsx(sN,{dataKey:"count",fill:"#8884d8",name:"Card Count"})]})})]}),T==="type"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Card Type Distribution"}),v.jsx(Cy,{width:"100%",height:"100%",children:v.jsxs(Dw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(Mv,{data:[{name:"Action Cards",value:K.filter(z=>z.type==="Action").reduce((z,ae)=>z+ae.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:K.filter(z=>z.type==="Upgrade").reduce((z,ae)=>z+ae.quantity,0),color:"#c084fc"}].filter(z=>z.value>0),cx:"50%",cy:"50%",labelLine:!1,label:({name:z,value:ae,percent:ve})=>`${z}: ${ae} (${(ve*100).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Action Cards",value:K.filter(z=>z.type==="Action").reduce((z,ae)=>z+ae.quantity,0),color:"#22d3ee"},{name:"Upgrade Cards",value:K.filter(z=>z.type==="Upgrade").reduce((z,ae)=>z+ae.quantity,0),color:"#c084fc"}].filter(z=>z.value>0).map((z,ae)=>v.jsx(nl,{fill:z.color},`cell-${ae}`))}),v.jsx(vy,{}),v.jsx(fh,{})]})})]}),T==="ability"&&v.jsxs("div",{className:"w-full h-full flex flex-col items-center",children:[v.jsx("h4",{className:"font-semibold mb-1",children:"Ability Breakdown"}),v.jsx(Cy,{width:"100%",height:"100%",children:v.jsxs(Dw,{margin:{top:20,right:30,bottom:20,left:30},children:[v.jsx(Mv,{data:ie.pieChartData,cx:"50%",cy:"50%",labelLine:!1,label:F,outerRadius:60,dataKey:"value",children:ie.pieChartData.map((z,ae)=>v.jsx(nl,{fill:le[ae%le.length]},`cell-${ae}`))}),v.jsx(vy,{contentStyle:{backgroundColor:"#1A202C",border:"1px solid #4A5568"}})]})})]})]})]})]}),v.jsx("button",{onClick:i,disabled:!W,className:"w-full p-4 mt-4 text-lg font-bold font-orbitron rounded-lg bg-purple-600 text-white transition-all duration-300 disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed enabled:hover:bg-purple-500",children:"Confirm Deck"})]})]})]})},Hi=({title:e,text:t,onClose:n,children:r,maxWidthClass:i="max-w-lg"})=>v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:`bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full ${i} relative`,children:[n&&v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:e}),v.jsx("p",{className:"text-center text-gray-400",children:t}),r]})});function vY({localPlayerState:e,opponentPlayerState:t,localPlayerEffectiveStats:n,opponentPlayerEffectiveStats:r,turnPhase:i,turn:s,passInfo:l,firstPlayerOfRound:u,shieldsToAllocate:f,shieldsToRemove:h,shieldsToAdd:p,reallocationPhase:m,totalLocalPlayerDrones:g,totalOpponentPlayerDrones:x,getLocalPlayerId:S,getOpponentPlayerId:A,isMyTurn:C,currentPlayer:P,isMultiplayer:O,handlePlayerPass:T,handleReset:j,mandatoryAction:N,multiSelectState:D,AI_HAND_DEBUG_MODE:M,setShowAiHandModal:R,onShowDebugModal:U}){const[K,q]=E.useState(!1),W=E.useRef(null);return E.useEffect(()=>{const le=ie=>{W.current&&!W.current.contains(ie.target)&&q(!1)};return document.addEventListener("mousedown",le),()=>{document.removeEventListener("mousedown",le)}},[]),v.jsxs("header",{className:"w-full flex justify-between items-center mb-2 flex-shrink-0 px-5 pt-8",children:[v.jsxs("div",{className:"flex flex-col items-start gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-pink-300 flex items-center",children:["Opponent Resources",(i==="deployment"||i==="action")&&u===A()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${A()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${t.energy>r.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(Lc,{className:"text-yellow-300 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[t.energy," / ",r.totals.maxEnergy]})]}),v.jsxs("div",{onClick:()=>M&&setTimeout(()=>R(!0),100),className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${M?"cursor-pointer hover:bg-gray-800":""} ${t.hand.length>r.totals.handLimit?"text-red-400":""}`,children:[v.jsx(wM,{className:"text-gray-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[t.hand.length," / ",r.totals.handLimit]})]}),i==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50",children:[v.jsx(Iy,{className:"text-purple-400 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:s===1?t.initialDeploymentBudget:t.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-pink-500/50 ${x>r.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(hA,{className:"text-cyan-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[x," / ",r.totals.cpuLimit]})]})]})]}),v.jsxs("div",{className:"text-center flex flex-col items-center gap-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-300 tracking-widest font-exo",children:pR(i)}),(i==="deployment"||i==="action")&&v.jsxs("div",{className:"flex items-center gap-3",children:[C()?v.jsx("div",{className:"flex items-center gap-2 text-2xl font-bold text-green-400 tracking-wide",children:v.jsx("span",{children:"Your Turn"})}):v.jsxs("div",{className:"flex items-center gap-2 text-2xl font-bold text-orange-400 tracking-wide",children:[v.jsx(Kf,{className:"animate-spin",size:24}),v.jsx("span",{children:O()?"Opponent's Turn":"AI Thinking..."})]}),C()&&!N&&!D&&v.jsx("button",{onClick:T,disabled:l[`${S()}Passed`],className:`btn-clipped text-white font-bold py-1 px-6 transition-colors duration-200 ${l[`${S()}Passed`]?"bg-gray-700 cursor-not-allowed":"bg-red-600 hover:bg-red-500"}`,children:"Pass"})]})]}),v.jsxs("div",{className:"flex flex-col items-end gap-2",children:[v.jsxs("h2",{className:"text-lg font-bold text-cyan-300 flex items-center",children:["Your Resources",(i==="deployment"||i==="action")&&u===S()&&v.jsx("span",{className:"text-base font-semibold text-yellow-300 ml-2",children:"(First Player)"}),(i==="deployment"||i==="action")&&l[`${S()}Passed`]&&v.jsx("span",{className:"text-base font-semibold text-red-400 ml-2",children:"(Passed)"})]}),v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${e.energy>n.totals.maxEnergy?"text-red-400":""}`,children:[v.jsx(Lc,{className:"text-yellow-300 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[e.energy," / ",n.totals.maxEnergy]})]}),i==="deployment"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(Iy,{className:"text-purple-400 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:s===1?e.initialDeploymentBudget:e.deploymentBudget})]}),v.jsxs("div",{className:`flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50 ${g>n.totals.cpuLimit?"text-red-400":""}`,children:[v.jsx(hA,{className:"text-cyan-400 mr-2"}),v.jsxs("span",{className:"font-bold text-lg",children:[g," / ",n.totals.cpuLimit]})]}),i==="allocateShields"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-cyan-500/50",children:[v.jsx(Wd,{className:"text-cyan-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:f})]}),m==="removing"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-orange-500/50",children:[v.jsx(Wd,{className:"text-orange-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:h})]}),m==="adding"&&v.jsxs("div",{className:"flex items-center bg-gray-900/80 rounded-full px-4 py-2 shadow-lg border border-green-500/50",children:[v.jsx(Wd,{className:"text-green-300 mr-2"}),v.jsx("span",{className:"font-bold text-lg",children:p})]}),v.jsx("button",{onClick:j,className:"bg-pink-700 text-white p-3 rounded-full shadow-lg hover:bg-pink-600 transition-colors duration-200","aria-label":"Reset Game",children:v.jsx(DM,{})}),v.jsxs("div",{className:"relative",ref:W,children:[v.jsxs("button",{onClick:()=>q(!K),className:"bg-slate-700 text-white p-3 rounded-full shadow-lg hover:bg-slate-600 transition-colors duration-200 flex items-center","aria-label":"Settings",children:[v.jsx(mA,{}),v.jsx(gM,{size:16,className:"ml-1"})]}),K&&v.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50",children:v.jsxs("button",{onClick:()=>{U&&U(),q(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-gray-700 transition-colors rounded-lg flex items-center gap-2",children:[v.jsx(mA,{size:16}),"Debug View"]})})]})]})]})]})}const Nh=()=>{const{gameStateManager:e}=Ii(),t=E.useMemo(()=>e?Vt.getInstance(e):null,[e]),[n,r]=E.useState(null);return E.useEffect(()=>{if(!t)return;const p=()=>{r(t.getCacheStats())};p();const m=setInterval(p,5e3);return()=>clearInterval(m)},[t]),{gameDataService:t,getEffectiveStats:(p,m)=>t?t.getEffectiveStats(p,m):{attack:0,speed:0,hull:0,maxShields:0,cost:0,baseAttack:0,baseSpeed:0,baseCost:0,keywords:new Set},getEffectiveShipStats:(p,m=[])=>t?t.getEffectiveShipStats(p,m):{totals:{handLimit:0,discardLimit:0,energyPerTurn:0,maxEnergy:0,shieldsPerTurn:0,initialDeployment:0,deploymentBudget:0,cpuLimit:0},bySection:{}},getLaneData:p=>t?t.getLaneData(p):{lane:p,localDrones:[],opponentDrones:[],hasGuardian:!1},hasGuardianInLane:(p,m=null)=>t?t.hasGuardianInLane(p,m):!1,getPlacedSections:()=>t?t.getPlacedSectionsForEngine():{},clearCache:()=>{t&&t.clearCache()},cacheStats:n,isReady:!!t}},Nw=({player:e,isPlayer:t,placedSections:n,onSectionClick:r,onAbilityClick:i,onTargetClick:s,isInteractive:l,validCardTargets:u,reallocationPhase:f,gameEngine:h,turnPhase:p,isMyTurn:m,passInfo:g,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A,hoveredTarget:C,setHoveredTarget:P,sectionRefs:O})=>{const{getEffectiveShipStats:T}=Nh(),j=T(e,n);return v.jsx("div",{className:"flex w-full justify-between gap-8",children:[0,1,2].map(N=>{const D=n[N];if(!D)return console.log(` [DEBUG] Lane ${N} rendering EMPTY div - no hover possible:`,{sectionName:D,sectionNameType:typeof D,sectionNameValue:JSON.stringify(D),isPlayer:t,entirePlacedSections:n,playerShipSections:e?.shipSections?Object.keys(e.shipSections):"NO_SHIP_SECTIONS"}),v.jsx("div",{className:"flex-1 min-w-0 h-full bg-black/20 rounded-lg border-2 border-dashed border-gray-700"},N);const M=e.shipSections[D],R=u.some(K=>K.id===D);let U=null;if(f&&t){if(f==="removing")M.allocatedShields>0?U="can-remove":U="cannot-remove";else if(f==="adding"){const K=h.getEffectiveSectionMaxShields(D,e,n);M.allocatedShields<K?U="can-add":U="cannot-add"}}return v.jsx("div",{className:"flex-1 min-w-0",children:v.jsx(df,{section:D,stats:M,effectiveStatsForDisplay:j.bySection[D],isPlayer:t,isOpponent:!t,onClick:()=>{l&&r?r(D):s&&s({id:D,name:D,...M},"section",t)},onAbilityClick:i,isInteractive:l||p==="action"&&t&&M.ability&&S.energy>=M.ability.cost.energy,isCardTarget:R,isInMiddleLane:N===1,isHovered:C?.type==="section"&&C?.target.name===D&&C?.isOpponent===!t,onMouseEnter:()=>!t&&P({target:{name:D,...M},type:"section",isOpponent:!0}),onMouseLeave:()=>!t&&P(null),reallocationState:U,gameEngine:h,turnPhase:p,isMyTurn:m,passInfo:g,getLocalPlayerId:x,localPlayerState:S,shipAbilityMode:A,sectionRef:K=>{if(O&&K){const q=`${t?"local":"opponent"}-${D}`;O.current[q]=K}}})},N)})})},jw=({value:e,isFlat:t,bgColor:n,textColor:r})=>v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-full h-full bg-black flex items-center justify-center`,children:v.jsx("div",{className:`${t?"hexagon-flat":"hexagon"} w-[calc(100%-2px)] h-[calc(100%-2px)] ${n} flex items-center justify-center text-xs font-bold font-orbitron ${r}`,children:e})}),bY=({onClick:e})=>v.jsx("button",{onClick:e,className:"absolute top-5 -right-3.5 w-7 h-7 bg-purple-600 rounded-full flex items-center justify-center border-2 border-black/50 z-20 hover:bg-purple-500 transition-colors",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"6"}),v.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}),sf=({drone:e,onClick:t,isPlayer:n,isSelected:r,isSelectedForMove:i,isHit:s,isPotentialInterceptor:l,onMouseEnter:u,onMouseLeave:f,lane:h,onAbilityClick:p,isActionTarget:m,droneRefs:g,mandatoryAction:x,localPlayerState:S})=>{const{getEffectiveStats:A}=Nh(),C=E.useMemo(()=>Pn.find(me=>me.name===e.name),[e.name]),P=A(e,h),{maxShields:O}=P,T=e.currentShields??O,j=C.abilities.filter(me=>me.type==="ACTIVE"),N=n?"border-cyan-400":"border-pink-500",D=n?"bg-cyan-900":"bg-pink-950",M=n?"text-cyan-100":"text-pink-100",R=n?"bg-cyan-900":"bg-pink-950",U=n?"text-cyan-400":"text-pink-500",K=n?"text-cyan-300 opacity-50":"text-pink-400 opacity-60",q=P.attack>P.baseAttack,W=P.attack<P.baseAttack,le=q?"text-green-400":W?"text-red-400":"text-white",ie=P.speed>P.baseSpeed,te=P.speed<P.baseSpeed,L=ie?"text-green-400":te?"text-red-400":"text-white",ee=e.isExhausted?"grayscale opacity-60":"",he=s?"animate-shake":"",Se=r||i?"scale-105 ring-2 ring-cyan-400 shadow-xl shadow-cyan-400/50":"",k=m?"scale-105 ring-2 ring-purple-400 shadow-xl shadow-purple-500/50 animate-pulse":"",J=x?.type==="destroy"&&n?"ring-2 ring-red-500 animate-pulse":"",F=me=>!(e.isExhausted&&me.cost.exhausts!==!1||me.cost.energy&&S.energy<me.cost.energy),ne=e.isTeleporting?"opacity-0 pointer-events-none":"";return v.jsxs("div",{ref:me=>g.current[e.id]=me,onClick:me=>t&&t(me,e,n),onMouseEnter:u,onMouseLeave:f,className:`relative w-[90px] h-[135px] transition-all duration-200 ${ee} ${he} ${Se} ${k} ${J} ${ne}`,children:[v.jsxs("div",{className:`relative w-full h-full rounded-lg shadow-lg border ${N} cursor-pointer shadow-black overflow-hidden`,children:[v.jsx("img",{src:e.image,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black/10"}),v.jsxs("div",{className:"relative z-10 h-full",children:[v.jsxs("div",{className:"absolute bottom-6 left-0 right-0 w-full flex flex-col gap-1 px-2",children:[v.jsx("div",{className:"flex w-full justify-center gap-1 min-h-[12px]",children:Array.from({length:O}).map((me,z)=>z<T?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",className:U,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},z):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:K,children:v.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"black",strokeWidth:"1.5"})},z))}),v.jsx("div",{className:"flex w-full justify-center gap-0.5",children:Array.from({length:C.hull}).map((me,z)=>{const ae=z<e.hull,ve=e.isExhausted?"bg-green-800":"bg-green-500";return v.jsx("div",{className:`h-2 w-2 rounded-sm ${ae?ve:"bg-gray-400"} border border-black/50`},z)})})]}),v.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-5 ${D} flex items-center justify-center border-t ${N}`,children:v.jsx("span",{className:`font-orbitron text-[8px] uppercase ${M} tracking-wider w-full text-center`,children:e.name})})]})]}),v.jsx("div",{className:"absolute -top-3 left-[-14px] w-6 h-7 z-20",children:v.jsx(jw,{value:P.attack,isFlat:!1,bgColor:R,textColor:le})}),v.jsx("div",{className:`absolute -top-3 right-[-14px] w-7 h-7 z-20 ${l?"interceptor-glow":""}`,children:v.jsx(jw,{value:P.speed,isFlat:!0,bgColor:R,textColor:L})}),n&&j.length>0&&F(j[0])&&v.jsx(bY,{onClick:me=>p&&p(me,e,j[0])})]})},xY=(e,t,n,r,i,s,l,u,f,h,p,m,g,x,S,A,C,P,O,T)=>v.jsx("div",{className:"flex flex-wrap gap-8 pt-2 min-h-[100px] justify-center items-center",children:e.map(j=>v.jsx(sf,{drone:j,lane:n,isPlayer:t,onClick:h,onAbilityClick:p,isSelected:m&&m.id===j.id,isSelectedForMove:g?.phase==="select_drones"&&g.selectedDrones.some(N=>N.id===j.id),isHit:x.includes(j.id),isPotentialInterceptor:S.includes(j.id),droneRefs:A,mandatoryAction:C,localPlayerState:r,isActionTarget:P.some(N=>N.id===j.id)||O.some(N=>N.id===j.id),onMouseEnter:()=>!t&&T({target:j,type:"drone",lane:n}),onMouseLeave:()=>!t&&T(null)},j.id))}),Mw=({player:e,isPlayer:t,onLaneClick:n,getLocalPlayerId:r,getOpponentPlayerId:i,abilityMode:s,validAbilityTargets:l,selectedCard:u,validCardTargets:f,multiSelectState:h,turnPhase:p,localPlayerState:m,opponentPlayerState:g,localPlacedSections:x,opponentPlacedSections:S,gameEngine:A,getPlacedSectionsForEngine:C,handleTokenClick:P,handleAbilityIconClick:O,selectedDrone:T,recentlyHitDrones:j,potentialInterceptors:N,droneRefs:D,mandatoryAction:M,setHoveredTarget:R})=>(Nh(),v.jsx("div",{className:"flex w-full justify-between gap-8 min-h-[160px]",children:["lane1","lane2","lane3"].map(U=>{const K=t?r():i(),q=s&&l.some(le=>le.id===U&&le.owner===K)||u&&f.some(le=>le.id===U&&le.owner===K)||h&&f.some(le=>le.id===U&&le.owner===K),W=t&&(p==="deployment"||p==="action");return v.jsx("div",{onClick:le=>n(le,U,t),className:`flex-1 rounded-lg border-2 transition-all duration-200 p-2 lane-background
              ${q?"border-purple-500 bg-purple-900/40 ring-2 ring-purple-400 animate-pulse":"border-gray-700/50 bg-black/20"}
              ${W?"cursor-pointer hover:bg-cyan-900/50":""}
            `,children:xY(e.dronesOnBoard[U],t,U,m,g,x,S,A,C,P,O,T,h,j,N,D,M,l,f,R)},U)})}));function SY({localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,selectedCard:i,validCardTargets:s,abilityMode:l,validAbilityTargets:u,multiSelectState:f,turnPhase:h,reallocationPhase:p,shipAbilityMode:m,hoveredTarget:g,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,sectionRefs:P,mandatoryAction:O,gameEngine:T,getLocalPlayerId:j,getOpponentPlayerId:N,isMyTurn:D,getPlacedSectionsForEngine:M,passInfo:R,handleTargetClick:U,handleLaneClick:K,handleShipSectionClick:q,handleShipAbilityClick:W,handleTokenClick:le,handleAbilityIconClick:ie,setHoveredTarget:te}){return v.jsx("main",{className:"flex-grow min-h-0 w-full flex flex-col items-center overflow-y-auto px-5 pb-4",children:v.jsxs("div",{className:"flex flex-col items-center w-full space-y-2",children:[v.jsx(Nw,{player:t,isPlayer:!1,placedSections:r,onTargetClick:U,isInteractive:!1,selectedCard:i,validCardTargets:s,gameEngine:T,turnPhase:h,isMyTurn:D,passInfo:R,getLocalPlayerId:j,localPlayerState:e,shipAbilityMode:m,hoveredTarget:g,setHoveredTarget:te,sectionRefs:P}),v.jsx(Mw,{player:t,isPlayer:!1,onLaneClick:K,getLocalPlayerId:j,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:f,turnPhase:h,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:T,getPlacedSectionsForEngine:M,handleTokenClick:le,handleAbilityIconClick:ie,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,mandatoryAction:O,setHoveredTarget:te}),v.jsx(Mw,{player:e,isPlayer:!0,onLaneClick:K,getLocalPlayerId:j,getOpponentPlayerId:N,abilityMode:l,validAbilityTargets:u,selectedCard:i,validCardTargets:s,multiSelectState:f,turnPhase:h,localPlayerState:e,opponentPlayerState:t,localPlacedSections:n,opponentPlacedSections:r,gameEngine:T,getPlacedSectionsForEngine:M,handleTokenClick:le,handleAbilityIconClick:ie,selectedDrone:x,recentlyHitDrones:S,potentialInterceptors:A,droneRefs:C,mandatoryAction:O,setHoveredTarget:te}),v.jsx(Nw,{player:e,isPlayer:!0,placedSections:n,onSectionClick:q,onAbilityClick:W,onTargetClick:U,isInteractive:h==="allocateShields"||p,selectedCard:i,validCardTargets:s,reallocationPhase:p,gameEngine:T,turnPhase:h,isMyTurn:D,passInfo:R,getLocalPlayerId:j,localPlayerState:e,shipAbilityMode:m,hoveredTarget:g,setHoveredTarget:te,sectionRefs:P})]})})}const jh=({card:e,onClick:t,isPlayable:n,isSelected:r,isMandatoryTarget:i})=>{const{name:s,cost:l,image:u,description:f}=e;return v.jsx("div",{onClick:h=>{h.stopPropagation(),(n||i)&&t(e)},className:`
        w-52 h-72 rounded-lg p-1 relative group transition-all duration-200 flex-shrink-0
        ${n?"cursor-pointer":"cursor-not-allowed"}
        ${r?"bg-purple-400":"bg-purple-800/80"}
        ${!n&&!i?"grayscale":""}
        ${i?"cursor-pointer ring-2 ring-red-500 animate-pulse":""}
      `,children:v.jsxs("div",{className:`
          w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md
          transition-all duration-200
          ${n&&!r?"group-hover:bg-slate-800":""}
        `,children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:s}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx(Lc,{size:12,className:"text-yellow-300"}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:l})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:u,alt:s,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:f})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})})},AY="_footer_js8yx_10",EY="_tabContainer_js8yx_14",CY="_contentContainer_js8yx_18",PY="_contentOpen_js8yx_22",wY="_contentClosed_js8yx_26",OY="_tabButton_js8yx_32",TY="_tabButtonActive_js8yx_36",_Y="_tabButtonInactive_js8yx_40",DY="_tabIcon_js8yx_44",NY="_multiSelectOverlay_js8yx_50",jY="_multiSelectText_js8yx_54",MY="_handContainer_js8yx_60",kY="_cardPile_js8yx_64",RY="_deckCard_js8yx_68",IY="_deckCardText_js8yx_74",LY="_discardCard_js8yx_78",$Y="_discardCardText_js8yx_84",BY="_pileLabel_js8yx_88",UY="_handSection_js8yx_92",zY="_handHeader_js8yx_96",GY="_handTitle_js8yx_100",HY="_handTitleOverLimit_js8yx_104",qY="_handTitleNormal_js8yx_108",YY="_mandatoryDiscardWarning_js8yx_112",FY="_handCardsContainer_js8yx_116",VY="_handCardsWrapper_js8yx_120",KY="_handCardsWrapperGap_js8yx_124",XY="_cardWrapper_js8yx_128",WY="_optionalDiscardControls_js8yx_133",QY="_optionalDiscardCounter_js8yx_137",ZY="_finishDiscardButton_js8yx_141",JY="_droneContainer_js8yx_148",eF="_droneGrid_js8yx_152",tF="_logContainer_js8yx_158",nF="_logHeader_js8yx_162",rF="_logTitle_js8yx_166",aF="_downloadButton_js8yx_170",iF="_logTableWrapper_js8yx_175",oF="_logTable_js8yx_175",sF="_logTableHeader_js8yx_183",lF="_logTableHeaderCell_js8yx_187",cF="_logTableDebugHeader_js8yx_191",uF="_logTableRow_js8yx_195",dF="_logTableCell_js8yx_199",fF="_logTableCellBold_js8yx_203",hF="_logTableCellGray_js8yx_207",pF="_logTableCellCyan_js8yx_211",mF="_logTableCellYellow_js8yx_215",gF="_logTableCellGrayText_js8yx_219",yF="_logTableCellDebug_js8yx_223",vF="_logTableCellCenter_js8yx_227",bF="_aiDecisionButton_js8yx_231",xF="_buttonDanger_js8yx_242",SF="_buttonSuccess_js8yx_247",AF="_buttonDisabled_js8yx_252",xe={footer:AY,tabContainer:EY,contentContainer:CY,contentOpen:PY,contentClosed:wY,tabButton:OY,tabButtonActive:TY,tabButtonInactive:_Y,tabIcon:DY,multiSelectOverlay:NY,multiSelectText:jY,handContainer:MY,cardPile:kY,deckCard:RY,deckCardText:IY,discardCard:LY,discardCardText:$Y,pileLabel:BY,handSection:UY,handHeader:zY,handTitle:GY,handTitleOverLimit:HY,handTitleNormal:qY,mandatoryDiscardWarning:YY,handCardsContainer:FY,handCardsWrapper:VY,handCardsWrapperGap:KY,cardWrapper:XY,optionalDiscardControls:WY,optionalDiscardCounter:QY,finishDiscardButton:ZY,droneContainer:JY,droneGrid:eF,logContainer:tF,logHeader:nF,logTitle:rF,downloadButton:aF,logTableWrapper:iF,logTable:oF,logTableHeader:sF,logTableHeaderCell:lF,logTableDebugHeader:cF,logTableRow:uF,logTableCell:dF,logTableCellBold:fF,logTableCellGray:hF,logTableCellCyan:pF,logTableCellYellow:mF,logTableCellGrayText:gF,logTableCellDebug:yF,logTableCellCenter:vF,aiDecisionButton:bF,buttonDanger:xF,buttonSuccess:SF,buttonDisabled:AF};function EF({localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleCardClick:s,getLocalPlayerId:l,isMyTurn:u,hoveredCardId:f,setHoveredCardId:h,setIsViewDiscardModalOpen:p,setIsViewDeckModalOpen:m,optionalDiscardCount:g,handleRoundStartDraw:x,checkBothPlayersHandLimitComplete:S,handleConfirmMandatoryDiscard:A,handleRoundStartDiscard:C,setConfirmationModal:P,passInfo:O,validCardTargets:T,gameEngine:j,opponentPlayerState:N}){const U=e.hand.length>7,K=1552,q=e.hand.length;let W=0;return q>1&&(W=(K-208)/(q-1)-208),v.jsxs("div",{className:xe.handContainer,children:[v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>p(!0),className:xe.discardCard,children:v.jsx("p",{className:xe.discardCardText,children:e.discardPile.length})}),v.jsx("p",{className:xe.pileLabel,children:"Discard Pile"})]}),v.jsxs("div",{className:xe.handSection,children:[v.jsx("div",{className:xe.handHeader,children:v.jsxs("h3",{className:`${xe.handTitle} ${e.hand.length>t.totals.handLimit?xe.handTitleOverLimit:xe.handTitleNormal}`,children:["Your Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),i?.type==="discard"&&i.fromAbility&&v.jsxs("p",{className:xe.mandatoryDiscardWarning,children:["You must discard ",i.count," card(s)."]}),v.jsx("div",{className:xe.handCardsContainer,style:U?{width:`${K}px`}:{},children:v.jsx("div",{className:`${xe.handCardsWrapper} ${U?"":xe.handCardsWrapperGap}`,children:e.hand.map((le,ie)=>{const te=f?e.hand.findIndex(he=>he.instanceId===f):-1;let L="",ee={zIndex:ie};return U&&te!==-1&&(ie<te?L="transform -translate-x-12":ie>te?L="transform translate-x-12":(L="transform -translate-y-8 scale-105",ee.zIndex=50)),U&&ie>0&&(ee.marginLeft=`${W}px`),v.jsx("div",{className:`${xe.cardWrapper} ${L}`,style:ee,onMouseEnter:()=>h(le.instanceId),onMouseLeave:()=>h(null),children:v.jsx(jh,{card:le,isPlayable:r==="action"&&u()&&!O[`${l()}Passed`]&&e.energy>=le.cost&&(!le.targeting||j.getValidTargets(l(),null,le,e,N).length>0)||r==="optionalDiscard"&&g<t.totals.discardLimit,isMandatoryTarget:i?.type==="discard",onClick:i?.type==="discard"?he=>P({type:"discard",target:he,onConfirm:()=>A(he),onCancel:()=>P(null),text:`Are you sure you want to discard ${he.name}?`}):r==="optionalDiscard"?he=>P({type:"discard",target:he,onConfirm:()=>C(he),onCancel:()=>P(null),text:`Are you sure you want to discard ${he.name}?`}):s})},le.instanceId)})})})]}),v.jsxs("div",{className:xe.cardPile,children:[v.jsx("div",{onClick:()=>m(!0),className:xe.deckCard,children:v.jsx("p",{className:xe.deckCardText,children:e.deck.length})}),v.jsx("p",{className:xe.pileLabel,children:"Deck"}),r==="optionalDiscard"&&v.jsxs("div",{className:xe.optionalDiscardControls,children:[v.jsxs("p",{className:xe.optionalDiscardCounter,children:["Discarded: ",g," / ",t.discardLimit]}),v.jsx("button",{onClick:()=>{x(),S()},className:xe.finishDiscardButton,children:"Finish Discarding"})]})]})]})}function CF({localPlayerState:e,sortedLocalActivePool:t,selectedCard:n,turnPhase:r,mandatoryAction:i,handleToggleDroneSelection:s,selectedDrone:l,setViewUpgradesModal:u,getLocalPlayerId:f,isMyTurn:h,turn:p,passInfo:m,validCardTargets:g}){return v.jsx("div",{className:xe.droneContainer,children:v.jsx("div",{className:xe.droneGrid,children:t.map((x,S)=>{const C=(p===1?e.initialDeploymentBudget+e.energy:e.energy)>=x.class,P=n?.type==="Upgrade"&&g.some(O=>O.id===x.name);return v.jsx(uf,{drone:x,onClick:s,isSelected:l&&l.name===x.name,isSelectable:r==="deployment"&&h()&&!m[`${f()}Passed`]&&C&&!i||P,deployedCount:e.deployedDroneCounts[x.name]||0,appliedUpgrades:e.appliedUpgrades[x.name]||[],isUpgradeTarget:P,onViewUpgrades:(O,T)=>u({droneName:O.name,upgrades:T})},S)})})})}function PF({gameLog:e,downloadLogAsCSV:t,setAiDecisionLogToShow:n}){return v.jsxs("div",{className:xe.logContainer,children:[v.jsxs("div",{className:xe.logHeader,children:[v.jsx("h3",{className:xe.logTitle,children:"Game Log"}),v.jsx("button",{onClick:t,className:xe.downloadButton,children:"Download CSV"})]}),v.jsx("div",{className:xe.logTableWrapper,children:v.jsxs("table",{className:xe.logTable,children:[v.jsx("thead",{className:xe.logTableHeader,children:v.jsxs("tr",{children:[v.jsx("th",{className:xe.logTableHeaderCell,children:"Rnd"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Timestamp (UTC)"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Player"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Action"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Source"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Target"}),v.jsx("th",{className:xe.logTableHeaderCell,children:"Outcome"}),v.jsx("th",{className:xe.logTableDebugHeader,children:"Debug Source"}),v.jsx("th",{className:xe.logTableHeaderCell})]})}),v.jsx("tbody",{children:e.map((r,i)=>v.jsxs("tr",{className:xe.logTableRow,children:[v.jsx("td",{className:xe.logTableCellBold,children:r.round}),v.jsx("td",{className:xe.logTableCellGray,children:new Date(r.timestamp).toLocaleTimeString("en-GB",{timeZone:"UTC"})}),v.jsx("td",{className:xe.logTableCellCyan,children:r.player}),v.jsx("td",{className:xe.logTableCellYellow,children:r.actionType}),v.jsx("td",{className:xe.logTableCell,children:r.source}),v.jsx("td",{className:xe.logTableCell,children:r.target}),v.jsx("td",{className:xe.logTableCellGrayText,children:r.outcome}),v.jsx("td",{className:xe.logTableCellDebug,children:r.debugSource}),v.jsx("td",{className:xe.logTableCellCenter,children:r.aiDecisionContext&&v.jsx("button",{onClick:()=>n(r.aiDecisionContext),className:xe.aiDecisionButton,title:"Show AI Decision Logic",children:""})})]},i)).reverse()})]})})]})}function wF({localPlayerState:e,localPlayerEffectiveStats:t,sortedLocalActivePool:n,gameLog:r,footerView:i,isFooterOpen:s,multiSelectState:l,selectedCard:u,turnPhase:f,mandatoryAction:h,handleFooterButtonClick:p,handleCardClick:m,cancelCardSelection:g,downloadLogAsCSV:x,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:C,setHoveredCardId:P,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:T,optionalDiscardCount:j,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:D,handleToggleDroneSelection:M,selectedDrone:R,setViewUpgradesModal:U,handleConfirmMandatoryDiscard:K,handleRoundStartDiscard:q,setConfirmationModal:W,turn:le,passInfo:ie,validCardTargets:te,gameEngine:L,opponentPlayerState:ee,setAiDecisionLogToShow:he}){return v.jsxs("footer",{className:xe.footer,children:[v.jsxs("div",{className:xe.tabContainer,children:[v.jsx("button",{onClick:()=>p("hand"),className:`${xe.tabButton} ${s&&i==="hand"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="hand"&&v.jsx(jc,{size:20}),"Hand (",e.hand.length,"/",t.totals.handLimit,")"]})}),v.jsx("button",{onClick:()=>p("drones"),className:`${xe.tabButton} ${s&&i==="drones"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="drones"&&v.jsx(jc,{size:20}),"Drones"]})}),v.jsx("button",{onClick:()=>p("log"),className:`${xe.tabButton} ${s&&i==="log"?xe.tabButtonActive:xe.tabButtonInactive}`,children:v.jsxs("span",{className:xe.tabIcon,children:[s&&i==="log"&&v.jsx(jc,{size:20}),"Log (",r.length,")"]})})]}),v.jsxs("div",{className:`${xe.contentContainer} ${s?xe.contentOpen:xe.contentClosed}`,children:[l&&v.jsxs("div",{className:xe.multiSelectOverlay,children:[v.jsxs("span",{className:xe.multiSelectText,children:[l.phase==="select_source_lane"&&"Reposition: Select a source lane",l.phase==="select_drones"&&`Select Drones (${l.selectedDrones.length} / ${l.maxSelection})`,l.phase==="select_destination_lane"&&"Reposition: Select a destination lane"]}),v.jsx("button",{onClick:Se=>{Se.stopPropagation(),g()},className:xe.buttonDanger,children:"Cancel"}),l.phase==="select_drones"&&v.jsx("button",{onClick:Se=>{Se.stopPropagation(),l.selectedDrones.length>0&&console.log("Confirm drones clicked")},disabled:l.selectedDrones.length===0,className:`${xe.buttonSuccess} ${l.selectedDrones.length===0?xe.buttonDisabled:""}`,children:"Confirm Drones"})]}),i==="hand"&&v.jsx(EF,{localPlayerState:e,localPlayerEffectiveStats:t,selectedCard:u,turnPhase:f,mandatoryAction:h,handleCardClick:m,getLocalPlayerId:S,isMyTurn:A,hoveredCardId:C,setHoveredCardId:P,setIsViewDiscardModalOpen:O,setIsViewDeckModalOpen:T,optionalDiscardCount:j,handleRoundStartDraw:N,checkBothPlayersHandLimitComplete:D,handleConfirmMandatoryDiscard:K,handleRoundStartDiscard:q,setConfirmationModal:W,passInfo:ie,validCardTargets:te,gameEngine:L,opponentPlayerState:ee}),i==="drones"&&v.jsx(CF,{localPlayerState:e,sortedLocalActivePool:n,selectedCard:u,turnPhase:f,mandatoryAction:h,handleToggleDroneSelection:M,selectedDrone:R,setViewUpgradesModal:U,getLocalPlayerId:S,isMyTurn:A,turn:le,passInfo:ie,validCardTargets:te}),i==="log"&&v.jsx(PF,{gameLog:r,downloadLogAsCSV:x,setAiDecisionLogToShow:he})]})]})}const OF=({modalData:e,onClose:t})=>{const{droneName:n,upgrades:r}=e;return v.jsxs(Hi,{title:`Applied Upgrades: ${n}`,text:"The following permanent upgrades have been applied to this drone type.",onClose:t,children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-80 overflow-y-auto space-y-3",children:r.length>0?r.map(i=>v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-purple-500/50",children:[v.jsx("h4",{className:"font-bold text-purple-300",children:i.name}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:i.description})]},i.instanceId)):v.jsx("p",{className:"text-center text-gray-500 italic",children:"No upgrades applied."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Close"})})]})},TF=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i,opponentState:s}=e,[l,u]=E.useState(null);return v.jsxs(Hi,{title:"System Sabotage",text:"Select an enemy upgrade to destroy. The upgrade will be permanently removed.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"my-4 p-2 bg-black/20 rounded-lg max-h-[60vh] overflow-y-auto space-y-4",children:i.length>0?i.map(f=>{const h=s.appliedUpgrades[f.name]||[];return v.jsxs("div",{className:"bg-slate-800/70 p-3 rounded-lg border border-pink-500/50",children:[v.jsxs("h4",{className:"font-bold text-pink-300 mb-2",children:["Enemy: ",f.name]}),v.jsx("div",{className:"space-y-2",children:h.map(p=>v.jsx("div",{onClick:()=>u({droneName:f.name,instanceId:p.instanceId}),className:`p-2 rounded-md border-2 transition-all cursor-pointer
                                              ${l?.instanceId===p.instanceId?"bg-red-700 border-red-400":"bg-slate-900/50 border-slate-600 hover:bg-slate-700"}`,children:v.jsx("p",{className:"font-semibold text-white",children:p.name})},p.instanceId))})]},f.id)}):v.jsx("p",{className:"text-center text-gray-500 italic",children:"The opponent has no active upgrades to destroy."})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,l),disabled:!l,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-red-700",children:"Destroy Upgrade"})]})]})},_F=({selectionData:e,onConfirm:t,onCancel:n})=>{const{card:r,targets:i}=e,[s,l]=E.useState(null);return v.jsxs(Hi,{title:`Apply Upgrade: ${r.name}`,text:"Select a drone type from your active pool to apply this permanent upgrade to.",onClose:n,maxWidthClass:"max-w-4xl",children:[v.jsx("div",{className:"flex justify-center my-4",children:v.jsx(jh,{card:r,isPlayable:!1})}),v.jsx("div",{className:"my-4 p-4 bg-black/20 rounded-lg max-h-64 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(u=>v.jsxs("div",{onClick:()=>l(u),className:`p-3 rounded-lg border-2 transition-all cursor-pointer flex items-center gap-4
                              ${s?.id===u.id?"bg-purple-700 border-purple-400":"bg-slate-800 border-slate-600 hover:bg-slate-700"}
                          `,children:[v.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-md object-cover"}),v.jsx("span",{className:"font-semibold text-white",children:u.name})]},u.id))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-full hover:bg-pink-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:()=>t(r,s),disabled:!s,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-full transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed enabled:hover:bg-green-700",children:"Confirm Upgrade"})]})]})},DF=({viewUpgradesModal:e,setViewUpgradesModal:t,destroyUpgradeModal:n,setDestroyUpgradeModal:r,upgradeSelectionModal:i,setUpgradeSelectionModal:s,resolveCardPlay:l,getLocalPlayerId:u,cancelCardSelection:f})=>v.jsxs(v.Fragment,{children:[e&&v.jsx(OF,{modalData:e,onClose:()=>t(null)}),n&&v.jsx(TF,{selectionData:n,onConfirm:async(h,p)=>{await l(h,p,u()),r(null)},onCancel:()=>{r(null),f()}}),i&&v.jsx(_F,{selectionData:i,onConfirm:async(h,p)=>{await l(h,p,u()),s(null)},onCancel:()=>{s(null),f()}})]}),NF=({visible:e,start:t,end:n,lineRef:r})=>e?v.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-40",children:[v.jsx("defs",{children:v.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:v.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#ff0055"})})}),v.jsx("line",{ref:r,x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"#ff0055",strokeWidth:"4",markerEnd:"url(#arrowhead)",strokeDasharray:"10, 5"})]}):null,jF=({top:e,left:t,size:n="large"})=>{const[r,i]=E.useState([]),s={small:{particleCount:8,radiusMin:30,radiusMax:50,particleSizeMin:4,particleSizeMax:8,duration:500},large:{particleCount:15,radiusMin:60,radiusMax:100,particleSizeMin:8,particleSizeMax:16,duration:800}},l=s[n]||s.large;return E.useEffect(()=>{const u=[];for(let f=0;f<l.particleCount;f++){const h=Math.PI*2*f/l.particleCount,p=l.radiusMin+Math.random()*(l.radiusMax-l.radiusMin),m=l.particleSizeMin+Math.random()*(l.particleSizeMax-l.particleSizeMin);u.push({id:f,x:Math.cos(h)*p,y:Math.sin(h)*p,size:m,opacity:1})}i(u)},[l.particleCount,l.radiusMin,l.radiusMax,l.particleSizeMin,l.particleSizeMax]),v.jsx("div",{style:{position:"fixed",top:`${e}px`,left:`${t}px`,pointerEvents:"none",zIndex:9999},children:r.map(u=>v.jsx("div",{style:{position:"absolute",width:`${u.size}px`,height:`${u.size}px`,borderRadius:"50%",backgroundColor:"#ff6b00",boxShadow:"0 0 10px #ff6b00","--tx":`${u.x}px`,"--ty":`${u.y}px`,animation:`explosionParticle ${l.duration}ms ease-out forwards`,animationDelay:"0ms"}},u.id))})},MF=({isVisible:e,currentPlayer:t,gameMode:n,roomCode:r,lastAction:i,localPlayerState:s,opponentPlayerState:l,getLocalPlayerId:u})=>{if(!e)return null;const f=n!=="local",h=t===u()?s?.name||"You":l?.name||"Opponent";return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-40 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-purple-500 p-6 shadow-2xl shadow-purple-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-400 mb-2",children:[v.jsx(Kf,{className:"w-6 h-6 animate-spin"}),v.jsx(Uw,{className:"w-6 h-6"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:f?"Opponent's Turn":"AI Thinking..."}),v.jsx("p",{className:"text-gray-300 text-sm",children:f?`Waiting for ${h}`:"Processing AI actions..."})]}),f&&r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(Gw,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),i&&v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Recent action:"}),v.jsx("p",{className:"text-white text-sm",children:i})]}),v.jsx("div",{className:"flex justify-center mt-4",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},kF=({card:e})=>v.jsx("div",{className:"w-52 h-72 rounded-lg p-1 bg-purple-800/80",children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),kw=({isOpen:e,onClose:t,cards:n,title:r,shouldSort:i})=>{if(!e)return null;const s=i?[...n].sort((l,u)=>l.name.localeCompare(u.name)):n;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:t,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:l=>l.stopPropagation(),children:[v.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Kt,{size:24})}),v.jsxs("h2",{className:"text-3xl font-orbitron font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4 flex-shrink-0",children:[r," (",s.length,")"]}),s.length>0?v.jsx("div",{className:"flex-grow overflow-y-auto pr-4",children:v.jsx("div",{className:"grid grid-cols-5 gap-6",children:s.map((l,u)=>v.jsx("div",{className:"flex justify-center",children:v.jsx(kF,{card:l})},`${l.instanceId}-${u}`))})}):v.jsx("div",{className:"flex-grow flex items-center justify-center",children:v.jsx("p",{className:"text-gray-500 text-2xl italic",children:"There are no cards here!"})})]})})},RF=({card:e,isSelected:t,onClick:n})=>v.jsx("div",{className:`w-52 h-72 rounded-lg p-1 cursor-pointer transition-all duration-200 ${t?"bg-green-500/60 shadow-lg shadow-green-500/30":"bg-purple-800/80 hover:bg-purple-700/80"}`,onClick:()=>n(e),children:v.jsxs("div",{className:"w-full h-full bg-slate-900 flex flex-col font-orbitron text-purple-300 overflow-hidden rounded-md",children:[v.jsxs("div",{className:"text-center py-1 px-2 bg-purple-900/50 flex justify-between items-center",children:[v.jsx("span",{className:"font-bold text-sm uppercase tracking-wider truncate",children:e.name}),v.jsxs("div",{className:"flex items-center bg-slate-800/70 px-2 py-0.5 rounded-full",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-300",children:v.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),v.jsx("span",{className:"text-white font-bold text-sm ml-1",children:e.cost})]})]}),v.jsx("div",{className:"p-1",children:v.jsxs("div",{className:"relative h-24",children:[v.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover rounded"}),v.jsx("div",{className:"absolute inset-0 border border-purple-400/50 rounded"}),t&&v.jsx("div",{className:"absolute inset-0 bg-green-500/20 border-2 border-green-400 rounded flex items-center justify-center",children:v.jsx("div",{className:"bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold",children:""})})]})}),v.jsx("div",{className:"flex-grow mx-2 my-1 bg-black/50 border border-purple-800/70 p-2 flex flex-col min-h-0",children:v.jsx("div",{className:"flex-grow relative font-exo font-normal text-purple-200",children:v.jsx("p",{className:"text-sm leading-tight text-center",children:e.description})})}),v.jsxs("div",{className:"text-center text-xs py-1 bg-purple-900/50 uppercase font-semibold tracking-widest",children:[e.type," Card"]})]})}),IF=({isOpen:e,onClose:t,onConfirm:n,selectionData:r})=>{const[i,s]=E.useState([]);if(!e||!r)return null;const{searchedCards:l,drawCount:u,type:f,filter:h}=r,p=S=>{s(A=>{const C=S.instanceId||`${S.id}-${S.name}`;return A.some(O=>(O.instanceId||`${O.id}-${O.name}`)===C)?A.filter(O=>(O.instanceId||`${O.id}-${O.name}`)!==C):A.length<u?[...A,S]:[...A.slice(0,-1),S]})},m=()=>{i.length===u&&(n(i),s([]))},g=()=>{s([]),t()},x=i.length===u;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:g,children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-7xl relative flex flex-col h-[90vh]",onClick:S=>S.stopPropagation(),children:[v.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10",children:v.jsx(Kt,{size:24})}),v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:f==="search_and_draw"?"Choose Cards to Draw":"Select Cards"}),v.jsx("p",{className:"text-gray-300 text-lg",children:h?`Select ${u} ${h.type} card${u>1?"s":""} from ${l.length} found ${h.type} cards`:`Select ${u} card${u>1?"s":""} from the top ${l.length} cards of your deck`}),v.jsx("div",{className:"mt-2",children:v.jsxs("span",{className:`text-lg font-bold ${x?"text-green-400":"text-yellow-400"}`,children:[i.length," of ",u," selected"]})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 justify-items-center",children:l.map((S,A)=>v.jsx(RF,{card:S,isSelected:i.some(C=>{const P=S.instanceId||`${S.id}-${S.name}`;return(C.instanceId||`${C.id}-${C.name}`)===P}),onClick:p},S.instanceId||`${S.id}-${A}`))})}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:g,className:"bg-gray-600 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:m,disabled:!x,className:`font-bold py-3 px-8 rounded-full transition-colors ${x?"bg-green-600 text-white hover:bg-green-700":"bg-gray-500 text-gray-300 cursor-not-allowed"}`,children:"Confirm Selection"})]})]})})},LF=({report:e,onClose:t})=>{if(!e)return null;const{card:n,targetName:r,targetLane:i}=e;return v.jsxs(Hi,{title:"AI Action: Card Played",text:"",onClose:t,children:[v.jsxs("div",{className:"flex flex-col items-center gap-4 mt-4",children:[v.jsxs("p",{className:"text-center text-lg text-gray-300",children:["The opponent played ",v.jsx("strong",{className:"text-purple-400",children:n.name}),r&&v.jsxs(v.Fragment,{children:[" on ",v.jsx("strong",{className:"text-cyan-400",children:r}),i&&v.jsxs(v.Fragment,{children:[" in ",v.jsx("strong",{className:"text-yellow-400",children:i})]})]}),"!"]}),v.jsx("div",{className:"transform scale-75",children:v.jsx(jh,{card:n,isPlayable:!1})})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})},$F=({report:e,onClose:t})=>{if(!e)return null;const{attackerName:n,lane:r,targetName:i,targetType:s,interceptorName:l,shieldDamage:u,hullDamage:f,wasDestroyed:h,remainingShields:p,remainingHull:m}=e,g=s==="section"?i.replace(/([A-Z])/g," $1").replace(/^./,x=>x.toUpperCase()):i;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[t&&v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Action Report"}),v.jsxs("div",{className:"text-left text-gray-300 space-y-3 mt-4 text-center",children:[v.jsxs("p",{children:[v.jsx("strong",{className:"text-pink-400",children:n})," attacked in"," ",v.jsx("strong",{children:r?.replace("lane","Lane ")||"Unknown Lane"}),"."]}),l?v.jsxs("p",{children:["Your ",v.jsx("strong",{className:"text-yellow-400",children:l})," intercepted the attack, which was targeting your ",v.jsx("strong",{className:"text-cyan-400",children:g}),"!"]}):v.jsxs("p",{children:["It targeted your ",v.jsx("strong",{className:"text-cyan-400",children:g}),"."]}),v.jsxs("p",{children:["The attack dealt ",v.jsx("strong",{className:"text-cyan-300",children:u})," damage to shields and ",v.jsx("strong",{className:"text-red-400",children:f})," damage to the hull."]}),h?v.jsx("p",{className:"font-bold text-red-500 text-lg",children:"The target was destroyed!"}):v.jsxs("p",{children:["The target has ",v.jsx("strong",{className:"text-cyan-300",children:p})," shields and ",v.jsx("strong",{className:"text-green-400",children:m})," hull remaining."]})]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Continue"})})]})})},BF=({isOpen:e,drone:t,onClose:n})=>!e||!t?null:v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-900 rounded-2xl border-2 border-purple-500 p-8 shadow-2xl shadow-purple-500/20 w-full max-w-lg relative",children:[v.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400 text-center mb-4",children:t.name}),v.jsx("div",{className:"flex justify-center",children:v.jsx(uf,{drone:t,isSelectable:!1,deployedCount:0})})]})}),UF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,turn:s,firstPasserOfPreviousRound:l,onContinue:u})=>{if(!e)return null;const f=t===n?r:i;let h;s===1?h="The first player is determined randomly for the first round.":h=`${l===n?r:i} passed first in the previous round, securing the initiative.`;const p=`${f} will go first this round. ${h}`;return v.jsx(Hi,{title:"First Player Determined",text:p,onClose:u,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:u,className:"btn-continue",children:"Continue"})})})},zF=({show:e,firstPlayerOfRound:t,localPlayerId:n,localPlayerName:r,opponentPlayerName:i,onContinue:s})=>{if(!e)return null;const u=`Deployment phase has ended. The action phase will now begin with ${t===n?r:i} going first.`;return v.jsx(Hi,{title:"Deployment Complete",text:u,onClose:s,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:s,className:"btn-continue",children:"Continue to Action Phase"})})})},GF=({show:e,onContinue:t})=>e?v.jsx(Hi,{title:"Round Over",text:"Both players have passed. The action phase has ended.",onClose:t,children:v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"btn-continue",children:"Begin Next Round"})})}):null,HF=({show:e,phase:t,opponentName:n="Opponent",roomCode:r})=>{if(!e)return null;const i=u=>{switch(u){case"determineFirstPlayer":return{title:"Waiting for Acknowledgment",message:`Waiting for ${n} to acknowledge first player determination`};case"mandatoryDiscard":return{title:"Waiting for Discard",message:`Waiting for ${n} to complete mandatory discard`};case"allocateShields":return{title:"Waiting for Shield Allocation",message:`Waiting for ${n} to allocate shields`};case"mandatoryDroneRemoval":return{title:"Waiting for Drone Removal",message:`Waiting for ${n} to remove excess drones`};case"deploymentComplete":return{title:"Waiting for Acknowledgment",message:`Waiting for ${n} to acknowledge deployment complete`};default:return{title:"Waiting for Opponent",message:`Waiting for ${n} to complete their action`}}},{title:s,message:l}=i(t);return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 pointer-events-none",children:v.jsxs("div",{className:"bg-slate-900 rounded-2xl border-2 border-amber-500 p-6 shadow-2xl shadow-amber-500/20 max-w-md w-full mx-4",children:[v.jsxs("div",{className:"text-center mb-4",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-400 mb-2",children:[v.jsx(Uw,{className:"w-6 h-6"}),v.jsx(Kf,{className:"w-6 h-6 animate-spin"})]}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:s}),v.jsx("p",{className:"text-gray-300 text-sm",children:l})]}),r&&v.jsx("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:v.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400 text-sm",children:[v.jsx(Gw,{className:"w-4 h-4"}),v.jsxs("span",{children:["Room: ",r]})]})}),v.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 mb-4",children:[v.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"You have completed your part:"}),v.jsx("p",{className:"text-white text-sm",children:"Waiting for opponent to finish"})]}),v.jsx("div",{className:"flex justify-center",children:v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})},qF=({confirmationModal:e,show:t})=>{if(!t||!e)return null;const n=`Confirm ${e.type==="discard"?"Discard":"Destruction"}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[e.onCancel&&v.jsx("button",{onClick:e.onCancel,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:n}),v.jsx("p",{className:"modal-text",children:e.text}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:e.onCancel,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:e.onConfirm,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-full hover:bg-red-700 transition-colors",children:"Confirm"})]})]})})},YF=({mandatoryAction:e,effectiveStats:t,show:n,onClose:r})=>{if(!n||!e)return null;const i=e.type==="discard",s=i?"Hand Limit Exceeded":"CPU Limit Exceeded",l=i?`Your hand limit is now ${t.handLimit}. Please select ${e.count} card(s) to discard.`:`Your drone limit is now ${t.cpuLimit}. Please select ${e.count} drone(s) to destroy.`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:s}),v.jsx("p",{className:"modal-text",children:l})]})})},FF=({winner:e,localPlayerId:t,show:n,onClose:r})=>{if(!n)return null;const i=e===t;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:i?"Victory!":"Defeat!"}),v.jsx("p",{className:"modal-text",children:i?"You have crippled the enemy command ship.":"Your command ship has been crippled."}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"View Final Board"})})]})})},VF=({decisionLog:e,show:t,onClose:n,getLocalPlayerId:r})=>{if(!t||!e)return null;const i=s=>{if(s.type==="deploy"||!s.target)return s.targetName;if(s.type==="attack")return`${s.target.name.replace(/([A-Z])/g," $1").replace(/^./,f=>f.toUpperCase())} (Lane ${s.attacker.lane.slice(-1)})`;const l=s.target.owner===r()?"Player":"AI";return String(s.target.id).startsWith("lane")?`${l} Lane ${s.target.id.slice(-1)}`:`${l}: ${s.targetName}`};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-7xl",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"AI Decision Matrix"}),v.jsx("p",{className:"modal-text",children:"This log shows all actions the AI considered for its turn, the score it assigned, and the logic behind that score."}),v.jsx("div",{className:"mt-4 max-h-[60vh] overflow-y-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"sticky top-0 bg-slate-800",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-2",children:"Type"}),v.jsx("th",{className:"p-2",children:"Instigator"}),v.jsx("th",{className:"p-2",children:"Target"}),v.jsx("th",{className:"p-2 w-1/3",children:"Logic Breakdown"}),v.jsx("th",{className:"p-2",children:"Score"}),v.jsx("th",{className:"p-2",children:"Chosen"})]})}),v.jsx("tbody",{children:e.sort((s,l)=>l.score-s.score).map((s,l)=>v.jsxs("tr",{className:`border-b border-gray-700/50 ${s.isChosen?"bg-purple-900/50":"hover:bg-slate-700/50"}`,children:[v.jsx("td",{className:"p-2 capitalize",children:s.type?s.type.replace("_"," "):"Deploy"}),v.jsx("td",{className:"p-2 text-purple-300",children:s.instigator}),v.jsx("td",{className:"p-2 text-cyan-300",children:i(s)}),v.jsx("td",{className:"p-2 text-gray-400 text-xs",children:s.logic.join(" -> ")}),v.jsx("td",{className:"p-2 font-bold text-lg",children:s.score}),v.jsx("td",{className:"p-2 text-center",children:s.isChosen&&v.jsx("span",{className:"text-yellow-400",children:""})})]},l))})]})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Close"})})]})})},KF=({deploymentConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{budgetCost:i,energyCost:s}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Deployment"}),v.jsxs("p",{className:"modal-text",children:["This deployment will use ",i," Initial Deployment points and cost ",s," Energy. Proceed?"]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},XF=({moveConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{drone:i,from:s,to:l}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Confirm Move"}),v.jsxs("p",{className:"modal-text",children:["Move ",i.name," from ",s," to ",l,"? The drone will be exhausted."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},WF=({choiceData:e,show:t,onIntercept:n,onDecline:r,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:f,localPlayerState:h,shipAbilityMode:p,droneRefs:m,mandatoryAction:g})=>{if(!t||!e)return null;const{attackDetails:x,interceptors:S}=e,{attacker:A,target:C,targetType:P,lane:O}=x;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-3xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Interception Opportunity!"}),v.jsxs("p",{className:"modal-text",children:["Combat in ",O?.replace("lane","Lane ")||"Unknown Lane"]}),v.jsxs("div",{className:"flex justify-around items-center my-4 p-4 bg-black/20 rounded-lg",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-pink-400 mb-2",children:"Attacker"}),v.jsx(sf,{drone:A,isPlayer:!1,lane:O,droneRefs:m,mandatoryAction:g,localPlayerState:h})]}),v.jsx("div",{className:"text-4xl font-bold text-gray-500",children:"VS"}),v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("h4",{className:"text-lg font-bold text-cyan-400 mb-2",children:"Target"}),P==="drone"?v.jsx(sf,{drone:C,isPlayer:!0,lane:O,droneRefs:m,mandatoryAction:g,localPlayerState:h}):v.jsx("div",{className:"transform scale-75",children:v.jsx(df,{section:C.name,stats:h.shipSections[C.name],isPlayer:!0,isInteractive:!1,gameEngine:i,turnPhase:s,isMyTurn:l,passInfo:u,getLocalPlayerId:f,localPlayerState:h,shipAbilityMode:p})})]})]}),v.jsx("h3",{className:"text-center text-white text-xl font-semibold mt-6 mb-2",children:"Choose an Interceptor"}),v.jsx("p",{className:"text-center text-gray-400 mb-4",children:"Drones with higher speed or special abilities can intercept the attack."}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 my-4",children:S.map(T=>v.jsx(sf,{drone:T,isPlayer:!0,onClick:()=>n(T),lane:O,droneRefs:m,mandatoryAction:g,localPlayerState:h},T.id))}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-cancel",children:"Decline Interception"})})]})})},QF=({interceptionModal:e,show:t,onClose:n})=>{if(!t||!e)return null;const{interceptor:r,originalTarget:i}=e;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Attack Intercepted!"}),v.jsxs("p",{className:"modal-text",children:["Your opponent used their ",r.name," to protect ",i.name,"!"]}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:n,className:"btn-continue",children:"Continue"})})]})})},ZF=({cardConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{card:i,target:s}=e;let l="";return s&&(s.name?l=s.name:s.id&&s.id.startsWith("lane")?l=`Lane ${s.id.slice(-1)}`:s.id&&(l=s.id.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase()))),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Action: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",i.name,l?` on ${l}`:"","? This will cost ",i.cost," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},JF=({abilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,drone:s,target:l}=e,u=`Lane ${l.id.slice(-1)}`;return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",s.name,"'s ability on ",u,"? This will cost ",i.cost.energy||0," energy and exhaust the drone."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},eV=({shipAbilityConfirmation:e,show:t,onCancel:n,onConfirm:r})=>{if(!t||!e)return null;const{ability:i,sectionName:s,target:l}=e,u=s.replace(/([A-Z])/g," $1").replace(/^./,h=>h.toUpperCase());let f="";return l&&(f=l.name),v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container modal-container-md",children:[n&&v.jsx("button",{onClick:n,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsxs("h2",{className:"modal-title",children:["Confirm Ability: ",i.name]}),v.jsxs("p",{className:"modal-text",children:["Use ",u,"'s ability",l?` on ${f}`:"","? This will cost ",i.cost.energy," energy."]}),v.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[v.jsx("button",{onClick:n,className:"btn-cancel",children:"Cancel"}),v.jsx("button",{onClick:r,className:"btn-confirm",children:"Confirm"})]})]})})},tV=({opponentPlayerState:e,show:t,debugMode:n,onClose:r})=>!t||!n||!e?null:v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container max-w-6xl",children:[r&&v.jsx("button",{onClick:r,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Opponent's Hand (Debug View)"}),v.jsxs("p",{className:"modal-text",children:["The opponent is holding ",e.hand.length," card(s). This view is for debug purposes only."]}),v.jsx("div",{className:"flex flex-nowrap items-center gap-4 my-4 p-4 overflow-x-auto bg-black/20 rounded",children:e.hand.length>0?e.hand.map(i=>v.jsx(jh,{card:i,isPlayable:!1},i.instanceId)):v.jsx("p",{className:"text-gray-500 italic",children:"The opponent's hand is empty."})}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:r,className:"btn-continue",children:"Close"})})]})}),nV=({show:e,onClose:t,gameStateManager:n,gameDataService:r})=>{const[i,s]=E.useState("raw");if(!e||!n)return null;const l=n.getState();n.getLocalPlayerId();const u=(g,x)=>{navigator.clipboard.writeText(JSON.stringify(g,null,2)).then(()=>console.log(`${x} copied to clipboard`)).catch(S=>console.error("Failed to copy:",S))},f=g=>g===null?"null":g===void 0?"undefined":typeof g=="boolean"?g.toString():typeof g=="string"?`"${g}"`:typeof g=="number"?g.toString():Array.isArray(g)?g.length===0?"[]":`[${g.length} items]`:typeof g=="object"?Object.keys(g).length===0?"{}":`{${Object.keys(g).length} properties}`:String(g),h=(g,x,S="")=>v.jsxs("div",{className:`mb-6 ${S}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h3",{className:"text-lg font-bold text-white",children:x}),v.jsxs("button",{onClick:()=>u(g,x),className:"flex items-center gap-1 text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded",children:[v.jsx(zw,{size:12}),"Copy"]})]}),v.jsx("div",{className:"bg-gray-900 rounded border overflow-auto max-h-96",children:v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-gray-800",children:[v.jsx("th",{className:"text-left p-2 border-b",children:"Property"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Value"}),v.jsx("th",{className:"text-left p-2 border-b",children:"Type"})]})}),v.jsx("tbody",{children:Object.entries(g).map(([A,C],P)=>v.jsxs("tr",{className:P%2===0?"bg-gray-900":"bg-gray-800",children:[v.jsx("td",{className:"p-2 border-b font-mono text-yellow-300",children:A}),v.jsx("td",{className:"p-2 border-b font-mono text-gray-300",children:f(C)}),v.jsx("td",{className:"p-2 border-b text-gray-500",children:typeof C=="object"&&C!==null?Array.isArray(C)?"array":"object":typeof C})]},A))})]})})]}),p=()=>{const g={appState:l.appState,gameMode:l.gameMode,gameActive:l.gameActive,turnPhase:l.turnPhase,currentPlayer:l.currentPlayer,turn:l.turn,firstPlayerOfRound:l.firstPlayerOfRound};return v.jsxs("div",{className:"p-4 space-y-6",children:[h(g,"Core Game Info"),h(l.player1,"Player 1 State","border-l-4 border-cyan-500 pl-4"),h(l.player2,"Player 2 State","border-l-4 border-pink-500 pl-4"),h({placedSections:l.placedSections},"Player 1 Placed Sections","border-l-4 border-cyan-500 pl-4"),h({opponentPlacedSections:l.opponentPlacedSections},"Player 2 Placed Sections","border-l-4 border-pink-500 pl-4"),l.passInfo&&h(l.passInfo,"Pass Information")]})},m=()=>{if(!r)return v.jsx("div",{className:"p-4 text-center text-red-400",children:"GameDataService not available"});try{const g=r.getEffectiveShipStats(l.player1,l.placedSections),x=r.getEffectiveShipStats(l.player2,l.opponentPlacedSections),S={},A={};["lane1","lane2","lane3"].forEach(P=>{S[P]=l.player1.dronesOnBoard[P].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,P)})),A[P]=l.player2.dronesOnBoard[P].map(O=>({drone:O.name,effectiveStats:r.getEffectiveStats(O,P)}))});const C=r.cache?{totalCalls:r.cache.stats?.totalCalls||"N/A",cacheHits:r.cache.stats?.cacheHits||"N/A",cacheMisses:r.cache.stats?.cacheMisses||"N/A",hitRate:r.cache.stats?`${(r.cache.stats.cacheHits/r.cache.stats.totalCalls*100).toFixed(1)}%`:"N/A"}:{note:"Cache statistics not available"};return v.jsxs("div",{className:"p-4 space-y-6",children:[h(g,"Player 1 Effective Ship Stats","border-l-4 border-cyan-500 pl-4"),h(x,"Player 2 Effective Ship Stats","border-l-4 border-pink-500 pl-4"),h(S,"Player 1 Effective Drone Stats","border-l-4 border-cyan-500 pl-4"),h(A,"Player 2 Effective Drone Stats","border-l-4 border-pink-500 pl-4"),h(C,"GameDataService Cache Statistics")]})}catch(g){return v.jsxs("div",{className:"p-4 text-center text-red-400",children:["Error loading calculated stats: ",g.message]})}};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container",style:{maxWidth:"90vw",maxHeight:"90vh",width:"1200px"},children:[v.jsx("button",{onClick:t,className:"modal-close",children:v.jsx(Kt,{size:24})}),v.jsx("h2",{className:"modal-title",children:"Game Debug View"}),v.jsxs("div",{className:"flex border-b border-gray-700 mb-4",children:[v.jsx("button",{onClick:()=>s("raw"),className:`px-6 py-3 font-medium transition-colors ${i==="raw"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Raw State"}),v.jsx("button",{onClick:()=>s("calculated"),className:`px-6 py-3 font-medium transition-colors ${i==="calculated"?"text-cyan-400 border-b-2 border-cyan-400 bg-gray-800":"text-gray-400 hover:text-gray-200"}`,children:"Calculated Stats"})]}),v.jsx("div",{className:"overflow-auto",style:{maxHeight:"calc(90vh - 200px)"},children:i==="raw"?p():m()}),v.jsx("div",{className:"flex justify-center mt-6",children:v.jsx("button",{onClick:t,className:"bg-gray-600 text-white font-bold py-2 px-6 rounded-full hover:bg-gray-700 transition-colors",children:"Close"})})]})})},rV=(e,t)=>{const[n,r]=E.useState([]),i=E.useCallback((s,l=null,u="large")=>{console.log(" [EXPLOSION] triggerExplosion called:",{targetId:s,capturedPosition:l,size:u});const f=ke.createExplosionEffect(s);let h=l;if(!h){const p=e.current[s];console.log(" [EXPLOSION] Looking for drone element:",{targetId:s,found:!!p}),h=rf(p,t.current)}if(console.log(" [EXPLOSION] Position calculated:",h),h){const p=`${f.timestamp}-${Math.random()}`;console.log(" [EXPLOSION] Adding explosion to state:",{explosionId:p,top:h.y,left:h.x,size:u}),r(m=>[...m,{id:p,top:h.y,left:h.x,size:u}]),setTimeout(()=>{r(m=>m.filter(g=>g.id!==p))},f.duration)}else console.warn(" [EXPLOSION] No position found, explosion not triggered")},[e,t]);return{explosions:n,triggerExplosion:i}};class aV{constructor(t){this.gameStateManager=t,this.isBlocking=!1,this.visualHandlers=new Map,this.animations={DRONE_ATTACK_START:{duration:500,type:"DRONE_FLY",config:{trail:!0,easing:"easeInOut",isReturn:!1}},DRONE_RETURN:{duration:0,type:"DRONE_FLY",config:{trail:!1,easing:"easeOut",isReturn:!0}},CARD_VISUAL:{duration:5e3,type:"CARD_VISUAL_EFFECT",config:{}},TELEPORT_IN:{duration:600,type:"TELEPORT_EFFECT",config:{}},SHIELD_DAMAGE:{duration:2e3,type:"FLASH_EFFECT",config:{color:"#00bcd4",intensity:.6}},HULL_DAMAGE:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"small"}},DRONE_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DESTROYED:{duration:2e3,type:"EXPLOSION_EFFECT",config:{size:"large"}},SECTION_DAMAGED:{duration:2e3,type:"SHAKE_EFFECT",config:{intensity:10}}}}registerVisualHandler(t,n){this.visualHandlers.set(t,n)}async executeAnimations(t){if(console.log("[ANIMATION EVENTS] AnimationManager executing:",t),t.forEach((n,r)=>{console.log(`[ANIMATION EVENTS] Animation ${r+1}:`,{name:n.animationName,type:this.animations[n.animationName]?.type,duration:this.animations[n.animationName]?.duration,payload:n.payload})}),console.log(" [AI ANIMATION DEBUG] AnimationManager.executeAnimations() called:",{effectCount:t?.length||0,effects:t?.map(n=>n.animationName)}),!t||t.length===0){console.log(" [AI ANIMATION DEBUG] No effects to execute, returning early");return}this.setBlocking(!0);try{const n=["SHIELD_DAMAGE","HULL_DAMAGE","DRONE_DESTROYED","SECTION_DESTROYED","SECTION_DAMAGED"];let r=0;for(;r<t.length;){const i=t[r];if(n.includes(i.animationName)){const s=[];for(;r<t.length&&n.includes(t[r].animationName);)s.push(t[r]),r++;console.log(" [ANIMATION DEBUG] Playing damage effects in parallel:",s.map(l=>l.animationName)),await Promise.all(s.map(async l=>{const u=this.animations[l.animationName];if(!u){console.warn(` [ANIMATION DEBUG] Unknown animation: ${l.animationName}`);return}const f=this.visualHandlers.get(u.type);if(!f){console.warn(` [ANIMATION DEBUG] No visual handler for: ${u.type}`);return}return new Promise(h=>{f({...l.payload,config:u.config,onComplete:h}),setTimeout(h,u.duration)})})),console.log(" [ANIMATION DEBUG] All damage effects completed")}else{console.log(" [ANIMATION DEBUG] Processing sequential effect:",i.animationName);const s=this.animations[i.animationName];if(!s){console.warn(` [ANIMATION DEBUG] Unknown animation: ${i.animationName}`),r++;continue}const l=this.visualHandlers.get(s.type);if(!l){console.warn(` [ANIMATION DEBUG] No visual handler for: ${s.type}`),r++;continue}await new Promise(u=>{l({...i.payload,config:s.config,onComplete:u}),setTimeout(u,s.duration)}),console.log(" [ANIMATION DEBUG] Animation completed:",i.animationName),r++}}}finally{await new Promise(n=>setTimeout(n,200)),this.setBlocking(!1),console.log(" [AI ANIMATION DEBUG] All animations completed, blocking released")}}setBlocking(t){console.log(` [ANIMATION BLOCKING] Setting blocking to: ${t}`),this.isBlocking=t,this.gameStateManager.emit("animationStateChange",{blocking:t})}}const iV=({position:e,color:t="#00bcd4",intensity:n=.6,onComplete:r})=>{const[i,s]=E.useState(0);return E.useEffect(()=>{if(!e){r?.();return}const l=50,u=100,f=150;setTimeout(()=>s(n),10),setTimeout(()=>s(0),l+u),setTimeout(()=>{r?.()},l+u+f)},[n,r,e]),e?v.jsx("div",{style:{position:"fixed",left:e.left,top:e.top,width:e.width,height:e.height,backgroundColor:t,opacity:i,borderRadius:"8px",pointerEvents:"none",zIndex:9997,transition:`opacity ${i>0?"50ms":"150ms"} ease-${i>0?"in":"out"}`}}):null},oV=({visualType:e,startPos:t,endPos:n,duration:r=800,onComplete:i})=>{const[s,l]=E.useState(!1);if(E.useEffect(()=>{if(!t||!n){i?.();return}l(!0);const u=setTimeout(()=>{l(!1),i?.()},r);return()=>clearTimeout(u)},[e,t,n,r,i]),!s||!t||!n)return null;switch(e){case"LASER_BLAST":return v.jsx(sV,{startPos:t,endPos:n,duration:r});case"ENERGY_WAVE":return v.jsx(lV,{startPos:t,endPos:n,duration:r});case"NUKE_BLAST":return v.jsx(cV,{endPos:n,duration:r});default:return null}},sV=({startPos:e,endPos:t,duration:n})=>{const r=Math.atan2(t.y-e.y,t.x-e.x),i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));return v.jsx("div",{style:{position:"fixed",left:e.x,top:e.y,width:i,height:"4px",backgroundColor:"#ff0000",boxShadow:"0 0 10px #ff0000, 0 0 20px #ff0000",transformOrigin:"0 50%",transform:`rotate(${r}rad)`,zIndex:9998,pointerEvents:"none",animation:`laserFade ${n}ms ease-out forwards`}})},lV=({startPos:e,duration:t})=>v.jsx("div",{style:{position:"fixed",left:e.x-20,top:e.y-20,width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#00ff00",opacity:.7,zIndex:9998,pointerEvents:"none",animation:`energyPulse ${t}ms ease-out forwards`}}),cV=({endPos:e,duration:t})=>v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{position:"fixed",left:e.x-150,top:e.y-150,width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,100,0,0.9) 0%, rgba(255,50,0,0.6) 40%, rgba(255,200,0,0.3) 70%, transparent 100%)",zIndex:9998,pointerEvents:"none",animation:`nukeExpand ${t}ms ease-out forwards`}}),v.jsx("div",{style:{position:"fixed",left:e.x-200,top:e.y-200,width:"400px",height:"400px",borderRadius:"50%",backgroundColor:"#ffffff",opacity:.8,zIndex:9997,pointerEvents:"none",animation:`nukeFlash ${t}ms ease-out forwards`}})]});function uV(e,t,n,r,i,s,l,u,f,h,p,m,g,x){E.useEffect(()=>{r(),i();const S=new aV(e),A=(P,O,T,j)=>{if(j==="drone")return t.current[T]||null;if(j==="section"){const N=e.getLocalPlayerId(),D=P===N?"local":"opponent";return n.current[`${D}-${T}`]||null}return null};S.registerVisualHandler("DRONE_FLY",P=>{const{droneId:O,sourcePlayer:T,sourceLane:j,targetId:N,targetPlayer:D,targetLane:M,targetType:R,config:U,attackValue:K,onComplete:q}=P;if(U.isReturn){q?.();return}console.log(" [LASER DEBUG] DRONE_FLY handler called:",{droneId:O,sourcePlayer:T,sourceLane:j,targetId:N,targetPlayer:D,targetType:R,attackValue:K,config:U});const W=A(T,j,O,"drone"),le=A(D,M,N,R);if(!W||!le){console.warn(" [LASER DEBUG] Missing DOM elements, skipping laser",{hasDrone:!!W,hasTarget:!!le,sourcePlayer:T,sourceLane:j,targetPlayer:D,targetType:R,targetId:N}),q?.();return}console.log(" [LASER DEBUG] Creating laser effect with attack:",K);const ie=l(W,u.current),te=l(le,u.current),L=`laser-${O}-${Date.now()}`;g(ee=>[...ee,{id:L,startPos:ie,endPos:te,attackValue:K||1,duration:500,onComplete:()=>{g(he=>he.filter(Se=>Se.id!==L)),q?.()}}])}),S.registerVisualHandler("EXPLOSION_EFFECT",P=>{const{targetId:O,targetPlayer:T,targetLane:j,targetType:N,config:D,onComplete:M}=P,R=A(T,j,O,N);if(R){const U=l(R,u.current);s(O,U,D?.size||"large")}else console.warn(" [EXPLOSION DEBUG] Target element not found:",{targetId:O,targetPlayer:T,targetLane:j,targetType:N});M?.()}),S.registerVisualHandler("FLASH_EFFECT",P=>{const{targetId:O,targetPlayer:T,targetLane:j,targetType:N,config:D,onComplete:M}=P,R=A(T,j,O,N);if(!R){console.warn(" [FLASH DEBUG] Target element not found:",{targetId:O,targetPlayer:T,targetLane:j,targetType:N}),M?.();return}const U=R.getBoundingClientRect(),K=`flash-${O}-${Date.now()}`;p(q=>[...q,{id:K,position:{left:U.left,top:U.top,width:U.width,height:U.height},color:D.color,intensity:D.intensity,onComplete:()=>{p(W=>W.filter(le=>le.id!==K)),M?.()}}])}),S.registerVisualHandler("CARD_VISUAL_EFFECT",P=>{const{visualType:O,sourcePlayer:T,targetId:j,targetPlayer:N,targetLane:D,targetType:M,duration:R,onComplete:U}=P,K=u.current?.getBoundingClientRect();if(!K){U?.();return}const q=e.getLocalPlayerId(),W=T===q?K.bottom-100:K.top+100,le=K.left+K.width/2,ie=A(N,D,j,M);if(!ie){console.warn(" [CARD VISUAL DEBUG] Target element not found:",{targetId:j,targetPlayer:N,targetLane:D,targetType:M}),U?.();return}const te=ie.getBoundingClientRect(),L={x:te.left+te.width/2,y:te.top+te.height/2},ee=`cardvisual-${Date.now()}`;m(he=>[...he,{id:ee,visualType:O||"LASER_BLAST",startPos:{x:le,y:W},endPos:L,duration:R||800,onComplete:()=>{m(Se=>Se.filter(k=>k.id!==ee)),U?.()}}])}),S.registerVisualHandler("SHAKE_EFFECT",P=>{const{targetId:O,config:T,onComplete:j}=P,N=t.current[O];N?(N.classList.add("animate-shake-damage"),setTimeout(()=>{N.classList.remove("animate-shake-damage"),j?.()},T?.duration||500)):j?.()}),S.registerVisualHandler("TELEPORT_EFFECT",P=>{const{targetId:O,laneId:T,playerId:j,onComplete:N}=P;console.log(" [TELEPORT DEBUG] TELEPORT_EFFECT handler called:",{targetId:O,laneId:T,playerId:j});const D=t.current[O];if(!D){console.warn(" [TELEPORT DEBUG] Drone element not found - placeholder may not have rendered yet:",O),N?.();return}const M=l(D,u.current);console.log(" [TELEPORT DEBUG] Using exact drone placeholder position:",M);const R=e.getLocalPlayerId(),K=j===R?"#00ffff":"#ec4899",q=`teleport-${O}-${Date.now()}`;x(W=>[...W,{id:q,top:M.y,left:M.x,color:K,duration:600,onComplete:()=>{x(le=>le.filter(ie=>ie.id!==q)),N?.()}}])});const C=e.subscribe(P=>{P.type==="animationStateChange"&&h(P.blocking)});return e.actionProcessor.setAnimationManager(S),C},[r,i,e,s,t,n,l,u,f,h,p,m,g,x])}const dV=({droneData:e,startPos:t,endPos:n,config:r,onComplete:i})=>{const[s,l]=E.useState(t),[u,f]=E.useState([]),h=E.useRef(),p=E.useRef(Date.now());return E.useEffect(()=>{const m=r.duration||800,g=()=>{const x=Date.now()-p.current,S=Math.min(x/m,1),A=S<.5?2*S*S:-1+(4-2*S)*S,C=t.x+(n.x-t.x)*A,P=t.y+(n.y-t.y)*A;l({x:C,y:P}),r.trail&&f(O=>[...O.slice(-8),{id:Date.now(),x:C,y:P}]),S<1?h.current=requestAnimationFrame(g):i?.()};return h.current=requestAnimationFrame(g),()=>{h.current&&cancelAnimationFrame(h.current)}},[t,n,r,i]),v.jsxs(v.Fragment,{children:[u.map((m,g)=>v.jsx("div",{style:{position:"fixed",left:m.x+35,top:m.y+60,width:"10px",height:"10px",borderRadius:"50%",background:e.owner==="player1"?"#00bcd4":"#e91e63",opacity:.3+g*.05,filter:"blur(2px)",pointerEvents:"none",zIndex:9998}},m.id)),v.jsx("div",{style:{position:"fixed",left:s.x,top:s.y,width:"90px",height:"135px",zIndex:9999,pointerEvents:"none",transform:`scale(${r.isReturn?1:1.1})`,transition:"transform 0.3s"},children:v.jsx("img",{src:e.image,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"}})})]})},fV=({startPos:e,endPos:t,attackValue:n=1,duration:r=500,onComplete:i})=>{const[s,l]=E.useState(0);E.useEffect(()=>{setTimeout(()=>l(1),50);const g=r*.7;setTimeout(()=>l(0),g);const x=setTimeout(()=>{i?.()},r);return()=>{clearTimeout(x)}},[r,i]);const u=t.x-e.x,f=t.y-e.y,h=Math.sqrt(u*u+f*f),p=Math.atan2(f,u)*(180/Math.PI),m=Math.max(3,2+n*1.5);return v.jsxs("div",{style:{position:"fixed",left:`${e.x}px`,top:`${e.y}px`,width:`${h}px`,height:`${m}px`,transformOrigin:"0 50%",transform:`rotate(${p}deg)`,pointerEvents:"none",zIndex:9998,opacity:s,transition:`opacity ${r*.15}ms ease-in-out`},children:[v.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",background:"linear-gradient(to right, rgba(255, 0, 0, 0), rgba(255, 0, 0, 1) 10%, rgba(255, 0, 0, 1) 90%, rgba(255, 0, 0, 0))",boxShadow:`0 0 ${m*2}px rgba(255, 0, 0, 0.8), 0 0 ${m*4}px rgba(255, 0, 0, 0.4)`,animation:`laserPulse ${r}ms ease-in-out`}}),v.jsx("div",{style:{position:"absolute",width:"100%",height:"40%",top:"30%",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 20%, rgba(255, 255, 255, 0.9) 80%, rgba(255, 255, 255, 0))",filter:"blur(1px)"}})]})},hV=({top:e,left:t,duration:n=800,color:r="#00ffff",onComplete:i})=>{const[s,l]=E.useState([]);return E.useEffect(()=>{const u=[];for(let p=0;p<16;p++){const m=Math.PI*2*p/16;u.push({id:p,angle:m,delay:p/16*200})}l(u);const h=setTimeout(()=>{i?.()},n);return()=>clearTimeout(h)},[n,i]),v.jsxs("div",{style:{position:"fixed",left:`${t}px`,top:`${e}px`,width:"120px",height:"180px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:9999},children:[v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out forwards`},children:v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out forwards`,boxShadow:`0 0 20px ${r}`}})}),v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"100%",height:"100%",transform:"translate(-50%, -50%)",animation:`teleportRing ${n}ms ease-out ${n*.2}ms forwards`},children:v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"20px",height:"20px",border:`2px solid ${r}`,borderRadius:"50%",transform:"translate(-50%, -50%)",animation:`teleportExpand ${n}ms ease-out ${n*.2}ms forwards`,boxShadow:`0 0 15px ${r}`}})}),s.map(u=>v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"6px",height:"6px",backgroundColor:r,borderRadius:"50%",boxShadow:`0 0 8px ${r}`,"--angle":`${u.angle}rad`,animation:`teleportParticle ${n}ms ease-in ${u.delay}ms forwards`}},u.id)),v.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",width:"40px",height:"40px",transform:"translate(-50%, -50%)",background:`radial-gradient(circle, ${r}cc 0%, ${r}00 70%)`,animation:`teleportGlow ${n}ms ease-in-out forwards`}})]})},Rw=()=>{const{gameState:e,isMyTurn:t,getLocalPlayerId:n,getOpponentPlayerId:r,isMultiplayer:i,getLocalPlayerState:s,getOpponentPlayerState:l,getLocalPlacedSections:u,getOpponentPlacedSections:f,updatePlayerState:h,addLogEntry:p,resetGame:m,setWinner:g,processAction:x,gameStateManager:S,p2pManager:A}=Ii(),{getEffectiveStats:C,getEffectiveShipStats:P,gameDataService:O}=Nh(),T=!0,[j,N]=E.useState(!1),[D,M]=E.useState(!1),[R,U]=E.useState([]),[K,q]=E.useState([]),[W,le]=E.useState([]),[ie,te]=E.useState([]),[L,ee]=E.useState([]),[he,Se]=E.useState(!1),[k,J]=E.useState(null),[F,ne]=E.useState(null),[me,z]=E.useState(null),[ae,ve]=E.useState(null),[pe,oe]=E.useState(!1),[ue,be]=E.useState(!1),[de,rt]=E.useState(!1),[Le,Pt]=E.useState(null),[kt,ft]=E.useState(!1),[Fr,ha]=E.useState(!1),[Xo,qi]=E.useState(!1),[Fe,Tt]=E.useState(null),[Mh,hu]=E.useState(null),[Yi,On]=E.useState(null),[Rn,yn]=E.useState(null),[ml,Wo]=E.useState(null),[Qo,Qa]=E.useState(null),[Zo,Vr]=E.useState([]),[Fi,kr]=E.useState(null),[pa,Jo]=E.useState(null),[gl,es]=E.useState(null),[Za,yl]=E.useState("drones"),[vl,ts]=E.useState(!0),[bl,Ja]=E.useState([]),[ei,pu]=E.useState({visible:!1,start:{x:0,y:0},end:{x:0,y:0}}),[ma,sn]=E.useState({}),[He,Tn]=E.useState(null),[ga,xl]=E.useState([]),[ur,Kr]=E.useState(null),[Rr,Xr]=E.useState(null),[Rt,_n]=E.useState(null),[Yn,Wr]=E.useState([]),[At,Ir]=E.useState(null),[ti,dr]=E.useState(null),[We,Lr]=E.useState(null),[mu,Sl]=E.useState(null),[kh,Vi]=E.useState(null),[ns,fr]=E.useState(null),[hr,ni]=E.useState(null),[ri,rs]=E.useState(!1),[as,ya]=E.useState(null),[Ki,ln]=E.useState(null),[ai,Rh]=E.useState(null),[Xi,is]=E.useState(0),[Wi,gu]=E.useState(0),[Fn,Al]=E.useState(null),[Ih,yu]=E.useState(null),[Qi,vu]=E.useState(null),[Lh,Zi]=E.useState(null),[$h,El]=E.useState(0),Ji=E.useRef(null),Qr=E.useRef({}),bu=E.useRef({}),Zr=E.useRef(null),$r=E.useRef(!1),{explosions:Cl,triggerExplosion:eo}=rV(Qr,Zr);uV(S,Qr,bu,s,l,eo,rf,Zr,U,Se,q,le,te,ee),E.useEffect(()=>{Bc.initialize(S,S.actionProcessor,()=>e.gameMode!=="local",la),console.log(" GameFlowManager initialized")},[]),E.useEffect(()=>{const B=ge=>{const{type:fe,phase:ye,playerId:Te,data:Me}=ge;if(console.log(` App.jsx received PhaseManager event: ${fe}`,{phase:ye,playerId:Te}),fe==="phaseTransition"){const{newPhase:Be,previousPhase:mt,firstPlayerResult:cn}=ge;console.log(` App.jsx handling phase transition: ${mt}  ${Be}`),Le===mt&&Pt(null),Be==="determineFirstPlayer"&&(console.log(" First player determination phase started, showing modal"),oe(!0)),Be==="deploymentComplete"&&(console.log(" Deployment complete phase started, showing modal"),be(!0))}else fe==="phaseComplete"&&(console.log(` App.jsx handling phase completion: ${ye}`),Le===ye&&Pt(null),ye==="determineFirstPlayer"&&console.log(" Both players acknowledged first player determination"),ye==="deploymentComplete"&&console.log(" Both players acknowledged deployment complete"))},Q=Bc.subscribe(B);return()=>{Q()}},[i,n,J,Le]);const{turnPhase:Qe,turn:Vn,currentPlayer:va,firstPlayerOfRound:to,firstPasserOfPreviousRound:xu,firstPlayerOverride:os,passInfo:ht,winner:Dn,unplacedSections:ss,shieldsToAllocate:Jr,gameLog:no,placedSections:Pl}=e,[Bh,wl]=E.useState(va),ls=E.useRef(ht),Su=E.useRef(Qe),vn=E.useRef(Dn);E.useEffect(()=>{ls.current=ht},[ht]),E.useEffect(()=>{Su.current=Qe},[Qe]),E.useEffect(()=>{vn.current=Dn},[Dn]);const Pe=s(),Re=l(),pr=u(),ro=f();if(!Pe||!Re)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Initializing game board..."})});const cs=E.useCallback(()=>({player1:e.player1,player2:e.player2}),[e.player1,e.player2]),ba=E.useCallback(()=>({player1:e.placedSections,player2:e.opponentPlacedSections}),[e.placedSections,e.opponentPlacedSections]);E.useEffect(()=>{if(!i())return;const B=ge=>{if(console.log(" P2P Event received in App:",ge),ge.type==="PHASE_COMPLETED"){const{phase:fe}=ge.data||ge;console.log(` Opponent completed phase: ${fe}`)}};return A.subscribe(B)},[i,A]);const ea=Pe?P(Pe,pr):null,ao=Re?P(Re,ro):null,Ol=E.useMemo(()=>Pe?Object.values(Pe.dronesOnBoard).flat().length:0,[Pe?.dronesOnBoard]),Au=E.useMemo(()=>Re?Object.values(Re.dronesOnBoard).flat().length:0,[Re?.dronesOnBoard]),Uh=E.useMemo(()=>[...Pe.activeDronePool].sort((B,Q)=>B.class!==Q.class?B.class-Q.class:B.name.localeCompare(Q.name)),[Pe.activeDronePool]);E.useMemo(()=>Pe?Object.keys(Pe.shipSections).some(B=>Pe.shipSections[B].allocatedShields<O.getEffectiveSectionMaxShields(B,Pe,pr)):!1,[Pe.shipSections,pr,O]),E.useCallback(B=>{if(console.log(` sendPhaseCompletion called for phase: ${B}`),i()){const Q={type:"PHASE_COMPLETED",data:{phase:B}};console.log(" Sending phase completion message:",Q),A.sendData(Q),console.log(` Sent phase completion: ${B}`)}else console.log(" Not multiplayer, skipping network send")},[i,A]),E.useCallback(async()=>{kr(null),await x("turnTransition",{newPlayer:n(),reason:"aiReportClosed"})},[x,n]),E.useCallback(async()=>{pa&&!pa.card.effect.goAgain?await x("turnTransition",{newPlayer:n(),reason:"aiCardReportClosed"}):pa&&pa.card.effect.goAgain&&!Dn&&await x("turnTransition",{newPlayer:r(),reason:"aiGoAgain"}),Jo(null)},[x,n,r,pa,Dn]),E.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:Q}=ke.calculateAllValidTargets(He,ur,We,Rt,Pe,Re);xl(B),Wr(Q),He&&(_n(null),Kr(null))},[He,ur,Rt,Pe,Re,We]);const xa=()=>{He&&(Tn(null),Tt(null))},Ht=()=>{_n(null),Lr(null)},ta=E.useCallback(async B=>{if($r.current){console.warn("Attack already in progress. Aborting duplicate call.");return}$r.current=!0;try{const Q=ye=>{Ja(Te=>[...Te,ye]),setTimeout(()=>Ja(Te=>Te.filter(Me=>Me!==ye)),500)},ge=new Map;if(B.targetId){const ye=rf(Qr.current[B.targetId],Zr.current);ye&&ge.set(B.targetId,ye)}await new Promise(ye=>setTimeout(ye,250));const fe=await x("attack",{attackDetails:B});B.targetId&&Q(B.targetId),B.attackingPlayer===r()&&kr({...fe.attackResult,isBlocking:!0}),fe.afterAttackEffects&&fe.afterAttackEffects.forEach(ye=>{if(ye.type==="EXPLOSION"){const Te=ge.get(ye.payload.targetId);eo(ye.payload.targetId,Te)}else ye.type==="HIT_ANIMATION"&&(Ja(Te=>[...Te,ye.payload.targetId]),setTimeout(()=>{Ja(Te=>Te.filter(Me=>Me!==ye.payload.targetId))},500))}),yn(null)}catch(Q){console.error("Error in resolveAttack:",Q),yn(null),kr(null)}finally{$r.current=!1}},[eo,x,n,r]),Eu=E.useCallback(async(B,Q,ge)=>{try{const fe=await x("ability",{droneId:Q.id,abilityIndex:Q.abilities.indexOf(B),targetId:ge?.id||null});xa()}catch(fe){console.error("Error in resolveAbility:",fe),xa()}},[x,n]),zh=E.useCallback(async(B,Q,ge)=>{const fe=await x("shipAbility",{ability:B,sectionName:Q,targetId:ge?.id||null,playerId:n()});if(fe.mandatoryAction){ni(fe.mandatoryAction),yl("hand"),ts(!0),Kr(null),Xr(null);return}if(fe.requiresShieldReallocation){Kr(null),Xr(null);return}return Kr(null),Xr(null),fe},[x,n]),Cu=E.useCallback(async(B,Q,ge,fe=null)=>{if(ge===r()){let Te="",Me="";if(Q)if(Q.name){if(Te=Q.name,Q.id&&Q.owner){const Be=Q.owner===n()?Pe:Re;for(const[mt,cn]of Object.entries(Be.dronesOnBoard))if(cn.some(_t=>_t.id===Q.id)){Me=mt.replace("lane","Lane ");break}}}else Q.id.startsWith("lane")?(Te=`Lane ${Q.id.slice(-1)}`,Me=`Lane ${Q.id.slice(-1)}`):Te=Q.id.replace(/([A-Z])/g," $1").replace(/^./,Be=>Be.toUpperCase());Jo({card:B,targetName:Te,targetLane:Me})}const ye=await x("cardPlay",{card:B,targetId:Q?.id||null,playerId:ge});if(ye.needsCardSelection){if(ye.needsCardSelection.type==="single_move"||ye.needsCardSelection.type==="multi_move"){Lr({card:ye.needsCardSelection.card,phase:ye.needsCardSelection.phase,selectedDrones:[],sourceLane:null});return}ln({...ye.needsCardSelection,onConfirm:Te=>{Gh(Te,ye.needsCardSelection,B,Q,ge,fe,ye.newPlayerStates),ln(null)},onCancel:()=>{ln(null),ge===n()&&(Ht(),Ir(null))}});return}return ge===n()&&(Ht(),Ir(null)),ye},[x,n,Pe,Re]),Gh=E.useCallback((B,Q,ge,fe,ye,Te,Me=null)=>{const{searchedCards:Be,remainingDeck:mt,discardPile:cn,shuffleAfter:_t}=Q,It=Be.filter(so=>{const ap=so.instanceId||`${so.id}-${so.name}`;return!B.some(Dl=>(Dl.instanceId||`${Dl.id}-${Dl.name}`)===ap)}),In=Me||{player1:Pe,player2:Re},un=ye===n()?In[n()]:In[r()],oo=[...un.hand,...B];let ii=[...mt,...It];_t&&(ii=ii.sort(()=>.5-Math.random()));const Sa={...un,deck:ii,hand:oo,discardPile:cn};p({player:un.name,actionType:"CARD_SELECTION",source:ge.name,target:`Selected ${B.length} cards`,outcome:`Drew: ${B.map(so=>so.name).join(", ")}`},"handleCardSelection",ye===r()?Te:null);const Mu={[n()]:ye===n()?{...un,deck:Sa.deck,hand:Sa.hand,discardPile:Sa.discardPile}:In[n()],[r()]:ye===r()?{...un,deck:Sa.deck,hand:Sa.hand,discardPile:Sa.discardPile}:In[r()]},ku=ke.finishCardPlay(ge,ye,Mu);S.setPlayerStates(ku.newPlayerStates.player1,ku.newPlayerStates.player2),ye===n()&&(Ht(),Ir(null))},[Pe,Re,p]),Pu=E.useCallback(async(B,Q,ge,fe)=>{await x("movementCompletion",{card:B,movementType:"multi_move",drones:Q,fromLane:ge,toLane:fe,playerId:n()}),Lr(null),Ht()},[x,n]),Hh=E.useCallback(async(B,Q,ge,fe)=>{await x("movementCompletion",{card:B,movementType:"single_move",drones:[Q],fromLane:ge,toLane:fe,playerId:n()}),Lr(null),Ht()},[x,n]),qh=B=>{vl?Za===B?ts(!1):yl(B):(ts(!0),yl(B))};E.useEffect(()=>{const{validAbilityTargets:B,validCardTargets:Q}=ke.calculateAllValidTargets(He,ur,We,Rt,Pe,Re);xl(B),Wr(Q),He&&(_n(null),Kr(null))},[He,ur,Rt,Pe,Re,We]),E.useEffect(()=>{Dn||ke.checkGameStateForWinner(cs(),{logCallback:p,setWinnerCallback:g,showWinnerModalCallback:ft})},[Pe?.shipSections,Re?.shipSections,Dn,p]),E.useEffect(()=>{if(Qe==="action"){const B=ke.calculatePotentialInterceptors(Fe,Pe,Re,ba());Vr(B)}else Vr([])},[Fe,Qe,Pe,Re,ke,pr,ro]),E.useEffect(()=>{hu(null)},[Fe]),E.useEffect(()=>{if(Fe&&!He&&Qe==="action"){const B=rf(Qr.current[Fe.id],Zr.current);B&&pu({visible:!0,start:B,end:{x:B.x,y:B.y}})}else pu(B=>({...B,visible:!1}))},[Fe,Qe,He]),E.useEffect(()=>{const B=ge=>{if(ei.visible&&Ji.current&&Zr.current){const fe=Zr.current.getBoundingClientRect(),ye=ge.clientX-fe.left,Te=ge.clientY-fe.top;Ji.current.setAttribute("x2",ye),Ji.current.setAttribute("y2",Te)}},Q=Zr.current;return Q?.addEventListener("mousemove",B),()=>{Q?.removeEventListener("mousemove",B)}},[ei.visible]),E.useEffect(()=>{Dn&&$r.current&&(console.log("[DEFENSIVE CLEANUP] Resetting stuck attack flag due to game state change"),$r.current=!1)},[Dn,Qe,va]);const Yh=()=>{m(),$r.current=!1,Tt(null),J(null),kr(null),Tn(null),xl([]),ni(null),rs(!1),ya(null),_n(null),Wr([]),Ir(null),ft(!1)},Fh=async B=>{const{turnPhase:Q}=e;Q==="allocateShields"?await x("allocateShield",{sectionName:B,playerId:n()}):await x("reallocateShields",{action:"add",sectionName:B,playerId:n()})},Tl=async B=>{if(Wi<=0||Pe.shipSections[B].allocatedShields<=0)return;(await x("reallocateShields",{action:"remove",sectionName:B,playerId:n()})).success&&(gu(fe=>fe-1),is(fe=>fe+1))},Vh=async B=>{if(Xi<=0)return;(await x("reallocateShields",{action:"add",sectionName:B,playerId:n()})).success&&is(ge=>ge-1)},Kh=async()=>{console.log(" App.jsx: Acknowledging first player determination");const B=n();if((await x("acknowledgeFirstPlayer",{playerId:B})).success){oe(!1);const ge=e.commitments?.determineFirstPlayer||{};!(Object.keys(ge).length===2)&&e.gameMode!=="local"&&Pt("determineFirstPlayer")}},Xh=async()=>{console.log(" App.jsx: Acknowledging deployment complete");const B=n(),Q=await x("acknowledgeDeploymentComplete",{playerId:B});Q.success&&(be(!1),Q.data?.bothPlayersComplete||Pt("deploymentComplete"))},wu=B=>{if(ai){ai==="removing"?Tl(B):ai==="adding"&&Vh(B);return}Qe==="allocateShields"&&Fh(B)},Wh=B=>{ht[n()+"Passed"]||(Fe&&Fe.name===B.name?Tt(null):(Tt(B),Tn(null),Ht()))},Ou=async B=>{try{const Q=await x("deployment",{droneData:Fe,laneId:B,playerId:n(),turn:Vn});Q.success?Tt(null):J({title:Q.error,text:Q.message,isBlocking:!0})}catch(Q){console.error("Error executing deployment:",Q),J({title:"Deployment Error",text:"Failed to execute deployment",isBlocking:!0})}},Qh=B=>{if(!(!Fe||va!==n()||ht[n()+"Passed"])){if(Vn===1){const Q=ke.validateDeployment(Pe,Fe,Vn,Ol,ea);if(!Q.isValid){J({title:Q.reason,text:Q.message,isBlocking:!0});return}const{budgetCost:ge,energyCost:fe}=Q;if(fe>0){ne({lane:B,budgetCost:ge,energyCost:fe});return}}Ou(B)}},Zh=async()=>{ht[`${n()}Passed`]||await x("playerPass",{playerId:n(),playerName:Pe.name,turnPhase:Qe,passInfo:ht,opponentPlayerId:r()})};E.useEffect(()=>{if(!Rn||Rn.attackingPlayer!==r())return;const B=ke.calculateAiInterception(Rn,cs(),ba());B.hasInterceptors?Qa({attackDetails:B.attackDetails,interceptors:B.interceptors}):ta(Rn)},[Rn,ta,pr,ro]);const Jh=(B,Q,ge)=>{if(B.stopPropagation(),Qe!=="action"||va!==n()||ht[n()+"Passed"])return;const fe=ge.cost||{};if(Q.isExhausted&&fe.exhausts!==!1){J({title:"Drone Exhausted",text:"This drone cannot perform any more actions this turn.",isBlocking:!0});return}if(fe.energy&&Pe.energy<fe.energy){J({title:"Not Enough Energy",text:`This ability costs ${fe.energy} energy, but you only have ${Pe.energy}.`,isBlocking:!0});return}if(ge.targeting?.type==="LANE"&&ge.targeting?.location==="SAME_LANE"){const ye=ke.getLaneOfDrone(Q.id,Pe);if(ye){dr({ability:ge,drone:Q,target:{id:ye,owner:n()}});return}}He&&He.drone.id===Q.id?xa():(Tn({drone:Q,ability:ge}),Tt(Q),Ht())},ep=(B,Q,ge)=>{if(B.stopPropagation(),!(Qe!=="action"||!t()||ht[`${n()}Passed`])){if(Pe.energy<ge.cost.energy){J({title:"Not Enough Energy",text:`This ability costs ${ge.cost.energy} energy, but you only have ${Pe.energy}.`,isBlocking:!0});return}ur?.ability.id===ge.id?Kr(null):ge.targeting?(Kr({sectionName:Q.name,ability:ge}),Tt(null),xa(),Ht()):ge.effect.type==="REALLOCATE_SHIELDS"?(Rh("removing"),gu(ge.effect.value.maxShields),is(0),Al(JSON.parse(JSON.stringify(Pe.shipSections))),vu({ability:ge,sectionName:Q.name})):Xr({ability:ge,sectionName:Q.name,target:null})}},tp=(B,Q,ge)=>{if(B.stopPropagation(),console.log(`--- handleTokenClick triggered for ${Q.name} (isPlayer: ${ge}) ---`),We&&We.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:fe,maxSelection:ye}=We;fe.some(Me=>Me.id===Q.id)?Lr(Me=>({...Me,selectedDrones:Me.selectedDrones.filter(Be=>Be.id!==Q.id)})):fe.length<ye&&Lr(Me=>({...Me,selectedDrones:[...Me.selectedDrones,Q]}));return}if(ga.some(fe=>fe.id===Q.id)||Yn.some(fe=>fe.id===Q.id)){console.log("Action: Targeting for an active card/ability."),Tu(Q,"drone",ge);return}if(Qe==="action"&&t()&&Fe&&!Fe.isExhausted&&!ge){console.log("Action: Attempting a standard attack."),console.log("Attacker selected:",Fe.name,`(ID: ${Fe.id})`),console.log("Target clicked:",Q.name,`(ID: ${Q.id})`);const[fe]=Object.entries(Pe.dronesOnBoard).find(([Te,Me])=>Me.some(Be=>Be.id===Fe.id))||[],[ye]=Object.entries(Re.dronesOnBoard).find(([Te,Me])=>Me.some(Be=>Be.id===Q.id))||[];if(console.log("Calculated Attacker Lane:",fe),console.log("Calculated Target Lane:",ye),fe&&ye&&fe===ye)if(console.log("SUCCESS: Lanes match. Checking for Guardian..."),Re.dronesOnBoard[ye].some(Be=>C(Be,ye).keywords.has("GUARDIAN")))console.log("FAILURE: Target is protected by a Guardian drone."),J({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting other drones.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const Be={attacker:Fe,target:Q,targetType:"drone",lane:fe,attackingPlayer:n()},mt=C(Fe,fe),cn=Re.dronesOnBoard[fe].filter(It=>{const In=C(It,fe);return!It.isExhausted&&(In.speed>mt.speed||In.keywords.has("ALWAYS_INTERCEPTS"))&&It.id!==Q.id}).sort((It,In)=>It.class-In.class);let _t=null;cn.length>0&&(Q.class===void 0||cn[0].class<Q.class)&&(_t=cn[0]),_t?Wo({interceptor:_t,originalTarget:Q,onClose:()=>{ta({...Be,interceptor:_t}),Wo(null),Tt(null)}}):(ta(Be),Tt(null))}else console.log("FAILURE: Lanes do not match or could not be found."),J({title:"Invalid Target",text:"You can only attack targets in the same lane.",isBlocking:!0});return}if(We&&We.phase==="select_drones"&&ge){console.log("Action: Multi-move drone selection.");const{selectedDrones:fe,maxSelection:ye}=We;fe.some(Me=>Me.id===Q.id)?Lr(Me=>({...Me,selectedDrones:Me.selectedDrones.filter(Be=>Be.id!==Q.id)})):fe.length<ye&&Lr(Me=>({...Me,selectedDrones:[...Me.selectedDrones,Q]}));return}if(hr?.type==="destroy"&&ge){console.log("Action: Mandatory destruction."),ya({type:"destroy",target:Q,onConfirm:()=>Nu(Q),onCancel:()=>ya(null),text:`Are you sure you want to destroy your ${Q.name}?`});return}if(ge&&Qe==="action"&&t()&&!ht[`${n()}Passed`]){if(Q.isExhausted){console.log("Action prevented: Drone is exhausted.");return}Fe?.id===Q.id?(console.log("Action: Deselecting drone",Q.name),Tt(null)):(console.log("Action: Selecting drone",Q.name),Tt(Q),xa(),Ht());return}console.log("Action: Fallback - showing drone details."),ve(Q)},Tu=(B,Q,ge)=>{if(ur&&ga.some(fe=>fe.id===B.id)){Xr({ability:ur.ability,sectionName:ur.sectionName,target:B});return}if(He&&ga.some(fe=>fe.id===B.id)){Eu(He.ability,He.drone,B);return}if(Rt&&Yn.some(fe=>fe.id===B.id)){const fe=ge?n():r();Ir({card:Rt,target:{...B,owner:fe}});return}if(Qe==="action"&&t()&&Fe&&!Fe.isExhausted&&!ge&&Q==="section"){console.log("Action: Attempting ship section attack."),console.log("Attacker selected:",Fe.name,`(ID: ${Fe.id})`),console.log("Target clicked:",B.name,`(Type: ${Q})`);const[fe]=Object.entries(Pe.dronesOnBoard).find(([ye,Te])=>Te.some(Me=>Me.id===Fe.id))||[];if(console.log("Calculated Attacker Lane:",fe),fe){console.log("SUCCESS: Found attacker lane. Checking for Guardian...");const ye=Re.dronesOnBoard[fe];if(ye&&ye.some(Me=>C(Me,fe).keywords.has("GUARDIAN")))console.log("FAILURE: Ship section is protected by a Guardian drone."),J({title:"Invalid Target",text:"This lane is protected by a Guardian drone. You must destroy it before targeting the ship section.",isBlocking:!0});else{console.log("SUCCESS: No Guardian. Checking for interception.");const Me={attacker:Fe,target:B,targetType:"section",lane:fe,attackingPlayer:n()},Be=C(Fe,fe),mt=Re.dronesOnBoard[fe].filter(_t=>{const It=C(_t,fe);return!_t.isExhausted&&(It.speed>Be.speed||It.keywords.has("ALWAYS_INTERCEPTS"))}).sort((_t,It)=>_t.class-It.class);let cn=null;mt.length>0&&(cn=mt[0]),cn?Wo({interceptor:cn,originalTarget:B,onClose:()=>{ta({...Me,interceptor:cn}),Wo(null),Tt(null)}}):(ta(Me),Tt(null))}}else console.log("FAILURE: Could not determine attacker lane."),J({title:"Invalid Attack",text:"Could not determine the attacking drone's lane.",isBlocking:!0});return}Q==="drone"&&ve(B)},np=(B,Q,ge)=>{if(B.stopPropagation(),He&&He.ability.targeting.type==="LANE"){const fe=ge?n():r();if(ga.some(ye=>ye.id===Q&&ye.owner===fe)){dr({ability:He.ability,drone:He.drone,target:{id:Q,owner:fe}});return}}if(We&&ge&&Yn.some(fe=>fe.id===Q)){const{phase:fe,sourceLane:ye,selectedDrones:Te}=We;if(fe==="select_source_lane"){Lr(Me=>({...Me,phase:"select_drones",sourceLane:Q}));return}if(fe==="select_destination_lane"){Pu(We.card,Te,ye,Q);return}}if(We&&We.card.effect.type==="SINGLE_MOVE"&&We.phase==="select_destination"&&ge){Yn.some(fe=>fe.id===Q)&&Hh(We.card,We.selectedDrone,We.sourceLane,Q);return}if(Rt&&Rt.targeting.type==="LANE"){const fe=ge?n():r();if(Yn.some(ye=>ye.id===Q&&ye.owner===fe)){Ir({card:Rt,target:{id:Q,owner:fe}});return}}if(Rt){Ht();return}if(He){xa();return}if(Qe==="deployment"&&ge)Qh(Q);else if(Qe==="action"&&ge&&Fe){const[fe]=Object.entries(Pe.dronesOnBoard).find(([Me,Be])=>Be.some(mt=>mt.id===Fe.id))||[];if(!fe)return;const ye=parseInt(fe.replace("lane",""),10),Te=parseInt(Q.replace("lane",""),10);Math.abs(ye-Te)===1?z({drone:Fe,from:fe,to:Q}):J({title:"Invalid Move",text:"Drones can only move to adjacent lanes.",isBlocking:!0})}},_l=B=>{if(!(Qe!=="action"||!t()||ht[`${n()}Passed`])&&!(Pe.energy<B.cost)){if(B.effect.type==="MULTI_MOVE"||B.effect.type==="SINGLE_MOVE"){We&&We.card.instanceId===B.instanceId?Ht():processCardPlay(B,null,n());return}if(Rt?.instanceId===B.instanceId)Ht();else if(B.name==="System Sabotage"){const Q=ke.getValidTargets(n(),null,B,Pe,Re);Sl({card:B,targets:Q,opponentState:Re}),_n(null),Tn(null),Tt(null)}else if(B.type==="Upgrade"){const Q=ke.getValidTargets(n(),null,B,Pe,Re);Q.length>0?(Vi({card:B,targets:Q}),_n(null),Tn(null),Tt(null)):J({title:"No Valid Targets",text:`There are no drone types that can accept the '${B.name}' upgrade right now.`,isBlocking:!0})}else B.targeting?(_n(B),Tt(null),Tn(null)):(Ir({card:B,target:null}),_n(null),Tn(null),Tt(null))}},io=async B=>{const Q=hr;await x("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!0}),ya(null);const ge=Q.count-1;ge<=0?(ni(null),Q.fromAbility):ni(fe=>({...fe,count:ge}))},rp=async B=>{await x("optionalDiscard",{playerId:n(),cardsToDiscard:[B],isMandatory:!1}),El(Q=>Q+1),ya(null)},_u=async()=>{console.log("[OPTIONAL DISCARD] Player completing optional discard phase"),El(0),await x("commitment",{playerId:n(),phase:"optionalDiscard",actionData:{completed:!0}})},Du=()=>{const B=actionProcessor?.getPhaseCommitmentStatus("optionalDiscard");return console.log("[OPTIONAL DISCARD] Commitment status:",B),B?.bothComplete||!1},Nu=B=>{const Q=ke.getLaneOfDrone(B.id,Pe);if(Q){let ge={...Pe,dronesOnBoard:{...Pe.dronesOnBoard}};ge.dronesOnBoard[Q]=ge.dronesOnBoard[Q].filter(ye=>ye.id!==B.id);const fe=ke.onDroneDestroyed(ge,B);Object.assign(ge,fe),ge.dronesOnBoard=ke.updateAuras(ge,l(),ba()),h(n(),ge)}ni(ge=>{const fe=ge.count-1;if(fe<=0){if(Au>ao.totals.cpuLimit){let Te={...Re},Me=Object.values(Re.dronesOnBoard).flat().length-P(Re,ro).totals.cpuLimit;for(let Be=0;Be<Me;Be++){const mt=Object.entries(Te.dronesOnBoard).flatMap(([un,oo])=>oo.map(ii=>({...ii,lane:un})));if(mt.length===0)break;const cn=Math.min(...mt.map(un=>un.class)),_t=mt.filter(un=>un.class===cn),It=_t[Math.floor(Math.random()*_t.length)];Te.dronesOnBoard[It.lane]=Te.dronesOnBoard[It.lane].filter(un=>un.id!==It.id);const In=ke.onDroneDestroyed(Te,It);Object.assign(Te,In)}Te.dronesOnBoard=ke.updateAuras(Te,s(),ba()),h(r(),Te)}return null}return{...ge,count:fe}}),ya(null)},ju=()=>{if(no.length===0){alert("The game log is empty.");return}const B=["Round","TimestampUTC","Player","Action","Source","Target","Outcome","DebugSource"],Q=no.map(Te=>[Te.round,Te.player,Te.actionType,Te.source,Te.target,Te.outcome,Te.debugSource||"N/A"].map(Be=>`"${String(Be).replace(/"/g,'""')}"`).join(",")),ge=[B.join(","),...Q].join(`
`),fe=new Blob([ge],{type:"text/csv;charset=utf-8;"}),ye=document.createElement("a");if(ye.download!==void 0){const Te=URL.createObjectURL(fe);ye.setAttribute("href",Te),ye.setAttribute("download",`drone-wars-log-${new Date().toISOString()}.csv`),ye.style.visibility="hidden",document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)}};return v.jsxs("div",{className:"h-screen bg-gray-950 text-white font-sans overflow-hidden flex flex-col bg-gradient-to-br from-gray-900 via-indigo-950 to-black relative",ref:Zr,onClick:()=>{xa(),Ht()},children:[v.jsx(NF,{visible:ei.visible,start:ei.start,end:ei.end,lineRef:Ji}),Cl.map(B=>v.jsx(jF,{top:B.top,left:B.left,size:B.size},B.id)),R.map(B=>v.jsx(dV,{droneData:B.droneData,startPos:B.startPos,endPos:B.endPos,config:B.config,onComplete:B.onComplete},B.id)),K.map(B=>v.jsx(iV,{position:B.position,color:B.color,intensity:B.intensity,onComplete:B.onComplete},B.id)),W.map(B=>v.jsx(oV,{visualType:B.visualType,startPos:B.startPos,endPos:B.endPos,duration:B.duration,onComplete:B.onComplete},B.id)),ie.map(B=>v.jsx(fV,{startPos:B.startPos,endPos:B.endPos,attackValue:B.attackValue,duration:B.duration,onComplete:B.onComplete},B.id)),L.map(B=>v.jsx(hV,{top:B.top,left:B.left,color:B.color,duration:B.duration,onComplete:B.onComplete},B.id)),he&&v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e4,cursor:"not-allowed",pointerEvents:"all",backgroundColor:"transparent"}}),v.jsx(vY,{localPlayerState:Pe,opponentPlayerState:Re,localPlayerEffectiveStats:ea,opponentPlayerEffectiveStats:ao,turnPhase:Qe,turn:Vn,passInfo:ht,firstPlayerOfRound:to,shieldsToAllocate:Jr,shieldsToRemove:Wi,shieldsToAdd:Xi,reallocationPhase:ai,totalLocalPlayerDrones:Ol,totalOpponentPlayerDrones:Au,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,currentPlayer:va,isMultiplayer:i,handlePlayerPass:Zh,handleReset:Yh,mandatoryAction:hr,multiSelectState:We,AI_HAND_DEBUG_MODE:T,setShowAiHandModal:N,onShowDebugModal:()=>M(!0)}),!t()&&(Qe==="deployment"||Qe==="action")&&v.jsx("div",{style:{position:"fixed",inset:0,background:"transparent",zIndex:40,cursor:"not-allowed"},onClick:B=>B.stopPropagation()}),v.jsx(SY,{localPlayerState:Pe,opponentPlayerState:Re,localPlacedSections:pr,opponentPlacedSections:ro,selectedCard:Rt,validCardTargets:Yn,abilityMode:He,validAbilityTargets:ga,multiSelectState:We,turnPhase:Qe,reallocationPhase:ai,shipAbilityMode:ur,hoveredTarget:Mh,selectedDrone:Fe,recentlyHitDrones:bl,potentialInterceptors:Zo,droneRefs:Qr,sectionRefs:bu,mandatoryAction:hr,gameEngine:ke,getLocalPlayerId:n,getOpponentPlayerId:r,isMyTurn:t,getPlacedSectionsForEngine:ba,passInfo:ht,handleTargetClick:Tu,handleLaneClick:np,handleShipSectionClick:wu,handleShipAbilityClick:ep,handleTokenClick:tp,handleAbilityIconClick:Jh,setHoveredTarget:hu}),v.jsx(wF,{localPlayerState:Pe,localPlayerEffectiveStats:ea,sortedLocalActivePool:Uh,gameLog:no,footerView:Za,isFooterOpen:vl,multiSelectState:We,selectedCard:Rt,turnPhase:Qe,mandatoryAction:hr,handleFooterButtonClick:qh,handleCardClick:_l,cancelCardSelection:Ht,downloadLogAsCSV:ju,getLocalPlayerId:n,isMyTurn:t,hoveredCardId:Yi,setHoveredCardId:On,setIsViewDiscardModalOpen:qi,setIsViewDeckModalOpen:ha,handleToggleDroneSelection:Wh,selectedDrone:Fe,setViewUpgradesModal:fr,handleConfirmMandatoryDiscard:io,setConfirmationModal:ya,turn:Vn,passInfo:ht,validCardTargets:Yn,gameEngine:ke,opponentPlayerState:Re,setAiDecisionLogToShow:es,optionalDiscardCount:$h,handleRoundStartDraw:_u,handleRoundStartDiscard:rp,checkBothPlayersHandLimitComplete:Du}),k&&v.jsx(Hi,{title:k.title,text:k.text,onClose:k.onClose===null?null:k.onClose||(()=>J(null)),children:k.children}),v.jsx(UF,{show:pe,firstPlayerOfRound:to,localPlayerId:n(),localPlayerName:Pe.name,opponentPlayerName:Re.name,turn:Vn,firstPasserOfPreviousRound:xu,onContinue:Kh}),v.jsx(zF,{show:ue,firstPlayerOfRound:to,localPlayerId:n(),localPlayerName:Pe.name,opponentPlayerName:Re.name,onContinue:Xh}),v.jsx(GF,{show:de,onContinue:()=>rt(!1)}),v.jsx(HF,{show:!!Le,phase:Le,opponentName:Re.name,roomCode:null}),v.jsx(KF,{deploymentConfirmation:F,show:!!F,onCancel:()=>ne(null),onConfirm:async()=>{if(!F)return;const{lane:B}=F;ne(null),await Ou(B)}}),v.jsx(XF,{moveConfirmation:me,show:!!me,onCancel:()=>z(null),onConfirm:async()=>{if(!me)return;const{drone:B,from:Q,to:ge}=me;await x("move",{droneId:B.id,fromLane:Q,toLane:ge,playerId:n()}),z(null),Tt(null)}}),v.jsx(QF,{interceptionModal:ml,show:!!ml,onClose:ml?.onClose}),v.jsx(WF,{choiceData:Qo,show:!!Qo,onIntercept:B=>{ta({...Qo.attackDetails,interceptor:B}),Qa(null)},onDecline:()=>{ta(Qo.attackDetails),Qa(null)},gameEngine:ke,turnPhase:Qe,isMyTurn:t,passInfo:ht,getLocalPlayerId:n,localPlayerState:Pe,shipAbilityMode:ur,droneRefs:Qr,mandatoryAction:hr}),v.jsx(BF,{isOpen:!!ae,drone:ae,onClose:()=>ve(null)}),v.jsx($F,{report:Fi,show:!!Fi,onClose:()=>kr(null)}),pa&&v.jsx(LF,{report:pa,onClose:()=>Jo(null)}),v.jsx(VF,{decisionLog:gl,show:!!gl,onClose:()=>es(null),getLocalPlayerId:n}),v.jsx(FF,{winner:Dn,localPlayerId:n(),show:Dn&&kt,onClose:()=>ft(!1)}),v.jsx(YF,{mandatoryAction:hr,effectiveStats:ea,show:hr&&ri,onClose:()=>rs(!1)}),v.jsx(qF,{confirmationModal:as,show:!!as}),v.jsx(DF,{viewUpgradesModal:ns,setViewUpgradesModal:fr,destroyUpgradeModal:mu,setDestroyUpgradeModal:Sl,upgradeSelectionModal:kh,setUpgradeSelectionModal:Vi,resolveCardPlay:Cu,getLocalPlayerId:n,cancelCardSelection:Ht}),v.jsx(ZF,{cardConfirmation:At,show:!!At,onCancel:()=>Ir(null),onConfirm:async()=>await Cu(At.card,At.target,n())}),v.jsx(JF,{abilityConfirmation:ti,show:!!ti,onCancel:()=>dr(null),onConfirm:()=>{Eu(ti.ability,ti.drone,ti.target),dr(null)}}),v.jsx(tV,{opponentPlayerState:Re,show:j,debugMode:T,onClose:()=>N(!1)}),v.jsx(nV,{show:D,onClose:()=>M(!1),gameStateManager:S,gameDataService:O}),v.jsx(kw,{isOpen:Fr,onClose:()=>ha(!1),cards:Pe.deck,title:"Remaining Cards in Deck",shouldSort:!0}),v.jsx(kw,{isOpen:Xo,onClose:()=>qi(!1),cards:Pe.discardPile,title:"Discard Pile",shouldSort:!1}),v.jsx(IF,{isOpen:!!Ki,onClose:Ki?.onCancel||(()=>ln(null)),onConfirm:Ki?.onConfirm||(()=>{}),selectionData:Ki}),v.jsx(eV,{shipAbilityConfirmation:Rr,show:!!Rr,onCancel:()=>Xr(null),onConfirm:async()=>await zh(Rr.ability,Rr.sectionName,Rr.target)}),v.jsx(MF,{isVisible:!1,currentPlayer:va,gameMode:e.gameMode,roomCode:null,lastAction:null,localPlayerState:Pe,opponentPlayerState:Re,getLocalPlayerId:n})]})};function pV(){const{gameState:e}=Ii(),[t,n]=E.useState(!0),r=E.useRef(!1);if(E.useEffect(()=>{const i=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(i)},[]),E.useEffect(()=>{r.current?console.log(" GameFlowManager already initialized, skipping..."):(Bc.initialize(Ye,Ye.actionProcessor,()=>e.gameMode!=="local",la),Ye.setGameFlowManager(Bc),r.current=!0,console.log(" GameFlowManager initialized in AppRouter"))},[e.gameMode]),t)return v.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1a1a1a",color:"#ffffff",fontFamily:"Arial, sans-serif"},children:v.jsx("div",{children:"Loading Drone Wars..."})});switch(e.appState){case"menu":return v.jsx(NA,{});case"lobby":return v.jsx(vR,{});case"inGame":switch(e.turnPhase){case"droneSelection":return v.jsx(xR,{});case"deckSelection":return v.jsx(SR,{});case"deckBuilding":return v.jsx(yY,{});case"placement":return v.jsx(ER,{});case"gameInitializing":return v.jsx(Rw,{});default:return v.jsx(Rw,{})}default:return console.warn("Unknown app state:",e.appState,"defaulting to menu"),v.jsx(NA,{})}}oM.createRoot(document.getElementById("root")).render(v.jsx(Lw.StrictMode,{children:v.jsx(pV,{})}));export{Vt as G,Pn as f};
